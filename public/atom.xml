<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leo Lan的博客</title>
  <subtitle>有时候正是不报期望的人做出了人们不敢期望的事！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://leolan.coding.me/"/>
  <updated>2016-10-25T04:26:22.390Z</updated>
  <id>http://leolan.coding.me/</id>
  
  <author>
    <name>Leo Lan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Ruby2.3.1安装</title>
    <link href="http://leolan.coding.me/2016/10/31/2016-10-21-ruby_dev_build/"/>
    <id>http://leolan.coding.me/2016/10/31/2016-10-21-ruby_dev_build/</id>
    <published>2016-10-31T04:22:53.259Z</published>
    <updated>2016-10-25T04:26:22.390Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ubuntu-16"><a href="#Ubuntu-16" class="headerlink" title="Ubuntu 16"></a>Ubuntu 16</h1><p>安装ruby环境<br><code>sudo apt-get install ruby ruby-dev</code><br>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>
<hr>
<h1 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h1><p><code>yum list ruby</code>看看版本是多少，版本太低就源码安装。<br><figure class="highlight plain"><figcaption><span>install openssl* openssl-devel zlib-devel gcc gcc-c++ make autoconf readline-devel curl-devel expat-devel gettext-devel -y```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">关闭iptables和SELINUX（不关闭也是可以的）</div><div class="line">`service iptables stop`</div><div class="line">`setenforce 0`</div><div class="line">`vi /etc/sysconfig/selinux`     修改  SELINUX=disabled</div><div class="line">安装：</div></pre></td></tr></table></figure></p>
<p>wget <a href="http://ftp.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.gz" target="_blank" rel="external">http://ftp.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.gz</a><br>tar zxvf ruby-2.3.1.tar.gz<br>cd ruby-2.3.1<br>./configure –enable-shared –enable-pthread –prefix=/usr/local/ruby<br>make &amp;&amp; make install<br><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">编译时如果报错如下：</div><div class="line">ossl_pkey_ec.c:<span class="number">815</span>: error: ‘EC_GROUP_new_curve_GF2m' undeclared (first <span class="keyword">use</span> <span class="keyword">in</span> this <span class="keyword">function</span>)</div><div class="line">需要安装补丁，也就是替换两个ssl库文件，以下为该补丁文件打包下载地址</div><div class="line">详见：https:<span class="comment">//bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808</span></div><div class="line">解决方法：</div></pre></td></tr></table></figure></p>
<p>cd ruby-2.3.1<br>wget –no-check-certificate <a href="https://bugs.ruby-lang.org/projects/rubytrunk/repository/revisions/41808/raw/ext/openssl/ossl_pkey_ec.c" target="_blank" rel="external">https://bugs.ruby-lang.org/projects/rubytrunk/repository/revisions/41808/raw/ext/openssl/ossl_pkey_ec.c</a><br>wget –no-check-certificate <a href="https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808/raw/test/openssl/test_pkey_ec.rb" target="_blank" rel="external">https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808/raw/test/openssl/test_pkey_ec.rb</a><br>mv ext/openssl/ossl_pkey_ec.c  ext/openssl/ossl_pkey_ec.c.bak<br>cp ossl_pkey_ec.c ext/openssl/<br>mv test/openssl/test_pkey_ec.rb test/openssl/test_pkey_ec.rb.bak<br>cp test_pkey_ec.rb  test/openssl/<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">重新编译：</div><div class="line">`<span class="keyword">make</span> &amp;&amp; <span class="keyword">make</span> install`</div><div class="line"></div><div class="line">将<span class="keyword">ruby</span>命令集加入系统环境变量</div></pre></td></tr></table></figure></p>
<p>echo “PATH=$PATH:/usr/local/ruby/bin;export PATH” &gt;&gt; /etc/profile<br>source /etc/profile<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">检查<span class="keyword">ruby</span>版本</div><div class="line">`<span class="keyword">ruby</span> -v`</div><div class="line">`gem --<span class="keyword">version</span>`</div><div class="line"> irb     环境测试</div><div class="line">irb(main):<span class="number">001</span>:<span class="number">0</span>&gt; <span class="number">3</span>+<span class="number">5</span></div><div class="line">=&gt; <span class="number">8</span></div><div class="line">irb(main):<span class="number">002</span>:<span class="number">0</span>&gt; puts <span class="string">"hello world!"</span></div><div class="line">hello world!</div><div class="line">irb(main):<span class="number">001</span>:<span class="number">0</span>&gt;<span class="keyword">exit</span></div><div class="line"></div><div class="line">---</div><div class="line"></div><div class="line"># Mac10.<span class="number">12</span> #</div><div class="line">xcode升级到<span class="number">8.0</span>及以上版本</div><div class="line">不要用mac自带的<span class="keyword">ruby</span>及brew方式安装<span class="keyword">ruby</span>，容易出各种错误。</div><div class="line">安装rvm（<span class="keyword">ruby</span>的版本控制器）http<span class="variable">s:</span>//github.<span class="keyword">com</span>/rvm/rvm</div><div class="line">`curl -L http<span class="variable">s:</span>//<span class="built_in">get</span>.rvm.io | bash -s stable --autolibs=enabled --<span class="keyword">ruby</span> --rails --trace`</div><div class="line">可能会有警告，有提示把某一句加入/Users/用户名/.bash_profile 中，重开终端。`rvm -v`显示版本，说明安装成功。</div><div class="line"></div><div class="line">安装homebrew（官网http://brew.<span class="keyword">sh</span>/index_zh-<span class="keyword">cn</span>.html）http<span class="variable">s:</span>//github.<span class="keyword">com</span>/Homebrew/homebrew</div><div class="line">/usr/bin/<span class="keyword">ruby</span>使用的是mac自带的<span class="number">2.0</span>版本的<span class="keyword">ruby</span>，也可以直接用<span class="keyword">ruby</span>使用新版本的<span class="keyword">ruby</span>。</div><div class="line">```/usr/bin/<span class="keyword">ruby</span> -<span class="keyword">e</span> <span class="string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></div></pre></td></tr></table></figure></p>
<p><code>brew -v</code></p>
<p>列出ruby可安装的版本信息<br><code>rvm list known</code><br>安装一个ruby版本<br><code>rvm install 2.3.1</code><br>如果想设置为默认版本，可以用这条命令来完成<br><code>rvm use 2.3.1 --default</code>     一般上一步安装好久已经设为默认了<br>查看已安装的ruby<br><code>rvm list</code><br>卸载一个已安装ruby版本<br><code>rvm remove 2.3.1</code><br><code>ruby -v</code><br>会发现版本号变成最新的啦！</p>
<p>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>
<p>安装各种扩展（可选）<br>rails：ruby web框架<br><code>gem install rails</code></p>
<hr>
<h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>直接到官网下载：<br><a href="http://rubyinstaller.org/downloads" target="_blank" rel="external">http://rubyinstaller.org/downloads</a><br><a href="http://www.ruby-lang.org/zh_cn/downloads/" target="_blank" rel="external">http://www.ruby-lang.org/zh_cn/downloads/</a> （源码）<br>安装时勾选自动添加PATH，安装完成后重启生效。<br>也可以cmd运行 <code>set a = b</code> 然后重开cmd，环境变量就生效了。</p>
<hr>
<h1 id="Ruby源"><a href="#Ruby源" class="headerlink" title="Ruby源"></a>Ruby源</h1><p>国外源如果屏蔽了，更改gem安装源到淘宝，每条命令都有成功提示<br><code>gem update --system</code>     #升级gem版本<br><code>gem uninstall rubygems-update</code>    #移除gem升级脚本<br><code>gem sources --remove https://rubygems.org/</code><br><code>gem sources -a https://ruby.taobao.org/</code><br><code>gem sources -l</code><br>windows 不要更换源，添加不了淘宝源。<br>Mac 如果报-SSL错误请把https改为http。<br><strong><em> CURRENT SOURCES </em></strong><br><a href="http://ruby.taobao.org/" target="_blank" rel="external">http://ruby.taobao.org/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Ubuntu-16&quot;&gt;&lt;a href=&quot;#Ubuntu-16&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu 16&quot;&gt;&lt;/a&gt;Ubuntu 16&lt;/h1&gt;&lt;p&gt;安装ruby环境&lt;br&gt;&lt;code&gt;sudo apt-get install rub
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>OpenResty（高性能web服务器）</title>
    <link href="http://leolan.coding.me/2016/10/31/2016-10-21-OpenResty_install/"/>
    <id>http://leolan.coding.me/2016/10/31/2016-10-21-OpenResty_install/</id>
    <published>2016-10-31T04:22:53.243Z</published>
    <updated>2016-10-25T04:21:58.702Z</updated>
    
    <content type="html"><![CDATA[<h1 id="OpenResty"><a href="#OpenResty" class="headerlink" title="OpenResty"></a>OpenResty</h1><p>参考资料：</p>
<p>官方: <a href="http://openresty.org/" target="_blank" rel="external">http://openresty.org/</a><br>Github: <a href="https://github.com/agentzh/ngx_openresty" target="_blank" rel="external">https://github.com/agentzh/ngx_openresty</a>      <a href="https://github.com/openresty/" target="_blank" rel="external">https://github.com/openresty/</a></p>
<p>视频学习：<a href="http://www.stuq.org/course/detail/1015" target="_blank" rel="external">http://www.stuq.org/course/detail/1015</a></p>
<p>OpenResty最佳实践：<a href="https://moonbingbing.gitbooks.io/openresty-best-practices/content/" target="_blank" rel="external">https://moonbingbing.gitbooks.io/openresty-best-practices/content/</a> （<a href="https://github.com/moonbingbing/openresty-best-practices）" target="_blank" rel="external">https://github.com/moonbingbing/openresty-best-practices）</a></p>
<hr>
<h1 id="安装OpenResty"><a href="#安装OpenResty" class="headerlink" title="安装OpenResty"></a>安装OpenResty</h1><p>默认安装路径如下<code>/usr/local/openresty/</code></p>
<p>OpenResty，也被称为“ngx_openresty”，是一个基于Nginx的核心Web应用程序服务器，它包含了大量的第三方的Nginx模块和大部分系统依赖包。 OpenResty不是Nginx的分支，它只是一个软件包。主要有章亦春维护。<br>为什么是OpenResty？<br>OpenResty允许开发人员使用lua编程语言构建现有的Nginx的C模块，支持高流量的应用程序。</p>
<p>依赖的软件包：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">perl</span> 5<span class="selector-class">.6</span><span class="selector-class">.1</span>+</div><div class="line"><span class="selector-tag">libreadline</span></div><div class="line"><span class="selector-tag">libpcre</span></div><div class="line"><span class="selector-tag">libssl</span></div></pre></td></tr></table></figure></p>
<p>Debian 和 Ubuntu系统：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-<span class="built_in">get</span> install libreadline-<span class="built_in">dev</span> libncurses5-<span class="built_in">dev</span> libpcre3-<span class="built_in">dev</span> libssl-<span class="built_in">dev</span> perl make</div></pre></td></tr></table></figure></p>
<p>Fedora 、RedHat 和 centos系统：<br><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">yum</span> <span class="comment">install</span> <span class="comment">readline</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">pcre</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">openssl</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">gc</span><span class="literal">-</span><span class="comment">c</span><span class="literal">+</span><span class="literal">+</span></div></pre></td></tr></table></figure></p>
<p>下载OpenResty<br>版本选择：<a href="https://openresty.org/en/download.html" target="_blank" rel="external">https://openresty.org/en/download.html</a><br><figure class="highlight plain"><figcaption><span>http://openresty.org/download/ngx_openresty-1.5.8.1.tar.gz```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">解压、编译、安装：</div></pre></td></tr></table></figure></p>
<p>tar xzvf ngx_openresty-1.5.8.1.tar.gz<br>cd ngx_openresty-1.5.8.1/<br>./configure –with-luajit<br>make<br>make install<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">另外的配置选项：</div></pre></td></tr></table></figure></p>
<p>./configure –prefix=/opt/openresty<br>–with-luajit<br>–without-http_redis2_module<br>–with-http_iconv_module<br>–with-http_postgres_module<br>-j2<br>–help to see more options<br>```<br>此时安装完成，打开localhost就可以看到nginx页面了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;OpenResty&quot;&gt;&lt;a href=&quot;#OpenResty&quot; class=&quot;headerlink&quot; title=&quot;OpenResty&quot;&gt;&lt;/a&gt;OpenResty&lt;/h1&gt;&lt;p&gt;参考资料：&lt;/p&gt;
&lt;p&gt;官方: &lt;a href=&quot;http://openresty
    
    </summary>
    
    
  </entry>
  
</feed>
