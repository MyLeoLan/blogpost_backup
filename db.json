{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/.nojekyll","path":".nojekyll","modified":1,"renderable":0},{"_id":"source/Staticfile","path":"Staticfile","modified":1,"renderable":0},{"_id":"source/README.md","path":"README.md","modified":1,"renderable":0},{"_id":"source/baidu_verify_dc4dBM4StW.html","path":"baidu_verify_dc4dBM4StW.html","modified":1,"renderable":0},{"_id":"source/googled7e43f3624e0f703.html","path":"googled7e43f3624e0f703.html","modified":1,"renderable":0},{"_id":"source/robots.txt","path":"robots.txt","modified":1,"renderable":0},{"_id":"source/baidu_urls.txt","path":"baidu_urls.txt","modified":1,"renderable":0},{"_id":"source/200.png","path":"200.png","modified":1,"renderable":0},{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/love/index.html","path":"love/index.html","modified":1,"renderable":0},{"_id":"source/love/css/style.css","path":"love/css/style.css","modified":1,"renderable":0},{"_id":"source/love/renxi/default.css","path":"love/renxi/default.css","modified":1,"renderable":0},{"_id":"source/love/renxi/functions.js","path":"love/renxi/functions.js","modified":1,"renderable":0},{"_id":"source/love/renxi/jscex-async.min.js","path":"love/renxi/jscex-async.min.js","modified":1,"renderable":0},{"_id":"source/love/renxi/jscex-async-powerpack.min.js","path":"love/renxi/jscex-async-powerpack.min.js","modified":1,"renderable":0},{"_id":"source/love/renxi/jscex-builderbase.min.js","path":"love/renxi/jscex-builderbase.min.js","modified":1,"renderable":0},{"_id":"source/love/renxi/jscex-jit.js","path":"love/renxi/jscex-jit.js","modified":1,"renderable":0},{"_id":"source/love/renxi/jscex.min.js","path":"love/renxi/jscex.min.js","modified":1,"renderable":0},{"_id":"source/love/renxi/love.js","path":"love/renxi/love.js","modified":1,"renderable":0},{"_id":"source/love/renxi/jscex-parser.js","path":"love/renxi/jscex-parser.js","modified":1,"renderable":0},{"_id":"themes/next5.0.1/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/css/harlem_shake_style.css","path":"css/harlem_shake_style.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"source/love/renxi/jquery.min.js","path":"love/renxi/jquery.min.js","modified":1,"renderable":0},{"_id":"themes/next5.0.1/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/duoshuo_embed.js","path":"js/src/duoshuo_embed.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/particle.js","path":"js/src/particle.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":1,"renderable":1},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"source/love/renxi.mp3","path":"love/renxi.mp3","modified":1,"renderable":0}],"Cache":[{"_id":"source/.nojekyll","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694628795},{"_id":"source/Staticfile","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694628812},{"_id":"source/404.html","hash":"5cee1b20c718932ce327e8d485d0c6895d4cf232","modified":1481514742206},{"_id":"source/README.md","hash":"c8aa77e69ef57dfb8d5e2f0b0e6a4f9f60fa7ae6","modified":1479694628811},{"_id":"source/baidu_verify_dc4dBM4StW.html","hash":"65cd22420b3ade918135bbedf65d58eb69cc7543","modified":1479694629210},{"_id":"source/googled7e43f3624e0f703.html","hash":"83ed1434e018ec841dabc903aa2f0a80679a889f","modified":1479694629217},{"_id":"source/robots.txt","hash":"7176945f1fc8d331b146f85196f93f772faddaad","modified":1479694629226},{"_id":"themes/next5.0.1/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1479694630997},{"_id":"themes/next5.0.1/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1479694631001},{"_id":"themes/next5.0.1/.gitignore","hash":"5f09fca02e030b7676c1d312cd88ce8fbccf381c","modified":1479694631004},{"_id":"source/baidu_urls.txt","hash":"ae528aed7af4bc5bde16b5f0a8a3ffaad207906f","modified":1479694629202},{"_id":"themes/next5.0.1/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1479694631008},{"_id":"themes/next5.0.1/.javascript_ignore","hash":"f9ea3c5395f8feb225a24e2c32baa79afda30c16","modified":1479694631012},{"_id":"themes/next5.0.1/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1479694631014},{"_id":"themes/next5.0.1/bower.json","hash":"5abc236d9cc2512f5457ed57c1fba76669eb7399","modified":1479694631025},{"_id":"themes/next5.0.1/README.en.md","hash":"565ba52b3825b85a9f05b41183caca7f18b741d4","modified":1479694631015},{"_id":"themes/next5.0.1/README.md","hash":"500b5606eb6a09c979d16128f8b00f4bf9bc95ac","modified":1479694631016},{"_id":"themes/next5.0.1/_config.yml","hash":"06f06377aea5eb68da2105551b889b7b836a753e","modified":1481514743091},{"_id":"source/_posts/.com.apple.timemachine.supported","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1481514742291},{"_id":"source/200.png","hash":"2064c91ebe67a61f166b5c629666821dee4c4462","modified":1479694628796},{"_id":"themes/next5.0.1/gulpfile.coffee","hash":"61ef0606a8134894d7ac796bc8d0fa4ba6a94483","modified":1479694631030},{"_id":"source/_posts/分类.txt","hash":"6f9164bb79791a5216b16ca85ed4c9816587595b","modified":1480399550225},{"_id":"source/categories/index.md","hash":"b1c5e548bbbfe2238c1760f84cea4303dce74a10","modified":1479694629214},{"_id":"source/guestbook/index.md","hash":"a13a107d9f14d36170fbf6a7c9c3f745546bb4a5","modified":1481178516025},{"_id":"themes/next5.0.1/package.json","hash":"877cb98025e59015532c4c9a04a33e2af4ad56f9","modified":1479694631301},{"_id":"source/CNAME","hash":"421dd061e84d4a84033fce7db79926b69f97ae1f","modified":1481090122298},{"_id":"source/about/index.md","hash":"39a88c9ba410ecc4699c51ee81b51420d5ef085c","modified":1481514742538},{"_id":"themes/next5.0.1/languages/de.yml","hash":"786afba25cfc98845a20d9901823ebeebcd1cbbf","modified":1479694631032},{"_id":"source/tags/index.md","hash":"3e5cb1f16ee1ffc5cd88cff819330acd9a1f073d","modified":1479694629230},{"_id":"themes/next5.0.1/languages/default.yml","hash":"767470a80dc257e23e14c3a78e8c52a46c9d6209","modified":1479694631036},{"_id":"themes/next5.0.1/languages/en.yml","hash":"40057d6608e825d06e0864bac4dcd27ed88ada87","modified":1479694631040},{"_id":"source/love/index.html","hash":"e1fb391ba75cfd1f17f14eac2ba66da970fda297","modified":1481514742681},{"_id":"themes/next5.0.1/languages/fr-FR.yml","hash":"1a084623c39de74301f3e92f9388a3a815a542ca","modified":1479694631041},{"_id":"themes/next5.0.1/languages/id.yml","hash":"147c01e41b931085ad14250fa900c2249dcbbdd7","modified":1479694631046},{"_id":"themes/next5.0.1/languages/ja.yml","hash":"a2c7b6301b5474aab798946fb700289df237c3cf","modified":1479694631047},{"_id":"themes/next5.0.1/languages/pt-BR.yml","hash":"462aa865ca3d479bcf6b363cba61247b50f230ff","modified":1479694631050},{"_id":"themes/next5.0.1/languages/ko.yml","hash":"ce8b047c89daae77c03482fc76f16ffec6bdbf2d","modified":1479694631048},{"_id":"themes/next5.0.1/languages/pt.yml","hash":"ca239b39bf65c9462e59d51b12f0fe566d453197","modified":1479694631052},{"_id":"themes/next5.0.1/languages/ru.yml","hash":"257d11e626cbe4b9b78785a764190b9278f95c28","modified":1479694631074},{"_id":"themes/next5.0.1/languages/zh-Hans.yml","hash":"cad0e904d21dd1a85ef78644a8a9baa48544e121","modified":1479694631080},{"_id":"themes/next5.0.1/languages/zh-tw.yml","hash":"6b1f345aaefc13e6723dc8a6741b59ac05c20dfd","modified":1479694631084},{"_id":"themes/next5.0.1/languages/zh-hk.yml","hash":"519ab3d817ec3bc5bfc91159c494b6b3c170bea7","modified":1479694631081},{"_id":"themes/next5.0.1/layout/index.swig","hash":"a7b6891c8afd2bc7119638918674947d063d719c","modified":1479694631290},{"_id":"themes/next5.0.1/layout/archive.swig","hash":"b5b59d70fc1563f482fa07afd435752774ad5981","modified":1479694631285},{"_id":"themes/next5.0.1/layout/category.swig","hash":"6422d196ceaff4220d54b8af770e7e957f3364ad","modified":1479694631286},{"_id":"themes/next5.0.1/layout/_layout.swig","hash":"b90b7c35b6e8a9e484c65cceba188ef9bf1de378","modified":1480926453514},{"_id":"themes/next5.0.1/layout/page.swig","hash":"718d7182c2b5a94e519f7f5ff1035ee4e059c784","modified":1479694631294},{"_id":"themes/next5.0.1/scripts/merge-configs.js","hash":"0c56be2e85c694247cfa327ea6d627b99ca265e8","modified":1479694631310},{"_id":"themes/next5.0.1/layout/schedule.swig","hash":"1f1cdc268f4ef773fd3ae693bbdf7d0b2f45c3a3","modified":1479694631296},{"_id":"themes/next5.0.1/layout/post.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1479694631295},{"_id":"themes/next5.0.1/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1479694632313},{"_id":"themes/next5.0.1/layout/tag.swig","hash":"07cf49c49c39a14dfbe9ce8e7d7eea3d4d0a4911","modified":1479694631297},{"_id":"themes/next5.0.1/layout/_custom/sidebar.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1480905265332},{"_id":"source/_drafts/Python/2016-12-10-Python入门.md","hash":"b229c7b538884562e29fb997eed963b856d5aba9","modified":1481514742211},{"_id":"source/_drafts/Shell/2016-12-10-Shell编程入门.md","hash":"3bc71fd2609b6bc87c57c0507a186eaf782ace19","modified":1481514742275},{"_id":"source/_posts/Dev/2016-11-03-开发相关网页链接.md","hash":"e9ee57d44f1c67dc9b98ef4d40e1f50bb9d74ce8","modified":1479694628817},{"_id":"themes/next5.0.1/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1479694632319},{"_id":"source/_posts/Dev/2016-11-08-用github写开源书籍.md","hash":"987eb9d382eeb4ee1ecb57a1b008f01885318904","modified":1479694628825},{"_id":"themes/next5.0.1/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1479694632316},{"_id":"source/_posts/Dev/2016-11-10-jenkins.md","hash":"d45c312974800c69c6720fa30b084c4e6533a1f6","modified":1479694628832},{"_id":"source/_posts/Dev/2016-12-08-React-Native.md","hash":"0fd2e48482381e3da25ad3542f92c86c374e60fc","modified":1481169166367},{"_id":"source/_posts/Dev/2016-11-04-Git教程.md","hash":"675163df12d510e4cbf1c2b40e1d3e6490280a38","modified":1480303030168},{"_id":"source/_posts/NAS/2016-11-29-群晖DSM-Synology.md","hash":"9652153116112116c45bf269542bb72d815e7991","modified":1480902296026},{"_id":"source/_posts/VPN_墙/2016-11-01-穷人VPN.md","hash":"a48acf1f55ff42788ac07ba51f0af361a103a2c6","modified":1479694628837},{"_id":"source/_posts/web服务器/2016-10-21-OpenResty_install.md","hash":"8bcc14de468be9073022c3ce108bbdc4f242016b","modified":1479694628843},{"_id":"source/_posts/数据库/2016-11-11-数据库主主互备（高可用）.md","hash":"47568fe4227bc0f181214b726fa2df40132cdb9d","modified":1479694628903},{"_id":"source/_posts/数据库/2016-11-10-MongoDB数据库.md","hash":"cab7f952d77c2f605916f01f02fe6820ccb33fc5","modified":1479694628899},{"_id":"source/_posts/文章阅读/2016-11-02-文章阅读链接更新页.md","hash":"3f65baa38fc84a5cf5dc48a2906a86a32fe681df","modified":1479694628932},{"_id":"source/_posts/数据库/2016-11-03-MySQL数据库.md","hash":"634c7086630af26b193ab25487f27c53a409aac6","modified":1479694628894},{"_id":"source/_posts/文章阅读/2016-11-02-Linux学习流程发展.md","hash":"dc7474e715d2e7cde51f5220a6f4464145b725ae","modified":1479694628908},{"_id":"source/_posts/文章阅读/2016-11-02-高并发系统之服务器降级.md","hash":"8dd1fd7d449af1fe6e42ea2e06d1fb4fa605566f","modified":1479694628946},{"_id":"source/_posts/文章阅读/2016-11-02-用软文思维写工作总结.md","hash":"08e48ecba1503b522a5fac1b73c641af555298d2","modified":1479694628937},{"_id":"source/_posts/文章阅读/2016-11-07-Linux-发行版汇总.md","hash":"da5c10b42d580f2ab25fd3ca394ac872a8580f67","modified":1479694628951},{"_id":"source/_posts/杂项/2016-11-03-vim常用命令.md","hash":"084a3cde450d16cf8c4a5ad7eca6ad127d0168f7","modified":1479694628955},{"_id":"source/_posts/文章阅读/2016-11-02-程序员怎样才能找到一个靠谱的创业公司.md","hash":"9df793e9134757e8fb78cf59908ad40247681c86","modified":1479694628942},{"_id":"source/_posts/杂项/2016-11-11-常用网站链接.md","hash":"eda2e02063acb6ebe6cf418614d51b485887c137","modified":1481527077311},{"_id":"source/_posts/文章阅读/2016-12-08-创业手册.md","hash":"124650f54cc33b3c3c0759d0b110fa3d2e24596c","modified":1481180727010},{"_id":"source/_posts/杂项/2016-11-03-工具集.md","hash":"d059ebed7edd26991f074d2d1748b0228ed540ab","modified":1479694628960},{"_id":"source/_posts/杂项/2016-11-08-Linux常见面试题.md","hash":"f82715be3bab47f25fd5dc1493106d146f50a719","modified":1479694628964},{"_id":"source/_posts/杂项/2016-12-06-博客中插入音乐-视频.md","hash":"da35ce54e27fa1bc6e6189924b8aa530b02e0bbb","modified":1481073492267},{"_id":"source/_posts/杂项/2016-11-25-操作系统常用配置设置.md","hash":"83e3cf5e22f2adee30d40f44a57c5d58c2677b77","modified":1481265454717},{"_id":"source/_posts/环境搭建/2016-11-02-CentOS搭建PHP环境.md","hash":"1ef5598134a6ea8bdc2e56045b84b6b3fa7d11f7","modified":1479694629007},{"_id":"source/_posts/环境搭建/2016-10-21-Ruby开发环境搭建.md","hash":"6b446d655b53f515befbbcf7ba9c0ce50a1fa8d3","modified":1479694628976},{"_id":"source/_posts/环境搭建/2016-11-02-CentOS-7安装配置LAMP服务器.md","hash":"6d7f8954c06df54937163bffa5d3e765f25437c7","modified":1479694628980},{"_id":"source/_posts/环境搭建/2016-11-02-Node-js开发环境搭建.md","hash":"84f7a0dda24258650a8edd929950eca269a769a3","modified":1479694629013},{"_id":"source/_posts/环境搭建/2016-11-08-Zibbix监控.md","hash":"b9ffadc10b8adecb11bf16c88afa64bc7ce390fa","modified":1479694629018},{"_id":"source/_posts/环境搭建/2016-11-08-检查Linux服务器性能.md","hash":"7255f3819ed271c113ffe9967fd2fc79d53183fe","modified":1479694629046},{"_id":"source/_posts/环境搭建/2016-11-08-用Jekyll搭建博客.md","hash":"0c65437ef40571fa6aaf9c910f4e07644c3f8b51","modified":1481093522325},{"_id":"source/_posts/环境搭建/2016-11-10-GitLab服务器搭建.md","hash":"f5c39b93a21844f6a56e7c0cdd96f342fbf021d9","modified":1479694629067},{"_id":"source/_posts/环境搭建/2016-11-19-Tomcat.md","hash":"14064bf179c4bf9e3d7d7921f5234f5e601f32b5","modified":1479694629075},{"_id":"source/_posts/环境搭建/2016-11-17-Mac常用工具-技巧.md","hash":"0a1253aaf291df1404ab43e58e873dae533d031f","modified":1480043736930},{"_id":"source/_posts/环境搭建/2016-11-19-java-jdk环境搭建.md","hash":"ac4c09f0ea7077e5ffd726bce81834f312845efb","modified":1479694629080},{"_id":"source/_posts/环境搭建/2016-11-21-搭建shadowsocks服务器.md","hash":"feb8863e882bbf1b4c3a7dc50bcaaf0bb7567b58","modified":1479720716916},{"_id":"source/_posts/系统管理/2016-11-02-Linux内核升级.md","hash":"7416e9d8a6016a578ac815d298c11bc5d705bf3e","modified":1479694629104},{"_id":"source/_posts/系统管理/2016-11-02-grub引导修复.md","hash":"e02c928d58ee9bf0c0287cd3cb7c5b8727cf4d64","modified":1479694629119},{"_id":"source/_posts/系统管理/2016-11-02-Centos网络端口.md","hash":"143b088dba1e54f424b5555be9af9cd79cb0df53","modified":1479694629099},{"_id":"source/_posts/环境搭建/2016-11-25-重装服务器系统基本配置.md","hash":"5bd9bc745a46b5108c90f4fbc91cb2e23e04195a","modified":1480055420064},{"_id":"source/_posts/系统管理/2016-11-02-iptables防火墙.md","hash":"5633e0eaf882974ce37810bb95bafd16cc25e3d5","modified":1479694629123},{"_id":"source/_posts/系统管理/2016-11-03-LVM磁盘管理.md","hash":"2ed2768876517c867910b16a16a19046ecc6dfc7","modified":1479694629127},{"_id":"source/_posts/系统管理/2016-11-11-swap分区转换.md","hash":"c2f8dd3722da9dec9fd6c2bf0a622e73bb9471d8","modified":1479694629136},{"_id":"source/_posts/系统管理/2016-11-02-VNC服务.md","hash":"971e2a079b9dc5f8c2d0e3cf500eeb549106f9aa","modified":1479694629115},{"_id":"source/_posts/系统管理/2016-11-18-Linux检测硬件信息脚本.md","hash":"9997eb882570eb8201f07c33617e241adfed4e8d","modified":1479694629146},{"_id":"source/_posts/系统管理/2016-11-17-Pytnon版本升级.md","hash":"99faf9d7c2316bb70354523bf7f88c58f66bbed4","modified":1479694629141},{"_id":"source/_posts/系统管理/2016-11-25-Linux常用命令.md","hash":"798764220e87cd02cf6578a03ac39d28f99a844d","modified":1481528394900},{"_id":"source/_posts/系统管理/2016-11-03-服务器入侵肉鸡发包.md","hash":"dcce440eedf689c2b139538a0f1240906fd65d95","modified":1479694629132},{"_id":"source/_posts/系统管理/2016-11-19-Linux各版本root本地密码破解.md","hash":"39cca3d5b8693876ac28d936d04931326c40fd29","modified":1479694629150},{"_id":"source/_posts/虚拟化/2016-11-03-Docker常用命令.md","hash":"8015cd2c2c830f6ce60570cd045834489ea70116","modified":1479694629160},{"_id":"source/_posts/系统管理/2016-11-02-SSH远程重装Centos系统.md","hash":"801a61d57b6eb49b5c6eb976937d63783a45da3f","modified":1479694629109},{"_id":"source/_posts/虚拟化/2016-11-03-Docker安装.md","hash":"0beeb0e6778ca7cf7e6a947f835182e5d42acae1","modified":1479694629155},{"_id":"source/_posts/虚拟化/2016-11-03-KVM虚拟化.md","hash":"29820e16db7e47fc63c9f105398e875e64baa510","modified":1479694629164},{"_id":"source/_posts/虚拟化/2016-11-03-tomcat单机多实例.md","hash":"cb51cf5dffc10c0e0b8538ee6a8e325ce17c4e78","modified":1479694629171},{"_id":"source/_posts/集群自动化/2016-11-03-集群、自动化链接更新页.md","hash":"2e69b3d7afe48c8a5b8b25e87c29baa5fe7da39c","modified":1479694629194},{"_id":"source/love/css/style.css","hash":"1e9e744dc49e40bb0f6914fba795721290310929","modified":1481514742551},{"_id":"source/love/renxi/default.css","hash":"d6236a5ccbb655a4b56f09359d38d8791cf3a74e","modified":1481514742705},{"_id":"source/love/renxi/functions.js","hash":"e218c3d4ff7e9197417e361ca880f6154b1f64db","modified":1481514742717},{"_id":"source/love/renxi/jscex-async.min.js","hash":"0e709db93a3c6ad1a59b14e906cf7d463b179d88","modified":1481514742961},{"_id":"source/love/renxi/jscex-async-powerpack.min.js","hash":"033e94c70ee9ede1afbe16d84719c0a309154d2a","modified":1481514742911},{"_id":"source/love/renxi/jscex-builderbase.min.js","hash":"bc568f8645624a9d52736a434b5ba816225b6cf3","modified":1481514742979},{"_id":"source/love/renxi/jscex-jit.js","hash":"13a6c3f7d2cad91b35e1eafc7d15d18fdacb198b","modified":1481514743010},{"_id":"source/love/renxi/jscex.min.js","hash":"9c360d252d6b4b38debdc6acec990ddbf1146f54","modified":1481514743039},{"_id":"themes/next5.0.1/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1479694631094},{"_id":"themes/next5.0.1/layout/_macro/post-collapse.swig","hash":"43c3433155ccd9abcbe7dce2e6bfa1f3a66af18b","modified":1479694631109},{"_id":"themes/next5.0.1/layout/_macro/post.swig","hash":"e2f8e2e561dd9ecbb41b27e8c388493eedeedbb1","modified":1481004460225},{"_id":"themes/next5.0.1/layout/_macro/reward.swig","hash":"d605dd356630f22e9b227d9878297920ad24020b","modified":1479694631118},{"_id":"source/love/renxi/love.js","hash":"fc91a042ff2f6aa1155bb8b3a768ab7ddff6ca07","modified":1481514743084},{"_id":"source/love/renxi/jscex-parser.js","hash":"b858660942bba307ee9292abca18d125f4356b66","modified":1481514743029},{"_id":"themes/next5.0.1/layout/_partials/comments.swig","hash":"7a3ef28678467c45ee9416b41b943252e8036285","modified":1479694631130},{"_id":"themes/next5.0.1/layout/_partials/footer.swig","hash":"cb0d8148eedfd4f67cdabb075a118955ff22552b","modified":1479694631135},{"_id":"themes/next5.0.1/layout/_macro/wechat-subscriber.swig","hash":"14e785adeb0e671ba0ff9a553e6f0d8def6c670c","modified":1479694631125},{"_id":"themes/next5.0.1/layout/_partials/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1479694631131},{"_id":"themes/next5.0.1/layout/_macro/sidebar.swig","hash":"dc0a8f815275ed65854349577af54baf7b74b76e","modified":1481178344881},{"_id":"themes/next5.0.1/layout/_partials/page-header.swig","hash":"39d613e5a9f8389d4ea52d6082502af8e833b9f2","modified":1479694631164},{"_id":"themes/next5.0.1/layout/_partials/head.swig","hash":"ca56f92e2fa82b03853869f5073ee1a5626a4796","modified":1479694631144},{"_id":"themes/next5.0.1/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1479694631168},{"_id":"themes/next5.0.1/layout/_partials/header.swig","hash":"d11f63e0d2c630eeb1a1d5284538f6f009b99089","modified":1480904562798},{"_id":"themes/next5.0.1/layout/_partials/search.swig","hash":"1431719d1dbba3f5ee385eebc46376d1a960b2d5","modified":1479694631172},{"_id":"themes/next5.0.1/layout/_scripts/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1479694631201},{"_id":"themes/next5.0.1/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1479694631312},{"_id":"themes/next5.0.1/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1479694631317},{"_id":"themes/next5.0.1/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1479694631331},{"_id":"themes/next5.0.1/scripts/tags/note.js","hash":"6752925eedbdb939d8ec4d11bdfb75199f18dd70","modified":1479694631337},{"_id":"themes/next5.0.1/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1479694631204},{"_id":"themes/next5.0.1/layout/_scripts/vendors.swig","hash":"0b91cadecead8e0b5211cc42b085998d94af503a","modified":1479694631284},{"_id":"themes/next5.0.1/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1479694631203},{"_id":"themes/next5.0.1/source/images/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1479694631582},{"_id":"themes/next5.0.1/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1479694631574},{"_id":"themes/next5.0.1/source/css/harlem_shake_style.css","hash":"1a9019e1c4f95d0519259382e636919ee4dfe9aa","modified":1481178305124},{"_id":"themes/next5.0.1/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1479694631592},{"_id":"themes/next5.0.1/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1479694631603},{"_id":"themes/next5.0.1/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1479694631598},{"_id":"themes/next5.0.1/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1479694631612},{"_id":"themes/next5.0.1/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1479694631607},{"_id":"themes/next5.0.1/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1479694631618},{"_id":"themes/next5.0.1/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1479694631620},{"_id":"themes/next5.0.1/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1479694631617},{"_id":"themes/next5.0.1/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1479694631621},{"_id":"themes/next5.0.1/source/images/loading.gif","hash":"266501370c9f7010d1af7ab0af596fd223757d1c","modified":1479787234963},{"_id":"source/_posts/环境搭建/2016-11-08-用Hexo搭建博客.md","hash":"70cbea4e4450da98f3301bbd79545fa25ef92207","modified":1481514742394},{"_id":"themes/next5.0.1/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1479694631584},{"_id":"themes/next5.0.1/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1479694631622},{"_id":"source/love/renxi/jquery.min.js","hash":"d1e1f3f0828fa66fb5744f42bc912694e06300f9","modified":1481514742786},{"_id":"themes/next5.0.1/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694631206},{"_id":"themes/next5.0.1/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694631206},{"_id":"themes/next5.0.1/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1479694631623},{"_id":"themes/next5.0.1/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694631509},{"_id":"themes/next5.0.1/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694631555},{"_id":"themes/next5.0.1/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694631503},{"_id":"themes/next5.0.1/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1479694631504},{"_id":"themes/next5.0.1/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1479694631147},{"_id":"themes/next5.0.1/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1479694631186},{"_id":"themes/next5.0.1/layout/_components/algolia-search/dom.swig","hash":"636f1181dd5887a70b4a08ca8f655d4e46635792","modified":1479694631094},{"_id":"themes/next5.0.1/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1479694631187},{"_id":"themes/next5.0.1/layout/_components/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1479694631089},{"_id":"themes/next5.0.1/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1479694631196},{"_id":"themes/next5.0.1/layout/_partials/share/baidushare.swig","hash":"0475588ec4da7745c9e229aa60eac21c0e3408f5","modified":1481176933661},{"_id":"themes/next5.0.1/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1479694631198},{"_id":"themes/next5.0.1/layout/_partials/share/jiathis.swig","hash":"5abd8b6ab32f12a6eea11b1d12eeb132daa6ebeb","modified":1481174451000},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics.swig","hash":"0a89c04055bade7baa5962f1d5aefe438d83a244","modified":1479694631209},{"_id":"themes/next5.0.1/layout/_scripts/third-party/comments.swig","hash":"82a2ac14d4200480a36bf10abcc3cc554ad744d6","modified":1479694631219},{"_id":"themes/next5.0.1/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1479694631207},{"_id":"themes/next5.0.1/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1479694631149},{"_id":"themes/next5.0.1/layout/_partials/search/localsearch.swig","hash":"ff5523d5dacaa77a55a24e50e6e6530c3b98bfad","modified":1479694631185},{"_id":"themes/next5.0.1/layout/_scripts/third-party/lean-analytics.swig","hash":"92dc60821307fc9769bea9b2d60adaeb798342af","modified":1479694631249},{"_id":"themes/next5.0.1/layout/_scripts/third-party/localsearch.swig","hash":"b460e27db3dcd4ab40b17d8926a5c4e624f293a9","modified":1479694631268},{"_id":"themes/next5.0.1/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1479694631205},{"_id":"themes/next5.0.1/layout/_scripts/third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1479694631281},{"_id":"themes/next5.0.1/source/css/_mixins/Pisces.styl","hash":"715d5b40dc52f319fe4bff0325beb874774d9bd9","modified":1479694631507},{"_id":"themes/next5.0.1/layout/_scripts/third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1479694631279},{"_id":"themes/next5.0.1/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1479694631554},{"_id":"themes/next5.0.1/layout/_scripts/third-party/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1479694631283},{"_id":"themes/next5.0.1/source/css/_variables/custom.styl","hash":"21d60cdd0dc9520dc340a87ea320d4825a353490","modified":1481007835589},{"_id":"themes/next5.0.1/source/css/_variables/Pisces.styl","hash":"32b9f83e4a28c5042188628f3cda6a23e7fb2739","modified":1479805775000},{"_id":"themes/next5.0.1/source/css/_mixins/base.styl","hash":"78a83c38f69a8747bb74e420e6c9eeef1ea76525","modified":1479694631509},{"_id":"themes/next5.0.1/source/css/_variables/base.styl","hash":"60a6bb6b9b158e014b53f6849c4085058f98c64b","modified":1480992768574},{"_id":"themes/next5.0.1/source/css/_custom/custom.styl","hash":"1bf59b2811688358a0512bc121923c9f62e772bf","modified":1480997306666},{"_id":"themes/next5.0.1/source/js/src/algolia-search.js","hash":"96b29f69b8b916b22f62c9959a117b5a968200a5","modified":1479694631635},{"_id":"themes/next5.0.1/source/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1479694631636},{"_id":"themes/next5.0.1/source/js/src/duoshuo_embed.js","hash":"ad5ae707f1b7831187e414d613570e46939ab1c6","modified":1481162425824},{"_id":"themes/next5.0.1/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1479694631637},{"_id":"themes/next5.0.1/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1479694631626},{"_id":"themes/next5.0.1/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1479694631639},{"_id":"themes/next5.0.1/source/js/src/post-details.js","hash":"2038f54e289b6da5def09689e69f623187147be5","modified":1479694631649},{"_id":"themes/next5.0.1/source/js/src/particle.js","hash":"ecf57818db68579e9cfd86248caa096ef7d4f11b","modified":1480926142539},{"_id":"themes/next5.0.1/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1479694632002},{"_id":"themes/next5.0.1/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1479694631652},{"_id":"themes/next5.0.1/source/js/src/utils.js","hash":"384e17ff857f073060f5bf8c6e4f4b7353236331","modified":1479694631665},{"_id":"themes/next5.0.1/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1479694632005},{"_id":"themes/next5.0.1/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1479694632029},{"_id":"themes/next5.0.1/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1479694632031},{"_id":"themes/next5.0.1/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1479694632004},{"_id":"themes/next5.0.1/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1479694632034},{"_id":"themes/next5.0.1/source/lib/font-awesome/.bower.json","hash":"c1072942459fa0880e8a33a1bd929176b62b4171","modified":1479694632025},{"_id":"themes/next5.0.1/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1479694631681},{"_id":"themes/next5.0.1/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1479694632036},{"_id":"themes/next5.0.1/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1479694632003},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1479694632169},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1479694632170},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1479694632175},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1479694632171},{"_id":"themes/next5.0.1/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1479694632130},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1479694632189},{"_id":"themes/next5.0.1/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1479694632218},{"_id":"themes/next5.0.1/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1479694632220},{"_id":"themes/next5.0.1/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1479694632187},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1479694632276},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1479694632292},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1479694632309},{"_id":"themes/next5.0.1/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1479694632167},{"_id":"themes/next5.0.1/source/images/avatar.jpg","hash":"81e23483dfdb9c3b637180f216a5a412222bf51d","modified":1479694631588},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"394d008e5e94575280407ad8a1607a028026cbc3","modified":1479694631214},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"30a23fa7e816496fdec0e932aa42e2d13098a9c2","modified":1479694631214},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics/busuanzi-counter.swig","hash":"4fcbf57c4918528ab51d3d042cff92cf5aefb599","modified":1479694631211},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1479694631212},{"_id":"themes/next5.0.1/source/css/_common/components/back-to-top.styl","hash":"93da5381b0c2a602c3fb9904f909df6e73777869","modified":1479694631341},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1479694631216},{"_id":"themes/next5.0.1/source/css/_common/components/back-to-top.styl.bak","hash":"b49efc66bd055a2d0be7deabfcb02ee72a9a28c8","modified":1479694631343},{"_id":"themes/next5.0.1/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1479694631352},{"_id":"themes/next5.0.1/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1479694631356},{"_id":"themes/next5.0.1/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1479694631439},{"_id":"themes/next5.0.1/source/css/_common/components/components.styl","hash":"10994990d6e0b4d965a728a22cf7f6ee29cae9f6","modified":1479694631357},{"_id":"themes/next5.0.1/source/css/_common/scaffolding/helpers.styl","hash":"54c90cf7bdbf5c596179d8dae6e671bad1292662","modified":1479694631493},{"_id":"themes/next5.0.1/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1479694631495},{"_id":"themes/next5.0.1/source/css/_common/scaffolding/base.styl","hash":"5304f99581da3a31de3ecec959b7adf9002fde83","modified":1479694631488},{"_id":"themes/next5.0.1/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1479694631393},{"_id":"themes/next5.0.1/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1479694631496},{"_id":"themes/next5.0.1/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1479694631498},{"_id":"themes/next5.0.1/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1479694631476},{"_id":"themes/next5.0.1/layout/_scripts/third-party/comments/duoshuo.swig","hash":"098e3b79a1e64fa6e1791f190e1992fa834caa6e","modified":1481162674878},{"_id":"themes/next5.0.1/layout/_scripts/third-party/comments/disqus.swig","hash":"fb1d04ede838b52ca7541973f86c3810f1ad396e","modified":1479694631229},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1479694631514},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1479694631517},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/_posts-expanded.styl","hash":"4303776991ef28f5742ca51c7dffe6f12f0acf34","modified":1479694631520},{"_id":"themes/next5.0.1/layout/_scripts/third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1479694631247},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1479694631521},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1479694631522},{"_id":"themes/next5.0.1/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1479694631530},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1479694631516},{"_id":"themes/next5.0.1/source/css/_schemes/Muse/_menu.styl","hash":"c2c6c4f6434b4f94aac2af5861cd769427f0ee10","modified":1479694631534},{"_id":"themes/next5.0.1/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1479694631529},{"_id":"themes/next5.0.1/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1479694631535},{"_id":"themes/next5.0.1/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1479694631536},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_full-image.styl","hash":"938d39eedc6e3d33918c1145a5bf1e79991d3fcf","modified":1479694631540},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_brand.styl","hash":"be22ad34f546a07f6d56b424338cdd898683eea4","modified":1479694631539},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_layout.styl","hash":"7b206cd8921bc042f8e37a74aea1abc8a5ec8ab4","modified":1479694631546},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1479694631548},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_menu.styl","hash":"d09280e5b79f3b573edb30f30c7a5f03ac640986","modified":1479694631547},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_layout.styl.80%","hash":"5398b9776838152e97dd57dfe578494ccc40280d","modified":1479694631544},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1479694631519},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/index.styl","hash":"1b10ba2d3ad0c063c418dc94a0b7e0db4b342c53","modified":1479694631553},{"_id":"themes/next5.0.1/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1479694631894},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1479694631896},{"_id":"themes/next5.0.1/source/js/src/schemes/pisces.js","hash":"7506e7490c69a200831393c38d25e91c156bd471","modified":1479694631651},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1479694631902},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1479694631904},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1479694631898},{"_id":"themes/next5.0.1/source/css/_schemes/Pisces/_sidebar.styl","hash":"bbcbfe9a5bb9c6544017ab90742c10c04091c291","modified":1480911986634},{"_id":"themes/next5.0.1/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1479694631905},{"_id":"themes/next5.0.1/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1479694631942},{"_id":"themes/next5.0.1/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1479694632000},{"_id":"themes/next5.0.1/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1479694632019},{"_id":"themes/next5.0.1/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1479694631982},{"_id":"themes/next5.0.1/source/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1479694632051},{"_id":"themes/next5.0.1/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1479694632021},{"_id":"themes/next5.0.1/source/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1479694632067},{"_id":"themes/next5.0.1/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1479694632061},{"_id":"themes/next5.0.1/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1479694632202},{"_id":"themes/next5.0.1/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1479694632214},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1479694632076},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1479694632097},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1479694632124},{"_id":"themes/next5.0.1/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1479694632250},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1479694632129},{"_id":"themes/next5.0.1/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"7c43d66da93cde65b473a7d6db2a86f9a42647d6","modified":1481173535032},{"_id":"themes/next5.0.1/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1479694631359},{"_id":"themes/next5.0.1/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1479694631363},{"_id":"themes/next5.0.1/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1479694631364},{"_id":"themes/next5.0.1/source/css/_common/components/header/menu.styl","hash":"c890ce7fe933abad7baf39764a01894924854e92","modified":1479694631369},{"_id":"themes/next5.0.1/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1479694631372},{"_id":"themes/next5.0.1/source/css/_common/components/highlight/highlight.styl","hash":"4b7f81e1006e7acee3d1c840ccba155239f830cc","modified":1479694631377},{"_id":"themes/next5.0.1/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1479694631371},{"_id":"themes/next5.0.1/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1480996828412},{"_id":"themes/next5.0.1/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1479694631384},{"_id":"themes/next5.0.1/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1479694631373},{"_id":"themes/next5.0.1/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1479694631389},{"_id":"themes/next5.0.1/source/css/_common/components/pages/archive.styl","hash":"7778920dd105fa4de3a7ab206eeba30b1a7bac45","modified":1479694631383},{"_id":"themes/next5.0.1/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1479694631392},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-collapse.styl","hash":"8fae54591877a73dff0b29b2be2e8935e3c63575","modified":1479694631395},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1479694631396},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1479694631401},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-expand.styl","hash":"b25132fe6a7ad67059a2c3afc60feabb479bdd75","modified":1479694631397},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-more-link.styl","hash":"15063d79b5befc21820baf05d6f20cc1c1787477","modified":1479694631407},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-meta.styl","hash":"0bf3eeb5b97ba6ce8ad008d66c81aec532bc9b91","modified":1479694631405},{"_id":"themes/next5.0.1/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1479694631390},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1479694631415},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-nav.styl","hash":"c6dab7661a6b8c678b21b7eb273cef7100f970f6","modified":1479694631411},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1479694631417},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-reward.styl","hash":"e792c8dc41561c96d128e9b421187f1c3dc978a0","modified":1479694631414},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1479694631422},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"c44f6a553ec7ea5508f2054a13be33a62a15d3a9","modified":1479694631425},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1479694631424},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1479694631426},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1479694631428},{"_id":"themes/next5.0.1/source/css/_common/components/post/post-title.styl","hash":"963105a531403d7aad6d9e5e23e3bfabb8ec065a","modified":1479694631416},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"2d3abbc85b979a648e0e579e45f16a6eba49d1e7","modified":1479694631430},{"_id":"themes/next5.0.1/source/css/_common/components/post/post.styl","hash":"4eb18b12fa0ea6c35925d9a64f64e2a7dae8c7fd","modified":1479694631418},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1479694631435},{"_id":"themes/next5.0.1/source/css/_common/components/tags/full-image.styl","hash":"618f73450cf541f88a4fddc3d22898aee49d105d","modified":1479694631442},{"_id":"themes/next5.0.1/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1479694631443},{"_id":"themes/next5.0.1/source/css/_common/components/tags/note.styl","hash":"74d0ba86f698165d13402670382a822c8736a556","modified":1479694631449},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"7690b9596ec3a49befbe529a5a2649abec0faf76","modified":1479694631429},{"_id":"themes/next5.0.1/source/css/_common/components/tags/tags.styl","hash":"3eb73cee103b810fa56901577ecb9c9bb1793cff","modified":1479694631453},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1479694631458},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/algolia-search.styl","hash":"eba491ae624b4c843c8be4c94a044085dad4ba0f","modified":1479694631457},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"b03f891883446f3a5548b7cc90d29c77e62f1053","modified":1479694631460},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1479694631464},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/third-party.styl","hash":"5433b6bc9d8f0c4685e760b326445ac51245b0a8","modified":1479694631475},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1479694631466},{"_id":"themes/next5.0.1/source/css/_common/components/third-party/localsearch.styl","hash":"637c6b32c58ecf40041be6e911471cd82671919b","modified":1479694631471},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1479694631525},{"_id":"themes/next5.0.1/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"8b8e8cbce98a9296c8fd77f512ae85d945f65d40","modified":1479694631527},{"_id":"themes/next5.0.1/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"8b8e8cbce98a9296c8fd77f512ae85d945f65d40","modified":1479694631537},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1479694631928},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1479694631930},{"_id":"themes/next5.0.1/source/css/_common/components/sidebar/sidebar.styl","hash":"234facd038f144bd0fe09a31ed1357c5d74c517f","modified":1479694631431},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1479694631934},{"_id":"themes/next5.0.1/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1479694631441},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1479694632118},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1479694631932},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1479694631937},{"_id":"themes/next5.0.1/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1479694631936},{"_id":"themes/next5.0.1/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1479694631892},{"_id":"themes/next5.0.1/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1479694632113},{"_id":"source/love/renxi.mp3","hash":"631fbec49a4ab399c9fb6e8f1ed1ae59575a94ff","modified":1481514742698}],"Category":[{"name":"Python","_id":"ciwlrsjk70007d8pkk8a7j9j6"},{"name":"Shell","_id":"ciwlrsjkm000cd8pk0ps012ju"},{"name":"Dev","_id":"ciwlrsjkv000id8pkci6dk0n8"},{"name":"Dve","_id":"ciwlrsjl1000od8pk91luf52x"},{"name":"NAS","_id":"ciwlrsjm2001cd8pkvr3epcs5"},{"name":"VPN","_id":"ciwlrsjm7001id8pku727gn4m"},{"name":"web服务器","_id":"ciwlrsjmd001nd8pk5ooztc39"},{"name":"数据库","_id":"ciwlrsjmi001td8pkgdqiq3wl"},{"name":"文章阅读","_id":"ciwlrsjn00026d8pkliihe9b7"},{"name":"杂项","_id":"ciwlrsjo40038d8pka6eug2ra"},{"name":"环境搭建","_id":"ciwlrsjp5004jd8pkigepbwgx"},{"name":"系统管理","_id":"ciwlrsjpp005sd8pk2aosw8xo"},{"name":"虚拟化","_id":"ciwlrsjqd0076d8pkg5ri793q"},{"name":"集群自动化","_id":"ciwlrsjqn007ld8pkt1easnm0"}],"Data":[],"Page":[{"_content":"<!DOCTYPE HTML>\n<html>\n<head>\n\t<title>404 - leolan'blog</title>\n\t<meta name=\"description\" content=\"404错误，页面不存在！\">\n\t<meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n\t<meta name=\"robots\" content=\"all\" />\n\t<meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\t<script type=\"text/javascript\" src=\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\" charset=\"utf-8\" width=\"auto\"></script>\n</body>\n</html>","source":"404.html","raw":"<!DOCTYPE HTML>\n<html>\n<head>\n\t<title>404 - leolan'blog</title>\n\t<meta name=\"description\" content=\"404错误，页面不存在！\">\n\t<meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n\t<meta name=\"robots\" content=\"all\" />\n\t<meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\t<script type=\"text/javascript\" src=\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\" charset=\"utf-8\" width=\"auto\"></script>\n</body>\n</html>","date":"2016-12-12T03:52:22.206Z","updated":"2016-12-12T03:52:22.206Z","path":"404.html","title":"","comments":1,"layout":"page","_id":"ciwlrsip50000d8pkvr5s6ud5","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><!DOCTYPE HTML>\n<html>\n<head>\n\t<title>404 - leolan'blog</title>\n\t<meta name=\"description\" content=\"404错误，页面不存在！\">\n\t<meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n\t<meta name=\"robots\" content=\"all\">\n\t<meta name=\"robots\" content=\"index,follow\">\n</head>\n<body>\n\t<script type=\"text/javascript\" src=\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\" charset=\"utf-8\" width=\"auto\"></script>\n</body>\n</html>","excerpt":"","more":"<!DOCTYPE HTML>\n<html>\n<head>\n\t<title>404 - leolan'blog</title>\n\t<meta name=\"description\" content=\"404错误，页面不存在！\">\n\t<meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n\t<meta name=\"robots\" content=\"all\" />\n\t<meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\t<script type=\"text/javascript\" src=\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\" charset=\"utf-8\" width=\"auto\"></script>\n</body>\n</html>"},{"title":"分类","date":"2016-10-30T04:39:04.000Z","type":"categories","comments":0,"_content":"\n这里是分类","source":"categories/index.md","raw":"title: 分类\ndate: 2016-10-30 12:39:04\ntype: \"categories\"\ncomments: false\n---\n\n这里是分类","updated":"2016-11-21T02:17:09.214Z","path":"categories/index.html","layout":"page","_id":"ciwlrsj2v0001d8pkztttecdr","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>这里是分类</p>\n","excerpt":"","more":"<p>这里是分类</p>\n"},{"title":"留言板","date":"2016-11-14T09:21:10.000Z","_content":"<blockquote class=\"blockquote-center\">\n<!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽-->\n    <h1>Stay Hungry,Stay Foolish</h1>\n   ![](http://ofyfogrgx.bkt.clouddn.com/ji_qrcode.png)\n    <h2>我是本博客二维码，快扫我穿越到手机</h2>\n</blockquote>\n<br/>\n<span id=\"yu-2\">最近访客</span>\n<div class=\"ds-recent-visitors\" data-num-items=\"39\" data-avatar-size=\"40\" id=\"ds-recent-visitors\"></div>\n<br/>\n\n---\n","source":"guestbook/index.md","raw":"---\ntitle: 留言板\ndate: 2016-11-14 17:21:10\n---\n<blockquote class=\"blockquote-center\">\n<!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽-->\n    <h1>Stay Hungry,Stay Foolish</h1>\n   ![](http://ofyfogrgx.bkt.clouddn.com/ji_qrcode.png)\n    <h2>我是本博客二维码，快扫我穿越到手机</h2>\n</blockquote>\n<br/>\n<span id=\"yu-2\">最近访客</span>\n<div class=\"ds-recent-visitors\" data-num-items=\"39\" data-avatar-size=\"40\" id=\"ds-recent-visitors\"></div>\n<br/>\n\n---\n","updated":"2016-12-08T06:28:36.025Z","path":"guestbook/index.html","comments":1,"layout":"page","_id":"ciwlrsj2y0002d8pky9lgwzg7","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p><blockquote class=\"blockquote-center\"><br><!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽--><br>    <h1>Stay Hungry,Stay Foolish</h1><br>   <img src=\"http://ofyfogrgx.bkt.clouddn.com/ji_qrcode.png\" alt=\"\"><br>    <h2>我是本博客二维码，快扫我穿越到手机</h2><br></blockquote><br><br><br><span id=\"yu-2\">最近访客</span></p>\n<p><div class=\"ds-recent-visitors\" data-num-items=\"39\" data-avatar-size=\"40\" id=\"ds-recent-visitors\"></div><br><br></p>\n<hr>\n","excerpt":"","more":"<p><blockquote class=\"blockquote-center\"><br><!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽--><br>    <h1>Stay Hungry,Stay Foolish</h1><br>   <img src=\"http://ofyfogrgx.bkt.clouddn.com/ji_qrcode.png\" alt=\"\"><br>    <h2>我是本博客二维码，快扫我穿越到手机</h2><br></blockquote><br><br/><br><span id=\"yu-2\">最近访客</span></p>\n<p><div class=\"ds-recent-visitors\" data-num-items=\"39\" data-avatar-size=\"40\" id=\"ds-recent-visitors\"></div><br><br/></p>\n<hr>\n"},{"title":"关于","date":"2016-10-30T04:39:04.000Z","type":"about","comments":0,"_content":"\n# 感谢\n\n 非常感谢您的来访！本博客是个人学习笔记，大部分内容来源于互联网，基本上都是本人测试之后写的。看了很多博文，踩过好些坑，本人整理资料有个习惯就是尽量简单，符合实际情况的处理方式，考虑问题尽量全面。所以本博客也尽量做到简洁明了的同时能抓住重点，希望对您有所帮助。\n\n**本文少量几篇是没有条件（实验环境）进行测试，还有少量的文章是转载的文章，都会在文章中适当的说明，如果侵犯到您的权益，请立刻联系我，非常感谢！**\n\n大天朝QQ邮箱还是很好用的：**842632422@qq.com**\nGmail：myleolan@gmail.com\nfacebook：https://www.facebook.com/MyLeoLan\n有任何问题欢迎给我发邮件，当然也非常欢迎喜欢计算机、软件、物联网、Linux等等的朋友打扰。非常感谢！(๑•̀ㅂ•́)و✧","source":"about/index.md","raw":"title: 关于\ndate: 2016-10-30 12:39:04\ntype: \"about\"\ncomments: false\n---\n\n# 感谢\n\n 非常感谢您的来访！本博客是个人学习笔记，大部分内容来源于互联网，基本上都是本人测试之后写的。看了很多博文，踩过好些坑，本人整理资料有个习惯就是尽量简单，符合实际情况的处理方式，考虑问题尽量全面。所以本博客也尽量做到简洁明了的同时能抓住重点，希望对您有所帮助。\n\n**本文少量几篇是没有条件（实验环境）进行测试，还有少量的文章是转载的文章，都会在文章中适当的说明，如果侵犯到您的权益，请立刻联系我，非常感谢！**\n\n大天朝QQ邮箱还是很好用的：**842632422@qq.com**\nGmail：myleolan@gmail.com\nfacebook：https://www.facebook.com/MyLeoLan\n有任何问题欢迎给我发邮件，当然也非常欢迎喜欢计算机、软件、物联网、Linux等等的朋友打扰。非常感谢！(๑•̀ㅂ•́)و✧","updated":"2016-12-12T03:52:22.538Z","path":"about/index.html","layout":"page","_id":"ciwlrsj320003d8pkwg1qx64f","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"感谢\"><a href=\"#感谢\" class=\"headerlink\" title=\"感谢\"></a>感谢</h1><p> 非常感谢您的来访！本博客是个人学习笔记，大部分内容来源于互联网，基本上都是本人测试之后写的。看了很多博文，踩过好些坑，本人整理资料有个习惯就是尽量简单，符合实际情况的处理方式，考虑问题尽量全面。所以本博客也尽量做到简洁明了的同时能抓住重点，希望对您有所帮助。</p>\n<p><strong>本文少量几篇是没有条件（实验环境）进行测试，还有少量的文章是转载的文章，都会在文章中适当的说明，如果侵犯到您的权益，请立刻联系我，非常感谢！</strong></p>\n<p>大天朝QQ邮箱还是很好用的：<strong>842632422@qq.com</strong><br>Gmail：myleolan@gmail.com<br>facebook：<a href=\"https://www.facebook.com/MyLeoLan\" target=\"_blank\" rel=\"external\">https://www.facebook.com/MyLeoLan</a><br>有任何问题欢迎给我发邮件，当然也非常欢迎喜欢计算机、软件、物联网、Linux等等的朋友打扰。非常感谢！(๑•̀ㅂ•́)و✧</p>\n","excerpt":"","more":"<h1 id=\"感谢\"><a href=\"#感谢\" class=\"headerlink\" title=\"感谢\"></a>感谢</h1><p> 非常感谢您的来访！本博客是个人学习笔记，大部分内容来源于互联网，基本上都是本人测试之后写的。看了很多博文，踩过好些坑，本人整理资料有个习惯就是尽量简单，符合实际情况的处理方式，考虑问题尽量全面。所以本博客也尽量做到简洁明了的同时能抓住重点，希望对您有所帮助。</p>\n<p><strong>本文少量几篇是没有条件（实验环境）进行测试，还有少量的文章是转载的文章，都会在文章中适当的说明，如果侵犯到您的权益，请立刻联系我，非常感谢！</strong></p>\n<p>大天朝QQ邮箱还是很好用的：<strong>842632422@qq.com</strong><br>Gmail：myleolan@gmail.com<br>facebook：<a href=\"https://www.facebook.com/MyLeoLan\">https://www.facebook.com/MyLeoLan</a><br>有任何问题欢迎给我发邮件，当然也非常欢迎喜欢计算机、软件、物联网、Linux等等的朋友打扰。非常感谢！(๑•̀ㅂ•́)و✧</p>\n"},{"title":"标签","date":"2016-10-30T04:39:04.000Z","type":"tags","comments":0,"_content":"\n这里是标签","source":"tags/index.md","raw":"title: 标签\ndate: 2016-10-30 12:39:04\ntype: \"tags\"\ncomments: false\n---\n\n这里是标签","updated":"2016-11-21T02:17:09.230Z","path":"tags/index.html","layout":"page","_id":"ciwlrsj330004d8pk46bw1evl","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>这里是标签</p>\n","excerpt":"","more":"<p>这里是标签</p>\n"}],"Post":[{"title":"Python入门","top":10,"abbrlink":21062,"date":"2016-12-10T03:32:15.000Z","keywords":"Python入门","_content":"","source":"_drafts/Python/2016-12-10-Python入门.md","raw":"---\ntitle: Python入门\ncategories:\n  - Python\ntags:\n  - Python入门\ntop: 10\nabbrlink: 21062\ndate: 2016-12-10 11:32:15\nkeywords: Python入门\n---\n","slug":"Python-2016-12-10-Python入门","published":0,"updated":"2016-12-12T03:52:22.211Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjjw0005d8pkbr6ed5nb","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script>","excerpt":"","more":""},{"title":"Shell编程入门","top":10,"abbrlink":40666,"date":"2016-12-10T03:32:37.000Z","keywords":"Shell编程入门","_content":"","source":"_drafts/Shell/2016-12-10-Shell编程入门.md","raw":"---\ntitle: Shell编程入门\ncategories:\n  - Shell\ntags:\n  - Shell编程入门\ntop: 10\nabbrlink: 40666\ndate: 2016-12-10 11:32:37\nkeywords: Shell编程入门\n---\n","slug":"Shell-2016-12-10-Shell编程入门","published":0,"updated":"2016-12-12T03:52:22.275Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjk30006d8pkjc8fuk5v","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script>","excerpt":"","more":""},{"title":"开发相关网页链接","abbrlink":23807,"date":"2016-11-03T02:17:39.000Z","_content":"\n\n## 基于HTML5的APP\nhttp://www.wex5.com/\n\n---\n## 微信\n\n* 微信小程序 (应用号) 微信 web 开发者工具破解版\n\nhttp://www.diycode.cc/topics/308?\n\n* 微信小程序\n\nhttps://git.oschina.net/codebean/wechat-demo?from=20160925\n\n\n---\n## 前端\nbootstrap前端框架：http://www.runoob.com/bootstrap/bootstrap-tutorial.html\n\n\n\n---\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/Dev/2016-11-03-开发相关网页链接.md","raw":"---\ntitle: 开发相关网页链接\ncategories:\n  - Dev\ntags:\n  - 网页链接更新页\nabbrlink: 23807\ndate: 2016-11-03 10:17:39\n---\n\n\n## 基于HTML5的APP\nhttp://www.wex5.com/\n\n---\n## 微信\n\n* 微信小程序 (应用号) 微信 web 开发者工具破解版\n\nhttp://www.diycode.cc/topics/308?\n\n* 微信小程序\n\nhttps://git.oschina.net/codebean/wechat-demo?from=20160925\n\n\n---\n## 前端\nbootstrap前端框架：http://www.runoob.com/bootstrap/bootstrap-tutorial.html\n\n\n\n---\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Dev-2016-11-03-开发相关网页链接","published":1,"updated":"2016-11-21T02:17:08.817Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjka0009d8pk5vts9fae","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h2 id=\"基于HTML5的APP\"><a href=\"#基于HTML5的APP\" class=\"headerlink\" title=\"基于HTML5的APP\"></a>基于HTML5的APP</h2><p><a href=\"http://www.wex5.com/\" target=\"_blank\" rel=\"external\">http://www.wex5.com/</a></p>\n<hr>\n<h2 id=\"微信\"><a href=\"#微信\" class=\"headerlink\" title=\"微信\"></a>微信</h2><ul>\n<li>微信小程序 (应用号) 微信 web 开发者工具破解版</li>\n</ul>\n<p><a href=\"http://www.diycode.cc/topics/308?\" target=\"_blank\" rel=\"external\">http://www.diycode.cc/topics/308?</a></p>\n<ul>\n<li>微信小程序</li>\n</ul>\n<p><a href=\"https://git.oschina.net/codebean/wechat-demo?from=20160925\" target=\"_blank\" rel=\"external\">https://git.oschina.net/codebean/wechat-demo?from=20160925</a></p>\n<hr>\n<h2 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h2><p>bootstrap前端框架：<a href=\"http://www.runoob.com/bootstrap/bootstrap-tutorial.html\" target=\"_blank\" rel=\"external\">http://www.runoob.com/bootstrap/bootstrap-tutorial.html</a></p>\n<hr>\n","excerpt":"","more":"<h2 id=\"基于HTML5的APP\"><a href=\"#基于HTML5的APP\" class=\"headerlink\" title=\"基于HTML5的APP\"></a>基于HTML5的APP</h2><p><a href=\"http://www.wex5.com/\">http://www.wex5.com/</a></p>\n<hr>\n<h2 id=\"微信\"><a href=\"#微信\" class=\"headerlink\" title=\"微信\"></a>微信</h2><ul>\n<li>微信小程序 (应用号) 微信 web 开发者工具破解版</li>\n</ul>\n<p><a href=\"http://www.diycode.cc/topics/308?\">http://www.diycode.cc/topics/308?</a></p>\n<ul>\n<li>微信小程序</li>\n</ul>\n<p><a href=\"https://git.oschina.net/codebean/wechat-demo?from=20160925\">https://git.oschina.net/codebean/wechat-demo?from=20160925</a></p>\n<hr>\n<h2 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h2><p>bootstrap前端框架：<a href=\"http://www.runoob.com/bootstrap/bootstrap-tutorial.html\">http://www.runoob.com/bootstrap/bootstrap-tutorial.html</a></p>\n<hr>\n"},{"title":"用github写开源书籍","abbrlink":40647,"date":"2016-11-08T02:39:05.000Z","_content":"\n# 创建新的仓库\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D1.png)\n创建新文件，名为SUMMARY.md，里面填入：\n\n```\n# Summary\n* [前言](README.md)```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D2.png)\n\n# 创建一本书\n首先进入gitbook的官网：https://www.gitbook.com/\n点红色部分，用github登录，登录之后，点+NewBook(或在右上角+NEW，页面稍有改版)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D3.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D4.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D5.png)\n这个页面目前是在同步，等同步完毕后，就可以看到自己的书了（不是什么原因这里会一直是这个界面不会跳转，但其实收到了通知邮件已经创建好了，打开主页刷新就可以看到）。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D6.png)\n点击edit，可以发现里面就1页，就是我们刚才SUMMARY.md写的内容\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D7.png)\n\n# 增加内容\n我们退回上一步，点edit\n可以看到如下界面\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D8.png)\n我们点开\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D9.png)\n可以同步显示编辑后的效果，预览效果。\n\n现在我们就可以完成我们的书的录入了，在目录区点击右键，可以新建一个内容页\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D10.png)\n然后点击一下，会提示创建一个文件\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D11.png)\n然后你会发现在github上也多了一个文件，这就关联起来了。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D12.png)\n我们再看SUMMARY里面多了一个“第一页”\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D13.png)\n我们双击一下，发现就是markdown的超链接，原来这就是gitbook的内容组织方式，通过超连接把内容和github上文件关联起来。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D14.png)\n我们修改一下名字，然后把他缩进一个tab，保存看看有什么变化\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D15.png)\n可以发现目录结构变了，然后名字也变了\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D16.png)\n通过修改SUMMARY.md你可以轻松的组织你的书\n\n# 书的框架\n一般来说，你的书得有一个README.md和一个SUMMARY.md。 \n其中SUMMARY.md是最重要的，它代表了整个书的框架，也是我们主要需要修改的地方。\n当你考虑好要写一本书，你可以先粗略的想好大概要分几部分，对这几部分弄一个文件夹。然后把对应的markdown文件放进去。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D17.png)\n然后push到github上，然后再在gitbook上修改SUMAARY使得新加的文件得以跟gitbook关联\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D18.png)\n关于地址的获取有个小诀窍，就是点击文件，邮件，有个重命名，这里可以看到文件的完整地址，复制就好。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D19.png)\n最后，可以在自己的书的主页点击read看看效果\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D20.png)\n\n---\n# 绑定域名\n原理和博客绑定域名是一样的\n\n* 1· 在你的项目下新建一个**CNAME**文件，注意没有后缀名。在里面添加你的域名，如我的就是** leolan.top**，然后推送**CNAME文件**到远程仓库。（方法二是直接在pages页上找到域名绑定设置，最好同时绑定如：**leolan.top**和**www.leolan.top**,少绑一个，没绑的那个打不开）\n* 2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 `username.github.io. `，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png)\n过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的**CNAME**文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。\n\n---\n参考：GitBook入门（用github做出第一本书）\nhttp://blog.csdn.net/hk2291976/article/details/51173850\n\n\n---","source":"_posts/Dev/2016-11-08-用github写开源书籍.md","raw":"---\ntitle: 用github写开源书籍\ncategories:\n  - Dve\ntags:\n  - 用github写开源书籍\n  - gitbook\nabbrlink: 40647\ndate: 2016-11-08 10:39:05\n---\n\n# 创建新的仓库\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D1.png)\n创建新文件，名为SUMMARY.md，里面填入：\n\n```\n# Summary\n* [前言](README.md)```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D2.png)\n\n# 创建一本书\n首先进入gitbook的官网：https://www.gitbook.com/\n点红色部分，用github登录，登录之后，点+NewBook(或在右上角+NEW，页面稍有改版)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D3.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D4.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D5.png)\n这个页面目前是在同步，等同步完毕后，就可以看到自己的书了（不是什么原因这里会一直是这个界面不会跳转，但其实收到了通知邮件已经创建好了，打开主页刷新就可以看到）。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D6.png)\n点击edit，可以发现里面就1页，就是我们刚才SUMMARY.md写的内容\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D7.png)\n\n# 增加内容\n我们退回上一步，点edit\n可以看到如下界面\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D8.png)\n我们点开\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D9.png)\n可以同步显示编辑后的效果，预览效果。\n\n现在我们就可以完成我们的书的录入了，在目录区点击右键，可以新建一个内容页\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D10.png)\n然后点击一下，会提示创建一个文件\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D11.png)\n然后你会发现在github上也多了一个文件，这就关联起来了。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D12.png)\n我们再看SUMMARY里面多了一个“第一页”\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D13.png)\n我们双击一下，发现就是markdown的超链接，原来这就是gitbook的内容组织方式，通过超连接把内容和github上文件关联起来。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D14.png)\n我们修改一下名字，然后把他缩进一个tab，保存看看有什么变化\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D15.png)\n可以发现目录结构变了，然后名字也变了\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D16.png)\n通过修改SUMMARY.md你可以轻松的组织你的书\n\n# 书的框架\n一般来说，你的书得有一个README.md和一个SUMMARY.md。 \n其中SUMMARY.md是最重要的，它代表了整个书的框架，也是我们主要需要修改的地方。\n当你考虑好要写一本书，你可以先粗略的想好大概要分几部分，对这几部分弄一个文件夹。然后把对应的markdown文件放进去。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D17.png)\n然后push到github上，然后再在gitbook上修改SUMAARY使得新加的文件得以跟gitbook关联\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D18.png)\n关于地址的获取有个小诀窍，就是点击文件，邮件，有个重命名，这里可以看到文件的完整地址，复制就好。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D19.png)\n最后，可以在自己的书的主页点击read看看效果\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D20.png)\n\n---\n# 绑定域名\n原理和博客绑定域名是一样的\n\n* 1· 在你的项目下新建一个**CNAME**文件，注意没有后缀名。在里面添加你的域名，如我的就是** leolan.top**，然后推送**CNAME文件**到远程仓库。（方法二是直接在pages页上找到域名绑定设置，最好同时绑定如：**leolan.top**和**www.leolan.top**,少绑一个，没绑的那个打不开）\n* 2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 `username.github.io. `，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png)\n过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的**CNAME**文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。\n\n---\n参考：GitBook入门（用github做出第一本书）\nhttp://blog.csdn.net/hk2291976/article/details/51173850\n\n\n---","slug":"Dev-2016-11-08-用github写开源书籍","published":1,"updated":"2016-11-21T02:17:08.825Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjki000ad8pkg9eazwic","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"创建新的仓库\"><a href=\"#创建新的仓库\" class=\"headerlink\" title=\"创建新的仓库\"></a>创建新的仓库</h1><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D1.png\" alt=\"\"><br>创建新文件，名为SUMMARY.md，里面填入：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\"># Summary</span></div><div class=\"line\"><span class=\"bullet\">* </span>[<span class=\"string\">前言</span>](<span class=\"link\">README.md</span>)</div></pre></td></tr></table></figure>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D2.png\" alt=\"\"></p>\n<h1 id=\"创建一本书\"><a href=\"#创建一本书\" class=\"headerlink\" title=\"创建一本书\"></a>创建一本书</h1><p>首先进入gitbook的官网：<a href=\"https://www.gitbook.com/\" target=\"_blank\" rel=\"external\">https://www.gitbook.com/</a><br>点红色部分，用github登录，登录之后，点+NewBook(或在右上角+NEW，页面稍有改版)<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D3.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D4.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D5.png\" alt=\"\"><br>这个页面目前是在同步，等同步完毕后，就可以看到自己的书了（不是什么原因这里会一直是这个界面不会跳转，但其实收到了通知邮件已经创建好了，打开主页刷新就可以看到）。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D6.png\" alt=\"\"><br>点击edit，可以发现里面就1页，就是我们刚才SUMMARY.md写的内容<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D7.png\" alt=\"\"></p>\n<h1 id=\"增加内容\"><a href=\"#增加内容\" class=\"headerlink\" title=\"增加内容\"></a>增加内容</h1><p>我们退回上一步，点edit<br>可以看到如下界面<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D8.png\" alt=\"\"><br>我们点开<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D9.png\" alt=\"\"><br>可以同步显示编辑后的效果，预览效果。</p>\n<p>现在我们就可以完成我们的书的录入了，在目录区点击右键，可以新建一个内容页<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D10.png\" alt=\"\"><br>然后点击一下，会提示创建一个文件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D11.png\" alt=\"\"><br>然后你会发现在github上也多了一个文件，这就关联起来了。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D12.png\" alt=\"\"><br>我们再看SUMMARY里面多了一个“第一页”<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D13.png\" alt=\"\"><br>我们双击一下，发现就是markdown的超链接，原来这就是gitbook的内容组织方式，通过超连接把内容和github上文件关联起来。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D14.png\" alt=\"\"><br>我们修改一下名字，然后把他缩进一个tab，保存看看有什么变化<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D15.png\" alt=\"\"><br>可以发现目录结构变了，然后名字也变了<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D16.png\" alt=\"\"><br>通过修改SUMMARY.md你可以轻松的组织你的书</p>\n<h1 id=\"书的框架\"><a href=\"#书的框架\" class=\"headerlink\" title=\"书的框架\"></a>书的框架</h1><p>一般来说，你的书得有一个README.md和一个SUMMARY.md。<br>其中SUMMARY.md是最重要的，它代表了整个书的框架，也是我们主要需要修改的地方。<br>当你考虑好要写一本书，你可以先粗略的想好大概要分几部分，对这几部分弄一个文件夹。然后把对应的markdown文件放进去。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D17.png\" alt=\"\"><br>然后push到github上，然后再在gitbook上修改SUMAARY使得新加的文件得以跟gitbook关联<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D18.png\" alt=\"\"><br>关于地址的获取有个小诀窍，就是点击文件，邮件，有个重命名，这里可以看到文件的完整地址，复制就好。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D19.png\" alt=\"\"><br>最后，可以在自己的书的主页点击read看看效果<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D20.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"绑定域名\"><a href=\"#绑定域名\" class=\"headerlink\" title=\"绑定域名\"></a>绑定域名</h1><p>原理和博客绑定域名是一样的</p>\n<ul>\n<li>1· 在你的项目下新建一个<strong>CNAME</strong>文件，注意没有后缀名。在里面添加你的域名，如我的就是<strong> leolan.top</strong>，然后推送<strong>CNAME文件</strong>到远程仓库。（方法二是直接在pages页上找到域名绑定设置，最好同时绑定如：<strong>leolan.top</strong>和<strong>www.leolan.top</strong>,少绑一个，没绑的那个打不开）</li>\n<li>2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 <code>username.github.io.</code>，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png\" alt=\"\"><br>过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的<strong>CNAME</strong>文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。</li>\n</ul>\n<hr>\n<p>参考：GitBook入门（用github做出第一本书）<br><a href=\"http://blog.csdn.net/hk2291976/article/details/51173850\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/hk2291976/article/details/51173850</a></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"创建新的仓库\"><a href=\"#创建新的仓库\" class=\"headerlink\" title=\"创建新的仓库\"></a>创建新的仓库</h1><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D1.png\" alt=\"\"><br>创建新文件，名为SUMMARY.md，里面填入：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\"># Summary</span></div><div class=\"line\"><span class=\"bullet\">* </span>[<span class=\"string\">前言</span>](<span class=\"link\">README.md</span>)</div></pre></td></tr></table></figure>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D2.png\" alt=\"\"></p>\n<h1 id=\"创建一本书\"><a href=\"#创建一本书\" class=\"headerlink\" title=\"创建一本书\"></a>创建一本书</h1><p>首先进入gitbook的官网：<a href=\"https://www.gitbook.com/\">https://www.gitbook.com/</a><br>点红色部分，用github登录，登录之后，点+NewBook(或在右上角+NEW，页面稍有改版)<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D3.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D4.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D5.png\" alt=\"\"><br>这个页面目前是在同步，等同步完毕后，就可以看到自己的书了（不是什么原因这里会一直是这个界面不会跳转，但其实收到了通知邮件已经创建好了，打开主页刷新就可以看到）。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D6.png\" alt=\"\"><br>点击edit，可以发现里面就1页，就是我们刚才SUMMARY.md写的内容<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D7.png\" alt=\"\"></p>\n<h1 id=\"增加内容\"><a href=\"#增加内容\" class=\"headerlink\" title=\"增加内容\"></a>增加内容</h1><p>我们退回上一步，点edit<br>可以看到如下界面<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D8.png\" alt=\"\"><br>我们点开<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D9.png\" alt=\"\"><br>可以同步显示编辑后的效果，预览效果。</p>\n<p>现在我们就可以完成我们的书的录入了，在目录区点击右键，可以新建一个内容页<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D10.png\" alt=\"\"><br>然后点击一下，会提示创建一个文件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D11.png\" alt=\"\"><br>然后你会发现在github上也多了一个文件，这就关联起来了。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D12.png\" alt=\"\"><br>我们再看SUMMARY里面多了一个“第一页”<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D13.png\" alt=\"\"><br>我们双击一下，发现就是markdown的超链接，原来这就是gitbook的内容组织方式，通过超连接把内容和github上文件关联起来。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D14.png\" alt=\"\"><br>我们修改一下名字，然后把他缩进一个tab，保存看看有什么变化<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D15.png\" alt=\"\"><br>可以发现目录结构变了，然后名字也变了<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D16.png\" alt=\"\"><br>通过修改SUMMARY.md你可以轻松的组织你的书</p>\n<h1 id=\"书的框架\"><a href=\"#书的框架\" class=\"headerlink\" title=\"书的框架\"></a>书的框架</h1><p>一般来说，你的书得有一个README.md和一个SUMMARY.md。<br>其中SUMMARY.md是最重要的，它代表了整个书的框架，也是我们主要需要修改的地方。<br>当你考虑好要写一本书，你可以先粗略的想好大概要分几部分，对这几部分弄一个文件夹。然后把对应的markdown文件放进去。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D17.png\" alt=\"\"><br>然后push到github上，然后再在gitbook上修改SUMAARY使得新加的文件得以跟gitbook关联<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D18.png\" alt=\"\"><br>关于地址的获取有个小诀窍，就是点击文件，邮件，有个重命名，这里可以看到文件的完整地址，复制就好。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D19.png\" alt=\"\"><br>最后，可以在自己的书的主页点击read看看效果<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8github%E5%86%99%E5%BC%80%E6%BA%90%E4%B9%A6%E7%B1%8D20.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"绑定域名\"><a href=\"#绑定域名\" class=\"headerlink\" title=\"绑定域名\"></a>绑定域名</h1><p>原理和博客绑定域名是一样的</p>\n<ul>\n<li>1· 在你的项目下新建一个<strong>CNAME</strong>文件，注意没有后缀名。在里面添加你的域名，如我的就是<strong> leolan.top</strong>，然后推送<strong>CNAME文件</strong>到远程仓库。（方法二是直接在pages页上找到域名绑定设置，最好同时绑定如：<strong>leolan.top</strong>和<strong>www.leolan.top</strong>,少绑一个，没绑的那个打不开）</li>\n<li>2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 <code>username.github.io.</code>，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png\" alt=\"\"><br>过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的<strong>CNAME</strong>文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。</li>\n</ul>\n<hr>\n<p>参考：GitBook入门（用github做出第一本书）<br><a href=\"http://blog.csdn.net/hk2291976/article/details/51173850\">http://blog.csdn.net/hk2291976/article/details/51173850</a></p>\n<hr>\n"},{"title":"jenkins","abbrlink":34699,"date":"2016-11-10T03:47:55.000Z","_content":"\njenkins是一个广泛用于持续构建的可视化web工具，持续构建说得更直白点，就是各种项目的\"自动化\"编译、打包、分发部署。jenkins可以很好的支持各种语言（比如：java, c#, php等）的项目构建，也完全兼容ant、maven、gradle等多种第三方构建工具，同时跟svn、git能无缝集成，也支持直接与知名源代码托管网站，比如github、bitbucket直接集成。\n\n# jenkins 安装\n## Ubuntu\n法一：**apt-get**\n```\nwget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -\necho \"deb https://pkg.jenkins.io/debian-stable binary/\" >> /etc/apt/sources.list\nsudo apt-get update\nsudo apt-get install jenkins```\njenkins地址是:**http://IP:8080**\n\n法二：**war包**\n下载地址：https://jenkins.io\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png)\n下载的**jenkins.war**，放到**tomcat/webapp**目录下，启动tomcat\ntomcat默认端口为8080（可以自行修改），jenkins地址是:**http://IP:8080/jenkins **\n\n**启动**jenkins和**停止**jenkins可以用下面这两条命令：\n```\nsudo service start\nsudo service stop```\n安装完成，启动报错见下面**配置设置**，网页打不开看看防火墙有没有放行端口。\n\n---\n## Centos\n安装前检查jdk\n```\njava --version\nyum list *openjdk*```\n\n法一：**yum**\n```\nsudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo\nsudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\nyum install jenkins```\njenkins地址是:**http://IP:8080**\n\n法二：**war包**\n下载地址：https://jenkins.io\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png)\n下载的**jenkins.war**，放到**tomcat/webapp**目录下，启动tomcat\ntomcat默认端口为8080（可以自行修改），jenkins地址是:**http://IP:8080/jenkins **\n\n**启动**jenkins和**停止**jenkins可以用下面这两条命令：\n```\nsudo /etc/init.d/jenkins start\nsudo /etc/init.d/jenkins stop```\n安装完成，启动报错见下面**配置设置**，网页打不开看看防火墙有没有放行端口。\n---\n## Window、Mac\n下载地址：https://jenkins.io\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png)\n直接点图中war包旁边小三角选择下载安装\njenkins地址是:**http://IP:8080**\n\n---\n## Docker\nDockerHub官方jenkins镜像： https://registry.hub.docker.com/_/jenkins/\n\ngithub源码： https://github.com/jenkinsci/docker\n\n官方jenkins镜像中所使用的jenkins是Jenkins的LTS（Long Term Support）发布版本。\n\n\n### docker官方的jenkins镜像启动容器\n运行命令为\n```\ndocker run --name myjenkins -p 8080:8080 -v /var/ jenkins_home jenkins```\n运行docker run命令时，如果本地没有镜像，则默认会从DockerHub pull镜像，将镜像缓存到本地，然后再启动基于镜像创建的容器。 \n查看镜像信息：`docker images`\n\n过一会儿就能看到启动日志了，此时注意日志输出的密码。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092238367.png)\n查看日志也可以\n```\ndocker ps\ndocker logs [image_name/CONTAINER ID]```\n提示说密码在**/var/jenkins_home/secrets/initialAdminPassword**能看到，于是进入交互模式\n```\ndocker run -i -t [image_name/CONTAINER ID] /bin/bash```\n就可以直接像一台主机一样操作啦，但我没有找到该文件。\n\n之后浏览器输入http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png)\n\n### 源码构建jenkins镜像并运行容器\n需要JDK环境\n```\ngit clone https://github.com/jenkinsci/docker.git\ncd docker\ndocker build -t leolan/jenkins .   #使用docker build+Dockerfile（文件在docker目录下）构建jenkins镜像\n```\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/100314863.png)\n镜像构建成功后（总共21个Step，Dockerfile共21条指令），使用**docker images**查看镜像，leolan/jenkins和官方的jenkins镜像大小相同,使用**docker ps**查看运行的容器信息。\n使用`docker stop [image_name/CONTAINER ID]`停止之前基于官方jenkins镜像启动的容器\n启动新容器：`docker run --name leolan_jenkins -p 8080:8080 -v /var/jenkins_home leolan/jenkins`\n之后浏览器输入http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png)\n\n### 用cSphere希云管理Docker\n参考：http://csphere.cn/hub/jenkins\n\n---\n# 配置设置\njenkins安装目录(WAR包会放在这里):**/usr/lib/jenkins/**\njenkins配置文件:**/etc/sysconfig/jenkins**\n默认的JENKINS_HOME:**/var/lib/jenkins/**\nJenkins日志文件:**/var/log/jenkins/jenkins.log**\n\n**端口设置**：`vim /etc/sysconfig/jenkins`\n找到2处修改端口号：\nJENKINS_PORT=\"8080\"\nJENKINS_AJP_PORT=\"8009\"\n重启服务：`service jenkins restart`\n\n**错误**：“Starting Jenkins -bash: /usr/bin/Java: No such file or directory”。表示找不到Jenkins找不到java。\n查看java版本`java -version`，编辑文件`vi /etc/init.d/jenkins`，找到类似这样的一段，在最后加上：\n```\ncandidates=\"\n/etc/alternatives/java\n/usr/lib/jvm/java-1.6.0/bin/java\n/usr/lib/jvm/java-1.7.0/bin/java\n/usr/lib/jvm/java-1.8.0/bin/java\n/usr/bin/java\n/usr/java/jdk1.8.0_111/bin/java  #新增加的\n```\n重启服务：`service jenkins restart`\n\n---\n\n# jenkins 插件\n## Git Parameter Plug-In 插件\n本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！\n**Git Parameter Plug-In**插件可以参数化构建git 可以根据不同的分支或者tag进行构建。\n\n安装**Git Parameter Plug-In**插件\n\n**Git Parameter 文档**：\nhttps://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin\n**插件下载**：https://updates.jenkins-ci.org/download/plugins/git-parameter/\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins001.png)\n\n下面这个截图是根据分支进行构建\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins002.png)\n\n如果是根据tag进行构建的话，如下进行配置\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins003.png)\n\n这次我们是根据分支进行构建\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins004.png)\n\n注意以上两张截图中name就是下面我们要配置的变量：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins005.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins006.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins007.png)\n\n通过上图，我们可以看到下载git仓库中有两个分支master和wxy，我们可以选择其中任意一个进行构建即可。\n这次我们选择wxy分支进行构建，如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins008.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins009.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins010.png)\n\n\n## ansible plugin插件\n\n**本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！**\n\n首先要注意把yml文件存放到jenkins的工作目录下，否则jenkins会提示无权限操作。\n```\ncat /var/lib/jenkins/yml/dir.yml\n \n- hosts: '{{ host }}'\n  remote_user: root\n  tasks:\n   - name: test make dir\n     file: path=/etc/ilannitest state=directory mode=0755```\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins011.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins012.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins013.png)\n也可以保存到文件中主机地址，如下：\n```\ncat /etc/ansible/hosts \n\n[h5]\n114.55.101.252  ansible_ssh_user=root ansible_ssh_private_key_file=/var/lib/jenkins/key/dongyin```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins014.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins015.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins016.png)\n\n---\n## 多仓库Multiple SCMs plugin插件\n**本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！**\n\n插件地址：http://mirror.xmission.com/jenkins/plugins/multiple-scms/\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090622750.png)\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090639726.png)\n这个设置是为了防止前一个仓库的代码覆盖后一个仓库代码\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090424777.png)\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090652844.png)\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090702854.png)\n\n\n---\n\n\n","source":"_posts/Dev/2016-11-10-jenkins.md","raw":"---\ntitle: jenkins\ncategories:\n  - Dev\ntags:\n  - jenkins 安装\n  - jenkins参数化构建git\n  - Git Parameter Plug-In 插件\n  - ansible plugin插件\n  - Multiple SCMs plugin插件\nabbrlink: 34699\ndate: 2016-11-10 11:47:55\n---\n\njenkins是一个广泛用于持续构建的可视化web工具，持续构建说得更直白点，就是各种项目的\"自动化\"编译、打包、分发部署。jenkins可以很好的支持各种语言（比如：java, c#, php等）的项目构建，也完全兼容ant、maven、gradle等多种第三方构建工具，同时跟svn、git能无缝集成，也支持直接与知名源代码托管网站，比如github、bitbucket直接集成。\n\n# jenkins 安装\n## Ubuntu\n法一：**apt-get**\n```\nwget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -\necho \"deb https://pkg.jenkins.io/debian-stable binary/\" >> /etc/apt/sources.list\nsudo apt-get update\nsudo apt-get install jenkins```\njenkins地址是:**http://IP:8080**\n\n法二：**war包**\n下载地址：https://jenkins.io\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png)\n下载的**jenkins.war**，放到**tomcat/webapp**目录下，启动tomcat\ntomcat默认端口为8080（可以自行修改），jenkins地址是:**http://IP:8080/jenkins **\n\n**启动**jenkins和**停止**jenkins可以用下面这两条命令：\n```\nsudo service start\nsudo service stop```\n安装完成，启动报错见下面**配置设置**，网页打不开看看防火墙有没有放行端口。\n\n---\n## Centos\n安装前检查jdk\n```\njava --version\nyum list *openjdk*```\n\n法一：**yum**\n```\nsudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo\nsudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\nyum install jenkins```\njenkins地址是:**http://IP:8080**\n\n法二：**war包**\n下载地址：https://jenkins.io\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png)\n下载的**jenkins.war**，放到**tomcat/webapp**目录下，启动tomcat\ntomcat默认端口为8080（可以自行修改），jenkins地址是:**http://IP:8080/jenkins **\n\n**启动**jenkins和**停止**jenkins可以用下面这两条命令：\n```\nsudo /etc/init.d/jenkins start\nsudo /etc/init.d/jenkins stop```\n安装完成，启动报错见下面**配置设置**，网页打不开看看防火墙有没有放行端口。\n---\n## Window、Mac\n下载地址：https://jenkins.io\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png)\n直接点图中war包旁边小三角选择下载安装\njenkins地址是:**http://IP:8080**\n\n---\n## Docker\nDockerHub官方jenkins镜像： https://registry.hub.docker.com/_/jenkins/\n\ngithub源码： https://github.com/jenkinsci/docker\n\n官方jenkins镜像中所使用的jenkins是Jenkins的LTS（Long Term Support）发布版本。\n\n\n### docker官方的jenkins镜像启动容器\n运行命令为\n```\ndocker run --name myjenkins -p 8080:8080 -v /var/ jenkins_home jenkins```\n运行docker run命令时，如果本地没有镜像，则默认会从DockerHub pull镜像，将镜像缓存到本地，然后再启动基于镜像创建的容器。 \n查看镜像信息：`docker images`\n\n过一会儿就能看到启动日志了，此时注意日志输出的密码。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092238367.png)\n查看日志也可以\n```\ndocker ps\ndocker logs [image_name/CONTAINER ID]```\n提示说密码在**/var/jenkins_home/secrets/initialAdminPassword**能看到，于是进入交互模式\n```\ndocker run -i -t [image_name/CONTAINER ID] /bin/bash```\n就可以直接像一台主机一样操作啦，但我没有找到该文件。\n\n之后浏览器输入http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png)\n\n### 源码构建jenkins镜像并运行容器\n需要JDK环境\n```\ngit clone https://github.com/jenkinsci/docker.git\ncd docker\ndocker build -t leolan/jenkins .   #使用docker build+Dockerfile（文件在docker目录下）构建jenkins镜像\n```\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/100314863.png)\n镜像构建成功后（总共21个Step，Dockerfile共21条指令），使用**docker images**查看镜像，leolan/jenkins和官方的jenkins镜像大小相同,使用**docker ps**查看运行的容器信息。\n使用`docker stop [image_name/CONTAINER ID]`停止之前基于官方jenkins镜像启动的容器\n启动新容器：`docker run --name leolan_jenkins -p 8080:8080 -v /var/jenkins_home leolan/jenkins`\n之后浏览器输入http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png)\n\n### 用cSphere希云管理Docker\n参考：http://csphere.cn/hub/jenkins\n\n---\n# 配置设置\njenkins安装目录(WAR包会放在这里):**/usr/lib/jenkins/**\njenkins配置文件:**/etc/sysconfig/jenkins**\n默认的JENKINS_HOME:**/var/lib/jenkins/**\nJenkins日志文件:**/var/log/jenkins/jenkins.log**\n\n**端口设置**：`vim /etc/sysconfig/jenkins`\n找到2处修改端口号：\nJENKINS_PORT=\"8080\"\nJENKINS_AJP_PORT=\"8009\"\n重启服务：`service jenkins restart`\n\n**错误**：“Starting Jenkins -bash: /usr/bin/Java: No such file or directory”。表示找不到Jenkins找不到java。\n查看java版本`java -version`，编辑文件`vi /etc/init.d/jenkins`，找到类似这样的一段，在最后加上：\n```\ncandidates=\"\n/etc/alternatives/java\n/usr/lib/jvm/java-1.6.0/bin/java\n/usr/lib/jvm/java-1.7.0/bin/java\n/usr/lib/jvm/java-1.8.0/bin/java\n/usr/bin/java\n/usr/java/jdk1.8.0_111/bin/java  #新增加的\n```\n重启服务：`service jenkins restart`\n\n---\n\n# jenkins 插件\n## Git Parameter Plug-In 插件\n本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！\n**Git Parameter Plug-In**插件可以参数化构建git 可以根据不同的分支或者tag进行构建。\n\n安装**Git Parameter Plug-In**插件\n\n**Git Parameter 文档**：\nhttps://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin\n**插件下载**：https://updates.jenkins-ci.org/download/plugins/git-parameter/\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins001.png)\n\n下面这个截图是根据分支进行构建\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins002.png)\n\n如果是根据tag进行构建的话，如下进行配置\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins003.png)\n\n这次我们是根据分支进行构建\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins004.png)\n\n注意以上两张截图中name就是下面我们要配置的变量：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins005.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins006.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins007.png)\n\n通过上图，我们可以看到下载git仓库中有两个分支master和wxy，我们可以选择其中任意一个进行构建即可。\n这次我们选择wxy分支进行构建，如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins008.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins009.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins010.png)\n\n\n## ansible plugin插件\n\n**本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！**\n\n首先要注意把yml文件存放到jenkins的工作目录下，否则jenkins会提示无权限操作。\n```\ncat /var/lib/jenkins/yml/dir.yml\n \n- hosts: '{{ host }}'\n  remote_user: root\n  tasks:\n   - name: test make dir\n     file: path=/etc/ilannitest state=directory mode=0755```\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins011.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins012.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins013.png)\n也可以保存到文件中主机地址，如下：\n```\ncat /etc/ansible/hosts \n\n[h5]\n114.55.101.252  ansible_ssh_user=root ansible_ssh_private_key_file=/var/lib/jenkins/key/dongyin```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins014.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins015.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/jenkins016.png)\n\n---\n## 多仓库Multiple SCMs plugin插件\n**本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！**\n\n插件地址：http://mirror.xmission.com/jenkins/plugins/multiple-scms/\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090622750.png)\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090639726.png)\n这个设置是为了防止前一个仓库的代码覆盖后一个仓库代码\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090424777.png)\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090652844.png)\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090702854.png)\n\n\n---\n\n\n","slug":"Dev-2016-11-10-jenkins","published":1,"updated":"2016-11-21T02:17:08.832Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjkk000bd8pkx1wzcowu","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>jenkins是一个广泛用于持续构建的可视化web工具，持续构建说得更直白点，就是各种项目的”自动化”编译、打包、分发部署。jenkins可以很好的支持各种语言（比如：java, c#, php等）的项目构建，也完全兼容ant、maven、gradle等多种第三方构建工具，同时跟svn、git能无缝集成，也支持直接与知名源代码托管网站，比如github、bitbucket直接集成。</p>\n<h1 id=\"jenkins-安装\"><a href=\"#jenkins-安装\" class=\"headerlink\" title=\"jenkins 安装\"></a>jenkins 安装</h1><h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><p>法一：<strong>apt-get</strong><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -q -O - http<span class=\"variable\">s:</span>//pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key <span class=\"built_in\">add</span> -</div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"deb https://pkg.jenkins.io/debian-stable binary/\"</span> &gt;&gt; /etc/apt/sources.<span class=\"keyword\">list</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install jenkins</div></pre></td></tr></table></figure></p>\n<p>jenkins地址是:<strong><a href=\"http://IP:8080\" target=\"_blank\" rel=\"external\">http://IP:8080</a></strong></p>\n<p>法二：<strong>war包</strong><br>下载地址：<a href=\"https://jenkins.io\" target=\"_blank\" rel=\"external\">https://jenkins.io</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png\" alt=\"mark\"><br>下载的<strong>jenkins.war</strong>，放到<strong>tomcat/webapp</strong>目录下，启动tomcat<br>tomcat默认端口为8080（可以自行修改），jenkins地址是:<strong><a href=\"http://IP:8080/jenkins\" target=\"_blank\" rel=\"external\">http://IP:8080/jenkins</a> </strong></p>\n<p><strong>启动</strong>jenkins和<strong>停止</strong>jenkins可以用下面这两条命令：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo service <span class=\"literal\">start</span></div><div class=\"line\">sudo service <span class=\"literal\">stop</span></div></pre></td></tr></table></figure></p>\n<p>安装完成，启动报错见下面<strong>配置设置</strong>，网页打不开看看防火墙有没有放行端口。</p>\n<hr>\n<h2 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h2><p>安装前检查jdk<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">java <span class=\"comment\">--version</span></div><div class=\"line\">yum <span class=\"built_in\">list</span> *openjdk*</div></pre></td></tr></table></figure></p>\n<p>法一：<strong>yum</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo wget -O /etc/yum<span class=\"selector-class\">.repos</span><span class=\"selector-class\">.d</span>/jenkins<span class=\"selector-class\">.repo</span> https:<span class=\"comment\">//pkg.jenkins.io/redhat-stable/jenkins.repo</span></div><div class=\"line\">sudo rpm --import https:<span class=\"comment\">//pkg.jenkins.io/redhat-stable/jenkins.io.key</span></div><div class=\"line\">yum install jenkins</div></pre></td></tr></table></figure></p>\n<p>jenkins地址是:<strong><a href=\"http://IP:8080\" target=\"_blank\" rel=\"external\">http://IP:8080</a></strong></p>\n<p>法二：<strong>war包</strong><br>下载地址：<a href=\"https://jenkins.io\" target=\"_blank\" rel=\"external\">https://jenkins.io</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png\" alt=\"mark\"><br>下载的<strong>jenkins.war</strong>，放到<strong>tomcat/webapp</strong>目录下，启动tomcat<br>tomcat默认端口为8080（可以自行修改），jenkins地址是:<strong><a href=\"http://IP:8080/jenkins\" target=\"_blank\" rel=\"external\">http://IP:8080/jenkins</a> </strong></p>\n<p><strong>启动</strong>jenkins和<strong>停止</strong>jenkins可以用下面这两条命令：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo /etc/init.d/jenkins <span class=\"literal\">start</span></div><div class=\"line\">sudo /etc/init.d/jenkins <span class=\"literal\">stop</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"安装完成，启动报错见下面配置设置，网页打不开看看防火墙有没有放行端口。\"><a href=\"#安装完成，启动报错见下面配置设置，网页打不开看看防火墙有没有放行端口。\" class=\"headerlink\" title=\"安装完成，启动报错见下面配置设置，网页打不开看看防火墙有没有放行端口。\"></a>安装完成，启动报错见下面<strong>配置设置</strong>，网页打不开看看防火墙有没有放行端口。</h2><h2 id=\"Window、Mac\"><a href=\"#Window、Mac\" class=\"headerlink\" title=\"Window、Mac\"></a>Window、Mac</h2><p>下载地址：<a href=\"https://jenkins.io\" target=\"_blank\" rel=\"external\">https://jenkins.io</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png\" alt=\"mark\"><br>直接点图中war包旁边小三角选择下载安装<br>jenkins地址是:<strong><a href=\"http://IP:8080\" target=\"_blank\" rel=\"external\">http://IP:8080</a></strong></p>\n<hr>\n<h2 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h2><p>DockerHub官方jenkins镜像： <a href=\"https://registry.hub.docker.com/_/jenkins/\" target=\"_blank\" rel=\"external\">https://registry.hub.docker.com/_/jenkins/</a></p>\n<p>github源码： <a href=\"https://github.com/jenkinsci/docker\" target=\"_blank\" rel=\"external\">https://github.com/jenkinsci/docker</a></p>\n<p>官方jenkins镜像中所使用的jenkins是Jenkins的LTS（Long Term Support）发布版本。</p>\n<h3 id=\"docker官方的jenkins镜像启动容器\"><a href=\"#docker官方的jenkins镜像启动容器\" class=\"headerlink\" title=\"docker官方的jenkins镜像启动容器\"></a>docker官方的jenkins镜像启动容器</h3><p>运行命令为<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker <span class=\"built_in\">run</span> <span class=\"comment\">--name myjenkins -p 8080:8080 -v /var/ jenkins_home jenkins</span></div></pre></td></tr></table></figure></p>\n<p>运行docker run命令时，如果本地没有镜像，则默认会从DockerHub pull镜像，将镜像缓存到本地，然后再启动基于镜像创建的容器。<br>查看镜像信息：<code>docker images</code></p>\n<p>过一会儿就能看到启动日志了，此时注意日志输出的密码。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092238367.png\" alt=\"mark\"><br>查看日志也可以<br><figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker ps</div><div class=\"line\">docker logs <span class=\"string\">[image_name/CONTAINER ID]</span></div></pre></td></tr></table></figure></p>\n<p>提示说密码在<strong>/var/jenkins_home/secrets/initialAdminPassword</strong>能看到，于是进入交互模式<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker <span class=\"keyword\">run</span><span class=\"bash\"> -i -t [image_name/CONTAINER ID] /bin/bash</span></div></pre></td></tr></table></figure></p>\n<p>就可以直接像一台主机一样操作啦，但我没有找到该文件。</p>\n<p>之后浏览器输入<a href=\"http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\" target=\"_blank\" rel=\"external\">http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png\" alt=\"mark\"></p>\n<h3 id=\"源码构建jenkins镜像并运行容器\"><a href=\"#源码构建jenkins镜像并运行容器\" class=\"headerlink\" title=\"源码构建jenkins镜像并运行容器\"></a>源码构建jenkins镜像并运行容器</h3><p>需要JDK环境<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/jenkinsci/docker.git</div><div class=\"line\">cd docker</div><div class=\"line\">docker build -t leolan/jenkins .   <span class=\"comment\">#使用docker build+Dockerfile（文件在docker目录下）构建jenkins镜像</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/100314863.png\" alt=\"mark\"><br>镜像构建成功后（总共21个Step，Dockerfile共21条指令），使用<strong>docker images</strong>查看镜像，leolan/jenkins和官方的jenkins镜像大小相同,使用<strong>docker ps</strong>查看运行的容器信息。<br>使用<code>docker stop [image_name/CONTAINER ID]</code>停止之前基于官方jenkins镜像启动的容器<br>启动新容器：<code>docker run --name leolan_jenkins -p 8080:8080 -v /var/jenkins_home leolan/jenkins</code><br>之后浏览器输入<a href=\"http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\" target=\"_blank\" rel=\"external\">http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png\" alt=\"mark\"></p>\n<h3 id=\"用cSphere希云管理Docker\"><a href=\"#用cSphere希云管理Docker\" class=\"headerlink\" title=\"用cSphere希云管理Docker\"></a>用cSphere希云管理Docker</h3><p>参考：<a href=\"http://csphere.cn/hub/jenkins\" target=\"_blank\" rel=\"external\">http://csphere.cn/hub/jenkins</a></p>\n<hr>\n<h1 id=\"配置设置\"><a href=\"#配置设置\" class=\"headerlink\" title=\"配置设置\"></a>配置设置</h1><p>jenkins安装目录(WAR包会放在这里):<strong>/usr/lib/jenkins/</strong><br>jenkins配置文件:<strong>/etc/sysconfig/jenkins</strong><br>默认的JENKINS_HOME:<strong>/var/lib/jenkins/</strong><br>Jenkins日志文件:<strong>/var/log/jenkins/jenkins.log</strong></p>\n<p><strong>端口设置</strong>：<code>vim /etc/sysconfig/jenkins</code><br>找到2处修改端口号：<br>JENKINS_PORT=”8080”<br>JENKINS_AJP_PORT=”8009”<br>重启服务：<code>service jenkins restart</code></p>\n<p><strong>错误</strong>：“Starting Jenkins -bash: /usr/bin/Java: No such file or directory”。表示找不到Jenkins找不到java。<br>查看java版本<code>java -version</code>，编辑文件<code>vi /etc/init.d/jenkins</code>，找到类似这样的一段，在最后加上：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">candidates=\"</div><div class=\"line\">/etc/alternatives/java</div><div class=\"line\">/usr/lib/jvm/java<span class=\"string\">-1</span>.6.0/bin/java</div><div class=\"line\">/usr/lib/jvm/java<span class=\"string\">-1</span>.7.0/bin/java</div><div class=\"line\">/usr/lib/jvm/java<span class=\"string\">-1</span>.8.0/bin/java</div><div class=\"line\">/usr/bin/java</div><div class=\"line\">/usr/java/jdk1.8.0_111/bin/java  #新增加的</div></pre></td></tr></table></figure></p>\n<p>重启服务：<code>service jenkins restart</code></p>\n<hr>\n<h1 id=\"jenkins-插件\"><a href=\"#jenkins-插件\" class=\"headerlink\" title=\"jenkins 插件\"></a>jenkins 插件</h1><h2 id=\"Git-Parameter-Plug-In-插件\"><a href=\"#Git-Parameter-Plug-In-插件\" class=\"headerlink\" title=\"Git Parameter Plug-In 插件\"></a>Git Parameter Plug-In 插件</h2><p>本节是根据<a href=\"http://www.ilanni.com/\" target=\"_blank\" rel=\"external\">烂泥大神</a>分享的笔记摘录的！<br><strong>Git Parameter Plug-In</strong>插件可以参数化构建git 可以根据不同的分支或者tag进行构建。</p>\n<p>安装<strong>Git Parameter Plug-In</strong>插件</p>\n<p><strong>Git Parameter 文档</strong>：<br><a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin\" target=\"_blank\" rel=\"external\">https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin</a><br><strong>插件下载</strong>：<a href=\"https://updates.jenkins-ci.org/download/plugins/git-parameter/\" target=\"_blank\" rel=\"external\">https://updates.jenkins-ci.org/download/plugins/git-parameter/</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins001.png\" alt=\"\"></p>\n<p>下面这个截图是根据分支进行构建<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins002.png\" alt=\"\"></p>\n<p>如果是根据tag进行构建的话，如下进行配置<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins003.png\" alt=\"\"></p>\n<p>这次我们是根据分支进行构建<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins004.png\" alt=\"\"></p>\n<p>注意以上两张截图中name就是下面我们要配置的变量：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins005.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins006.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins007.png\" alt=\"\"></p>\n<p>通过上图，我们可以看到下载git仓库中有两个分支master和wxy，我们可以选择其中任意一个进行构建即可。<br>这次我们选择wxy分支进行构建，如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins008.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins009.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins010.png\" alt=\"\"></p>\n<h2 id=\"ansible-plugin插件\"><a href=\"#ansible-plugin插件\" class=\"headerlink\" title=\"ansible plugin插件\"></a>ansible plugin插件</h2><p><strong>本节是根据<a href=\"http://www.ilanni.com/\" target=\"_blank\" rel=\"external\">烂泥大神</a>分享的笔记摘录的！</strong></p>\n<p>首先要注意把yml文件存放到jenkins的工作目录下，否则jenkins会提示无权限操作。<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat /var/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">jenkins</span>/<span class=\"title\">yml</span>/<span class=\"title\">dir</span>.<span class=\"title\">yml</span></span></div><div class=\"line\"> </div><div class=\"line\">- <span class=\"symbol\">hosts:</span> <span class=\"string\">'&#123;&#123; host &#125;&#125;'</span></div><div class=\"line\">  <span class=\"symbol\">remote_user:</span> root</div><div class=\"line\">  <span class=\"symbol\">tasks:</span></div><div class=\"line\">   - <span class=\"symbol\">name:</span> test make dir</div><div class=\"line\">     <span class=\"symbol\">file:</span> path=<span class=\"regexp\">/etc/ilannitest</span> state=directory mode=<span class=\"number\">0755</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins011.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins012.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins013.png\" alt=\"\"><br>也可以保存到文件中主机地址，如下：<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat /etc/ansible/hosts </div><div class=\"line\"></div><div class=\"line\">[h5]</div><div class=\"line\"><span class=\"number\">114.55</span><span class=\"number\">.101</span><span class=\"number\">.252</span>  ansible_ssh_user=root ansible_ssh_private_key_file=/var/lib/jenkins/<span class=\"type\">key</span>/dongyin</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins014.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins015.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins016.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"多仓库Multiple-SCMs-plugin插件\"><a href=\"#多仓库Multiple-SCMs-plugin插件\" class=\"headerlink\" title=\"多仓库Multiple SCMs plugin插件\"></a>多仓库Multiple SCMs plugin插件</h2><p><strong>本节是根据<a href=\"http://www.ilanni.com/\" target=\"_blank\" rel=\"external\">烂泥大神</a>分享的笔记摘录的！</strong></p>\n<p>插件地址：<a href=\"http://mirror.xmission.com/jenkins/plugins/multiple-scms/\" target=\"_blank\" rel=\"external\">http://mirror.xmission.com/jenkins/plugins/multiple-scms/</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090622750.png\" alt=\"mark\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090639726.png\" alt=\"mark\"><br>这个设置是为了防止前一个仓库的代码覆盖后一个仓库代码<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090424777.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090652844.png\" alt=\"mark\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090702854.png\" alt=\"mark\"></p>\n<hr>\n","excerpt":"","more":"<p>jenkins是一个广泛用于持续构建的可视化web工具，持续构建说得更直白点，就是各种项目的”自动化”编译、打包、分发部署。jenkins可以很好的支持各种语言（比如：java, c#, php等）的项目构建，也完全兼容ant、maven、gradle等多种第三方构建工具，同时跟svn、git能无缝集成，也支持直接与知名源代码托管网站，比如github、bitbucket直接集成。</p>\n<h1 id=\"jenkins-安装\"><a href=\"#jenkins-安装\" class=\"headerlink\" title=\"jenkins 安装\"></a>jenkins 安装</h1><h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><p>法一：<strong>apt-get</strong><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -q -O - http<span class=\"variable\">s:</span>//pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key <span class=\"built_in\">add</span> -</div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"deb https://pkg.jenkins.io/debian-stable binary/\"</span> &gt;&gt; /etc/apt/sources.<span class=\"keyword\">list</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install jenkins</div></pre></td></tr></table></figure></p>\n<p>jenkins地址是:<strong><a href=\"http://IP:8080\">http://IP:8080</a></strong></p>\n<p>法二：<strong>war包</strong><br>下载地址：<a href=\"https://jenkins.io\">https://jenkins.io</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png\" alt=\"mark\"><br>下载的<strong>jenkins.war</strong>，放到<strong>tomcat/webapp</strong>目录下，启动tomcat<br>tomcat默认端口为8080（可以自行修改），jenkins地址是:<strong><a href=\"http://IP:8080/jenkins\">http://IP:8080/jenkins</a> </strong></p>\n<p><strong>启动</strong>jenkins和<strong>停止</strong>jenkins可以用下面这两条命令：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo service <span class=\"literal\">start</span></div><div class=\"line\">sudo service <span class=\"literal\">stop</span></div></pre></td></tr></table></figure></p>\n<p>安装完成，启动报错见下面<strong>配置设置</strong>，网页打不开看看防火墙有没有放行端口。</p>\n<hr>\n<h2 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h2><p>安装前检查jdk<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">java <span class=\"comment\">--version</span></div><div class=\"line\">yum <span class=\"built_in\">list</span> *openjdk*</div></pre></td></tr></table></figure></p>\n<p>法一：<strong>yum</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo wget -O /etc/yum<span class=\"selector-class\">.repos</span><span class=\"selector-class\">.d</span>/jenkins<span class=\"selector-class\">.repo</span> https:<span class=\"comment\">//pkg.jenkins.io/redhat-stable/jenkins.repo</span></div><div class=\"line\">sudo rpm --import https:<span class=\"comment\">//pkg.jenkins.io/redhat-stable/jenkins.io.key</span></div><div class=\"line\">yum install jenkins</div></pre></td></tr></table></figure></p>\n<p>jenkins地址是:<strong><a href=\"http://IP:8080\">http://IP:8080</a></strong></p>\n<p>法二：<strong>war包</strong><br>下载地址：<a href=\"https://jenkins.io\">https://jenkins.io</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png\" alt=\"mark\"><br>下载的<strong>jenkins.war</strong>，放到<strong>tomcat/webapp</strong>目录下，启动tomcat<br>tomcat默认端口为8080（可以自行修改），jenkins地址是:<strong><a href=\"http://IP:8080/jenkins\">http://IP:8080/jenkins</a> </strong></p>\n<p><strong>启动</strong>jenkins和<strong>停止</strong>jenkins可以用下面这两条命令：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo /etc/init.d/jenkins <span class=\"literal\">start</span></div><div class=\"line\">sudo /etc/init.d/jenkins <span class=\"literal\">stop</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"安装完成，启动报错见下面配置设置，网页打不开看看防火墙有没有放行端口。\"><a href=\"#安装完成，启动报错见下面配置设置，网页打不开看看防火墙有没有放行端口。\" class=\"headerlink\" title=\"安装完成，启动报错见下面配置设置，网页打不开看看防火墙有没有放行端口。\"></a>安装完成，启动报错见下面<strong>配置设置</strong>，网页打不开看看防火墙有没有放行端口。</h2><h2 id=\"Window、Mac\"><a href=\"#Window、Mac\" class=\"headerlink\" title=\"Window、Mac\"></a>Window、Mac</h2><p>下载地址：<a href=\"https://jenkins.io\">https://jenkins.io</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/121226957.png\" alt=\"mark\"><br>直接点图中war包旁边小三角选择下载安装<br>jenkins地址是:<strong><a href=\"http://IP:8080\">http://IP:8080</a></strong></p>\n<hr>\n<h2 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h2><p>DockerHub官方jenkins镜像： <a href=\"https://registry.hub.docker.com/_/jenkins/\">https://registry.hub.docker.com/_/jenkins/</a></p>\n<p>github源码： <a href=\"https://github.com/jenkinsci/docker\">https://github.com/jenkinsci/docker</a></p>\n<p>官方jenkins镜像中所使用的jenkins是Jenkins的LTS（Long Term Support）发布版本。</p>\n<h3 id=\"docker官方的jenkins镜像启动容器\"><a href=\"#docker官方的jenkins镜像启动容器\" class=\"headerlink\" title=\"docker官方的jenkins镜像启动容器\"></a>docker官方的jenkins镜像启动容器</h3><p>运行命令为<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker <span class=\"built_in\">run</span> <span class=\"comment\">--name myjenkins -p 8080:8080 -v /var/ jenkins_home jenkins</span></div></pre></td></tr></table></figure></p>\n<p>运行docker run命令时，如果本地没有镜像，则默认会从DockerHub pull镜像，将镜像缓存到本地，然后再启动基于镜像创建的容器。<br>查看镜像信息：<code>docker images</code></p>\n<p>过一会儿就能看到启动日志了，此时注意日志输出的密码。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092238367.png\" alt=\"mark\"><br>查看日志也可以<br><figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker ps</div><div class=\"line\">docker logs <span class=\"string\">[image_name/CONTAINER ID]</span></div></pre></td></tr></table></figure></p>\n<p>提示说密码在<strong>/var/jenkins_home/secrets/initialAdminPassword</strong>能看到，于是进入交互模式<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker <span class=\"keyword\">run</span><span class=\"bash\"> -i -t [image_name/CONTAINER ID] /bin/bash</span></div></pre></td></tr></table></figure></p>\n<p>就可以直接像一台主机一样操作啦，但我没有找到该文件。</p>\n<p>之后浏览器输入<a href=\"http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\">http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png\" alt=\"mark\"></p>\n<h3 id=\"源码构建jenkins镜像并运行容器\"><a href=\"#源码构建jenkins镜像并运行容器\" class=\"headerlink\" title=\"源码构建jenkins镜像并运行容器\"></a>源码构建jenkins镜像并运行容器</h3><p>需要JDK环境<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/jenkinsci/docker.git</div><div class=\"line\">cd docker</div><div class=\"line\">docker build -t leolan/jenkins .   <span class=\"comment\">#使用docker build+Dockerfile（文件在docker目录下）构建jenkins镜像</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/100314863.png\" alt=\"mark\"><br>镜像构建成功后（总共21个Step，Dockerfile共21条指令），使用<strong>docker images</strong>查看镜像，leolan/jenkins和官方的jenkins镜像大小相同,使用<strong>docker ps</strong>查看运行的容器信息。<br>使用<code>docker stop [image_name/CONTAINER ID]</code>停止之前基于官方jenkins镜像启动的容器<br>启动新容器：<code>docker run --name leolan_jenkins -p 8080:8080 -v /var/jenkins_home leolan/jenkins</code><br>之后浏览器输入<a href=\"http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。\">http://IP:8080就能看到Jenkins页面了，输入刚刚的密码。下一步按需要选择；输入账户密码；进入管理界面。</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/092600938.png\" alt=\"mark\"></p>\n<h3 id=\"用cSphere希云管理Docker\"><a href=\"#用cSphere希云管理Docker\" class=\"headerlink\" title=\"用cSphere希云管理Docker\"></a>用cSphere希云管理Docker</h3><p>参考：<a href=\"http://csphere.cn/hub/jenkins\">http://csphere.cn/hub/jenkins</a></p>\n<hr>\n<h1 id=\"配置设置\"><a href=\"#配置设置\" class=\"headerlink\" title=\"配置设置\"></a>配置设置</h1><p>jenkins安装目录(WAR包会放在这里):<strong>/usr/lib/jenkins/</strong><br>jenkins配置文件:<strong>/etc/sysconfig/jenkins</strong><br>默认的JENKINS_HOME:<strong>/var/lib/jenkins/</strong><br>Jenkins日志文件:<strong>/var/log/jenkins/jenkins.log</strong></p>\n<p><strong>端口设置</strong>：<code>vim /etc/sysconfig/jenkins</code><br>找到2处修改端口号：<br>JENKINS_PORT=”8080”<br>JENKINS_AJP_PORT=”8009”<br>重启服务：<code>service jenkins restart</code></p>\n<p><strong>错误</strong>：“Starting Jenkins -bash: /usr/bin/Java: No such file or directory”。表示找不到Jenkins找不到java。<br>查看java版本<code>java -version</code>，编辑文件<code>vi /etc/init.d/jenkins</code>，找到类似这样的一段，在最后加上：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">candidates=\"</div><div class=\"line\">/etc/alternatives/java</div><div class=\"line\">/usr/lib/jvm/java<span class=\"string\">-1</span>.6.0/bin/java</div><div class=\"line\">/usr/lib/jvm/java<span class=\"string\">-1</span>.7.0/bin/java</div><div class=\"line\">/usr/lib/jvm/java<span class=\"string\">-1</span>.8.0/bin/java</div><div class=\"line\">/usr/bin/java</div><div class=\"line\">/usr/java/jdk1.8.0_111/bin/java  #新增加的</div></pre></td></tr></table></figure></p>\n<p>重启服务：<code>service jenkins restart</code></p>\n<hr>\n<h1 id=\"jenkins-插件\"><a href=\"#jenkins-插件\" class=\"headerlink\" title=\"jenkins 插件\"></a>jenkins 插件</h1><h2 id=\"Git-Parameter-Plug-In-插件\"><a href=\"#Git-Parameter-Plug-In-插件\" class=\"headerlink\" title=\"Git Parameter Plug-In 插件\"></a>Git Parameter Plug-In 插件</h2><p>本节是根据<a href=\"http://www.ilanni.com/\">烂泥大神</a>分享的笔记摘录的！<br><strong>Git Parameter Plug-In</strong>插件可以参数化构建git 可以根据不同的分支或者tag进行构建。</p>\n<p>安装<strong>Git Parameter Plug-In</strong>插件</p>\n<p><strong>Git Parameter 文档</strong>：<br><a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin\">https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin</a><br><strong>插件下载</strong>：<a href=\"https://updates.jenkins-ci.org/download/plugins/git-parameter/\">https://updates.jenkins-ci.org/download/plugins/git-parameter/</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins001.png\" alt=\"\"></p>\n<p>下面这个截图是根据分支进行构建<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins002.png\" alt=\"\"></p>\n<p>如果是根据tag进行构建的话，如下进行配置<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins003.png\" alt=\"\"></p>\n<p>这次我们是根据分支进行构建<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins004.png\" alt=\"\"></p>\n<p>注意以上两张截图中name就是下面我们要配置的变量：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins005.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins006.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins007.png\" alt=\"\"></p>\n<p>通过上图，我们可以看到下载git仓库中有两个分支master和wxy，我们可以选择其中任意一个进行构建即可。<br>这次我们选择wxy分支进行构建，如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins008.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins009.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins010.png\" alt=\"\"></p>\n<h2 id=\"ansible-plugin插件\"><a href=\"#ansible-plugin插件\" class=\"headerlink\" title=\"ansible plugin插件\"></a>ansible plugin插件</h2><p><strong>本节是根据<a href=\"http://www.ilanni.com/\">烂泥大神</a>分享的笔记摘录的！</strong></p>\n<p>首先要注意把yml文件存放到jenkins的工作目录下，否则jenkins会提示无权限操作。<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat /var/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">jenkins</span>/<span class=\"title\">yml</span>/<span class=\"title\">dir</span>.<span class=\"title\">yml</span></span></div><div class=\"line\"> </div><div class=\"line\">- <span class=\"symbol\">hosts:</span> <span class=\"string\">'&#123;&#123; host &#125;&#125;'</span></div><div class=\"line\">  <span class=\"symbol\">remote_user:</span> root</div><div class=\"line\">  <span class=\"symbol\">tasks:</span></div><div class=\"line\">   - <span class=\"symbol\">name:</span> test make dir</div><div class=\"line\">     <span class=\"symbol\">file:</span> path=<span class=\"regexp\">/etc/ilannitest</span> state=directory mode=<span class=\"number\">0755</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins011.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins012.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins013.png\" alt=\"\"><br>也可以保存到文件中主机地址，如下：<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat /etc/ansible/hosts </div><div class=\"line\"></div><div class=\"line\">[h5]</div><div class=\"line\"><span class=\"number\">114.55</span><span class=\"number\">.101</span><span class=\"number\">.252</span>  ansible_ssh_user=root ansible_ssh_private_key_file=/var/lib/jenkins/<span class=\"type\">key</span>/dongyin</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins014.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins015.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/jenkins016.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"多仓库Multiple-SCMs-plugin插件\"><a href=\"#多仓库Multiple-SCMs-plugin插件\" class=\"headerlink\" title=\"多仓库Multiple SCMs plugin插件\"></a>多仓库Multiple SCMs plugin插件</h2><p><strong>本节是根据<a href=\"http://www.ilanni.com/\">烂泥大神</a>分享的笔记摘录的！</strong></p>\n<p>插件地址：<a href=\"http://mirror.xmission.com/jenkins/plugins/multiple-scms/\">http://mirror.xmission.com/jenkins/plugins/multiple-scms/</a><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090622750.png\" alt=\"mark\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090639726.png\" alt=\"mark\"><br>这个设置是为了防止前一个仓库的代码覆盖后一个仓库代码<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090424777.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090652844.png\" alt=\"mark\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161117/090702854.png\" alt=\"mark\"></p>\n<hr>\n"},{"title":"React Native","top":10,"abbrlink":55168,"date":"2016-12-08T03:30:55.000Z","keywords":"React Native,原生APP构建","_content":"\n# React Native开发环境搭建\n\n找Hexo的问题时，无意间看到一篇关于React Native的博文，想起一次源创会上有以为大牛讲过React Native。React Native是使用javascript编写移动跨平台原生app的框架, Facebook已经在多项产品中使用了React Native，并且将持续地投入建设React Native。\n\n官网：[搭建开发环境](http://reactnative.cn/docs/0.39/getting-started.html)\n\n---\n## Mac\n### 快速构件运行app\n安装依赖环境\n```\nbrew install node\nbrew install watchman\n(sudo) npm install -g react-native-cli```\n生成项目\n```\nreact-native init demo```\n构件运行\n```\nreact-native run-ios```\n\n---\n### 调试技巧\n执行上面命令后, 会自动启动模拟器, **ctrl+command+z** 可以调出调试菜单.\n\n **Reload** 刷新app页面,让js代码的更改立刻生效,\n\n **Enable Remote JS Debugging** 调出**Chrome开发者工具**, 可以看到异常, 打印日志, 使用debugger断点.\n```\nconsole.log('something');\ndebugger;```\n\n---\n### 打包发布\n**android生成离线包**\n```\nreact-native bundle --platform android --entry-file index.android.js --bundle-output ./bundles/index.android.bundle --dev false```\n\n**配置签名**\n\n**生成apk**：`cd android && ./gradlew installRelease`\n\n**ios生成离线包**\n```\nreact-native bundle --platform ios --entry-file index.ios.js --bundle-output ./bundles/index.ios.bundle --dev false```\n\n* [原生代码中使用离线包](http://reactnative.cn/docs/0.39/running-on-device-ios.html#content)\n* [使用xcode生成ipa](http://jingyan.baidu.com/article/ceb9fb10f4dffb8cad2ba03e.html)\n\n原文：[react-native极简教程](https://ipro.xin/2016/07/06/react-native%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B/)\n\n---\n## Windows\n参考官网：http://reactnative.cn/docs/0.39/getting-started.html#content\n\n\n\n\n---\n## Linux\n参考官网：http://reactnative.cn/docs/0.39/getting-started.html#content\n\n\n---\n\n# ---未完成---\n\n---\n\n","source":"_posts/Dev/2016-12-08-React-Native.md","raw":"---\ntitle: React Native\ncategories:\n  - Dev\ntags:\n  - React Native\n  - 构建原生APP\ntop: 10\nabbrlink: 55168\ndate: 2016-12-08 11:30:55\nkeywords: React Native,原生APP构建\n---\n\n# React Native开发环境搭建\n\n找Hexo的问题时，无意间看到一篇关于React Native的博文，想起一次源创会上有以为大牛讲过React Native。React Native是使用javascript编写移动跨平台原生app的框架, Facebook已经在多项产品中使用了React Native，并且将持续地投入建设React Native。\n\n官网：[搭建开发环境](http://reactnative.cn/docs/0.39/getting-started.html)\n\n---\n## Mac\n### 快速构件运行app\n安装依赖环境\n```\nbrew install node\nbrew install watchman\n(sudo) npm install -g react-native-cli```\n生成项目\n```\nreact-native init demo```\n构件运行\n```\nreact-native run-ios```\n\n---\n### 调试技巧\n执行上面命令后, 会自动启动模拟器, **ctrl+command+z** 可以调出调试菜单.\n\n **Reload** 刷新app页面,让js代码的更改立刻生效,\n\n **Enable Remote JS Debugging** 调出**Chrome开发者工具**, 可以看到异常, 打印日志, 使用debugger断点.\n```\nconsole.log('something');\ndebugger;```\n\n---\n### 打包发布\n**android生成离线包**\n```\nreact-native bundle --platform android --entry-file index.android.js --bundle-output ./bundles/index.android.bundle --dev false```\n\n**配置签名**\n\n**生成apk**：`cd android && ./gradlew installRelease`\n\n**ios生成离线包**\n```\nreact-native bundle --platform ios --entry-file index.ios.js --bundle-output ./bundles/index.ios.bundle --dev false```\n\n* [原生代码中使用离线包](http://reactnative.cn/docs/0.39/running-on-device-ios.html#content)\n* [使用xcode生成ipa](http://jingyan.baidu.com/article/ceb9fb10f4dffb8cad2ba03e.html)\n\n原文：[react-native极简教程](https://ipro.xin/2016/07/06/react-native%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B/)\n\n---\n## Windows\n参考官网：http://reactnative.cn/docs/0.39/getting-started.html#content\n\n\n\n\n---\n## Linux\n参考官网：http://reactnative.cn/docs/0.39/getting-started.html#content\n\n\n---\n\n# ---未完成---\n\n---\n\n","slug":"Dev-2016-12-08-React-Native","published":1,"updated":"2016-12-08T03:52:46.367Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjko000fd8pkgoa472em","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"React-Native开发环境搭建\"><a href=\"#React-Native开发环境搭建\" class=\"headerlink\" title=\"React Native开发环境搭建\"></a>React Native开发环境搭建</h1><p>找Hexo的问题时，无意间看到一篇关于React Native的博文，想起一次源创会上有以为大牛讲过React Native。React Native是使用javascript编写移动跨平台原生app的框架, Facebook已经在多项产品中使用了React Native，并且将持续地投入建设React Native。</p>\n<p>官网：<a href=\"http://reactnative.cn/docs/0.39/getting-started.html\" target=\"_blank\" rel=\"external\">搭建开发环境</a></p>\n<hr>\n<h2 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h2><h3 id=\"快速构件运行app\"><a href=\"#快速构件运行app\" class=\"headerlink\" title=\"快速构件运行app\"></a>快速构件运行app</h3><p>安装依赖环境<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>node</div><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>watchman</div><div class=\"line\">(sudo) npm <span class=\"keyword\">install </span>-g react-native-cli</div></pre></td></tr></table></figure></p>\n<p>生成项目<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">react-<span class=\"keyword\">native</span> init demo</div></pre></td></tr></table></figure></p>\n<p>构件运行<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">react-native <span class=\"keyword\">run</span><span class=\"bash\">-ios</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"调试技巧\"><a href=\"#调试技巧\" class=\"headerlink\" title=\"调试技巧\"></a>调试技巧</h3><p>执行上面命令后, 会自动启动模拟器, <strong>ctrl+command+z</strong> 可以调出调试菜单.</p>\n<p> <strong>Reload</strong> 刷新app页面,让js代码的更改立刻生效,</p>\n<p> <strong>Enable Remote JS Debugging</strong> 调出<strong>Chrome开发者工具</strong>, 可以看到异常, 打印日志, 使用debugger断点.<br><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'something'</span>);</div><div class=\"line\"><span class=\"keyword\">debugger</span>;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"打包发布\"><a href=\"#打包发布\" class=\"headerlink\" title=\"打包发布\"></a>打包发布</h3><p><strong>android生成离线包</strong><br><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">react</span>-native <span class=\"keyword\">bundle </span>--platform <span class=\"keyword\">android </span>--<span class=\"meta\">entry</span>-file index.<span class=\"keyword\">android.js </span>--<span class=\"keyword\">bundle-output </span>./<span class=\"keyword\">bundles/index.android.bundle </span>--dev false</div></pre></td></tr></table></figure></p>\n<p><strong>配置签名</strong></p>\n<p><strong>生成apk</strong>：<code>cd android &amp;&amp; ./gradlew installRelease</code></p>\n<p><strong>ios生成离线包</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">react-native bundle --platform ios --entry-file index<span class=\"selector-class\">.ios</span><span class=\"selector-class\">.js</span> --bundle-output ./bundles/index<span class=\"selector-class\">.ios</span><span class=\"selector-class\">.bundle</span> --dev false</div></pre></td></tr></table></figure></p>\n<ul>\n<li><a href=\"http://reactnative.cn/docs/0.39/running-on-device-ios.html#content\" target=\"_blank\" rel=\"external\">原生代码中使用离线包</a></li>\n<li><a href=\"http://jingyan.baidu.com/article/ceb9fb10f4dffb8cad2ba03e.html\" target=\"_blank\" rel=\"external\">使用xcode生成ipa</a></li>\n</ul>\n<p>原文：<a href=\"https://ipro.xin/2016/07/06/react-native%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B/\" target=\"_blank\" rel=\"external\">react-native极简教程</a></p>\n<hr>\n<h2 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h2><p>参考官网：<a href=\"http://reactnative.cn/docs/0.39/getting-started.html#content\" target=\"_blank\" rel=\"external\">http://reactnative.cn/docs/0.39/getting-started.html#content</a></p>\n<hr>\n<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><p>参考官网：<a href=\"http://reactnative.cn/docs/0.39/getting-started.html#content\" target=\"_blank\" rel=\"external\">http://reactnative.cn/docs/0.39/getting-started.html#content</a></p>\n<hr>\n<h1 id=\"—未完成—\"><a href=\"#—未完成—\" class=\"headerlink\" title=\"—未完成—\"></a>—未完成—</h1><hr>\n","excerpt":"","more":"<h1 id=\"React-Native开发环境搭建\"><a href=\"#React-Native开发环境搭建\" class=\"headerlink\" title=\"React Native开发环境搭建\"></a>React Native开发环境搭建</h1><p>找Hexo的问题时，无意间看到一篇关于React Native的博文，想起一次源创会上有以为大牛讲过React Native。React Native是使用javascript编写移动跨平台原生app的框架, Facebook已经在多项产品中使用了React Native，并且将持续地投入建设React Native。</p>\n<p>官网：<a href=\"http://reactnative.cn/docs/0.39/getting-started.html\">搭建开发环境</a></p>\n<hr>\n<h2 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h2><h3 id=\"快速构件运行app\"><a href=\"#快速构件运行app\" class=\"headerlink\" title=\"快速构件运行app\"></a>快速构件运行app</h3><p>安装依赖环境<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>node</div><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>watchman</div><div class=\"line\">(sudo) npm <span class=\"keyword\">install </span>-g react-native-cli</div></pre></td></tr></table></figure></p>\n<p>生成项目<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">react-<span class=\"keyword\">native</span> init demo</div></pre></td></tr></table></figure></p>\n<p>构件运行<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">react-native <span class=\"keyword\">run</span><span class=\"bash\">-ios</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"调试技巧\"><a href=\"#调试技巧\" class=\"headerlink\" title=\"调试技巧\"></a>调试技巧</h3><p>执行上面命令后, 会自动启动模拟器, <strong>ctrl+command+z</strong> 可以调出调试菜单.</p>\n<p> <strong>Reload</strong> 刷新app页面,让js代码的更改立刻生效,</p>\n<p> <strong>Enable Remote JS Debugging</strong> 调出<strong>Chrome开发者工具</strong>, 可以看到异常, 打印日志, 使用debugger断点.<br><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'something'</span>);</div><div class=\"line\"><span class=\"keyword\">debugger</span>;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"打包发布\"><a href=\"#打包发布\" class=\"headerlink\" title=\"打包发布\"></a>打包发布</h3><p><strong>android生成离线包</strong><br><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">react</span>-native <span class=\"keyword\">bundle </span>--platform <span class=\"keyword\">android </span>--<span class=\"meta\">entry</span>-file index.<span class=\"keyword\">android.js </span>--<span class=\"keyword\">bundle-output </span>./<span class=\"keyword\">bundles/index.android.bundle </span>--dev false</div></pre></td></tr></table></figure></p>\n<p><strong>配置签名</strong></p>\n<p><strong>生成apk</strong>：<code>cd android &amp;&amp; ./gradlew installRelease</code></p>\n<p><strong>ios生成离线包</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">react-native bundle --platform ios --entry-file index<span class=\"selector-class\">.ios</span><span class=\"selector-class\">.js</span> --bundle-output ./bundles/index<span class=\"selector-class\">.ios</span><span class=\"selector-class\">.bundle</span> --dev false</div></pre></td></tr></table></figure></p>\n<ul>\n<li><a href=\"http://reactnative.cn/docs/0.39/running-on-device-ios.html#content\">原生代码中使用离线包</a></li>\n<li><a href=\"http://jingyan.baidu.com/article/ceb9fb10f4dffb8cad2ba03e.html\">使用xcode生成ipa</a></li>\n</ul>\n<p>原文：<a href=\"https://ipro.xin/2016/07/06/react-native%E6%9E%81%E7%AE%80%E6%95%99%E7%A8%8B/\">react-native极简教程</a></p>\n<hr>\n<h2 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h2><p>参考官网：<a href=\"http://reactnative.cn/docs/0.39/getting-started.html#content\">http://reactnative.cn/docs/0.39/getting-started.html#content</a></p>\n<hr>\n<h2 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h2><p>参考官网：<a href=\"http://reactnative.cn/docs/0.39/getting-started.html#content\">http://reactnative.cn/docs/0.39/getting-started.html#content</a></p>\n<hr>\n<h1 id=\"—未完成—\"><a href=\"#—未完成—\" class=\"headerlink\" title=\"—未完成—\"></a>—未完成—</h1><hr>\n"},{"title":"Git教程","abbrlink":41310,"date":"2016-11-04T06:03:40.000Z","_content":"\n# 安装Git\n## Debian/Ubuntu\n`apt-get install git`\n## Centos/RedHat\n`yum install git`\n## Windows\n安装包下载：https://git-for-windows.github.io/\n## Mac\n安装包下载：https://sourceforge.net/projects/git-osx-installer/\n\n`git --version`  　查看版本\n\n---\n\n# Git配置\n`ls -a`\t或 `ls -ah`\t方便查看隐藏文件\n执行`git config`命令就是调用此文件\n`/etc/gitconfig `       全部用户生效 \\--system调用的文件\n`～/.gitcinfig   `      当前用户有效 \\--global调用的文件\n`.git/config  `         当前项目的配置文件\n**.git/config**的配置会覆盖**/etc/gitconfig** 中的同名变量。\nwin中配置文件一般在主目录下的对应用户文件夹里**C:\\Documents and Settings\\$USER**\nwin中**/etc/gitconfig**是在安装目录中。\n\n## 用户信息配置\n```\ngit config --global user.name \"leolan\"  #leolan为用户名\ngit config --global user.email 842632422@qq.com   #邮箱\n(用了global选项后当前用户的所有项目默认使用此用户信息，某一项目若使用其它的用户信息。把--global去掉重新配置，会在该项目.git/config中重新生成配置就行了。)\n以下可选：\ngit config --global color.ui true    #让Git显示颜色，会让命令输出看起来更醒目\ngit config --global core.editor emace   #指定emace为默认编辑器，不指定默认为vim\ngit config --global merge.tool vimdiff  #差异化分析工具（冲突合并），git可以理解kdiff3 ,tkdiff,meld,xxdiff,emerge,vimdiff,gvimdiff,ecmerge,opendiff等工具的输出信息。\n\ngit config user.name   #查看配置的用户名，改为user.email则为邮箱。\ngit config --list      #查看已配置的用户信息```\n\n---\n\n# 基本使用方法\n**一般进入某项目的目录后再执行以下命令。**\n```\ngit init\t        #设置当前目录为Git仓库\ngit init 目录名 \t        #指定目录为Git仓库\n\ngit clone ［源］\t\t#从源拷贝项目到本地的当前目录\ngit clone ［源］［目录］\t#指定源下载到某个目录\n例：git clone git://github.com/schacon/grit.git mygrit\n\ngit status\t\t#查看当前目录文件的状态，加 -s 显示简短信息。\"A\"是已添加到缓存、\"M\"为文件有改动、\"空格\"为未缓存的文件，组合显示如：\"AM\"代表已缓存的文件有改动，\"空格M\"代表未缓存的文件有改动。\ngit add 文件名   #添加文件到项目缓存中，没有添加的文件不属于项目文件，也不会痛不到服务器。\ngit add .  \t\t#添加当前目录到项目缓存中，如果添加多个文件，此命令更方便。\ngit commit -m \"项目的版本或简短说明\"\t#可以指定版本号及简单说明改动了哪些内容，同时会把所有改动同步到服务器上。\ngit commit -am \"项目的版本或简短说明\"\t#改动了多个文件又不想一个个添加，此命令自动添加所有改动的文件并同步到服务器。```\n\nGit的所有工作都是现在本地缓存的，只有执行**git commit -m \"简短说明\"** 后才会向服务器提交。\n```\ngit diff\t        #未缓存的改动\ngit diff --cached\t#已缓存的改动\ngit diff HEAD\t\t#已缓存和未缓存的所有改动\ngit diff --stat\t\t#显示摘要而非整个diff\ngit reset -- HEAD 文件\t#取消文件已缓存的内容，--很重要，没有加--表示切换到另一个分支。\ngit rm 文件\t\t#从项目中及本地删除文件,可不用执行。\ngit mv 文件\t\t#从项目中及本地重命名文件,可不用执行。```\n\n---\n# 创建远程仓库\n在继续阅读后续内容前，请自行注册GitHub账号。由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：\n\n* **第1步**：创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：`ssh-keygen -t rsa -C \"842632422@qq.com\"`你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。\n\n如果一切顺利的话，可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，**id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥**，可以放心地告诉任何人。\n\n* **第2步**：登陆GitHub，打开“Account settings”，“SSH Keys”页面：\n然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub（公钥）文件的内容：\n\n点“Add Key”，你就应该看到已经添加的Key：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B001.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B002.png)\n\n为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。\n当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。\n最后友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。\n`ssh -T git@github.com\n提示：Hi MyLeoLan! You've successfully authenticated, but GitHub does not provide shell access.　　则成功添加sshkey\n\n在右上角找到“Create a new repo”按钮，创建一个新的仓库：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B003.png)\n目前，在GitHub上的这个仓库还是空的，会提示你创建README.md文件。\n\n可以从这个仓库克隆出新的仓库（克隆到本地），也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库（本地的项目或下载了别人的项目想要推送到自己的仓库，和**fork**的方式不同，这种方式要删除隐藏的**.git文件夹**因为**.git文件夹**包含了别人的库信息，你是推送不到自己的库上去的，删掉之后添加的才是自己的信息）。\n\n---\n# 从远程库克隆仓库\n远程库已经准备好了，下一步是用命令git clone克隆一个本地库：\n`git clone git@github.com:MyLeoLan/testgit.git`\n实际上，Git支持多种协议，默认的git://使用ssh，但也可以使用https等其他协议。\n使用https除了速度慢以外，还有个最大的麻烦是**每次推送都必须输入口令**，但是在某些只开放http端口的公司内部就无法使用ssh协议而只能用https。\n\n# 本地仓库推送到远程仓库\n把本地仓库的内容推送到远程（GitHub）仓库。在本地的XXX仓库下运行命令：\n\n`git remote add origin git@github.com:myleolan/learngit.git`\n表示把本地的XXX仓库与远程learngit.git库绑定**(添加远程库)**，以后推送都推送到这个库中。地址换成自己的库地址。你的SSH Key公钥不在我的账户列表中是推不上去的。\n\n关联后，使用命令`git push -u origin master`完成第一次推送master分支的所有内容（一般远程的master分支会自动命名为origin用于区分，而本地的master还是master分支，**-u**会关联分支，下次推送默认推送到此分支。）\n\n推送时**git push origin XXXX** （xxxx可以指定本地某分支推送到远程的origin分支）此后，每次本地提交后，只要有必要，就可以使用命令`git push origin master`推送最新修改；简化命令为：`git pull`(从远程仓库提取数据并尝试合并到当前分支)和`git push`\n\n从远程库下载分支和数据的更新到当前项目（不会合并，pull等同于fetch+merge）：`git fetch origin`\n\n查看当前项目的远程库：\n```\ngit remote 或 git remote -v\n\norigin  git@github.com:myleolan/learngit.git (fetch)\norigin  git@github.com:myleolan/learngit.git (push)```\n上面显示了可以抓取和推送的origin的地址。如果没有推送权限，就看不到push的地址。\n\n删除远程仓库：`git remote rm ［别名或仓库名］`\n\n* pull：本地 <\\-- 远程   (如果你本地落后远程，必然要pull)\n* push：本地 \\--> 远程  (如果你本地超前远程，必然要push)\n\n本质上都是同步commit\n\n分布式版本系统的最大好处之一是在本地工作完全不需要考虑远程库的存在，也就是有没有联网都可以正常工作，而SVN在没有联网的时候是拒绝干活的！当有网络的时候，再把本地提交推送一下就完成了同步！\n\n---\n# 管理修改\n第一次修改 -> **git add**（放入暂存区）-> 第二次修改 ->**git commit**（提交暂存区，准备推送到远程）\n\nGit管理的是修改，当你用git add命令后，在工作区的第一次修改被放入暂存区，准备提交，但是，在**工作区的第二次修改并没有放入暂存区**，所以，git commit**只负责把暂存区的修改提交了**，也就是第一次的修改被提交了，第二次的修改不会被提交。\n\n提交后，用`git diff HEAD`命令可以查看工作区和版本库里面最新版本的区别。\n\n怎么提交第二次修改呢？你可以继续git add再git commit，也可以别着急提交第一次修改，先git add第二次修改，再git commit，就相当于把两次修改合并后一块提交了：\n\n**第一次修改 -> git add -> 第二次修改 -> git add -> git commit**\n好啦，把第二次修改提交了。\n\n---\n# 删除文件\n一般情况下，你通常直接在文件管理器中把没用的文件删了，或者用**rm**命令删了,此时文件删除了但版本库里还有记录，文件可能恢复不了。这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了，`git status`命令会提示你哪些文件被删除了。\n\n要从版本库中删除该文件，那就用命令`git rm`删掉，并且`git commit` （git rm会同时删除版本库及文件）\n\n另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：`git checkout -- filename`\n\ngit checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。\n\n**提交代码分两步**:\n\n* 1.从工作目录，提交到stage。\n\n从工作目录提交到stage，需要用add或者rm命令，只提交到stage，而没有提交到master，是不会自动同步到master的。\n\n* 2.从stage提交到master。\n\n从stage提交到master用commit命令。\n\n**工作区**\\-->\\--*add,rm*\\-->\\--**stage**\\-->\\--*commit*\\-->\\--**master**\n\n**退回也是要分两步**:\n\n* 1.从master退回到stage\n对于还没有提交到stage的，可以从stage用checkout命令退回，这一步会取stage中的文件状态，覆盖掉工作目录中文件的状态，跟master完全没关系。\n\n* 2.从stage退回到工作目录\n\n对于已经到达stage的，想把state中的文件状态用master中的覆盖掉，就用reset命令，这样就把stage中修改用master的状态覆盖掉了，完全跟工作目录没关系\n\n**工作区**\\--<\\--*checkout*\\--<\\--**stage**\\--<\\--*reset*\\--<\\--**master**\n\n要删除某些文件，不能简单用rm删除，远程仓库依然会保留文件（因为它不知道你什么时候就进行版本回退了，需要用到那些文件），要彻底删除，本地`git rm filename`命令删除文件再**git push**上去，或者进入github管理界面手动一个一个删除文件。\n\n---\n# 版本回退\n```\ngit status \t   #查看当前状态\ngit diff      \t   #查看做了哪些修改\ngit add file  \t   #添加到缓存\ngit commit -m \"xxx\"#提交到本地版本库\ngit log\t\t   #可查看所有的历史版本，信息太多加--pretty=oneline参数简化```\n\n首先，Git必须知道当前版本是哪个版本，在Git中，用**HEAD表示当前版本**，也就是最新的提交过commit的这个版本，**HEAD^**是上一个版本，上上一个版本就是**HEAD^^**，当然往上100个版本写100个**^**比较容易数不过来，所以写成**HEAD~100**。\n\n此节实验当我没有保存下来，所以引用廖雪峰老师的数据，实验是通过修改readme.txt文件进行的，假设我们要把当前版本“append GPL”回退到上一个版本“add distributed”，就可以使用git reset命令：`git reset --hard HEAD^ ` (退回上一个版本)\n\n`cat readme.txt`看看readme.txt的内容是不是版本add distributed：\n\nGit is a distributed version control system.\nGit is free software.\n\n果然,还可以继续回退到上一个版本wrote a readme file，不过且慢，我们用`git log`再看看现在版本库的状态：\n```\ncommit ea34578d5496d7dd233c827ed32a8cd576c5ee85\nAuthor: Michael Liao <askxuefeng@gmail.com>\nDate:   Tue Aug 20 14:53:12 2013 +0800\n\n    add distributed\n\ncommit cb926e7ea50ad11b8f9e909c05226233bf755030\nAuthor: Michael Liao <askxuefeng@gmail.com>\nDate:   Mon Aug 19 17:51:55 2013 +0800\n\n    wrote a readme file```\n\n最新的那个版本append GPL已经看不到了！好比你从21世纪坐时光穿梭机来到了19世纪，想再回去已经回不去了，肿么办？只要上面的命令行窗口还没有被关掉，你就可以顺着往上找啊找啊，找到那个append GPL的**commit id**是3628164...，于是就可以指定回到未来的某个版本：\n`git reset --hard 3628164`     (退回指定版本）。\n\n如果已经关掉了命令行，找不到新版本的commit id怎么办？Git提供了一个命令`git reflog`用来**记录你的每一次命令(历史命令，类似日志)**，其中就包含了commit id：\n```\ngit reflog      查询历史版本号\nea34578 HEAD@{0}: reset: moving to HEAD^\n3628164 HEAD@{1}: commit: append GPL\nea34578 HEAD@{2}: commit: add distributed\ncb926e7 HEAD@{3}: commit (initial): wrote a readme file```\n第二行显示append GPL的commit id是3628164，现在，你又可以乘坐时光机回到未来了。\n\n版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位,一般7-8位就行了，因为Git可能会找到多个版本号，就无法确定是哪一个了。\nGit的版本回退速度非常快，因为Git在内部有个指向当前版本的HEAD指针，当你回退版本的时候，Git仅仅是把HEAD从指向append GPL：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B004.png)\n\n改为指向add distributed：\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B005.png)\n\n然后顺便把工作区的文件更新了。所以你让**HEAD**指向哪个版本号，你就把当前版本定位在哪。\n\n---\n# 撤销修改\n当发现某部分代码需要撤销时`git checkout -- filename`可以丢弃工作区的修改：**git checkout \\-- readme.txt**（把readme.txt文件在工作区的修改全部撤销）\n\n这里有两种情况：\n\n* 1.**readme.txt自修改后还没有被放到暂存区**，现在，撤销修改就回到和版本库一模一样的状态；\n\n命令中的**\\--**很重要，没有**\\--**，就变成了“**切换到另一个分支**”的命令，我们在后面的分支管理中会再次遇到git checkout命令。\n\n* 2.**readme.txt已经添加到暂存区后，又作了修改**，现在，撤销修改就回到添加到暂存区后的状态。\n总之，就是让这个文件回到最近一次**git commit**或**git add**时的状态。\n\n现在假定是凌晨3点，你不但写了一些胡话，还**git add到暂存区**了,庆幸的是，在**commit**之前，你发现了这个问题。用`git status`查看一下，修改只是添加到了暂存区，还没有提交。用命令`git reset HEAD file`(可以把暂存区的修改撤销掉（unstage），不带file则撤销所有文件的更改，重新放回工作区，此时就相当于**没有git add**的状态，但文件是改动过的）\n\n`git reset`命令**既可以回退版本，也可以把暂存区的修改回退到工作区。**当我们用HEAD时，表示最新的版本。再用`git status`查看一下，现在暂存区是干净的，工作区有修改。\n丢弃工作区的修改：`git checkout -- readme.txt` 可直接恢复文件并恢复版本库的内容（丢弃所有未git add的内容，回到最近一个最新版本）\n注意：要完全撤回修改的代码，要`git reset HEAD file `后执行`git checkout -- file `才会完全包括工作区的内容也删除。\n\n\n现在，假设你不但改错了东西，还把暂存区提交到了版本库（执行了git commit），怎么办呢？还可以版本回退到上一个版本。如果**还没有把自己的本地版本库推送到远程**，可以用：`git reset --hard HEAD` 恢复到当前版本（改动了但没有commit的那个版本，如果进行了commit，此次commit就是一个新版本，只能通过`git reset --hard HEAD^`回到上一个commit）。如果**已经提交到了远程**，只能通过`git reset --hard HEAD^`版本回退了。\n\n---\n# 标签管理\n发布一个版本时，我们通常先在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。\nGit的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。\n\n**Git有commit，为什么还要引入tag？**\n\n“请把上周一的那个版本打包发布，commit号是6a5819e...” ;“一串乱七八糟的数字不好找！”\n\n如果换一个办法：\n\n“请把上周一的那个版本打包发布，版本号是v1.2”  ;“按照tag v1.2查找commit就行！”\ntag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。\n\n## 创建标签\n在Git中打标签非常简单，首先，切换到需要打标签的分支上：\n```\ngit branch    #查看有哪些分支\ngit checkout master  #切换到要打标签的分支上\n```\n然后，敲命令`git tag <name>`就可以在**当前分支的最新已提交的状态**(HEAD)打一个新标签：**git tag v1.0**\n\n默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？\n\n方法是找到历史提交的**commit id**，然后打上就可以了：\n```\ngit log --pretty=oneline --abbrev-commit\n\n6a5819e merged bug fix 101\ncc17032 fix bug 101\n7825a50 merge with no-ff\n6224937 add merge\n59bc1cb conflict fixed\n400b400 & simple\n75a857c AND simple\nfec145a branch test\nd17efd8 remove test.txt\n...```\n\n比方说要对**add merge**这次提交打标签，它对应的**commit id**是6224937，敲入命令：\n`git tag v0.9 6224937`\n\n还可以创建带有说明的标签，用**-a**指定标签名，**-m**指定说明文字：\n`git tag -a v0.1 -m \"version 0.1 released\" 3628164`\n\n查看所有标签：`git tag`\n\n注意，标签不是按时间顺序列出，而是按字母排序的。可以用`git show <tagname>`查看标签详细信息。\n\n还可以通过**-s**用私钥签名一个标签：\n`git tag -s v0.2 -m \"signed version 0.2 released\" fec145a`(原来的-a换为-s)\n\n签名采用PGP签名，因此，必须首先安装gpg（**GnuPG**），如果没有找到gpg，或者没有gpg密钥对，就会报错：\n```\ngpg: signing failed: secret key not available\nerror: gpg failed to sign the data\nerror: unable to sign the tag```\n\n如果报错，请参考**GnuPG**帮助文档配置Key。如果签名不成功可以加**-u** 参数，详见：http://airk000.github.io/git/2013/09/30/git-tag-with-gpg-key\n\n`git show <tagname>`也可以看到PGP的签名信息：\n```\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.12 (Darwin)\n\niQEcBAABAgAGBQJSGpMhAAoJEPUxHyDAhBpT4QQIAKeHfR3bo...\n-----END PGP SIGNATURE-----```\n\n用PGP签名的标签是不可伪造的，因为可以验证PGP签名。验证签名的方法比较复杂，这里就不介绍了。\n\n## 操作标签\n`git tag -d <tagname>`可以删除一个本地标签。\n`git push origin <tagname>`可以推送一个本地标签到远程库。\n`git push origin --tags`可以推送全部未推送过的本地标签到远程库。\n\n删除时先删除本地对应的标签，再运行命令`git push origin :refs/tags/<tagname>`删除一个远程标签。\n  \n---\n# 分支\n\n\n创建分支可以在分支上工作而不影响master分支，当分支工作完成时再合并到master分支上。\n\n一般流程：\n\n* 1.先查看分支：`git branch`\n* 2.创建+切换分支：`git checkout -b <分支name>`等价于：`创建分支：git branch <分支name>`+`切换分支：git checkout <分支name>`\n* 3.查看当前分支：`git branch`\n* 4.在**新建分支上进行工作**，工作完成时。切换回主分支：`git checkout master`\n* 5.合并某分支到当前分支（当前已切换回master分支了）：`git merge <分支name>`\n* 6.删除无用分支：`git branch -d <分支name>`\n* 7.查看当前分支：`git branch`\n \n只剩master分支啦。\n\n想要深入了解，参考：\n\n[猴子Git](http://backlogtool.com/git-guide/cn/reference/branch.html#sec2)　　[Pro Git](http://iissnan.com/progit/html/zh/ch3_2.html)　　[廖雪峰Git](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000)\n\n## 分支策略\n在实际开发中，我们应该按照几个基本原则进行分支管理：\n\n　　首先，**master**分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；平时干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；你和你的小伙伴们每个人都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。\n所以，团队合作的分支看起来就像这样：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B006.png)\nGit分支十分强大，在团队开发中应该充分应用。合并分支时，加上**\\--no-ff**参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而**fast forward**合并就看不出来曾经做过合并。\n\n## 分支管理策略\n合并分支时，如果可能，Git会用**Fast forward**模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用**Fast forward**模式(加参数\\--no-ff)，Git就会在**merge**时生成一个新的commit，这样，从分支历史上就可以看出分支信息。\n\n下面来测试一下**\\--no-ff**方式的**git merge**：\n\n创建分支、修改文件，提交缓存，切换回master分支，准备合并dev分支，因为本次合并要创建一个新的commit，所以加上**-m**参数，把commit描述写进去。\n`git merge --no-ff -m \"merge with no-ff\" dev`\n\n用**git log**看看分支历史：\n```\ngit log --graph --pretty=oneline --abbrev-commit\n\n*   7825a50 merge with no-ff\n|\\\n| * 6224937 add merge\n|/\n*   59bc1cb conflict fixed\n...```\n\n## 冲突解决\n当合并出现冲突时，一般要手动解决。\n直接查看master分支的readme.txt（冲突文件）的内容并修改：\n```\nGit is a distributed version control system.\nGit is free software distributed under the GPL.\nGit has a mutable index called stage.\nGit tracks changes of files.\n<<<<<<< HEAD\nCreating a new branch is quick & simple.\n=======\nCreating a new branch is quick AND simple.\n>>>>>>> feature1```\n修改完毕，再次提交即可。\n\n**Git用<<<<<<<，=======，>>>>>>>标记出不同分支的内容。**\n\n用带参数的git log也可以看到分支的合并情况：`git log --graph --pretty=oneline --abbrev-commit`\n用git log \\--graph命令可以看到分支合并图。\n\n详见：[廖雪峰Git解决冲突](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000)\n\n## 错误解决\n*  1.error: src refspec master does not match any.\n答：目录中没有文件，空目录是不能提交上去的 执行:`git commit -m “xxx”`\n\n*  2.error: insufficient permission for adding an object to repository database ./objects   \n答：服务端没有可写目录的权限［可能不是你的库，或sshkey不对］\n\n*  3.error：fatal: remote origin already exists.\n答：`git remote rm origin`\n\n*  4.error: failed to push som refs to ........\n解决办法：`git pull origin master`  \n答：先pull 下来 再push上去。\n\n*  5.error: failed to push some refs to 'git@github.com:myleolan/learnpython.git'\nTo prevent you from losing history, non-fast-forward updates were rejected\nMerge the remote changes before pushing again.  See the 'Note about\nfast-forwards' section of 'git push \\--help' for details.\n答：是因为远程用web创建的的库和本地不一样。`git pull origin master` (先pull 下来 再push 上去)\n\n*  6.git push时报错：The requested URL returned error: 403 Forbidden while accessing\n答：`vim /.git/config`\n把[remote \"origin\"]项中https://github.com 改为https://myleolan@github.com\n就是加上**用户名@**之后再次执行git push 输入密码即可，一般用git协议不会报此错误，地址改为git@github.com:myleolan/XXXX.git\n\n\n---\n# Bug分支\n\n当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交；并不是你不想提交，而是工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？\n\nGit还提供了一个**stash**功能，可以把当前工作现场“**储藏**”起来，等以后恢复现场后继续工作：`git stash`现在，用**git status**查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地创建分支来修复bug。\n\n## 修复Bug一般流程\n首先确定要在哪个分支上修复bug，假定需要在master分支上修复，就从master创建临时分支并切换分支：\n```\ngit checkout master\ngit checkout -b issue-101   #创建并切换分支```\n\n现在修复bug，需要把“Git is free software ...”改为“Git is a free software ...”，然后提交：\n```\ngit add readme.txt \ngit commit -m \"fix bug 101\"```\n\n修复完成后，**切换到master分支，并完成分支合并**，最后**删除issue-101分支**：\n ```\n git checkout master\n git merge --no-ff -m \"merged bug fix 101\" issue-101  #合并分支\n git branch -d issue-101  #删除分支```\nbug修复了，现在，可以接着回到dev分支干活了！\n```\ngit checkout dev\ngit status   #此时可以看到工作区是干净的\ngit stash list  #查看已储藏的工作现场\n\nstash@{0}: WIP on dev: 6224937 add merge```\n\n工作现场还在，Git把**stash**内容存在某个地方了，需要恢复，有两个办法：\n\n* 1.用`git stash apply`恢复，但是恢复后，**stash**内容并不删除，你需要用`git stash drop`来删除(stash只是临时封存区，建议删除)。\n* 2.用`git stash pop`恢复的同时把**stash**内容也删了。\n \n 执行`git stash pop`恢复，再用`git stash list`查看，就看不到任何stash内容了\n**可以多次stash**，恢复的时候，先用`git stash list`查看，然后**恢复指定的stash**，用命令：`git stash apply stash@{0}`  (**stash@{0}**是封存的标识)\n\n---\n\n# Feature分支\n软件开发中，总有无穷无尽的新的功能要不断添加进来。添加一个新功能时，不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个**feature**分支，在上面**开发，完成后，合并，最后，删除该feature分支**。\n```\n#当前在工作分支dev上。\ngit checkout -b feature-vulcan(name)  #创建并切换到该分支\n#修改代码完成之后\ngit add vulcan.py\ngit status\ngit commit -m \"add feature vulcan\"\ngit checkout dev   #切回dev，准备合并\n#一切顺利的话，feature分支和bug分支是类似的，合并，然后删除。\n执行以下两句就可以完成任务了：\ngit merge --no-ff -m \"merged feature-vulcan\" feature-vulcan #合并分支\ngit branch -d feature-vulcan   #删除分支```\n\n但是，就在此时，接到上级命令，因经费不足，新功能**必须取消**！虽然白干了，但是这个分支还是必须**就地销毁**：\n```\ngit branch -d feature-vulcan\n\nerror: The branch 'feature-vulcan' is not fully merged.\nIf you are sure you want to delete it, run 'git branch -D feature-vulcan'.```\nGit提示销毁失败：feature-vulcan分支还没有被合并，如果删除，将丢失掉修改，如果要强行删除，需要使用命令`git branch -D feature-vulcan`\n\n现在我们强行删除：`git branch -D feature-vulcan`　OK，现在我们切换回dev分支继续工作。\n\n---\n\n# 自定义Git配置(高级)\n我们已经配置了**user.name**和**user.email**，实际上，Git还有很多可配置项。\n\n## 忽略特殊文件\n有些时候，你必须把某些文件放到Git工作目录中，但又不能提交它们，比如保存了**数据库密码的配置文件**啦，等等，每次**git status**都会显示**Untracked files ...**，有强迫症的童鞋心里肯定不爽。好在Git考虑到了大家的感受，这个问题解决起来也很简单，在Git工作区的根目录下创建一个特殊的**.gitignore**文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件。\n\n不需要从头写**.gitignore**文件，GitHub已经为我们准备了各种配置文件，只需要组合一下就可以使用了。所有配置文件可以直接在线浏览：**https://github.com/github/gitignore**   已经配置好了要忽略的文件，下载回来要文件名要改为**.gitignore**放在项目根目录下。\n\n**忽略文件的原则是：**\n\n  1. 忽略操作系统自动生成的文件，比如缩略图等；\n  2. 忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；\n  3. 忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。\n\n举个例子：\n\n假设你在Windows下进行Python开发，Windows会自动在有图片的目录下生成隐藏的缩略图文件，如果有自定义目录，目录下就会有Desktop.ini文件，因此你需要忽略Windows自动生成的垃圾文件；然后，继续忽略Python编译产生的.pyc、.pyo、dist等文件或目录(**忽略文件夹在文件夹名后加/**)\n\n加上你自己定义的文件，最终得到一个完整的.gitignore文件，内容如下：\n```\n# Windows:\nThumbs.db\nehthumbs.db\nDesktop.ini\n\n# Python:\n*.py[cod]\n*.so\n*.egg\n*.egg-info\ndist\nbuild\n\n# My configurations:\ndb.ini\ndeploy_key_rsa\n新建文件夹/```\n\n最后一步就是把.gitignore也提交到Git，就完成了！当然**检验.gitignore**是否生效的标准是**git status**命令是不是说working directory clean。\n\n使用Windows的童鞋注意了，如果你在资源管理器里新建一个**.gitignore**文件，它会非常弱智地提示你必须输入文件名，在第三方文本编辑器里“保存”或者“另存为”就可以把文件保存为.gitignore了。\n\n有些时候，你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：\n```\ngit add App.class\n\nThe following paths are ignored by one of your .gitignore files:\nApp.class\nUse -f if you really want to add them.```\n如果你确实想添加该文件，可以用**-f**强制添加到Git：`git add -f App.class`\n\n或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用`git check-ignore`命令检查：\n```\ngit check-ignore -v App.class\n.gitignore:3:*.class    App.class```\nGit会告诉我们，.gitignore的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。\n\n## 配置命令别名\n有没有经常敲错命令？比如git status？status这个单词真心不好记。如果敲**git st**就表示**git status**那就简单多了。\n```\ngit config --global alias.st status   #st表示status\ngit config --global alias.co checkout #co表示checkout\ngit config --global alias.ci commit   #ci表示commit\ngit config --global alias.br branch   #br表示branch```\n\n## \\--global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\n在\"**撤销修改**\"一节中，我们知道，命令`git reset HEAD file`可以把暂存区的修改撤销掉（unstage），重新放回工作区。既然是一个**unstage操作**，就可以配置一个unstage别名：\n`git config --global alias.unstage 'reset HEAD'`\n\n当你敲入命令：`git unstage test.py`实际上Git执行的是：`git reset HEAD test.py`\n\n配置一个**git last**，让其显示最后一次提交信息：`git config --global alias.last 'log -3' ` (数字代表最近的几次提交);这样，用`git last`就能显示最近3次的提交：\n\n甚至还有人丧心病狂地把lg配置成了：\n```\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\"```\n\n来看看git lg的效果：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B008.png)\n\n## 关于配置文件\n配置Git的时候，加上**\\--global**是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。\n\n* 每个仓库（每个项目）独立的Git配置文件都放在**.git/config**文件中：\n```\ncat .git/config \n[core]\n    repositoryformatversion = 0\n    filemode = true\n    bare = false\n    logallrefupdates = true\n    ignorecase = true\n    precomposeunicode = true\n[remote \"origin\"]\n    url = git@github.com:myleolan/learngit.git\n    fetch = +refs/heads/*:refs/remotes/origin/*\n[branch \"master\"]\n    remote = origin\n    merge = refs/heads/master\n[alias]     #命令别名，要删除别名，直接删掉对应的行即可。\n    last = log -1```\n\n* 当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中：\n```\ncat .gitconfig\n[alias]\n    co = checkout\n    ci = commit\n    br = branch\n    st = status\n[user]\n    name = Your Name\n    email = your@email.com```\n\n配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置(参考第2节 “Git配置”)。\n\n---\n\n# 团队协作\n## 抓取分支\n多人协作时，大家都会往master和dev分支上推送各自的修改。现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：\n`git clone git@github.com:myleolan/learngit.git`\n\n当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的**master**分支。可以用**git branch**命令看看；现在，你的小伙伴要在dev分支上开发，就必须**创建远程origin的dev分支到本地**，于是他用命令创建本地dev分支：`git checkout -b dev origin/dev`　(在origin上创建dev，-b切换到dev分支;如果本地已经有dev分支了，直接切换就好)\n\n现在，他就可以在dev上继续修改，然后，时不时地把dev分支push到远程：\n`git commit -m \"add /usr/bin/env\"`\n\n本地已经有dev分支了就不用创建了，直接执行下面的命令会自动在远程服务器新建dev分支。\n`git push origin dev`　(把本地dev推到远程origin上，会自动寻找origin的dev分支)\n\n你的小伙伴已经向**origin/dev**分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：\n```\ngit add hello.py\ngit commit -m \"add coding: utf-8\"\ngit push origin dev\n\nTo git@github.com:myleolan/learngit.git\n ! [rejected]        dev -> dev (non-fast-forward)\nerror: failed to push some refs to 'git@github.com:myleolan/learngit.git'\nhint: Updates were rejected because the tip of your current branch is behind\nhint: its remote counterpart. Merge the remote changes (e.g. 'git pull')\nhint: before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.```\n\n推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用**git pull**把最新的提交从**origin/dev**抓下来，然后，在本地合并，解决冲突，再推送：\n```\ngit pull\n\nremote: Counting objects: 5, done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 3 (delta 0), reused 3 (delta 0)\nUnpacking objects: 100% (3/3), done.\nFrom github.com:myleolan/learngit\n   fc38031..291bea8  dev        -> origin/dev\nThere is no tracking information for the current branch.\nPlease specify which branch you want to merge with.\nSee git-pull(1) for details\n    git pull <remote> <branch>\nIf you wish to set tracking information for this branch you can do so with:\n    git branch --set-upstream dev origin/<branch>```\n\ngit pull也失败了，原因是没有指定**本地dev分支**与远程**origin/dev**分支的链接，根据提示，设置dev和origin/dev的链接(绑定这两个分支)：\n```\ngit branch --set-upstream dev origin/dev \n如果git pull还是失败，说明绑定不了。\n试试官方更改的命令：git branch --set-upstream-to=origin/dev dev```\n`git pull -f origin master`　强制覆盖也行，但很危险。\n\n再次**git pull**成功，但是合并有冲突，需要手动解决，解决的方法和第12节“解决冲突”完全一样。解决后，提交，再push：\n```\ngit commit -m \"merge & fix hello.py\"\ngit push origin dev```\n\n**多人协作的工作模式通常是这样：**\n  1. 首先，可以试图用`git push origin branch-name`推送自己的修改；\n  2. 如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；\n  3. 如果合并有冲突，则解决冲突，并在本地提交；\n  4. 没有冲突或者解决掉冲突后，再用`git push origin branch-name`推送就能成功！\n如果**git pull**提示“**no tracking information**”，则说明本地分支和远程分支的链接关系没有创建，用命令:\n`git branch --set-upstream branch-name origin/branch-name`\n这就是多人协作的工作模式，一旦熟悉了，就非常简单。\n\n## F&Q\n签出远程分支，出现以下错误：\nfatal: Cannot update paths and switch to branch 'develop' at the same time.\n解决方法：\n先`git fetch`再`git checkout -b develop origin/develop`\n因为本地还没有\"develop\"分支信息，需要先fetch或者pull\n\n假设有人往服务器上推送了一个新的分支，但是我不知道分支的名称是什么，我如何能获取到服务器上的分支列表呢？\n      a. 你直接去问他\n      b. 如果用GitHub，直接去网站看\n      c. `git ls-remote --heads origin`\n\n## 推送分支\n推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：`git push origin master`\n\n如果要推送其他分支，比如dev，就改成：`git push origin dev`\n\n但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？\n  ● master分支是主分支，因此要时刻与远程同步；\n  ● dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；\n  ● bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；\n  ● feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。\n总之，就是在Git中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！\n\n---\n# 参与开源项目\n如何参与一个开源项目呢？比如人气极高的**bootstrap**项目，这是一个非常强大的CSS框架，你可以访问它的**[GitHub项目主页](https://github.com/twbs/bootstrap)**，点“**Fork**”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：`git clone git@github.com:**your_username**/bootstrap.git`\n\n一定要从自己的账号下clone仓库，这样你才能推送修改(在第4节 “创建远程仓库”中结尾就提到了另一种克隆方式)。如果从bootstrap的作者的仓库地址，采用`git clone git@github.com:twbs/bootstrap.git`的方式克隆，因为没有权限，你将不能推送修改（见第4节 “创建远程仓库”结尾处，**删除.git文件夹**的方法）。\n\n**Bootstrap**的官方仓库twbs/bootstrap、你在GitHub上克隆的仓库**your_username/bootstrap**，以及你自己克隆到本地电脑的仓库，他们的关系就像下图显示的那样：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B007.png)\n\n* 如果你想修复bootstrap的一个bug，或者新增一个功能，立刻就可以开始干活，干完后，往自己的仓库推送。\n* 如果**你希望bootstrap的官方库能接受你的修改**，你就可以在你的GitHub该项目页上发起一个**pull request**。当然，对方是否接受你的**pull request**就不一定了。\n\n---\n# 自己搭建Git服务器\nGitHub就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给GitHub交保护费，那就只能自己搭建一台Git服务器作为私有仓库使用。搭建Git服务器需要准备一台运行Linux的机器，强烈用Ubuntu、Debian或者Centos、redhat，这样，通过几条简单的apt命令就可以完成安装。\n**root登录**\n\n* 第一步，**安装git：**\n`sudo apt-get install git` 或 `yum install git`\n\n* 第二步，**创建一个git用户，用来运行git服务：**\n`sudo adduser git`\n\n\n* 第三步，**初始化Git仓库：**\n先选定一个目录作为Git仓库，假定是/data/git/learngit.git\n在/data/git/目录下输入命令：\n`sudo git init --bare learngit.git`\n\nGit就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。\n`sudo chown -R git:git learngit.git`\n\nGit服务器就已经搭得差不多了。下面我们在客户端clone一下远程仓库\n`git clone git@IP:/data/git/learngit.git`\nCloning into 'learngit'...\nThe authenticity of host '192.168.8.34 (192.168.8.34)' can't be established.\nRSA key fingerprint is 2b:55:45:e7:4c:29:cc:05:33:78:03:bd:a8:cd:08:9d.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.8.34' (RSA) to the list of known hosts.\ngit@192.168.8.34's password:\n**能连接但要密码**，接着下一步。\n\n* 第四步，**创建证书登录（Git服务器打开RSA认证）**：然后就可以去Git服务器上添加你的公钥用来验证你的信息了。`vim /etc/ssh/sshd_config`中将RSA认证打开，即：\n```\nRSAAuthentication yes     \nPubkeyAuthentication yes     \nAuthorizedKeysFile  .ssh/authorized_keys```\n\n这里我们可以看到**公钥存放在.ssh/authorized_keys**文件中。所以我们在**/home/git下创建.ssh目录，然后创建authorized_keys文件**，收集所有需要登录的用户的公钥，就是他们自己的id_rsa.pub文件，把所有公钥导入到**/home/git/.ssh/authorized_keys文件里，一行一个。**\n此时再次连接已经可以免密钥登录啦。\n\n* 第五步，**禁用shell登录：**\n出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过\n编辑/etc/passwd文件完成。找到类似下面的一行：\n`git:x:1001:1001:,,,:/home/git:/bin/bash`\n改为：\n`git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell`\n\n这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。\n\n* 第六步，**克隆远程仓库：**\n现在，可以通过git clone命令克隆远程仓库了，在各自的电脑上运行：\n`git clone git@IP:/data/git/learngit.git`\nCloning into 'sample'...\nwarning: You appear to have cloned an empty repository.\n剩下的推送就简单了。\n\n**管理公钥**\n\n如果团队很小，把每个人的公钥收集起来放到服务器的/home/git/.ssh/authorized_keys文件里就是可行的。如果团队有几百号人，就没法这么玩了，这时，可以用**Gitosis**来管理公钥。\n这里我们不介绍怎么玩Gitosis了，几百号人的团队基本都在500强了，相信找个高水平的Linux管理员问题不大。管理公钥也可用**Gitolite**\n**管理权限**\n有很多不但视源代码如生命，而且视员工为窃贼的公司，会在版本控制系统里设置一套完善的权限控制，每个人是否有读写权限会精确到每个分支甚至每个目录下。因为Git是为Linux源代码托管而开发的，所以Git也继承了开源社区的精神，不支持权限控制。不过，因为**Git支持钩子（hook）**，所以，可以在服务器端编写一系列脚本来控制提交等操作，达到权限控制的目的。**Gitolite**就是这个工具。\n这里我们也不介绍Gitolite了，不要把有限的生命浪费到权限斗争中。\n\n搭建服务器的同时采用Gitolite来管理权限，参考：\nhttps://my.oschina.net/u/2351685/blog/509322\n\nGitolite的使用，参考：http://www.uml.org.cn/pzgl/201404092.asp\n\n---\n# 参考资料：\n连猴子都会的git：\nhttp://backlogtool.com/git-guide/cn/\n\nPro Git：http://iissnan.com/progit/\n廖雪峰git：\n\nhttp://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000\n\n外国友人git手册:\nhttps://pan.baidu.com/s/1kU5OCOB#path=%252Fpub%252Fgit\n10个迅速提升你 Git 水平的提示:\nhttp://www.oschina.net/translate/10-tips-git-next-level\n\n\n---\n\n\n","source":"_posts/Dev/2016-11-04-Git教程.md","raw":"---\ntitle: Git教程\ncategories:\n  - Dev\ntags:\n  - Git教程\nabbrlink: 41310\ndate: 2016-11-04 14:03:40\n---\n\n# 安装Git\n## Debian/Ubuntu\n`apt-get install git`\n## Centos/RedHat\n`yum install git`\n## Windows\n安装包下载：https://git-for-windows.github.io/\n## Mac\n安装包下载：https://sourceforge.net/projects/git-osx-installer/\n\n`git --version`  　查看版本\n\n---\n\n# Git配置\n`ls -a`\t或 `ls -ah`\t方便查看隐藏文件\n执行`git config`命令就是调用此文件\n`/etc/gitconfig `       全部用户生效 \\--system调用的文件\n`～/.gitcinfig   `      当前用户有效 \\--global调用的文件\n`.git/config  `         当前项目的配置文件\n**.git/config**的配置会覆盖**/etc/gitconfig** 中的同名变量。\nwin中配置文件一般在主目录下的对应用户文件夹里**C:\\Documents and Settings\\$USER**\nwin中**/etc/gitconfig**是在安装目录中。\n\n## 用户信息配置\n```\ngit config --global user.name \"leolan\"  #leolan为用户名\ngit config --global user.email 842632422@qq.com   #邮箱\n(用了global选项后当前用户的所有项目默认使用此用户信息，某一项目若使用其它的用户信息。把--global去掉重新配置，会在该项目.git/config中重新生成配置就行了。)\n以下可选：\ngit config --global color.ui true    #让Git显示颜色，会让命令输出看起来更醒目\ngit config --global core.editor emace   #指定emace为默认编辑器，不指定默认为vim\ngit config --global merge.tool vimdiff  #差异化分析工具（冲突合并），git可以理解kdiff3 ,tkdiff,meld,xxdiff,emerge,vimdiff,gvimdiff,ecmerge,opendiff等工具的输出信息。\n\ngit config user.name   #查看配置的用户名，改为user.email则为邮箱。\ngit config --list      #查看已配置的用户信息```\n\n---\n\n# 基本使用方法\n**一般进入某项目的目录后再执行以下命令。**\n```\ngit init\t        #设置当前目录为Git仓库\ngit init 目录名 \t        #指定目录为Git仓库\n\ngit clone ［源］\t\t#从源拷贝项目到本地的当前目录\ngit clone ［源］［目录］\t#指定源下载到某个目录\n例：git clone git://github.com/schacon/grit.git mygrit\n\ngit status\t\t#查看当前目录文件的状态，加 -s 显示简短信息。\"A\"是已添加到缓存、\"M\"为文件有改动、\"空格\"为未缓存的文件，组合显示如：\"AM\"代表已缓存的文件有改动，\"空格M\"代表未缓存的文件有改动。\ngit add 文件名   #添加文件到项目缓存中，没有添加的文件不属于项目文件，也不会痛不到服务器。\ngit add .  \t\t#添加当前目录到项目缓存中，如果添加多个文件，此命令更方便。\ngit commit -m \"项目的版本或简短说明\"\t#可以指定版本号及简单说明改动了哪些内容，同时会把所有改动同步到服务器上。\ngit commit -am \"项目的版本或简短说明\"\t#改动了多个文件又不想一个个添加，此命令自动添加所有改动的文件并同步到服务器。```\n\nGit的所有工作都是现在本地缓存的，只有执行**git commit -m \"简短说明\"** 后才会向服务器提交。\n```\ngit diff\t        #未缓存的改动\ngit diff --cached\t#已缓存的改动\ngit diff HEAD\t\t#已缓存和未缓存的所有改动\ngit diff --stat\t\t#显示摘要而非整个diff\ngit reset -- HEAD 文件\t#取消文件已缓存的内容，--很重要，没有加--表示切换到另一个分支。\ngit rm 文件\t\t#从项目中及本地删除文件,可不用执行。\ngit mv 文件\t\t#从项目中及本地重命名文件,可不用执行。```\n\n---\n# 创建远程仓库\n在继续阅读后续内容前，请自行注册GitHub账号。由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：\n\n* **第1步**：创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：`ssh-keygen -t rsa -C \"842632422@qq.com\"`你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。\n\n如果一切顺利的话，可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，**id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥**，可以放心地告诉任何人。\n\n* **第2步**：登陆GitHub，打开“Account settings”，“SSH Keys”页面：\n然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub（公钥）文件的内容：\n\n点“Add Key”，你就应该看到已经添加的Key：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B001.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B002.png)\n\n为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。\n当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。\n最后友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。\n`ssh -T git@github.com\n提示：Hi MyLeoLan! You've successfully authenticated, but GitHub does not provide shell access.　　则成功添加sshkey\n\n在右上角找到“Create a new repo”按钮，创建一个新的仓库：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B003.png)\n目前，在GitHub上的这个仓库还是空的，会提示你创建README.md文件。\n\n可以从这个仓库克隆出新的仓库（克隆到本地），也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库（本地的项目或下载了别人的项目想要推送到自己的仓库，和**fork**的方式不同，这种方式要删除隐藏的**.git文件夹**因为**.git文件夹**包含了别人的库信息，你是推送不到自己的库上去的，删掉之后添加的才是自己的信息）。\n\n---\n# 从远程库克隆仓库\n远程库已经准备好了，下一步是用命令git clone克隆一个本地库：\n`git clone git@github.com:MyLeoLan/testgit.git`\n实际上，Git支持多种协议，默认的git://使用ssh，但也可以使用https等其他协议。\n使用https除了速度慢以外，还有个最大的麻烦是**每次推送都必须输入口令**，但是在某些只开放http端口的公司内部就无法使用ssh协议而只能用https。\n\n# 本地仓库推送到远程仓库\n把本地仓库的内容推送到远程（GitHub）仓库。在本地的XXX仓库下运行命令：\n\n`git remote add origin git@github.com:myleolan/learngit.git`\n表示把本地的XXX仓库与远程learngit.git库绑定**(添加远程库)**，以后推送都推送到这个库中。地址换成自己的库地址。你的SSH Key公钥不在我的账户列表中是推不上去的。\n\n关联后，使用命令`git push -u origin master`完成第一次推送master分支的所有内容（一般远程的master分支会自动命名为origin用于区分，而本地的master还是master分支，**-u**会关联分支，下次推送默认推送到此分支。）\n\n推送时**git push origin XXXX** （xxxx可以指定本地某分支推送到远程的origin分支）此后，每次本地提交后，只要有必要，就可以使用命令`git push origin master`推送最新修改；简化命令为：`git pull`(从远程仓库提取数据并尝试合并到当前分支)和`git push`\n\n从远程库下载分支和数据的更新到当前项目（不会合并，pull等同于fetch+merge）：`git fetch origin`\n\n查看当前项目的远程库：\n```\ngit remote 或 git remote -v\n\norigin  git@github.com:myleolan/learngit.git (fetch)\norigin  git@github.com:myleolan/learngit.git (push)```\n上面显示了可以抓取和推送的origin的地址。如果没有推送权限，就看不到push的地址。\n\n删除远程仓库：`git remote rm ［别名或仓库名］`\n\n* pull：本地 <\\-- 远程   (如果你本地落后远程，必然要pull)\n* push：本地 \\--> 远程  (如果你本地超前远程，必然要push)\n\n本质上都是同步commit\n\n分布式版本系统的最大好处之一是在本地工作完全不需要考虑远程库的存在，也就是有没有联网都可以正常工作，而SVN在没有联网的时候是拒绝干活的！当有网络的时候，再把本地提交推送一下就完成了同步！\n\n---\n# 管理修改\n第一次修改 -> **git add**（放入暂存区）-> 第二次修改 ->**git commit**（提交暂存区，准备推送到远程）\n\nGit管理的是修改，当你用git add命令后，在工作区的第一次修改被放入暂存区，准备提交，但是，在**工作区的第二次修改并没有放入暂存区**，所以，git commit**只负责把暂存区的修改提交了**，也就是第一次的修改被提交了，第二次的修改不会被提交。\n\n提交后，用`git diff HEAD`命令可以查看工作区和版本库里面最新版本的区别。\n\n怎么提交第二次修改呢？你可以继续git add再git commit，也可以别着急提交第一次修改，先git add第二次修改，再git commit，就相当于把两次修改合并后一块提交了：\n\n**第一次修改 -> git add -> 第二次修改 -> git add -> git commit**\n好啦，把第二次修改提交了。\n\n---\n# 删除文件\n一般情况下，你通常直接在文件管理器中把没用的文件删了，或者用**rm**命令删了,此时文件删除了但版本库里还有记录，文件可能恢复不了。这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了，`git status`命令会提示你哪些文件被删除了。\n\n要从版本库中删除该文件，那就用命令`git rm`删掉，并且`git commit` （git rm会同时删除版本库及文件）\n\n另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：`git checkout -- filename`\n\ngit checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。\n\n**提交代码分两步**:\n\n* 1.从工作目录，提交到stage。\n\n从工作目录提交到stage，需要用add或者rm命令，只提交到stage，而没有提交到master，是不会自动同步到master的。\n\n* 2.从stage提交到master。\n\n从stage提交到master用commit命令。\n\n**工作区**\\-->\\--*add,rm*\\-->\\--**stage**\\-->\\--*commit*\\-->\\--**master**\n\n**退回也是要分两步**:\n\n* 1.从master退回到stage\n对于还没有提交到stage的，可以从stage用checkout命令退回，这一步会取stage中的文件状态，覆盖掉工作目录中文件的状态，跟master完全没关系。\n\n* 2.从stage退回到工作目录\n\n对于已经到达stage的，想把state中的文件状态用master中的覆盖掉，就用reset命令，这样就把stage中修改用master的状态覆盖掉了，完全跟工作目录没关系\n\n**工作区**\\--<\\--*checkout*\\--<\\--**stage**\\--<\\--*reset*\\--<\\--**master**\n\n要删除某些文件，不能简单用rm删除，远程仓库依然会保留文件（因为它不知道你什么时候就进行版本回退了，需要用到那些文件），要彻底删除，本地`git rm filename`命令删除文件再**git push**上去，或者进入github管理界面手动一个一个删除文件。\n\n---\n# 版本回退\n```\ngit status \t   #查看当前状态\ngit diff      \t   #查看做了哪些修改\ngit add file  \t   #添加到缓存\ngit commit -m \"xxx\"#提交到本地版本库\ngit log\t\t   #可查看所有的历史版本，信息太多加--pretty=oneline参数简化```\n\n首先，Git必须知道当前版本是哪个版本，在Git中，用**HEAD表示当前版本**，也就是最新的提交过commit的这个版本，**HEAD^**是上一个版本，上上一个版本就是**HEAD^^**，当然往上100个版本写100个**^**比较容易数不过来，所以写成**HEAD~100**。\n\n此节实验当我没有保存下来，所以引用廖雪峰老师的数据，实验是通过修改readme.txt文件进行的，假设我们要把当前版本“append GPL”回退到上一个版本“add distributed”，就可以使用git reset命令：`git reset --hard HEAD^ ` (退回上一个版本)\n\n`cat readme.txt`看看readme.txt的内容是不是版本add distributed：\n\nGit is a distributed version control system.\nGit is free software.\n\n果然,还可以继续回退到上一个版本wrote a readme file，不过且慢，我们用`git log`再看看现在版本库的状态：\n```\ncommit ea34578d5496d7dd233c827ed32a8cd576c5ee85\nAuthor: Michael Liao <askxuefeng@gmail.com>\nDate:   Tue Aug 20 14:53:12 2013 +0800\n\n    add distributed\n\ncommit cb926e7ea50ad11b8f9e909c05226233bf755030\nAuthor: Michael Liao <askxuefeng@gmail.com>\nDate:   Mon Aug 19 17:51:55 2013 +0800\n\n    wrote a readme file```\n\n最新的那个版本append GPL已经看不到了！好比你从21世纪坐时光穿梭机来到了19世纪，想再回去已经回不去了，肿么办？只要上面的命令行窗口还没有被关掉，你就可以顺着往上找啊找啊，找到那个append GPL的**commit id**是3628164...，于是就可以指定回到未来的某个版本：\n`git reset --hard 3628164`     (退回指定版本）。\n\n如果已经关掉了命令行，找不到新版本的commit id怎么办？Git提供了一个命令`git reflog`用来**记录你的每一次命令(历史命令，类似日志)**，其中就包含了commit id：\n```\ngit reflog      查询历史版本号\nea34578 HEAD@{0}: reset: moving to HEAD^\n3628164 HEAD@{1}: commit: append GPL\nea34578 HEAD@{2}: commit: add distributed\ncb926e7 HEAD@{3}: commit (initial): wrote a readme file```\n第二行显示append GPL的commit id是3628164，现在，你又可以乘坐时光机回到未来了。\n\n版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位,一般7-8位就行了，因为Git可能会找到多个版本号，就无法确定是哪一个了。\nGit的版本回退速度非常快，因为Git在内部有个指向当前版本的HEAD指针，当你回退版本的时候，Git仅仅是把HEAD从指向append GPL：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B004.png)\n\n改为指向add distributed：\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B005.png)\n\n然后顺便把工作区的文件更新了。所以你让**HEAD**指向哪个版本号，你就把当前版本定位在哪。\n\n---\n# 撤销修改\n当发现某部分代码需要撤销时`git checkout -- filename`可以丢弃工作区的修改：**git checkout \\-- readme.txt**（把readme.txt文件在工作区的修改全部撤销）\n\n这里有两种情况：\n\n* 1.**readme.txt自修改后还没有被放到暂存区**，现在，撤销修改就回到和版本库一模一样的状态；\n\n命令中的**\\--**很重要，没有**\\--**，就变成了“**切换到另一个分支**”的命令，我们在后面的分支管理中会再次遇到git checkout命令。\n\n* 2.**readme.txt已经添加到暂存区后，又作了修改**，现在，撤销修改就回到添加到暂存区后的状态。\n总之，就是让这个文件回到最近一次**git commit**或**git add**时的状态。\n\n现在假定是凌晨3点，你不但写了一些胡话，还**git add到暂存区**了,庆幸的是，在**commit**之前，你发现了这个问题。用`git status`查看一下，修改只是添加到了暂存区，还没有提交。用命令`git reset HEAD file`(可以把暂存区的修改撤销掉（unstage），不带file则撤销所有文件的更改，重新放回工作区，此时就相当于**没有git add**的状态，但文件是改动过的）\n\n`git reset`命令**既可以回退版本，也可以把暂存区的修改回退到工作区。**当我们用HEAD时，表示最新的版本。再用`git status`查看一下，现在暂存区是干净的，工作区有修改。\n丢弃工作区的修改：`git checkout -- readme.txt` 可直接恢复文件并恢复版本库的内容（丢弃所有未git add的内容，回到最近一个最新版本）\n注意：要完全撤回修改的代码，要`git reset HEAD file `后执行`git checkout -- file `才会完全包括工作区的内容也删除。\n\n\n现在，假设你不但改错了东西，还把暂存区提交到了版本库（执行了git commit），怎么办呢？还可以版本回退到上一个版本。如果**还没有把自己的本地版本库推送到远程**，可以用：`git reset --hard HEAD` 恢复到当前版本（改动了但没有commit的那个版本，如果进行了commit，此次commit就是一个新版本，只能通过`git reset --hard HEAD^`回到上一个commit）。如果**已经提交到了远程**，只能通过`git reset --hard HEAD^`版本回退了。\n\n---\n# 标签管理\n发布一个版本时，我们通常先在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。\nGit的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。\n\n**Git有commit，为什么还要引入tag？**\n\n“请把上周一的那个版本打包发布，commit号是6a5819e...” ;“一串乱七八糟的数字不好找！”\n\n如果换一个办法：\n\n“请把上周一的那个版本打包发布，版本号是v1.2”  ;“按照tag v1.2查找commit就行！”\ntag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。\n\n## 创建标签\n在Git中打标签非常简单，首先，切换到需要打标签的分支上：\n```\ngit branch    #查看有哪些分支\ngit checkout master  #切换到要打标签的分支上\n```\n然后，敲命令`git tag <name>`就可以在**当前分支的最新已提交的状态**(HEAD)打一个新标签：**git tag v1.0**\n\n默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？\n\n方法是找到历史提交的**commit id**，然后打上就可以了：\n```\ngit log --pretty=oneline --abbrev-commit\n\n6a5819e merged bug fix 101\ncc17032 fix bug 101\n7825a50 merge with no-ff\n6224937 add merge\n59bc1cb conflict fixed\n400b400 & simple\n75a857c AND simple\nfec145a branch test\nd17efd8 remove test.txt\n...```\n\n比方说要对**add merge**这次提交打标签，它对应的**commit id**是6224937，敲入命令：\n`git tag v0.9 6224937`\n\n还可以创建带有说明的标签，用**-a**指定标签名，**-m**指定说明文字：\n`git tag -a v0.1 -m \"version 0.1 released\" 3628164`\n\n查看所有标签：`git tag`\n\n注意，标签不是按时间顺序列出，而是按字母排序的。可以用`git show <tagname>`查看标签详细信息。\n\n还可以通过**-s**用私钥签名一个标签：\n`git tag -s v0.2 -m \"signed version 0.2 released\" fec145a`(原来的-a换为-s)\n\n签名采用PGP签名，因此，必须首先安装gpg（**GnuPG**），如果没有找到gpg，或者没有gpg密钥对，就会报错：\n```\ngpg: signing failed: secret key not available\nerror: gpg failed to sign the data\nerror: unable to sign the tag```\n\n如果报错，请参考**GnuPG**帮助文档配置Key。如果签名不成功可以加**-u** 参数，详见：http://airk000.github.io/git/2013/09/30/git-tag-with-gpg-key\n\n`git show <tagname>`也可以看到PGP的签名信息：\n```\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.4.12 (Darwin)\n\niQEcBAABAgAGBQJSGpMhAAoJEPUxHyDAhBpT4QQIAKeHfR3bo...\n-----END PGP SIGNATURE-----```\n\n用PGP签名的标签是不可伪造的，因为可以验证PGP签名。验证签名的方法比较复杂，这里就不介绍了。\n\n## 操作标签\n`git tag -d <tagname>`可以删除一个本地标签。\n`git push origin <tagname>`可以推送一个本地标签到远程库。\n`git push origin --tags`可以推送全部未推送过的本地标签到远程库。\n\n删除时先删除本地对应的标签，再运行命令`git push origin :refs/tags/<tagname>`删除一个远程标签。\n  \n---\n# 分支\n\n\n创建分支可以在分支上工作而不影响master分支，当分支工作完成时再合并到master分支上。\n\n一般流程：\n\n* 1.先查看分支：`git branch`\n* 2.创建+切换分支：`git checkout -b <分支name>`等价于：`创建分支：git branch <分支name>`+`切换分支：git checkout <分支name>`\n* 3.查看当前分支：`git branch`\n* 4.在**新建分支上进行工作**，工作完成时。切换回主分支：`git checkout master`\n* 5.合并某分支到当前分支（当前已切换回master分支了）：`git merge <分支name>`\n* 6.删除无用分支：`git branch -d <分支name>`\n* 7.查看当前分支：`git branch`\n \n只剩master分支啦。\n\n想要深入了解，参考：\n\n[猴子Git](http://backlogtool.com/git-guide/cn/reference/branch.html#sec2)　　[Pro Git](http://iissnan.com/progit/html/zh/ch3_2.html)　　[廖雪峰Git](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000)\n\n## 分支策略\n在实际开发中，我们应该按照几个基本原则进行分支管理：\n\n　　首先，**master**分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；平时干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；你和你的小伙伴们每个人都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。\n所以，团队合作的分支看起来就像这样：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B006.png)\nGit分支十分强大，在团队开发中应该充分应用。合并分支时，加上**\\--no-ff**参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而**fast forward**合并就看不出来曾经做过合并。\n\n## 分支管理策略\n合并分支时，如果可能，Git会用**Fast forward**模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用**Fast forward**模式(加参数\\--no-ff)，Git就会在**merge**时生成一个新的commit，这样，从分支历史上就可以看出分支信息。\n\n下面来测试一下**\\--no-ff**方式的**git merge**：\n\n创建分支、修改文件，提交缓存，切换回master分支，准备合并dev分支，因为本次合并要创建一个新的commit，所以加上**-m**参数，把commit描述写进去。\n`git merge --no-ff -m \"merge with no-ff\" dev`\n\n用**git log**看看分支历史：\n```\ngit log --graph --pretty=oneline --abbrev-commit\n\n*   7825a50 merge with no-ff\n|\\\n| * 6224937 add merge\n|/\n*   59bc1cb conflict fixed\n...```\n\n## 冲突解决\n当合并出现冲突时，一般要手动解决。\n直接查看master分支的readme.txt（冲突文件）的内容并修改：\n```\nGit is a distributed version control system.\nGit is free software distributed under the GPL.\nGit has a mutable index called stage.\nGit tracks changes of files.\n<<<<<<< HEAD\nCreating a new branch is quick & simple.\n=======\nCreating a new branch is quick AND simple.\n>>>>>>> feature1```\n修改完毕，再次提交即可。\n\n**Git用<<<<<<<，=======，>>>>>>>标记出不同分支的内容。**\n\n用带参数的git log也可以看到分支的合并情况：`git log --graph --pretty=oneline --abbrev-commit`\n用git log \\--graph命令可以看到分支合并图。\n\n详见：[廖雪峰Git解决冲突](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000)\n\n## 错误解决\n*  1.error: src refspec master does not match any.\n答：目录中没有文件，空目录是不能提交上去的 执行:`git commit -m “xxx”`\n\n*  2.error: insufficient permission for adding an object to repository database ./objects   \n答：服务端没有可写目录的权限［可能不是你的库，或sshkey不对］\n\n*  3.error：fatal: remote origin already exists.\n答：`git remote rm origin`\n\n*  4.error: failed to push som refs to ........\n解决办法：`git pull origin master`  \n答：先pull 下来 再push上去。\n\n*  5.error: failed to push some refs to 'git@github.com:myleolan/learnpython.git'\nTo prevent you from losing history, non-fast-forward updates were rejected\nMerge the remote changes before pushing again.  See the 'Note about\nfast-forwards' section of 'git push \\--help' for details.\n答：是因为远程用web创建的的库和本地不一样。`git pull origin master` (先pull 下来 再push 上去)\n\n*  6.git push时报错：The requested URL returned error: 403 Forbidden while accessing\n答：`vim /.git/config`\n把[remote \"origin\"]项中https://github.com 改为https://myleolan@github.com\n就是加上**用户名@**之后再次执行git push 输入密码即可，一般用git协议不会报此错误，地址改为git@github.com:myleolan/XXXX.git\n\n\n---\n# Bug分支\n\n当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交；并不是你不想提交，而是工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？\n\nGit还提供了一个**stash**功能，可以把当前工作现场“**储藏**”起来，等以后恢复现场后继续工作：`git stash`现在，用**git status**查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地创建分支来修复bug。\n\n## 修复Bug一般流程\n首先确定要在哪个分支上修复bug，假定需要在master分支上修复，就从master创建临时分支并切换分支：\n```\ngit checkout master\ngit checkout -b issue-101   #创建并切换分支```\n\n现在修复bug，需要把“Git is free software ...”改为“Git is a free software ...”，然后提交：\n```\ngit add readme.txt \ngit commit -m \"fix bug 101\"```\n\n修复完成后，**切换到master分支，并完成分支合并**，最后**删除issue-101分支**：\n ```\n git checkout master\n git merge --no-ff -m \"merged bug fix 101\" issue-101  #合并分支\n git branch -d issue-101  #删除分支```\nbug修复了，现在，可以接着回到dev分支干活了！\n```\ngit checkout dev\ngit status   #此时可以看到工作区是干净的\ngit stash list  #查看已储藏的工作现场\n\nstash@{0}: WIP on dev: 6224937 add merge```\n\n工作现场还在，Git把**stash**内容存在某个地方了，需要恢复，有两个办法：\n\n* 1.用`git stash apply`恢复，但是恢复后，**stash**内容并不删除，你需要用`git stash drop`来删除(stash只是临时封存区，建议删除)。\n* 2.用`git stash pop`恢复的同时把**stash**内容也删了。\n \n 执行`git stash pop`恢复，再用`git stash list`查看，就看不到任何stash内容了\n**可以多次stash**，恢复的时候，先用`git stash list`查看，然后**恢复指定的stash**，用命令：`git stash apply stash@{0}`  (**stash@{0}**是封存的标识)\n\n---\n\n# Feature分支\n软件开发中，总有无穷无尽的新的功能要不断添加进来。添加一个新功能时，不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个**feature**分支，在上面**开发，完成后，合并，最后，删除该feature分支**。\n```\n#当前在工作分支dev上。\ngit checkout -b feature-vulcan(name)  #创建并切换到该分支\n#修改代码完成之后\ngit add vulcan.py\ngit status\ngit commit -m \"add feature vulcan\"\ngit checkout dev   #切回dev，准备合并\n#一切顺利的话，feature分支和bug分支是类似的，合并，然后删除。\n执行以下两句就可以完成任务了：\ngit merge --no-ff -m \"merged feature-vulcan\" feature-vulcan #合并分支\ngit branch -d feature-vulcan   #删除分支```\n\n但是，就在此时，接到上级命令，因经费不足，新功能**必须取消**！虽然白干了，但是这个分支还是必须**就地销毁**：\n```\ngit branch -d feature-vulcan\n\nerror: The branch 'feature-vulcan' is not fully merged.\nIf you are sure you want to delete it, run 'git branch -D feature-vulcan'.```\nGit提示销毁失败：feature-vulcan分支还没有被合并，如果删除，将丢失掉修改，如果要强行删除，需要使用命令`git branch -D feature-vulcan`\n\n现在我们强行删除：`git branch -D feature-vulcan`　OK，现在我们切换回dev分支继续工作。\n\n---\n\n# 自定义Git配置(高级)\n我们已经配置了**user.name**和**user.email**，实际上，Git还有很多可配置项。\n\n## 忽略特殊文件\n有些时候，你必须把某些文件放到Git工作目录中，但又不能提交它们，比如保存了**数据库密码的配置文件**啦，等等，每次**git status**都会显示**Untracked files ...**，有强迫症的童鞋心里肯定不爽。好在Git考虑到了大家的感受，这个问题解决起来也很简单，在Git工作区的根目录下创建一个特殊的**.gitignore**文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件。\n\n不需要从头写**.gitignore**文件，GitHub已经为我们准备了各种配置文件，只需要组合一下就可以使用了。所有配置文件可以直接在线浏览：**https://github.com/github/gitignore**   已经配置好了要忽略的文件，下载回来要文件名要改为**.gitignore**放在项目根目录下。\n\n**忽略文件的原则是：**\n\n  1. 忽略操作系统自动生成的文件，比如缩略图等；\n  2. 忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；\n  3. 忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。\n\n举个例子：\n\n假设你在Windows下进行Python开发，Windows会自动在有图片的目录下生成隐藏的缩略图文件，如果有自定义目录，目录下就会有Desktop.ini文件，因此你需要忽略Windows自动生成的垃圾文件；然后，继续忽略Python编译产生的.pyc、.pyo、dist等文件或目录(**忽略文件夹在文件夹名后加/**)\n\n加上你自己定义的文件，最终得到一个完整的.gitignore文件，内容如下：\n```\n# Windows:\nThumbs.db\nehthumbs.db\nDesktop.ini\n\n# Python:\n*.py[cod]\n*.so\n*.egg\n*.egg-info\ndist\nbuild\n\n# My configurations:\ndb.ini\ndeploy_key_rsa\n新建文件夹/```\n\n最后一步就是把.gitignore也提交到Git，就完成了！当然**检验.gitignore**是否生效的标准是**git status**命令是不是说working directory clean。\n\n使用Windows的童鞋注意了，如果你在资源管理器里新建一个**.gitignore**文件，它会非常弱智地提示你必须输入文件名，在第三方文本编辑器里“保存”或者“另存为”就可以把文件保存为.gitignore了。\n\n有些时候，你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：\n```\ngit add App.class\n\nThe following paths are ignored by one of your .gitignore files:\nApp.class\nUse -f if you really want to add them.```\n如果你确实想添加该文件，可以用**-f**强制添加到Git：`git add -f App.class`\n\n或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用`git check-ignore`命令检查：\n```\ngit check-ignore -v App.class\n.gitignore:3:*.class    App.class```\nGit会告诉我们，.gitignore的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。\n\n## 配置命令别名\n有没有经常敲错命令？比如git status？status这个单词真心不好记。如果敲**git st**就表示**git status**那就简单多了。\n```\ngit config --global alias.st status   #st表示status\ngit config --global alias.co checkout #co表示checkout\ngit config --global alias.ci commit   #ci表示commit\ngit config --global alias.br branch   #br表示branch```\n\n## \\--global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\n在\"**撤销修改**\"一节中，我们知道，命令`git reset HEAD file`可以把暂存区的修改撤销掉（unstage），重新放回工作区。既然是一个**unstage操作**，就可以配置一个unstage别名：\n`git config --global alias.unstage 'reset HEAD'`\n\n当你敲入命令：`git unstage test.py`实际上Git执行的是：`git reset HEAD test.py`\n\n配置一个**git last**，让其显示最后一次提交信息：`git config --global alias.last 'log -3' ` (数字代表最近的几次提交);这样，用`git last`就能显示最近3次的提交：\n\n甚至还有人丧心病狂地把lg配置成了：\n```\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\"```\n\n来看看git lg的效果：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B008.png)\n\n## 关于配置文件\n配置Git的时候，加上**\\--global**是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。\n\n* 每个仓库（每个项目）独立的Git配置文件都放在**.git/config**文件中：\n```\ncat .git/config \n[core]\n    repositoryformatversion = 0\n    filemode = true\n    bare = false\n    logallrefupdates = true\n    ignorecase = true\n    precomposeunicode = true\n[remote \"origin\"]\n    url = git@github.com:myleolan/learngit.git\n    fetch = +refs/heads/*:refs/remotes/origin/*\n[branch \"master\"]\n    remote = origin\n    merge = refs/heads/master\n[alias]     #命令别名，要删除别名，直接删掉对应的行即可。\n    last = log -1```\n\n* 当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中：\n```\ncat .gitconfig\n[alias]\n    co = checkout\n    ci = commit\n    br = branch\n    st = status\n[user]\n    name = Your Name\n    email = your@email.com```\n\n配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置(参考第2节 “Git配置”)。\n\n---\n\n# 团队协作\n## 抓取分支\n多人协作时，大家都会往master和dev分支上推送各自的修改。现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：\n`git clone git@github.com:myleolan/learngit.git`\n\n当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的**master**分支。可以用**git branch**命令看看；现在，你的小伙伴要在dev分支上开发，就必须**创建远程origin的dev分支到本地**，于是他用命令创建本地dev分支：`git checkout -b dev origin/dev`　(在origin上创建dev，-b切换到dev分支;如果本地已经有dev分支了，直接切换就好)\n\n现在，他就可以在dev上继续修改，然后，时不时地把dev分支push到远程：\n`git commit -m \"add /usr/bin/env\"`\n\n本地已经有dev分支了就不用创建了，直接执行下面的命令会自动在远程服务器新建dev分支。\n`git push origin dev`　(把本地dev推到远程origin上，会自动寻找origin的dev分支)\n\n你的小伙伴已经向**origin/dev**分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：\n```\ngit add hello.py\ngit commit -m \"add coding: utf-8\"\ngit push origin dev\n\nTo git@github.com:myleolan/learngit.git\n ! [rejected]        dev -> dev (non-fast-forward)\nerror: failed to push some refs to 'git@github.com:myleolan/learngit.git'\nhint: Updates were rejected because the tip of your current branch is behind\nhint: its remote counterpart. Merge the remote changes (e.g. 'git pull')\nhint: before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.```\n\n推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用**git pull**把最新的提交从**origin/dev**抓下来，然后，在本地合并，解决冲突，再推送：\n```\ngit pull\n\nremote: Counting objects: 5, done.\nremote: Compressing objects: 100% (2/2), done.\nremote: Total 3 (delta 0), reused 3 (delta 0)\nUnpacking objects: 100% (3/3), done.\nFrom github.com:myleolan/learngit\n   fc38031..291bea8  dev        -> origin/dev\nThere is no tracking information for the current branch.\nPlease specify which branch you want to merge with.\nSee git-pull(1) for details\n    git pull <remote> <branch>\nIf you wish to set tracking information for this branch you can do so with:\n    git branch --set-upstream dev origin/<branch>```\n\ngit pull也失败了，原因是没有指定**本地dev分支**与远程**origin/dev**分支的链接，根据提示，设置dev和origin/dev的链接(绑定这两个分支)：\n```\ngit branch --set-upstream dev origin/dev \n如果git pull还是失败，说明绑定不了。\n试试官方更改的命令：git branch --set-upstream-to=origin/dev dev```\n`git pull -f origin master`　强制覆盖也行，但很危险。\n\n再次**git pull**成功，但是合并有冲突，需要手动解决，解决的方法和第12节“解决冲突”完全一样。解决后，提交，再push：\n```\ngit commit -m \"merge & fix hello.py\"\ngit push origin dev```\n\n**多人协作的工作模式通常是这样：**\n  1. 首先，可以试图用`git push origin branch-name`推送自己的修改；\n  2. 如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；\n  3. 如果合并有冲突，则解决冲突，并在本地提交；\n  4. 没有冲突或者解决掉冲突后，再用`git push origin branch-name`推送就能成功！\n如果**git pull**提示“**no tracking information**”，则说明本地分支和远程分支的链接关系没有创建，用命令:\n`git branch --set-upstream branch-name origin/branch-name`\n这就是多人协作的工作模式，一旦熟悉了，就非常简单。\n\n## F&Q\n签出远程分支，出现以下错误：\nfatal: Cannot update paths and switch to branch 'develop' at the same time.\n解决方法：\n先`git fetch`再`git checkout -b develop origin/develop`\n因为本地还没有\"develop\"分支信息，需要先fetch或者pull\n\n假设有人往服务器上推送了一个新的分支，但是我不知道分支的名称是什么，我如何能获取到服务器上的分支列表呢？\n      a. 你直接去问他\n      b. 如果用GitHub，直接去网站看\n      c. `git ls-remote --heads origin`\n\n## 推送分支\n推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：`git push origin master`\n\n如果要推送其他分支，比如dev，就改成：`git push origin dev`\n\n但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？\n  ● master分支是主分支，因此要时刻与远程同步；\n  ● dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；\n  ● bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；\n  ● feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。\n总之，就是在Git中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！\n\n---\n# 参与开源项目\n如何参与一个开源项目呢？比如人气极高的**bootstrap**项目，这是一个非常强大的CSS框架，你可以访问它的**[GitHub项目主页](https://github.com/twbs/bootstrap)**，点“**Fork**”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：`git clone git@github.com:**your_username**/bootstrap.git`\n\n一定要从自己的账号下clone仓库，这样你才能推送修改(在第4节 “创建远程仓库”中结尾就提到了另一种克隆方式)。如果从bootstrap的作者的仓库地址，采用`git clone git@github.com:twbs/bootstrap.git`的方式克隆，因为没有权限，你将不能推送修改（见第4节 “创建远程仓库”结尾处，**删除.git文件夹**的方法）。\n\n**Bootstrap**的官方仓库twbs/bootstrap、你在GitHub上克隆的仓库**your_username/bootstrap**，以及你自己克隆到本地电脑的仓库，他们的关系就像下图显示的那样：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B007.png)\n\n* 如果你想修复bootstrap的一个bug，或者新增一个功能，立刻就可以开始干活，干完后，往自己的仓库推送。\n* 如果**你希望bootstrap的官方库能接受你的修改**，你就可以在你的GitHub该项目页上发起一个**pull request**。当然，对方是否接受你的**pull request**就不一定了。\n\n---\n# 自己搭建Git服务器\nGitHub就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给GitHub交保护费，那就只能自己搭建一台Git服务器作为私有仓库使用。搭建Git服务器需要准备一台运行Linux的机器，强烈用Ubuntu、Debian或者Centos、redhat，这样，通过几条简单的apt命令就可以完成安装。\n**root登录**\n\n* 第一步，**安装git：**\n`sudo apt-get install git` 或 `yum install git`\n\n* 第二步，**创建一个git用户，用来运行git服务：**\n`sudo adduser git`\n\n\n* 第三步，**初始化Git仓库：**\n先选定一个目录作为Git仓库，假定是/data/git/learngit.git\n在/data/git/目录下输入命令：\n`sudo git init --bare learngit.git`\n\nGit就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。\n`sudo chown -R git:git learngit.git`\n\nGit服务器就已经搭得差不多了。下面我们在客户端clone一下远程仓库\n`git clone git@IP:/data/git/learngit.git`\nCloning into 'learngit'...\nThe authenticity of host '192.168.8.34 (192.168.8.34)' can't be established.\nRSA key fingerprint is 2b:55:45:e7:4c:29:cc:05:33:78:03:bd:a8:cd:08:9d.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.8.34' (RSA) to the list of known hosts.\ngit@192.168.8.34's password:\n**能连接但要密码**，接着下一步。\n\n* 第四步，**创建证书登录（Git服务器打开RSA认证）**：然后就可以去Git服务器上添加你的公钥用来验证你的信息了。`vim /etc/ssh/sshd_config`中将RSA认证打开，即：\n```\nRSAAuthentication yes     \nPubkeyAuthentication yes     \nAuthorizedKeysFile  .ssh/authorized_keys```\n\n这里我们可以看到**公钥存放在.ssh/authorized_keys**文件中。所以我们在**/home/git下创建.ssh目录，然后创建authorized_keys文件**，收集所有需要登录的用户的公钥，就是他们自己的id_rsa.pub文件，把所有公钥导入到**/home/git/.ssh/authorized_keys文件里，一行一个。**\n此时再次连接已经可以免密钥登录啦。\n\n* 第五步，**禁用shell登录：**\n出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过\n编辑/etc/passwd文件完成。找到类似下面的一行：\n`git:x:1001:1001:,,,:/home/git:/bin/bash`\n改为：\n`git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell`\n\n这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。\n\n* 第六步，**克隆远程仓库：**\n现在，可以通过git clone命令克隆远程仓库了，在各自的电脑上运行：\n`git clone git@IP:/data/git/learngit.git`\nCloning into 'sample'...\nwarning: You appear to have cloned an empty repository.\n剩下的推送就简单了。\n\n**管理公钥**\n\n如果团队很小，把每个人的公钥收集起来放到服务器的/home/git/.ssh/authorized_keys文件里就是可行的。如果团队有几百号人，就没法这么玩了，这时，可以用**Gitosis**来管理公钥。\n这里我们不介绍怎么玩Gitosis了，几百号人的团队基本都在500强了，相信找个高水平的Linux管理员问题不大。管理公钥也可用**Gitolite**\n**管理权限**\n有很多不但视源代码如生命，而且视员工为窃贼的公司，会在版本控制系统里设置一套完善的权限控制，每个人是否有读写权限会精确到每个分支甚至每个目录下。因为Git是为Linux源代码托管而开发的，所以Git也继承了开源社区的精神，不支持权限控制。不过，因为**Git支持钩子（hook）**，所以，可以在服务器端编写一系列脚本来控制提交等操作，达到权限控制的目的。**Gitolite**就是这个工具。\n这里我们也不介绍Gitolite了，不要把有限的生命浪费到权限斗争中。\n\n搭建服务器的同时采用Gitolite来管理权限，参考：\nhttps://my.oschina.net/u/2351685/blog/509322\n\nGitolite的使用，参考：http://www.uml.org.cn/pzgl/201404092.asp\n\n---\n# 参考资料：\n连猴子都会的git：\nhttp://backlogtool.com/git-guide/cn/\n\nPro Git：http://iissnan.com/progit/\n廖雪峰git：\n\nhttp://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000\n\n外国友人git手册:\nhttps://pan.baidu.com/s/1kU5OCOB#path=%252Fpub%252Fgit\n10个迅速提升你 Git 水平的提示:\nhttp://www.oschina.net/translate/10-tips-git-next-level\n\n\n---\n\n\n","slug":"Dev-2016-11-04-Git教程","published":1,"updated":"2016-11-28T03:17:10.168Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjks000hd8pk4xyw6pmu","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"安装Git\"><a href=\"#安装Git\" class=\"headerlink\" title=\"安装Git\"></a>安装Git</h1><h2 id=\"Debian-Ubuntu\"><a href=\"#Debian-Ubuntu\" class=\"headerlink\" title=\"Debian/Ubuntu\"></a>Debian/Ubuntu</h2><p><code>apt-get install git</code></p>\n<h2 id=\"Centos-RedHat\"><a href=\"#Centos-RedHat\" class=\"headerlink\" title=\"Centos/RedHat\"></a>Centos/RedHat</h2><p><code>yum install git</code></p>\n<h2 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h2><p>安装包下载：<a href=\"https://git-for-windows.github.io/\" target=\"_blank\" rel=\"external\">https://git-for-windows.github.io/</a></p>\n<h2 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h2><p>安装包下载：<a href=\"https://sourceforge.net/projects/git-osx-installer/\" target=\"_blank\" rel=\"external\">https://sourceforge.net/projects/git-osx-installer/</a></p>\n<p><code>git --version</code>  　查看版本</p>\n<hr>\n<h1 id=\"Git配置\"><a href=\"#Git配置\" class=\"headerlink\" title=\"Git配置\"></a>Git配置</h1><p><code>ls -a</code>    或 <code>ls -ah</code>    方便查看隐藏文件<br>执行<code>git config</code>命令就是调用此文件<br><code>/etc/gitconfig</code>       全部用户生效 --system调用的文件<br><code>～/.gitcinfig</code>      当前用户有效 --global调用的文件<br><code>.git/config</code>         当前项目的配置文件<br><strong>.git/config</strong>的配置会覆盖<strong>/etc/gitconfig</strong> 中的同名变量。<br>win中配置文件一般在主目录下的对应用户文件夹里<strong>C:\\Documents and Settings\\$USER</strong><br>win中<strong>/etc/gitconfig</strong>是在安装目录中。</p>\n<h2 id=\"用户信息配置\"><a href=\"#用户信息配置\" class=\"headerlink\" title=\"用户信息配置\"></a>用户信息配置</h2><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> user.name <span class=\"string\">\"leolan\"</span>  <span class=\"meta\">#leolan为用户名</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> user.email <span class=\"number\">842632422</span><span class=\"symbol\">@qq</span>.com   <span class=\"meta\">#邮箱</span></div><div class=\"line\">(用了<span class=\"keyword\">global</span>选项后当前用户的所有项目默认使用此用户信息，某一项目若使用其它的用户信息。把--<span class=\"keyword\">global</span>去掉重新配置，会在该项目.git/config中重新生成配置就行了。)</div><div class=\"line\">以下可选：</div><div class=\"line\">git config --<span class=\"keyword\">global</span> color.ui <span class=\"literal\">true</span>    <span class=\"meta\">#让Git显示颜色，会让命令输出看起来更醒目</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> core.editor emace   <span class=\"meta\">#指定emace为默认编辑器，不指定默认为vim</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> merge.tool vimdiff  <span class=\"meta\">#差异化分析工具（冲突合并），git可以理解kdiff3 ,tkdiff,meld,xxdiff,emerge,vimdiff,gvimdiff,ecmerge,opendiff等工具的输出信息。</span></div><div class=\"line\"></div><div class=\"line\">git config user.name   <span class=\"meta\">#查看配置的用户名，改为user.email则为邮箱。</span></div><div class=\"line\">git config --list      <span class=\"meta\">#查看已配置的用户信息</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"基本使用方法\"><a href=\"#基本使用方法\" class=\"headerlink\" title=\"基本使用方法\"></a>基本使用方法</h1><p><strong>一般进入某项目的目录后再执行以下命令。</strong><br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">git init\t        <span class=\"comment\">#设置当前目录为Git仓库</span></div><div class=\"line\">git init 目录名 \t        <span class=\"comment\">#指定目录为Git仓库</span></div><div class=\"line\"></div><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">［源］\t\t#从源拷贝项目到本地的当前目录</span></div><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">［源］［目录］\t#指定源下载到某个目录</span></div><div class=\"line\">例：git <span class=\"keyword\">clone</span> <span class=\"title\">git</span>://github.com/schacon/grit.git mygrit</div><div class=\"line\"></div><div class=\"line\">git status\t\t<span class=\"comment\">#查看当前目录文件的状态，加 -s 显示简短信息。\"A\"是已添加到缓存、\"M\"为文件有改动、\"空格\"为未缓存的文件，组合显示如：\"AM\"代表已缓存的文件有改动，\"空格M\"代表未缓存的文件有改动。</span></div><div class=\"line\">git add 文件名   <span class=\"comment\">#添加文件到项目缓存中，没有添加的文件不属于项目文件，也不会痛不到服务器。</span></div><div class=\"line\">git add .  \t\t<span class=\"comment\">#添加当前目录到项目缓存中，如果添加多个文件，此命令更方便。</span></div><div class=\"line\">git commit -m <span class=\"string\">\"项目的版本或简短说明\"</span>\t<span class=\"comment\">#可以指定版本号及简单说明改动了哪些内容，同时会把所有改动同步到服务器上。</span></div><div class=\"line\">git commit -am <span class=\"string\">\"项目的版本或简短说明\"</span>\t<span class=\"comment\">#改动了多个文件又不想一个个添加，此命令自动添加所有改动的文件并同步到服务器。</span></div></pre></td></tr></table></figure></p>\n<p>Git的所有工作都是现在本地缓存的，只有执行<strong>git commit -m “简短说明”</strong> 后才会向服务器提交。<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">diff\t</span>        <span class=\"comment\">#未缓存的改动</span></div><div class=\"line\">git <span class=\"keyword\">diff </span>--<span class=\"keyword\">cached\t</span><span class=\"comment\">#已缓存的改动</span></div><div class=\"line\">git <span class=\"keyword\">diff </span>HEAD\t\t<span class=\"comment\">#已缓存和未缓存的所有改动</span></div><div class=\"line\">git <span class=\"keyword\">diff </span>--stat\t\t<span class=\"comment\">#显示摘要而非整个diff</span></div><div class=\"line\">git reset -- HEAD 文件\t<span class=\"comment\">#取消文件已缓存的内容，--很重要，没有加--表示切换到另一个分支。</span></div><div class=\"line\">git rm 文件\t\t<span class=\"comment\">#从项目中及本地删除文件,可不用执行。</span></div><div class=\"line\">git mv 文件\t\t<span class=\"comment\">#从项目中及本地重命名文件,可不用执行。</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"创建远程仓库\"><a href=\"#创建远程仓库\" class=\"headerlink\" title=\"创建远程仓库\"></a>创建远程仓库</h1><p>在继续阅读后续内容前，请自行注册GitHub账号。由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：</p>\n<ul>\n<li><strong>第1步</strong>：创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：<code>ssh-keygen -t rsa -C &quot;842632422@qq.com&quot;</code>你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。</li>\n</ul>\n<p>如果一切顺利的话，可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，<strong>id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥</strong>，可以放心地告诉任何人。</p>\n<ul>\n<li><strong>第2步</strong>：登陆GitHub，打开“Account settings”，“SSH Keys”页面：<br>然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub（公钥）文件的内容：</li>\n</ul>\n<p>点“Add Key”，你就应该看到已经添加的Key：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B001.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B002.png\" alt=\"\"></p>\n<p>为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。<br>当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。<br>最后友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。<br>`ssh -T git@github.com<br>提示：Hi MyLeoLan! You’ve successfully authenticated, but GitHub does not provide shell access.　　则成功添加sshkey</p>\n<p>在右上角找到“Create a new repo”按钮，创建一个新的仓库：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B003.png\" alt=\"\"><br>目前，在GitHub上的这个仓库还是空的，会提示你创建README.md文件。</p>\n<p>可以从这个仓库克隆出新的仓库（克隆到本地），也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库（本地的项目或下载了别人的项目想要推送到自己的仓库，和<strong>fork</strong>的方式不同，这种方式要删除隐藏的<strong>.git文件夹</strong>因为<strong>.git文件夹</strong>包含了别人的库信息，你是推送不到自己的库上去的，删掉之后添加的才是自己的信息）。</p>\n<hr>\n<h1 id=\"从远程库克隆仓库\"><a href=\"#从远程库克隆仓库\" class=\"headerlink\" title=\"从远程库克隆仓库\"></a>从远程库克隆仓库</h1><p>远程库已经准备好了，下一步是用命令git clone克隆一个本地库：<br><code>git clone git@github.com:MyLeoLan/testgit.git</code><br>实际上，Git支持多种协议，默认的git://使用ssh，但也可以使用https等其他协议。<br>使用https除了速度慢以外，还有个最大的麻烦是<strong>每次推送都必须输入口令</strong>，但是在某些只开放http端口的公司内部就无法使用ssh协议而只能用https。</p>\n<h1 id=\"本地仓库推送到远程仓库\"><a href=\"#本地仓库推送到远程仓库\" class=\"headerlink\" title=\"本地仓库推送到远程仓库\"></a>本地仓库推送到远程仓库</h1><p>把本地仓库的内容推送到远程（GitHub）仓库。在本地的XXX仓库下运行命令：</p>\n<p><code>git remote add origin git@github.com:myleolan/learngit.git</code><br>表示把本地的XXX仓库与远程learngit.git库绑定<strong>(添加远程库)</strong>，以后推送都推送到这个库中。地址换成自己的库地址。你的SSH Key公钥不在我的账户列表中是推不上去的。</p>\n<p>关联后，使用命令<code>git push -u origin master</code>完成第一次推送master分支的所有内容（一般远程的master分支会自动命名为origin用于区分，而本地的master还是master分支，<strong>-u</strong>会关联分支，下次推送默认推送到此分支。）</p>\n<p>推送时<strong>git push origin XXXX</strong> （xxxx可以指定本地某分支推送到远程的origin分支）此后，每次本地提交后，只要有必要，就可以使用命令<code>git push origin master</code>推送最新修改；简化命令为：<code>git pull</code>(从远程仓库提取数据并尝试合并到当前分支)和<code>git push</code></p>\n<p>从远程库下载分支和数据的更新到当前项目（不会合并，pull等同于fetch+merge）：<code>git fetch origin</code></p>\n<p>查看当前项目的远程库：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote 或 git remote -v</div><div class=\"line\"></div><div class=\"line\">origin  git@github<span class=\"selector-class\">.com</span>:myleolan/learngit<span class=\"selector-class\">.git</span> (fetch)</div><div class=\"line\">origin  git@github<span class=\"selector-class\">.com</span>:myleolan/learngit<span class=\"selector-class\">.git</span> (push)</div></pre></td></tr></table></figure></p>\n<p>上面显示了可以抓取和推送的origin的地址。如果没有推送权限，就看不到push的地址。</p>\n<p>删除远程仓库：<code>git remote rm ［别名或仓库名］</code></p>\n<ul>\n<li>pull：本地 &lt;-- 远程   (如果你本地落后远程，必然要pull)</li>\n<li>push：本地 --&gt; 远程  (如果你本地超前远程，必然要push)</li>\n</ul>\n<p>本质上都是同步commit</p>\n<p>分布式版本系统的最大好处之一是在本地工作完全不需要考虑远程库的存在，也就是有没有联网都可以正常工作，而SVN在没有联网的时候是拒绝干活的！当有网络的时候，再把本地提交推送一下就完成了同步！</p>\n<hr>\n<h1 id=\"管理修改\"><a href=\"#管理修改\" class=\"headerlink\" title=\"管理修改\"></a>管理修改</h1><p>第一次修改 -&gt; <strong>git add</strong>（放入暂存区）-&gt; 第二次修改 -&gt;<strong>git commit</strong>（提交暂存区，准备推送到远程）</p>\n<p>Git管理的是修改，当你用git add命令后，在工作区的第一次修改被放入暂存区，准备提交，但是，在<strong>工作区的第二次修改并没有放入暂存区</strong>，所以，git commit<strong>只负责把暂存区的修改提交了</strong>，也就是第一次的修改被提交了，第二次的修改不会被提交。</p>\n<p>提交后，用<code>git diff HEAD</code>命令可以查看工作区和版本库里面最新版本的区别。</p>\n<p>怎么提交第二次修改呢？你可以继续git add再git commit，也可以别着急提交第一次修改，先git add第二次修改，再git commit，就相当于把两次修改合并后一块提交了：</p>\n<p><strong>第一次修改 -&gt; git add -&gt; 第二次修改 -&gt; git add -&gt; git commit</strong><br>好啦，把第二次修改提交了。</p>\n<hr>\n<h1 id=\"删除文件\"><a href=\"#删除文件\" class=\"headerlink\" title=\"删除文件\"></a>删除文件</h1><p>一般情况下，你通常直接在文件管理器中把没用的文件删了，或者用<strong>rm</strong>命令删了,此时文件删除了但版本库里还有记录，文件可能恢复不了。这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了，<code>git status</code>命令会提示你哪些文件被删除了。</p>\n<p>要从版本库中删除该文件，那就用命令<code>git rm</code>删掉，并且<code>git commit</code> （git rm会同时删除版本库及文件）</p>\n<p>另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：<code>git checkout -- filename</code></p>\n<p>git checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</p>\n<p><strong>提交代码分两步</strong>:</p>\n<ul>\n<li>1.从工作目录，提交到stage。</li>\n</ul>\n<p>从工作目录提交到stage，需要用add或者rm命令，只提交到stage，而没有提交到master，是不会自动同步到master的。</p>\n<ul>\n<li>2.从stage提交到master。</li>\n</ul>\n<p>从stage提交到master用commit命令。</p>\n<p><strong>工作区</strong>--&gt;--<em>add,rm</em>--&gt;--<strong>stage</strong>--&gt;--<em>commit</em>--&gt;--<strong>master</strong></p>\n<p><strong>退回也是要分两步</strong>:</p>\n<ul>\n<li><p>1.从master退回到stage<br>对于还没有提交到stage的，可以从stage用checkout命令退回，这一步会取stage中的文件状态，覆盖掉工作目录中文件的状态，跟master完全没关系。</p>\n</li>\n<li><p>2.从stage退回到工作目录</p>\n</li>\n</ul>\n<p>对于已经到达stage的，想把state中的文件状态用master中的覆盖掉，就用reset命令，这样就把stage中修改用master的状态覆盖掉了，完全跟工作目录没关系</p>\n<p><strong>工作区</strong>--&lt;--<em>checkout</em>--&lt;--<strong>stage</strong>--&lt;--<em>reset</em>--&lt;--<strong>master</strong></p>\n<p>要删除某些文件，不能简单用rm删除，远程仓库依然会保留文件（因为它不知道你什么时候就进行版本回退了，需要用到那些文件），要彻底删除，本地<code>git rm filename</code>命令删除文件再<strong>git push</strong>上去，或者进入github管理界面手动一个一个删除文件。</p>\n<hr>\n<h1 id=\"版本回退\"><a href=\"#版本回退\" class=\"headerlink\" title=\"版本回退\"></a>版本回退</h1><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git status \t   <span class=\"comment\">#查看当前状态</span></div><div class=\"line\">git diff      \t   <span class=\"comment\">#查看做了哪些修改</span></div><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> file  \t   <span class=\"comment\">#添加到缓存</span></span></div><div class=\"line\">git commit -m <span class=\"string\">\"xxx\"</span><span class=\"comment\">#提交到本地版本库</span></div><div class=\"line\">git log\t\t   <span class=\"comment\">#可查看所有的历史版本，信息太多加--pretty=oneline参数简化</span></div></pre></td></tr></table></figure>\n<p>首先，Git必须知道当前版本是哪个版本，在Git中，用<strong>HEAD表示当前版本</strong>，也就是最新的提交过commit的这个版本，<strong>HEAD^</strong>是上一个版本，上上一个版本就是<strong>HEAD^^</strong>，当然往上100个版本写100个<strong>^</strong>比较容易数不过来，所以写成<strong>HEAD~100</strong>。</p>\n<p>此节实验当我没有保存下来，所以引用廖雪峰老师的数据，实验是通过修改readme.txt文件进行的，假设我们要把当前版本“append GPL”回退到上一个版本“add distributed”，就可以使用git reset命令：<code>git reset --hard HEAD^</code> (退回上一个版本)</p>\n<p><code>cat readme.txt</code>看看readme.txt的内容是不是版本add distributed：</p>\n<p>Git is a distributed version control system.<br>Git is free software.</p>\n<p>果然,还可以继续回退到上一个版本wrote a readme file，不过且慢，我们用<code>git log</code>再看看现在版本库的状态：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">commit</span> ea34578d5496d7dd233c827ed32a8cd576c5ee85</div><div class=\"line\">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</div><div class=\"line\"><span class=\"built_in\">Date</span>:   Tue Aug <span class=\"number\">20</span> <span class=\"number\">14</span>:<span class=\"number\">53</span>:<span class=\"number\">12</span> <span class=\"number\">2013</span> +<span class=\"number\">0800</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">add</span> <span class=\"keyword\">distributed</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">commit</span> cb926e7ea50ad11b8f9e909c05226233bf755030</div><div class=\"line\">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</div><div class=\"line\"><span class=\"built_in\">Date</span>:   Mon Aug <span class=\"number\">19</span> <span class=\"number\">17</span>:<span class=\"number\">51</span>:<span class=\"number\">55</span> <span class=\"number\">2013</span> +<span class=\"number\">0800</span></div><div class=\"line\"></div><div class=\"line\">    wrote a readme <span class=\"keyword\">file</span></div></pre></td></tr></table></figure></p>\n<p>最新的那个版本append GPL已经看不到了！好比你从21世纪坐时光穿梭机来到了19世纪，想再回去已经回不去了，肿么办？只要上面的命令行窗口还没有被关掉，你就可以顺着往上找啊找啊，找到那个append GPL的<strong>commit id</strong>是3628164…，于是就可以指定回到未来的某个版本：<br><code>git reset --hard 3628164</code>     (退回指定版本）。</p>\n<p>如果已经关掉了命令行，找不到新版本的commit id怎么办？Git提供了一个命令<code>git reflog</code>用来<strong>记录你的每一次命令(历史命令，类似日志)</strong>，其中就包含了commit id：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reflog      查询历史版本号</div><div class=\"line\">ea34578 HEAD@&#123;<span class=\"number\">0</span>&#125;: rese<span class=\"variable\">t:</span> moving <span class=\"keyword\">to</span> HEAD^</div><div class=\"line\"><span class=\"number\">3628164</span> HEAD@&#123;<span class=\"number\">1</span>&#125;: commi<span class=\"variable\">t:</span> <span class=\"keyword\">append</span> GPL</div><div class=\"line\">ea34578 HEAD@&#123;<span class=\"number\">2</span>&#125;: commi<span class=\"variable\">t:</span> <span class=\"built_in\">add</span> distributed</div><div class=\"line\">cb926e7 HEAD@&#123;<span class=\"number\">3</span>&#125;: commit (initial): wrote <span class=\"keyword\">a</span> readme <span class=\"keyword\">file</span></div></pre></td></tr></table></figure></p>\n<p>第二行显示append GPL的commit id是3628164，现在，你又可以乘坐时光机回到未来了。</p>\n<p>版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位,一般7-8位就行了，因为Git可能会找到多个版本号，就无法确定是哪一个了。<br>Git的版本回退速度非常快，因为Git在内部有个指向当前版本的HEAD指针，当你回退版本的时候，Git仅仅是把HEAD从指向append GPL：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B004.png\" alt=\"\"></p>\n<p>改为指向add distributed：</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B005.png\" alt=\"\"></p>\n<p>然后顺便把工作区的文件更新了。所以你让<strong>HEAD</strong>指向哪个版本号，你就把当前版本定位在哪。</p>\n<hr>\n<h1 id=\"撤销修改\"><a href=\"#撤销修改\" class=\"headerlink\" title=\"撤销修改\"></a>撤销修改</h1><p>当发现某部分代码需要撤销时<code>git checkout -- filename</code>可以丢弃工作区的修改：<strong>git checkout -- readme.txt</strong>（把readme.txt文件在工作区的修改全部撤销）</p>\n<p>这里有两种情况：</p>\n<ul>\n<li>1.<strong>readme.txt自修改后还没有被放到暂存区</strong>，现在，撤销修改就回到和版本库一模一样的状态；</li>\n</ul>\n<p>命令中的<strong>--</strong>很重要，没有<strong>--</strong>，就变成了“<strong>切换到另一个分支</strong>”的命令，我们在后面的分支管理中会再次遇到git checkout命令。</p>\n<ul>\n<li>2.<strong>readme.txt已经添加到暂存区后，又作了修改</strong>，现在，撤销修改就回到添加到暂存区后的状态。<br>总之，就是让这个文件回到最近一次<strong>git commit</strong>或<strong>git add</strong>时的状态。</li>\n</ul>\n<p>现在假定是凌晨3点，你不但写了一些胡话，还<strong>git add到暂存区</strong>了,庆幸的是，在<strong>commit</strong>之前，你发现了这个问题。用<code>git status</code>查看一下，修改只是添加到了暂存区，还没有提交。用命令<code>git reset HEAD file</code>(可以把暂存区的修改撤销掉（unstage），不带file则撤销所有文件的更改，重新放回工作区，此时就相当于<strong>没有git add</strong>的状态，但文件是改动过的）</p>\n<p><code>git reset</code>命令<strong>既可以回退版本，也可以把暂存区的修改回退到工作区。</strong>当我们用HEAD时，表示最新的版本。再用<code>git status</code>查看一下，现在暂存区是干净的，工作区有修改。<br>丢弃工作区的修改：<code>git checkout -- readme.txt</code> 可直接恢复文件并恢复版本库的内容（丢弃所有未git add的内容，回到最近一个最新版本）<br>注意：要完全撤回修改的代码，要<code>git reset HEAD file</code>后执行<code>git checkout -- file</code>才会完全包括工作区的内容也删除。</p>\n<p>现在，假设你不但改错了东西，还把暂存区提交到了版本库（执行了git commit），怎么办呢？还可以版本回退到上一个版本。如果<strong>还没有把自己的本地版本库推送到远程</strong>，可以用：<code>git reset --hard HEAD</code> 恢复到当前版本（改动了但没有commit的那个版本，如果进行了commit，此次commit就是一个新版本，只能通过<code>git reset --hard HEAD^</code>回到上一个commit）。如果<strong>已经提交到了远程</strong>，只能通过<code>git reset --hard HEAD^</code>版本回退了。</p>\n<hr>\n<h1 id=\"标签管理\"><a href=\"#标签管理\" class=\"headerlink\" title=\"标签管理\"></a>标签管理</h1><p>发布一个版本时，我们通常先在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。<br>Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。</p>\n<p><strong>Git有commit，为什么还要引入tag？</strong></p>\n<p>“请把上周一的那个版本打包发布，commit号是6a5819e…” ;“一串乱七八糟的数字不好找！”</p>\n<p>如果换一个办法：</p>\n<p>“请把上周一的那个版本打包发布，版本号是v1.2”  ;“按照tag v1.2查找commit就行！”<br>tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。</p>\n<h2 id=\"创建标签\"><a href=\"#创建标签\" class=\"headerlink\" title=\"创建标签\"></a>创建标签</h2><p>在Git中打标签非常简单，首先，切换到需要打标签的分支上：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch    <span class=\"comment\">#查看有哪些分支</span></div><div class=\"line\">git checkout <span class=\"keyword\">master</span>  <span class=\"title\">#切换到要打标签的分支上</span></div></pre></td></tr></table></figure></p>\n<p>然后，敲命令<code>git tag &lt;name&gt;</code>就可以在<strong>当前分支的最新已提交的状态</strong>(HEAD)打一个新标签：<strong>git tag v1.0</strong></p>\n<p>默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？</p>\n<p>方法是找到历史提交的<strong>commit id</strong>，然后打上就可以了：<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">log</span> --pretty=oneline --abbrev-commit</div><div class=\"line\"></div><div class=\"line\">6a5819e merged bug <span class=\"built_in\">fix</span> <span class=\"number\">101</span></div><div class=\"line\">cc17032 <span class=\"built_in\">fix</span> bug <span class=\"number\">101</span></div><div class=\"line\">7825a50 merge with no-ff</div><div class=\"line\"><span class=\"number\">6224937</span> add merge</div><div class=\"line\">59bc1cb conflict fixed</div><div class=\"line\"><span class=\"number\">400b400</span> &amp; simple</div><div class=\"line\">75a857c AND simple</div><div class=\"line\">fec145a branch test</div><div class=\"line\">d17efd8 <span class=\"built_in\">remove</span> test.txt</div><div class=\"line\">...</div></pre></td></tr></table></figure></p>\n<p>比方说要对<strong>add merge</strong>这次提交打标签，它对应的<strong>commit id</strong>是6224937，敲入命令：<br><code>git tag v0.9 6224937</code></p>\n<p>还可以创建带有说明的标签，用<strong>-a</strong>指定标签名，<strong>-m</strong>指定说明文字：<br><code>git tag -a v0.1 -m &quot;version 0.1 released&quot; 3628164</code></p>\n<p>查看所有标签：<code>git tag</code></p>\n<p>注意，标签不是按时间顺序列出，而是按字母排序的。可以用<code>git show &lt;tagname&gt;</code>查看标签详细信息。</p>\n<p>还可以通过<strong>-s</strong>用私钥签名一个标签：<br><code>git tag -s v0.2 -m &quot;signed version 0.2 released&quot; fec145a</code>(原来的-a换为-s)</p>\n<p>签名采用PGP签名，因此，必须首先安装gpg（<strong>GnuPG</strong>），如果没有找到gpg，或者没有gpg密钥对，就会报错：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">gpg: signing failed: secret key not available</div><div class=\"line\"><span class=\"keyword\">error: </span>gpg failed to sign the data</div><div class=\"line\"><span class=\"keyword\">error: </span>unable to sign the tag</div></pre></td></tr></table></figure></p>\n<p>如果报错，请参考<strong>GnuPG</strong>帮助文档配置Key。如果签名不成功可以加<strong>-u</strong> 参数，详见：<a href=\"http://airk000.github.io/git/2013/09/30/git-tag-with-gpg-key\" target=\"_blank\" rel=\"external\">http://airk000.github.io/git/2013/09/30/git-tag-with-gpg-key</a></p>\n<p><code>git show &lt;tagname&gt;</code>也可以看到PGP的签名信息：<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">-<span class=\"ruby\">----<span class=\"keyword\">BEGIN</span> PGP SIGNATURE-----</span></div><div class=\"line\">Version: GnuPG v1.4.12 (Darwin)</div><div class=\"line\"></div><div class=\"line\">iQEcBAABAgAGBQJSGpMhAAoJEPUxHyDAhBpT4QQIAKeHfR3bo...</div><div class=\"line\">-<span class=\"ruby\">----<span class=\"keyword\">END</span> PGP SIGNATURE-----</span></div></pre></td></tr></table></figure></p>\n<p>用PGP签名的标签是不可伪造的，因为可以验证PGP签名。验证签名的方法比较复杂，这里就不介绍了。</p>\n<h2 id=\"操作标签\"><a href=\"#操作标签\" class=\"headerlink\" title=\"操作标签\"></a>操作标签</h2><p><code>git tag -d &lt;tagname&gt;</code>可以删除一个本地标签。<br><code>git push origin &lt;tagname&gt;</code>可以推送一个本地标签到远程库。<br><code>git push origin --tags</code>可以推送全部未推送过的本地标签到远程库。</p>\n<p>删除时先删除本地对应的标签，再运行命令<code>git push origin :refs/tags/&lt;tagname&gt;</code>删除一个远程标签。</p>\n<hr>\n<h1 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h1><p>创建分支可以在分支上工作而不影响master分支，当分支工作完成时再合并到master分支上。</p>\n<p>一般流程：</p>\n<ul>\n<li>1.先查看分支：<code>git branch</code></li>\n<li>2.创建+切换分支：<code>git checkout -b &lt;分支name&gt;</code>等价于：<code>创建分支：git branch &lt;分支name&gt;</code>+<code>切换分支：git checkout &lt;分支name&gt;</code></li>\n<li>3.查看当前分支：<code>git branch</code></li>\n<li>4.在<strong>新建分支上进行工作</strong>，工作完成时。切换回主分支：<code>git checkout master</code></li>\n<li>5.合并某分支到当前分支（当前已切换回master分支了）：<code>git merge &lt;分支name&gt;</code></li>\n<li>6.删除无用分支：<code>git branch -d &lt;分支name&gt;</code></li>\n<li>7.查看当前分支：<code>git branch</code></li>\n</ul>\n<p>只剩master分支啦。</p>\n<p>想要深入了解，参考：</p>\n<p><a href=\"http://backlogtool.com/git-guide/cn/reference/branch.html#sec2\" target=\"_blank\" rel=\"external\">猴子Git</a>　　<a href=\"http://iissnan.com/progit/html/zh/ch3_2.html\" target=\"_blank\" rel=\"external\">Pro Git</a>　　<a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000\" target=\"_blank\" rel=\"external\">廖雪峰Git</a></p>\n<h2 id=\"分支策略\"><a href=\"#分支策略\" class=\"headerlink\" title=\"分支策略\"></a>分支策略</h2><p>在实际开发中，我们应该按照几个基本原则进行分支管理：</p>\n<p>　　首先，<strong>master</strong>分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；平时干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；你和你的小伙伴们每个人都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。<br>所以，团队合作的分支看起来就像这样：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B006.png\" alt=\"\"><br>Git分支十分强大，在团队开发中应该充分应用。合并分支时，加上<strong>--no-ff</strong>参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而<strong>fast forward</strong>合并就看不出来曾经做过合并。</p>\n<h2 id=\"分支管理策略\"><a href=\"#分支管理策略\" class=\"headerlink\" title=\"分支管理策略\"></a>分支管理策略</h2><p>合并分支时，如果可能，Git会用<strong>Fast forward</strong>模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用<strong>Fast forward</strong>模式(加参数--no-ff)，Git就会在<strong>merge</strong>时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p>\n<p>下面来测试一下<strong>--no-ff</strong>方式的<strong>git merge</strong>：</p>\n<p>创建分支、修改文件，提交缓存，切换回master分支，准备合并dev分支，因为本次合并要创建一个新的commit，所以加上<strong>-m</strong>参数，把commit描述写进去。<br><code>git merge --no-ff -m &quot;merge with no-ff&quot; dev</code></p>\n<p>用<strong>git log</strong>看看分支历史：<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">log</span> <span class=\"comment\">--graph --pretty=oneline --abbrev-commit</span></div><div class=\"line\"></div><div class=\"line\">*   <span class=\"number\">7825</span>a50 <span class=\"built_in\">merge</span> <span class=\"keyword\">with</span> no-ff</div><div class=\"line\">|\\</div><div class=\"line\">| * <span class=\"number\">6224937</span> <span class=\"built_in\">add</span> <span class=\"built_in\">merge</span></div><div class=\"line\">|/</div><div class=\"line\">*   <span class=\"number\">59</span>bc1cb conflict fixed</div><div class=\"line\">...</div></pre></td></tr></table></figure></p>\n<h2 id=\"冲突解决\"><a href=\"#冲突解决\" class=\"headerlink\" title=\"冲突解决\"></a>冲突解决</h2><p>当合并出现冲突时，一般要手动解决。<br>直接查看master分支的readme.txt（冲突文件）的内容并修改：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">Git <span class=\"keyword\">is</span> <span class=\"keyword\">a</span> distributed <span class=\"keyword\">version</span> control <span class=\"built_in\">system</span>.</div><div class=\"line\">Git <span class=\"keyword\">is</span> free software distributed under the GPL.</div><div class=\"line\">Git <span class=\"built_in\">has</span> <span class=\"keyword\">a</span> mutable <span class=\"built_in\">index</span> called stage.</div><div class=\"line\">Git tracks <span class=\"keyword\">changes</span> of <span class=\"keyword\">files</span>.</div><div class=\"line\">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</div><div class=\"line\">Creating <span class=\"keyword\">a</span> <span class=\"keyword\">new</span> branch <span class=\"keyword\">is</span> quick &amp; simple.</div><div class=\"line\">=======</div><div class=\"line\">Creating <span class=\"keyword\">a</span> <span class=\"keyword\">new</span> branch <span class=\"keyword\">is</span> quick AND simple.</div><div class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</div></pre></td></tr></table></figure></p>\n<p>修改完毕，再次提交即可。</p>\n<p><strong>Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容。</strong></p>\n<p>用带参数的git log也可以看到分支的合并情况：<code>git log --graph --pretty=oneline --abbrev-commit</code><br>用git log --graph命令可以看到分支合并图。</p>\n<p>详见：<a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000\" target=\"_blank\" rel=\"external\">廖雪峰Git解决冲突</a></p>\n<h2 id=\"错误解决\"><a href=\"#错误解决\" class=\"headerlink\" title=\"错误解决\"></a>错误解决</h2><ul>\n<li><p>1.error: src refspec master does not match any.<br>答：目录中没有文件，空目录是不能提交上去的 执行:<code>git commit -m “xxx”</code></p>\n</li>\n<li><p>2.error: insufficient permission for adding an object to repository database ./objects<br>答：服务端没有可写目录的权限［可能不是你的库，或sshkey不对］</p>\n</li>\n<li><p>3.error：fatal: remote origin already exists.<br>答：<code>git remote rm origin</code></p>\n</li>\n<li><p>4.error: failed to push som refs to ……..<br>解决办法：<code>git pull origin master</code><br>答：先pull 下来 再push上去。</p>\n</li>\n<li><p>5.error: failed to push some refs to ‘git@github.com:myleolan/learnpython.git’<br>To prevent you from losing history, non-fast-forward updates were rejected<br>Merge the remote changes before pushing again.  See the ‘Note about<br>fast-forwards’ section of ‘git push --help’ for details.<br>答：是因为远程用web创建的的库和本地不一样。<code>git pull origin master</code> (先pull 下来 再push 上去)</p>\n</li>\n<li><p>6.git push时报错：The requested URL returned error: 403 Forbidden while accessing<br>答：<code>vim /.git/config</code><br>把[remote “origin”]项中<a href=\"https://github.com\" target=\"_blank\" rel=\"external\">https://github.com</a> 改为<a href=\"https://myleolan@github.com\" target=\"_blank\" rel=\"external\">https://myleolan@github.com</a><br>就是加上<strong>用户名@</strong>之后再次执行git push 输入密码即可，一般用git协议不会报此错误，地址改为git@github.com:myleolan/XXXX.git</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"Bug分支\"><a href=\"#Bug分支\" class=\"headerlink\" title=\"Bug分支\"></a>Bug分支</h1><p>当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交；并不是你不想提交，而是工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？</p>\n<p>Git还提供了一个<strong>stash</strong>功能，可以把当前工作现场“<strong>储藏</strong>”起来，等以后恢复现场后继续工作：<code>git stash</code>现在，用<strong>git status</strong>查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地创建分支来修复bug。</p>\n<h2 id=\"修复Bug一般流程\"><a href=\"#修复Bug一般流程\" class=\"headerlink\" title=\"修复Bug一般流程\"></a>修复Bug一般流程</h2><p>首先确定要在哪个分支上修复bug，假定需要在master分支上修复，就从master创建临时分支并切换分支：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout <span class=\"keyword\">master</span></div><div class=\"line\"><span class=\"title\">git</span> checkout -b issue-<span class=\"number\">101</span>   <span class=\"comment\">#创建并切换分支</span></div></pre></td></tr></table></figure></p>\n<p>现在修复bug，需要把“Git is free software …”改为“Git is a free software …”，然后提交：<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> readme.txt </span></div><div class=\"line\">git commit -m <span class=\"string\">\"fix bug 101\"</span></div></pre></td></tr></table></figure></p>\n<p>修复完成后，<strong>切换到master分支，并完成分支合并</strong>，最后<strong>删除issue-101分支</strong>：<br> <figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout <span class=\"keyword\">master</span></div><div class=\"line\"><span class=\"title\">git</span> merge --no-ff -m <span class=\"string\">\"merged bug fix 101\"</span> issue-<span class=\"number\">101</span>  <span class=\"comment\">#合并分支</span></div><div class=\"line\">git branch -d issue-<span class=\"number\">101</span>  <span class=\"comment\">#删除分支</span></div></pre></td></tr></table></figure></p>\n<p>bug修复了，现在，可以接着回到dev分支干活了！<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout dev</div><div class=\"line\">git status   <span class=\"comment\">#此时可以看到工作区是干净的</span></div><div class=\"line\">git stash <span class=\"built_in\">list</span>  <span class=\"comment\">#查看已储藏的工作现场</span></div><div class=\"line\"></div><div class=\"line\">stash@&#123;<span class=\"number\">0</span>&#125;: WIP <span class=\"keyword\">on</span> dev: <span class=\"number\">6224937</span> add merge</div></pre></td></tr></table></figure></p>\n<p>工作现场还在，Git把<strong>stash</strong>内容存在某个地方了，需要恢复，有两个办法：</p>\n<ul>\n<li>1.用<code>git stash apply</code>恢复，但是恢复后，<strong>stash</strong>内容并不删除，你需要用<code>git stash drop</code>来删除(stash只是临时封存区，建议删除)。</li>\n<li><p>2.用<code>git stash pop</code>恢复的同时把<strong>stash</strong>内容也删了。</p>\n<p>执行<code>git stash pop</code>恢复，再用<code>git stash list</code>查看，就看不到任何stash内容了<br><strong>可以多次stash</strong>，恢复的时候，先用<code>git stash list</code>查看，然后<strong>恢复指定的stash</strong>，用命令：<code>git stash apply stash@{0}</code>  (<strong>stash@{0}</strong>是封存的标识)</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"Feature分支\"><a href=\"#Feature分支\" class=\"headerlink\" title=\"Feature分支\"></a>Feature分支</h1><p>软件开发中，总有无穷无尽的新的功能要不断添加进来。添加一个新功能时，不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个<strong>feature</strong>分支，在上面<strong>开发，完成后，合并，最后，删除该feature分支</strong>。<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#当前在工作分支dev上。</span></div><div class=\"line\">git checkout -b feature-vulcan(name)  <span class=\"comment\">#创建并切换到该分支</span></div><div class=\"line\"><span class=\"comment\">#修改代码完成之后</span></div><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> vulcan.py</span></div><div class=\"line\">git status</div><div class=\"line\">git commit -m <span class=\"string\">\"add feature vulcan\"</span></div><div class=\"line\">git checkout dev   <span class=\"comment\">#切回dev，准备合并</span></div><div class=\"line\"><span class=\"comment\">#一切顺利的话，feature分支和bug分支是类似的，合并，然后删除。</span></div><div class=\"line\">执行以下两句就可以完成任务了：</div><div class=\"line\">git merge --no-ff -m <span class=\"string\">\"merged feature-vulcan\"</span> feature-vulcan <span class=\"comment\">#合并分支</span></div><div class=\"line\">git branch -d feature-vulcan   <span class=\"comment\">#删除分支</span></div></pre></td></tr></table></figure></p>\n<p>但是，就在此时，接到上级命令，因经费不足，新功能<strong>必须取消</strong>！虽然白干了，但是这个分支还是必须<strong>就地销毁</strong>：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch -d feature-vulcan</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">error: </span>The branch 'feature-vulcan' is not fully merged.</div><div class=\"line\">If you are sure you want to delete it, run 'git branch -D feature-vulcan'.</div></pre></td></tr></table></figure></p>\n<p>Git提示销毁失败：feature-vulcan分支还没有被合并，如果删除，将丢失掉修改，如果要强行删除，需要使用命令<code>git branch -D feature-vulcan</code></p>\n<p>现在我们强行删除：<code>git branch -D feature-vulcan</code>　OK，现在我们切换回dev分支继续工作。</p>\n<hr>\n<h1 id=\"自定义Git配置-高级\"><a href=\"#自定义Git配置-高级\" class=\"headerlink\" title=\"自定义Git配置(高级)\"></a>自定义Git配置(高级)</h1><p>我们已经配置了<strong>user.name</strong>和<strong>user.email</strong>，实际上，Git还有很多可配置项。</p>\n<h2 id=\"忽略特殊文件\"><a href=\"#忽略特殊文件\" class=\"headerlink\" title=\"忽略特殊文件\"></a>忽略特殊文件</h2><p>有些时候，你必须把某些文件放到Git工作目录中，但又不能提交它们，比如保存了<strong>数据库密码的配置文件</strong>啦，等等，每次<strong>git status</strong>都会显示<strong>Untracked files …</strong>，有强迫症的童鞋心里肯定不爽。好在Git考虑到了大家的感受，这个问题解决起来也很简单，在Git工作区的根目录下创建一个特殊的<strong>.gitignore</strong>文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件。</p>\n<p>不需要从头写<strong>.gitignore</strong>文件，GitHub已经为我们准备了各种配置文件，只需要组合一下就可以使用了。所有配置文件可以直接在线浏览：<strong><a href=\"https://github.com/github/gitignore\" target=\"_blank\" rel=\"external\">https://github.com/github/gitignore</a></strong>   已经配置好了要忽略的文件，下载回来要文件名要改为<strong>.gitignore</strong>放在项目根目录下。</p>\n<p><strong>忽略文件的原则是：</strong></p>\n<ol>\n<li>忽略操作系统自动生成的文件，比如缩略图等；</li>\n<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；</li>\n<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</li>\n</ol>\n<p>举个例子：</p>\n<p>假设你在Windows下进行Python开发，Windows会自动在有图片的目录下生成隐藏的缩略图文件，如果有自定义目录，目录下就会有Desktop.ini文件，因此你需要忽略Windows自动生成的垃圾文件；然后，继续忽略Python编译产生的.pyc、.pyo、dist等文件或目录(<strong>忽略文件夹在文件夹名后加/</strong>)</p>\n<p>加上你自己定义的文件，最终得到一个完整的.gitignore文件，内容如下：<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Windows:</div><div class=\"line\">Thumbs.<span class=\"keyword\">db</span></div><div class=\"line\">ehthumbs.<span class=\"keyword\">db</span></div><div class=\"line\">Desktop.ini</div><div class=\"line\"></div><div class=\"line\"># Python:</div><div class=\"line\"><span class=\"comment\">*.py[cod]</span></div><div class=\"line\"><span class=\"comment\">*.so</span></div><div class=\"line\"><span class=\"comment\">*.egg</span></div><div class=\"line\"><span class=\"comment\">*.egg-info</span></div><div class=\"line\">dist</div><div class=\"line\">build</div><div class=\"line\"></div><div class=\"line\"># My configurations:</div><div class=\"line\"><span class=\"keyword\">db</span>.ini</div><div class=\"line\">deploy_key_rsa</div><div class=\"line\">新建文件夹/</div></pre></td></tr></table></figure></p>\n<p>最后一步就是把.gitignore也提交到Git，就完成了！当然<strong>检验.gitignore</strong>是否生效的标准是<strong>git status</strong>命令是不是说working directory clean。</p>\n<p>使用Windows的童鞋注意了，如果你在资源管理器里新建一个<strong>.gitignore</strong>文件，它会非常弱智地提示你必须输入文件名，在第三方文本编辑器里“保存”或者“另存为”就可以把文件保存为.gitignore了。</p>\n<p>有些时候，你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">add</span> App.class</div><div class=\"line\"></div><div class=\"line\">The following paths are ignored <span class=\"keyword\">by</span> <span class=\"literal\">one</span> <span class=\"keyword\">of</span> your .gitignore <span class=\"built_in\">files</span>:</div><div class=\"line\">App.class</div><div class=\"line\">Use -f <span class=\"keyword\">if</span> you really want <span class=\"built_in\">to</span> <span class=\"built_in\">add</span> them.</div></pre></td></tr></table></figure></p>\n<p>如果你确实想添加该文件，可以用<strong>-f</strong>强制添加到Git：<code>git add -f App.class</code></p>\n<p>或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用<code>git check-ignore</code>命令检查：<br><figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git<span class=\"built_in\"> check-ignore </span>-v App.class</div><div class=\"line\"><span class=\"keyword\">.gitignore</span>:3:*.class    App.class</div></pre></td></tr></table></figure></p>\n<p>Git会告诉我们，.gitignore的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。</p>\n<h2 id=\"配置命令别名\"><a href=\"#配置命令别名\" class=\"headerlink\" title=\"配置命令别名\"></a>配置命令别名</h2><p>有没有经常敲错命令？比如git status？status这个单词真心不好记。如果敲<strong>git st</strong>就表示<strong>git status</strong>那就简单多了。<br><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.st status   <span class=\"meta\">#st表示status</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.co checkout <span class=\"meta\">#co表示checkout</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.ci commit   <span class=\"meta\">#ci表示commit</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.br branch   <span class=\"meta\">#br表示branch</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\"><a href=\"#global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\" class=\"headerlink\" title=\"--global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\"></a>--global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。</h2><p>在”<strong>撤销修改</strong>“一节中，我们知道，命令<code>git reset HEAD file</code>可以把暂存区的修改撤销掉（unstage），重新放回工作区。既然是一个<strong>unstage操作</strong>，就可以配置一个unstage别名：<br><code>git config --global alias.unstage &#39;reset HEAD&#39;</code></p>\n<p>当你敲入命令：<code>git unstage test.py</code>实际上Git执行的是：<code>git reset HEAD test.py</code></p>\n<p>配置一个<strong>git last</strong>，让其显示最后一次提交信息：<code>git config --global alias.last &#39;log -3&#39;</code> (数字代表最近的几次提交);这样，用<code>git last</code>就能显示最近3次的提交：</p>\n<p>甚至还有人丧心病狂地把lg配置成了：<br><figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global alias.lg <span class=\"string\">\"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"</span></div></pre></td></tr></table></figure></p>\n<p>来看看git lg的效果：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B008.png\" alt=\"\"></p>\n<h2 id=\"关于配置文件\"><a href=\"#关于配置文件\" class=\"headerlink\" title=\"关于配置文件\"></a>关于配置文件</h2><p>配置Git的时候，加上<strong>--global</strong>是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。</p>\n<ul>\n<li><p>每个仓库（每个项目）独立的Git配置文件都放在<strong>.git/config</strong>文件中：</p>\n<figure class=\"highlight elixir\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat .git/config </div><div class=\"line\">[core]</div><div class=\"line\">    repositoryformatversion = <span class=\"number\">0</span></div><div class=\"line\">    filemode = <span class=\"keyword\">true</span></div><div class=\"line\">    bare = <span class=\"keyword\">false</span></div><div class=\"line\">    logallrefupdates = <span class=\"keyword\">true</span></div><div class=\"line\">    ignorecase = <span class=\"keyword\">true</span></div><div class=\"line\">    precomposeunicode = <span class=\"keyword\">true</span></div><div class=\"line\">[remote <span class=\"string\">\"origin\"</span>]</div><div class=\"line\">    url = git<span class=\"variable\">@github</span>.<span class=\"symbol\">com:</span>myleolan/learngit.git</div><div class=\"line\">    fetch = +refs/heads/*<span class=\"symbol\">:refs/remotes/origin/*</span></div><div class=\"line\">[branch <span class=\"string\">\"master\"</span>]</div><div class=\"line\">    remote = origin</div><div class=\"line\">    merge = refs/heads/master</div><div class=\"line\">[<span class=\"keyword\">alias</span>]     <span class=\"comment\">#命令别名，要删除别名，直接删掉对应的行即可。</span></div><div class=\"line\">    last = log -<span class=\"number\">1</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中：</p>\n<figure class=\"highlight nix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat .gitconfig</div><div class=\"line\">[alias]</div><div class=\"line\">    <span class=\"attr\">co</span> = checkout</div><div class=\"line\">    <span class=\"attr\">ci</span> = commit</div><div class=\"line\">    <span class=\"attr\">br</span> = branch</div><div class=\"line\">    <span class=\"attr\">st</span> = status</div><div class=\"line\">[user]</div><div class=\"line\">    <span class=\"attr\">name</span> = Your Name</div><div class=\"line\">    <span class=\"attr\">email</span> = your@email.com</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置(参考第2节 “Git配置”)。</p>\n<hr>\n<h1 id=\"团队协作\"><a href=\"#团队协作\" class=\"headerlink\" title=\"团队协作\"></a>团队协作</h1><h2 id=\"抓取分支\"><a href=\"#抓取分支\" class=\"headerlink\" title=\"抓取分支\"></a>抓取分支</h2><p>多人协作时，大家都会往master和dev分支上推送各自的修改。现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：<br><code>git clone git@github.com:myleolan/learngit.git</code></p>\n<p>当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的<strong>master</strong>分支。可以用<strong>git branch</strong>命令看看；现在，你的小伙伴要在dev分支上开发，就必须<strong>创建远程origin的dev分支到本地</strong>，于是他用命令创建本地dev分支：<code>git checkout -b dev origin/dev</code>　(在origin上创建dev，-b切换到dev分支;如果本地已经有dev分支了，直接切换就好)</p>\n<p>现在，他就可以在dev上继续修改，然后，时不时地把dev分支push到远程：<br><code>git commit -m &quot;add /usr/bin/env&quot;</code></p>\n<p>本地已经有dev分支了就不用创建了，直接执行下面的命令会自动在远程服务器新建dev分支。<br><code>git push origin dev</code>　(把本地dev推到远程origin上，会自动寻找origin的dev分支)</p>\n<p>你的小伙伴已经向<strong>origin/dev</strong>分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">git add hello.py</div><div class=\"line\">git <span class=\"keyword\">commit</span> -m <span class=\"string\">\"add coding: utf-8\"</span></div><div class=\"line\">git push origin dev</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">To</span> git@github.com:myleolan/learngit.git</div><div class=\"line\"> ! [rejected]        dev -&gt; dev (non-<span class=\"keyword\">fast</span>-forward)</div><div class=\"line\"><span class=\"keyword\">error</span>: <span class=\"keyword\">failed</span> <span class=\"keyword\">to</span> push <span class=\"keyword\">some</span> refs <span class=\"keyword\">to</span> <span class=\"string\">'git@github.com:myleolan/learngit.git'</span></div><div class=\"line\">hint: Updates were rejected because the tip <span class=\"keyword\">of</span> your <span class=\"keyword\">current</span> branch <span class=\"keyword\">is</span> behind</div><div class=\"line\">hint: its remote counterpart. <span class=\"keyword\">Merge</span> the remote changes (e.g. <span class=\"string\">'git pull'</span>)</div><div class=\"line\">hint: <span class=\"keyword\">before</span> pushing again.</div><div class=\"line\">hint: See the <span class=\"string\">'Note about fast-forwards'</span> <span class=\"keyword\">in</span> <span class=\"string\">'git push --help'</span> <span class=\"keyword\">for</span> details.</div></pre></td></tr></table></figure></p>\n<p>推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用<strong>git pull</strong>把最新的提交从<strong>origin/dev</strong>抓下来，然后，在本地合并，解决冲突，再推送：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">git pull</div><div class=\"line\"></div><div class=\"line\">remote: Counting object<span class=\"variable\">s:</span> <span class=\"number\">5</span>, done.</div><div class=\"line\">remote: Compressing object<span class=\"variable\">s:</span> <span class=\"number\">100</span>% (<span class=\"number\">2</span>/<span class=\"number\">2</span>), done.</div><div class=\"line\">remote: Total <span class=\"number\">3</span> (delta <span class=\"number\">0</span>), reused <span class=\"number\">3</span> (delta <span class=\"number\">0</span>)</div><div class=\"line\">Unpacking object<span class=\"variable\">s:</span> <span class=\"number\">100</span>% (<span class=\"number\">3</span>/<span class=\"number\">3</span>), done.</div><div class=\"line\">From github.<span class=\"keyword\">com</span>:myleolan/learngit</div><div class=\"line\">   fc38031..<span class=\"number\">291</span>bea8  dev        -&gt; origin/dev</div><div class=\"line\">There <span class=\"keyword\">is</span> <span class=\"keyword\">no</span> tracking information <span class=\"keyword\">for</span> the current branch.</div><div class=\"line\">Please specify which branch you want <span class=\"keyword\">to</span> merge with.</div><div class=\"line\">See git-pull(<span class=\"number\">1</span>) <span class=\"keyword\">for</span> details</div><div class=\"line\">    git pull <span class=\"symbol\">&lt;remote&gt;</span> <span class=\"symbol\">&lt;branch&gt;</span></div><div class=\"line\">If you wish <span class=\"keyword\">to</span> <span class=\"keyword\">set</span> tracking information <span class=\"keyword\">for</span> this branch you can <span class=\"keyword\">do</span> <span class=\"keyword\">so</span> with:</div><div class=\"line\">    git branch --<span class=\"keyword\">set</span>-upstream dev origin/<span class=\"symbol\">&lt;branch&gt;</span></div></pre></td></tr></table></figure></p>\n<p>git pull也失败了，原因是没有指定<strong>本地dev分支</strong>与远程<strong>origin/dev</strong>分支的链接，根据提示，设置dev和origin/dev的链接(绑定这两个分支)：<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch --<span class=\"built_in\">set</span>-upstream <span class=\"built_in\">dev</span> origin/<span class=\"built_in\">dev</span> </div><div class=\"line\">如果git pull还是失败，说明绑定不了。</div><div class=\"line\">试试官方更改的命令：git branch --<span class=\"built_in\">set</span>-upstream-to=origin/<span class=\"built_in\">dev</span> <span class=\"built_in\">dev</span></div></pre></td></tr></table></figure></p>\n<p><code>git pull -f origin master</code>　强制覆盖也行，但很危险。</p>\n<p>再次<strong>git pull</strong>成功，但是合并有冲突，需要手动解决，解决的方法和第12节“解决冲突”完全一样。解决后，提交，再push：<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit -m <span class=\"string\">\"merge &amp; fix hello.py\"</span></div><div class=\"line\">git <span class=\"built_in\">push</span> <span class=\"built_in\">origin</span> dev</div></pre></td></tr></table></figure></p>\n<p><strong>多人协作的工作模式通常是这样：</strong></p>\n<ol>\n<li>首先，可以试图用<code>git push origin branch-name</code>推送自己的修改；</li>\n<li>如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；</li>\n<li>如果合并有冲突，则解决冲突，并在本地提交；</li>\n<li>没有冲突或者解决掉冲突后，再用<code>git push origin branch-name</code>推送就能成功！<br>如果<strong>git pull</strong>提示“<strong>no tracking information</strong>”，则说明本地分支和远程分支的链接关系没有创建，用命令:<br><code>git branch --set-upstream branch-name origin/branch-name</code><br>这就是多人协作的工作模式，一旦熟悉了，就非常简单。</li>\n</ol>\n<h2 id=\"F-amp-Q\"><a href=\"#F-amp-Q\" class=\"headerlink\" title=\"F&amp;Q\"></a>F&amp;Q</h2><p>签出远程分支，出现以下错误：<br>fatal: Cannot update paths and switch to branch ‘develop’ at the same time.<br>解决方法：<br>先<code>git fetch</code>再<code>git checkout -b develop origin/develop</code><br>因为本地还没有”develop”分支信息，需要先fetch或者pull</p>\n<p>假设有人往服务器上推送了一个新的分支，但是我不知道分支的名称是什么，我如何能获取到服务器上的分支列表呢？<br>      a. 你直接去问他<br>      b. 如果用GitHub，直接去网站看<br>      c. <code>git ls-remote --heads origin</code></p>\n<h2 id=\"推送分支\"><a href=\"#推送分支\" class=\"headerlink\" title=\"推送分支\"></a>推送分支</h2><p>推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：<code>git push origin master</code></p>\n<p>如果要推送其他分支，比如dev，就改成：<code>git push origin dev</code></p>\n<p>但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？<br>  ● master分支是主分支，因此要时刻与远程同步；<br>  ● dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；<br>  ● bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；<br>  ● feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。<br>总之，就是在Git中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！</p>\n<hr>\n<h1 id=\"参与开源项目\"><a href=\"#参与开源项目\" class=\"headerlink\" title=\"参与开源项目\"></a>参与开源项目</h1><p>如何参与一个开源项目呢？比如人气极高的<strong>bootstrap</strong>项目，这是一个非常强大的CSS框架，你可以访问它的<strong><a href=\"https://github.com/twbs/bootstrap\" target=\"_blank\" rel=\"external\">GitHub项目主页</a></strong>，点“<strong>Fork</strong>”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：<code>git clone git@github.com:**your_username**/bootstrap.git</code></p>\n<p>一定要从自己的账号下clone仓库，这样你才能推送修改(在第4节 “创建远程仓库”中结尾就提到了另一种克隆方式)。如果从bootstrap的作者的仓库地址，采用<code>git clone git@github.com:twbs/bootstrap.git</code>的方式克隆，因为没有权限，你将不能推送修改（见第4节 “创建远程仓库”结尾处，<strong>删除.git文件夹</strong>的方法）。</p>\n<p><strong>Bootstrap</strong>的官方仓库twbs/bootstrap、你在GitHub上克隆的仓库<strong>your_username/bootstrap</strong>，以及你自己克隆到本地电脑的仓库，他们的关系就像下图显示的那样：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B007.png\" alt=\"\"></p>\n<ul>\n<li>如果你想修复bootstrap的一个bug，或者新增一个功能，立刻就可以开始干活，干完后，往自己的仓库推送。</li>\n<li>如果<strong>你希望bootstrap的官方库能接受你的修改</strong>，你就可以在你的GitHub该项目页上发起一个<strong>pull request</strong>。当然，对方是否接受你的<strong>pull request</strong>就不一定了。</li>\n</ul>\n<hr>\n<h1 id=\"自己搭建Git服务器\"><a href=\"#自己搭建Git服务器\" class=\"headerlink\" title=\"自己搭建Git服务器\"></a>自己搭建Git服务器</h1><p>GitHub就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给GitHub交保护费，那就只能自己搭建一台Git服务器作为私有仓库使用。搭建Git服务器需要准备一台运行Linux的机器，强烈用Ubuntu、Debian或者Centos、redhat，这样，通过几条简单的apt命令就可以完成安装。<br><strong>root登录</strong></p>\n<ul>\n<li><p>第一步，<strong>安装git：</strong><br><code>sudo apt-get install git</code> 或 <code>yum install git</code></p>\n</li>\n<li><p>第二步，<strong>创建一个git用户，用来运行git服务：</strong><br><code>sudo adduser git</code></p>\n</li>\n</ul>\n<ul>\n<li>第三步，<strong>初始化Git仓库：</strong><br>先选定一个目录作为Git仓库，假定是/data/git/learngit.git<br>在/data/git/目录下输入命令：<br><code>sudo git init --bare learngit.git</code></li>\n</ul>\n<p>Git就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。<br><code>sudo chown -R git:git learngit.git</code></p>\n<p>Git服务器就已经搭得差不多了。下面我们在客户端clone一下远程仓库<br><code>git clone git@IP:/data/git/learngit.git</code><br>Cloning into ‘learngit’…<br>The authenticity of host ‘192.168.8.34 (192.168.8.34)’ can’t be established.<br>RSA key fingerprint is 2b:55:45:e7:4c:29:cc:05:33:78:03:bd:a8:cd:08:9d.<br>Are you sure you want to continue connecting (yes/no)? yes<br>Warning: Permanently added ‘192.168.8.34’ (RSA) to the list of known hosts.<br>git@192.168.8.34’s password:<br><strong>能连接但要密码</strong>，接着下一步。</p>\n<ul>\n<li>第四步，<strong>创建证书登录（Git服务器打开RSA认证）</strong>：然后就可以去Git服务器上添加你的公钥用来验证你的信息了。<code>vim /etc/ssh/sshd_config</code>中将RSA认证打开，即：<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">RSAAuthentication</span> <span class=\"literal\">yes</span>     </div><div class=\"line\">PubkeyAuthentication <span class=\"literal\">yes</span>     </div><div class=\"line\">AuthorizedKeysFile  .ssh/authorized_keys</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>这里我们可以看到<strong>公钥存放在.ssh/authorized_keys</strong>文件中。所以我们在<strong>/home/git下创建.ssh目录，然后创建authorized_keys文件</strong>，收集所有需要登录的用户的公钥，就是他们自己的id_rsa.pub文件，把所有公钥导入到<strong>/home/git/.ssh/authorized_keys文件里，一行一个。</strong><br>此时再次连接已经可以免密钥登录啦。</p>\n<ul>\n<li>第五步，<strong>禁用shell登录：</strong><br>出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过<br>编辑/etc/passwd文件完成。找到类似下面的一行：<br><code>git:x:1001:1001:,,,:/home/git:/bin/bash</code><br>改为：<br><code>git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</code></li>\n</ul>\n<p>这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。</p>\n<ul>\n<li>第六步，<strong>克隆远程仓库：</strong><br>现在，可以通过git clone命令克隆远程仓库了，在各自的电脑上运行：<br><code>git clone git@IP:/data/git/learngit.git</code><br>Cloning into ‘sample’…<br>warning: You appear to have cloned an empty repository.<br>剩下的推送就简单了。</li>\n</ul>\n<p><strong>管理公钥</strong></p>\n<p>如果团队很小，把每个人的公钥收集起来放到服务器的/home/git/.ssh/authorized_keys文件里就是可行的。如果团队有几百号人，就没法这么玩了，这时，可以用<strong>Gitosis</strong>来管理公钥。<br>这里我们不介绍怎么玩Gitosis了，几百号人的团队基本都在500强了，相信找个高水平的Linux管理员问题不大。管理公钥也可用<strong>Gitolite</strong><br><strong>管理权限</strong><br>有很多不但视源代码如生命，而且视员工为窃贼的公司，会在版本控制系统里设置一套完善的权限控制，每个人是否有读写权限会精确到每个分支甚至每个目录下。因为Git是为Linux源代码托管而开发的，所以Git也继承了开源社区的精神，不支持权限控制。不过，因为<strong>Git支持钩子（hook）</strong>，所以，可以在服务器端编写一系列脚本来控制提交等操作，达到权限控制的目的。<strong>Gitolite</strong>就是这个工具。<br>这里我们也不介绍Gitolite了，不要把有限的生命浪费到权限斗争中。</p>\n<p>搭建服务器的同时采用Gitolite来管理权限，参考：<br><a href=\"https://my.oschina.net/u/2351685/blog/509322\" target=\"_blank\" rel=\"external\">https://my.oschina.net/u/2351685/blog/509322</a></p>\n<p>Gitolite的使用，参考：<a href=\"http://www.uml.org.cn/pzgl/201404092.asp\" target=\"_blank\" rel=\"external\">http://www.uml.org.cn/pzgl/201404092.asp</a></p>\n<hr>\n<h1 id=\"参考资料：\"><a href=\"#参考资料：\" class=\"headerlink\" title=\"参考资料：\"></a>参考资料：</h1><p>连猴子都会的git：<br><a href=\"http://backlogtool.com/git-guide/cn/\" target=\"_blank\" rel=\"external\">http://backlogtool.com/git-guide/cn/</a></p>\n<p>Pro Git：<a href=\"http://iissnan.com/progit/\" target=\"_blank\" rel=\"external\">http://iissnan.com/progit/</a><br>廖雪峰git：</p>\n<p><a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000\" target=\"_blank\" rel=\"external\">http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000</a></p>\n<p>外国友人git手册:<br><a href=\"https://pan.baidu.com/s/1kU5OCOB#path=%252Fpub%252Fgit\" target=\"_blank\" rel=\"external\">https://pan.baidu.com/s/1kU5OCOB#path=%252Fpub%252Fgit</a><br>10个迅速提升你 Git 水平的提示:<br><a href=\"http://www.oschina.net/translate/10-tips-git-next-level\" target=\"_blank\" rel=\"external\">http://www.oschina.net/translate/10-tips-git-next-level</a></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"安装Git\"><a href=\"#安装Git\" class=\"headerlink\" title=\"安装Git\"></a>安装Git</h1><h2 id=\"Debian-Ubuntu\"><a href=\"#Debian-Ubuntu\" class=\"headerlink\" title=\"Debian/Ubuntu\"></a>Debian/Ubuntu</h2><p><code>apt-get install git</code></p>\n<h2 id=\"Centos-RedHat\"><a href=\"#Centos-RedHat\" class=\"headerlink\" title=\"Centos/RedHat\"></a>Centos/RedHat</h2><p><code>yum install git</code></p>\n<h2 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h2><p>安装包下载：<a href=\"https://git-for-windows.github.io/\">https://git-for-windows.github.io/</a></p>\n<h2 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h2><p>安装包下载：<a href=\"https://sourceforge.net/projects/git-osx-installer/\">https://sourceforge.net/projects/git-osx-installer/</a></p>\n<p><code>git --version</code>  　查看版本</p>\n<hr>\n<h1 id=\"Git配置\"><a href=\"#Git配置\" class=\"headerlink\" title=\"Git配置\"></a>Git配置</h1><p><code>ls -a</code>    或 <code>ls -ah</code>    方便查看隐藏文件<br>执行<code>git config</code>命令就是调用此文件<br><code>/etc/gitconfig</code>       全部用户生效 --system调用的文件<br><code>～/.gitcinfig</code>      当前用户有效 --global调用的文件<br><code>.git/config</code>         当前项目的配置文件<br><strong>.git/config</strong>的配置会覆盖<strong>/etc/gitconfig</strong> 中的同名变量。<br>win中配置文件一般在主目录下的对应用户文件夹里<strong>C:\\Documents and Settings\\$USER</strong><br>win中<strong>/etc/gitconfig</strong>是在安装目录中。</p>\n<h2 id=\"用户信息配置\"><a href=\"#用户信息配置\" class=\"headerlink\" title=\"用户信息配置\"></a>用户信息配置</h2><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> user.name <span class=\"string\">\"leolan\"</span>  <span class=\"meta\">#leolan为用户名</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> user.email <span class=\"number\">842632422</span><span class=\"symbol\">@qq</span>.com   <span class=\"meta\">#邮箱</span></div><div class=\"line\">(用了<span class=\"keyword\">global</span>选项后当前用户的所有项目默认使用此用户信息，某一项目若使用其它的用户信息。把--<span class=\"keyword\">global</span>去掉重新配置，会在该项目.git/config中重新生成配置就行了。)</div><div class=\"line\">以下可选：</div><div class=\"line\">git config --<span class=\"keyword\">global</span> color.ui <span class=\"literal\">true</span>    <span class=\"meta\">#让Git显示颜色，会让命令输出看起来更醒目</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> core.editor emace   <span class=\"meta\">#指定emace为默认编辑器，不指定默认为vim</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> merge.tool vimdiff  <span class=\"meta\">#差异化分析工具（冲突合并），git可以理解kdiff3 ,tkdiff,meld,xxdiff,emerge,vimdiff,gvimdiff,ecmerge,opendiff等工具的输出信息。</span></div><div class=\"line\"></div><div class=\"line\">git config user.name   <span class=\"meta\">#查看配置的用户名，改为user.email则为邮箱。</span></div><div class=\"line\">git config --list      <span class=\"meta\">#查看已配置的用户信息</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"基本使用方法\"><a href=\"#基本使用方法\" class=\"headerlink\" title=\"基本使用方法\"></a>基本使用方法</h1><p><strong>一般进入某项目的目录后再执行以下命令。</strong><br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">git init\t        <span class=\"comment\">#设置当前目录为Git仓库</span></div><div class=\"line\">git init 目录名 \t        <span class=\"comment\">#指定目录为Git仓库</span></div><div class=\"line\"></div><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">［源］\t\t#从源拷贝项目到本地的当前目录</div><div class=\"line\">git</span> <span class=\"keyword\">clone</span> <span class=\"title\">［源］［目录］\t#指定源下载到某个目录</div><div class=\"line\">例：git</span> <span class=\"keyword\">clone</span> <span class=\"title\">git</span>://github.com/schacon/grit.git mygrit</div><div class=\"line\"></div><div class=\"line\">git status\t\t<span class=\"comment\">#查看当前目录文件的状态，加 -s 显示简短信息。\"A\"是已添加到缓存、\"M\"为文件有改动、\"空格\"为未缓存的文件，组合显示如：\"AM\"代表已缓存的文件有改动，\"空格M\"代表未缓存的文件有改动。</span></div><div class=\"line\">git add 文件名   <span class=\"comment\">#添加文件到项目缓存中，没有添加的文件不属于项目文件，也不会痛不到服务器。</span></div><div class=\"line\">git add .  \t\t<span class=\"comment\">#添加当前目录到项目缓存中，如果添加多个文件，此命令更方便。</span></div><div class=\"line\">git commit -m <span class=\"string\">\"项目的版本或简短说明\"</span>\t<span class=\"comment\">#可以指定版本号及简单说明改动了哪些内容，同时会把所有改动同步到服务器上。</span></div><div class=\"line\">git commit -am <span class=\"string\">\"项目的版本或简短说明\"</span>\t<span class=\"comment\">#改动了多个文件又不想一个个添加，此命令自动添加所有改动的文件并同步到服务器。</span></div></pre></td></tr></table></figure></p>\n<p>Git的所有工作都是现在本地缓存的，只有执行<strong>git commit -m “简短说明”</strong> 后才会向服务器提交。<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">diff\t</span>        <span class=\"comment\">#未缓存的改动</span></div><div class=\"line\">git <span class=\"keyword\">diff </span>--<span class=\"keyword\">cached\t</span><span class=\"comment\">#已缓存的改动</span></div><div class=\"line\">git <span class=\"keyword\">diff </span>HEAD\t\t<span class=\"comment\">#已缓存和未缓存的所有改动</span></div><div class=\"line\">git <span class=\"keyword\">diff </span>--stat\t\t<span class=\"comment\">#显示摘要而非整个diff</span></div><div class=\"line\">git reset -- HEAD 文件\t<span class=\"comment\">#取消文件已缓存的内容，--很重要，没有加--表示切换到另一个分支。</span></div><div class=\"line\">git rm 文件\t\t<span class=\"comment\">#从项目中及本地删除文件,可不用执行。</span></div><div class=\"line\">git mv 文件\t\t<span class=\"comment\">#从项目中及本地重命名文件,可不用执行。</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"创建远程仓库\"><a href=\"#创建远程仓库\" class=\"headerlink\" title=\"创建远程仓库\"></a>创建远程仓库</h1><p>在继续阅读后续内容前，请自行注册GitHub账号。由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点设置：</p>\n<ul>\n<li><strong>第1步</strong>：创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：<code>ssh-keygen -t rsa -C &quot;842632422@qq.com&quot;</code>你需要把邮件地址换成你自己的邮件地址，然后一路回车，使用默认值即可，由于这个Key也不是用于军事目的，所以也无需设置密码。</li>\n</ul>\n<p>如果一切顺利的话，可以在用户主目录里找到.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH Key的秘钥对，<strong>id_rsa是私钥，不能泄露出去，id_rsa.pub是公钥</strong>，可以放心地告诉任何人。</p>\n<ul>\n<li><strong>第2步</strong>：登陆GitHub，打开“Account settings”，“SSH Keys”页面：<br>然后，点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub（公钥）文件的内容：</li>\n</ul>\n<p>点“Add Key”，你就应该看到已经添加的Key：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B001.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B002.png\" alt=\"\"></p>\n<p>为什么GitHub需要SSH Key呢？因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。<br>当然，GitHub允许你添加多个Key。假定你有若干电脑，你一会儿在公司提交，一会儿在家里提交，只要把每台电脑的Key都添加到GitHub，就可以在每台电脑上往GitHub推送了。<br>最后友情提示，在GitHub上免费托管的Git仓库，任何人都可以看到喔（但只有你自己才能改）。所以，不要把敏感信息放进去。<br>`ssh -T git@github.com<br>提示：Hi MyLeoLan! You’ve successfully authenticated, but GitHub does not provide shell access.　　则成功添加sshkey</p>\n<p>在右上角找到“Create a new repo”按钮，创建一个新的仓库：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B003.png\" alt=\"\"><br>目前，在GitHub上的这个仓库还是空的，会提示你创建README.md文件。</p>\n<p>可以从这个仓库克隆出新的仓库（克隆到本地），也可以把一个已有的本地仓库与之关联，然后，把本地仓库的内容推送到GitHub仓库（本地的项目或下载了别人的项目想要推送到自己的仓库，和<strong>fork</strong>的方式不同，这种方式要删除隐藏的<strong>.git文件夹</strong>因为<strong>.git文件夹</strong>包含了别人的库信息，你是推送不到自己的库上去的，删掉之后添加的才是自己的信息）。</p>\n<hr>\n<h1 id=\"从远程库克隆仓库\"><a href=\"#从远程库克隆仓库\" class=\"headerlink\" title=\"从远程库克隆仓库\"></a>从远程库克隆仓库</h1><p>远程库已经准备好了，下一步是用命令git clone克隆一个本地库：<br><code>git clone git@github.com:MyLeoLan/testgit.git</code><br>实际上，Git支持多种协议，默认的git://使用ssh，但也可以使用https等其他协议。<br>使用https除了速度慢以外，还有个最大的麻烦是<strong>每次推送都必须输入口令</strong>，但是在某些只开放http端口的公司内部就无法使用ssh协议而只能用https。</p>\n<h1 id=\"本地仓库推送到远程仓库\"><a href=\"#本地仓库推送到远程仓库\" class=\"headerlink\" title=\"本地仓库推送到远程仓库\"></a>本地仓库推送到远程仓库</h1><p>把本地仓库的内容推送到远程（GitHub）仓库。在本地的XXX仓库下运行命令：</p>\n<p><code>git remote add origin git@github.com:myleolan/learngit.git</code><br>表示把本地的XXX仓库与远程learngit.git库绑定<strong>(添加远程库)</strong>，以后推送都推送到这个库中。地址换成自己的库地址。你的SSH Key公钥不在我的账户列表中是推不上去的。</p>\n<p>关联后，使用命令<code>git push -u origin master</code>完成第一次推送master分支的所有内容（一般远程的master分支会自动命名为origin用于区分，而本地的master还是master分支，<strong>-u</strong>会关联分支，下次推送默认推送到此分支。）</p>\n<p>推送时<strong>git push origin XXXX</strong> （xxxx可以指定本地某分支推送到远程的origin分支）此后，每次本地提交后，只要有必要，就可以使用命令<code>git push origin master</code>推送最新修改；简化命令为：<code>git pull</code>(从远程仓库提取数据并尝试合并到当前分支)和<code>git push</code></p>\n<p>从远程库下载分支和数据的更新到当前项目（不会合并，pull等同于fetch+merge）：<code>git fetch origin</code></p>\n<p>查看当前项目的远程库：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote 或 git remote -v</div><div class=\"line\"></div><div class=\"line\">origin  git@github<span class=\"selector-class\">.com</span>:myleolan/learngit<span class=\"selector-class\">.git</span> (fetch)</div><div class=\"line\">origin  git@github<span class=\"selector-class\">.com</span>:myleolan/learngit<span class=\"selector-class\">.git</span> (push)</div></pre></td></tr></table></figure></p>\n<p>上面显示了可以抓取和推送的origin的地址。如果没有推送权限，就看不到push的地址。</p>\n<p>删除远程仓库：<code>git remote rm ［别名或仓库名］</code></p>\n<ul>\n<li>pull：本地 &lt;-- 远程   (如果你本地落后远程，必然要pull)</li>\n<li>push：本地 --&gt; 远程  (如果你本地超前远程，必然要push)</li>\n</ul>\n<p>本质上都是同步commit</p>\n<p>分布式版本系统的最大好处之一是在本地工作完全不需要考虑远程库的存在，也就是有没有联网都可以正常工作，而SVN在没有联网的时候是拒绝干活的！当有网络的时候，再把本地提交推送一下就完成了同步！</p>\n<hr>\n<h1 id=\"管理修改\"><a href=\"#管理修改\" class=\"headerlink\" title=\"管理修改\"></a>管理修改</h1><p>第一次修改 -&gt; <strong>git add</strong>（放入暂存区）-&gt; 第二次修改 -&gt;<strong>git commit</strong>（提交暂存区，准备推送到远程）</p>\n<p>Git管理的是修改，当你用git add命令后，在工作区的第一次修改被放入暂存区，准备提交，但是，在<strong>工作区的第二次修改并没有放入暂存区</strong>，所以，git commit<strong>只负责把暂存区的修改提交了</strong>，也就是第一次的修改被提交了，第二次的修改不会被提交。</p>\n<p>提交后，用<code>git diff HEAD</code>命令可以查看工作区和版本库里面最新版本的区别。</p>\n<p>怎么提交第二次修改呢？你可以继续git add再git commit，也可以别着急提交第一次修改，先git add第二次修改，再git commit，就相当于把两次修改合并后一块提交了：</p>\n<p><strong>第一次修改 -&gt; git add -&gt; 第二次修改 -&gt; git add -&gt; git commit</strong><br>好啦，把第二次修改提交了。</p>\n<hr>\n<h1 id=\"删除文件\"><a href=\"#删除文件\" class=\"headerlink\" title=\"删除文件\"></a>删除文件</h1><p>一般情况下，你通常直接在文件管理器中把没用的文件删了，或者用<strong>rm</strong>命令删了,此时文件删除了但版本库里还有记录，文件可能恢复不了。这个时候，Git知道你删除了文件，因此，工作区和版本库就不一致了，<code>git status</code>命令会提示你哪些文件被删除了。</p>\n<p>要从版本库中删除该文件，那就用命令<code>git rm</code>删掉，并且<code>git commit</code> （git rm会同时删除版本库及文件）</p>\n<p>另一种情况是删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本：<code>git checkout -- filename</code></p>\n<p>git checkout其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</p>\n<p><strong>提交代码分两步</strong>:</p>\n<ul>\n<li>1.从工作目录，提交到stage。</li>\n</ul>\n<p>从工作目录提交到stage，需要用add或者rm命令，只提交到stage，而没有提交到master，是不会自动同步到master的。</p>\n<ul>\n<li>2.从stage提交到master。</li>\n</ul>\n<p>从stage提交到master用commit命令。</p>\n<p><strong>工作区</strong>--&gt;--<em>add,rm</em>--&gt;--<strong>stage</strong>--&gt;--<em>commit</em>--&gt;--<strong>master</strong></p>\n<p><strong>退回也是要分两步</strong>:</p>\n<ul>\n<li><p>1.从master退回到stage<br>对于还没有提交到stage的，可以从stage用checkout命令退回，这一步会取stage中的文件状态，覆盖掉工作目录中文件的状态，跟master完全没关系。</p>\n</li>\n<li><p>2.从stage退回到工作目录</p>\n</li>\n</ul>\n<p>对于已经到达stage的，想把state中的文件状态用master中的覆盖掉，就用reset命令，这样就把stage中修改用master的状态覆盖掉了，完全跟工作目录没关系</p>\n<p><strong>工作区</strong>--&lt;--<em>checkout</em>--&lt;--<strong>stage</strong>--&lt;--<em>reset</em>--&lt;--<strong>master</strong></p>\n<p>要删除某些文件，不能简单用rm删除，远程仓库依然会保留文件（因为它不知道你什么时候就进行版本回退了，需要用到那些文件），要彻底删除，本地<code>git rm filename</code>命令删除文件再<strong>git push</strong>上去，或者进入github管理界面手动一个一个删除文件。</p>\n<hr>\n<h1 id=\"版本回退\"><a href=\"#版本回退\" class=\"headerlink\" title=\"版本回退\"></a>版本回退</h1><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git status \t   <span class=\"comment\">#查看当前状态</span></div><div class=\"line\">git diff      \t   <span class=\"comment\">#查看做了哪些修改</span></div><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> file  \t   <span class=\"comment\">#添加到缓存</span></div><div class=\"line\"></span>git commit -m <span class=\"string\">\"xxx\"</span><span class=\"comment\">#提交到本地版本库</span></div><div class=\"line\">git log\t\t   <span class=\"comment\">#可查看所有的历史版本，信息太多加--pretty=oneline参数简化</span></div></pre></td></tr></table></figure>\n<p>首先，Git必须知道当前版本是哪个版本，在Git中，用<strong>HEAD表示当前版本</strong>，也就是最新的提交过commit的这个版本，<strong>HEAD^</strong>是上一个版本，上上一个版本就是<strong>HEAD^^</strong>，当然往上100个版本写100个<strong>^</strong>比较容易数不过来，所以写成<strong>HEAD~100</strong>。</p>\n<p>此节实验当我没有保存下来，所以引用廖雪峰老师的数据，实验是通过修改readme.txt文件进行的，假设我们要把当前版本“append GPL”回退到上一个版本“add distributed”，就可以使用git reset命令：<code>git reset --hard HEAD^</code> (退回上一个版本)</p>\n<p><code>cat readme.txt</code>看看readme.txt的内容是不是版本add distributed：</p>\n<p>Git is a distributed version control system.<br>Git is free software.</p>\n<p>果然,还可以继续回退到上一个版本wrote a readme file，不过且慢，我们用<code>git log</code>再看看现在版本库的状态：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">commit</span> ea34578d5496d7dd233c827ed32a8cd576c5ee85</div><div class=\"line\">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</div><div class=\"line\"><span class=\"built_in\">Date</span>:   Tue Aug <span class=\"number\">20</span> <span class=\"number\">14</span>:<span class=\"number\">53</span>:<span class=\"number\">12</span> <span class=\"number\">2013</span> +<span class=\"number\">0800</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">add</span> <span class=\"keyword\">distributed</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">commit</span> cb926e7ea50ad11b8f9e909c05226233bf755030</div><div class=\"line\">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</div><div class=\"line\"><span class=\"built_in\">Date</span>:   Mon Aug <span class=\"number\">19</span> <span class=\"number\">17</span>:<span class=\"number\">51</span>:<span class=\"number\">55</span> <span class=\"number\">2013</span> +<span class=\"number\">0800</span></div><div class=\"line\"></div><div class=\"line\">    wrote a readme <span class=\"keyword\">file</span></div></pre></td></tr></table></figure></p>\n<p>最新的那个版本append GPL已经看不到了！好比你从21世纪坐时光穿梭机来到了19世纪，想再回去已经回不去了，肿么办？只要上面的命令行窗口还没有被关掉，你就可以顺着往上找啊找啊，找到那个append GPL的<strong>commit id</strong>是3628164…，于是就可以指定回到未来的某个版本：<br><code>git reset --hard 3628164</code>     (退回指定版本）。</p>\n<p>如果已经关掉了命令行，找不到新版本的commit id怎么办？Git提供了一个命令<code>git reflog</code>用来<strong>记录你的每一次命令(历史命令，类似日志)</strong>，其中就包含了commit id：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reflog      查询历史版本号</div><div class=\"line\">ea34578 HEAD@&#123;<span class=\"number\">0</span>&#125;: rese<span class=\"variable\">t:</span> moving <span class=\"keyword\">to</span> HEAD^</div><div class=\"line\"><span class=\"number\">3628164</span> HEAD@&#123;<span class=\"number\">1</span>&#125;: commi<span class=\"variable\">t:</span> <span class=\"keyword\">append</span> GPL</div><div class=\"line\">ea34578 HEAD@&#123;<span class=\"number\">2</span>&#125;: commi<span class=\"variable\">t:</span> <span class=\"built_in\">add</span> distributed</div><div class=\"line\">cb926e7 HEAD@&#123;<span class=\"number\">3</span>&#125;: commit (initial): wrote <span class=\"keyword\">a</span> readme <span class=\"keyword\">file</span></div></pre></td></tr></table></figure></p>\n<p>第二行显示append GPL的commit id是3628164，现在，你又可以乘坐时光机回到未来了。</p>\n<p>版本号没必要写全，前几位就可以了，Git会自动去找。当然也不能只写前一两位,一般7-8位就行了，因为Git可能会找到多个版本号，就无法确定是哪一个了。<br>Git的版本回退速度非常快，因为Git在内部有个指向当前版本的HEAD指针，当你回退版本的时候，Git仅仅是把HEAD从指向append GPL：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B004.png\" alt=\"\"></p>\n<p>改为指向add distributed：</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B005.png\" alt=\"\"></p>\n<p>然后顺便把工作区的文件更新了。所以你让<strong>HEAD</strong>指向哪个版本号，你就把当前版本定位在哪。</p>\n<hr>\n<h1 id=\"撤销修改\"><a href=\"#撤销修改\" class=\"headerlink\" title=\"撤销修改\"></a>撤销修改</h1><p>当发现某部分代码需要撤销时<code>git checkout -- filename</code>可以丢弃工作区的修改：<strong>git checkout -- readme.txt</strong>（把readme.txt文件在工作区的修改全部撤销）</p>\n<p>这里有两种情况：</p>\n<ul>\n<li>1.<strong>readme.txt自修改后还没有被放到暂存区</strong>，现在，撤销修改就回到和版本库一模一样的状态；</li>\n</ul>\n<p>命令中的<strong>--</strong>很重要，没有<strong>--</strong>，就变成了“<strong>切换到另一个分支</strong>”的命令，我们在后面的分支管理中会再次遇到git checkout命令。</p>\n<ul>\n<li>2.<strong>readme.txt已经添加到暂存区后，又作了修改</strong>，现在，撤销修改就回到添加到暂存区后的状态。<br>总之，就是让这个文件回到最近一次<strong>git commit</strong>或<strong>git add</strong>时的状态。</li>\n</ul>\n<p>现在假定是凌晨3点，你不但写了一些胡话，还<strong>git add到暂存区</strong>了,庆幸的是，在<strong>commit</strong>之前，你发现了这个问题。用<code>git status</code>查看一下，修改只是添加到了暂存区，还没有提交。用命令<code>git reset HEAD file</code>(可以把暂存区的修改撤销掉（unstage），不带file则撤销所有文件的更改，重新放回工作区，此时就相当于<strong>没有git add</strong>的状态，但文件是改动过的）</p>\n<p><code>git reset</code>命令<strong>既可以回退版本，也可以把暂存区的修改回退到工作区。</strong>当我们用HEAD时，表示最新的版本。再用<code>git status</code>查看一下，现在暂存区是干净的，工作区有修改。<br>丢弃工作区的修改：<code>git checkout -- readme.txt</code> 可直接恢复文件并恢复版本库的内容（丢弃所有未git add的内容，回到最近一个最新版本）<br>注意：要完全撤回修改的代码，要<code>git reset HEAD file</code>后执行<code>git checkout -- file</code>才会完全包括工作区的内容也删除。</p>\n<p>现在，假设你不但改错了东西，还把暂存区提交到了版本库（执行了git commit），怎么办呢？还可以版本回退到上一个版本。如果<strong>还没有把自己的本地版本库推送到远程</strong>，可以用：<code>git reset --hard HEAD</code> 恢复到当前版本（改动了但没有commit的那个版本，如果进行了commit，此次commit就是一个新版本，只能通过<code>git reset --hard HEAD^</code>回到上一个commit）。如果<strong>已经提交到了远程</strong>，只能通过<code>git reset --hard HEAD^</code>版本回退了。</p>\n<hr>\n<h1 id=\"标签管理\"><a href=\"#标签管理\" class=\"headerlink\" title=\"标签管理\"></a>标签管理</h1><p>发布一个版本时，我们通常先在版本库中打一个标签（tag），这样，就唯一确定了打标签时刻的版本。将来无论什么时候，取某个标签的版本，就是把那个打标签的时刻的历史版本取出来。所以，标签也是版本库的一个快照。<br>Git的标签虽然是版本库的快照，但其实它就是指向某个commit的指针（跟分支很像对不对？但是分支可以移动，标签不能移动），所以，创建和删除标签都是瞬间完成的。</p>\n<p><strong>Git有commit，为什么还要引入tag？</strong></p>\n<p>“请把上周一的那个版本打包发布，commit号是6a5819e…” ;“一串乱七八糟的数字不好找！”</p>\n<p>如果换一个办法：</p>\n<p>“请把上周一的那个版本打包发布，版本号是v1.2”  ;“按照tag v1.2查找commit就行！”<br>tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。</p>\n<h2 id=\"创建标签\"><a href=\"#创建标签\" class=\"headerlink\" title=\"创建标签\"></a>创建标签</h2><p>在Git中打标签非常简单，首先，切换到需要打标签的分支上：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch    <span class=\"comment\">#查看有哪些分支</span></div><div class=\"line\">git checkout <span class=\"keyword\">master</span>  <span class=\"title\">#切换到要打标签的分支上</span></div></pre></td></tr></table></figure></p>\n<p>然后，敲命令<code>git tag &lt;name&gt;</code>就可以在<strong>当前分支的最新已提交的状态</strong>(HEAD)打一个新标签：<strong>git tag v1.0</strong></p>\n<p>默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？</p>\n<p>方法是找到历史提交的<strong>commit id</strong>，然后打上就可以了：<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">log</span> --pretty=oneline --abbrev-commit</div><div class=\"line\"></div><div class=\"line\">6a5819e merged bug <span class=\"built_in\">fix</span> <span class=\"number\">101</span></div><div class=\"line\">cc17032 <span class=\"built_in\">fix</span> bug <span class=\"number\">101</span></div><div class=\"line\">7825a50 merge with no-ff</div><div class=\"line\"><span class=\"number\">6224937</span> add merge</div><div class=\"line\">59bc1cb conflict fixed</div><div class=\"line\"><span class=\"number\">400b400</span> &amp; simple</div><div class=\"line\">75a857c AND simple</div><div class=\"line\">fec145a branch test</div><div class=\"line\">d17efd8 <span class=\"built_in\">remove</span> test.txt</div><div class=\"line\">...</div></pre></td></tr></table></figure></p>\n<p>比方说要对<strong>add merge</strong>这次提交打标签，它对应的<strong>commit id</strong>是6224937，敲入命令：<br><code>git tag v0.9 6224937</code></p>\n<p>还可以创建带有说明的标签，用<strong>-a</strong>指定标签名，<strong>-m</strong>指定说明文字：<br><code>git tag -a v0.1 -m &quot;version 0.1 released&quot; 3628164</code></p>\n<p>查看所有标签：<code>git tag</code></p>\n<p>注意，标签不是按时间顺序列出，而是按字母排序的。可以用<code>git show &lt;tagname&gt;</code>查看标签详细信息。</p>\n<p>还可以通过<strong>-s</strong>用私钥签名一个标签：<br><code>git tag -s v0.2 -m &quot;signed version 0.2 released&quot; fec145a</code>(原来的-a换为-s)</p>\n<p>签名采用PGP签名，因此，必须首先安装gpg（<strong>GnuPG</strong>），如果没有找到gpg，或者没有gpg密钥对，就会报错：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">gpg: signing failed: secret key not available</div><div class=\"line\"><span class=\"keyword\">error: </span>gpg failed to sign the data</div><div class=\"line\"><span class=\"keyword\">error: </span>unable to sign the tag</div></pre></td></tr></table></figure></p>\n<p>如果报错，请参考<strong>GnuPG</strong>帮助文档配置Key。如果签名不成功可以加<strong>-u</strong> 参数，详见：<a href=\"http://airk000.github.io/git/2013/09/30/git-tag-with-gpg-key\">http://airk000.github.io/git/2013/09/30/git-tag-with-gpg-key</a></p>\n<p><code>git show &lt;tagname&gt;</code>也可以看到PGP的签名信息：<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">-<span class=\"ruby\">----<span class=\"keyword\">BEGIN</span> PGP SIGNATURE-----</div><div class=\"line\"></span>Version: GnuPG v1.4.12 (Darwin)</div><div class=\"line\"></div><div class=\"line\">iQEcBAABAgAGBQJSGpMhAAoJEPUxHyDAhBpT4QQIAKeHfR3bo...</div><div class=\"line\">-<span class=\"ruby\">----<span class=\"keyword\">END</span> PGP SIGNATURE-----</span></div></pre></td></tr></table></figure></p>\n<p>用PGP签名的标签是不可伪造的，因为可以验证PGP签名。验证签名的方法比较复杂，这里就不介绍了。</p>\n<h2 id=\"操作标签\"><a href=\"#操作标签\" class=\"headerlink\" title=\"操作标签\"></a>操作标签</h2><p><code>git tag -d &lt;tagname&gt;</code>可以删除一个本地标签。<br><code>git push origin &lt;tagname&gt;</code>可以推送一个本地标签到远程库。<br><code>git push origin --tags</code>可以推送全部未推送过的本地标签到远程库。</p>\n<p>删除时先删除本地对应的标签，再运行命令<code>git push origin :refs/tags/&lt;tagname&gt;</code>删除一个远程标签。</p>\n<hr>\n<h1 id=\"分支\"><a href=\"#分支\" class=\"headerlink\" title=\"分支\"></a>分支</h1><p>创建分支可以在分支上工作而不影响master分支，当分支工作完成时再合并到master分支上。</p>\n<p>一般流程：</p>\n<ul>\n<li>1.先查看分支：<code>git branch</code></li>\n<li>2.创建+切换分支：<code>git checkout -b &lt;分支name&gt;</code>等价于：<code>创建分支：git branch &lt;分支name&gt;</code>+<code>切换分支：git checkout &lt;分支name&gt;</code></li>\n<li>3.查看当前分支：<code>git branch</code></li>\n<li>4.在<strong>新建分支上进行工作</strong>，工作完成时。切换回主分支：<code>git checkout master</code></li>\n<li>5.合并某分支到当前分支（当前已切换回master分支了）：<code>git merge &lt;分支name&gt;</code></li>\n<li>6.删除无用分支：<code>git branch -d &lt;分支name&gt;</code></li>\n<li>7.查看当前分支：<code>git branch</code></li>\n</ul>\n<p>只剩master分支啦。</p>\n<p>想要深入了解，参考：</p>\n<p><a href=\"http://backlogtool.com/git-guide/cn/reference/branch.html#sec2\">猴子Git</a>　　<a href=\"http://iissnan.com/progit/html/zh/ch3_2.html\">Pro Git</a>　　<a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000\">廖雪峰Git</a></p>\n<h2 id=\"分支策略\"><a href=\"#分支策略\" class=\"headerlink\" title=\"分支策略\"></a>分支策略</h2><p>在实际开发中，我们应该按照几个基本原则进行分支管理：</p>\n<p>　　首先，<strong>master</strong>分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；平时干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；你和你的小伙伴们每个人都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。<br>所以，团队合作的分支看起来就像这样：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B006.png\" alt=\"\"><br>Git分支十分强大，在团队开发中应该充分应用。合并分支时，加上<strong>--no-ff</strong>参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而<strong>fast forward</strong>合并就看不出来曾经做过合并。</p>\n<h2 id=\"分支管理策略\"><a href=\"#分支管理策略\" class=\"headerlink\" title=\"分支管理策略\"></a>分支管理策略</h2><p>合并分支时，如果可能，Git会用<strong>Fast forward</strong>模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用<strong>Fast forward</strong>模式(加参数--no-ff)，Git就会在<strong>merge</strong>时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p>\n<p>下面来测试一下<strong>--no-ff</strong>方式的<strong>git merge</strong>：</p>\n<p>创建分支、修改文件，提交缓存，切换回master分支，准备合并dev分支，因为本次合并要创建一个新的commit，所以加上<strong>-m</strong>参数，把commit描述写进去。<br><code>git merge --no-ff -m &quot;merge with no-ff&quot; dev</code></p>\n<p>用<strong>git log</strong>看看分支历史：<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">log</span> <span class=\"comment\">--graph --pretty=oneline --abbrev-commit</span></div><div class=\"line\"></div><div class=\"line\">*   <span class=\"number\">7825</span>a50 <span class=\"built_in\">merge</span> <span class=\"keyword\">with</span> no-ff</div><div class=\"line\">|\\</div><div class=\"line\">| * <span class=\"number\">6224937</span> <span class=\"built_in\">add</span> <span class=\"built_in\">merge</span></div><div class=\"line\">|/</div><div class=\"line\">*   <span class=\"number\">59</span>bc1cb conflict fixed</div><div class=\"line\">...</div></pre></td></tr></table></figure></p>\n<h2 id=\"冲突解决\"><a href=\"#冲突解决\" class=\"headerlink\" title=\"冲突解决\"></a>冲突解决</h2><p>当合并出现冲突时，一般要手动解决。<br>直接查看master分支的readme.txt（冲突文件）的内容并修改：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">Git <span class=\"keyword\">is</span> <span class=\"keyword\">a</span> distributed <span class=\"keyword\">version</span> control <span class=\"built_in\">system</span>.</div><div class=\"line\">Git <span class=\"keyword\">is</span> free software distributed under the GPL.</div><div class=\"line\">Git <span class=\"built_in\">has</span> <span class=\"keyword\">a</span> mutable <span class=\"built_in\">index</span> called stage.</div><div class=\"line\">Git tracks <span class=\"keyword\">changes</span> of <span class=\"keyword\">files</span>.</div><div class=\"line\">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</div><div class=\"line\">Creating <span class=\"keyword\">a</span> <span class=\"keyword\">new</span> branch <span class=\"keyword\">is</span> quick &amp; simple.</div><div class=\"line\">=======</div><div class=\"line\">Creating <span class=\"keyword\">a</span> <span class=\"keyword\">new</span> branch <span class=\"keyword\">is</span> quick AND simple.</div><div class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</div></pre></td></tr></table></figure></p>\n<p>修改完毕，再次提交即可。</p>\n<p><strong>Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;标记出不同分支的内容。</strong></p>\n<p>用带参数的git log也可以看到分支的合并情况：<code>git log --graph --pretty=oneline --abbrev-commit</code><br>用git log --graph命令可以看到分支合并图。</p>\n<p>详见：<a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000\">廖雪峰Git解决冲突</a></p>\n<h2 id=\"错误解决\"><a href=\"#错误解决\" class=\"headerlink\" title=\"错误解决\"></a>错误解决</h2><ul>\n<li><p>1.error: src refspec master does not match any.<br>答：目录中没有文件，空目录是不能提交上去的 执行:<code>git commit -m “xxx”</code></p>\n</li>\n<li><p>2.error: insufficient permission for adding an object to repository database ./objects<br>答：服务端没有可写目录的权限［可能不是你的库，或sshkey不对］</p>\n</li>\n<li><p>3.error：fatal: remote origin already exists.<br>答：<code>git remote rm origin</code></p>\n</li>\n<li><p>4.error: failed to push som refs to ……..<br>解决办法：<code>git pull origin master</code><br>答：先pull 下来 再push上去。</p>\n</li>\n<li><p>5.error: failed to push some refs to ‘git@github.com:myleolan/learnpython.git’<br>To prevent you from losing history, non-fast-forward updates were rejected<br>Merge the remote changes before pushing again.  See the ‘Note about<br>fast-forwards’ section of ‘git push --help’ for details.<br>答：是因为远程用web创建的的库和本地不一样。<code>git pull origin master</code> (先pull 下来 再push 上去)</p>\n</li>\n<li><p>6.git push时报错：The requested URL returned error: 403 Forbidden while accessing<br>答：<code>vim /.git/config</code><br>把[remote “origin”]项中<a href=\"https://github.com\">https://github.com</a> 改为<a href=\"https://myleolan@github.com\">https://myleolan@github.com</a><br>就是加上<strong>用户名@</strong>之后再次执行git push 输入密码即可，一般用git协议不会报此错误，地址改为git@github.com:myleolan/XXXX.git</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"Bug分支\"><a href=\"#Bug分支\" class=\"headerlink\" title=\"Bug分支\"></a>Bug分支</h1><p>当你接到一个修复一个代号101的bug的任务时，很自然地，你想创建一个分支issue-101来修复它，但是，等等，当前正在dev上进行的工作还没有提交；并不是你不想提交，而是工作只进行到一半，还没法提交，预计完成还需1天时间。但是，必须在两个小时内修复该bug，怎么办？</p>\n<p>Git还提供了一个<strong>stash</strong>功能，可以把当前工作现场“<strong>储藏</strong>”起来，等以后恢复现场后继续工作：<code>git stash</code>现在，用<strong>git status</strong>查看工作区，就是干净的（除非有没有被Git管理的文件），因此可以放心地创建分支来修复bug。</p>\n<h2 id=\"修复Bug一般流程\"><a href=\"#修复Bug一般流程\" class=\"headerlink\" title=\"修复Bug一般流程\"></a>修复Bug一般流程</h2><p>首先确定要在哪个分支上修复bug，假定需要在master分支上修复，就从master创建临时分支并切换分支：<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout <span class=\"keyword\">master</span></div><div class=\"line\"><span class=\"title\">git</span> checkout -b issue-<span class=\"number\">101</span>   <span class=\"comment\">#创建并切换分支</span></div></pre></td></tr></table></figure></p>\n<p>现在修复bug，需要把“Git is free software …”改为“Git is a free software …”，然后提交：<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> readme.txt </div><div class=\"line\"></span>git commit -m <span class=\"string\">\"fix bug 101\"</span></div></pre></td></tr></table></figure></p>\n<p>修复完成后，<strong>切换到master分支，并完成分支合并</strong>，最后<strong>删除issue-101分支</strong>：<br> <figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout <span class=\"keyword\">master</span></div><div class=\"line\"><span class=\"title\">git</span> merge --no-ff -m <span class=\"string\">\"merged bug fix 101\"</span> issue-<span class=\"number\">101</span>  <span class=\"comment\">#合并分支</span></div><div class=\"line\">git branch -d issue-<span class=\"number\">101</span>  <span class=\"comment\">#删除分支</span></div></pre></td></tr></table></figure></p>\n<p>bug修复了，现在，可以接着回到dev分支干活了！<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout dev</div><div class=\"line\">git status   <span class=\"comment\">#此时可以看到工作区是干净的</span></div><div class=\"line\">git stash <span class=\"built_in\">list</span>  <span class=\"comment\">#查看已储藏的工作现场</span></div><div class=\"line\"></div><div class=\"line\">stash@&#123;<span class=\"number\">0</span>&#125;: WIP <span class=\"keyword\">on</span> dev: <span class=\"number\">6224937</span> add merge</div></pre></td></tr></table></figure></p>\n<p>工作现场还在，Git把<strong>stash</strong>内容存在某个地方了，需要恢复，有两个办法：</p>\n<ul>\n<li>1.用<code>git stash apply</code>恢复，但是恢复后，<strong>stash</strong>内容并不删除，你需要用<code>git stash drop</code>来删除(stash只是临时封存区，建议删除)。</li>\n<li><p>2.用<code>git stash pop</code>恢复的同时把<strong>stash</strong>内容也删了。</p>\n<p>执行<code>git stash pop</code>恢复，再用<code>git stash list</code>查看，就看不到任何stash内容了<br><strong>可以多次stash</strong>，恢复的时候，先用<code>git stash list</code>查看，然后<strong>恢复指定的stash</strong>，用命令：<code>git stash apply stash@{0}</code>  (<strong>stash@{0}</strong>是封存的标识)</p>\n</li>\n</ul>\n<hr>\n<h1 id=\"Feature分支\"><a href=\"#Feature分支\" class=\"headerlink\" title=\"Feature分支\"></a>Feature分支</h1><p>软件开发中，总有无穷无尽的新的功能要不断添加进来。添加一个新功能时，不希望因为一些实验性质的代码，把主分支搞乱了，所以，每添加一个新功能，最好新建一个<strong>feature</strong>分支，在上面<strong>开发，完成后，合并，最后，删除该feature分支</strong>。<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#当前在工作分支dev上。</span></div><div class=\"line\">git checkout -b feature-vulcan(name)  <span class=\"comment\">#创建并切换到该分支</span></div><div class=\"line\"><span class=\"comment\">#修改代码完成之后</span></div><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> vulcan.py</div><div class=\"line\"></span>git status</div><div class=\"line\">git commit -m <span class=\"string\">\"add feature vulcan\"</span></div><div class=\"line\">git checkout dev   <span class=\"comment\">#切回dev，准备合并</span></div><div class=\"line\"><span class=\"comment\">#一切顺利的话，feature分支和bug分支是类似的，合并，然后删除。</span></div><div class=\"line\">执行以下两句就可以完成任务了：</div><div class=\"line\">git merge --no-ff -m <span class=\"string\">\"merged feature-vulcan\"</span> feature-vulcan <span class=\"comment\">#合并分支</span></div><div class=\"line\">git branch -d feature-vulcan   <span class=\"comment\">#删除分支</span></div></pre></td></tr></table></figure></p>\n<p>但是，就在此时，接到上级命令，因经费不足，新功能<strong>必须取消</strong>！虽然白干了，但是这个分支还是必须<strong>就地销毁</strong>：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch -d feature-vulcan</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">error: </span>The branch 'feature-vulcan' is not fully merged.</div><div class=\"line\">If you are sure you want to delete it, run 'git branch -D feature-vulcan'.</div></pre></td></tr></table></figure></p>\n<p>Git提示销毁失败：feature-vulcan分支还没有被合并，如果删除，将丢失掉修改，如果要强行删除，需要使用命令<code>git branch -D feature-vulcan</code></p>\n<p>现在我们强行删除：<code>git branch -D feature-vulcan</code>　OK，现在我们切换回dev分支继续工作。</p>\n<hr>\n<h1 id=\"自定义Git配置-高级\"><a href=\"#自定义Git配置-高级\" class=\"headerlink\" title=\"自定义Git配置(高级)\"></a>自定义Git配置(高级)</h1><p>我们已经配置了<strong>user.name</strong>和<strong>user.email</strong>，实际上，Git还有很多可配置项。</p>\n<h2 id=\"忽略特殊文件\"><a href=\"#忽略特殊文件\" class=\"headerlink\" title=\"忽略特殊文件\"></a>忽略特殊文件</h2><p>有些时候，你必须把某些文件放到Git工作目录中，但又不能提交它们，比如保存了<strong>数据库密码的配置文件</strong>啦，等等，每次<strong>git status</strong>都会显示<strong>Untracked files …</strong>，有强迫症的童鞋心里肯定不爽。好在Git考虑到了大家的感受，这个问题解决起来也很简单，在Git工作区的根目录下创建一个特殊的<strong>.gitignore</strong>文件，然后把要忽略的文件名填进去，Git就会自动忽略这些文件。</p>\n<p>不需要从头写<strong>.gitignore</strong>文件，GitHub已经为我们准备了各种配置文件，只需要组合一下就可以使用了。所有配置文件可以直接在线浏览：<strong><a href=\"https://github.com/github/gitignore\">https://github.com/github/gitignore</a></strong>   已经配置好了要忽略的文件，下载回来要文件名要改为<strong>.gitignore</strong>放在项目根目录下。</p>\n<p><strong>忽略文件的原则是：</strong></p>\n<ol>\n<li>忽略操作系统自动生成的文件，比如缩略图等；</li>\n<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；</li>\n<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</li>\n</ol>\n<p>举个例子：</p>\n<p>假设你在Windows下进行Python开发，Windows会自动在有图片的目录下生成隐藏的缩略图文件，如果有自定义目录，目录下就会有Desktop.ini文件，因此你需要忽略Windows自动生成的垃圾文件；然后，继续忽略Python编译产生的.pyc、.pyo、dist等文件或目录(<strong>忽略文件夹在文件夹名后加/</strong>)</p>\n<p>加上你自己定义的文件，最终得到一个完整的.gitignore文件，内容如下：<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Windows:</div><div class=\"line\">Thumbs.<span class=\"keyword\">db</span></div><div class=\"line\">ehthumbs.<span class=\"keyword\">db</span></div><div class=\"line\">Desktop.ini</div><div class=\"line\"></div><div class=\"line\"># Python:</div><div class=\"line\"><span class=\"comment\">*.py[cod]</span></div><div class=\"line\"><span class=\"comment\">*.so</span></div><div class=\"line\"><span class=\"comment\">*.egg</span></div><div class=\"line\"><span class=\"comment\">*.egg-info</span></div><div class=\"line\">dist</div><div class=\"line\">build</div><div class=\"line\"></div><div class=\"line\"># My configurations:</div><div class=\"line\"><span class=\"keyword\">db</span>.ini</div><div class=\"line\">deploy_key_rsa</div><div class=\"line\">新建文件夹/</div></pre></td></tr></table></figure></p>\n<p>最后一步就是把.gitignore也提交到Git，就完成了！当然<strong>检验.gitignore</strong>是否生效的标准是<strong>git status</strong>命令是不是说working directory clean。</p>\n<p>使用Windows的童鞋注意了，如果你在资源管理器里新建一个<strong>.gitignore</strong>文件，它会非常弱智地提示你必须输入文件名，在第三方文本编辑器里“保存”或者“另存为”就可以把文件保存为.gitignore了。</p>\n<p>有些时候，你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">add</span> App.class</div><div class=\"line\"></div><div class=\"line\">The following paths are ignored <span class=\"keyword\">by</span> <span class=\"literal\">one</span> <span class=\"keyword\">of</span> your .gitignore <span class=\"built_in\">files</span>:</div><div class=\"line\">App.class</div><div class=\"line\">Use -f <span class=\"keyword\">if</span> you really want <span class=\"built_in\">to</span> <span class=\"built_in\">add</span> them.</div></pre></td></tr></table></figure></p>\n<p>如果你确实想添加该文件，可以用<strong>-f</strong>强制添加到Git：<code>git add -f App.class</code></p>\n<p>或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用<code>git check-ignore</code>命令检查：<br><figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git<span class=\"built_in\"> check-ignore </span>-v App.class</div><div class=\"line\"><span class=\"keyword\">.gitignore</span>:3:*.class    App.class</div></pre></td></tr></table></figure></p>\n<p>Git会告诉我们，.gitignore的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。</p>\n<h2 id=\"配置命令别名\"><a href=\"#配置命令别名\" class=\"headerlink\" title=\"配置命令别名\"></a>配置命令别名</h2><p>有没有经常敲错命令？比如git status？status这个单词真心不好记。如果敲<strong>git st</strong>就表示<strong>git status</strong>那就简单多了。<br><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.st status   <span class=\"meta\">#st表示status</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.co checkout <span class=\"meta\">#co表示checkout</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.ci commit   <span class=\"meta\">#ci表示commit</span></div><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">alias</span>.br branch   <span class=\"meta\">#br表示branch</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\"><a href=\"#global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\" class=\"headerlink\" title=\"--global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。\"></a>--global参数是全局参数，这些命令在这台电脑的所有Git仓库下都有用。</h2><p>在”<strong>撤销修改</strong>“一节中，我们知道，命令<code>git reset HEAD file</code>可以把暂存区的修改撤销掉（unstage），重新放回工作区。既然是一个<strong>unstage操作</strong>，就可以配置一个unstage别名：<br><code>git config --global alias.unstage &#39;reset HEAD&#39;</code></p>\n<p>当你敲入命令：<code>git unstage test.py</code>实际上Git执行的是：<code>git reset HEAD test.py</code></p>\n<p>配置一个<strong>git last</strong>，让其显示最后一次提交信息：<code>git config --global alias.last &#39;log -3&#39;</code> (数字代表最近的几次提交);这样，用<code>git last</code>就能显示最近3次的提交：</p>\n<p>甚至还有人丧心病狂地把lg配置成了：<br><figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global alias.lg <span class=\"string\">\"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"</span></div></pre></td></tr></table></figure></p>\n<p>来看看git lg的效果：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B008.png\" alt=\"\"></p>\n<h2 id=\"关于配置文件\"><a href=\"#关于配置文件\" class=\"headerlink\" title=\"关于配置文件\"></a>关于配置文件</h2><p>配置Git的时候，加上<strong>--global</strong>是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。</p>\n<ul>\n<li><p>每个仓库（每个项目）独立的Git配置文件都放在<strong>.git/config</strong>文件中：</p>\n<figure class=\"highlight elixir\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat .git/config </div><div class=\"line\">[core]</div><div class=\"line\">    repositoryformatversion = <span class=\"number\">0</span></div><div class=\"line\">    filemode = <span class=\"keyword\">true</span></div><div class=\"line\">    bare = <span class=\"keyword\">false</span></div><div class=\"line\">    logallrefupdates = <span class=\"keyword\">true</span></div><div class=\"line\">    ignorecase = <span class=\"keyword\">true</span></div><div class=\"line\">    precomposeunicode = <span class=\"keyword\">true</span></div><div class=\"line\">[remote <span class=\"string\">\"origin\"</span>]</div><div class=\"line\">    url = git<span class=\"variable\">@github</span>.<span class=\"symbol\">com:</span>myleolan/learngit.git</div><div class=\"line\">    fetch = +refs/heads/*<span class=\"symbol\">:refs/remotes/origin/*</span></div><div class=\"line\">[branch <span class=\"string\">\"master\"</span>]</div><div class=\"line\">    remote = origin</div><div class=\"line\">    merge = refs/heads/master</div><div class=\"line\">[<span class=\"keyword\">alias</span>]     <span class=\"comment\">#命令别名，要删除别名，直接删掉对应的行即可。</span></div><div class=\"line\">    last = log -<span class=\"number\">1</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>当前用户的Git配置文件放在用户主目录下的一个隐藏文件.gitconfig中：</p>\n<figure class=\"highlight nix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">cat .gitconfig</div><div class=\"line\">[alias]</div><div class=\"line\">    <span class=\"attr\">co</span> = checkout</div><div class=\"line\">    <span class=\"attr\">ci</span> = commit</div><div class=\"line\">    <span class=\"attr\">br</span> = branch</div><div class=\"line\">    <span class=\"attr\">st</span> = status</div><div class=\"line\">[user]</div><div class=\"line\">    <span class=\"attr\">name</span> = Your Name</div><div class=\"line\">    <span class=\"attr\">email</span> = your@email.com</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置(参考第2节 “Git配置”)。</p>\n<hr>\n<h1 id=\"团队协作\"><a href=\"#团队协作\" class=\"headerlink\" title=\"团队协作\"></a>团队协作</h1><h2 id=\"抓取分支\"><a href=\"#抓取分支\" class=\"headerlink\" title=\"抓取分支\"></a>抓取分支</h2><p>多人协作时，大家都会往master和dev分支上推送各自的修改。现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：<br><code>git clone git@github.com:myleolan/learngit.git</code></p>\n<p>当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的<strong>master</strong>分支。可以用<strong>git branch</strong>命令看看；现在，你的小伙伴要在dev分支上开发，就必须<strong>创建远程origin的dev分支到本地</strong>，于是他用命令创建本地dev分支：<code>git checkout -b dev origin/dev</code>　(在origin上创建dev，-b切换到dev分支;如果本地已经有dev分支了，直接切换就好)</p>\n<p>现在，他就可以在dev上继续修改，然后，时不时地把dev分支push到远程：<br><code>git commit -m &quot;add /usr/bin/env&quot;</code></p>\n<p>本地已经有dev分支了就不用创建了，直接执行下面的命令会自动在远程服务器新建dev分支。<br><code>git push origin dev</code>　(把本地dev推到远程origin上，会自动寻找origin的dev分支)</p>\n<p>你的小伙伴已经向<strong>origin/dev</strong>分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">git add hello.py</div><div class=\"line\">git <span class=\"keyword\">commit</span> -m <span class=\"string\">\"add coding: utf-8\"</span></div><div class=\"line\">git push origin dev</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">To</span> git@github.com:myleolan/learngit.git</div><div class=\"line\"> ! [rejected]        dev -&gt; dev (non-<span class=\"keyword\">fast</span>-forward)</div><div class=\"line\"><span class=\"keyword\">error</span>: <span class=\"keyword\">failed</span> <span class=\"keyword\">to</span> push <span class=\"keyword\">some</span> refs <span class=\"keyword\">to</span> <span class=\"string\">'git@github.com:myleolan/learngit.git'</span></div><div class=\"line\">hint: Updates were rejected because the tip <span class=\"keyword\">of</span> your <span class=\"keyword\">current</span> branch <span class=\"keyword\">is</span> behind</div><div class=\"line\">hint: its remote counterpart. <span class=\"keyword\">Merge</span> the remote changes (e.g. <span class=\"string\">'git pull'</span>)</div><div class=\"line\">hint: <span class=\"keyword\">before</span> pushing again.</div><div class=\"line\">hint: See the <span class=\"string\">'Note about fast-forwards'</span> <span class=\"keyword\">in</span> <span class=\"string\">'git push --help'</span> <span class=\"keyword\">for</span> details.</div></pre></td></tr></table></figure></p>\n<p>推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用<strong>git pull</strong>把最新的提交从<strong>origin/dev</strong>抓下来，然后，在本地合并，解决冲突，再推送：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">git pull</div><div class=\"line\"></div><div class=\"line\">remote: Counting object<span class=\"variable\">s:</span> <span class=\"number\">5</span>, done.</div><div class=\"line\">remote: Compressing object<span class=\"variable\">s:</span> <span class=\"number\">100</span>% (<span class=\"number\">2</span>/<span class=\"number\">2</span>), done.</div><div class=\"line\">remote: Total <span class=\"number\">3</span> (delta <span class=\"number\">0</span>), reused <span class=\"number\">3</span> (delta <span class=\"number\">0</span>)</div><div class=\"line\">Unpacking object<span class=\"variable\">s:</span> <span class=\"number\">100</span>% (<span class=\"number\">3</span>/<span class=\"number\">3</span>), done.</div><div class=\"line\">From github.<span class=\"keyword\">com</span>:myleolan/learngit</div><div class=\"line\">   fc38031..<span class=\"number\">291</span>bea8  dev        -&gt; origin/dev</div><div class=\"line\">There <span class=\"keyword\">is</span> <span class=\"keyword\">no</span> tracking information <span class=\"keyword\">for</span> the current branch.</div><div class=\"line\">Please specify which branch you want <span class=\"keyword\">to</span> merge with.</div><div class=\"line\">See git-pull(<span class=\"number\">1</span>) <span class=\"keyword\">for</span> details</div><div class=\"line\">    git pull <span class=\"symbol\">&lt;remote&gt;</span> <span class=\"symbol\">&lt;branch&gt;</span></div><div class=\"line\">If you wish <span class=\"keyword\">to</span> <span class=\"keyword\">set</span> tracking information <span class=\"keyword\">for</span> this branch you can <span class=\"keyword\">do</span> <span class=\"keyword\">so</span> with:</div><div class=\"line\">    git branch --<span class=\"keyword\">set</span>-upstream dev origin/<span class=\"symbol\">&lt;branch&gt;</span></div></pre></td></tr></table></figure></p>\n<p>git pull也失败了，原因是没有指定<strong>本地dev分支</strong>与远程<strong>origin/dev</strong>分支的链接，根据提示，设置dev和origin/dev的链接(绑定这两个分支)：<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch --<span class=\"built_in\">set</span>-upstream <span class=\"built_in\">dev</span> origin/<span class=\"built_in\">dev</span> </div><div class=\"line\">如果git pull还是失败，说明绑定不了。</div><div class=\"line\">试试官方更改的命令：git branch --<span class=\"built_in\">set</span>-upstream-to=origin/<span class=\"built_in\">dev</span> <span class=\"built_in\">dev</span></div></pre></td></tr></table></figure></p>\n<p><code>git pull -f origin master</code>　强制覆盖也行，但很危险。</p>\n<p>再次<strong>git pull</strong>成功，但是合并有冲突，需要手动解决，解决的方法和第12节“解决冲突”完全一样。解决后，提交，再push：<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit -m <span class=\"string\">\"merge &amp; fix hello.py\"</span></div><div class=\"line\">git <span class=\"built_in\">push</span> <span class=\"built_in\">origin</span> dev</div></pre></td></tr></table></figure></p>\n<p><strong>多人协作的工作模式通常是这样：</strong></p>\n<ol>\n<li>首先，可以试图用<code>git push origin branch-name</code>推送自己的修改；</li>\n<li>如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；</li>\n<li>如果合并有冲突，则解决冲突，并在本地提交；</li>\n<li>没有冲突或者解决掉冲突后，再用<code>git push origin branch-name</code>推送就能成功！<br>如果<strong>git pull</strong>提示“<strong>no tracking information</strong>”，则说明本地分支和远程分支的链接关系没有创建，用命令:<br><code>git branch --set-upstream branch-name origin/branch-name</code><br>这就是多人协作的工作模式，一旦熟悉了，就非常简单。</li>\n</ol>\n<h2 id=\"F-amp-Q\"><a href=\"#F-amp-Q\" class=\"headerlink\" title=\"F&amp;Q\"></a>F&amp;Q</h2><p>签出远程分支，出现以下错误：<br>fatal: Cannot update paths and switch to branch ‘develop’ at the same time.<br>解决方法：<br>先<code>git fetch</code>再<code>git checkout -b develop origin/develop</code><br>因为本地还没有”develop”分支信息，需要先fetch或者pull</p>\n<p>假设有人往服务器上推送了一个新的分支，但是我不知道分支的名称是什么，我如何能获取到服务器上的分支列表呢？<br>      a. 你直接去问他<br>      b. 如果用GitHub，直接去网站看<br>      c. <code>git ls-remote --heads origin</code></p>\n<h2 id=\"推送分支\"><a href=\"#推送分支\" class=\"headerlink\" title=\"推送分支\"></a>推送分支</h2><p>推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：<code>git push origin master</code></p>\n<p>如果要推送其他分支，比如dev，就改成：<code>git push origin dev</code></p>\n<p>但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？<br>  ● master分支是主分支，因此要时刻与远程同步；<br>  ● dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；<br>  ● bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；<br>  ● feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。<br>总之，就是在Git中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！</p>\n<hr>\n<h1 id=\"参与开源项目\"><a href=\"#参与开源项目\" class=\"headerlink\" title=\"参与开源项目\"></a>参与开源项目</h1><p>如何参与一个开源项目呢？比如人气极高的<strong>bootstrap</strong>项目，这是一个非常强大的CSS框架，你可以访问它的<strong><a href=\"https://github.com/twbs/bootstrap\">GitHub项目主页</a></strong>，点“<strong>Fork</strong>”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：<code>git clone git@github.com:**your_username**/bootstrap.git</code></p>\n<p>一定要从自己的账号下clone仓库，这样你才能推送修改(在第4节 “创建远程仓库”中结尾就提到了另一种克隆方式)。如果从bootstrap的作者的仓库地址，采用<code>git clone git@github.com:twbs/bootstrap.git</code>的方式克隆，因为没有权限，你将不能推送修改（见第4节 “创建远程仓库”结尾处，<strong>删除.git文件夹</strong>的方法）。</p>\n<p><strong>Bootstrap</strong>的官方仓库twbs/bootstrap、你在GitHub上克隆的仓库<strong>your_username/bootstrap</strong>，以及你自己克隆到本地电脑的仓库，他们的关系就像下图显示的那样：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/git%E6%95%99%E7%A8%8B007.png\" alt=\"\"></p>\n<ul>\n<li>如果你想修复bootstrap的一个bug，或者新增一个功能，立刻就可以开始干活，干完后，往自己的仓库推送。</li>\n<li>如果<strong>你希望bootstrap的官方库能接受你的修改</strong>，你就可以在你的GitHub该项目页上发起一个<strong>pull request</strong>。当然，对方是否接受你的<strong>pull request</strong>就不一定了。</li>\n</ul>\n<hr>\n<h1 id=\"自己搭建Git服务器\"><a href=\"#自己搭建Git服务器\" class=\"headerlink\" title=\"自己搭建Git服务器\"></a>自己搭建Git服务器</h1><p>GitHub就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给GitHub交保护费，那就只能自己搭建一台Git服务器作为私有仓库使用。搭建Git服务器需要准备一台运行Linux的机器，强烈用Ubuntu、Debian或者Centos、redhat，这样，通过几条简单的apt命令就可以完成安装。<br><strong>root登录</strong></p>\n<ul>\n<li><p>第一步，<strong>安装git：</strong><br><code>sudo apt-get install git</code> 或 <code>yum install git</code></p>\n</li>\n<li><p>第二步，<strong>创建一个git用户，用来运行git服务：</strong><br><code>sudo adduser git</code></p>\n</li>\n</ul>\n<ul>\n<li>第三步，<strong>初始化Git仓库：</strong><br>先选定一个目录作为Git仓库，假定是/data/git/learngit.git<br>在/data/git/目录下输入命令：<br><code>sudo git init --bare learngit.git</code></li>\n</ul>\n<p>Git就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。<br><code>sudo chown -R git:git learngit.git</code></p>\n<p>Git服务器就已经搭得差不多了。下面我们在客户端clone一下远程仓库<br><code>git clone git@IP:/data/git/learngit.git</code><br>Cloning into ‘learngit’…<br>The authenticity of host ‘192.168.8.34 (192.168.8.34)’ can’t be established.<br>RSA key fingerprint is 2b:55:45:e7:4c:29:cc:05:33:78:03:bd:a8:cd:08:9d.<br>Are you sure you want to continue connecting (yes/no)? yes<br>Warning: Permanently added ‘192.168.8.34’ (RSA) to the list of known hosts.<br>git@192.168.8.34’s password:<br><strong>能连接但要密码</strong>，接着下一步。</p>\n<ul>\n<li>第四步，<strong>创建证书登录（Git服务器打开RSA认证）</strong>：然后就可以去Git服务器上添加你的公钥用来验证你的信息了。<code>vim /etc/ssh/sshd_config</code>中将RSA认证打开，即：<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">RSAAuthentication</span> <span class=\"literal\">yes</span>     </div><div class=\"line\">PubkeyAuthentication <span class=\"literal\">yes</span>     </div><div class=\"line\">AuthorizedKeysFile  .ssh/authorized_keys</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>这里我们可以看到<strong>公钥存放在.ssh/authorized_keys</strong>文件中。所以我们在<strong>/home/git下创建.ssh目录，然后创建authorized_keys文件</strong>，收集所有需要登录的用户的公钥，就是他们自己的id_rsa.pub文件，把所有公钥导入到<strong>/home/git/.ssh/authorized_keys文件里，一行一个。</strong><br>此时再次连接已经可以免密钥登录啦。</p>\n<ul>\n<li>第五步，<strong>禁用shell登录：</strong><br>出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过<br>编辑/etc/passwd文件完成。找到类似下面的一行：<br><code>git:x:1001:1001:,,,:/home/git:/bin/bash</code><br>改为：<br><code>git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</code></li>\n</ul>\n<p>这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。</p>\n<ul>\n<li>第六步，<strong>克隆远程仓库：</strong><br>现在，可以通过git clone命令克隆远程仓库了，在各自的电脑上运行：<br><code>git clone git@IP:/data/git/learngit.git</code><br>Cloning into ‘sample’…<br>warning: You appear to have cloned an empty repository.<br>剩下的推送就简单了。</li>\n</ul>\n<p><strong>管理公钥</strong></p>\n<p>如果团队很小，把每个人的公钥收集起来放到服务器的/home/git/.ssh/authorized_keys文件里就是可行的。如果团队有几百号人，就没法这么玩了，这时，可以用<strong>Gitosis</strong>来管理公钥。<br>这里我们不介绍怎么玩Gitosis了，几百号人的团队基本都在500强了，相信找个高水平的Linux管理员问题不大。管理公钥也可用<strong>Gitolite</strong><br><strong>管理权限</strong><br>有很多不但视源代码如生命，而且视员工为窃贼的公司，会在版本控制系统里设置一套完善的权限控制，每个人是否有读写权限会精确到每个分支甚至每个目录下。因为Git是为Linux源代码托管而开发的，所以Git也继承了开源社区的精神，不支持权限控制。不过，因为<strong>Git支持钩子（hook）</strong>，所以，可以在服务器端编写一系列脚本来控制提交等操作，达到权限控制的目的。<strong>Gitolite</strong>就是这个工具。<br>这里我们也不介绍Gitolite了，不要把有限的生命浪费到权限斗争中。</p>\n<p>搭建服务器的同时采用Gitolite来管理权限，参考：<br><a href=\"https://my.oschina.net/u/2351685/blog/509322\">https://my.oschina.net/u/2351685/blog/509322</a></p>\n<p>Gitolite的使用，参考：<a href=\"http://www.uml.org.cn/pzgl/201404092.asp\">http://www.uml.org.cn/pzgl/201404092.asp</a></p>\n<hr>\n<h1 id=\"参考资料：\"><a href=\"#参考资料：\" class=\"headerlink\" title=\"参考资料：\"></a>参考资料：</h1><p>连猴子都会的git：<br><a href=\"http://backlogtool.com/git-guide/cn/\">http://backlogtool.com/git-guide/cn/</a></p>\n<p>Pro Git：<a href=\"http://iissnan.com/progit/\">http://iissnan.com/progit/</a><br>廖雪峰git：</p>\n<p><a href=\"http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000\">http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000</a></p>\n<p>外国友人git手册:<br><a href=\"https://pan.baidu.com/s/1kU5OCOB#path=%252Fpub%252Fgit\">https://pan.baidu.com/s/1kU5OCOB#path=%252Fpub%252Fgit</a><br>10个迅速提升你 Git 水平的提示:<br><a href=\"http://www.oschina.net/translate/10-tips-git-next-level\">http://www.oschina.net/translate/10-tips-git-next-level</a></p>\n<hr>\n"},{"title":"群晖DSM_Synology","abbrlink":26301,"date":"2016-11-29T06:04:23.000Z","_content":"\n# 群晖系统配置设置技巧\n\n## **DMS6.0后无法用root登陆的问题**\n\nshell登陆后输入 sudo -i，可切换root账号登陆（root账号密码同admin密码）\n直接输入`chmod 7777 /etc/ssh/sshd_config`然后就可以修改这个文件了，把root登陆那一块被打上了注释符  “//”，删除即可。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161120656.png)\n\n---\n## **DMS6.0后无法用迅雷远程下载（官方不支持了）**\n安装Docker套件，搜索**xware**，安装yinheli/docker-thunder-xware；配置启动时端口什么的都不用管，设置好**挂载目录**就行了，要有**读写权限**！启动后看容器日志，\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161802732.png)\n在迅雷远程下载官网登录账号绑定即可。\n\n---\n## **虚拟机U盘启动无法挂载问题**\n虚拟机U盘启动有两种，一种是直接U盘连接进虚拟机并设置可移动磁盘启动（前提是虚拟机能正常识别到你的U盘）；另一种是对于虚拟机无法识别到U盘的情况，就只能在虚拟机中添加硬盘，在创建新硬盘时有个使用物理磁盘选项，选择它，之后选择物理磁盘时一般最后一个就是你的U盘，最后确定后能看到U盘容量；开机启动提示：![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122419252.png)\n勾选独立，永久模式，即可解决问题。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122615977.png)\n\n---\n## 硬盘分区模式 RAID、SHR、BASIC\nSATA接口数量不多，挂的硬盘不多，但不想RAID的（RAID0不安全，RAID1太浪费，自带的SHR混合模式对数据恢复不利），建议用BASIC方式，一个新硬盘怎么也得3-5年才会出现坏道，用BASIC方式创建ext4或btrfs分区，对于更换硬盘特别方便挂载在其他系统下转移数据。组RAID0的目的在于合并容量和提升速度，一般大于2T家用级以上的的硬盘，读写速度都有100M左右，千兆网口速度也差不多，瓶颈不在硬盘上。\n**群晖双盘位机器SHR、RAID1阵列模式拆分、降级为BASIC教程**参考：\nhttps://www.chiphell.com/thread-1392816-1-1.html\nhttp://support-cn.synology.me/wordpress/?p=589\n\n官网容量计算器：[RAID 容量计算器](https://www.synology.com/zh-cn/support/RAID_calculator)\n\n---\n## 硬盘数据恢复\n当系统或硬盘出现问题导致无法启动时，可以恢复数据，参考：[还原存储在 DiskStation 中的数据](https://www.synology.cn/zh-cn/knowledgebase/faq/579)\n\n---\n## 群晖绑定自己的域名\n方法有很多，可以在DDNS里设置花生壳、万网账号等。\n\n[用NAT123做无公网IP的远程连接](http://post.smzdm.com/p/306444/)\n\n\n---\n# 黑群晖\n一般都是黑群晖的型号都为DS3615xs(高配置)，这样才能适应不同硬件环境。在虚拟机中安装可以设置硬件，很容易洗白；一般家用都是用低配机子安装，这里主要是实体机安装。\n\n如果是虚拟机安装可以用VMware、EXSI、Virtual（[VirtualDSM](https://www.synology.com/zh-cn/support/download/VirtualDSM)）或者Docker（[Docker版的群晖](https://www.synology.com/zh-cn/support/download/DockerDSM)）\n\n黑群晖中**引导**是很重要的。\n引导有Nanoboot、gnoboot和XPEnoboot（xpenology）建议用XPEnoboot，支持的主板多，更新快。\n\n**黑群晖所需工具下载**：\n引导下载：[xpenology](http://xpenology.me/downloads/)  \n写U盘引导工具：[win32diskimager](http://sourceforge.net/projects/win32diskimager/files/latest/download)或[Roadkil DiskImage](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/104059350.exe)\n代码编辑工具：[Notepad++](https://notepad-plus-plus.org/download/v7.2.2.html)或[sublimetext](http://www.sublimetext.com/3)\n启动测试：[Qemu启动测试器](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/105826397.exe)\n\n\n---\n## 黑群晖DSM_5.2\n引导下载：[xpenology官网](http://xpenology.me/downloads/)\n5.2_5592是比较新的版本，也相对稳定一些，5.2_5644和[5.2_5967](http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM5.2-5967/)也是可以的。\n用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用**Qemu启动测试器**测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。\n\n官网下载DSM系统：[DS3615xs](https://www.synology.com/zh-cn/support/download/DS3615xs)下载PAT文件。\n\n**开始安装：**\n如果局域网内只有少量待安装的机子直接浏览器输入：**http://find.synology.com** 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：**http://IP:5000**\n\n当然也可以用群晖官方的管理工具：**群晖助手Synology Assistant**\n[windows](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe)\n[mac](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg)\n[Ubuntu](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb)\n\n---\n## 黑群晖DSM_6.0\n引导下载：[DS3615xs 6.0.2 Jun's Mod V1.01](http://ofyfogrgx.bkt.clouddn.com/DS3615xs%206.0.2%20Jun%27s%20Mod%20V1.01.zip)或[Jun's的网盘](http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM6.02-v1.01/)\n此压缩文件包含了img引导文件和VMware虚拟机配置文件（支持6.0.2_8451），虚拟机配置文件点开即可使用（自己设置网卡桥接并添加硬盘（设置为SATA接口），硬盘空间小于5G无法安装）。img镜像刻录到U盘后是**GPT+BIOS/UEFI**格式的分区，太老的主板可能无法识别到分区。\n\n用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用**Qemu启动测试器**测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。\n\n官网下载DSM系统：[DS3615xs](https://www.synology.com/zh-cn/support/download/DS3615xs)下载PAT文件。\n\n**开始安装：**\n如果局域网内只有少量待安装的机子直接浏览器输入：**http://find.synology.com** 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：**http://IP:5000**\n\n当然也可以用群晖官方的管理工具：**群晖助手Synology Assistant**\n[windows](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe)  |  [mac](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg)  |  [Ubuntu](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb)\n\n新的6.0设定好mac,sn,vid,pid和老的5.2系统一样的话，可以无损数据直接从5.2升级到6.0；个人不建议，有时会出现数据升天的情况。那就有的玩咯，建议全新安装。附升级教程原文：[Migrate from DSM 5.2 to 6.0 - Baremetal](http://xpenology.com/forum/viewtopic.php?f=2&t=22100)\n\n---\n## 洗白\n### 修改引导U盘syslinux.cfg文件\n把U盘插入电脑，查看VID和PID\n**linux**：命令行输入`lsusb`\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/151859616.png)\n\n**mac**：终端输入`system_profiler SPUSBDataType`\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/152000090.png)\n\n**windows**:在设备管理器的属性中，或用什么芯片无忧、芯片精灵等工具都可以看得到。\n\n**SN生成并计算Mac**\n1.[群晖所有型号官方SN和MAC生成器(在线版，需翻墙)](https://onedrive.live.com/view.aspx?resid=AFD1164BAADDF81C!168&ithint=file%2cxlsm&app=Excel&authkey=!AAQuOGpVwRe7bu8)\n2.[群晖所有型号官方SN和MAC生成器下载](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/110736454.xlsm)\nExelc打开后启用宏，选择型号后**在空白地方双击生成SN**，记录下来，底部选项卡选择Mac**已经计算出对应了SN的Mac**了，也记录下来备用。\n\n\n在U盘根目录下有个**syslinux.cfg**文件（如果是6.0版本则修改grub下的**grub.cfg**文件），修改该文件的sn、vid、pid、mac的值，三处都要修改,mac1在群晖硬件版本DS3615xs之后，在sn前面，如果多网卡再加上mac2...别忘了空格是整行的没有换行，是编辑器显示区域不够了。\n类似于这样：\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/111813709.png)\n改好后插回机子中启动系统，顺利的话在DSM中看不到此U盘外接设备了，在群晖助手中的MAC和序列号也是对应设定的，这时**Quickconnect ID**已经可以正常使用了。\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/120106459.png)\n\n6.0.x系统在升级过程中，不管是在线升级，还是手动上传pat档，均提示pat损毁，升级失败的问题。修改U盘**grub.cfg**文件中**SataPortMap=x**的值（这是指主板原生SATA接口数，主板固件总线中已经定义了，而不是通过外设方式集成的），默认为1 改成**SataPortMap=2**试试。可以搜索主板厂商去核实主板原生的SATA口的个数，也就是 x 的值，自己对应更改，错误的值可能启动不了系统的。\n\n---\n\n如果要设置网卡远程唤醒（当然路由已经设置了5000端口转发）要刷网卡MAC**（不建议这么做，这里只提供方法，不提供工具，由此造成的任何问题，本人不负责。）**根据网卡型号的不同方法不同，一般有通用的MSDOS工具刷，用软碟通制作MSDOS启动U盘并把MAC刷写工具拷到U盘根目录，插上黑群晖主机启动到DOS，进入U盘根目录命令行刷写MAC（先备份网卡BIOS），一般刷网卡MAC只需要改前面六位就行了(改为00:11:32)，后面的保持原来的不变。刷好后远程唤醒功能就正常使用了。如果没刷成功很可能网卡就废了（用备份的BIOS恢复）。\n\n**启动盘与系统盘集成**可参考：[洗白+启动盘与系统盘集成](http://www.xxxxxbbs.com/thread/95147.html)\n\n---\n### 修改synoinfo.conf（高级定制系统，不建议这么做，除非你是极客）\n**synoinfo.conf文件是整个群晖系统的主要配置文件，几乎所有的网络端口、主板接口、系统功能都在这里设定。配置错误将导致系统崩溃，请谨慎修改。**\n\n---\n#### 修改SATA、eSATA\n开启DSM系统的终端登录功能，自己用shell工具连接群晖主机，账号密码是群晖系统中的用户和密码。\n用admin账户登陆，编辑`vim /etc.defaults/synoinfo.conf`文件。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154631465.png)\n\n* 修改指定的SATA口为eSATA口，这样原来装有资料的硬盘就不用格式化，作为eSATA外接硬盘接入，群晖中SATA设备是不支持NTFS格式的。\n修改**esataportcfg**和**internalportcfg**对应的16进制的值，**esataportcfg**值不够位数就写最后三位；**internalportcfg**值要写全。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154246686.PNG)\n1-12代表1-12号SATA接口，用作群晖系统盘的那个接口必须是SATA接口，必须由群晖系统来初始化硬盘（数据提前做好备份）\n参考：http://www.7po.com/thread-456016-1-1.html\n\n---\n#### 修改网络端口\n* 可以修改默认的管理端口**admin_port=\"5000\"**；及各种端口修改，一般不建议随便修改（部分端口在DSM系统中可以修改）。\n\n\n---\n","source":"_posts/NAS/2016-11-29-群晖DSM-Synology.md","raw":"---\ntitle: 群晖DSM_Synology\ncategories:\n  - NAS\ntags:\n  - 群晖DSM_Synology\nabbrlink: 26301\ndate: 2016-11-29 14:04:23\n---\n\n# 群晖系统配置设置技巧\n\n## **DMS6.0后无法用root登陆的问题**\n\nshell登陆后输入 sudo -i，可切换root账号登陆（root账号密码同admin密码）\n直接输入`chmod 7777 /etc/ssh/sshd_config`然后就可以修改这个文件了，把root登陆那一块被打上了注释符  “//”，删除即可。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161120656.png)\n\n---\n## **DMS6.0后无法用迅雷远程下载（官方不支持了）**\n安装Docker套件，搜索**xware**，安装yinheli/docker-thunder-xware；配置启动时端口什么的都不用管，设置好**挂载目录**就行了，要有**读写权限**！启动后看容器日志，\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161802732.png)\n在迅雷远程下载官网登录账号绑定即可。\n\n---\n## **虚拟机U盘启动无法挂载问题**\n虚拟机U盘启动有两种，一种是直接U盘连接进虚拟机并设置可移动磁盘启动（前提是虚拟机能正常识别到你的U盘）；另一种是对于虚拟机无法识别到U盘的情况，就只能在虚拟机中添加硬盘，在创建新硬盘时有个使用物理磁盘选项，选择它，之后选择物理磁盘时一般最后一个就是你的U盘，最后确定后能看到U盘容量；开机启动提示：![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122419252.png)\n勾选独立，永久模式，即可解决问题。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122615977.png)\n\n---\n## 硬盘分区模式 RAID、SHR、BASIC\nSATA接口数量不多，挂的硬盘不多，但不想RAID的（RAID0不安全，RAID1太浪费，自带的SHR混合模式对数据恢复不利），建议用BASIC方式，一个新硬盘怎么也得3-5年才会出现坏道，用BASIC方式创建ext4或btrfs分区，对于更换硬盘特别方便挂载在其他系统下转移数据。组RAID0的目的在于合并容量和提升速度，一般大于2T家用级以上的的硬盘，读写速度都有100M左右，千兆网口速度也差不多，瓶颈不在硬盘上。\n**群晖双盘位机器SHR、RAID1阵列模式拆分、降级为BASIC教程**参考：\nhttps://www.chiphell.com/thread-1392816-1-1.html\nhttp://support-cn.synology.me/wordpress/?p=589\n\n官网容量计算器：[RAID 容量计算器](https://www.synology.com/zh-cn/support/RAID_calculator)\n\n---\n## 硬盘数据恢复\n当系统或硬盘出现问题导致无法启动时，可以恢复数据，参考：[还原存储在 DiskStation 中的数据](https://www.synology.cn/zh-cn/knowledgebase/faq/579)\n\n---\n## 群晖绑定自己的域名\n方法有很多，可以在DDNS里设置花生壳、万网账号等。\n\n[用NAT123做无公网IP的远程连接](http://post.smzdm.com/p/306444/)\n\n\n---\n# 黑群晖\n一般都是黑群晖的型号都为DS3615xs(高配置)，这样才能适应不同硬件环境。在虚拟机中安装可以设置硬件，很容易洗白；一般家用都是用低配机子安装，这里主要是实体机安装。\n\n如果是虚拟机安装可以用VMware、EXSI、Virtual（[VirtualDSM](https://www.synology.com/zh-cn/support/download/VirtualDSM)）或者Docker（[Docker版的群晖](https://www.synology.com/zh-cn/support/download/DockerDSM)）\n\n黑群晖中**引导**是很重要的。\n引导有Nanoboot、gnoboot和XPEnoboot（xpenology）建议用XPEnoboot，支持的主板多，更新快。\n\n**黑群晖所需工具下载**：\n引导下载：[xpenology](http://xpenology.me/downloads/)  \n写U盘引导工具：[win32diskimager](http://sourceforge.net/projects/win32diskimager/files/latest/download)或[Roadkil DiskImage](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/104059350.exe)\n代码编辑工具：[Notepad++](https://notepad-plus-plus.org/download/v7.2.2.html)或[sublimetext](http://www.sublimetext.com/3)\n启动测试：[Qemu启动测试器](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/105826397.exe)\n\n\n---\n## 黑群晖DSM_5.2\n引导下载：[xpenology官网](http://xpenology.me/downloads/)\n5.2_5592是比较新的版本，也相对稳定一些，5.2_5644和[5.2_5967](http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM5.2-5967/)也是可以的。\n用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用**Qemu启动测试器**测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。\n\n官网下载DSM系统：[DS3615xs](https://www.synology.com/zh-cn/support/download/DS3615xs)下载PAT文件。\n\n**开始安装：**\n如果局域网内只有少量待安装的机子直接浏览器输入：**http://find.synology.com** 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：**http://IP:5000**\n\n当然也可以用群晖官方的管理工具：**群晖助手Synology Assistant**\n[windows](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe)\n[mac](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg)\n[Ubuntu](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb)\n\n---\n## 黑群晖DSM_6.0\n引导下载：[DS3615xs 6.0.2 Jun's Mod V1.01](http://ofyfogrgx.bkt.clouddn.com/DS3615xs%206.0.2%20Jun%27s%20Mod%20V1.01.zip)或[Jun's的网盘](http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM6.02-v1.01/)\n此压缩文件包含了img引导文件和VMware虚拟机配置文件（支持6.0.2_8451），虚拟机配置文件点开即可使用（自己设置网卡桥接并添加硬盘（设置为SATA接口），硬盘空间小于5G无法安装）。img镜像刻录到U盘后是**GPT+BIOS/UEFI**格式的分区，太老的主板可能无法识别到分区。\n\n用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用**Qemu启动测试器**测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。\n\n官网下载DSM系统：[DS3615xs](https://www.synology.com/zh-cn/support/download/DS3615xs)下载PAT文件。\n\n**开始安装：**\n如果局域网内只有少量待安装的机子直接浏览器输入：**http://find.synology.com** 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：**http://IP:5000**\n\n当然也可以用群晖官方的管理工具：**群晖助手Synology Assistant**\n[windows](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe)  |  [mac](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg)  |  [Ubuntu](https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb)\n\n新的6.0设定好mac,sn,vid,pid和老的5.2系统一样的话，可以无损数据直接从5.2升级到6.0；个人不建议，有时会出现数据升天的情况。那就有的玩咯，建议全新安装。附升级教程原文：[Migrate from DSM 5.2 to 6.0 - Baremetal](http://xpenology.com/forum/viewtopic.php?f=2&t=22100)\n\n---\n## 洗白\n### 修改引导U盘syslinux.cfg文件\n把U盘插入电脑，查看VID和PID\n**linux**：命令行输入`lsusb`\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/151859616.png)\n\n**mac**：终端输入`system_profiler SPUSBDataType`\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/152000090.png)\n\n**windows**:在设备管理器的属性中，或用什么芯片无忧、芯片精灵等工具都可以看得到。\n\n**SN生成并计算Mac**\n1.[群晖所有型号官方SN和MAC生成器(在线版，需翻墙)](https://onedrive.live.com/view.aspx?resid=AFD1164BAADDF81C!168&ithint=file%2cxlsm&app=Excel&authkey=!AAQuOGpVwRe7bu8)\n2.[群晖所有型号官方SN和MAC生成器下载](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/110736454.xlsm)\nExelc打开后启用宏，选择型号后**在空白地方双击生成SN**，记录下来，底部选项卡选择Mac**已经计算出对应了SN的Mac**了，也记录下来备用。\n\n\n在U盘根目录下有个**syslinux.cfg**文件（如果是6.0版本则修改grub下的**grub.cfg**文件），修改该文件的sn、vid、pid、mac的值，三处都要修改,mac1在群晖硬件版本DS3615xs之后，在sn前面，如果多网卡再加上mac2...别忘了空格是整行的没有换行，是编辑器显示区域不够了。\n类似于这样：\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/111813709.png)\n改好后插回机子中启动系统，顺利的话在DSM中看不到此U盘外接设备了，在群晖助手中的MAC和序列号也是对应设定的，这时**Quickconnect ID**已经可以正常使用了。\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161202/120106459.png)\n\n6.0.x系统在升级过程中，不管是在线升级，还是手动上传pat档，均提示pat损毁，升级失败的问题。修改U盘**grub.cfg**文件中**SataPortMap=x**的值（这是指主板原生SATA接口数，主板固件总线中已经定义了，而不是通过外设方式集成的），默认为1 改成**SataPortMap=2**试试。可以搜索主板厂商去核实主板原生的SATA口的个数，也就是 x 的值，自己对应更改，错误的值可能启动不了系统的。\n\n---\n\n如果要设置网卡远程唤醒（当然路由已经设置了5000端口转发）要刷网卡MAC**（不建议这么做，这里只提供方法，不提供工具，由此造成的任何问题，本人不负责。）**根据网卡型号的不同方法不同，一般有通用的MSDOS工具刷，用软碟通制作MSDOS启动U盘并把MAC刷写工具拷到U盘根目录，插上黑群晖主机启动到DOS，进入U盘根目录命令行刷写MAC（先备份网卡BIOS），一般刷网卡MAC只需要改前面六位就行了(改为00:11:32)，后面的保持原来的不变。刷好后远程唤醒功能就正常使用了。如果没刷成功很可能网卡就废了（用备份的BIOS恢复）。\n\n**启动盘与系统盘集成**可参考：[洗白+启动盘与系统盘集成](http://www.xxxxxbbs.com/thread/95147.html)\n\n---\n### 修改synoinfo.conf（高级定制系统，不建议这么做，除非你是极客）\n**synoinfo.conf文件是整个群晖系统的主要配置文件，几乎所有的网络端口、主板接口、系统功能都在这里设定。配置错误将导致系统崩溃，请谨慎修改。**\n\n---\n#### 修改SATA、eSATA\n开启DSM系统的终端登录功能，自己用shell工具连接群晖主机，账号密码是群晖系统中的用户和密码。\n用admin账户登陆，编辑`vim /etc.defaults/synoinfo.conf`文件。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154631465.png)\n\n* 修改指定的SATA口为eSATA口，这样原来装有资料的硬盘就不用格式化，作为eSATA外接硬盘接入，群晖中SATA设备是不支持NTFS格式的。\n修改**esataportcfg**和**internalportcfg**对应的16进制的值，**esataportcfg**值不够位数就写最后三位；**internalportcfg**值要写全。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154246686.PNG)\n1-12代表1-12号SATA接口，用作群晖系统盘的那个接口必须是SATA接口，必须由群晖系统来初始化硬盘（数据提前做好备份）\n参考：http://www.7po.com/thread-456016-1-1.html\n\n---\n#### 修改网络端口\n* 可以修改默认的管理端口**admin_port=\"5000\"**；及各种端口修改，一般不建议随便修改（部分端口在DSM系统中可以修改）。\n\n\n---\n","slug":"NAS-2016-11-29-群晖DSM-Synology","published":1,"updated":"2016-12-05T01:44:56.026Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjky000kd8pk460sjhts","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"群晖系统配置设置技巧\"><a href=\"#群晖系统配置设置技巧\" class=\"headerlink\" title=\"群晖系统配置设置技巧\"></a>群晖系统配置设置技巧</h1><h2 id=\"DMS6-0后无法用root登陆的问题\"><a href=\"#DMS6-0后无法用root登陆的问题\" class=\"headerlink\" title=\"DMS6.0后无法用root登陆的问题\"></a><strong>DMS6.0后无法用root登陆的问题</strong></h2><p>shell登陆后输入 sudo -i，可切换root账号登陆（root账号密码同admin密码）<br>直接输入<code>chmod 7777 /etc/ssh/sshd_config</code>然后就可以修改这个文件了，把root登陆那一块被打上了注释符  “//”，删除即可。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161120656.png\" alt=\"mark\"></p>\n<hr>\n<h2 id=\"DMS6-0后无法用迅雷远程下载（官方不支持了）\"><a href=\"#DMS6-0后无法用迅雷远程下载（官方不支持了）\" class=\"headerlink\" title=\"DMS6.0后无法用迅雷远程下载（官方不支持了）\"></a><strong>DMS6.0后无法用迅雷远程下载（官方不支持了）</strong></h2><p>安装Docker套件，搜索<strong>xware</strong>，安装yinheli/docker-thunder-xware；配置启动时端口什么的都不用管，设置好<strong>挂载目录</strong>就行了，要有<strong>读写权限</strong>！启动后看容器日志，<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161802732.png\" alt=\"mark\"><br>在迅雷远程下载官网登录账号绑定即可。</p>\n<hr>\n<h2 id=\"虚拟机U盘启动无法挂载问题\"><a href=\"#虚拟机U盘启动无法挂载问题\" class=\"headerlink\" title=\"虚拟机U盘启动无法挂载问题\"></a><strong>虚拟机U盘启动无法挂载问题</strong></h2><p>虚拟机U盘启动有两种，一种是直接U盘连接进虚拟机并设置可移动磁盘启动（前提是虚拟机能正常识别到你的U盘）；另一种是对于虚拟机无法识别到U盘的情况，就只能在虚拟机中添加硬盘，在创建新硬盘时有个使用物理磁盘选项，选择它，之后选择物理磁盘时一般最后一个就是你的U盘，最后确定后能看到U盘容量；开机启动提示：<img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122419252.png\" alt=\"mark\"><br>勾选独立，永久模式，即可解决问题。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122615977.png\" alt=\"mark\"></p>\n<hr>\n<h2 id=\"硬盘分区模式-RAID、SHR、BASIC\"><a href=\"#硬盘分区模式-RAID、SHR、BASIC\" class=\"headerlink\" title=\"硬盘分区模式 RAID、SHR、BASIC\"></a>硬盘分区模式 RAID、SHR、BASIC</h2><p>SATA接口数量不多，挂的硬盘不多，但不想RAID的（RAID0不安全，RAID1太浪费，自带的SHR混合模式对数据恢复不利），建议用BASIC方式，一个新硬盘怎么也得3-5年才会出现坏道，用BASIC方式创建ext4或btrfs分区，对于更换硬盘特别方便挂载在其他系统下转移数据。组RAID0的目的在于合并容量和提升速度，一般大于2T家用级以上的的硬盘，读写速度都有100M左右，千兆网口速度也差不多，瓶颈不在硬盘上。<br><strong>群晖双盘位机器SHR、RAID1阵列模式拆分、降级为BASIC教程</strong>参考：<br><a href=\"https://www.chiphell.com/thread-1392816-1-1.html\" target=\"_blank\" rel=\"external\">https://www.chiphell.com/thread-1392816-1-1.html</a><br><a href=\"http://support-cn.synology.me/wordpress/?p=589\" target=\"_blank\" rel=\"external\">http://support-cn.synology.me/wordpress/?p=589</a></p>\n<p>官网容量计算器：<a href=\"https://www.synology.com/zh-cn/support/RAID_calculator\" target=\"_blank\" rel=\"external\">RAID 容量计算器</a></p>\n<hr>\n<h2 id=\"硬盘数据恢复\"><a href=\"#硬盘数据恢复\" class=\"headerlink\" title=\"硬盘数据恢复\"></a>硬盘数据恢复</h2><p>当系统或硬盘出现问题导致无法启动时，可以恢复数据，参考：<a href=\"https://www.synology.cn/zh-cn/knowledgebase/faq/579\" target=\"_blank\" rel=\"external\">还原存储在 DiskStation 中的数据</a></p>\n<hr>\n<h2 id=\"群晖绑定自己的域名\"><a href=\"#群晖绑定自己的域名\" class=\"headerlink\" title=\"群晖绑定自己的域名\"></a>群晖绑定自己的域名</h2><p>方法有很多，可以在DDNS里设置花生壳、万网账号等。</p>\n<p><a href=\"http://post.smzdm.com/p/306444/\" target=\"_blank\" rel=\"external\">用NAT123做无公网IP的远程连接</a></p>\n<hr>\n<h1 id=\"黑群晖\"><a href=\"#黑群晖\" class=\"headerlink\" title=\"黑群晖\"></a>黑群晖</h1><p>一般都是黑群晖的型号都为DS3615xs(高配置)，这样才能适应不同硬件环境。在虚拟机中安装可以设置硬件，很容易洗白；一般家用都是用低配机子安装，这里主要是实体机安装。</p>\n<p>如果是虚拟机安装可以用VMware、EXSI、Virtual（<a href=\"https://www.synology.com/zh-cn/support/download/VirtualDSM\" target=\"_blank\" rel=\"external\">VirtualDSM</a>）或者Docker（<a href=\"https://www.synology.com/zh-cn/support/download/DockerDSM\" target=\"_blank\" rel=\"external\">Docker版的群晖</a>）</p>\n<p>黑群晖中<strong>引导</strong>是很重要的。<br>引导有Nanoboot、gnoboot和XPEnoboot（xpenology）建议用XPEnoboot，支持的主板多，更新快。</p>\n<p><strong>黑群晖所需工具下载</strong>：<br>引导下载：<a href=\"http://xpenology.me/downloads/\" target=\"_blank\" rel=\"external\">xpenology</a><br>写U盘引导工具：<a href=\"http://sourceforge.net/projects/win32diskimager/files/latest/download\" target=\"_blank\" rel=\"external\">win32diskimager</a>或<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/104059350.exe\" target=\"_blank\" rel=\"external\">Roadkil DiskImage</a><br>代码编辑工具：<a href=\"https://notepad-plus-plus.org/download/v7.2.2.html\" target=\"_blank\" rel=\"external\">Notepad++</a>或<a href=\"http://www.sublimetext.com/3\" target=\"_blank\" rel=\"external\">sublimetext</a><br>启动测试：<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/105826397.exe\" target=\"_blank\" rel=\"external\">Qemu启动测试器</a></p>\n<hr>\n<h2 id=\"黑群晖DSM-5-2\"><a href=\"#黑群晖DSM-5-2\" class=\"headerlink\" title=\"黑群晖DSM_5.2\"></a>黑群晖DSM_5.2</h2><p>引导下载：<a href=\"http://xpenology.me/downloads/\" target=\"_blank\" rel=\"external\">xpenology官网</a><br>5.2_5592是比较新的版本，也相对稳定一些，5.2_5644和<a href=\"http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM5.2-5967/\" target=\"_blank\" rel=\"external\">5.2_5967</a>也是可以的。<br>用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用<strong>Qemu启动测试器</strong>测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。</p>\n<p>官网下载DSM系统：<a href=\"https://www.synology.com/zh-cn/support/download/DS3615xs\" target=\"_blank\" rel=\"external\">DS3615xs</a>下载PAT文件。</p>\n<p><strong>开始安装：</strong><br>如果局域网内只有少量待安装的机子直接浏览器输入：<strong><a href=\"http://find.synology.com\" target=\"_blank\" rel=\"external\">http://find.synology.com</a></strong> 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：<strong><a href=\"http://IP:5000\" target=\"_blank\" rel=\"external\">http://IP:5000</a></strong></p>\n<p>当然也可以用群晖官方的管理工具：<strong>群晖助手Synology Assistant</strong><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe\" target=\"_blank\" rel=\"external\">windows</a><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg\" target=\"_blank\" rel=\"external\">mac</a><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb\" target=\"_blank\" rel=\"external\">Ubuntu</a></p>\n<hr>\n<h2 id=\"黑群晖DSM-6-0\"><a href=\"#黑群晖DSM-6-0\" class=\"headerlink\" title=\"黑群晖DSM_6.0\"></a>黑群晖DSM_6.0</h2><p>引导下载：<a href=\"http://ofyfogrgx.bkt.clouddn.com/DS3615xs%206.0.2%20Jun%27s%20Mod%20V1.01.zip\" target=\"_blank\" rel=\"external\">DS3615xs 6.0.2 Jun’s Mod V1.01</a>或<a href=\"http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM6.02-v1.01/\" target=\"_blank\" rel=\"external\">Jun’s的网盘</a><br>此压缩文件包含了img引导文件和VMware虚拟机配置文件（支持6.0.2_8451），虚拟机配置文件点开即可使用（自己设置网卡桥接并添加硬盘（设置为SATA接口），硬盘空间小于5G无法安装）。img镜像刻录到U盘后是<strong>GPT+BIOS/UEFI</strong>格式的分区，太老的主板可能无法识别到分区。</p>\n<p>用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用<strong>Qemu启动测试器</strong>测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。</p>\n<p>官网下载DSM系统：<a href=\"https://www.synology.com/zh-cn/support/download/DS3615xs\" target=\"_blank\" rel=\"external\">DS3615xs</a>下载PAT文件。</p>\n<p><strong>开始安装：</strong><br>如果局域网内只有少量待安装的机子直接浏览器输入：<strong><a href=\"http://find.synology.com\" target=\"_blank\" rel=\"external\">http://find.synology.com</a></strong> 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：<strong><a href=\"http://IP:5000\" target=\"_blank\" rel=\"external\">http://IP:5000</a></strong></p>\n<p>当然也可以用群晖官方的管理工具：<strong>群晖助手Synology Assistant</strong><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe\" target=\"_blank\" rel=\"external\">windows</a>  |  <a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg\" target=\"_blank\" rel=\"external\">mac</a>  |  <a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb\" target=\"_blank\" rel=\"external\">Ubuntu</a></p>\n<p>新的6.0设定好mac,sn,vid,pid和老的5.2系统一样的话，可以无损数据直接从5.2升级到6.0；个人不建议，有时会出现数据升天的情况。那就有的玩咯，建议全新安装。附升级教程原文：<a href=\"http://xpenology.com/forum/viewtopic.php?f=2&amp;t=22100\" target=\"_blank\" rel=\"external\">Migrate from DSM 5.2 to 6.0 - Baremetal</a></p>\n<hr>\n<h2 id=\"洗白\"><a href=\"#洗白\" class=\"headerlink\" title=\"洗白\"></a>洗白</h2><h3 id=\"修改引导U盘syslinux-cfg文件\"><a href=\"#修改引导U盘syslinux-cfg文件\" class=\"headerlink\" title=\"修改引导U盘syslinux.cfg文件\"></a>修改引导U盘syslinux.cfg文件</h3><p>把U盘插入电脑，查看VID和PID<br><strong>linux</strong>：命令行输入<code>lsusb</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/151859616.png\" alt=\"mark\"></p>\n<p><strong>mac</strong>：终端输入<code>system_profiler SPUSBDataType</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/152000090.png\" alt=\"mark\"></p>\n<p><strong>windows</strong>:在设备管理器的属性中，或用什么芯片无忧、芯片精灵等工具都可以看得到。</p>\n<p><strong>SN生成并计算Mac</strong><br>1.<a href=\"https://onedrive.live.com/view.aspx?resid=AFD1164BAADDF81C!168&amp;ithint=file%2cxlsm&amp;app=Excel&amp;authkey=!AAQuOGpVwRe7bu8\" target=\"_blank\" rel=\"external\">群晖所有型号官方SN和MAC生成器(在线版，需翻墙)</a><br>2.<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/110736454.xlsm\" target=\"_blank\" rel=\"external\">群晖所有型号官方SN和MAC生成器下载</a><br>Exelc打开后启用宏，选择型号后<strong>在空白地方双击生成SN</strong>，记录下来，底部选项卡选择Mac<strong>已经计算出对应了SN的Mac</strong>了，也记录下来备用。</p>\n<p>在U盘根目录下有个<strong>syslinux.cfg</strong>文件（如果是6.0版本则修改grub下的<strong>grub.cfg</strong>文件），修改该文件的sn、vid、pid、mac的值，三处都要修改,mac1在群晖硬件版本DS3615xs之后，在sn前面，如果多网卡再加上mac2…别忘了空格是整行的没有换行，是编辑器显示区域不够了。<br>类似于这样：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/111813709.png\" alt=\"mark\"><br>改好后插回机子中启动系统，顺利的话在DSM中看不到此U盘外接设备了，在群晖助手中的MAC和序列号也是对应设定的，这时<strong>Quickconnect ID</strong>已经可以正常使用了。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/120106459.png\" alt=\"\"></p>\n<p>6.0.x系统在升级过程中，不管是在线升级，还是手动上传pat档，均提示pat损毁，升级失败的问题。修改U盘<strong>grub.cfg</strong>文件中<strong>SataPortMap=x</strong>的值（这是指主板原生SATA接口数，主板固件总线中已经定义了，而不是通过外设方式集成的），默认为1 改成<strong>SataPortMap=2</strong>试试。可以搜索主板厂商去核实主板原生的SATA口的个数，也就是 x 的值，自己对应更改，错误的值可能启动不了系统的。</p>\n<hr>\n<p>如果要设置网卡远程唤醒（当然路由已经设置了5000端口转发）要刷网卡MAC<strong>（不建议这么做，这里只提供方法，不提供工具，由此造成的任何问题，本人不负责。）</strong>根据网卡型号的不同方法不同，一般有通用的MSDOS工具刷，用软碟通制作MSDOS启动U盘并把MAC刷写工具拷到U盘根目录，插上黑群晖主机启动到DOS，进入U盘根目录命令行刷写MAC（先备份网卡BIOS），一般刷网卡MAC只需要改前面六位就行了(改为00:11:32)，后面的保持原来的不变。刷好后远程唤醒功能就正常使用了。如果没刷成功很可能网卡就废了（用备份的BIOS恢复）。</p>\n<p><strong>启动盘与系统盘集成</strong>可参考：<a href=\"http://www.xxxxxbbs.com/thread/95147.html\" target=\"_blank\" rel=\"external\">洗白+启动盘与系统盘集成</a></p>\n<hr>\n<h3 id=\"修改synoinfo-conf（高级定制系统，不建议这么做，除非你是极客）\"><a href=\"#修改synoinfo-conf（高级定制系统，不建议这么做，除非你是极客）\" class=\"headerlink\" title=\"修改synoinfo.conf（高级定制系统，不建议这么做，除非你是极客）\"></a>修改synoinfo.conf（高级定制系统，不建议这么做，除非你是极客）</h3><p><strong>synoinfo.conf文件是整个群晖系统的主要配置文件，几乎所有的网络端口、主板接口、系统功能都在这里设定。配置错误将导致系统崩溃，请谨慎修改。</strong></p>\n<hr>\n<h4 id=\"修改SATA、eSATA\"><a href=\"#修改SATA、eSATA\" class=\"headerlink\" title=\"修改SATA、eSATA\"></a>修改SATA、eSATA</h4><p>开启DSM系统的终端登录功能，自己用shell工具连接群晖主机，账号密码是群晖系统中的用户和密码。<br>用admin账户登陆，编辑<code>vim /etc.defaults/synoinfo.conf</code>文件。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154631465.png\" alt=\"mark\"></p>\n<ul>\n<li>修改指定的SATA口为eSATA口，这样原来装有资料的硬盘就不用格式化，作为eSATA外接硬盘接入，群晖中SATA设备是不支持NTFS格式的。<br>修改<strong>esataportcfg</strong>和<strong>internalportcfg</strong>对应的16进制的值，<strong>esataportcfg</strong>值不够位数就写最后三位；<strong>internalportcfg</strong>值要写全。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154246686.PNG\" alt=\"mark\"><br>1-12代表1-12号SATA接口，用作群晖系统盘的那个接口必须是SATA接口，必须由群晖系统来初始化硬盘（数据提前做好备份）<br>参考：<a href=\"http://www.7po.com/thread-456016-1-1.html\" target=\"_blank\" rel=\"external\">http://www.7po.com/thread-456016-1-1.html</a></li>\n</ul>\n<hr>\n<h4 id=\"修改网络端口\"><a href=\"#修改网络端口\" class=\"headerlink\" title=\"修改网络端口\"></a>修改网络端口</h4><ul>\n<li>可以修改默认的管理端口<strong>admin_port=”5000”</strong>；及各种端口修改，一般不建议随便修改（部分端口在DSM系统中可以修改）。</li>\n</ul>\n<hr>\n","excerpt":"","more":"<h1 id=\"群晖系统配置设置技巧\"><a href=\"#群晖系统配置设置技巧\" class=\"headerlink\" title=\"群晖系统配置设置技巧\"></a>群晖系统配置设置技巧</h1><h2 id=\"DMS6-0后无法用root登陆的问题\"><a href=\"#DMS6-0后无法用root登陆的问题\" class=\"headerlink\" title=\"DMS6.0后无法用root登陆的问题\"></a><strong>DMS6.0后无法用root登陆的问题</strong></h2><p>shell登陆后输入 sudo -i，可切换root账号登陆（root账号密码同admin密码）<br>直接输入<code>chmod 7777 /etc/ssh/sshd_config</code>然后就可以修改这个文件了，把root登陆那一块被打上了注释符  “//”，删除即可。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161120656.png\" alt=\"mark\"></p>\n<hr>\n<h2 id=\"DMS6-0后无法用迅雷远程下载（官方不支持了）\"><a href=\"#DMS6-0后无法用迅雷远程下载（官方不支持了）\" class=\"headerlink\" title=\"DMS6.0后无法用迅雷远程下载（官方不支持了）\"></a><strong>DMS6.0后无法用迅雷远程下载（官方不支持了）</strong></h2><p>安装Docker套件，搜索<strong>xware</strong>，安装yinheli/docker-thunder-xware；配置启动时端口什么的都不用管，设置好<strong>挂载目录</strong>就行了，要有<strong>读写权限</strong>！启动后看容器日志，<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/161802732.png\" alt=\"mark\"><br>在迅雷远程下载官网登录账号绑定即可。</p>\n<hr>\n<h2 id=\"虚拟机U盘启动无法挂载问题\"><a href=\"#虚拟机U盘启动无法挂载问题\" class=\"headerlink\" title=\"虚拟机U盘启动无法挂载问题\"></a><strong>虚拟机U盘启动无法挂载问题</strong></h2><p>虚拟机U盘启动有两种，一种是直接U盘连接进虚拟机并设置可移动磁盘启动（前提是虚拟机能正常识别到你的U盘）；另一种是对于虚拟机无法识别到U盘的情况，就只能在虚拟机中添加硬盘，在创建新硬盘时有个使用物理磁盘选项，选择它，之后选择物理磁盘时一般最后一个就是你的U盘，最后确定后能看到U盘容量；开机启动提示：<img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122419252.png\" alt=\"mark\"><br>勾选独立，永久模式，即可解决问题。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/122615977.png\" alt=\"mark\"></p>\n<hr>\n<h2 id=\"硬盘分区模式-RAID、SHR、BASIC\"><a href=\"#硬盘分区模式-RAID、SHR、BASIC\" class=\"headerlink\" title=\"硬盘分区模式 RAID、SHR、BASIC\"></a>硬盘分区模式 RAID、SHR、BASIC</h2><p>SATA接口数量不多，挂的硬盘不多，但不想RAID的（RAID0不安全，RAID1太浪费，自带的SHR混合模式对数据恢复不利），建议用BASIC方式，一个新硬盘怎么也得3-5年才会出现坏道，用BASIC方式创建ext4或btrfs分区，对于更换硬盘特别方便挂载在其他系统下转移数据。组RAID0的目的在于合并容量和提升速度，一般大于2T家用级以上的的硬盘，读写速度都有100M左右，千兆网口速度也差不多，瓶颈不在硬盘上。<br><strong>群晖双盘位机器SHR、RAID1阵列模式拆分、降级为BASIC教程</strong>参考：<br><a href=\"https://www.chiphell.com/thread-1392816-1-1.html\">https://www.chiphell.com/thread-1392816-1-1.html</a><br><a href=\"http://support-cn.synology.me/wordpress/?p=589\">http://support-cn.synology.me/wordpress/?p=589</a></p>\n<p>官网容量计算器：<a href=\"https://www.synology.com/zh-cn/support/RAID_calculator\">RAID 容量计算器</a></p>\n<hr>\n<h2 id=\"硬盘数据恢复\"><a href=\"#硬盘数据恢复\" class=\"headerlink\" title=\"硬盘数据恢复\"></a>硬盘数据恢复</h2><p>当系统或硬盘出现问题导致无法启动时，可以恢复数据，参考：<a href=\"https://www.synology.cn/zh-cn/knowledgebase/faq/579\">还原存储在 DiskStation 中的数据</a></p>\n<hr>\n<h2 id=\"群晖绑定自己的域名\"><a href=\"#群晖绑定自己的域名\" class=\"headerlink\" title=\"群晖绑定自己的域名\"></a>群晖绑定自己的域名</h2><p>方法有很多，可以在DDNS里设置花生壳、万网账号等。</p>\n<p><a href=\"http://post.smzdm.com/p/306444/\">用NAT123做无公网IP的远程连接</a></p>\n<hr>\n<h1 id=\"黑群晖\"><a href=\"#黑群晖\" class=\"headerlink\" title=\"黑群晖\"></a>黑群晖</h1><p>一般都是黑群晖的型号都为DS3615xs(高配置)，这样才能适应不同硬件环境。在虚拟机中安装可以设置硬件，很容易洗白；一般家用都是用低配机子安装，这里主要是实体机安装。</p>\n<p>如果是虚拟机安装可以用VMware、EXSI、Virtual（<a href=\"https://www.synology.com/zh-cn/support/download/VirtualDSM\">VirtualDSM</a>）或者Docker（<a href=\"https://www.synology.com/zh-cn/support/download/DockerDSM\">Docker版的群晖</a>）</p>\n<p>黑群晖中<strong>引导</strong>是很重要的。<br>引导有Nanoboot、gnoboot和XPEnoboot（xpenology）建议用XPEnoboot，支持的主板多，更新快。</p>\n<p><strong>黑群晖所需工具下载</strong>：<br>引导下载：<a href=\"http://xpenology.me/downloads/\">xpenology</a><br>写U盘引导工具：<a href=\"http://sourceforge.net/projects/win32diskimager/files/latest/download\">win32diskimager</a>或<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/104059350.exe\">Roadkil DiskImage</a><br>代码编辑工具：<a href=\"https://notepad-plus-plus.org/download/v7.2.2.html\">Notepad++</a>或<a href=\"http://www.sublimetext.com/3\">sublimetext</a><br>启动测试：<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/105826397.exe\">Qemu启动测试器</a></p>\n<hr>\n<h2 id=\"黑群晖DSM-5-2\"><a href=\"#黑群晖DSM-5-2\" class=\"headerlink\" title=\"黑群晖DSM_5.2\"></a>黑群晖DSM_5.2</h2><p>引导下载：<a href=\"http://xpenology.me/downloads/\">xpenology官网</a><br>5.2_5592是比较新的版本，也相对稳定一些，5.2_5644和<a href=\"http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM5.2-5967/\">5.2_5967</a>也是可以的。<br>用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用<strong>Qemu启动测试器</strong>测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。</p>\n<p>官网下载DSM系统：<a href=\"https://www.synology.com/zh-cn/support/download/DS3615xs\">DS3615xs</a>下载PAT文件。</p>\n<p><strong>开始安装：</strong><br>如果局域网内只有少量待安装的机子直接浏览器输入：<strong><a href=\"http://find.synology.com\">http://find.synology.com</a></strong> 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：<strong><a href=\"http://IP:5000\">http://IP:5000</a></strong></p>\n<p>当然也可以用群晖官方的管理工具：<strong>群晖助手Synology Assistant</strong><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe\">windows</a><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg\">mac</a><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb\">Ubuntu</a></p>\n<hr>\n<h2 id=\"黑群晖DSM-6-0\"><a href=\"#黑群晖DSM-6-0\" class=\"headerlink\" title=\"黑群晖DSM_6.0\"></a>黑群晖DSM_6.0</h2><p>引导下载：<a href=\"http://ofyfogrgx.bkt.clouddn.com/DS3615xs%206.0.2%20Jun%27s%20Mod%20V1.01.zip\">DS3615xs 6.0.2 Jun’s Mod V1.01</a>或<a href=\"http://source.wifihell.com/8-NAS-BUFFALO/ts5000/DSM6.02-v1.01/\">Jun’s的网盘</a><br>此压缩文件包含了img引导文件和VMware虚拟机配置文件（支持6.0.2_8451），虚拟机配置文件点开即可使用（自己设置网卡桥接并添加硬盘（设置为SATA接口），硬盘空间小于5G无法安装）。img镜像刻录到U盘后是<strong>GPT+BIOS/UEFI</strong>格式的分区，太老的主板可能无法识别到分区。</p>\n<p>用写U盘引导工具，把下载的img镜像文件用工具写进U盘中（U盘数据全无，做好备份），写好后重插U盘，U盘空间显示很小，其他空间被屏蔽掉了。用<strong>Qemu启动测试器</strong>测试一下能否启动，正常就插入主机设置U盘启动（事先没有设置好的要接显示器）。</p>\n<p>官网下载DSM系统：<a href=\"https://www.synology.com/zh-cn/support/download/DS3615xs\">DS3615xs</a>下载PAT文件。</p>\n<p><strong>开始安装：</strong><br>如果局域网内只有少量待安装的机子直接浏览器输入：<strong><a href=\"http://find.synology.com\">http://find.synology.com</a></strong> 即可直接跳转到安装界面（对于黑群晖，用的sn码如果网上有人使用了，可能看到的是别人的机子）。如果你知道机子分配的IP地址也可以输入：<strong><a href=\"http://IP:5000\">http://IP:5000</a></strong></p>\n<p>当然也可以用群晖官方的管理工具：<strong>群晖助手Synology Assistant</strong><br><a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Windows/SynologyAssistantSetup-6.0-7319.exe\">windows</a>  |  <a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Mac/Synology-Assistant-6.0-7319.dmg\">mac</a>  |  <a href=\"https://global.download.synology.com/download/Tools/Assistant/6.0-7319/Ubuntu/x86_64/synology-assistant_6.0-7319_amd64.deb\">Ubuntu</a></p>\n<p>新的6.0设定好mac,sn,vid,pid和老的5.2系统一样的话，可以无损数据直接从5.2升级到6.0；个人不建议，有时会出现数据升天的情况。那就有的玩咯，建议全新安装。附升级教程原文：<a href=\"http://xpenology.com/forum/viewtopic.php?f=2&amp;t=22100\">Migrate from DSM 5.2 to 6.0 - Baremetal</a></p>\n<hr>\n<h2 id=\"洗白\"><a href=\"#洗白\" class=\"headerlink\" title=\"洗白\"></a>洗白</h2><h3 id=\"修改引导U盘syslinux-cfg文件\"><a href=\"#修改引导U盘syslinux-cfg文件\" class=\"headerlink\" title=\"修改引导U盘syslinux.cfg文件\"></a>修改引导U盘syslinux.cfg文件</h3><p>把U盘插入电脑，查看VID和PID<br><strong>linux</strong>：命令行输入<code>lsusb</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/151859616.png\" alt=\"mark\"></p>\n<p><strong>mac</strong>：终端输入<code>system_profiler SPUSBDataType</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/152000090.png\" alt=\"mark\"></p>\n<p><strong>windows</strong>:在设备管理器的属性中，或用什么芯片无忧、芯片精灵等工具都可以看得到。</p>\n<p><strong>SN生成并计算Mac</strong><br>1.<a href=\"https://onedrive.live.com/view.aspx?resid=AFD1164BAADDF81C!168&amp;ithint=file%2cxlsm&amp;app=Excel&amp;authkey=!AAQuOGpVwRe7bu8\">群晖所有型号官方SN和MAC生成器(在线版，需翻墙)</a><br>2.<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/110736454.xlsm\">群晖所有型号官方SN和MAC生成器下载</a><br>Exelc打开后启用宏，选择型号后<strong>在空白地方双击生成SN</strong>，记录下来，底部选项卡选择Mac<strong>已经计算出对应了SN的Mac</strong>了，也记录下来备用。</p>\n<p>在U盘根目录下有个<strong>syslinux.cfg</strong>文件（如果是6.0版本则修改grub下的<strong>grub.cfg</strong>文件），修改该文件的sn、vid、pid、mac的值，三处都要修改,mac1在群晖硬件版本DS3615xs之后，在sn前面，如果多网卡再加上mac2…别忘了空格是整行的没有换行，是编辑器显示区域不够了。<br>类似于这样：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/111813709.png\" alt=\"mark\"><br>改好后插回机子中启动系统，顺利的话在DSM中看不到此U盘外接设备了，在群晖助手中的MAC和序列号也是对应设定的，这时<strong>Quickconnect ID</strong>已经可以正常使用了。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161202/120106459.png\" alt=\"\"></p>\n<p>6.0.x系统在升级过程中，不管是在线升级，还是手动上传pat档，均提示pat损毁，升级失败的问题。修改U盘<strong>grub.cfg</strong>文件中<strong>SataPortMap=x</strong>的值（这是指主板原生SATA接口数，主板固件总线中已经定义了，而不是通过外设方式集成的），默认为1 改成<strong>SataPortMap=2</strong>试试。可以搜索主板厂商去核实主板原生的SATA口的个数，也就是 x 的值，自己对应更改，错误的值可能启动不了系统的。</p>\n<hr>\n<p>如果要设置网卡远程唤醒（当然路由已经设置了5000端口转发）要刷网卡MAC<strong>（不建议这么做，这里只提供方法，不提供工具，由此造成的任何问题，本人不负责。）</strong>根据网卡型号的不同方法不同，一般有通用的MSDOS工具刷，用软碟通制作MSDOS启动U盘并把MAC刷写工具拷到U盘根目录，插上黑群晖主机启动到DOS，进入U盘根目录命令行刷写MAC（先备份网卡BIOS），一般刷网卡MAC只需要改前面六位就行了(改为00:11:32)，后面的保持原来的不变。刷好后远程唤醒功能就正常使用了。如果没刷成功很可能网卡就废了（用备份的BIOS恢复）。</p>\n<p><strong>启动盘与系统盘集成</strong>可参考：<a href=\"http://www.xxxxxbbs.com/thread/95147.html\">洗白+启动盘与系统盘集成</a></p>\n<hr>\n<h3 id=\"修改synoinfo-conf（高级定制系统，不建议这么做，除非你是极客）\"><a href=\"#修改synoinfo-conf（高级定制系统，不建议这么做，除非你是极客）\" class=\"headerlink\" title=\"修改synoinfo.conf（高级定制系统，不建议这么做，除非你是极客）\"></a>修改synoinfo.conf（高级定制系统，不建议这么做，除非你是极客）</h3><p><strong>synoinfo.conf文件是整个群晖系统的主要配置文件，几乎所有的网络端口、主板接口、系统功能都在这里设定。配置错误将导致系统崩溃，请谨慎修改。</strong></p>\n<hr>\n<h4 id=\"修改SATA、eSATA\"><a href=\"#修改SATA、eSATA\" class=\"headerlink\" title=\"修改SATA、eSATA\"></a>修改SATA、eSATA</h4><p>开启DSM系统的终端登录功能，自己用shell工具连接群晖主机，账号密码是群晖系统中的用户和密码。<br>用admin账户登陆，编辑<code>vim /etc.defaults/synoinfo.conf</code>文件。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154631465.png\" alt=\"mark\"></p>\n<ul>\n<li>修改指定的SATA口为eSATA口，这样原来装有资料的硬盘就不用格式化，作为eSATA外接硬盘接入，群晖中SATA设备是不支持NTFS格式的。<br>修改<strong>esataportcfg</strong>和<strong>internalportcfg</strong>对应的16进制的值，<strong>esataportcfg</strong>值不够位数就写最后三位；<strong>internalportcfg</strong>值要写全。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161129/154246686.PNG\" alt=\"mark\"><br>1-12代表1-12号SATA接口，用作群晖系统盘的那个接口必须是SATA接口，必须由群晖系统来初始化硬盘（数据提前做好备份）<br>参考：<a href=\"http://www.7po.com/thread-456016-1-1.html\">http://www.7po.com/thread-456016-1-1.html</a></li>\n</ul>\n<hr>\n<h4 id=\"修改网络端口\"><a href=\"#修改网络端口\" class=\"headerlink\" title=\"修改网络端口\"></a>修改网络端口</h4><ul>\n<li>可以修改默认的管理端口<strong>admin_port=”5000”</strong>；及各种端口修改，一般不建议随便修改（部分端口在DSM系统中可以修改）。</li>\n</ul>\n<hr>\n"},{"title":"穷人VPN","abbrlink":61013,"date":"2016-11-01T08:08:50.000Z","_content":"\n# sshuttle：不需配置的 VPN\n\nsshuttle 被其作者称为 “穷人的 VPN”（A poor man’s instant VPN），甚至不需要远端服务器的 root 权限就可以用（只需要一个普通 SSH 帐号），和在 Mac/Linux 客户端直接用 ssh -D 的方式有点类似。如果不想花钱买 VPN，又懒得自己在 VPS 上安装和设置复杂的 VPN 服务，又不想用 ssh -D 这么朴素的技巧的话可以试一下这个 sshuttle。\n\n按照作者的说法 sshuttle 比 sshd -D 的方式快一点，因为 It’s just data-over-TCP，而不是 TCP-over-TCP，TCP-over-TCP 的方式会带来不必要的性能问题，因为 TCP 本身就是可靠传输协议，保证了包的有序性和无差错，并确保包被接受，如果有包丢失的话 TCP 协议可以自己立即重传弥补，所以没必要两层都 TCP，一层 TCP 就比较安全了。\n\n---\n## 使用：\nsshuttle 的用法很简单，在客户端下载和运行就可以了（需要有 Python 的支持），无需在服务器端做任何配置（但是需要一个 ssh 帐号和 Python 支持）：\n\n安装：\n法1: \n\n`pip install sshuttle`\n\n法2:\n\n```python\ngit clone https://github.com/sshuttle/sshuttle.git\n./setup.py install\n```\n`sshuttle -r username@sshserver 0.0.0.0/0 -vv`\nStarting sshuttle proxy.\nBinding: 12300\nListening on ('127.0.0.1', 12300).\n[local sudo] Password: \nfirewall manager ready.\nc : connecting to server...\n...\n\n成功运行 sshuttle 后会在 Terminal 上看到一些运行时 log：\n![][image-1]\n\n[image-1]:\thttp://ofyfogrgx.bkt.clouddn.com//blog/%E7%A9%B7%E4%BA%BAvpn001.png\n\n---","source":"_posts/VPN_墙/2016-11-01-穷人VPN.md","raw":"---\ntitle: 穷人VPN\ncategories:\n  - VPN\ntags:\n  - 穷人VPN\n  - 免安装VPN\nabbrlink: 61013\ndate: 2016-11-01 16:08:50\n---\n\n# sshuttle：不需配置的 VPN\n\nsshuttle 被其作者称为 “穷人的 VPN”（A poor man’s instant VPN），甚至不需要远端服务器的 root 权限就可以用（只需要一个普通 SSH 帐号），和在 Mac/Linux 客户端直接用 ssh -D 的方式有点类似。如果不想花钱买 VPN，又懒得自己在 VPS 上安装和设置复杂的 VPN 服务，又不想用 ssh -D 这么朴素的技巧的话可以试一下这个 sshuttle。\n\n按照作者的说法 sshuttle 比 sshd -D 的方式快一点，因为 It’s just data-over-TCP，而不是 TCP-over-TCP，TCP-over-TCP 的方式会带来不必要的性能问题，因为 TCP 本身就是可靠传输协议，保证了包的有序性和无差错，并确保包被接受，如果有包丢失的话 TCP 协议可以自己立即重传弥补，所以没必要两层都 TCP，一层 TCP 就比较安全了。\n\n---\n## 使用：\nsshuttle 的用法很简单，在客户端下载和运行就可以了（需要有 Python 的支持），无需在服务器端做任何配置（但是需要一个 ssh 帐号和 Python 支持）：\n\n安装：\n法1: \n\n`pip install sshuttle`\n\n法2:\n\n```python\ngit clone https://github.com/sshuttle/sshuttle.git\n./setup.py install\n```\n`sshuttle -r username@sshserver 0.0.0.0/0 -vv`\nStarting sshuttle proxy.\nBinding: 12300\nListening on ('127.0.0.1', 12300).\n[local sudo] Password: \nfirewall manager ready.\nc : connecting to server...\n...\n\n成功运行 sshuttle 后会在 Terminal 上看到一些运行时 log：\n![][image-1]\n\n[image-1]:\thttp://ofyfogrgx.bkt.clouddn.com//blog/%E7%A9%B7%E4%BA%BAvpn001.png\n\n---","slug":"VPN-墙-2016-11-01-穷人VPN","published":1,"updated":"2016-11-21T02:17:08.837Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjkz000md8pka7t7govc","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"sshuttle：不需配置的-VPN\"><a href=\"#sshuttle：不需配置的-VPN\" class=\"headerlink\" title=\"sshuttle：不需配置的 VPN\"></a>sshuttle：不需配置的 VPN</h1><p>sshuttle 被其作者称为 “穷人的 VPN”（A poor man’s instant VPN），甚至不需要远端服务器的 root 权限就可以用（只需要一个普通 SSH 帐号），和在 Mac/Linux 客户端直接用 ssh -D 的方式有点类似。如果不想花钱买 VPN，又懒得自己在 VPS 上安装和设置复杂的 VPN 服务，又不想用 ssh -D 这么朴素的技巧的话可以试一下这个 sshuttle。</p>\n<p>按照作者的说法 sshuttle 比 sshd -D 的方式快一点，因为 It’s just data-over-TCP，而不是 TCP-over-TCP，TCP-over-TCP 的方式会带来不必要的性能问题，因为 TCP 本身就是可靠传输协议，保证了包的有序性和无差错，并确保包被接受，如果有包丢失的话 TCP 协议可以自己立即重传弥补，所以没必要两层都 TCP，一层 TCP 就比较安全了。</p>\n<hr>\n<h2 id=\"使用：\"><a href=\"#使用：\" class=\"headerlink\" title=\"使用：\"></a>使用：</h2><p>sshuttle 的用法很简单，在客户端下载和运行就可以了（需要有 Python 的支持），无需在服务器端做任何配置（但是需要一个 ssh 帐号和 Python 支持）：</p>\n<p>安装：<br>法1: </p>\n<p><code>pip install sshuttle</code></p>\n<p>法2:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/sshuttle/sshuttle.git</div><div class=\"line\">./setup.py install</div></pre></td></tr></table></figure>\n<p><code>sshuttle -r username@sshserver 0.0.0.0/0 -vv</code><br>Starting sshuttle proxy.<br>Binding: 12300<br>Listening on (‘127.0.0.1’, 12300).<br>[local sudo] Password:<br>firewall manager ready.<br>c : connecting to server…<br>…</p>\n<p>成功运行 sshuttle 后会在 Terminal 上看到一些运行时 log：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%A9%B7%E4%BA%BAvpn001.png\" alt=\"\"></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"sshuttle：不需配置的-VPN\"><a href=\"#sshuttle：不需配置的-VPN\" class=\"headerlink\" title=\"sshuttle：不需配置的 VPN\"></a>sshuttle：不需配置的 VPN</h1><p>sshuttle 被其作者称为 “穷人的 VPN”（A poor man’s instant VPN），甚至不需要远端服务器的 root 权限就可以用（只需要一个普通 SSH 帐号），和在 Mac/Linux 客户端直接用 ssh -D 的方式有点类似。如果不想花钱买 VPN，又懒得自己在 VPS 上安装和设置复杂的 VPN 服务，又不想用 ssh -D 这么朴素的技巧的话可以试一下这个 sshuttle。</p>\n<p>按照作者的说法 sshuttle 比 sshd -D 的方式快一点，因为 It’s just data-over-TCP，而不是 TCP-over-TCP，TCP-over-TCP 的方式会带来不必要的性能问题，因为 TCP 本身就是可靠传输协议，保证了包的有序性和无差错，并确保包被接受，如果有包丢失的话 TCP 协议可以自己立即重传弥补，所以没必要两层都 TCP，一层 TCP 就比较安全了。</p>\n<hr>\n<h2 id=\"使用：\"><a href=\"#使用：\" class=\"headerlink\" title=\"使用：\"></a>使用：</h2><p>sshuttle 的用法很简单，在客户端下载和运行就可以了（需要有 Python 的支持），无需在服务器端做任何配置（但是需要一个 ssh 帐号和 Python 支持）：</p>\n<p>安装：<br>法1: </p>\n<p><code>pip install sshuttle</code></p>\n<p>法2:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git clone https://github.com/sshuttle/sshuttle.git</div><div class=\"line\">./setup.py install</div></pre></td></tr></table></figure>\n<p><code>sshuttle -r username@sshserver 0.0.0.0/0 -vv</code><br>Starting sshuttle proxy.<br>Binding: 12300<br>Listening on (‘127.0.0.1’, 12300).<br>[local sudo] Password:<br>firewall manager ready.<br>c : connecting to server…<br>…</p>\n<p>成功运行 sshuttle 后会在 Terminal 上看到一些运行时 log：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%A9%B7%E4%BA%BAvpn001.png\" alt=\"\"></p>\n<hr>\n"},{"layout":"post","title":"OpenResty（高性能web服务器）","abbrlink":29074,"date":"2016-10-31T02:21:24.000Z","_content":"\n# OpenResty#\n\n参考资料：\n\n官方: http://openresty.org/\nGithub: https://github.com/agentzh/ngx_openresty      https://github.com/openresty/\n\n视频学习：http://www.stuq.org/course/detail/1015\n\nOpenResty最佳实践：https://moonbingbing.gitbooks.io/openresty-best-practices/content/ （https://github.com/moonbingbing/openresty-best-practices）\n\n---\n\n# 安装OpenResty #\n默认安装路径如下\n\n* /usr/local/openresty/\n\nOpenResty，也被称为“ngx_openresty”，是一个基于Nginx的核心Web应用程序服务器，它包含了大量的第三方的Nginx模块和大部分系统依赖包。 OpenResty不是Nginx的分支，它只是一个软件包。主要有章亦春维护。\n为什么是OpenResty？\nOpenResty允许开发人员使用lua编程语言构建现有的Nginx的C模块，支持高流量的应用程序。\n\n依赖的软件包：\n> * perl 5.6.1+\n> * libreadline\n> * libpcre\n> * libssl\n\nDebian 和 Ubuntu系统：\n```\napt-get install libreadline-dev libncurses5-dev libpcre3-dev libssl-dev perl make\n```\n\nFedora 、RedHat 和 centos系统：\n```\nyum install readline-devel pcre-devel openssl-devel gc-c++ -y\n```\n\n下载OpenResty、解压、编译、安装：\n版本选择：https://openresty.org/en/download.html\n```\nwget http://openresty.org/download/ngx_openresty-1.5.8.1.tar.gz\ntar xzvf ngx_openresty-1.5.8.1.tar.gz\ncd ngx_openresty-1.5.8.1/\n./configure --with-luajit\nmake\nmake install\n```\n另外的配置选项：\n```\n./configure --prefix=/opt/openresty \n--with-luajit \n--without-http_redis2_module \n--with-http_iconv_module \n--with-http_postgres_module \n-j2\n--help to see more options\n```\n此时安装完成，打开localhost就可以看到nginx页面了。\n\n---","source":"_posts/web服务器/2016-10-21-OpenResty_install.md","raw":"---\nlayout: post\ntitle: OpenResty（高性能web服务器）\ncategories:\n  - web服务器\ntags:\n  - OpenResty\n  - 高性能web服务器\nabbrlink: 29074\ndate: 2016-10-31 10:21:24\n---\n\n# OpenResty#\n\n参考资料：\n\n官方: http://openresty.org/\nGithub: https://github.com/agentzh/ngx_openresty      https://github.com/openresty/\n\n视频学习：http://www.stuq.org/course/detail/1015\n\nOpenResty最佳实践：https://moonbingbing.gitbooks.io/openresty-best-practices/content/ （https://github.com/moonbingbing/openresty-best-practices）\n\n---\n\n# 安装OpenResty #\n默认安装路径如下\n\n* /usr/local/openresty/\n\nOpenResty，也被称为“ngx_openresty”，是一个基于Nginx的核心Web应用程序服务器，它包含了大量的第三方的Nginx模块和大部分系统依赖包。 OpenResty不是Nginx的分支，它只是一个软件包。主要有章亦春维护。\n为什么是OpenResty？\nOpenResty允许开发人员使用lua编程语言构建现有的Nginx的C模块，支持高流量的应用程序。\n\n依赖的软件包：\n> * perl 5.6.1+\n> * libreadline\n> * libpcre\n> * libssl\n\nDebian 和 Ubuntu系统：\n```\napt-get install libreadline-dev libncurses5-dev libpcre3-dev libssl-dev perl make\n```\n\nFedora 、RedHat 和 centos系统：\n```\nyum install readline-devel pcre-devel openssl-devel gc-c++ -y\n```\n\n下载OpenResty、解压、编译、安装：\n版本选择：https://openresty.org/en/download.html\n```\nwget http://openresty.org/download/ngx_openresty-1.5.8.1.tar.gz\ntar xzvf ngx_openresty-1.5.8.1.tar.gz\ncd ngx_openresty-1.5.8.1/\n./configure --with-luajit\nmake\nmake install\n```\n另外的配置选项：\n```\n./configure --prefix=/opt/openresty \n--with-luajit \n--without-http_redis2_module \n--with-http_iconv_module \n--with-http_postgres_module \n-j2\n--help to see more options\n```\n此时安装完成，打开localhost就可以看到nginx页面了。\n\n---","slug":"web服务器-2016-10-21-OpenResty-install","published":1,"updated":"2016-11-21T02:17:08.843Z","comments":1,"photos":[],"link":"","_id":"ciwlrsjl2000qd8pk8kwjpjyq","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"OpenResty\"><a href=\"#OpenResty\" class=\"headerlink\" title=\"OpenResty\"></a>OpenResty</h1><p>参考资料：</p>\n<p>官方: <a href=\"http://openresty.org/\" target=\"_blank\" rel=\"external\">http://openresty.org/</a><br>Github: <a href=\"https://github.com/agentzh/ngx_openresty\" target=\"_blank\" rel=\"external\">https://github.com/agentzh/ngx_openresty</a>      <a href=\"https://github.com/openresty/\" target=\"_blank\" rel=\"external\">https://github.com/openresty/</a></p>\n<p>视频学习：<a href=\"http://www.stuq.org/course/detail/1015\" target=\"_blank\" rel=\"external\">http://www.stuq.org/course/detail/1015</a></p>\n<p>OpenResty最佳实践：<a href=\"https://moonbingbing.gitbooks.io/openresty-best-practices/content/\" target=\"_blank\" rel=\"external\">https://moonbingbing.gitbooks.io/openresty-best-practices/content/</a> （<a href=\"https://github.com/moonbingbing/openresty-best-practices）\" target=\"_blank\" rel=\"external\">https://github.com/moonbingbing/openresty-best-practices）</a></p>\n<hr>\n<h1 id=\"安装OpenResty\"><a href=\"#安装OpenResty\" class=\"headerlink\" title=\"安装OpenResty\"></a>安装OpenResty</h1><p>默认安装路径如下</p>\n<ul>\n<li>/usr/local/openresty/</li>\n</ul>\n<p>OpenResty，也被称为“ngx_openresty”，是一个基于Nginx的核心Web应用程序服务器，它包含了大量的第三方的Nginx模块和大部分系统依赖包。 OpenResty不是Nginx的分支，它只是一个软件包。主要有章亦春维护。<br>为什么是OpenResty？<br>OpenResty允许开发人员使用lua编程语言构建现有的Nginx的C模块，支持高流量的应用程序。</p>\n<p>依赖的软件包：</p>\n<blockquote>\n<ul>\n<li>perl 5.6.1+</li>\n<li>libreadline</li>\n<li>libpcre</li>\n<li>libssl</li>\n</ul>\n</blockquote>\n<p>Debian 和 Ubuntu系统：<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> install libreadline-<span class=\"built_in\">dev</span> libncurses5-<span class=\"built_in\">dev</span> libpcre3-<span class=\"built_in\">dev</span> libssl-<span class=\"built_in\">dev</span> perl make</div></pre></td></tr></table></figure></p>\n<p>Fedora 、RedHat 和 centos系统：<br><figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">yum</span> <span class=\"comment\">install</span> <span class=\"comment\">readline</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">pcre</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">openssl</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">gc</span><span class=\"literal\">-</span><span class=\"comment\">c</span><span class=\"literal\">+</span><span class=\"literal\">+</span> <span class=\"literal\">-</span><span class=\"comment\">y</span></div></pre></td></tr></table></figure></p>\n<p>下载OpenResty、解压、编译、安装：<br>版本选择：<a href=\"https://openresty.org/en/download.html\" target=\"_blank\" rel=\"external\">https://openresty.org/en/download.html</a><br><figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http://openresty.org/download/ngx_openresty-<span class=\"number\">1.5</span><span class=\"meta\">.8</span><span class=\"meta\">.1</span>.tar.gz</div><div class=\"line\">tar xzvf ngx_openresty-<span class=\"number\">1.5</span><span class=\"meta\">.8</span><span class=\"meta\">.1</span>.tar.gz</div><div class=\"line\">cd ngx_openresty-<span class=\"number\">1.5</span><span class=\"meta\">.8</span><span class=\"meta\">.1</span>/</div><div class=\"line\">./configure --with-luajit</div><div class=\"line\">make</div><div class=\"line\">make install</div></pre></td></tr></table></figure></p>\n<p>另外的配置选项：<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">./configure --prefix=/opt/openresty </div><div class=\"line\">-<span class=\"ruby\">-with-luajit </span></div><div class=\"line\">-<span class=\"ruby\">-without-http_redis2_module </span></div><div class=\"line\">-<span class=\"ruby\">-with-http_iconv_module </span></div><div class=\"line\">-<span class=\"ruby\">-with-http_postgres_module </span></div><div class=\"line\">-<span class=\"ruby\">j2</span></div><div class=\"line\">-<span class=\"ruby\">-help to see more options</span></div></pre></td></tr></table></figure></p>\n<p>此时安装完成，打开localhost就可以看到nginx页面了。</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"OpenResty\"><a href=\"#OpenResty\" class=\"headerlink\" title=\"OpenResty\"></a>OpenResty</h1><p>参考资料：</p>\n<p>官方: <a href=\"http://openresty.org/\">http://openresty.org/</a><br>Github: <a href=\"https://github.com/agentzh/ngx_openresty\">https://github.com/agentzh/ngx_openresty</a>      <a href=\"https://github.com/openresty/\">https://github.com/openresty/</a></p>\n<p>视频学习：<a href=\"http://www.stuq.org/course/detail/1015\">http://www.stuq.org/course/detail/1015</a></p>\n<p>OpenResty最佳实践：<a href=\"https://moonbingbing.gitbooks.io/openresty-best-practices/content/\">https://moonbingbing.gitbooks.io/openresty-best-practices/content/</a> （<a href=\"https://github.com/moonbingbing/openresty-best-practices）\">https://github.com/moonbingbing/openresty-best-practices）</a></p>\n<hr>\n<h1 id=\"安装OpenResty\"><a href=\"#安装OpenResty\" class=\"headerlink\" title=\"安装OpenResty\"></a>安装OpenResty</h1><p>默认安装路径如下</p>\n<ul>\n<li>/usr/local/openresty/</li>\n</ul>\n<p>OpenResty，也被称为“ngx_openresty”，是一个基于Nginx的核心Web应用程序服务器，它包含了大量的第三方的Nginx模块和大部分系统依赖包。 OpenResty不是Nginx的分支，它只是一个软件包。主要有章亦春维护。<br>为什么是OpenResty？<br>OpenResty允许开发人员使用lua编程语言构建现有的Nginx的C模块，支持高流量的应用程序。</p>\n<p>依赖的软件包：</p>\n<blockquote>\n<ul>\n<li>perl 5.6.1+</li>\n<li>libreadline</li>\n<li>libpcre</li>\n<li>libssl</li>\n</ul>\n</blockquote>\n<p>Debian 和 Ubuntu系统：<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> install libreadline-<span class=\"built_in\">dev</span> libncurses5-<span class=\"built_in\">dev</span> libpcre3-<span class=\"built_in\">dev</span> libssl-<span class=\"built_in\">dev</span> perl make</div></pre></td></tr></table></figure></p>\n<p>Fedora 、RedHat 和 centos系统：<br><figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">yum</span> <span class=\"comment\">install</span> <span class=\"comment\">readline</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">pcre</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">openssl</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">gc</span><span class=\"literal\">-</span><span class=\"comment\">c</span><span class=\"literal\">+</span><span class=\"literal\">+</span> <span class=\"literal\">-</span><span class=\"comment\">y</span></div></pre></td></tr></table></figure></p>\n<p>下载OpenResty、解压、编译、安装：<br>版本选择：<a href=\"https://openresty.org/en/download.html\">https://openresty.org/en/download.html</a><br><figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http://openresty.org/download/ngx_openresty-<span class=\"number\">1.5</span><span class=\"meta\">.8</span><span class=\"meta\">.1</span>.tar.gz</div><div class=\"line\">tar xzvf ngx_openresty-<span class=\"number\">1.5</span><span class=\"meta\">.8</span><span class=\"meta\">.1</span>.tar.gz</div><div class=\"line\">cd ngx_openresty-<span class=\"number\">1.5</span><span class=\"meta\">.8</span><span class=\"meta\">.1</span>/</div><div class=\"line\">./configure --with-luajit</div><div class=\"line\">make</div><div class=\"line\">make install</div></pre></td></tr></table></figure></p>\n<p>另外的配置选项：<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">./configure --prefix=/opt/openresty </div><div class=\"line\">-<span class=\"ruby\">-with-luajit </div><div class=\"line\"></span>-<span class=\"ruby\">-without-http_redis2_module </div><div class=\"line\"></span>-<span class=\"ruby\">-with-http_iconv_module </div><div class=\"line\"></span>-<span class=\"ruby\">-with-http_postgres_module </div><div class=\"line\"></span>-<span class=\"ruby\">j2</div><div class=\"line\"></span>-<span class=\"ruby\">-help to see more options</span></div></pre></td></tr></table></figure></p>\n<p>此时安装完成，打开localhost就可以看到nginx页面了。</p>\n<hr>\n"},{"title":"数据库主主互备（高可用）","abbrlink":27740,"date":"2016-11-11T01:39:13.000Z","_content":"\n本文是在[Neil](http://blog.byneil.com/)的博客上看到的一篇博文，由于没有试验环境，没有经过测试，以后测试后会更新并删除本段文字，摘录分享，仅供参考。\n\n# mysql 主主互备\n双机热备的概念简单说一下，就是要保持两个数据库的状态自动同步。对任何一个数据库的操作都自动应用到另外一个数据库，始终保持两个数据库数据一致。 这样做的好处多。\n \n* 1.可以做灾备，其中一个坏了可以切换到另一个。 \n* 2.可以做负载均衡，可以将请求分摊到其中任何一台上，提高网站吞吐量。 \n* 3.对于异地热备，尤其适合灾备。\n \n`mysql -v`,查看使用的是mysql 5.5.34，\n\n## mysql 备份工作原理\n简单的说就是把 一个服务器上执行过的sql语句在别的服务器上也重复执行一遍， 这样只要两个数据库的初态是一样的，那么它们就能一直同步。\n \n当然这种复制和重复都是mysql自动实现的，我们只需要配置即可。\n![](http://ofyfogrgx.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87001.gif)\n上图中有两个服务器， 演示了从一个主服务器（master） 把数据同步到从服务器（slave）的过程。\n这是一个主-从复制的例子。 主-主互相复制只是把上面的例子反过来再做一遍。 所以我们以这个例子介绍原理。\n\n对于一个mysql服务器， 一般有两个线程来负责复制和被复制。当开启复制之后。\n \n* 1.作为主服务器Master，  会把自己的每一次改动都记录到 二进制日志 Binarylog 中。 （从服务器会负责来读取这个log， 然后在自己那里再执行一遍。）\n* 2.作为从服务器Slave， 会用master上的账号登陆到 master上， 读取master的Binarylog,  写入到自己的中继日志 Relaylog， 然后自己的sql线程会负责读取这个中继日志，并执行一遍。  到这里主服务器上的更改就同步到从服务器上了。\n \n在mysql上可以查看当前服务器的主，从状态。 其实就是当前服务器的 Binary（作为主服务器角色）状态和位置。 以及其RelayLog（作为从服务器）的复制进度。\n\n例如我们在主服务器上查看主状态：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87002.png)\n**第一行**表明 当前正在记录的 binarylog文件名是： mysql-bin.000014.\n我们可以在mysql数据目录下，找到这个文件：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87003.png)\n\n**第二行**， 107. 表示当前的文件偏移量， 就是写入在mysql-bin.000014 文件的记录位置。\n这两点就构成了 主服务器的状态。  配置从服务器的时候，需要用到这两个值。 告诉从服务器从哪读取主服务器的数据。 （从服务器会登录之后，找到这个日志文件，并从这个偏移量之后开始复制。）\n \n**第三行，和第四行**，表示需要记录的数据库和需要忽略的数据库。 只有需要记录的数据库，其变化才会被写入到mysql-bin.000014日志文件中。  后面会再次介绍这两个参数。\n \n我们还可以在从服务器上，查看从服务器的复制状态：`mysql> show slave status\\G`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87004.png)\n我们还是来重点解释途中的红圈的部分：\n\n1.  Master_host 指的是 主服务器的地址。 \n2. Master_user 指的是主服务器上用来复制的用户。  从服务器会用此账号来登录主服务。进行复制。\n3. Master_log_file 就是前面提到的， 主服务器上的日志文件名.\n4. Read_Master_log_pos 就是前面提到的主服务器的日志记录位置， 从服务器根据这两个条件来选择复制的文件和位置。\n5. Slave_IO_Running:  指的就是从服务器上负责读取主服务器的线程工作状态。 从服务器用这个专门的线程链接到主服务器上，并把日志拷贝回来。\n6. Slave_SQL_Running: 指的就是专门执行sql的线程。 它负责把复制回来的Relaylog执行到自己的数据库中。 这两个参数必须都为Yes 才表明复制在正常工作。\n \n其他的参数之后再介绍。\n\n---\n## mysql 双机热备实战\n### 主从复制\n了解了上面的原理之后， 我们来实战。 这里有两个重点， 要想同步数据库状态， 需要相同的初态，然后配置同步才有意义。 当然你可以不要初态，这是你的自由。 我们这里从头开始配置一遍。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87005.png)\n\n我们先以A服务器为起点，  配置它的数据库同步到B。  这就是主-从复制了。 之后再反过来做一次，就可以互相备份了。\n \n#### 在A上面创建专门用于备份的用户\n```\ngrant replication slave on *.* to 'repl_userl'@''\ngrant replication slave on *.* to 'repl_user'@'192.***.***.***' identified by 'hj34$%&mnkb';```\n上面把ip地址换成B机器的ip地址。 只允许B登录。安全。\n用户名为： repl_user\n密码为： hj34$********nkb\n这个等会在B上面要用。\n \n#### 开启主服务器的 binarylog。\n很多服务器是默认开启的，我们这里检查一下：\n打开 /etc/my.cnf\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87006.png)\n解释一下红框中的配置：\n前面三行， 你可能已经有了。\n**binlog-do-db** 用来表示，只把哪些数据库的改动记录到binary日志中。 可以写上关注hello数据库。 但是我把它注释掉了。 只是展示一下。 可以写多行，表示关注多个数据库。\n**binlog-ignore-db**表示，需要忽略哪些数据库。我这里忽略了其他的4个数据库。\n \n**最后两行**用于在 双主（多主循环）互相备份。 因为每台数据库服务器都可能在同一个表中插入数据，如果表有一个自动增长的主键，那么就会在多服务器上出现主键冲突。  解决这个问题的办法就是让每个数据库的自增主键不连续。  上图说是， 我假设需要将来可能需要10台服务器做备份， 所以**auto-increment-increment 设为10**。   而 **auto-increment-offset=1 **表示这台服务器的序号。 从1开始， 不超过auto-increment-increment。\n这样做之后， 我在这台服务器上插入的第一个id就是 1， 第二行的id就是 11了， 而不是2。\n（同理，在第二台服务器上插入的第一个id就是2， 第二行就是12， 这个后面再介绍） 这样就不会出现主键冲突了。 后面我们会演示这个id的效果。\n\n#### 获取主服务器状态， 和同步初态。\n假设我现在有这些数据库在A上面。\n如果你是全新安装的， 那么不需要同步初态，直接跳过这一步，到后面直接查看主服务器状态。\n这里我们假设有一个 hello 数据库作为初态。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87008.png)\n\n先锁定 hello数据库：`FLUSH TABLES WITH READ LOCK;`\n\n然后导出数据：\n我这里只需要导出hello数据库， 如果你有多个数据库作为初态的话， 需要导出所有这些数据库：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87007.png)\n\n然后查看A服务器的binary日志位置：\n记住这个文件名和 位置， 等会在从服务器上会用到。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87009.png)\n\n主服务器已经做完了， 可以解除锁定了：`UNLOCK TABLES;`\n\n#### 设置从服务器 B 需要复制的数据库\n打开从服务器 B 的 /etc/my.cnf 文件：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87010.png)\n\n解释一下上面的内容:\n\n* **server-id** 必须保证每个服务器不一样。 这可能和循环同步有关。 防止进入死循环。\n* **replicate-do-db** 可以指定需要复制的数据库， 我这里注掉了。 演示一下。\n* **replicate-ignore-db** 复制时需要排除的数据库， 我使用了，这个。 除开系统的几个数据库之外，所有的数据库都复制。\n* **relay_log** 中继日志的名字。 前面说到了， 复制线程需要先把远程的变化拷贝到这个中继日志中， 在执行。\n* **log-slave-updates **意思是，中继日志执行之后，这些变化是否需要计入自己的binarylog。 当你的B服务器需要作为另外一个服务器的主服务器的时候需要打开。  就是双主互相备份，或者多主循环备份。 我们这里需要， 所以打开。\n\n保存， 重启mysql。\n\n#### 导入初态， 开始同步。\n把刚才从A服务器上导出的 hello.sql 导入到 B的hello数据库中， 如果B现在没有hello数据库，请先创建一个， 然后再导入：\n创建数据库：\nmysql> `create database hello default charset utf8;`\n把hello.sql 上传到B上， 然后导入：`mysql -uroot -p hello < hello.sql`\n如果你刚才导出了多个数据库， 需要把他们都一一上传导入。\n \n开启同步, 在B服务器上执行：\n```\n CHANGE MASTER TO \n       MASTER_HOST='192.***.***.***', \n       MASTER_USER='repl_user', \n       MASTER_PASSWORD='hj3****', \n       MASTER_LOG_FILE='mysql-bin.000004', \n       MASTER_LOG_POS=7145;```\n \n上面几个参数就不解释了,前面说过了。\n \n重启mysql，然后查看slave线程开启了没：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87011.png)\n注意图中的红框， 两个都是Yes， 说明开启成功。如果其中一个是No， 那就说明不成功。需要查看mysql的错误日志。有时候密码填错了， 有时候防火墙的3306没有打开。ip地址不对，等等。 都会导致失败。\nmysql的错误日志一般在：**/usr/local/mysql/data/**;文件名应该是你的机器名， **hostname.err** 你换成你自己的。\n\n到这里主-从复制已经打开了。 我们先来实验一下。\n我们在A的数据库里面去 添加数据：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87012.png)\n我在A的 hello数据库的test表中 连续插入了3条数据，  注意看他们的自增长id， 分别是1,11,21.  知道这是为什么吗。 前面已经说过了，不懂再回去看。\n \n我们去看一下B数据库有没有这三条数据：\n打开B的数据库：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87013.png)\n\n**此时不要在B中修改数据。 我们接着配置从B到A的复制。  如果你只需要主从复制的话， 到这里就结束了。后面可以不看了。 所有A中的修改都能自动同步到B， 但是对B的修改却不能同步到A。 因为是单向的。 如果需要双向同步的话，需要再做一次从B到A的复制。**\n\n---\n### 主主复制\n基本跟上面一样：我们简单一点介绍：\n \n#### 在B中创建用户\n```\ngrant replication slave on *.* to 'repl_user'@'192.***.***.***' identified by 'hj34$%&mnkb';```\n#### 打开 /etc/my.cnf ， 开启B的binarylog\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87014.png)\n注意红框中所新添加的部分。\n\n#### 我们不需要导出B的初态了，因为它刚刚才从A导过来。  直接记住它的master日志状态\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87015.png)\n记住这两个数值，等会在A上面要用。\nB服务器就设置完了。\n \n#### 登录到A 服务器。 开启中继：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87016.png)\n\n注意框中心添加的部分， 不解释了。\n\n#### 启动同步：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87017.png)\n上面的ip地址是B的ip地址， 因为A把B当做master了。 不解释了。\n \n然后重启mysql服务。\n然后查看，slave状态是否正常：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87018.png)\n图中出现了两个No。说明slave没有成功， 即，从B到A的同步没有成功。 我们去查看mysql错误日志，前面说过位置：**/usr/local/mysql/data/** 查看**hostname.err** 文件，打开看看\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87019.png)\n看图中的error信息。  说找不到中继日志文件。\n这是因为我们在配置A的中继文件时改了中继文件名，但是mysql没有同步。解决办法很简单。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87020.png)\n\n先停掉mysql服务。  找到这三个文件，把他们删掉。 **一定要先停掉mysql服务**。不然还是不成功。你需要重启一下机器了。 或者手动`kill mysqld`。\n改好之后， 启动mysql之后。 我们在来检查一下slave状态：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87021.png)\n完成，现在就是**A<--->B**主主互备啦！\n\n---\n\n# 深入了解复制\n已经讨论了关于复制的一些基本东西，下面深入讨论一下复制。\n## 基于语句的复制(Statement-Based Replication)\nMySQL 5.0及之前的版本仅支持基于语句的复制（也叫做**逻辑复制**，logical replication），这在数据库并不常见。master记录下改变数据的查询，然后，slave从中继日志中读取事件，并执行它，这些SQL语句与master执行的语句一样。\n这种方式的优点就是实现简单。此外，基于语句的复制的二进制日志可以很好的进行压缩，而且日志的数据量也较小，占用带宽少——例如，一个更新GB的数据的查询仅需要几十个字节的二进制日志。而mysqlbinlog对于基于语句的日志处理十分方便。\n \n但是，基于语句的复制并不是像它看起来那么简单，因为一些查询语句依赖于master的特定条件，例如，master与slave可能有不同的时间。所以，MySQL的二进制日志的格式不仅仅是查询语句，还包括一些元数据信息，例如，当前的时间戳。即使如此，还是有一些语句，比如，CURRENT USER函数，不能正确的进行复制。此外，存储过程和触发器也是一个问题。\n\n另外一个问题就是基于语句的复制必须是串行化的。这要求大量特殊的代码，配置，例如InnoDB的next-key锁等。并不是所有的存储引擎都支持基于语句的复制。\n\n## 基于记录的复制(Row-Based Replication)\nMySQL增加基于记录的复制，在二进制日志中记录下实际数据的改变，这与其它一些DBMS的实现方式类似。这种方式有优点，也有缺点。优点就是可以对任何语句都能正确工作，一些语句的效率更高。主要的缺点就是二进制日志可能会很大，而且不直观，所以，你不能使用**mysqlbinlog**来查看二进制日志。\n\n对于一些语句，基于记录的复制能够更有效的工作，如：\n```mysql\nmysql> INSERT INTO summary_table(col1, col2, sum_col3)\n    -> SELECT col1, col2, sum(col3)\n    -> FROM enormous_table\n    -> GROUP BY col1, col2;```\n假设，只有三种唯一的col1和col2的组合，但是，该查询会扫描原表的许多行，却仅返回三条记录。此时，基于记录的复制效率更高。\n\n另一方面，下面的语句，基于语句的复制更有效：\n```\nmysql> UPDATE enormous_table SET col1 = 0;```\n此时使用基于记录的复制代价会非常高。由于两种方式不能对所有情况都能很好的处理，所以，MySQL 5.1支持在基于语句的复制和基于记录的复制之前动态交换。你可以通过设置session变量binlog_format来进行控制。\n\n## 复制相关的文件\n除了二进制日志和中继日志文件外，还有其它一些与复制相关的文件。如下\n\n* mysql-bin.index\n\n服务器一旦开启二进制日志，会产生一个与二日志文件同名，但是以.index结尾的文件。它用于跟踪磁盘上存在哪些二进制日志文件。MySQL用它来定位二进制日志文件。内容与下面类似\n```\n.\\mysql-01-bin.000003\n.\\mysql-01-bin.000004```\n\n* mysql-relay-bin.index\n该文件的功能与mysql-bin.index类似，但是它是针对中继日志，而不是二进制日志。内容与下面类似\n```\n.\\mysql-02-relay-bin.000017\n.\\mysql-02-relay-bin.000018```\n\n* master.info\n保存master的相关信息。不要删除它，否则，slave重启后不能连接master。内容与下面类似\n```\nmysql-01-bin.000010\n286\nlocalhost\nrepl\n1234\n3306```\n I/O线程更新master.info文件，内容与下面类似\n```\n.\\mysql-02-relay-bin.000019\n254\nmysql-01-bin.000010\n286\n0\n52813```\n\n* relay-log.info \n包含slave中当前二进制日志和中继日志的信息。\n \n \n \n## 发送复制事件到其它slave\n当设置**log_slave_updates**时，你可以让slave扮演其它slave的master。此时，slave把SQL线程执行的事件写进行自己的二进制日志(binary log)，然后，它的slave可以获取这些事件并执行它。如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87022.JPG)\n\n## 复制过滤(Replication Filters)\n复制过滤可以让你只复制服务器中的一部分数据，有两种复制过滤：在master上过滤二进制日志中的事件；在slave上过滤中继日志中的事件。如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87023.JPG)\n\n---\n# 复制的常用拓扑结构\n复制的体系结构有以下一些基本原则：\n(1)    每个slave只能有一个master；\n(2)    每个slave只能有一个唯一的服务器ID；\n(3)    每个master可以有很多slave；\n(4)    如果你设置log_slave_updates，slave可以是其它slave的master，从而扩散master的更新。\n \nMySQL不支持多主服务器复制(Multimaster Replication)——即一个slave可以有多个master。但是，通过一些简单的组合，我们却可以建立灵活而强大的复制体系结构。\n \n## 1.单一master和多slave\n由一个master和一个slave组成复制系统是最简单的情况。Slave之间并不相互通信，只能与master进行通信。\n在实际应用场景中，MySQL复制90%以上都是一个Master复制到一个或者多个Slave的架构模式，主要用于读压力比较大的应用的数据库端廉价扩展解决方案。因为只要Master和Slave的压力不是太大（尤其是Slave端压力）的话，异步复制的延时一般都很少很少。尤其是自从Slave端的复制方式改成两个线程处理之后，更是减小了Slave端的延时问题。而带来的效益是，对于数据实时性要求不是特别Critical的应用，只需要通过廉价的pcserver来扩展Slave的数量，将读压力分散到多台Slave的机器上面，即可通过分散单台数据库服务器的读压力来解决数据库端的读性能瓶颈，毕竟在大多数数据库应用系统中的读压力还是要比写压力大很多。这在很大程度上解决了目前很多中小型网站的数据库压力瓶颈问题，甚至有些大型网站也在使用类似方案解决数据库瓶颈。\n如图：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87024.JPG)\n\n 如果写操作较少，而读操作很时，可以采取这种结构。你可以将读操作分布到其它的slave，从而减小master的压力。但是，当slave增加到一定数量时，slave对master的负载以及网络带宽都会成为一个严重的问题。\n这种结构虽然简单，但是，它却非常灵活，足够满足大多数应用需求。一些建议：\n* (1)不同的slave扮演不同的作用(例如使用不同的索引，或者不同的存储引擎)；\n* (2)用一个slave作为备用master，只进行复制；\n* (3)用一个远程的slave，用于灾难恢复；\n \n大家应该都比较清楚，从一个Master节点可以复制出多个Slave节点，可能有人会想，那一个Slave节点是否可以从多个Master节点上面进行复制呢？至少在目前来看，MySQL是做不到的，以后是否会支持就不清楚了。\nMySQL不支持一个Slave节点从多个Master节点来进行复制的架构，主要是为了避免冲突的问题，防止多个数据源之间的数据出现冲突，而造成最后数据的不一致性。不过听说已经有人开发了相关的patch，让MySQL支持一个Slave节点从多个Master结点作为数据源来进行复制，这也正是MySQL开源的性质所带来的好处。\n \n \n## 2.主动模式的Master-Master(Master-Master in Active-Active Mode)\nMaster-Master复制的两台服务器，既是master，又是另一台服务器的slave。这样，任何一方所做的变更，都会通过复制应用到另外一方的数据库中。\n可能有些人可能会担心，这样搭建复制环境之后，难道不会造成两台MySQL之间的循环复制么？实际上MySQL自己早就想到了这一点，所以在MySQL的BinaryLog中记录了当前MySQL的server-id，而且这个参数也是我们搭建MySQLReplication的时候必须明确指定，而且Master和Slave的**server-id**参数值比需要不一致才能使**MySQLReplication**搭建成功。一旦有了server-id的值之后，MySQL就很容易判断某个变更是从哪一个MySQLServer最初产生的，所以就很容易避免出现循环复制的情况。而且，如果我们不打开记录**Slave**的**BinaryLog**的选项（**\\--log-slave-update**）的时候，MySQL根本就不会记录复制过程中的变更到BinaryLog中，就更不用担心可能会出现循环复制的情形了。\n如图：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87025.JPG)\n \n主动的Master-Master复制有一些特殊的用处。例如，地理上分布的两个部分都需要自己的可写的数据副本。这种结构最大的问题就是更新冲突。假设一个表只有一行(一列)的数据，其值为1，如果两个服务器分别同时执行如下语句：\n在第一个服务器上执行：`mysql> UPDATE tbl SET col=col + 1;`\n在第二个服务器上执行：`mysql> UPDATE tbl SET col=col * 2;`\n那么结果是多少呢？一台服务器是4，另一个服务器是3，但是，这并不会产生错误。\n实际上，MySQL并不支持其它一些DBMS支持的多主服务器复制(Multimaster Replication)，这是MySQL的复制功能很大的一个限制(多主服务器的难点在于解决更新冲突)，但是，如果你实在有这种需求，你可以采用MySQL Cluster，以及将Cluster和Replication结合起来，可以建立强大的高性能的数据库平台。但是，可以通过其它一些方式来模拟这种多主服务器的复制。\n \n## 3.主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)\n这是master-master结构变化而来的，它避免了M-M的缺点，实际上，这是一种具有容错和高可用性的系统。它的不同点在于其中一个服务只能进行只读操作。如图：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87026.JPG)\n \n \n## 4.级联复制架构 Master –Slaves - Slaves\n在有些应用场景中，可能读写压力差别比较大，读压力特别的大，一个Master可能需要上10台甚至更多的Slave才能够支撑注读的压力。这时候，Master就会比较吃力了，因为仅仅连上来的SlaveIO线程就比较多了，这样写的压力稍微大一点的时候，Master端因为复制就会消耗较多的资源，很容易造成复制的延时。\n遇到这种情况如何解决呢？这时候我们就可以利用MySQL可以在Slave端记录复制所产生变更的BinaryLog信息的功能，也就是打开**\\--log-slave-update**选项。然后，通过二级（或者是更多级别）复制来减少Master端因为复制所带来的压力。也就是说，我们首先通过少数几台MySQL从Master来进行复制，这几台机器我们姑且称之为第一级Slave集群，然后其他的Slave再从第一级Slave集群来进行复制。从第一级Slave进行复制的Slave，我称之为第二级Slave集群。如果有需要，我们可以继续往下增加更多层次的复制。这样，我们很容易就控制了每一台MySQL上面所附属Slave的数量。这种架构我称之为Master-Slaves-Slaves架构\n这种多层级联复制的架构，很容易就解决了Master端因为附属Slave太多而成为瓶颈的风险。下图展示了多层级联复制的Replication架构。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87027.jpg)\n当然，如果条件允许，我更倾向于建议大家通过拆分成多个Replication集群来解决\n上述瓶颈问题。毕竟Slave并没有减少写的量，所有Slave实际上仍然还是应用了所有的数据变更操作，没有减少任何写IO。相反，Slave越多，整个集群的写IO总量也就会越多，我们没有非常明显的感觉，仅仅只是因为分散到了多台机器上面，所以不是很容易表现出来。\n此外，增加复制的级联层次，同一个变更传到最底层的Slave所需要经过的MySQL也会更多，同样可能造成延时较长的风险。\n而如果我们通过分拆集群的方式来解决的话，可能就会要好很多了，当然，分拆集群也需要更复杂的技术和更复杂的应用系统架构。\n\n## 5.带从服务器的Master-Master结构(Master-Master with Slaves)\n这种结构的优点就是提供了冗余。在地理上分布的复制结构，它不存在单一节点故障问题，而且还可以将读密集型的请求放到slave上。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87028.JPG)\n级联复制在一定程度上面确实解决了Master因为所附属的Slave过多而成为瓶颈的问题，但是他并不能解决人工维护和出现异常需要切换后可能存在重新搭建Replication的问题。这样就很自然的引申出了DualMaster与级联复制结合的Replication架构，我称之为Master-Master-Slaves架构\n和Master-Slaves-Slaves架构相比，区别仅仅只是将第一级Slave集群换成了一台单独的Master，作为备用Master，然后再从这个备用的Master进行复制到一个Slave集群。\n\n这种DualMaster与级联复制结合的架构，**最大的好处就是既可以避免主Master的写入操作不会受到Slave集群的复制所带来的影响，同时主Master需要切换的时候也基本上不会出现重搭Replication的情况。但是，这个架构也有一个弊端，那就是备用的Master有可能成为瓶颈，因为如果后面的Slave集群比较大的话，备用Master可能会因为过多的SlaveIO线程请求而成为瓶颈。**当然，该备用Master不提供任何的读服务的时候，瓶颈出现的可能性并不是特别高，如果出现瓶颈，也可以在备用Master后面再次进行级联复制，架设多层Slave集群。当然，级联复制的级别越多，Slave集群可能出现的数据延时也会更为明显，所以考虑使用多层级联复制之前，也需要评估数据延时对应用系统的影响。\n\n---","source":"_posts/数据库/2016-11-11-数据库主主互备（高可用）.md","raw":"---\ntitle: 数据库主主互备（高可用）\ncategories:\n  - 数据库\ntags:\n  - 数据库主主互备（高可用）\nabbrlink: 27740\ndate: 2016-11-11 09:39:13\n---\n\n本文是在[Neil](http://blog.byneil.com/)的博客上看到的一篇博文，由于没有试验环境，没有经过测试，以后测试后会更新并删除本段文字，摘录分享，仅供参考。\n\n# mysql 主主互备\n双机热备的概念简单说一下，就是要保持两个数据库的状态自动同步。对任何一个数据库的操作都自动应用到另外一个数据库，始终保持两个数据库数据一致。 这样做的好处多。\n \n* 1.可以做灾备，其中一个坏了可以切换到另一个。 \n* 2.可以做负载均衡，可以将请求分摊到其中任何一台上，提高网站吞吐量。 \n* 3.对于异地热备，尤其适合灾备。\n \n`mysql -v`,查看使用的是mysql 5.5.34，\n\n## mysql 备份工作原理\n简单的说就是把 一个服务器上执行过的sql语句在别的服务器上也重复执行一遍， 这样只要两个数据库的初态是一样的，那么它们就能一直同步。\n \n当然这种复制和重复都是mysql自动实现的，我们只需要配置即可。\n![](http://ofyfogrgx.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87001.gif)\n上图中有两个服务器， 演示了从一个主服务器（master） 把数据同步到从服务器（slave）的过程。\n这是一个主-从复制的例子。 主-主互相复制只是把上面的例子反过来再做一遍。 所以我们以这个例子介绍原理。\n\n对于一个mysql服务器， 一般有两个线程来负责复制和被复制。当开启复制之后。\n \n* 1.作为主服务器Master，  会把自己的每一次改动都记录到 二进制日志 Binarylog 中。 （从服务器会负责来读取这个log， 然后在自己那里再执行一遍。）\n* 2.作为从服务器Slave， 会用master上的账号登陆到 master上， 读取master的Binarylog,  写入到自己的中继日志 Relaylog， 然后自己的sql线程会负责读取这个中继日志，并执行一遍。  到这里主服务器上的更改就同步到从服务器上了。\n \n在mysql上可以查看当前服务器的主，从状态。 其实就是当前服务器的 Binary（作为主服务器角色）状态和位置。 以及其RelayLog（作为从服务器）的复制进度。\n\n例如我们在主服务器上查看主状态：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87002.png)\n**第一行**表明 当前正在记录的 binarylog文件名是： mysql-bin.000014.\n我们可以在mysql数据目录下，找到这个文件：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87003.png)\n\n**第二行**， 107. 表示当前的文件偏移量， 就是写入在mysql-bin.000014 文件的记录位置。\n这两点就构成了 主服务器的状态。  配置从服务器的时候，需要用到这两个值。 告诉从服务器从哪读取主服务器的数据。 （从服务器会登录之后，找到这个日志文件，并从这个偏移量之后开始复制。）\n \n**第三行，和第四行**，表示需要记录的数据库和需要忽略的数据库。 只有需要记录的数据库，其变化才会被写入到mysql-bin.000014日志文件中。  后面会再次介绍这两个参数。\n \n我们还可以在从服务器上，查看从服务器的复制状态：`mysql> show slave status\\G`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87004.png)\n我们还是来重点解释途中的红圈的部分：\n\n1.  Master_host 指的是 主服务器的地址。 \n2. Master_user 指的是主服务器上用来复制的用户。  从服务器会用此账号来登录主服务。进行复制。\n3. Master_log_file 就是前面提到的， 主服务器上的日志文件名.\n4. Read_Master_log_pos 就是前面提到的主服务器的日志记录位置， 从服务器根据这两个条件来选择复制的文件和位置。\n5. Slave_IO_Running:  指的就是从服务器上负责读取主服务器的线程工作状态。 从服务器用这个专门的线程链接到主服务器上，并把日志拷贝回来。\n6. Slave_SQL_Running: 指的就是专门执行sql的线程。 它负责把复制回来的Relaylog执行到自己的数据库中。 这两个参数必须都为Yes 才表明复制在正常工作。\n \n其他的参数之后再介绍。\n\n---\n## mysql 双机热备实战\n### 主从复制\n了解了上面的原理之后， 我们来实战。 这里有两个重点， 要想同步数据库状态， 需要相同的初态，然后配置同步才有意义。 当然你可以不要初态，这是你的自由。 我们这里从头开始配置一遍。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87005.png)\n\n我们先以A服务器为起点，  配置它的数据库同步到B。  这就是主-从复制了。 之后再反过来做一次，就可以互相备份了。\n \n#### 在A上面创建专门用于备份的用户\n```\ngrant replication slave on *.* to 'repl_userl'@''\ngrant replication slave on *.* to 'repl_user'@'192.***.***.***' identified by 'hj34$%&mnkb';```\n上面把ip地址换成B机器的ip地址。 只允许B登录。安全。\n用户名为： repl_user\n密码为： hj34$********nkb\n这个等会在B上面要用。\n \n#### 开启主服务器的 binarylog。\n很多服务器是默认开启的，我们这里检查一下：\n打开 /etc/my.cnf\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87006.png)\n解释一下红框中的配置：\n前面三行， 你可能已经有了。\n**binlog-do-db** 用来表示，只把哪些数据库的改动记录到binary日志中。 可以写上关注hello数据库。 但是我把它注释掉了。 只是展示一下。 可以写多行，表示关注多个数据库。\n**binlog-ignore-db**表示，需要忽略哪些数据库。我这里忽略了其他的4个数据库。\n \n**最后两行**用于在 双主（多主循环）互相备份。 因为每台数据库服务器都可能在同一个表中插入数据，如果表有一个自动增长的主键，那么就会在多服务器上出现主键冲突。  解决这个问题的办法就是让每个数据库的自增主键不连续。  上图说是， 我假设需要将来可能需要10台服务器做备份， 所以**auto-increment-increment 设为10**。   而 **auto-increment-offset=1 **表示这台服务器的序号。 从1开始， 不超过auto-increment-increment。\n这样做之后， 我在这台服务器上插入的第一个id就是 1， 第二行的id就是 11了， 而不是2。\n（同理，在第二台服务器上插入的第一个id就是2， 第二行就是12， 这个后面再介绍） 这样就不会出现主键冲突了。 后面我们会演示这个id的效果。\n\n#### 获取主服务器状态， 和同步初态。\n假设我现在有这些数据库在A上面。\n如果你是全新安装的， 那么不需要同步初态，直接跳过这一步，到后面直接查看主服务器状态。\n这里我们假设有一个 hello 数据库作为初态。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87008.png)\n\n先锁定 hello数据库：`FLUSH TABLES WITH READ LOCK;`\n\n然后导出数据：\n我这里只需要导出hello数据库， 如果你有多个数据库作为初态的话， 需要导出所有这些数据库：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87007.png)\n\n然后查看A服务器的binary日志位置：\n记住这个文件名和 位置， 等会在从服务器上会用到。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87009.png)\n\n主服务器已经做完了， 可以解除锁定了：`UNLOCK TABLES;`\n\n#### 设置从服务器 B 需要复制的数据库\n打开从服务器 B 的 /etc/my.cnf 文件：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87010.png)\n\n解释一下上面的内容:\n\n* **server-id** 必须保证每个服务器不一样。 这可能和循环同步有关。 防止进入死循环。\n* **replicate-do-db** 可以指定需要复制的数据库， 我这里注掉了。 演示一下。\n* **replicate-ignore-db** 复制时需要排除的数据库， 我使用了，这个。 除开系统的几个数据库之外，所有的数据库都复制。\n* **relay_log** 中继日志的名字。 前面说到了， 复制线程需要先把远程的变化拷贝到这个中继日志中， 在执行。\n* **log-slave-updates **意思是，中继日志执行之后，这些变化是否需要计入自己的binarylog。 当你的B服务器需要作为另外一个服务器的主服务器的时候需要打开。  就是双主互相备份，或者多主循环备份。 我们这里需要， 所以打开。\n\n保存， 重启mysql。\n\n#### 导入初态， 开始同步。\n把刚才从A服务器上导出的 hello.sql 导入到 B的hello数据库中， 如果B现在没有hello数据库，请先创建一个， 然后再导入：\n创建数据库：\nmysql> `create database hello default charset utf8;`\n把hello.sql 上传到B上， 然后导入：`mysql -uroot -p hello < hello.sql`\n如果你刚才导出了多个数据库， 需要把他们都一一上传导入。\n \n开启同步, 在B服务器上执行：\n```\n CHANGE MASTER TO \n       MASTER_HOST='192.***.***.***', \n       MASTER_USER='repl_user', \n       MASTER_PASSWORD='hj3****', \n       MASTER_LOG_FILE='mysql-bin.000004', \n       MASTER_LOG_POS=7145;```\n \n上面几个参数就不解释了,前面说过了。\n \n重启mysql，然后查看slave线程开启了没：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87011.png)\n注意图中的红框， 两个都是Yes， 说明开启成功。如果其中一个是No， 那就说明不成功。需要查看mysql的错误日志。有时候密码填错了， 有时候防火墙的3306没有打开。ip地址不对，等等。 都会导致失败。\nmysql的错误日志一般在：**/usr/local/mysql/data/**;文件名应该是你的机器名， **hostname.err** 你换成你自己的。\n\n到这里主-从复制已经打开了。 我们先来实验一下。\n我们在A的数据库里面去 添加数据：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87012.png)\n我在A的 hello数据库的test表中 连续插入了3条数据，  注意看他们的自增长id， 分别是1,11,21.  知道这是为什么吗。 前面已经说过了，不懂再回去看。\n \n我们去看一下B数据库有没有这三条数据：\n打开B的数据库：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87013.png)\n\n**此时不要在B中修改数据。 我们接着配置从B到A的复制。  如果你只需要主从复制的话， 到这里就结束了。后面可以不看了。 所有A中的修改都能自动同步到B， 但是对B的修改却不能同步到A。 因为是单向的。 如果需要双向同步的话，需要再做一次从B到A的复制。**\n\n---\n### 主主复制\n基本跟上面一样：我们简单一点介绍：\n \n#### 在B中创建用户\n```\ngrant replication slave on *.* to 'repl_user'@'192.***.***.***' identified by 'hj34$%&mnkb';```\n#### 打开 /etc/my.cnf ， 开启B的binarylog\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87014.png)\n注意红框中所新添加的部分。\n\n#### 我们不需要导出B的初态了，因为它刚刚才从A导过来。  直接记住它的master日志状态\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87015.png)\n记住这两个数值，等会在A上面要用。\nB服务器就设置完了。\n \n#### 登录到A 服务器。 开启中继：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87016.png)\n\n注意框中心添加的部分， 不解释了。\n\n#### 启动同步：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87017.png)\n上面的ip地址是B的ip地址， 因为A把B当做master了。 不解释了。\n \n然后重启mysql服务。\n然后查看，slave状态是否正常：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87018.png)\n图中出现了两个No。说明slave没有成功， 即，从B到A的同步没有成功。 我们去查看mysql错误日志，前面说过位置：**/usr/local/mysql/data/** 查看**hostname.err** 文件，打开看看\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87019.png)\n看图中的error信息。  说找不到中继日志文件。\n这是因为我们在配置A的中继文件时改了中继文件名，但是mysql没有同步。解决办法很简单。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87020.png)\n\n先停掉mysql服务。  找到这三个文件，把他们删掉。 **一定要先停掉mysql服务**。不然还是不成功。你需要重启一下机器了。 或者手动`kill mysqld`。\n改好之后， 启动mysql之后。 我们在来检查一下slave状态：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87021.png)\n完成，现在就是**A<--->B**主主互备啦！\n\n---\n\n# 深入了解复制\n已经讨论了关于复制的一些基本东西，下面深入讨论一下复制。\n## 基于语句的复制(Statement-Based Replication)\nMySQL 5.0及之前的版本仅支持基于语句的复制（也叫做**逻辑复制**，logical replication），这在数据库并不常见。master记录下改变数据的查询，然后，slave从中继日志中读取事件，并执行它，这些SQL语句与master执行的语句一样。\n这种方式的优点就是实现简单。此外，基于语句的复制的二进制日志可以很好的进行压缩，而且日志的数据量也较小，占用带宽少——例如，一个更新GB的数据的查询仅需要几十个字节的二进制日志。而mysqlbinlog对于基于语句的日志处理十分方便。\n \n但是，基于语句的复制并不是像它看起来那么简单，因为一些查询语句依赖于master的特定条件，例如，master与slave可能有不同的时间。所以，MySQL的二进制日志的格式不仅仅是查询语句，还包括一些元数据信息，例如，当前的时间戳。即使如此，还是有一些语句，比如，CURRENT USER函数，不能正确的进行复制。此外，存储过程和触发器也是一个问题。\n\n另外一个问题就是基于语句的复制必须是串行化的。这要求大量特殊的代码，配置，例如InnoDB的next-key锁等。并不是所有的存储引擎都支持基于语句的复制。\n\n## 基于记录的复制(Row-Based Replication)\nMySQL增加基于记录的复制，在二进制日志中记录下实际数据的改变，这与其它一些DBMS的实现方式类似。这种方式有优点，也有缺点。优点就是可以对任何语句都能正确工作，一些语句的效率更高。主要的缺点就是二进制日志可能会很大，而且不直观，所以，你不能使用**mysqlbinlog**来查看二进制日志。\n\n对于一些语句，基于记录的复制能够更有效的工作，如：\n```mysql\nmysql> INSERT INTO summary_table(col1, col2, sum_col3)\n    -> SELECT col1, col2, sum(col3)\n    -> FROM enormous_table\n    -> GROUP BY col1, col2;```\n假设，只有三种唯一的col1和col2的组合，但是，该查询会扫描原表的许多行，却仅返回三条记录。此时，基于记录的复制效率更高。\n\n另一方面，下面的语句，基于语句的复制更有效：\n```\nmysql> UPDATE enormous_table SET col1 = 0;```\n此时使用基于记录的复制代价会非常高。由于两种方式不能对所有情况都能很好的处理，所以，MySQL 5.1支持在基于语句的复制和基于记录的复制之前动态交换。你可以通过设置session变量binlog_format来进行控制。\n\n## 复制相关的文件\n除了二进制日志和中继日志文件外，还有其它一些与复制相关的文件。如下\n\n* mysql-bin.index\n\n服务器一旦开启二进制日志，会产生一个与二日志文件同名，但是以.index结尾的文件。它用于跟踪磁盘上存在哪些二进制日志文件。MySQL用它来定位二进制日志文件。内容与下面类似\n```\n.\\mysql-01-bin.000003\n.\\mysql-01-bin.000004```\n\n* mysql-relay-bin.index\n该文件的功能与mysql-bin.index类似，但是它是针对中继日志，而不是二进制日志。内容与下面类似\n```\n.\\mysql-02-relay-bin.000017\n.\\mysql-02-relay-bin.000018```\n\n* master.info\n保存master的相关信息。不要删除它，否则，slave重启后不能连接master。内容与下面类似\n```\nmysql-01-bin.000010\n286\nlocalhost\nrepl\n1234\n3306```\n I/O线程更新master.info文件，内容与下面类似\n```\n.\\mysql-02-relay-bin.000019\n254\nmysql-01-bin.000010\n286\n0\n52813```\n\n* relay-log.info \n包含slave中当前二进制日志和中继日志的信息。\n \n \n \n## 发送复制事件到其它slave\n当设置**log_slave_updates**时，你可以让slave扮演其它slave的master。此时，slave把SQL线程执行的事件写进行自己的二进制日志(binary log)，然后，它的slave可以获取这些事件并执行它。如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87022.JPG)\n\n## 复制过滤(Replication Filters)\n复制过滤可以让你只复制服务器中的一部分数据，有两种复制过滤：在master上过滤二进制日志中的事件；在slave上过滤中继日志中的事件。如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87023.JPG)\n\n---\n# 复制的常用拓扑结构\n复制的体系结构有以下一些基本原则：\n(1)    每个slave只能有一个master；\n(2)    每个slave只能有一个唯一的服务器ID；\n(3)    每个master可以有很多slave；\n(4)    如果你设置log_slave_updates，slave可以是其它slave的master，从而扩散master的更新。\n \nMySQL不支持多主服务器复制(Multimaster Replication)——即一个slave可以有多个master。但是，通过一些简单的组合，我们却可以建立灵活而强大的复制体系结构。\n \n## 1.单一master和多slave\n由一个master和一个slave组成复制系统是最简单的情况。Slave之间并不相互通信，只能与master进行通信。\n在实际应用场景中，MySQL复制90%以上都是一个Master复制到一个或者多个Slave的架构模式，主要用于读压力比较大的应用的数据库端廉价扩展解决方案。因为只要Master和Slave的压力不是太大（尤其是Slave端压力）的话，异步复制的延时一般都很少很少。尤其是自从Slave端的复制方式改成两个线程处理之后，更是减小了Slave端的延时问题。而带来的效益是，对于数据实时性要求不是特别Critical的应用，只需要通过廉价的pcserver来扩展Slave的数量，将读压力分散到多台Slave的机器上面，即可通过分散单台数据库服务器的读压力来解决数据库端的读性能瓶颈，毕竟在大多数数据库应用系统中的读压力还是要比写压力大很多。这在很大程度上解决了目前很多中小型网站的数据库压力瓶颈问题，甚至有些大型网站也在使用类似方案解决数据库瓶颈。\n如图：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87024.JPG)\n\n 如果写操作较少，而读操作很时，可以采取这种结构。你可以将读操作分布到其它的slave，从而减小master的压力。但是，当slave增加到一定数量时，slave对master的负载以及网络带宽都会成为一个严重的问题。\n这种结构虽然简单，但是，它却非常灵活，足够满足大多数应用需求。一些建议：\n* (1)不同的slave扮演不同的作用(例如使用不同的索引，或者不同的存储引擎)；\n* (2)用一个slave作为备用master，只进行复制；\n* (3)用一个远程的slave，用于灾难恢复；\n \n大家应该都比较清楚，从一个Master节点可以复制出多个Slave节点，可能有人会想，那一个Slave节点是否可以从多个Master节点上面进行复制呢？至少在目前来看，MySQL是做不到的，以后是否会支持就不清楚了。\nMySQL不支持一个Slave节点从多个Master节点来进行复制的架构，主要是为了避免冲突的问题，防止多个数据源之间的数据出现冲突，而造成最后数据的不一致性。不过听说已经有人开发了相关的patch，让MySQL支持一个Slave节点从多个Master结点作为数据源来进行复制，这也正是MySQL开源的性质所带来的好处。\n \n \n## 2.主动模式的Master-Master(Master-Master in Active-Active Mode)\nMaster-Master复制的两台服务器，既是master，又是另一台服务器的slave。这样，任何一方所做的变更，都会通过复制应用到另外一方的数据库中。\n可能有些人可能会担心，这样搭建复制环境之后，难道不会造成两台MySQL之间的循环复制么？实际上MySQL自己早就想到了这一点，所以在MySQL的BinaryLog中记录了当前MySQL的server-id，而且这个参数也是我们搭建MySQLReplication的时候必须明确指定，而且Master和Slave的**server-id**参数值比需要不一致才能使**MySQLReplication**搭建成功。一旦有了server-id的值之后，MySQL就很容易判断某个变更是从哪一个MySQLServer最初产生的，所以就很容易避免出现循环复制的情况。而且，如果我们不打开记录**Slave**的**BinaryLog**的选项（**\\--log-slave-update**）的时候，MySQL根本就不会记录复制过程中的变更到BinaryLog中，就更不用担心可能会出现循环复制的情形了。\n如图：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87025.JPG)\n \n主动的Master-Master复制有一些特殊的用处。例如，地理上分布的两个部分都需要自己的可写的数据副本。这种结构最大的问题就是更新冲突。假设一个表只有一行(一列)的数据，其值为1，如果两个服务器分别同时执行如下语句：\n在第一个服务器上执行：`mysql> UPDATE tbl SET col=col + 1;`\n在第二个服务器上执行：`mysql> UPDATE tbl SET col=col * 2;`\n那么结果是多少呢？一台服务器是4，另一个服务器是3，但是，这并不会产生错误。\n实际上，MySQL并不支持其它一些DBMS支持的多主服务器复制(Multimaster Replication)，这是MySQL的复制功能很大的一个限制(多主服务器的难点在于解决更新冲突)，但是，如果你实在有这种需求，你可以采用MySQL Cluster，以及将Cluster和Replication结合起来，可以建立强大的高性能的数据库平台。但是，可以通过其它一些方式来模拟这种多主服务器的复制。\n \n## 3.主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)\n这是master-master结构变化而来的，它避免了M-M的缺点，实际上，这是一种具有容错和高可用性的系统。它的不同点在于其中一个服务只能进行只读操作。如图：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87026.JPG)\n \n \n## 4.级联复制架构 Master –Slaves - Slaves\n在有些应用场景中，可能读写压力差别比较大，读压力特别的大，一个Master可能需要上10台甚至更多的Slave才能够支撑注读的压力。这时候，Master就会比较吃力了，因为仅仅连上来的SlaveIO线程就比较多了，这样写的压力稍微大一点的时候，Master端因为复制就会消耗较多的资源，很容易造成复制的延时。\n遇到这种情况如何解决呢？这时候我们就可以利用MySQL可以在Slave端记录复制所产生变更的BinaryLog信息的功能，也就是打开**\\--log-slave-update**选项。然后，通过二级（或者是更多级别）复制来减少Master端因为复制所带来的压力。也就是说，我们首先通过少数几台MySQL从Master来进行复制，这几台机器我们姑且称之为第一级Slave集群，然后其他的Slave再从第一级Slave集群来进行复制。从第一级Slave进行复制的Slave，我称之为第二级Slave集群。如果有需要，我们可以继续往下增加更多层次的复制。这样，我们很容易就控制了每一台MySQL上面所附属Slave的数量。这种架构我称之为Master-Slaves-Slaves架构\n这种多层级联复制的架构，很容易就解决了Master端因为附属Slave太多而成为瓶颈的风险。下图展示了多层级联复制的Replication架构。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87027.jpg)\n当然，如果条件允许，我更倾向于建议大家通过拆分成多个Replication集群来解决\n上述瓶颈问题。毕竟Slave并没有减少写的量，所有Slave实际上仍然还是应用了所有的数据变更操作，没有减少任何写IO。相反，Slave越多，整个集群的写IO总量也就会越多，我们没有非常明显的感觉，仅仅只是因为分散到了多台机器上面，所以不是很容易表现出来。\n此外，增加复制的级联层次，同一个变更传到最底层的Slave所需要经过的MySQL也会更多，同样可能造成延时较长的风险。\n而如果我们通过分拆集群的方式来解决的话，可能就会要好很多了，当然，分拆集群也需要更复杂的技术和更复杂的应用系统架构。\n\n## 5.带从服务器的Master-Master结构(Master-Master with Slaves)\n这种结构的优点就是提供了冗余。在地理上分布的复制结构，它不存在单一节点故障问题，而且还可以将读密集型的请求放到slave上。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87028.JPG)\n级联复制在一定程度上面确实解决了Master因为所附属的Slave过多而成为瓶颈的问题，但是他并不能解决人工维护和出现异常需要切换后可能存在重新搭建Replication的问题。这样就很自然的引申出了DualMaster与级联复制结合的Replication架构，我称之为Master-Master-Slaves架构\n和Master-Slaves-Slaves架构相比，区别仅仅只是将第一级Slave集群换成了一台单独的Master，作为备用Master，然后再从这个备用的Master进行复制到一个Slave集群。\n\n这种DualMaster与级联复制结合的架构，**最大的好处就是既可以避免主Master的写入操作不会受到Slave集群的复制所带来的影响，同时主Master需要切换的时候也基本上不会出现重搭Replication的情况。但是，这个架构也有一个弊端，那就是备用的Master有可能成为瓶颈，因为如果后面的Slave集群比较大的话，备用Master可能会因为过多的SlaveIO线程请求而成为瓶颈。**当然，该备用Master不提供任何的读服务的时候，瓶颈出现的可能性并不是特别高，如果出现瓶颈，也可以在备用Master后面再次进行级联复制，架设多层Slave集群。当然，级联复制的级别越多，Slave集群可能出现的数据延时也会更为明显，所以考虑使用多层级联复制之前，也需要评估数据延时对应用系统的影响。\n\n---","slug":"数据库-2016-11-11-数据库主主互备（高可用）","published":1,"updated":"2016-11-21T02:17:08.903Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjle000sd8pkl0jf8dgj","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>本文是在<a href=\"http://blog.byneil.com/\" target=\"_blank\" rel=\"external\">Neil</a>的博客上看到的一篇博文，由于没有试验环境，没有经过测试，以后测试后会更新并删除本段文字，摘录分享，仅供参考。</p>\n<h1 id=\"mysql-主主互备\"><a href=\"#mysql-主主互备\" class=\"headerlink\" title=\"mysql 主主互备\"></a>mysql 主主互备</h1><p>双机热备的概念简单说一下，就是要保持两个数据库的状态自动同步。对任何一个数据库的操作都自动应用到另外一个数据库，始终保持两个数据库数据一致。 这样做的好处多。</p>\n<ul>\n<li>1.可以做灾备，其中一个坏了可以切换到另一个。 </li>\n<li>2.可以做负载均衡，可以将请求分摊到其中任何一台上，提高网站吞吐量。 </li>\n<li>3.对于异地热备，尤其适合灾备。</li>\n</ul>\n<p><code>mysql -v</code>,查看使用的是mysql 5.5.34，</p>\n<h2 id=\"mysql-备份工作原理\"><a href=\"#mysql-备份工作原理\" class=\"headerlink\" title=\"mysql 备份工作原理\"></a>mysql 备份工作原理</h2><p>简单的说就是把 一个服务器上执行过的sql语句在别的服务器上也重复执行一遍， 这样只要两个数据库的初态是一样的，那么它们就能一直同步。</p>\n<p>当然这种复制和重复都是mysql自动实现的，我们只需要配置即可。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87001.gif\" alt=\"\"><br>上图中有两个服务器， 演示了从一个主服务器（master） 把数据同步到从服务器（slave）的过程。<br>这是一个主-从复制的例子。 主-主互相复制只是把上面的例子反过来再做一遍。 所以我们以这个例子介绍原理。</p>\n<p>对于一个mysql服务器， 一般有两个线程来负责复制和被复制。当开启复制之后。</p>\n<ul>\n<li>1.作为主服务器Master，  会把自己的每一次改动都记录到 二进制日志 Binarylog 中。 （从服务器会负责来读取这个log， 然后在自己那里再执行一遍。）</li>\n<li>2.作为从服务器Slave， 会用master上的账号登陆到 master上， 读取master的Binarylog,  写入到自己的中继日志 Relaylog， 然后自己的sql线程会负责读取这个中继日志，并执行一遍。  到这里主服务器上的更改就同步到从服务器上了。</li>\n</ul>\n<p>在mysql上可以查看当前服务器的主，从状态。 其实就是当前服务器的 Binary（作为主服务器角色）状态和位置。 以及其RelayLog（作为从服务器）的复制进度。</p>\n<p>例如我们在主服务器上查看主状态：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87002.png\" alt=\"\"><br><strong>第一行</strong>表明 当前正在记录的 binarylog文件名是： mysql-bin.000014.<br>我们可以在mysql数据目录下，找到这个文件：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87003.png\" alt=\"\"></p>\n<p><strong>第二行</strong>， 107. 表示当前的文件偏移量， 就是写入在mysql-bin.000014 文件的记录位置。<br>这两点就构成了 主服务器的状态。  配置从服务器的时候，需要用到这两个值。 告诉从服务器从哪读取主服务器的数据。 （从服务器会登录之后，找到这个日志文件，并从这个偏移量之后开始复制。）</p>\n<p><strong>第三行，和第四行</strong>，表示需要记录的数据库和需要忽略的数据库。 只有需要记录的数据库，其变化才会被写入到mysql-bin.000014日志文件中。  后面会再次介绍这两个参数。</p>\n<p>我们还可以在从服务器上，查看从服务器的复制状态：<code>mysql&gt; show slave status\\G</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87004.png\" alt=\"\"><br>我们还是来重点解释途中的红圈的部分：</p>\n<ol>\n<li>Master_host 指的是 主服务器的地址。 </li>\n<li>Master_user 指的是主服务器上用来复制的用户。  从服务器会用此账号来登录主服务。进行复制。</li>\n<li>Master_log_file 就是前面提到的， 主服务器上的日志文件名.</li>\n<li>Read_Master_log_pos 就是前面提到的主服务器的日志记录位置， 从服务器根据这两个条件来选择复制的文件和位置。</li>\n<li>Slave_IO_Running:  指的就是从服务器上负责读取主服务器的线程工作状态。 从服务器用这个专门的线程链接到主服务器上，并把日志拷贝回来。</li>\n<li>Slave_SQL_Running: 指的就是专门执行sql的线程。 它负责把复制回来的Relaylog执行到自己的数据库中。 这两个参数必须都为Yes 才表明复制在正常工作。</li>\n</ol>\n<p>其他的参数之后再介绍。</p>\n<hr>\n<h2 id=\"mysql-双机热备实战\"><a href=\"#mysql-双机热备实战\" class=\"headerlink\" title=\"mysql 双机热备实战\"></a>mysql 双机热备实战</h2><h3 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h3><p>了解了上面的原理之后， 我们来实战。 这里有两个重点， 要想同步数据库状态， 需要相同的初态，然后配置同步才有意义。 当然你可以不要初态，这是你的自由。 我们这里从头开始配置一遍。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87005.png\" alt=\"\"></p>\n<p>我们先以A服务器为起点，  配置它的数据库同步到B。  这就是主-从复制了。 之后再反过来做一次，就可以互相备份了。</p>\n<h4 id=\"在A上面创建专门用于备份的用户\"><a href=\"#在A上面创建专门用于备份的用户\" class=\"headerlink\" title=\"在A上面创建专门用于备份的用户\"></a>在A上面创建专门用于备份的用户</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">replication</span> <span class=\"keyword\">slave</span> <span class=\"keyword\">on</span> *.* <span class=\"keyword\">to</span> <span class=\"string\">'repl_userl'</span>@<span class=\"string\">''</span></div><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">replication</span> <span class=\"keyword\">slave</span> <span class=\"keyword\">on</span> *.* <span class=\"keyword\">to</span> <span class=\"string\">'repl_user'</span>@<span class=\"string\">'192.***.***.***'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'hj34$%&amp;mnkb'</span>;</div></pre></td></tr></table></figure>\n<p>上面把ip地址换成B机器的ip地址。 只允许B登录。安全。<br>用户名为： repl_user<br>密码为： hj34$<strong><em>**</em></strong>nkb<br>这个等会在B上面要用。</p>\n<h4 id=\"开启主服务器的-binarylog。\"><a href=\"#开启主服务器的-binarylog。\" class=\"headerlink\" title=\"开启主服务器的 binarylog。\"></a>开启主服务器的 binarylog。</h4><p>很多服务器是默认开启的，我们这里检查一下：<br>打开 /etc/my.cnf<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87006.png\" alt=\"\"><br>解释一下红框中的配置：<br>前面三行， 你可能已经有了。<br><strong>binlog-do-db</strong> 用来表示，只把哪些数据库的改动记录到binary日志中。 可以写上关注hello数据库。 但是我把它注释掉了。 只是展示一下。 可以写多行，表示关注多个数据库。<br><strong>binlog-ignore-db</strong>表示，需要忽略哪些数据库。我这里忽略了其他的4个数据库。</p>\n<p><strong>最后两行</strong>用于在 双主（多主循环）互相备份。 因为每台数据库服务器都可能在同一个表中插入数据，如果表有一个自动增长的主键，那么就会在多服务器上出现主键冲突。  解决这个问题的办法就是让每个数据库的自增主键不连续。  上图说是， 我假设需要将来可能需要10台服务器做备份， 所以<strong>auto-increment-increment 设为10</strong>。   而 <strong>auto-increment-offset=1 </strong>表示这台服务器的序号。 从1开始， 不超过auto-increment-increment。<br>这样做之后， 我在这台服务器上插入的第一个id就是 1， 第二行的id就是 11了， 而不是2。<br>（同理，在第二台服务器上插入的第一个id就是2， 第二行就是12， 这个后面再介绍） 这样就不会出现主键冲突了。 后面我们会演示这个id的效果。</p>\n<h4 id=\"获取主服务器状态，-和同步初态。\"><a href=\"#获取主服务器状态，-和同步初态。\" class=\"headerlink\" title=\"获取主服务器状态， 和同步初态。\"></a>获取主服务器状态， 和同步初态。</h4><p>假设我现在有这些数据库在A上面。<br>如果你是全新安装的， 那么不需要同步初态，直接跳过这一步，到后面直接查看主服务器状态。<br>这里我们假设有一个 hello 数据库作为初态。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87008.png\" alt=\"\"></p>\n<p>先锁定 hello数据库：<code>FLUSH TABLES WITH READ LOCK;</code></p>\n<p>然后导出数据：<br>我这里只需要导出hello数据库， 如果你有多个数据库作为初态的话， 需要导出所有这些数据库：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87007.png\" alt=\"\"></p>\n<p>然后查看A服务器的binary日志位置：<br>记住这个文件名和 位置， 等会在从服务器上会用到。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87009.png\" alt=\"\"></p>\n<p>主服务器已经做完了， 可以解除锁定了：<code>UNLOCK TABLES;</code></p>\n<h4 id=\"设置从服务器-B-需要复制的数据库\"><a href=\"#设置从服务器-B-需要复制的数据库\" class=\"headerlink\" title=\"设置从服务器 B 需要复制的数据库\"></a>设置从服务器 B 需要复制的数据库</h4><p>打开从服务器 B 的 /etc/my.cnf 文件：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87010.png\" alt=\"\"></p>\n<p>解释一下上面的内容:</p>\n<ul>\n<li><strong>server-id</strong> 必须保证每个服务器不一样。 这可能和循环同步有关。 防止进入死循环。</li>\n<li><strong>replicate-do-db</strong> 可以指定需要复制的数据库， 我这里注掉了。 演示一下。</li>\n<li><strong>replicate-ignore-db</strong> 复制时需要排除的数据库， 我使用了，这个。 除开系统的几个数据库之外，所有的数据库都复制。</li>\n<li><strong>relay_log</strong> 中继日志的名字。 前面说到了， 复制线程需要先把远程的变化拷贝到这个中继日志中， 在执行。</li>\n<li><strong>log-slave-updates </strong>意思是，中继日志执行之后，这些变化是否需要计入自己的binarylog。 当你的B服务器需要作为另外一个服务器的主服务器的时候需要打开。  就是双主互相备份，或者多主循环备份。 我们这里需要， 所以打开。</li>\n</ul>\n<p>保存， 重启mysql。</p>\n<h4 id=\"导入初态，-开始同步。\"><a href=\"#导入初态，-开始同步。\" class=\"headerlink\" title=\"导入初态， 开始同步。\"></a>导入初态， 开始同步。</h4><p>把刚才从A服务器上导出的 hello.sql 导入到 B的hello数据库中， 如果B现在没有hello数据库，请先创建一个， 然后再导入：<br>创建数据库：<br>mysql&gt; <code>create database hello default charset utf8;</code><br>把hello.sql 上传到B上， 然后导入：<code>mysql -uroot -p hello &lt; hello.sql</code><br>如果你刚才导出了多个数据库， 需要把他们都一一上传导入。</p>\n<p>开启同步, 在B服务器上执行：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">CHANGE</span> <span class=\"keyword\">MASTER</span> <span class=\"keyword\">TO</span> </div><div class=\"line\">      MASTER_HOST=<span class=\"string\">'192.***.***.***'</span>, </div><div class=\"line\">      MASTER_USER=<span class=\"string\">'repl_user'</span>, </div><div class=\"line\">      MASTER_PASSWORD=<span class=\"string\">'hj3****'</span>, </div><div class=\"line\">      MASTER_LOG_FILE=<span class=\"string\">'mysql-bin.000004'</span>, </div><div class=\"line\">      MASTER_LOG_POS=<span class=\"number\">7145</span>;</div></pre></td></tr></table></figure></p>\n<p>上面几个参数就不解释了,前面说过了。</p>\n<p>重启mysql，然后查看slave线程开启了没：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87011.png\" alt=\"\"><br>注意图中的红框， 两个都是Yes， 说明开启成功。如果其中一个是No， 那就说明不成功。需要查看mysql的错误日志。有时候密码填错了， 有时候防火墙的3306没有打开。ip地址不对，等等。 都会导致失败。<br>mysql的错误日志一般在：<strong>/usr/local/mysql/data/</strong>;文件名应该是你的机器名， <strong>hostname.err</strong> 你换成你自己的。</p>\n<p>到这里主-从复制已经打开了。 我们先来实验一下。<br>我们在A的数据库里面去 添加数据：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87012.png\" alt=\"\"><br>我在A的 hello数据库的test表中 连续插入了3条数据，  注意看他们的自增长id， 分别是1,11,21.  知道这是为什么吗。 前面已经说过了，不懂再回去看。</p>\n<p>我们去看一下B数据库有没有这三条数据：<br>打开B的数据库：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87013.png\" alt=\"\"></p>\n<p><strong>此时不要在B中修改数据。 我们接着配置从B到A的复制。  如果你只需要主从复制的话， 到这里就结束了。后面可以不看了。 所有A中的修改都能自动同步到B， 但是对B的修改却不能同步到A。 因为是单向的。 如果需要双向同步的话，需要再做一次从B到A的复制。</strong></p>\n<hr>\n<h3 id=\"主主复制\"><a href=\"#主主复制\" class=\"headerlink\" title=\"主主复制\"></a>主主复制</h3><p>基本跟上面一样：我们简单一点介绍：</p>\n<h4 id=\"在B中创建用户\"><a href=\"#在B中创建用户\" class=\"headerlink\" title=\"在B中创建用户\"></a>在B中创建用户</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">replication</span> <span class=\"keyword\">slave</span> <span class=\"keyword\">on</span> *.* <span class=\"keyword\">to</span> <span class=\"string\">'repl_user'</span>@<span class=\"string\">'192.***.***.***'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'hj34$%&amp;mnkb'</span>;</div></pre></td></tr></table></figure>\n<h4 id=\"打开-etc-my-cnf-，-开启B的binarylog\"><a href=\"#打开-etc-my-cnf-，-开启B的binarylog\" class=\"headerlink\" title=\"打开 /etc/my.cnf ， 开启B的binarylog\"></a>打开 /etc/my.cnf ， 开启B的binarylog</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87014.png\" alt=\"\"><br>注意红框中所新添加的部分。</p>\n<h4 id=\"我们不需要导出B的初态了，因为它刚刚才从A导过来。-直接记住它的master日志状态\"><a href=\"#我们不需要导出B的初态了，因为它刚刚才从A导过来。-直接记住它的master日志状态\" class=\"headerlink\" title=\"我们不需要导出B的初态了，因为它刚刚才从A导过来。  直接记住它的master日志状态\"></a>我们不需要导出B的初态了，因为它刚刚才从A导过来。  直接记住它的master日志状态</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87015.png\" alt=\"\"><br>记住这两个数值，等会在A上面要用。<br>B服务器就设置完了。</p>\n<h4 id=\"登录到A-服务器。-开启中继：\"><a href=\"#登录到A-服务器。-开启中继：\" class=\"headerlink\" title=\"登录到A 服务器。 开启中继：\"></a>登录到A 服务器。 开启中继：</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87016.png\" alt=\"\"></p>\n<p>注意框中心添加的部分， 不解释了。</p>\n<h4 id=\"启动同步：\"><a href=\"#启动同步：\" class=\"headerlink\" title=\"启动同步：\"></a>启动同步：</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87017.png\" alt=\"\"><br>上面的ip地址是B的ip地址， 因为A把B当做master了。 不解释了。</p>\n<p>然后重启mysql服务。<br>然后查看，slave状态是否正常：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87018.png\" alt=\"\"><br>图中出现了两个No。说明slave没有成功， 即，从B到A的同步没有成功。 我们去查看mysql错误日志，前面说过位置：<strong>/usr/local/mysql/data/</strong> 查看<strong>hostname.err</strong> 文件，打开看看<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87019.png\" alt=\"\"><br>看图中的error信息。  说找不到中继日志文件。<br>这是因为我们在配置A的中继文件时改了中继文件名，但是mysql没有同步。解决办法很简单。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87020.png\" alt=\"\"></p>\n<p>先停掉mysql服务。  找到这三个文件，把他们删掉。 <strong>一定要先停掉mysql服务</strong>。不然还是不成功。你需要重启一下机器了。 或者手动<code>kill mysqld</code>。<br>改好之后， 启动mysql之后。 我们在来检查一下slave状态：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87021.png\" alt=\"\"><br>完成，现在就是<strong>A&lt;—&gt;B</strong>主主互备啦！</p>\n<hr>\n<h1 id=\"深入了解复制\"><a href=\"#深入了解复制\" class=\"headerlink\" title=\"深入了解复制\"></a>深入了解复制</h1><p>已经讨论了关于复制的一些基本东西，下面深入讨论一下复制。</p>\n<h2 id=\"基于语句的复制-Statement-Based-Replication\"><a href=\"#基于语句的复制-Statement-Based-Replication\" class=\"headerlink\" title=\"基于语句的复制(Statement-Based Replication)\"></a>基于语句的复制(Statement-Based Replication)</h2><p>MySQL 5.0及之前的版本仅支持基于语句的复制（也叫做<strong>逻辑复制</strong>，logical replication），这在数据库并不常见。master记录下改变数据的查询，然后，slave从中继日志中读取事件，并执行它，这些SQL语句与master执行的语句一样。<br>这种方式的优点就是实现简单。此外，基于语句的复制的二进制日志可以很好的进行压缩，而且日志的数据量也较小，占用带宽少——例如，一个更新GB的数据的查询仅需要几十个字节的二进制日志。而mysqlbinlog对于基于语句的日志处理十分方便。</p>\n<p>但是，基于语句的复制并不是像它看起来那么简单，因为一些查询语句依赖于master的特定条件，例如，master与slave可能有不同的时间。所以，MySQL的二进制日志的格式不仅仅是查询语句，还包括一些元数据信息，例如，当前的时间戳。即使如此，还是有一些语句，比如，CURRENT USER函数，不能正确的进行复制。此外，存储过程和触发器也是一个问题。</p>\n<p>另外一个问题就是基于语句的复制必须是串行化的。这要求大量特殊的代码，配置，例如InnoDB的next-key锁等。并不是所有的存储引擎都支持基于语句的复制。</p>\n<h2 id=\"基于记录的复制-Row-Based-Replication\"><a href=\"#基于记录的复制-Row-Based-Replication\" class=\"headerlink\" title=\"基于记录的复制(Row-Based Replication)\"></a>基于记录的复制(Row-Based Replication)</h2><p>MySQL增加基于记录的复制，在二进制日志中记录下实际数据的改变，这与其它一些DBMS的实现方式类似。这种方式有优点，也有缺点。优点就是可以对任何语句都能正确工作，一些语句的效率更高。主要的缺点就是二进制日志可能会很大，而且不直观，所以，你不能使用<strong>mysqlbinlog</strong>来查看二进制日志。</p>\n<p>对于一些语句，基于记录的复制能够更有效的工作，如：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; INSERT INTO summary_table(col1, col2, sum_col3)</div><div class=\"line\">    -&gt; SELECT col1, col2, sum(col3)</div><div class=\"line\">    -&gt; FROM enormous_table</div><div class=\"line\">    -&gt; GROUP BY col1, col2;</div></pre></td></tr></table></figure></p>\n<p>假设，只有三种唯一的col1和col2的组合，但是，该查询会扫描原表的许多行，却仅返回三条记录。此时，基于记录的复制效率更高。</p>\n<p>另一方面，下面的语句，基于语句的复制更有效：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; UPDATE enormous_table <span class=\"keyword\">SET</span> col1 <span class=\"comment\">= 0</span>;</div></pre></td></tr></table></figure></p>\n<p>此时使用基于记录的复制代价会非常高。由于两种方式不能对所有情况都能很好的处理，所以，MySQL 5.1支持在基于语句的复制和基于记录的复制之前动态交换。你可以通过设置session变量binlog_format来进行控制。</p>\n<h2 id=\"复制相关的文件\"><a href=\"#复制相关的文件\" class=\"headerlink\" title=\"复制相关的文件\"></a>复制相关的文件</h2><p>除了二进制日志和中继日志文件外，还有其它一些与复制相关的文件。如下</p>\n<ul>\n<li>mysql-bin.index</li>\n</ul>\n<p>服务器一旦开启二进制日志，会产生一个与二日志文件同名，但是以.index结尾的文件。它用于跟踪磁盘上存在哪些二进制日志文件。MySQL用它来定位二进制日志文件。内容与下面类似<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">.\\mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000003</span></div><div class=\"line\">.\\mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000004</span></div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>mysql-relay-bin.index<br>该文件的功能与mysql-bin.index类似，但是它是针对中继日志，而不是二进制日志。内容与下面类似</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">.\\mysql<span class=\"number\">-02</span>-relay-bin<span class=\"number\">.000017</span></div><div class=\"line\">.\\mysql<span class=\"number\">-02</span>-relay-bin<span class=\"number\">.000018</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>master.info<br>保存master的相关信息。不要删除它，否则，slave重启后不能连接master。内容与下面类似</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000010</span></div><div class=\"line\"><span class=\"number\">286</span></div><div class=\"line\">localhost</div><div class=\"line\">repl</div><div class=\"line\"><span class=\"number\">1234</span></div><div class=\"line\"><span class=\"number\">3306</span></div></pre></td></tr></table></figure>\n<p>I/O线程更新master.info文件，内容与下面类似</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">.\\mysql<span class=\"number\">-02</span>-relay-bin<span class=\"number\">.000019</span></div><div class=\"line\"><span class=\"number\">254</span></div><div class=\"line\">mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000010</span></div><div class=\"line\"><span class=\"number\">286</span></div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">52813</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>relay-log.info<br>包含slave中当前二进制日志和中继日志的信息。</p>\n</li>\n</ul>\n<h2 id=\"发送复制事件到其它slave\"><a href=\"#发送复制事件到其它slave\" class=\"headerlink\" title=\"发送复制事件到其它slave\"></a>发送复制事件到其它slave</h2><p>当设置<strong>log_slave_updates</strong>时，你可以让slave扮演其它slave的master。此时，slave把SQL线程执行的事件写进行自己的二进制日志(binary log)，然后，它的slave可以获取这些事件并执行它。如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87022.JPG\" alt=\"\"></p>\n<h2 id=\"复制过滤-Replication-Filters\"><a href=\"#复制过滤-Replication-Filters\" class=\"headerlink\" title=\"复制过滤(Replication Filters)\"></a>复制过滤(Replication Filters)</h2><p>复制过滤可以让你只复制服务器中的一部分数据，有两种复制过滤：在master上过滤二进制日志中的事件；在slave上过滤中继日志中的事件。如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87023.JPG\" alt=\"\"></p>\n<hr>\n<h1 id=\"复制的常用拓扑结构\"><a href=\"#复制的常用拓扑结构\" class=\"headerlink\" title=\"复制的常用拓扑结构\"></a>复制的常用拓扑结构</h1><p>复制的体系结构有以下一些基本原则：<br>(1)    每个slave只能有一个master；<br>(2)    每个slave只能有一个唯一的服务器ID；<br>(3)    每个master可以有很多slave；<br>(4)    如果你设置log_slave_updates，slave可以是其它slave的master，从而扩散master的更新。</p>\n<p>MySQL不支持多主服务器复制(Multimaster Replication)——即一个slave可以有多个master。但是，通过一些简单的组合，我们却可以建立灵活而强大的复制体系结构。</p>\n<h2 id=\"1-单一master和多slave\"><a href=\"#1-单一master和多slave\" class=\"headerlink\" title=\"1.单一master和多slave\"></a>1.单一master和多slave</h2><p>由一个master和一个slave组成复制系统是最简单的情况。Slave之间并不相互通信，只能与master进行通信。<br>在实际应用场景中，MySQL复制90%以上都是一个Master复制到一个或者多个Slave的架构模式，主要用于读压力比较大的应用的数据库端廉价扩展解决方案。因为只要Master和Slave的压力不是太大（尤其是Slave端压力）的话，异步复制的延时一般都很少很少。尤其是自从Slave端的复制方式改成两个线程处理之后，更是减小了Slave端的延时问题。而带来的效益是，对于数据实时性要求不是特别Critical的应用，只需要通过廉价的pcserver来扩展Slave的数量，将读压力分散到多台Slave的机器上面，即可通过分散单台数据库服务器的读压力来解决数据库端的读性能瓶颈，毕竟在大多数数据库应用系统中的读压力还是要比写压力大很多。这在很大程度上解决了目前很多中小型网站的数据库压力瓶颈问题，甚至有些大型网站也在使用类似方案解决数据库瓶颈。<br>如图：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87024.JPG\" alt=\"\"></p>\n<p> 如果写操作较少，而读操作很时，可以采取这种结构。你可以将读操作分布到其它的slave，从而减小master的压力。但是，当slave增加到一定数量时，slave对master的负载以及网络带宽都会成为一个严重的问题。<br>这种结构虽然简单，但是，它却非常灵活，足够满足大多数应用需求。一些建议：</p>\n<ul>\n<li>(1)不同的slave扮演不同的作用(例如使用不同的索引，或者不同的存储引擎)；</li>\n<li>(2)用一个slave作为备用master，只进行复制；</li>\n<li>(3)用一个远程的slave，用于灾难恢复；</li>\n</ul>\n<p>大家应该都比较清楚，从一个Master节点可以复制出多个Slave节点，可能有人会想，那一个Slave节点是否可以从多个Master节点上面进行复制呢？至少在目前来看，MySQL是做不到的，以后是否会支持就不清楚了。<br>MySQL不支持一个Slave节点从多个Master节点来进行复制的架构，主要是为了避免冲突的问题，防止多个数据源之间的数据出现冲突，而造成最后数据的不一致性。不过听说已经有人开发了相关的patch，让MySQL支持一个Slave节点从多个Master结点作为数据源来进行复制，这也正是MySQL开源的性质所带来的好处。</p>\n<h2 id=\"2-主动模式的Master-Master-Master-Master-in-Active-Active-Mode\"><a href=\"#2-主动模式的Master-Master-Master-Master-in-Active-Active-Mode\" class=\"headerlink\" title=\"2.主动模式的Master-Master(Master-Master in Active-Active Mode)\"></a>2.主动模式的Master-Master(Master-Master in Active-Active Mode)</h2><p>Master-Master复制的两台服务器，既是master，又是另一台服务器的slave。这样，任何一方所做的变更，都会通过复制应用到另外一方的数据库中。<br>可能有些人可能会担心，这样搭建复制环境之后，难道不会造成两台MySQL之间的循环复制么？实际上MySQL自己早就想到了这一点，所以在MySQL的BinaryLog中记录了当前MySQL的server-id，而且这个参数也是我们搭建MySQLReplication的时候必须明确指定，而且Master和Slave的<strong>server-id</strong>参数值比需要不一致才能使<strong>MySQLReplication</strong>搭建成功。一旦有了server-id的值之后，MySQL就很容易判断某个变更是从哪一个MySQLServer最初产生的，所以就很容易避免出现循环复制的情况。而且，如果我们不打开记录<strong>Slave</strong>的<strong>BinaryLog</strong>的选项（<strong>--log-slave-update</strong>）的时候，MySQL根本就不会记录复制过程中的变更到BinaryLog中，就更不用担心可能会出现循环复制的情形了。<br>如图：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87025.JPG\" alt=\"\"></p>\n<p>主动的Master-Master复制有一些特殊的用处。例如，地理上分布的两个部分都需要自己的可写的数据副本。这种结构最大的问题就是更新冲突。假设一个表只有一行(一列)的数据，其值为1，如果两个服务器分别同时执行如下语句：<br>在第一个服务器上执行：<code>mysql&gt; UPDATE tbl SET col=col + 1;</code><br>在第二个服务器上执行：<code>mysql&gt; UPDATE tbl SET col=col * 2;</code><br>那么结果是多少呢？一台服务器是4，另一个服务器是3，但是，这并不会产生错误。<br>实际上，MySQL并不支持其它一些DBMS支持的多主服务器复制(Multimaster Replication)，这是MySQL的复制功能很大的一个限制(多主服务器的难点在于解决更新冲突)，但是，如果你实在有这种需求，你可以采用MySQL Cluster，以及将Cluster和Replication结合起来，可以建立强大的高性能的数据库平台。但是，可以通过其它一些方式来模拟这种多主服务器的复制。</p>\n<h2 id=\"3-主动-被动模式的Master-Master-Master-Master-in-Active-Passive-Mode\"><a href=\"#3-主动-被动模式的Master-Master-Master-Master-in-Active-Passive-Mode\" class=\"headerlink\" title=\"3.主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)\"></a>3.主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)</h2><p>这是master-master结构变化而来的，它避免了M-M的缺点，实际上，这是一种具有容错和高可用性的系统。它的不同点在于其中一个服务只能进行只读操作。如图：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87026.JPG\" alt=\"\"></p>\n<h2 id=\"4-级联复制架构-Master-–Slaves-Slaves\"><a href=\"#4-级联复制架构-Master-–Slaves-Slaves\" class=\"headerlink\" title=\"4.级联复制架构 Master –Slaves - Slaves\"></a>4.级联复制架构 Master –Slaves - Slaves</h2><p>在有些应用场景中，可能读写压力差别比较大，读压力特别的大，一个Master可能需要上10台甚至更多的Slave才能够支撑注读的压力。这时候，Master就会比较吃力了，因为仅仅连上来的SlaveIO线程就比较多了，这样写的压力稍微大一点的时候，Master端因为复制就会消耗较多的资源，很容易造成复制的延时。<br>遇到这种情况如何解决呢？这时候我们就可以利用MySQL可以在Slave端记录复制所产生变更的BinaryLog信息的功能，也就是打开<strong>--log-slave-update</strong>选项。然后，通过二级（或者是更多级别）复制来减少Master端因为复制所带来的压力。也就是说，我们首先通过少数几台MySQL从Master来进行复制，这几台机器我们姑且称之为第一级Slave集群，然后其他的Slave再从第一级Slave集群来进行复制。从第一级Slave进行复制的Slave，我称之为第二级Slave集群。如果有需要，我们可以继续往下增加更多层次的复制。这样，我们很容易就控制了每一台MySQL上面所附属Slave的数量。这种架构我称之为Master-Slaves-Slaves架构<br>这种多层级联复制的架构，很容易就解决了Master端因为附属Slave太多而成为瓶颈的风险。下图展示了多层级联复制的Replication架构。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87027.jpg\" alt=\"\"><br>当然，如果条件允许，我更倾向于建议大家通过拆分成多个Replication集群来解决<br>上述瓶颈问题。毕竟Slave并没有减少写的量，所有Slave实际上仍然还是应用了所有的数据变更操作，没有减少任何写IO。相反，Slave越多，整个集群的写IO总量也就会越多，我们没有非常明显的感觉，仅仅只是因为分散到了多台机器上面，所以不是很容易表现出来。<br>此外，增加复制的级联层次，同一个变更传到最底层的Slave所需要经过的MySQL也会更多，同样可能造成延时较长的风险。<br>而如果我们通过分拆集群的方式来解决的话，可能就会要好很多了，当然，分拆集群也需要更复杂的技术和更复杂的应用系统架构。</p>\n<h2 id=\"5-带从服务器的Master-Master结构-Master-Master-with-Slaves\"><a href=\"#5-带从服务器的Master-Master结构-Master-Master-with-Slaves\" class=\"headerlink\" title=\"5.带从服务器的Master-Master结构(Master-Master with Slaves)\"></a>5.带从服务器的Master-Master结构(Master-Master with Slaves)</h2><p>这种结构的优点就是提供了冗余。在地理上分布的复制结构，它不存在单一节点故障问题，而且还可以将读密集型的请求放到slave上。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87028.JPG\" alt=\"\"><br>级联复制在一定程度上面确实解决了Master因为所附属的Slave过多而成为瓶颈的问题，但是他并不能解决人工维护和出现异常需要切换后可能存在重新搭建Replication的问题。这样就很自然的引申出了DualMaster与级联复制结合的Replication架构，我称之为Master-Master-Slaves架构<br>和Master-Slaves-Slaves架构相比，区别仅仅只是将第一级Slave集群换成了一台单独的Master，作为备用Master，然后再从这个备用的Master进行复制到一个Slave集群。</p>\n<p>这种DualMaster与级联复制结合的架构，<strong>最大的好处就是既可以避免主Master的写入操作不会受到Slave集群的复制所带来的影响，同时主Master需要切换的时候也基本上不会出现重搭Replication的情况。但是，这个架构也有一个弊端，那就是备用的Master有可能成为瓶颈，因为如果后面的Slave集群比较大的话，备用Master可能会因为过多的SlaveIO线程请求而成为瓶颈。</strong>当然，该备用Master不提供任何的读服务的时候，瓶颈出现的可能性并不是特别高，如果出现瓶颈，也可以在备用Master后面再次进行级联复制，架设多层Slave集群。当然，级联复制的级别越多，Slave集群可能出现的数据延时也会更为明显，所以考虑使用多层级联复制之前，也需要评估数据延时对应用系统的影响。</p>\n<hr>\n","excerpt":"","more":"<p>本文是在<a href=\"http://blog.byneil.com/\">Neil</a>的博客上看到的一篇博文，由于没有试验环境，没有经过测试，以后测试后会更新并删除本段文字，摘录分享，仅供参考。</p>\n<h1 id=\"mysql-主主互备\"><a href=\"#mysql-主主互备\" class=\"headerlink\" title=\"mysql 主主互备\"></a>mysql 主主互备</h1><p>双机热备的概念简单说一下，就是要保持两个数据库的状态自动同步。对任何一个数据库的操作都自动应用到另外一个数据库，始终保持两个数据库数据一致。 这样做的好处多。</p>\n<ul>\n<li>1.可以做灾备，其中一个坏了可以切换到另一个。 </li>\n<li>2.可以做负载均衡，可以将请求分摊到其中任何一台上，提高网站吞吐量。 </li>\n<li>3.对于异地热备，尤其适合灾备。</li>\n</ul>\n<p><code>mysql -v</code>,查看使用的是mysql 5.5.34，</p>\n<h2 id=\"mysql-备份工作原理\"><a href=\"#mysql-备份工作原理\" class=\"headerlink\" title=\"mysql 备份工作原理\"></a>mysql 备份工作原理</h2><p>简单的说就是把 一个服务器上执行过的sql语句在别的服务器上也重复执行一遍， 这样只要两个数据库的初态是一样的，那么它们就能一直同步。</p>\n<p>当然这种复制和重复都是mysql自动实现的，我们只需要配置即可。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87001.gif\" alt=\"\"><br>上图中有两个服务器， 演示了从一个主服务器（master） 把数据同步到从服务器（slave）的过程。<br>这是一个主-从复制的例子。 主-主互相复制只是把上面的例子反过来再做一遍。 所以我们以这个例子介绍原理。</p>\n<p>对于一个mysql服务器， 一般有两个线程来负责复制和被复制。当开启复制之后。</p>\n<ul>\n<li>1.作为主服务器Master，  会把自己的每一次改动都记录到 二进制日志 Binarylog 中。 （从服务器会负责来读取这个log， 然后在自己那里再执行一遍。）</li>\n<li>2.作为从服务器Slave， 会用master上的账号登陆到 master上， 读取master的Binarylog,  写入到自己的中继日志 Relaylog， 然后自己的sql线程会负责读取这个中继日志，并执行一遍。  到这里主服务器上的更改就同步到从服务器上了。</li>\n</ul>\n<p>在mysql上可以查看当前服务器的主，从状态。 其实就是当前服务器的 Binary（作为主服务器角色）状态和位置。 以及其RelayLog（作为从服务器）的复制进度。</p>\n<p>例如我们在主服务器上查看主状态：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87002.png\" alt=\"\"><br><strong>第一行</strong>表明 当前正在记录的 binarylog文件名是： mysql-bin.000014.<br>我们可以在mysql数据目录下，找到这个文件：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87003.png\" alt=\"\"></p>\n<p><strong>第二行</strong>， 107. 表示当前的文件偏移量， 就是写入在mysql-bin.000014 文件的记录位置。<br>这两点就构成了 主服务器的状态。  配置从服务器的时候，需要用到这两个值。 告诉从服务器从哪读取主服务器的数据。 （从服务器会登录之后，找到这个日志文件，并从这个偏移量之后开始复制。）</p>\n<p><strong>第三行，和第四行</strong>，表示需要记录的数据库和需要忽略的数据库。 只有需要记录的数据库，其变化才会被写入到mysql-bin.000014日志文件中。  后面会再次介绍这两个参数。</p>\n<p>我们还可以在从服务器上，查看从服务器的复制状态：<code>mysql&gt; show slave status\\G</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87004.png\" alt=\"\"><br>我们还是来重点解释途中的红圈的部分：</p>\n<ol>\n<li>Master_host 指的是 主服务器的地址。 </li>\n<li>Master_user 指的是主服务器上用来复制的用户。  从服务器会用此账号来登录主服务。进行复制。</li>\n<li>Master_log_file 就是前面提到的， 主服务器上的日志文件名.</li>\n<li>Read_Master_log_pos 就是前面提到的主服务器的日志记录位置， 从服务器根据这两个条件来选择复制的文件和位置。</li>\n<li>Slave_IO_Running:  指的就是从服务器上负责读取主服务器的线程工作状态。 从服务器用这个专门的线程链接到主服务器上，并把日志拷贝回来。</li>\n<li>Slave_SQL_Running: 指的就是专门执行sql的线程。 它负责把复制回来的Relaylog执行到自己的数据库中。 这两个参数必须都为Yes 才表明复制在正常工作。</li>\n</ol>\n<p>其他的参数之后再介绍。</p>\n<hr>\n<h2 id=\"mysql-双机热备实战\"><a href=\"#mysql-双机热备实战\" class=\"headerlink\" title=\"mysql 双机热备实战\"></a>mysql 双机热备实战</h2><h3 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h3><p>了解了上面的原理之后， 我们来实战。 这里有两个重点， 要想同步数据库状态， 需要相同的初态，然后配置同步才有意义。 当然你可以不要初态，这是你的自由。 我们这里从头开始配置一遍。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87005.png\" alt=\"\"></p>\n<p>我们先以A服务器为起点，  配置它的数据库同步到B。  这就是主-从复制了。 之后再反过来做一次，就可以互相备份了。</p>\n<h4 id=\"在A上面创建专门用于备份的用户\"><a href=\"#在A上面创建专门用于备份的用户\" class=\"headerlink\" title=\"在A上面创建专门用于备份的用户\"></a>在A上面创建专门用于备份的用户</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">replication</span> <span class=\"keyword\">slave</span> <span class=\"keyword\">on</span> *.* <span class=\"keyword\">to</span> <span class=\"string\">'repl_userl'</span>@<span class=\"string\">''</span></div><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">replication</span> <span class=\"keyword\">slave</span> <span class=\"keyword\">on</span> *.* <span class=\"keyword\">to</span> <span class=\"string\">'repl_user'</span>@<span class=\"string\">'192.***.***.***'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'hj34$%&amp;mnkb'</span>;</div></pre></td></tr></table></figure>\n<p>上面把ip地址换成B机器的ip地址。 只允许B登录。安全。<br>用户名为： repl_user<br>密码为： hj34$<strong><em>**</em></strong>nkb<br>这个等会在B上面要用。</p>\n<h4 id=\"开启主服务器的-binarylog。\"><a href=\"#开启主服务器的-binarylog。\" class=\"headerlink\" title=\"开启主服务器的 binarylog。\"></a>开启主服务器的 binarylog。</h4><p>很多服务器是默认开启的，我们这里检查一下：<br>打开 /etc/my.cnf<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87006.png\" alt=\"\"><br>解释一下红框中的配置：<br>前面三行， 你可能已经有了。<br><strong>binlog-do-db</strong> 用来表示，只把哪些数据库的改动记录到binary日志中。 可以写上关注hello数据库。 但是我把它注释掉了。 只是展示一下。 可以写多行，表示关注多个数据库。<br><strong>binlog-ignore-db</strong>表示，需要忽略哪些数据库。我这里忽略了其他的4个数据库。</p>\n<p><strong>最后两行</strong>用于在 双主（多主循环）互相备份。 因为每台数据库服务器都可能在同一个表中插入数据，如果表有一个自动增长的主键，那么就会在多服务器上出现主键冲突。  解决这个问题的办法就是让每个数据库的自增主键不连续。  上图说是， 我假设需要将来可能需要10台服务器做备份， 所以<strong>auto-increment-increment 设为10</strong>。   而 <strong>auto-increment-offset=1 </strong>表示这台服务器的序号。 从1开始， 不超过auto-increment-increment。<br>这样做之后， 我在这台服务器上插入的第一个id就是 1， 第二行的id就是 11了， 而不是2。<br>（同理，在第二台服务器上插入的第一个id就是2， 第二行就是12， 这个后面再介绍） 这样就不会出现主键冲突了。 后面我们会演示这个id的效果。</p>\n<h4 id=\"获取主服务器状态，-和同步初态。\"><a href=\"#获取主服务器状态，-和同步初态。\" class=\"headerlink\" title=\"获取主服务器状态， 和同步初态。\"></a>获取主服务器状态， 和同步初态。</h4><p>假设我现在有这些数据库在A上面。<br>如果你是全新安装的， 那么不需要同步初态，直接跳过这一步，到后面直接查看主服务器状态。<br>这里我们假设有一个 hello 数据库作为初态。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87008.png\" alt=\"\"></p>\n<p>先锁定 hello数据库：<code>FLUSH TABLES WITH READ LOCK;</code></p>\n<p>然后导出数据：<br>我这里只需要导出hello数据库， 如果你有多个数据库作为初态的话， 需要导出所有这些数据库：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87007.png\" alt=\"\"></p>\n<p>然后查看A服务器的binary日志位置：<br>记住这个文件名和 位置， 等会在从服务器上会用到。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87009.png\" alt=\"\"></p>\n<p>主服务器已经做完了， 可以解除锁定了：<code>UNLOCK TABLES;</code></p>\n<h4 id=\"设置从服务器-B-需要复制的数据库\"><a href=\"#设置从服务器-B-需要复制的数据库\" class=\"headerlink\" title=\"设置从服务器 B 需要复制的数据库\"></a>设置从服务器 B 需要复制的数据库</h4><p>打开从服务器 B 的 /etc/my.cnf 文件：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87010.png\" alt=\"\"></p>\n<p>解释一下上面的内容:</p>\n<ul>\n<li><strong>server-id</strong> 必须保证每个服务器不一样。 这可能和循环同步有关。 防止进入死循环。</li>\n<li><strong>replicate-do-db</strong> 可以指定需要复制的数据库， 我这里注掉了。 演示一下。</li>\n<li><strong>replicate-ignore-db</strong> 复制时需要排除的数据库， 我使用了，这个。 除开系统的几个数据库之外，所有的数据库都复制。</li>\n<li><strong>relay_log</strong> 中继日志的名字。 前面说到了， 复制线程需要先把远程的变化拷贝到这个中继日志中， 在执行。</li>\n<li><strong>log-slave-updates </strong>意思是，中继日志执行之后，这些变化是否需要计入自己的binarylog。 当你的B服务器需要作为另外一个服务器的主服务器的时候需要打开。  就是双主互相备份，或者多主循环备份。 我们这里需要， 所以打开。</li>\n</ul>\n<p>保存， 重启mysql。</p>\n<h4 id=\"导入初态，-开始同步。\"><a href=\"#导入初态，-开始同步。\" class=\"headerlink\" title=\"导入初态， 开始同步。\"></a>导入初态， 开始同步。</h4><p>把刚才从A服务器上导出的 hello.sql 导入到 B的hello数据库中， 如果B现在没有hello数据库，请先创建一个， 然后再导入：<br>创建数据库：<br>mysql&gt; <code>create database hello default charset utf8;</code><br>把hello.sql 上传到B上， 然后导入：<code>mysql -uroot -p hello &lt; hello.sql</code><br>如果你刚才导出了多个数据库， 需要把他们都一一上传导入。</p>\n<p>开启同步, 在B服务器上执行：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">CHANGE</span> <span class=\"keyword\">MASTER</span> <span class=\"keyword\">TO</span> </div><div class=\"line\">      MASTER_HOST=<span class=\"string\">'192.***.***.***'</span>, </div><div class=\"line\">      MASTER_USER=<span class=\"string\">'repl_user'</span>, </div><div class=\"line\">      MASTER_PASSWORD=<span class=\"string\">'hj3****'</span>, </div><div class=\"line\">      MASTER_LOG_FILE=<span class=\"string\">'mysql-bin.000004'</span>, </div><div class=\"line\">      MASTER_LOG_POS=<span class=\"number\">7145</span>;</div></pre></td></tr></table></figure></p>\n<p>上面几个参数就不解释了,前面说过了。</p>\n<p>重启mysql，然后查看slave线程开启了没：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87011.png\" alt=\"\"><br>注意图中的红框， 两个都是Yes， 说明开启成功。如果其中一个是No， 那就说明不成功。需要查看mysql的错误日志。有时候密码填错了， 有时候防火墙的3306没有打开。ip地址不对，等等。 都会导致失败。<br>mysql的错误日志一般在：<strong>/usr/local/mysql/data/</strong>;文件名应该是你的机器名， <strong>hostname.err</strong> 你换成你自己的。</p>\n<p>到这里主-从复制已经打开了。 我们先来实验一下。<br>我们在A的数据库里面去 添加数据：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87012.png\" alt=\"\"><br>我在A的 hello数据库的test表中 连续插入了3条数据，  注意看他们的自增长id， 分别是1,11,21.  知道这是为什么吗。 前面已经说过了，不懂再回去看。</p>\n<p>我们去看一下B数据库有没有这三条数据：<br>打开B的数据库：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87013.png\" alt=\"\"></p>\n<p><strong>此时不要在B中修改数据。 我们接着配置从B到A的复制。  如果你只需要主从复制的话， 到这里就结束了。后面可以不看了。 所有A中的修改都能自动同步到B， 但是对B的修改却不能同步到A。 因为是单向的。 如果需要双向同步的话，需要再做一次从B到A的复制。</strong></p>\n<hr>\n<h3 id=\"主主复制\"><a href=\"#主主复制\" class=\"headerlink\" title=\"主主复制\"></a>主主复制</h3><p>基本跟上面一样：我们简单一点介绍：</p>\n<h4 id=\"在B中创建用户\"><a href=\"#在B中创建用户\" class=\"headerlink\" title=\"在B中创建用户\"></a>在B中创建用户</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">replication</span> <span class=\"keyword\">slave</span> <span class=\"keyword\">on</span> *.* <span class=\"keyword\">to</span> <span class=\"string\">'repl_user'</span>@<span class=\"string\">'192.***.***.***'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'hj34$%&amp;mnkb'</span>;</div></pre></td></tr></table></figure>\n<h4 id=\"打开-etc-my-cnf-，-开启B的binarylog\"><a href=\"#打开-etc-my-cnf-，-开启B的binarylog\" class=\"headerlink\" title=\"打开 /etc/my.cnf ， 开启B的binarylog\"></a>打开 /etc/my.cnf ， 开启B的binarylog</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87014.png\" alt=\"\"><br>注意红框中所新添加的部分。</p>\n<h4 id=\"我们不需要导出B的初态了，因为它刚刚才从A导过来。-直接记住它的master日志状态\"><a href=\"#我们不需要导出B的初态了，因为它刚刚才从A导过来。-直接记住它的master日志状态\" class=\"headerlink\" title=\"我们不需要导出B的初态了，因为它刚刚才从A导过来。  直接记住它的master日志状态\"></a>我们不需要导出B的初态了，因为它刚刚才从A导过来。  直接记住它的master日志状态</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87015.png\" alt=\"\"><br>记住这两个数值，等会在A上面要用。<br>B服务器就设置完了。</p>\n<h4 id=\"登录到A-服务器。-开启中继：\"><a href=\"#登录到A-服务器。-开启中继：\" class=\"headerlink\" title=\"登录到A 服务器。 开启中继：\"></a>登录到A 服务器。 开启中继：</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87016.png\" alt=\"\"></p>\n<p>注意框中心添加的部分， 不解释了。</p>\n<h4 id=\"启动同步：\"><a href=\"#启动同步：\" class=\"headerlink\" title=\"启动同步：\"></a>启动同步：</h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87017.png\" alt=\"\"><br>上面的ip地址是B的ip地址， 因为A把B当做master了。 不解释了。</p>\n<p>然后重启mysql服务。<br>然后查看，slave状态是否正常：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87018.png\" alt=\"\"><br>图中出现了两个No。说明slave没有成功， 即，从B到A的同步没有成功。 我们去查看mysql错误日志，前面说过位置：<strong>/usr/local/mysql/data/</strong> 查看<strong>hostname.err</strong> 文件，打开看看<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87019.png\" alt=\"\"><br>看图中的error信息。  说找不到中继日志文件。<br>这是因为我们在配置A的中继文件时改了中继文件名，但是mysql没有同步。解决办法很简单。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87020.png\" alt=\"\"></p>\n<p>先停掉mysql服务。  找到这三个文件，把他们删掉。 <strong>一定要先停掉mysql服务</strong>。不然还是不成功。你需要重启一下机器了。 或者手动<code>kill mysqld</code>。<br>改好之后， 启动mysql之后。 我们在来检查一下slave状态：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87021.png\" alt=\"\"><br>完成，现在就是<strong>A&lt;—&gt;B</strong>主主互备啦！</p>\n<hr>\n<h1 id=\"深入了解复制\"><a href=\"#深入了解复制\" class=\"headerlink\" title=\"深入了解复制\"></a>深入了解复制</h1><p>已经讨论了关于复制的一些基本东西，下面深入讨论一下复制。</p>\n<h2 id=\"基于语句的复制-Statement-Based-Replication\"><a href=\"#基于语句的复制-Statement-Based-Replication\" class=\"headerlink\" title=\"基于语句的复制(Statement-Based Replication)\"></a>基于语句的复制(Statement-Based Replication)</h2><p>MySQL 5.0及之前的版本仅支持基于语句的复制（也叫做<strong>逻辑复制</strong>，logical replication），这在数据库并不常见。master记录下改变数据的查询，然后，slave从中继日志中读取事件，并执行它，这些SQL语句与master执行的语句一样。<br>这种方式的优点就是实现简单。此外，基于语句的复制的二进制日志可以很好的进行压缩，而且日志的数据量也较小，占用带宽少——例如，一个更新GB的数据的查询仅需要几十个字节的二进制日志。而mysqlbinlog对于基于语句的日志处理十分方便。</p>\n<p>但是，基于语句的复制并不是像它看起来那么简单，因为一些查询语句依赖于master的特定条件，例如，master与slave可能有不同的时间。所以，MySQL的二进制日志的格式不仅仅是查询语句，还包括一些元数据信息，例如，当前的时间戳。即使如此，还是有一些语句，比如，CURRENT USER函数，不能正确的进行复制。此外，存储过程和触发器也是一个问题。</p>\n<p>另外一个问题就是基于语句的复制必须是串行化的。这要求大量特殊的代码，配置，例如InnoDB的next-key锁等。并不是所有的存储引擎都支持基于语句的复制。</p>\n<h2 id=\"基于记录的复制-Row-Based-Replication\"><a href=\"#基于记录的复制-Row-Based-Replication\" class=\"headerlink\" title=\"基于记录的复制(Row-Based Replication)\"></a>基于记录的复制(Row-Based Replication)</h2><p>MySQL增加基于记录的复制，在二进制日志中记录下实际数据的改变，这与其它一些DBMS的实现方式类似。这种方式有优点，也有缺点。优点就是可以对任何语句都能正确工作，一些语句的效率更高。主要的缺点就是二进制日志可能会很大，而且不直观，所以，你不能使用<strong>mysqlbinlog</strong>来查看二进制日志。</p>\n<p>对于一些语句，基于记录的复制能够更有效的工作，如：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; INSERT INTO summary_table(col1, col2, sum_col3)</div><div class=\"line\">    -&gt; SELECT col1, col2, sum(col3)</div><div class=\"line\">    -&gt; FROM enormous_table</div><div class=\"line\">    -&gt; GROUP BY col1, col2;</div></pre></td></tr></table></figure></p>\n<p>假设，只有三种唯一的col1和col2的组合，但是，该查询会扫描原表的许多行，却仅返回三条记录。此时，基于记录的复制效率更高。</p>\n<p>另一方面，下面的语句，基于语句的复制更有效：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; UPDATE enormous_table <span class=\"keyword\">SET</span> col1 <span class=\"comment\">= 0</span>;</div></pre></td></tr></table></figure></p>\n<p>此时使用基于记录的复制代价会非常高。由于两种方式不能对所有情况都能很好的处理，所以，MySQL 5.1支持在基于语句的复制和基于记录的复制之前动态交换。你可以通过设置session变量binlog_format来进行控制。</p>\n<h2 id=\"复制相关的文件\"><a href=\"#复制相关的文件\" class=\"headerlink\" title=\"复制相关的文件\"></a>复制相关的文件</h2><p>除了二进制日志和中继日志文件外，还有其它一些与复制相关的文件。如下</p>\n<ul>\n<li>mysql-bin.index</li>\n</ul>\n<p>服务器一旦开启二进制日志，会产生一个与二日志文件同名，但是以.index结尾的文件。它用于跟踪磁盘上存在哪些二进制日志文件。MySQL用它来定位二进制日志文件。内容与下面类似<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">.\\mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000003</span></div><div class=\"line\">.\\mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000004</span></div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>mysql-relay-bin.index<br>该文件的功能与mysql-bin.index类似，但是它是针对中继日志，而不是二进制日志。内容与下面类似</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">.\\mysql<span class=\"number\">-02</span>-relay-bin<span class=\"number\">.000017</span></div><div class=\"line\">.\\mysql<span class=\"number\">-02</span>-relay-bin<span class=\"number\">.000018</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>master.info<br>保存master的相关信息。不要删除它，否则，slave重启后不能连接master。内容与下面类似</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000010</span></div><div class=\"line\"><span class=\"number\">286</span></div><div class=\"line\">localhost</div><div class=\"line\">repl</div><div class=\"line\"><span class=\"number\">1234</span></div><div class=\"line\"><span class=\"number\">3306</span></div></pre></td></tr></table></figure>\n<p>I/O线程更新master.info文件，内容与下面类似</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">.\\mysql<span class=\"number\">-02</span>-relay-bin<span class=\"number\">.000019</span></div><div class=\"line\"><span class=\"number\">254</span></div><div class=\"line\">mysql<span class=\"number\">-01</span>-bin<span class=\"number\">.000010</span></div><div class=\"line\"><span class=\"number\">286</span></div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">52813</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>relay-log.info<br>包含slave中当前二进制日志和中继日志的信息。</p>\n</li>\n</ul>\n<h2 id=\"发送复制事件到其它slave\"><a href=\"#发送复制事件到其它slave\" class=\"headerlink\" title=\"发送复制事件到其它slave\"></a>发送复制事件到其它slave</h2><p>当设置<strong>log_slave_updates</strong>时，你可以让slave扮演其它slave的master。此时，slave把SQL线程执行的事件写进行自己的二进制日志(binary log)，然后，它的slave可以获取这些事件并执行它。如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87022.JPG\" alt=\"\"></p>\n<h2 id=\"复制过滤-Replication-Filters\"><a href=\"#复制过滤-Replication-Filters\" class=\"headerlink\" title=\"复制过滤(Replication Filters)\"></a>复制过滤(Replication Filters)</h2><p>复制过滤可以让你只复制服务器中的一部分数据，有两种复制过滤：在master上过滤二进制日志中的事件；在slave上过滤中继日志中的事件。如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87023.JPG\" alt=\"\"></p>\n<hr>\n<h1 id=\"复制的常用拓扑结构\"><a href=\"#复制的常用拓扑结构\" class=\"headerlink\" title=\"复制的常用拓扑结构\"></a>复制的常用拓扑结构</h1><p>复制的体系结构有以下一些基本原则：<br>(1)    每个slave只能有一个master；<br>(2)    每个slave只能有一个唯一的服务器ID；<br>(3)    每个master可以有很多slave；<br>(4)    如果你设置log_slave_updates，slave可以是其它slave的master，从而扩散master的更新。</p>\n<p>MySQL不支持多主服务器复制(Multimaster Replication)——即一个slave可以有多个master。但是，通过一些简单的组合，我们却可以建立灵活而强大的复制体系结构。</p>\n<h2 id=\"1-单一master和多slave\"><a href=\"#1-单一master和多slave\" class=\"headerlink\" title=\"1.单一master和多slave\"></a>1.单一master和多slave</h2><p>由一个master和一个slave组成复制系统是最简单的情况。Slave之间并不相互通信，只能与master进行通信。<br>在实际应用场景中，MySQL复制90%以上都是一个Master复制到一个或者多个Slave的架构模式，主要用于读压力比较大的应用的数据库端廉价扩展解决方案。因为只要Master和Slave的压力不是太大（尤其是Slave端压力）的话，异步复制的延时一般都很少很少。尤其是自从Slave端的复制方式改成两个线程处理之后，更是减小了Slave端的延时问题。而带来的效益是，对于数据实时性要求不是特别Critical的应用，只需要通过廉价的pcserver来扩展Slave的数量，将读压力分散到多台Slave的机器上面，即可通过分散单台数据库服务器的读压力来解决数据库端的读性能瓶颈，毕竟在大多数数据库应用系统中的读压力还是要比写压力大很多。这在很大程度上解决了目前很多中小型网站的数据库压力瓶颈问题，甚至有些大型网站也在使用类似方案解决数据库瓶颈。<br>如图：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87024.JPG\" alt=\"\"></p>\n<p> 如果写操作较少，而读操作很时，可以采取这种结构。你可以将读操作分布到其它的slave，从而减小master的压力。但是，当slave增加到一定数量时，slave对master的负载以及网络带宽都会成为一个严重的问题。<br>这种结构虽然简单，但是，它却非常灵活，足够满足大多数应用需求。一些建议：</p>\n<ul>\n<li>(1)不同的slave扮演不同的作用(例如使用不同的索引，或者不同的存储引擎)；</li>\n<li>(2)用一个slave作为备用master，只进行复制；</li>\n<li>(3)用一个远程的slave，用于灾难恢复；</li>\n</ul>\n<p>大家应该都比较清楚，从一个Master节点可以复制出多个Slave节点，可能有人会想，那一个Slave节点是否可以从多个Master节点上面进行复制呢？至少在目前来看，MySQL是做不到的，以后是否会支持就不清楚了。<br>MySQL不支持一个Slave节点从多个Master节点来进行复制的架构，主要是为了避免冲突的问题，防止多个数据源之间的数据出现冲突，而造成最后数据的不一致性。不过听说已经有人开发了相关的patch，让MySQL支持一个Slave节点从多个Master结点作为数据源来进行复制，这也正是MySQL开源的性质所带来的好处。</p>\n<h2 id=\"2-主动模式的Master-Master-Master-Master-in-Active-Active-Mode\"><a href=\"#2-主动模式的Master-Master-Master-Master-in-Active-Active-Mode\" class=\"headerlink\" title=\"2.主动模式的Master-Master(Master-Master in Active-Active Mode)\"></a>2.主动模式的Master-Master(Master-Master in Active-Active Mode)</h2><p>Master-Master复制的两台服务器，既是master，又是另一台服务器的slave。这样，任何一方所做的变更，都会通过复制应用到另外一方的数据库中。<br>可能有些人可能会担心，这样搭建复制环境之后，难道不会造成两台MySQL之间的循环复制么？实际上MySQL自己早就想到了这一点，所以在MySQL的BinaryLog中记录了当前MySQL的server-id，而且这个参数也是我们搭建MySQLReplication的时候必须明确指定，而且Master和Slave的<strong>server-id</strong>参数值比需要不一致才能使<strong>MySQLReplication</strong>搭建成功。一旦有了server-id的值之后，MySQL就很容易判断某个变更是从哪一个MySQLServer最初产生的，所以就很容易避免出现循环复制的情况。而且，如果我们不打开记录<strong>Slave</strong>的<strong>BinaryLog</strong>的选项（<strong>--log-slave-update</strong>）的时候，MySQL根本就不会记录复制过程中的变更到BinaryLog中，就更不用担心可能会出现循环复制的情形了。<br>如图：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87025.JPG\" alt=\"\"></p>\n<p>主动的Master-Master复制有一些特殊的用处。例如，地理上分布的两个部分都需要自己的可写的数据副本。这种结构最大的问题就是更新冲突。假设一个表只有一行(一列)的数据，其值为1，如果两个服务器分别同时执行如下语句：<br>在第一个服务器上执行：<code>mysql&gt; UPDATE tbl SET col=col + 1;</code><br>在第二个服务器上执行：<code>mysql&gt; UPDATE tbl SET col=col * 2;</code><br>那么结果是多少呢？一台服务器是4，另一个服务器是3，但是，这并不会产生错误。<br>实际上，MySQL并不支持其它一些DBMS支持的多主服务器复制(Multimaster Replication)，这是MySQL的复制功能很大的一个限制(多主服务器的难点在于解决更新冲突)，但是，如果你实在有这种需求，你可以采用MySQL Cluster，以及将Cluster和Replication结合起来，可以建立强大的高性能的数据库平台。但是，可以通过其它一些方式来模拟这种多主服务器的复制。</p>\n<h2 id=\"3-主动-被动模式的Master-Master-Master-Master-in-Active-Passive-Mode\"><a href=\"#3-主动-被动模式的Master-Master-Master-Master-in-Active-Passive-Mode\" class=\"headerlink\" title=\"3.主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)\"></a>3.主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)</h2><p>这是master-master结构变化而来的，它避免了M-M的缺点，实际上，这是一种具有容错和高可用性的系统。它的不同点在于其中一个服务只能进行只读操作。如图：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87026.JPG\" alt=\"\"></p>\n<h2 id=\"4-级联复制架构-Master-–Slaves-Slaves\"><a href=\"#4-级联复制架构-Master-–Slaves-Slaves\" class=\"headerlink\" title=\"4.级联复制架构 Master –Slaves - Slaves\"></a>4.级联复制架构 Master –Slaves - Slaves</h2><p>在有些应用场景中，可能读写压力差别比较大，读压力特别的大，一个Master可能需要上10台甚至更多的Slave才能够支撑注读的压力。这时候，Master就会比较吃力了，因为仅仅连上来的SlaveIO线程就比较多了，这样写的压力稍微大一点的时候，Master端因为复制就会消耗较多的资源，很容易造成复制的延时。<br>遇到这种情况如何解决呢？这时候我们就可以利用MySQL可以在Slave端记录复制所产生变更的BinaryLog信息的功能，也就是打开<strong>--log-slave-update</strong>选项。然后，通过二级（或者是更多级别）复制来减少Master端因为复制所带来的压力。也就是说，我们首先通过少数几台MySQL从Master来进行复制，这几台机器我们姑且称之为第一级Slave集群，然后其他的Slave再从第一级Slave集群来进行复制。从第一级Slave进行复制的Slave，我称之为第二级Slave集群。如果有需要，我们可以继续往下增加更多层次的复制。这样，我们很容易就控制了每一台MySQL上面所附属Slave的数量。这种架构我称之为Master-Slaves-Slaves架构<br>这种多层级联复制的架构，很容易就解决了Master端因为附属Slave太多而成为瓶颈的风险。下图展示了多层级联复制的Replication架构。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87027.jpg\" alt=\"\"><br>当然，如果条件允许，我更倾向于建议大家通过拆分成多个Replication集群来解决<br>上述瓶颈问题。毕竟Slave并没有减少写的量，所有Slave实际上仍然还是应用了所有的数据变更操作，没有减少任何写IO。相反，Slave越多，整个集群的写IO总量也就会越多，我们没有非常明显的感觉，仅仅只是因为分散到了多台机器上面，所以不是很容易表现出来。<br>此外，增加复制的级联层次，同一个变更传到最底层的Slave所需要经过的MySQL也会更多，同样可能造成延时较长的风险。<br>而如果我们通过分拆集群的方式来解决的话，可能就会要好很多了，当然，分拆集群也需要更复杂的技术和更复杂的应用系统架构。</p>\n<h2 id=\"5-带从服务器的Master-Master结构-Master-Master-with-Slaves\"><a href=\"#5-带从服务器的Master-Master结构-Master-Master-with-Slaves\" class=\"headerlink\" title=\"5.带从服务器的Master-Master结构(Master-Master with Slaves)\"></a>5.带从服务器的Master-Master结构(Master-Master with Slaves)</h2><p>这种结构的优点就是提供了冗余。在地理上分布的复制结构，它不存在单一节点故障问题，而且还可以将读密集型的请求放到slave上。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E4%B8%BB%E4%BA%92%E5%A4%87028.JPG\" alt=\"\"><br>级联复制在一定程度上面确实解决了Master因为所附属的Slave过多而成为瓶颈的问题，但是他并不能解决人工维护和出现异常需要切换后可能存在重新搭建Replication的问题。这样就很自然的引申出了DualMaster与级联复制结合的Replication架构，我称之为Master-Master-Slaves架构<br>和Master-Slaves-Slaves架构相比，区别仅仅只是将第一级Slave集群换成了一台单独的Master，作为备用Master，然后再从这个备用的Master进行复制到一个Slave集群。</p>\n<p>这种DualMaster与级联复制结合的架构，<strong>最大的好处就是既可以避免主Master的写入操作不会受到Slave集群的复制所带来的影响，同时主Master需要切换的时候也基本上不会出现重搭Replication的情况。但是，这个架构也有一个弊端，那就是备用的Master有可能成为瓶颈，因为如果后面的Slave集群比较大的话，备用Master可能会因为过多的SlaveIO线程请求而成为瓶颈。</strong>当然，该备用Master不提供任何的读服务的时候，瓶颈出现的可能性并不是特别高，如果出现瓶颈，也可以在备用Master后面再次进行级联复制，架设多层Slave集群。当然，级联复制的级别越多，Slave集群可能出现的数据延时也会更为明显，所以考虑使用多层级联复制之前，也需要评估数据延时对应用系统的影响。</p>\n<hr>\n"},{"title":"MongoDB","abbrlink":51937,"date":"2016-11-10T06:24:38.000Z","_content":"\n**本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！**\n\n# 安装\n这里安装的是3.2版本。\n\n## yum安装\n```\nvim /etc/yum.repos.d/mongodb.repo\n\n[MongoDB]\nname=MongoDB Repository\nbaseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/\ngpgcheck=0\nenabled=1\n\nyum -y install mongodb-org\n/etc/init.d/mongod restart\nchkconfig mongod on\nmongod --version```\n\n## 源码安装\n```\nwget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.8.tgz\n或：\nwget https://fossies.org/linux/misc/mongodb-linux-x86_64-3.2.8.tgz\n\ntar -xf mongodb-linux-x86_64-rhel62-3.2.8.tgz -C /usr/local/    #注意解压的包名\ncd /usr/local/\nmv mongodb-linux-x86_64-rhel62-3.2.8 mongodb\nmkdir /usr/local/mongodb/data\n\nvim /etc/profile\nexport PATH=$PATH:/usr/local/mongodb/bin\n\nsource /etc/profile\n安装好直接可以用了```\n\n---\n# 配置\n## 修改配置文件\n```\nvim /usr/local/mongodb/mongodb.conf\n#端口\nport=27017\n#数据文件存放目录\ndbpath= /usr/local/mongodb/data\n#日志文件存放目录\nlogpath= /usr/local/mongodb/mongodb.log\n#使用追加的方式写日志\nlogappend=true\n#以守护程序的方式启用，即在后台运行\nfork=true\n#最大同时连接数\nmaxConns=500\n#只允许通过本机访问\n#bind_ip=127.0.0.1\n#启用验证\n#auth = true  #注释掉不启用用户认证，创建好用户后再启用\n```\n\n\n## 启动mongodb：\n```\n/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf```\n\n---\n# 创建用户、管理用户\n\n**read**：允许用户读取指定数据库\n**readWrite**：允许用户读写指定数据库\n**dbAdmin**：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile\n**userAdmin**：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户\n**clusterAdmin**：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。\n**readAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的读权限\n**readWriteAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的读写权限\n**userAdminAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限\n**dbAdminAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。\n**root**：只在admin数据库中可用。超级账号，超级权限\n\n## 创建用户\n对**admin**数据库，创建一个**suadmin**用户，密码是**ilannipasswd**，并且赋予**dbAdminAnyDatabase和userAdminAnyDatabase权限**\n```\nmongo\nuse admin\ndb.createUser({user:'suadmin',pwd:'ilannipasswd',roles:[{role:'dbAdminAnyDatabase',db:'admin'},{role:'userAdminAnyDatabase',db:'admin'}]})```\n\n### 验证刚刚创建的用户\n```\ndb.auth('suadmin','ilannipasswd')\n或者：\ndb.createUser({user:'suadmin',pwd:'ilannipasswd',roles:[{role:'dbAdminAnyDatabase',db:'admin'}]})```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB001.png)\n返回1表示成功。\n\n然后退出mongodb，启用用户验证**auth = true**，再次启动**mongodb**\n```\npgrep -f mongodb |xargs kill -2\nvim /usr/local/mongodb/mongodb.conf\n#启用验证\nauth = true\n\n#启动mongo\n/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf\n\n\nmongo localhost:27017/admin -u suadmin -p ilannipasswd\nshow users\nshow dbs\nshow collections```\n\n查看整个mongoDB全部的用户：`db.system.users.find()`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB002.png)\n\n## 接着测试,创建库,创建用户\n创建ilanni数据库，然后创建ilanniadmin用户，授予readWrite权限\n```\nuse ilanni\ndb.createUser({user:'ilanniadmin',pwd:'ilanni123456',roles:[{role:'readWrite',db:'ilanni'}]})\n或者\ndb.createUser({user:'ilanniadmin',pwd:'ilanni123456',roles:[{role:'dbAdmin',db:'ilanni'},{role:'readWrite',db:'ilanni'}]})```\n\n验证刚刚创建的用户：`db.auth('ilanniadmin','ilanni123456')`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB003.png)\n注意，在**use ilanni**后，ilanni实际上还没真正建立起来，只是表明目前是在使用ilanni了。如果什么都不操作离开的话,这个库就会被系统删除.所以我们还要执行下面的命令:\n```\ndb.ilanni.insert({'name':'tompig'});\ndb.ilanni.insert({'name':'tompig1','id':1});```\n\n使用刚刚创建的**ilanniadmin**用户登陆数据库，然后插入一些，并查看\n```\nmongo localhost:27017/ilanni -u ilanniadmin -p ilanni123456\ndb.ilanni.findOne()\ndb.ilanni.find()```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB004.png)\n现在我们再使用**suadmin**用户登陆到服务器，查看服务器上的数据库\n```\nmongo localhost:27017/admin -u suadmin -p ilanni123456\nshow dbs```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB005.png)\n通过上图，我们可以看到刚刚创建的ilanni数据库\n\n## 删除库，删除用户\n现在我们来测试数据库的删除\n```\nmongo localhost:27017/admin -u suadmin -p ilannipasswd\nuse ilanni\ndb.dropDatabase();```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB006.png)\n通过shell删除ilanni数据库\n\n现在我们来测试用户的删除\n\n\n导入数据：`mongoimport --port 27017 -d tms -c mod < mongo_data/mod.json`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB007.png)\n\n命令行连接mongodb数据库：\n```\n./mongo\nhelp        #查看帮助\nshow dbs    #查看所有的mongodb数据库\nuse tms     #使用tms数据库\ndb.status() #查看数据库的信息```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB008.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB009.png)\n\n删除数据库\n```\nshow dbs\nuse tms\ndb.dropDatabase()```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB010.png)\n导出数据：`mongoexport --port 27017 -d tms -c mod -o tms.json`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB011.png)\n\n---\n\n\n\n\n\n\n\n","source":"_posts/数据库/2016-11-10-MongoDB数据库.md","raw":"---\ntitle: MongoDB\ncategories:\n  - 数据库\ntags:\n  - MongoDB3.2\n  - 分布式数据库\nabbrlink: 51937\ndate: 2016-11-10 14:24:38\n---\n\n**本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！**\n\n# 安装\n这里安装的是3.2版本。\n\n## yum安装\n```\nvim /etc/yum.repos.d/mongodb.repo\n\n[MongoDB]\nname=MongoDB Repository\nbaseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/\ngpgcheck=0\nenabled=1\n\nyum -y install mongodb-org\n/etc/init.d/mongod restart\nchkconfig mongod on\nmongod --version```\n\n## 源码安装\n```\nwget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.8.tgz\n或：\nwget https://fossies.org/linux/misc/mongodb-linux-x86_64-3.2.8.tgz\n\ntar -xf mongodb-linux-x86_64-rhel62-3.2.8.tgz -C /usr/local/    #注意解压的包名\ncd /usr/local/\nmv mongodb-linux-x86_64-rhel62-3.2.8 mongodb\nmkdir /usr/local/mongodb/data\n\nvim /etc/profile\nexport PATH=$PATH:/usr/local/mongodb/bin\n\nsource /etc/profile\n安装好直接可以用了```\n\n---\n# 配置\n## 修改配置文件\n```\nvim /usr/local/mongodb/mongodb.conf\n#端口\nport=27017\n#数据文件存放目录\ndbpath= /usr/local/mongodb/data\n#日志文件存放目录\nlogpath= /usr/local/mongodb/mongodb.log\n#使用追加的方式写日志\nlogappend=true\n#以守护程序的方式启用，即在后台运行\nfork=true\n#最大同时连接数\nmaxConns=500\n#只允许通过本机访问\n#bind_ip=127.0.0.1\n#启用验证\n#auth = true  #注释掉不启用用户认证，创建好用户后再启用\n```\n\n\n## 启动mongodb：\n```\n/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf```\n\n---\n# 创建用户、管理用户\n\n**read**：允许用户读取指定数据库\n**readWrite**：允许用户读写指定数据库\n**dbAdmin**：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile\n**userAdmin**：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户\n**clusterAdmin**：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。\n**readAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的读权限\n**readWriteAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的读写权限\n**userAdminAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限\n**dbAdminAnyDatabase**：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。\n**root**：只在admin数据库中可用。超级账号，超级权限\n\n## 创建用户\n对**admin**数据库，创建一个**suadmin**用户，密码是**ilannipasswd**，并且赋予**dbAdminAnyDatabase和userAdminAnyDatabase权限**\n```\nmongo\nuse admin\ndb.createUser({user:'suadmin',pwd:'ilannipasswd',roles:[{role:'dbAdminAnyDatabase',db:'admin'},{role:'userAdminAnyDatabase',db:'admin'}]})```\n\n### 验证刚刚创建的用户\n```\ndb.auth('suadmin','ilannipasswd')\n或者：\ndb.createUser({user:'suadmin',pwd:'ilannipasswd',roles:[{role:'dbAdminAnyDatabase',db:'admin'}]})```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB001.png)\n返回1表示成功。\n\n然后退出mongodb，启用用户验证**auth = true**，再次启动**mongodb**\n```\npgrep -f mongodb |xargs kill -2\nvim /usr/local/mongodb/mongodb.conf\n#启用验证\nauth = true\n\n#启动mongo\n/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf\n\n\nmongo localhost:27017/admin -u suadmin -p ilannipasswd\nshow users\nshow dbs\nshow collections```\n\n查看整个mongoDB全部的用户：`db.system.users.find()`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB002.png)\n\n## 接着测试,创建库,创建用户\n创建ilanni数据库，然后创建ilanniadmin用户，授予readWrite权限\n```\nuse ilanni\ndb.createUser({user:'ilanniadmin',pwd:'ilanni123456',roles:[{role:'readWrite',db:'ilanni'}]})\n或者\ndb.createUser({user:'ilanniadmin',pwd:'ilanni123456',roles:[{role:'dbAdmin',db:'ilanni'},{role:'readWrite',db:'ilanni'}]})```\n\n验证刚刚创建的用户：`db.auth('ilanniadmin','ilanni123456')`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB003.png)\n注意，在**use ilanni**后，ilanni实际上还没真正建立起来，只是表明目前是在使用ilanni了。如果什么都不操作离开的话,这个库就会被系统删除.所以我们还要执行下面的命令:\n```\ndb.ilanni.insert({'name':'tompig'});\ndb.ilanni.insert({'name':'tompig1','id':1});```\n\n使用刚刚创建的**ilanniadmin**用户登陆数据库，然后插入一些，并查看\n```\nmongo localhost:27017/ilanni -u ilanniadmin -p ilanni123456\ndb.ilanni.findOne()\ndb.ilanni.find()```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB004.png)\n现在我们再使用**suadmin**用户登陆到服务器，查看服务器上的数据库\n```\nmongo localhost:27017/admin -u suadmin -p ilanni123456\nshow dbs```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB005.png)\n通过上图，我们可以看到刚刚创建的ilanni数据库\n\n## 删除库，删除用户\n现在我们来测试数据库的删除\n```\nmongo localhost:27017/admin -u suadmin -p ilannipasswd\nuse ilanni\ndb.dropDatabase();```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB006.png)\n通过shell删除ilanni数据库\n\n现在我们来测试用户的删除\n\n\n导入数据：`mongoimport --port 27017 -d tms -c mod < mongo_data/mod.json`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB007.png)\n\n命令行连接mongodb数据库：\n```\n./mongo\nhelp        #查看帮助\nshow dbs    #查看所有的mongodb数据库\nuse tms     #使用tms数据库\ndb.status() #查看数据库的信息```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB008.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB009.png)\n\n删除数据库\n```\nshow dbs\nuse tms\ndb.dropDatabase()```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB010.png)\n导出数据：`mongoexport --port 27017 -d tms -c mod -o tms.json`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB011.png)\n\n---\n\n\n\n\n\n\n\n","slug":"数据库-2016-11-10-MongoDB数据库","published":1,"updated":"2016-11-21T02:17:08.899Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjlh000wd8pk4ics0v6d","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p><strong>本节是根据<a href=\"http://www.ilanni.com/\" target=\"_blank\" rel=\"external\">烂泥大神</a>分享的笔记摘录的！</strong></p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>这里安装的是3.2版本。</p>\n<h2 id=\"yum安装\"><a href=\"#yum安装\" class=\"headerlink\" title=\"yum安装\"></a>yum安装</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/yum<span class=\"selector-class\">.repos</span><span class=\"selector-class\">.d</span>/mongodb<span class=\"selector-class\">.repo</span></div><div class=\"line\"></div><div class=\"line\">[MongoDB]</div><div class=\"line\">name=MongoDB Repository</div><div class=\"line\">baseurl=http:<span class=\"comment\">//repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/</span></div><div class=\"line\">gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">yum -y install mongodb-org</div><div class=\"line\">/etc/init.d/mongod restart</div><div class=\"line\">chkconfig mongod on</div><div class=\"line\">mongod --version</div></pre></td></tr></table></figure>\n<h2 id=\"源码安装\"><a href=\"#源码安装\" class=\"headerlink\" title=\"源码安装\"></a>源码安装</h2><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http:<span class=\"comment\">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.8.tgz</span></div><div class=\"line\">或：</div><div class=\"line\">wget https:<span class=\"comment\">//fossies.org/linux/misc/mongodb-linux-x86_64-3.2.8.tgz</span></div><div class=\"line\"></div><div class=\"line\">tar -xf mongodb-linux-x86_64-rhel62<span class=\"number\">-3.2</span><span class=\"number\">.8</span>.tgz -C <span class=\"meta-keyword\">/usr/</span>local/    <span class=\"meta\">#注意解压的包名</span></div><div class=\"line\">cd <span class=\"meta-keyword\">/usr/</span>local/</div><div class=\"line\">mv mongodb-linux-x86_64-rhel62<span class=\"number\">-3.2</span><span class=\"number\">.8</span> mongodb</div><div class=\"line\">mkdir <span class=\"meta-keyword\">/usr/</span>local<span class=\"meta-keyword\">/mongodb/</span>data</div><div class=\"line\"></div><div class=\"line\">vim <span class=\"meta-keyword\">/etc/</span>profile</div><div class=\"line\">export PATH=$PATH:<span class=\"meta-keyword\">/usr/</span>local<span class=\"meta-keyword\">/mongodb/</span>bin</div><div class=\"line\"></div><div class=\"line\">source <span class=\"meta-keyword\">/etc/</span>profile</div><div class=\"line\">安装好直接可以用了</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h2><figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /usr/local/mongodb/mongodb.conf</div><div class=\"line\"><span class=\"meta\">#端口</span></div><div class=\"line\">port=<span class=\"number\">27017</span></div><div class=\"line\"><span class=\"meta\">#数据文件存放目录</span></div><div class=\"line\">dbpath= /usr/local/mongodb/data</div><div class=\"line\"><span class=\"meta\">#日志文件存放目录</span></div><div class=\"line\">logpath= /usr/local/mongodb/mongodb.log</div><div class=\"line\"><span class=\"meta\">#使用追加的方式写日志</span></div><div class=\"line\">logappend=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"meta\">#以守护程序的方式启用，即在后台运行</span></div><div class=\"line\">fork=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"meta\">#最大同时连接数</span></div><div class=\"line\">maxConns=<span class=\"number\">500</span></div><div class=\"line\"><span class=\"meta\">#只允许通过本机访问</span></div><div class=\"line\"><span class=\"meta\">#bind_ip=127.0.0.1</span></div><div class=\"line\"><span class=\"meta\">#启用验证</span></div><div class=\"line\"><span class=\"meta\">#auth = true  #注释掉不启用用户认证，创建好用户后再启用</span></div></pre></td></tr></table></figure>\n<h2 id=\"启动mongodb：\"><a href=\"#启动mongodb：\" class=\"headerlink\" title=\"启动mongodb：\"></a>启动mongodb：</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/mongodb/</span>bin<span class=\"regexp\">/mongod -f /u</span>sr<span class=\"regexp\">/local/m</span>ongodb<span class=\"regexp\">/mongodb.conf</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"创建用户、管理用户\"><a href=\"#创建用户、管理用户\" class=\"headerlink\" title=\"创建用户、管理用户\"></a>创建用户、管理用户</h1><p><strong>read</strong>：允许用户读取指定数据库<br><strong>readWrite</strong>：允许用户读写指定数据库<br><strong>dbAdmin</strong>：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile<br><strong>userAdmin</strong>：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户<br><strong>clusterAdmin</strong>：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。<br><strong>readAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的读权限<br><strong>readWriteAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的读写权限<br><strong>userAdminAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限<br><strong>dbAdminAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。<br><strong>root</strong>：只在admin数据库中可用。超级账号，超级权限</p>\n<h2 id=\"创建用户\"><a href=\"#创建用户\" class=\"headerlink\" title=\"创建用户\"></a>创建用户</h2><p>对<strong>admin</strong>数据库，创建一个<strong>suadmin</strong>用户，密码是<strong>ilannipasswd</strong>，并且赋予<strong>dbAdminAnyDatabase和userAdminAnyDatabase权限</strong><br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">mongo</span></div><div class=\"line\"><span class=\"selector-tag\">use</span> <span class=\"selector-tag\">admin</span></div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'suadmin'</span>,pwd:<span class=\"string\">'ilannipasswd'</span>,roles:[&#123;role:<span class=\"string\">'dbAdminAnyDatabase'</span>,db:<span class=\"string\">'admin'</span>&#125;,&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'userAdminAnyDatabase'</span>,db:<span class=\"string\">'admin'</span>&#125;]&#125;)</div></pre></td></tr></table></figure></p>\n<h3 id=\"验证刚刚创建的用户\"><a href=\"#验证刚刚创建的用户\" class=\"headerlink\" title=\"验证刚刚创建的用户\"></a>验证刚刚创建的用户</h3><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.auth</span>(<span class=\"string\">'suadmin'</span>,<span class=\"string\">'ilannipasswd'</span>)</div><div class=\"line\">或者：</div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'suadmin'</span>,<span class=\"attribute\">pwd</span>:<span class=\"string\">'ilannipasswd'</span>,<span class=\"attribute\">roles</span>:[&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'dbAdminAnyDatabase'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'admin'</span>&#125;]&#125;)</div></pre></td></tr></table></figure>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB001.png\" alt=\"\"><br>返回1表示成功。</p>\n<p>然后退出mongodb，启用用户验证<strong>auth = true</strong>，再次启动<strong>mongodb</strong><br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">pgrep -f mongodb |xargs <span class=\"keyword\">kill</span> <span class=\"number\">-2</span></div><div class=\"line\">vim /usr/<span class=\"keyword\">local</span>/mongodb/mongodb.conf</div><div class=\"line\">#启用验证</div><div class=\"line\">auth = <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">#启动mongo</div><div class=\"line\">/usr/<span class=\"keyword\">local</span>/mongodb/<span class=\"keyword\">bin</span>/mongod -f /usr/<span class=\"keyword\">local</span>/mongodb/mongodb.conf</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">mongo localhost:<span class=\"number\">27017</span>/<span class=\"keyword\">admin</span> -u suadmin -p ilannipasswd</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">users</span></div><div class=\"line\"><span class=\"keyword\">show</span> dbs</div><div class=\"line\"><span class=\"keyword\">show</span> collections</div></pre></td></tr></table></figure></p>\n<p>查看整个mongoDB全部的用户：<code>db.system.users.find()</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB002.png\" alt=\"\"></p>\n<h2 id=\"接着测试-创建库-创建用户\"><a href=\"#接着测试-创建库-创建用户\" class=\"headerlink\" title=\"接着测试,创建库,创建用户\"></a>接着测试,创建库,创建用户</h2><p>创建ilanni数据库，然后创建ilanniadmin用户，授予readWrite权限<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">use</span> <span class=\"selector-tag\">ilanni</span></div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'ilanniadmin'</span>,<span class=\"attribute\">pwd</span>:<span class=\"string\">'ilanni123456'</span>,<span class=\"attribute\">roles</span>:[&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'readWrite'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'ilanni'</span>&#125;]&#125;)</div><div class=\"line\">或者</div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'ilanniadmin'</span>,<span class=\"attribute\">pwd</span>:<span class=\"string\">'ilanni123456'</span>,<span class=\"attribute\">roles</span>:[&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'dbAdmin'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'ilanni'</span>&#125;,&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'readWrite'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'ilanni'</span>&#125;]&#125;)</div></pre></td></tr></table></figure></p>\n<p>验证刚刚创建的用户：<code>db.auth(&#39;ilanniadmin&#39;,&#39;ilanni123456&#39;)</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB003.png\" alt=\"\"><br>注意，在<strong>use ilanni</strong>后，ilanni实际上还没真正建立起来，只是表明目前是在使用ilanni了。如果什么都不操作离开的话,这个库就会被系统删除.所以我们还要执行下面的命令:<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">db.ilanni.<span class=\"keyword\">insert</span>(&#123;<span class=\"string\">'name'</span>:<span class=\"string\">'tompig'</span>&#125;);</div><div class=\"line\">db.ilanni.<span class=\"keyword\">insert</span>(&#123;<span class=\"string\">'name'</span>:<span class=\"string\">'tompig1'</span>,<span class=\"string\">'id'</span>:<span class=\"number\">1</span>&#125;);</div></pre></td></tr></table></figure></p>\n<p>使用刚刚创建的<strong>ilanniadmin</strong>用户登陆数据库，然后插入一些，并查看<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mongo localhost:<span class=\"number\">27017</span>/ilanni -u ilanniadmin -<span class=\"selector-tag\">p</span> ilanni123456</div><div class=\"line\">db<span class=\"selector-class\">.ilanni</span><span class=\"selector-class\">.findOne</span>()</div><div class=\"line\">db<span class=\"selector-class\">.ilanni</span><span class=\"selector-class\">.find</span>()</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB004.png\" alt=\"\"><br>现在我们再使用<strong>suadmin</strong>用户登陆到服务器，查看服务器上的数据库<br><figure class=\"highlight nsis\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mongo localhost:<span class=\"number\">27017</span>/<span class=\"literal\">admin</span> -u suadmin -p ilanni123456</div><div class=\"line\"><span class=\"literal\">show</span> dbs</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB005.png\" alt=\"\"><br>通过上图，我们可以看到刚刚创建的ilanni数据库</p>\n<h2 id=\"删除库，删除用户\"><a href=\"#删除库，删除用户\" class=\"headerlink\" title=\"删除库，删除用户\"></a>删除库，删除用户</h2><p>现在我们来测试数据库的删除<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">mongo</span> <span class=\"selector-tag\">localhost</span><span class=\"selector-pseudo\">:27017</span>/<span class=\"selector-tag\">admin</span> <span class=\"selector-tag\">-u</span> <span class=\"selector-tag\">suadmin</span> <span class=\"selector-tag\">-p</span> <span class=\"selector-tag\">ilannipasswd</span></div><div class=\"line\"><span class=\"selector-tag\">use</span> <span class=\"selector-tag\">ilanni</span></div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.dropDatabase</span>();</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB006.png\" alt=\"\"><br>通过shell删除ilanni数据库</p>\n<p>现在我们来测试用户的删除</p>\n<p>导入数据：<code>mongoimport --port 27017 -d tms -c mod &lt; mongo_data/mod.json</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB007.png\" alt=\"\"></p>\n<p>命令行连接mongodb数据库：<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">./mongo</div><div class=\"line\">help        <span class=\"meta\">#查看帮助</span></div><div class=\"line\"><span class=\"keyword\">show</span> dbs    <span class=\"meta\">#查看所有的mongodb数据库</span></div><div class=\"line\"><span class=\"keyword\">use</span> tms     <span class=\"meta\">#使用tms数据库</span></div><div class=\"line\">db.status() <span class=\"meta\">#查看数据库的信息</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB008.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB009.png\" alt=\"\"></p>\n<p>删除数据库<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">show</span> dbs</div><div class=\"line\"><span class=\"keyword\">use</span> tms</div><div class=\"line\">db.dropDatabase()</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB010.png\" alt=\"\"><br>导出数据：<code>mongoexport --port 27017 -d tms -c mod -o tms.json</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB011.png\" alt=\"\"></p>\n<hr>\n","excerpt":"","more":"<p><strong>本节是根据<a href=\"http://www.ilanni.com/\">烂泥大神</a>分享的笔记摘录的！</strong></p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>这里安装的是3.2版本。</p>\n<h2 id=\"yum安装\"><a href=\"#yum安装\" class=\"headerlink\" title=\"yum安装\"></a>yum安装</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/yum<span class=\"selector-class\">.repos</span><span class=\"selector-class\">.d</span>/mongodb<span class=\"selector-class\">.repo</span></div><div class=\"line\"></div><div class=\"line\">[MongoDB]</div><div class=\"line\">name=MongoDB Repository</div><div class=\"line\">baseurl=http:<span class=\"comment\">//repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/</span></div><div class=\"line\">gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">yum -y install mongodb-org</div><div class=\"line\">/etc/init.d/mongod restart</div><div class=\"line\">chkconfig mongod on</div><div class=\"line\">mongod --version</div></pre></td></tr></table></figure>\n<h2 id=\"源码安装\"><a href=\"#源码安装\" class=\"headerlink\" title=\"源码安装\"></a>源码安装</h2><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http:<span class=\"comment\">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.8.tgz</span></div><div class=\"line\">或：</div><div class=\"line\">wget https:<span class=\"comment\">//fossies.org/linux/misc/mongodb-linux-x86_64-3.2.8.tgz</span></div><div class=\"line\"></div><div class=\"line\">tar -xf mongodb-linux-x86_64-rhel62<span class=\"number\">-3.2</span><span class=\"number\">.8</span>.tgz -C <span class=\"meta-keyword\">/usr/</span>local/    <span class=\"meta\">#注意解压的包名</span></div><div class=\"line\">cd <span class=\"meta-keyword\">/usr/</span>local/</div><div class=\"line\">mv mongodb-linux-x86_64-rhel62<span class=\"number\">-3.2</span><span class=\"number\">.8</span> mongodb</div><div class=\"line\">mkdir <span class=\"meta-keyword\">/usr/</span>local<span class=\"meta-keyword\">/mongodb/</span>data</div><div class=\"line\"></div><div class=\"line\">vim <span class=\"meta-keyword\">/etc/</span>profile</div><div class=\"line\">export PATH=$PATH:<span class=\"meta-keyword\">/usr/</span>local<span class=\"meta-keyword\">/mongodb/</span>bin</div><div class=\"line\"></div><div class=\"line\">source <span class=\"meta-keyword\">/etc/</span>profile</div><div class=\"line\">安装好直接可以用了</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><h2 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h2><figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /usr/local/mongodb/mongodb.conf</div><div class=\"line\"><span class=\"meta\">#端口</span></div><div class=\"line\">port=<span class=\"number\">27017</span></div><div class=\"line\"><span class=\"meta\">#数据文件存放目录</span></div><div class=\"line\">dbpath= /usr/local/mongodb/data</div><div class=\"line\"><span class=\"meta\">#日志文件存放目录</span></div><div class=\"line\">logpath= /usr/local/mongodb/mongodb.log</div><div class=\"line\"><span class=\"meta\">#使用追加的方式写日志</span></div><div class=\"line\">logappend=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"meta\">#以守护程序的方式启用，即在后台运行</span></div><div class=\"line\">fork=<span class=\"literal\">true</span></div><div class=\"line\"><span class=\"meta\">#最大同时连接数</span></div><div class=\"line\">maxConns=<span class=\"number\">500</span></div><div class=\"line\"><span class=\"meta\">#只允许通过本机访问</span></div><div class=\"line\"><span class=\"meta\">#bind_ip=127.0.0.1</span></div><div class=\"line\"><span class=\"meta\">#启用验证</span></div><div class=\"line\"><span class=\"meta\">#auth = true  #注释掉不启用用户认证，创建好用户后再启用</span></div></pre></td></tr></table></figure>\n<h2 id=\"启动mongodb：\"><a href=\"#启动mongodb：\" class=\"headerlink\" title=\"启动mongodb：\"></a>启动mongodb：</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/mongodb/</span>bin<span class=\"regexp\">/mongod -f /u</span>sr<span class=\"regexp\">/local/m</span>ongodb<span class=\"regexp\">/mongodb.conf</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"创建用户、管理用户\"><a href=\"#创建用户、管理用户\" class=\"headerlink\" title=\"创建用户、管理用户\"></a>创建用户、管理用户</h1><p><strong>read</strong>：允许用户读取指定数据库<br><strong>readWrite</strong>：允许用户读写指定数据库<br><strong>dbAdmin</strong>：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile<br><strong>userAdmin</strong>：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户<br><strong>clusterAdmin</strong>：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。<br><strong>readAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的读权限<br><strong>readWriteAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的读写权限<br><strong>userAdminAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限<br><strong>dbAdminAnyDatabase</strong>：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。<br><strong>root</strong>：只在admin数据库中可用。超级账号，超级权限</p>\n<h2 id=\"创建用户\"><a href=\"#创建用户\" class=\"headerlink\" title=\"创建用户\"></a>创建用户</h2><p>对<strong>admin</strong>数据库，创建一个<strong>suadmin</strong>用户，密码是<strong>ilannipasswd</strong>，并且赋予<strong>dbAdminAnyDatabase和userAdminAnyDatabase权限</strong><br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">mongo</span></div><div class=\"line\"><span class=\"selector-tag\">use</span> <span class=\"selector-tag\">admin</span></div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'suadmin'</span>,pwd:<span class=\"string\">'ilannipasswd'</span>,roles:[&#123;role:<span class=\"string\">'dbAdminAnyDatabase'</span>,db:<span class=\"string\">'admin'</span>&#125;,&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'userAdminAnyDatabase'</span>,db:<span class=\"string\">'admin'</span>&#125;]&#125;)</div></pre></td></tr></table></figure></p>\n<h3 id=\"验证刚刚创建的用户\"><a href=\"#验证刚刚创建的用户\" class=\"headerlink\" title=\"验证刚刚创建的用户\"></a>验证刚刚创建的用户</h3><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.auth</span>(<span class=\"string\">'suadmin'</span>,<span class=\"string\">'ilannipasswd'</span>)</div><div class=\"line\">或者：</div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'suadmin'</span>,<span class=\"attribute\">pwd</span>:<span class=\"string\">'ilannipasswd'</span>,<span class=\"attribute\">roles</span>:[&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'dbAdminAnyDatabase'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'admin'</span>&#125;]&#125;)</div></pre></td></tr></table></figure>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB001.png\" alt=\"\"><br>返回1表示成功。</p>\n<p>然后退出mongodb，启用用户验证<strong>auth = true</strong>，再次启动<strong>mongodb</strong><br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">pgrep -f mongodb |xargs <span class=\"keyword\">kill</span> <span class=\"number\">-2</span></div><div class=\"line\">vim /usr/<span class=\"keyword\">local</span>/mongodb/mongodb.conf</div><div class=\"line\">#启用验证</div><div class=\"line\">auth = <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">#启动mongo</div><div class=\"line\">/usr/<span class=\"keyword\">local</span>/mongodb/<span class=\"keyword\">bin</span>/mongod -f /usr/<span class=\"keyword\">local</span>/mongodb/mongodb.conf</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">mongo localhost:<span class=\"number\">27017</span>/<span class=\"keyword\">admin</span> -u suadmin -p ilannipasswd</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">users</span></div><div class=\"line\"><span class=\"keyword\">show</span> dbs</div><div class=\"line\"><span class=\"keyword\">show</span> collections</div></pre></td></tr></table></figure></p>\n<p>查看整个mongoDB全部的用户：<code>db.system.users.find()</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB002.png\" alt=\"\"></p>\n<h2 id=\"接着测试-创建库-创建用户\"><a href=\"#接着测试-创建库-创建用户\" class=\"headerlink\" title=\"接着测试,创建库,创建用户\"></a>接着测试,创建库,创建用户</h2><p>创建ilanni数据库，然后创建ilanniadmin用户，授予readWrite权限<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">use</span> <span class=\"selector-tag\">ilanni</span></div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'ilanniadmin'</span>,<span class=\"attribute\">pwd</span>:<span class=\"string\">'ilanni123456'</span>,<span class=\"attribute\">roles</span>:[&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'readWrite'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'ilanni'</span>&#125;]&#125;)</div><div class=\"line\">或者</div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.createUser</span>(&#123;<span class=\"attribute\">user</span>:<span class=\"string\">'ilanniadmin'</span>,<span class=\"attribute\">pwd</span>:<span class=\"string\">'ilanni123456'</span>,<span class=\"attribute\">roles</span>:[&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'dbAdmin'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'ilanni'</span>&#125;,&#123;<span class=\"attribute\">role</span>:<span class=\"string\">'readWrite'</span>,<span class=\"attribute\">db</span>:<span class=\"string\">'ilanni'</span>&#125;]&#125;)</div></pre></td></tr></table></figure></p>\n<p>验证刚刚创建的用户：<code>db.auth(&#39;ilanniadmin&#39;,&#39;ilanni123456&#39;)</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB003.png\" alt=\"\"><br>注意，在<strong>use ilanni</strong>后，ilanni实际上还没真正建立起来，只是表明目前是在使用ilanni了。如果什么都不操作离开的话,这个库就会被系统删除.所以我们还要执行下面的命令:<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">db.ilanni.<span class=\"keyword\">insert</span>(&#123;<span class=\"string\">'name'</span>:<span class=\"string\">'tompig'</span>&#125;);</div><div class=\"line\">db.ilanni.<span class=\"keyword\">insert</span>(&#123;<span class=\"string\">'name'</span>:<span class=\"string\">'tompig1'</span>,<span class=\"string\">'id'</span>:<span class=\"number\">1</span>&#125;);</div></pre></td></tr></table></figure></p>\n<p>使用刚刚创建的<strong>ilanniadmin</strong>用户登陆数据库，然后插入一些，并查看<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mongo localhost:<span class=\"number\">27017</span>/ilanni -u ilanniadmin -<span class=\"selector-tag\">p</span> ilanni123456</div><div class=\"line\">db<span class=\"selector-class\">.ilanni</span><span class=\"selector-class\">.findOne</span>()</div><div class=\"line\">db<span class=\"selector-class\">.ilanni</span><span class=\"selector-class\">.find</span>()</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB004.png\" alt=\"\"><br>现在我们再使用<strong>suadmin</strong>用户登陆到服务器，查看服务器上的数据库<br><figure class=\"highlight nsis\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mongo localhost:<span class=\"number\">27017</span>/<span class=\"literal\">admin</span> -u suadmin -p ilanni123456</div><div class=\"line\"><span class=\"literal\">show</span> dbs</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB005.png\" alt=\"\"><br>通过上图，我们可以看到刚刚创建的ilanni数据库</p>\n<h2 id=\"删除库，删除用户\"><a href=\"#删除库，删除用户\" class=\"headerlink\" title=\"删除库，删除用户\"></a>删除库，删除用户</h2><p>现在我们来测试数据库的删除<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">mongo</span> <span class=\"selector-tag\">localhost</span><span class=\"selector-pseudo\">:27017</span>/<span class=\"selector-tag\">admin</span> <span class=\"selector-tag\">-u</span> <span class=\"selector-tag\">suadmin</span> <span class=\"selector-tag\">-p</span> <span class=\"selector-tag\">ilannipasswd</span></div><div class=\"line\"><span class=\"selector-tag\">use</span> <span class=\"selector-tag\">ilanni</span></div><div class=\"line\"><span class=\"selector-tag\">db</span><span class=\"selector-class\">.dropDatabase</span>();</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB006.png\" alt=\"\"><br>通过shell删除ilanni数据库</p>\n<p>现在我们来测试用户的删除</p>\n<p>导入数据：<code>mongoimport --port 27017 -d tms -c mod &lt; mongo_data/mod.json</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB007.png\" alt=\"\"></p>\n<p>命令行连接mongodb数据库：<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">./mongo</div><div class=\"line\">help        <span class=\"meta\">#查看帮助</span></div><div class=\"line\"><span class=\"keyword\">show</span> dbs    <span class=\"meta\">#查看所有的mongodb数据库</span></div><div class=\"line\"><span class=\"keyword\">use</span> tms     <span class=\"meta\">#使用tms数据库</span></div><div class=\"line\">db.status() <span class=\"meta\">#查看数据库的信息</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB008.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB009.png\" alt=\"\"></p>\n<p>删除数据库<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">show</span> dbs</div><div class=\"line\"><span class=\"keyword\">use</span> tms</div><div class=\"line\">db.dropDatabase()</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB010.png\" alt=\"\"><br>导出数据：<code>mongoexport --port 27017 -d tms -c mod -o tms.json</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/MongoDB011.png\" alt=\"\"></p>\n<hr>\n"},{"title":"文章阅读链接更新页","abbrlink":37824,"date":"2016-11-02T07:53:58.000Z","_content":"\n##### 1、我的算法学习之路（Google工程师）\nhttp://zh.lucida.me/blog/on-learning-algorithms/\n\n---","source":"_posts/文章阅读/2016-11-02-文章阅读链接更新页.md","raw":"---\ntitle: 文章阅读链接更新页\ncategories:\n  - 文章阅读\ntags:\n  - 网页链接更新页\nabbrlink: 37824\ndate: 2016-11-02 15:53:58\n---\n\n##### 1、我的算法学习之路（Google工程师）\nhttp://zh.lucida.me/blog/on-learning-algorithms/\n\n---","slug":"文章阅读-2016-11-02-文章阅读链接更新页","published":1,"updated":"2016-11-21T02:17:08.932Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjln000xd8pkeddrs4wx","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h5 id=\"1、我的算法学习之路（Google工程师）\"><a href=\"#1、我的算法学习之路（Google工程师）\" class=\"headerlink\" title=\"1、我的算法学习之路（Google工程师）\"></a>1、我的算法学习之路（Google工程师）</h5><p><a href=\"http://zh.lucida.me/blog/on-learning-algorithms/\" target=\"_blank\" rel=\"external\">http://zh.lucida.me/blog/on-learning-algorithms/</a></p>\n<hr>\n","excerpt":"","more":"<h5 id=\"1、我的算法学习之路（Google工程师）\"><a href=\"#1、我的算法学习之路（Google工程师）\" class=\"headerlink\" title=\"1、我的算法学习之路（Google工程师）\"></a>1、我的算法学习之路（Google工程师）</h5><p><a href=\"http://zh.lucida.me/blog/on-learning-algorithms/\">http://zh.lucida.me/blog/on-learning-algorithms/</a></p>\n<hr>\n"},{"title":"MySQL数据库","abbrlink":37198,"date":"2016-11-03T02:46:10.000Z","_content":"\nMySql\n### 特别要注意大小写和命令后的英文;号。\n**新安装默认密码为空**`mysql -u root` 即可进入，不要`mysql -u root -p `进不去的\n大于5.7的版本默认有随机密码，执行`cat  /var/log/mysqld.log | grep password | grep 'root@localhost' | awk -F 'root@localhost: ' '{print $2}'`查看随机生成的密码。\n\n\n## 查看数据库\n`SHOW DATABASES;`\n\n## 查看表\n\tUSE blog;\n\tSHOW TABLES;\n## 查看表中的列\n\tSHOW COLUMNS FROM auth_user; 或：DESCRIBE auth_user;\n**describe 表名** 是 **show columns from 表名** 的一种快捷方式。\n\n## 创建数据库\n```mysql\nmysql> CREATE DATABASE 库名;\nmysql> USE 库名;\nmysql> CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1));```\n例：\n## 创建表\n```\nuse demo;\ncreate table pet(\n        name varchar(20),        #名字\n        owner varchar(20),       #主人\n        species varchar(20),     #种类\n        sex char(1),             #性别\n        birth date,              #出生日期\n        death date               #死亡日期\n)```\n\n为了验证你的表是按你期望的方式创建，使用一个**DESCRIBE**语句：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/mysql%E6%95%B0%E6%8D%AE%E5%BA%93001.jpg)\n\n## 删除数据库：\nmysql> `DROP DATABASE 库名;`\n## 删除数据表：\nmysql> `DROP TABLE 表名；`\n## 将表中记录清空：\nmysql> `DELETE FROM 表名;`\n\n## 创建表(复杂形式)：\n### 创建customer表：\n```\ncreate table customers(\n    id int not null auto_increment,\n    name char(20) not null,\n    address char(50) null,\n    city char(50) null,\n    age int not null,\n    love char(50) not null default 'No habbit',\n    primary key(id)\n)engine=InnoDB;```\n\n**SELECT last_insert_id();**这个函数可以获得返回最后一个**auto_increment**值。默认值为：default 'No habbit',\n引擎类型，多为**engine = InnoDB**，如果省略了**engine=**语句，则使用默认的引擎(MyISAM)\n\n## 更改表结构：\n\n- 增加一列：\n\t`alter table pet add des char(100) null;`\n- 删除：\n    `alter table pet drop column des;`\n- 重命名表：\n\t`rename table pet to animals;`\n- 添加id字段：\n```\nalter table pet add id int not null\nprimary key auto_increment first;```\n详见：http://www.cnblogs.com/beginman/p/3249472.html\n\n\n\n## 查看密码\n* 1.用root 进入mysql后\nmysql>`set password =password('你的密码');`\nmysql>`flush privileges;`\n\n* 2.使用GRANT语句 \nmysql>`grant all on *.* to 'root'@'localhost' IDENTIFIED BY '你的密码'with grant option ;`\nmysql>`flush privileges;`\n\n* 3.进入mysql库修改user表\nmysql>`use mysql;`\nmysql>`update user set password=password('你的密码') where user='root'; `\nmysql>`flush privileges;`\n\n## 设置数据库密码\n```\nmysql -u root -p\n> （输入密码）\n> create user '用户名'@'localhost' identified by '密码';\n> grant all privileges on 库名.* to '用户名'@'localhost';\n> flush privileges;\n> exit;```\n\n## 修改Mysql密码\n- 方法一：\n使用phpmyadmin，直接修改Mysql库的user 表。或者使用Navicat for Mysql 直接修改连接属性。\n【据说可以用直接修改user表文件的方法：\n**法一：**关闭MySQL，Windows下打开Mysql\\data\\mysql，有三个文件user.frm,user.MYD,user.MYI找个知道密码的MySQL，替换相应的这三个文件，如果user表结构没改过，一般也没人去改，替换user.MYD就可以了。\n**法二：**也可以直接编辑user.MYD，找个十六进制编辑器，UltraEdit就有这个功能。关闭MySQL，打开user.MYD。将用户名root后面的八个字符改为565491d704013245，新密码就是123456。或者将它们对应的十六进制数字，（左边那里，一个字符对应两个数字），改为 00 02 02 02 02 02 02 02,这就是空密码，在编辑器右边看到的都是星号*，看起来很象小数点。重开MySQL，输入root和你的新密码。】\n\n- 方法二：使用mysqladmin\ncd到mysql的bin文件夹，然后执行如下\nD:\\Mysql\\bin>`mysqladmin -u root -p password 新密码`\nEnter password:(在此输入原密码)\n格式：**mysqladmin -u用户名 -p旧密码 password 新密码。**\n\n#### 忘记密码：\n- 1.用root或者运行mysqld的用户登录系统； \n- 2．利用kill命令结束掉mysqld的进程； \n- 3．使用**--skip-grant-tables**参数启动MySQL Server \n- shell>`mysqld_safe --skip-grant-tables &` \n- UPDATE user SET password=PASSWORD(\"new password\") WHERE user='root';\n- 4.为root@localhost设置新密码 \n- shell>`mysqladmin -u root flush-privileges password \"newpassword\"`\n- 5．重启MySQL Server\n\n---\n\n看提示，PHP执行时看错误，是用mysql还是mysqli\n语法\n**mysql_connect(servername,username,password);**\n\n参数描述servername可选。规定要连接的服务器。默认是 \"localhost:3306\"。username可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。password可选。规定登录所用的密码。默认是 \"\"。\n\n语法\n**CREATE DATABASE database_name**\n\n|参数|描述|\n|-----|-------|\n|servername|可选。规定要连接的服务器。默认是 \"localhost:3306\"。|\n|username|可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。|\n|passwd|可选。规定登录所用的密码。默认是 \"\"。|\n\n为了让 PHP 执行上面的语句，我们必须使用 mysql_query() 函数。此函数用于向 MySQL 连接发送查询或命令。\n连接：\n例子:\n```php\n<?php\n//在一个变量中 ($con) 存放了在脚本中供稍后使用的连接。如果连接失败，将执行 \"die\" 部分：\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }```\n\n\n创建：\n```mysql\n// Create database\n//创建了一个名为 \"my_db\" 的数据库：\nif (mysql_query(\"CREATE DATABASE my_db\",$con))\n  {\n  echo \"Database created\";\n  }\nelse\n  {\n  echo \"Error creating database: \" . mysql_error();\n  }\n\n// Create table in my_db database\n//创建一个名为 \"Persons\" 的表，此表有三列。列名是 \"FirstName\", \"LastName\" 以及 \"Age\"：\n//重要事项：在创建表之前，必须首先选择数据库。通过 mysql_select_db() 函数选取数据库。\n//注释：当您创建 varchar 类型的数据库字段时，必须规定该字段的最大长度，例如：varchar(15)。\nmysql_select_db(\"my_db\", $con);\n$sql = \"CREATE TABLE Persons \n(\nFirstName varchar(15),\nLastName varchar(15),\nAge int\n)\";\nmysql_query($sql,$con);\n\nmysql_close($con);   //提前关闭连接，请使用 mysql_close() 函数,不加此句则脚本结束后关闭。\n?>```\n\n---\n\nMySQL 数据类型\n下面的可使用的各种 MySQL 数据类型：\n\n|数值类型|描述|\n|---|---|\n| int(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| smallint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| tinyint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| mediumint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| bigint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n|---|---|\n| decimal(size,d)|支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。|\n| double(size,d)|支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。|\n| float(size,d) |支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。|\n\n\n|文本数据类型|描述|\n|-------|-----|\n|char(size)|支持固定长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定固定长度。|\n|varchar(size)|支持可变长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定最大长度。|\n|tinytext|支持可变长度的字符串，最大长度是 255 个字符。|\n|text blob|支持可变长度的字符串，最大长度是 65535 个字符。|\n|mediumtext mediumblob|支持可变长度的字符串，最大长度是 16777215 个字符。|\n|longtext longblob|支持可变长度的字符串，最大长度是 4294967295 个字符。|\n\n|日期数据类型|描述|\n|----|----|\n|date(yyyy-mm-dd)|支持日期或时间|\n|datetime(yyyy-mm-dd hh:mm:ss)|支持日期或时间|\n|timestamp(yyyymmddhhmmss)|支持日期或时间|\n|time(hh:mm:ss)|支持日期或时间|\n\n|杂项数据类型|描述|\n|---|---|\n|enum(value1,value2,ect)|ENUM 是 ENUMERATED 列表的缩写。可以在括号中存放最多 65535 个值。|\n|set|SET 与 ENUM 相似。但是，SET 可拥有最多 64 个列表项目，并可存放不止一个 choice|\n\n#### 主键和自动递增字段\n每个表都应有一个主键字段。\n主键用于对表中的行进行唯一标识。每个主键值在表中必须是唯一的。此外，主键字段不能为空，这是由于数据库引擎需要一个值来对记录进行定位。\n主键字段永远要被编入索引。这条规则没有例外。你必须对主键字段进行索引，这样数据库引擎才能快速定位给予该键值的行。\n下面的例子把 **personID** 字段设置为主键字段。主键字段通常是 ID 号，且通常使用 **AUTO_INCREMENT** 设置。**AUTO_INCREMENT** 会在新记录被添加时逐一增加该字段的值。要确保主键字段不为空，我们必须向该字段添加 **NOT NULL** 设置。\n例：\n```mysql\n$sql = \"CREATE TABLE Persons \n(\npersonID int NOT NULL AUTO_INCREMENT, \nPRIMARY KEY(personID),\nFirstName varchar(15),\nLastName varchar(15),\nAge int\n)\";\n\nmysql_query($sql,$con);```\n\n#### 插入：\n语法\n```\nINSERT INTO table_name\nVALUES (value1, value2,....)```\n您还可以规定希望在其中插入数据的列：\n```\nINSERT INTO table_name (column1, column2,...)\nVALUES (value1, value2,....)```\n注释：SQL 语句对大小写不敏感。**INSERT INTO 与 insert into** 相同。\n\n\n为了让 PHP 执行该语句，我们必须使用 **mysql_query()** 函数。该函数用于向 MySQL 连接发送查询或命令。\n例子\n在前面的章节，我们创建了一个名为 \"Persons\" 的表，有三个列：\"Firstname\", \"Lastname\" 以及 \"Age\"。我们将在本例中使用同样的表。下面的例子向 \"Persons\" 表添加了两个新记录：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\nmysql_query(\"INSERT INTO Persons (FirstName, LastName, Age) \nVALUES ('Peter', 'Griffin', '35')\");\n\nmysql_query(\"INSERT INTO Persons (FirstName, LastName, Age) \nVALUES ('Glenn', 'Quagmire', '33')\");\n\nmysql_close($con);\n?>```\n\n#### 把来自表单的数据插入数据库\n现在，我们创建一个 HTML 表单，这个表单可把新记录插入 \"Persons\" 表。\n这是这个 HTML 表单：\n```html\n<html>\n<body>\n\n<form action=\"insert.php\" method=\"post\">\nFirstname: <input type=\"text\" name=\"firstname\" />\nLastname: <input type=\"text\" name=\"lastname\" />\nAge: <input type=\"text\" name=\"age\" />\n<input type=\"submit\" />\n</form>\n\n</body>\n</html>```\n\n当用户点击上例中 HTML 表单中的提交按钮时，表单数据被发送到 \"insert.php\"。\"insert.php\" 文件连接数据库，并通过 **$_POST** 变量从表单取回值。然后，mysql_query() 函数执行 **INSERT INTO** 语句，一条新的记录会添加到数据库表中。\n下面是 \"insert.php\" 页面的代码：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\n$sql=\"INSERT INTO Persons (FirstName, LastName, Age)\nVALUES\n('$_POST[firstname]','$_POST[lastname]','$_POST[age]')\";\n\nif (!mysql_query($sql,$con))\n  {\n  die('Error: ' . mysql_error());\n  }\necho \"1 record added\";\n\nmysql_close($con)\n?>```\n\n\n#### 修改：\n`UPDATE` 语句用于修改数据库表中的数据。\n语法\n```mysql\nUPDATE table_name\nSET column_name = new_value\nWHERE column_name = some_value```\n\n注释：SQL 对大小写不敏感。UPDATE 与 update 等效。\n为了让 PHP 执行上面的语句，我们必须使用 mysql_query( 函数。该函数用于向 SQL 连接发送查询和命令。\n例子\n稍早时，我们在本教程中创建了一个名为 \"Persons\" 的表。它看起来类似这样：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Peter|Griffin|35|\n|Glenn|Quagmire|33|\n下面的例子更新 \"Persons\" 表的一些数据：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\nmysql_query(\"UPDATE Persons SET Age = '36'\nWHERE FirstName = 'Peter' AND LastName = 'Griffin'\");\n\nmysql_close($con);\n?>```\n在这次更新后，\"Persons\" 表格是这样的：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Peter|Griffin|36|\n|Glenn|Quagmire|33|\n\n#### 删除：\n删除数据库中的数据\n`DELETE FROM` 语句用于从数据库表中删除记录。\n语法\n```mysql\nDELETE FROM table_name\nWHERE column_name = some_value```\n\n注释：SQL 对大小写不敏感。DELETE FROM 与 delete from 等效。\n为了让 PHP 执行上面的语句，我们必须使用 **mysql_query**( 函数。该函数用于向 SQL 连接发送查询和命令。\n例子\n稍早时，我们在本教程中创建了一个名为 \"Persons\" 的表。它看起来类似这样：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Peter|Griffin|35|\n|Glenn|Quagmire|33|\n下面的例子删除 \"Persons\" 表中所有 LastName='Griffin' 的记录：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\nmysql_query(\"DELETE FROM Persons WHERE LastName='Griffin'\");\n\nmysql_close($con);\n?>```\n在这次删除之后，表是这样的：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Glenn|Quagmire|33|\n\n#### 查询：\n`SELECT` 语句用于从数据库中选取数据。\n语法\nSELECT column_name(s) FROM table_name\n注释：SQL 语句对大小写不敏感。SELECT 与 select 等效。\n为了让 PHP 执行上面的语句，我们必须使用** mysql_query()** 函数。该函数用于向 MySQL 发送查询或命令。\n例子\n下面的例子选取存储在 \"Persons\" 表中的所有数据（* 字符选取表中所有数据）：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\n$result = mysql_query(\"SELECT * FROM Persons\");\n\nwhile($row = mysql_fetch_array($result))\n  {\n  echo $row['FirstName'] . \" \" . $row['LastName'];\n  echo \"<br />\";\n  }\n\nmysql_close($con);\n?>```\n上面这个例子在 $result 变量中存放由 mysql_query() 函数返回的数据。接下来，我们使用 mysql_fetch_array() 函数以数组的形式从记录集返回第一行。每个随后对 mysql_fetch_array() 函数的调用都会返回记录集中的下一行。 while loop 语句会循环记录集中的所有记录。为了输出每行的值，我们使用了 PHP 的 $row 变量 ($row['FirstName'] 和 $row['LastName'])。\n以上代码的输出：\nPeter Griffin\nGlenn Quagmire\n\n#### 在 HTML 表格中显示结果\n下面的例子选取的数据与上面的例子相同，但是将把数据显示在一个 HTML 表格中：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\n$result = mysql_query(\"SELECT * FROM Persons\");\n\necho \"<table border='1'>\n<tr>\n<th>Firstname</th>\n<th>Lastname</th>\n</tr>\";\n\nwhile($row = mysql_fetch_array($result))\n  {\n  echo \"<tr>\";\n  echo \"<td>\" . $row['FirstName'] . \"</td>\";\n  echo \"<td>\" . $row['LastName'] . \"</td>\";\n  echo \"</tr>\";\n  }\necho \"</table>\";\n\nmysql_close($con);\n?>```\n以上代码的输出：\n\n|FirstName|LastName|\n|---|---|\n|Peter|Griffin|\n|Glenn|Quagmire|\n\n\n---\n","source":"_posts/数据库/2016-11-03-MySQL数据库.md","raw":"---\ntitle: MySQL数据库\ncategories:\n  - 数据库\ntags:\n  - MySQL常用命令\nabbrlink: 37198\ndate: 2016-11-03 10:46:10\n---\n\nMySql\n### 特别要注意大小写和命令后的英文;号。\n**新安装默认密码为空**`mysql -u root` 即可进入，不要`mysql -u root -p `进不去的\n大于5.7的版本默认有随机密码，执行`cat  /var/log/mysqld.log | grep password | grep 'root@localhost' | awk -F 'root@localhost: ' '{print $2}'`查看随机生成的密码。\n\n\n## 查看数据库\n`SHOW DATABASES;`\n\n## 查看表\n\tUSE blog;\n\tSHOW TABLES;\n## 查看表中的列\n\tSHOW COLUMNS FROM auth_user; 或：DESCRIBE auth_user;\n**describe 表名** 是 **show columns from 表名** 的一种快捷方式。\n\n## 创建数据库\n```mysql\nmysql> CREATE DATABASE 库名;\nmysql> USE 库名;\nmysql> CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1));```\n例：\n## 创建表\n```\nuse demo;\ncreate table pet(\n        name varchar(20),        #名字\n        owner varchar(20),       #主人\n        species varchar(20),     #种类\n        sex char(1),             #性别\n        birth date,              #出生日期\n        death date               #死亡日期\n)```\n\n为了验证你的表是按你期望的方式创建，使用一个**DESCRIBE**语句：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/mysql%E6%95%B0%E6%8D%AE%E5%BA%93001.jpg)\n\n## 删除数据库：\nmysql> `DROP DATABASE 库名;`\n## 删除数据表：\nmysql> `DROP TABLE 表名；`\n## 将表中记录清空：\nmysql> `DELETE FROM 表名;`\n\n## 创建表(复杂形式)：\n### 创建customer表：\n```\ncreate table customers(\n    id int not null auto_increment,\n    name char(20) not null,\n    address char(50) null,\n    city char(50) null,\n    age int not null,\n    love char(50) not null default 'No habbit',\n    primary key(id)\n)engine=InnoDB;```\n\n**SELECT last_insert_id();**这个函数可以获得返回最后一个**auto_increment**值。默认值为：default 'No habbit',\n引擎类型，多为**engine = InnoDB**，如果省略了**engine=**语句，则使用默认的引擎(MyISAM)\n\n## 更改表结构：\n\n- 增加一列：\n\t`alter table pet add des char(100) null;`\n- 删除：\n    `alter table pet drop column des;`\n- 重命名表：\n\t`rename table pet to animals;`\n- 添加id字段：\n```\nalter table pet add id int not null\nprimary key auto_increment first;```\n详见：http://www.cnblogs.com/beginman/p/3249472.html\n\n\n\n## 查看密码\n* 1.用root 进入mysql后\nmysql>`set password =password('你的密码');`\nmysql>`flush privileges;`\n\n* 2.使用GRANT语句 \nmysql>`grant all on *.* to 'root'@'localhost' IDENTIFIED BY '你的密码'with grant option ;`\nmysql>`flush privileges;`\n\n* 3.进入mysql库修改user表\nmysql>`use mysql;`\nmysql>`update user set password=password('你的密码') where user='root'; `\nmysql>`flush privileges;`\n\n## 设置数据库密码\n```\nmysql -u root -p\n> （输入密码）\n> create user '用户名'@'localhost' identified by '密码';\n> grant all privileges on 库名.* to '用户名'@'localhost';\n> flush privileges;\n> exit;```\n\n## 修改Mysql密码\n- 方法一：\n使用phpmyadmin，直接修改Mysql库的user 表。或者使用Navicat for Mysql 直接修改连接属性。\n【据说可以用直接修改user表文件的方法：\n**法一：**关闭MySQL，Windows下打开Mysql\\data\\mysql，有三个文件user.frm,user.MYD,user.MYI找个知道密码的MySQL，替换相应的这三个文件，如果user表结构没改过，一般也没人去改，替换user.MYD就可以了。\n**法二：**也可以直接编辑user.MYD，找个十六进制编辑器，UltraEdit就有这个功能。关闭MySQL，打开user.MYD。将用户名root后面的八个字符改为565491d704013245，新密码就是123456。或者将它们对应的十六进制数字，（左边那里，一个字符对应两个数字），改为 00 02 02 02 02 02 02 02,这就是空密码，在编辑器右边看到的都是星号*，看起来很象小数点。重开MySQL，输入root和你的新密码。】\n\n- 方法二：使用mysqladmin\ncd到mysql的bin文件夹，然后执行如下\nD:\\Mysql\\bin>`mysqladmin -u root -p password 新密码`\nEnter password:(在此输入原密码)\n格式：**mysqladmin -u用户名 -p旧密码 password 新密码。**\n\n#### 忘记密码：\n- 1.用root或者运行mysqld的用户登录系统； \n- 2．利用kill命令结束掉mysqld的进程； \n- 3．使用**--skip-grant-tables**参数启动MySQL Server \n- shell>`mysqld_safe --skip-grant-tables &` \n- UPDATE user SET password=PASSWORD(\"new password\") WHERE user='root';\n- 4.为root@localhost设置新密码 \n- shell>`mysqladmin -u root flush-privileges password \"newpassword\"`\n- 5．重启MySQL Server\n\n---\n\n看提示，PHP执行时看错误，是用mysql还是mysqli\n语法\n**mysql_connect(servername,username,password);**\n\n参数描述servername可选。规定要连接的服务器。默认是 \"localhost:3306\"。username可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。password可选。规定登录所用的密码。默认是 \"\"。\n\n语法\n**CREATE DATABASE database_name**\n\n|参数|描述|\n|-----|-------|\n|servername|可选。规定要连接的服务器。默认是 \"localhost:3306\"。|\n|username|可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。|\n|passwd|可选。规定登录所用的密码。默认是 \"\"。|\n\n为了让 PHP 执行上面的语句，我们必须使用 mysql_query() 函数。此函数用于向 MySQL 连接发送查询或命令。\n连接：\n例子:\n```php\n<?php\n//在一个变量中 ($con) 存放了在脚本中供稍后使用的连接。如果连接失败，将执行 \"die\" 部分：\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }```\n\n\n创建：\n```mysql\n// Create database\n//创建了一个名为 \"my_db\" 的数据库：\nif (mysql_query(\"CREATE DATABASE my_db\",$con))\n  {\n  echo \"Database created\";\n  }\nelse\n  {\n  echo \"Error creating database: \" . mysql_error();\n  }\n\n// Create table in my_db database\n//创建一个名为 \"Persons\" 的表，此表有三列。列名是 \"FirstName\", \"LastName\" 以及 \"Age\"：\n//重要事项：在创建表之前，必须首先选择数据库。通过 mysql_select_db() 函数选取数据库。\n//注释：当您创建 varchar 类型的数据库字段时，必须规定该字段的最大长度，例如：varchar(15)。\nmysql_select_db(\"my_db\", $con);\n$sql = \"CREATE TABLE Persons \n(\nFirstName varchar(15),\nLastName varchar(15),\nAge int\n)\";\nmysql_query($sql,$con);\n\nmysql_close($con);   //提前关闭连接，请使用 mysql_close() 函数,不加此句则脚本结束后关闭。\n?>```\n\n---\n\nMySQL 数据类型\n下面的可使用的各种 MySQL 数据类型：\n\n|数值类型|描述|\n|---|---|\n| int(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| smallint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| tinyint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| mediumint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n| bigint(size)|仅支持整数。在 size 参数中规定数字的最大值。|\n|---|---|\n| decimal(size,d)|支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。|\n| double(size,d)|支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。|\n| float(size,d) |支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。|\n\n\n|文本数据类型|描述|\n|-------|-----|\n|char(size)|支持固定长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定固定长度。|\n|varchar(size)|支持可变长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定最大长度。|\n|tinytext|支持可变长度的字符串，最大长度是 255 个字符。|\n|text blob|支持可变长度的字符串，最大长度是 65535 个字符。|\n|mediumtext mediumblob|支持可变长度的字符串，最大长度是 16777215 个字符。|\n|longtext longblob|支持可变长度的字符串，最大长度是 4294967295 个字符。|\n\n|日期数据类型|描述|\n|----|----|\n|date(yyyy-mm-dd)|支持日期或时间|\n|datetime(yyyy-mm-dd hh:mm:ss)|支持日期或时间|\n|timestamp(yyyymmddhhmmss)|支持日期或时间|\n|time(hh:mm:ss)|支持日期或时间|\n\n|杂项数据类型|描述|\n|---|---|\n|enum(value1,value2,ect)|ENUM 是 ENUMERATED 列表的缩写。可以在括号中存放最多 65535 个值。|\n|set|SET 与 ENUM 相似。但是，SET 可拥有最多 64 个列表项目，并可存放不止一个 choice|\n\n#### 主键和自动递增字段\n每个表都应有一个主键字段。\n主键用于对表中的行进行唯一标识。每个主键值在表中必须是唯一的。此外，主键字段不能为空，这是由于数据库引擎需要一个值来对记录进行定位。\n主键字段永远要被编入索引。这条规则没有例外。你必须对主键字段进行索引，这样数据库引擎才能快速定位给予该键值的行。\n下面的例子把 **personID** 字段设置为主键字段。主键字段通常是 ID 号，且通常使用 **AUTO_INCREMENT** 设置。**AUTO_INCREMENT** 会在新记录被添加时逐一增加该字段的值。要确保主键字段不为空，我们必须向该字段添加 **NOT NULL** 设置。\n例：\n```mysql\n$sql = \"CREATE TABLE Persons \n(\npersonID int NOT NULL AUTO_INCREMENT, \nPRIMARY KEY(personID),\nFirstName varchar(15),\nLastName varchar(15),\nAge int\n)\";\n\nmysql_query($sql,$con);```\n\n#### 插入：\n语法\n```\nINSERT INTO table_name\nVALUES (value1, value2,....)```\n您还可以规定希望在其中插入数据的列：\n```\nINSERT INTO table_name (column1, column2,...)\nVALUES (value1, value2,....)```\n注释：SQL 语句对大小写不敏感。**INSERT INTO 与 insert into** 相同。\n\n\n为了让 PHP 执行该语句，我们必须使用 **mysql_query()** 函数。该函数用于向 MySQL 连接发送查询或命令。\n例子\n在前面的章节，我们创建了一个名为 \"Persons\" 的表，有三个列：\"Firstname\", \"Lastname\" 以及 \"Age\"。我们将在本例中使用同样的表。下面的例子向 \"Persons\" 表添加了两个新记录：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\nmysql_query(\"INSERT INTO Persons (FirstName, LastName, Age) \nVALUES ('Peter', 'Griffin', '35')\");\n\nmysql_query(\"INSERT INTO Persons (FirstName, LastName, Age) \nVALUES ('Glenn', 'Quagmire', '33')\");\n\nmysql_close($con);\n?>```\n\n#### 把来自表单的数据插入数据库\n现在，我们创建一个 HTML 表单，这个表单可把新记录插入 \"Persons\" 表。\n这是这个 HTML 表单：\n```html\n<html>\n<body>\n\n<form action=\"insert.php\" method=\"post\">\nFirstname: <input type=\"text\" name=\"firstname\" />\nLastname: <input type=\"text\" name=\"lastname\" />\nAge: <input type=\"text\" name=\"age\" />\n<input type=\"submit\" />\n</form>\n\n</body>\n</html>```\n\n当用户点击上例中 HTML 表单中的提交按钮时，表单数据被发送到 \"insert.php\"。\"insert.php\" 文件连接数据库，并通过 **$_POST** 变量从表单取回值。然后，mysql_query() 函数执行 **INSERT INTO** 语句，一条新的记录会添加到数据库表中。\n下面是 \"insert.php\" 页面的代码：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\n$sql=\"INSERT INTO Persons (FirstName, LastName, Age)\nVALUES\n('$_POST[firstname]','$_POST[lastname]','$_POST[age]')\";\n\nif (!mysql_query($sql,$con))\n  {\n  die('Error: ' . mysql_error());\n  }\necho \"1 record added\";\n\nmysql_close($con)\n?>```\n\n\n#### 修改：\n`UPDATE` 语句用于修改数据库表中的数据。\n语法\n```mysql\nUPDATE table_name\nSET column_name = new_value\nWHERE column_name = some_value```\n\n注释：SQL 对大小写不敏感。UPDATE 与 update 等效。\n为了让 PHP 执行上面的语句，我们必须使用 mysql_query( 函数。该函数用于向 SQL 连接发送查询和命令。\n例子\n稍早时，我们在本教程中创建了一个名为 \"Persons\" 的表。它看起来类似这样：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Peter|Griffin|35|\n|Glenn|Quagmire|33|\n下面的例子更新 \"Persons\" 表的一些数据：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\nmysql_query(\"UPDATE Persons SET Age = '36'\nWHERE FirstName = 'Peter' AND LastName = 'Griffin'\");\n\nmysql_close($con);\n?>```\n在这次更新后，\"Persons\" 表格是这样的：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Peter|Griffin|36|\n|Glenn|Quagmire|33|\n\n#### 删除：\n删除数据库中的数据\n`DELETE FROM` 语句用于从数据库表中删除记录。\n语法\n```mysql\nDELETE FROM table_name\nWHERE column_name = some_value```\n\n注释：SQL 对大小写不敏感。DELETE FROM 与 delete from 等效。\n为了让 PHP 执行上面的语句，我们必须使用 **mysql_query**( 函数。该函数用于向 SQL 连接发送查询和命令。\n例子\n稍早时，我们在本教程中创建了一个名为 \"Persons\" 的表。它看起来类似这样：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Peter|Griffin|35|\n|Glenn|Quagmire|33|\n下面的例子删除 \"Persons\" 表中所有 LastName='Griffin' 的记录：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\nmysql_query(\"DELETE FROM Persons WHERE LastName='Griffin'\");\n\nmysql_close($con);\n?>```\n在这次删除之后，表是这样的：\n\n|FirstName|LastName|Age|\n|---|---|---|\n|Glenn|Quagmire|33|\n\n#### 查询：\n`SELECT` 语句用于从数据库中选取数据。\n语法\nSELECT column_name(s) FROM table_name\n注释：SQL 语句对大小写不敏感。SELECT 与 select 等效。\n为了让 PHP 执行上面的语句，我们必须使用** mysql_query()** 函数。该函数用于向 MySQL 发送查询或命令。\n例子\n下面的例子选取存储在 \"Persons\" 表中的所有数据（* 字符选取表中所有数据）：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\n$result = mysql_query(\"SELECT * FROM Persons\");\n\nwhile($row = mysql_fetch_array($result))\n  {\n  echo $row['FirstName'] . \" \" . $row['LastName'];\n  echo \"<br />\";\n  }\n\nmysql_close($con);\n?>```\n上面这个例子在 $result 变量中存放由 mysql_query() 函数返回的数据。接下来，我们使用 mysql_fetch_array() 函数以数组的形式从记录集返回第一行。每个随后对 mysql_fetch_array() 函数的调用都会返回记录集中的下一行。 while loop 语句会循环记录集中的所有记录。为了输出每行的值，我们使用了 PHP 的 $row 变量 ($row['FirstName'] 和 $row['LastName'])。\n以上代码的输出：\nPeter Griffin\nGlenn Quagmire\n\n#### 在 HTML 表格中显示结果\n下面的例子选取的数据与上面的例子相同，但是将把数据显示在一个 HTML 表格中：\n```php\n<?php\n$con = mysql_connect(\"localhost\",\"peter\",\"abc123\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"my_db\", $con);\n\n$result = mysql_query(\"SELECT * FROM Persons\");\n\necho \"<table border='1'>\n<tr>\n<th>Firstname</th>\n<th>Lastname</th>\n</tr>\";\n\nwhile($row = mysql_fetch_array($result))\n  {\n  echo \"<tr>\";\n  echo \"<td>\" . $row['FirstName'] . \"</td>\";\n  echo \"<td>\" . $row['LastName'] . \"</td>\";\n  echo \"</tr>\";\n  }\necho \"</table>\";\n\nmysql_close($con);\n?>```\n以上代码的输出：\n\n|FirstName|LastName|\n|---|---|\n|Peter|Griffin|\n|Glenn|Quagmire|\n\n\n---\n","slug":"数据库-2016-11-03-MySQL数据库","published":1,"updated":"2016-11-21T02:17:08.894Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjlp0010d8pkcnqkxpxm","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>MySql</p>\n<h3 id=\"特别要注意大小写和命令后的英文-号。\"><a href=\"#特别要注意大小写和命令后的英文-号。\" class=\"headerlink\" title=\"特别要注意大小写和命令后的英文;号。\"></a>特别要注意大小写和命令后的英文;号。</h3><p><strong>新安装默认密码为空</strong><code>mysql -u root</code> 即可进入，不要<code>mysql -u root -p</code>进不去的<br>大于5.7的版本默认有随机密码，执行<code>cat  /var/log/mysqld.log | grep password | grep &#39;root@localhost&#39; | awk -F &#39;root@localhost: &#39; &#39;{print $2}&#39;</code>查看随机生成的密码。</p>\n<h2 id=\"查看数据库\"><a href=\"#查看数据库\" class=\"headerlink\" title=\"查看数据库\"></a>查看数据库</h2><p><code>SHOW DATABASES;</code></p>\n<h2 id=\"查看表\"><a href=\"#查看表\" class=\"headerlink\" title=\"查看表\"></a>查看表</h2><pre><code>USE blog;\nSHOW TABLES;\n</code></pre><h2 id=\"查看表中的列\"><a href=\"#查看表中的列\" class=\"headerlink\" title=\"查看表中的列\"></a>查看表中的列</h2><pre><code>SHOW COLUMNS FROM auth_user; 或：DESCRIBE auth_user;\n</code></pre><p><strong>describe 表名</strong> 是 <strong>show columns from 表名</strong> 的一种快捷方式。</p>\n<h2 id=\"创建数据库\"><a href=\"#创建数据库\" class=\"headerlink\" title=\"创建数据库\"></a>创建数据库</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; CREATE DATABASE 库名;</div><div class=\"line\">mysql&gt; USE 库名;</div><div class=\"line\">mysql&gt; CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1));</div></pre></td></tr></table></figure>\n<p>例：</p>\n<h2 id=\"创建表\"><a href=\"#创建表\" class=\"headerlink\" title=\"创建表\"></a>创建表</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">use</span> demo;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> pet(</div><div class=\"line\">        <span class=\"keyword\">name</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>),        #名字</div><div class=\"line\">        owner <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>),       #主人</div><div class=\"line\">        species <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>),     #种类</div><div class=\"line\">        sex <span class=\"built_in\">char</span>(<span class=\"number\">1</span>),             #性别</div><div class=\"line\">        birth <span class=\"built_in\">date</span>,              #出生日期</div><div class=\"line\">        death <span class=\"built_in\">date</span>               #死亡日期</div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<p>为了验证你的表是按你期望的方式创建，使用一个<strong>DESCRIBE</strong>语句：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/mysql%E6%95%B0%E6%8D%AE%E5%BA%93001.jpg\" alt=\"\"></p>\n<h2 id=\"删除数据库：\"><a href=\"#删除数据库：\" class=\"headerlink\" title=\"删除数据库：\"></a>删除数据库：</h2><p>mysql&gt; <code>DROP DATABASE 库名;</code></p>\n<h2 id=\"删除数据表：\"><a href=\"#删除数据表：\" class=\"headerlink\" title=\"删除数据表：\"></a>删除数据表：</h2><p>mysql&gt; <code>DROP TABLE 表名；</code></p>\n<h2 id=\"将表中记录清空：\"><a href=\"#将表中记录清空：\" class=\"headerlink\" title=\"将表中记录清空：\"></a>将表中记录清空：</h2><p>mysql&gt; <code>DELETE FROM 表名;</code></p>\n<h2 id=\"创建表-复杂形式-：\"><a href=\"#创建表-复杂形式-：\" class=\"headerlink\" title=\"创建表(复杂形式)：\"></a>创建表(复杂形式)：</h2><h3 id=\"创建customer表：\"><a href=\"#创建customer表：\" class=\"headerlink\" title=\"创建customer表：\"></a>创建customer表：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> customers(</div><div class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span> auto_increment,</div><div class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">char</span>(<span class=\"number\">20</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span>,</div><div class=\"line\">    address <span class=\"built_in\">char</span>(<span class=\"number\">50</span>) <span class=\"literal\">null</span>,</div><div class=\"line\">    city <span class=\"built_in\">char</span>(<span class=\"number\">50</span>) <span class=\"literal\">null</span>,</div><div class=\"line\">    age <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span>,</div><div class=\"line\">    love <span class=\"built_in\">char</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">'No habbit'</span>,</div><div class=\"line\">    primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>)</div><div class=\"line\">)<span class=\"keyword\">engine</span>=<span class=\"keyword\">InnoDB</span>;</div></pre></td></tr></table></figure>\n<p><strong>SELECT last_insert_id();</strong>这个函数可以获得返回最后一个<strong>auto_increment</strong>值。默认值为：default ‘No habbit’,<br>引擎类型，多为<strong>engine = InnoDB</strong>，如果省略了<strong>engine=</strong>语句，则使用默认的引擎(MyISAM)</p>\n<h2 id=\"更改表结构：\"><a href=\"#更改表结构：\" class=\"headerlink\" title=\"更改表结构：\"></a>更改表结构：</h2><ul>\n<li>增加一列：<br>  <code>alter table pet add des char(100) null;</code></li>\n<li>删除：<br>  <code>alter table pet drop column des;</code></li>\n<li>重命名表：<br>  <code>rename table pet to animals;</code></li>\n<li>添加id字段：<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> pet <span class=\"keyword\">add</span> <span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span></div><div class=\"line\">primary <span class=\"keyword\">key</span> auto_increment <span class=\"keyword\">first</span>;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>详见：<a href=\"http://www.cnblogs.com/beginman/p/3249472.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/beginman/p/3249472.html</a></p>\n<h2 id=\"查看密码\"><a href=\"#查看密码\" class=\"headerlink\" title=\"查看密码\"></a>查看密码</h2><ul>\n<li><p>1.用root 进入mysql后<br>mysql&gt;<code>set password =password(&#39;你的密码&#39;);</code><br>mysql&gt;<code>flush privileges;</code></p>\n</li>\n<li><p>2.使用GRANT语句<br>mysql&gt;<code>grant all on *.* to &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;你的密码&#39;with grant option ;</code><br>mysql&gt;<code>flush privileges;</code></p>\n</li>\n<li><p>3.进入mysql库修改user表<br>mysql&gt;<code>use mysql;</code><br>mysql&gt;<code>update user set password=password(&#39;你的密码&#39;) where user=&#39;root&#39;;</code><br>mysql&gt;<code>flush privileges;</code></p>\n</li>\n</ul>\n<h2 id=\"设置数据库密码\"><a href=\"#设置数据库密码\" class=\"headerlink\" title=\"设置数据库密码\"></a>设置数据库密码</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -u root -p</div><div class=\"line\">&gt; （输入密码）</div><div class=\"line\">&gt; create user <span class=\"string\">'用户名'</span>@<span class=\"string\">'localhost'</span> identified by <span class=\"string\">'密码'</span>;</div><div class=\"line\">&gt; grant all privileges on 库名.* to <span class=\"string\">'用户名'</span>@<span class=\"string\">'localhost'</span>;</div><div class=\"line\">&gt; flush privileges;</div><div class=\"line\">&gt; <span class=\"keyword\">exit</span>;</div></pre></td></tr></table></figure>\n<h2 id=\"修改Mysql密码\"><a href=\"#修改Mysql密码\" class=\"headerlink\" title=\"修改Mysql密码\"></a>修改Mysql密码</h2><ul>\n<li><p>方法一：<br>使用phpmyadmin，直接修改Mysql库的user 表。或者使用Navicat for Mysql 直接修改连接属性。<br>【据说可以用直接修改user表文件的方法：<br><strong>法一：</strong>关闭MySQL，Windows下打开Mysql\\data\\mysql，有三个文件user.frm,user.MYD,user.MYI找个知道密码的MySQL，替换相应的这三个文件，如果user表结构没改过，一般也没人去改，替换user.MYD就可以了。<br><strong>法二：</strong>也可以直接编辑user.MYD，找个十六进制编辑器，UltraEdit就有这个功能。关闭MySQL，打开user.MYD。将用户名root后面的八个字符改为565491d704013245，新密码就是123456。或者将它们对应的十六进制数字，（左边那里，一个字符对应两个数字），改为 00 02 02 02 02 02 02 02,这就是空密码，在编辑器右边看到的都是星号*，看起来很象小数点。重开MySQL，输入root和你的新密码。】</p>\n</li>\n<li><p>方法二：使用mysqladmin<br>cd到mysql的bin文件夹，然后执行如下<br>D:\\Mysql\\bin&gt;<code>mysqladmin -u root -p password 新密码</code><br>Enter password:(在此输入原密码)<br>格式：<strong>mysqladmin -u用户名 -p旧密码 password 新密码。</strong></p>\n</li>\n</ul>\n<h4 id=\"忘记密码：\"><a href=\"#忘记密码：\" class=\"headerlink\" title=\"忘记密码：\"></a>忘记密码：</h4><ul>\n<li>1.用root或者运行mysqld的用户登录系统； </li>\n<li>2．利用kill命令结束掉mysqld的进程； </li>\n<li>3．使用<strong>–skip-grant-tables</strong>参数启动MySQL Server </li>\n<li>shell&gt;<code>mysqld_safe --skip-grant-tables &amp;</code> </li>\n<li>UPDATE user SET password=PASSWORD(“new password”) WHERE user=’root’;</li>\n<li>4.为root@localhost设置新密码 </li>\n<li>shell&gt;<code>mysqladmin -u root flush-privileges password &quot;newpassword&quot;</code></li>\n<li>5．重启MySQL Server</li>\n</ul>\n<hr>\n<p>看提示，PHP执行时看错误，是用mysql还是mysqli<br>语法<br><strong>mysql_connect(servername,username,password);</strong></p>\n<p>参数描述servername可选。规定要连接的服务器。默认是 “localhost:3306”。username可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。password可选。规定登录所用的密码。默认是 “”。</p>\n<p>语法<br><strong>CREATE DATABASE database_name</strong></p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>servername</td>\n<td>可选。规定要连接的服务器。默认是 “localhost:3306”。</td>\n</tr>\n<tr>\n<td>username</td>\n<td>可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。</td>\n</tr>\n<tr>\n<td>passwd</td>\n<td>可选。规定登录所用的密码。默认是 “”。</td>\n</tr>\n</tbody>\n</table>\n<p>为了让 PHP 执行上面的语句，我们必须使用 mysql_query() 函数。此函数用于向 MySQL 连接发送查询或命令。<br>连接：<br>例子:<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"><span class=\"comment\">//在一个变量中 ($con) 存放了在脚本中供稍后使用的连接。如果连接失败，将执行 \"die\" 部分：</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>创建：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">// Create database</div><div class=\"line\">//创建了一个名为 &quot;my_db&quot; 的数据库：</div><div class=\"line\">if (mysql_query(&quot;CREATE DATABASE my_db&quot;,$con))</div><div class=\"line\">  &#123;</div><div class=\"line\">  echo &quot;Database created&quot;;</div><div class=\"line\">  &#125;</div><div class=\"line\">else</div><div class=\"line\">  &#123;</div><div class=\"line\">  echo &quot;Error creating database: &quot; . mysql_error();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">// Create table in my_db database</div><div class=\"line\">//创建一个名为 &quot;Persons&quot; 的表，此表有三列。列名是 &quot;FirstName&quot;, &quot;LastName&quot; 以及 &quot;Age&quot;：</div><div class=\"line\">//重要事项：在创建表之前，必须首先选择数据库。通过 mysql_select_db() 函数选取数据库。</div><div class=\"line\">//注释：当您创建 varchar 类型的数据库字段时，必须规定该字段的最大长度，例如：varchar(15)。</div><div class=\"line\">mysql_select_db(&quot;my_db&quot;, $con);</div><div class=\"line\">$sql = &quot;CREATE TABLE Persons </div><div class=\"line\">(</div><div class=\"line\">FirstName varchar(15),</div><div class=\"line\">LastName varchar(15),</div><div class=\"line\">Age int</div><div class=\"line\">)&quot;;</div><div class=\"line\">mysql_query($sql,$con);</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);   //提前关闭连接，请使用 mysql_close() 函数,不加此句则脚本结束后关闭。</div><div class=\"line\">?&gt;</div></pre></td></tr></table></figure></p>\n<hr>\n<p>MySQL 数据类型<br>下面的可使用的各种 MySQL 数据类型：</p>\n<table>\n<thead>\n<tr>\n<th>数值类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>int(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>smallint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>tinyint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>mediumint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>bigint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>—</td>\n<td>—</td>\n</tr>\n<tr>\n<td>decimal(size,d)</td>\n<td>支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。</td>\n</tr>\n<tr>\n<td>double(size,d)</td>\n<td>支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。</td>\n</tr>\n<tr>\n<td>float(size,d)</td>\n<td>支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>文本数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>char(size)</td>\n<td>支持固定长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定固定长度。</td>\n</tr>\n<tr>\n<td>varchar(size)</td>\n<td>支持可变长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定最大长度。</td>\n</tr>\n<tr>\n<td>tinytext</td>\n<td>支持可变长度的字符串，最大长度是 255 个字符。</td>\n</tr>\n<tr>\n<td>text blob</td>\n<td>支持可变长度的字符串，最大长度是 65535 个字符。</td>\n</tr>\n<tr>\n<td>mediumtext mediumblob</td>\n<td>支持可变长度的字符串，最大长度是 16777215 个字符。</td>\n</tr>\n<tr>\n<td>longtext longblob</td>\n<td>支持可变长度的字符串，最大长度是 4294967295 个字符。</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>日期数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>date(yyyy-mm-dd)</td>\n<td>支持日期或时间</td>\n</tr>\n<tr>\n<td>datetime(yyyy-mm-dd hh:mm:ss)</td>\n<td>支持日期或时间</td>\n</tr>\n<tr>\n<td>timestamp(yyyymmddhhmmss)</td>\n<td>支持日期或时间</td>\n</tr>\n<tr>\n<td>time(hh:mm:ss)</td>\n<td>支持日期或时间</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>杂项数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>enum(value1,value2,ect)</td>\n<td>ENUM 是 ENUMERATED 列表的缩写。可以在括号中存放最多 65535 个值。</td>\n</tr>\n<tr>\n<td>set</td>\n<td>SET 与 ENUM 相似。但是，SET 可拥有最多 64 个列表项目，并可存放不止一个 choice</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"主键和自动递增字段\"><a href=\"#主键和自动递增字段\" class=\"headerlink\" title=\"主键和自动递增字段\"></a>主键和自动递增字段</h4><p>每个表都应有一个主键字段。<br>主键用于对表中的行进行唯一标识。每个主键值在表中必须是唯一的。此外，主键字段不能为空，这是由于数据库引擎需要一个值来对记录进行定位。<br>主键字段永远要被编入索引。这条规则没有例外。你必须对主键字段进行索引，这样数据库引擎才能快速定位给予该键值的行。<br>下面的例子把 <strong>personID</strong> 字段设置为主键字段。主键字段通常是 ID 号，且通常使用 <strong>AUTO_INCREMENT</strong> 设置。<strong>AUTO_INCREMENT</strong> 会在新记录被添加时逐一增加该字段的值。要确保主键字段不为空，我们必须向该字段添加 <strong>NOT NULL</strong> 设置。<br>例：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">$sql = &quot;CREATE TABLE Persons </div><div class=\"line\">(</div><div class=\"line\">personID int NOT NULL AUTO_INCREMENT, </div><div class=\"line\">PRIMARY KEY(personID),</div><div class=\"line\">FirstName varchar(15),</div><div class=\"line\">LastName varchar(15),</div><div class=\"line\">Age int</div><div class=\"line\">)&quot;;</div><div class=\"line\"></div><div class=\"line\">mysql_query($sql,$con);</div></pre></td></tr></table></figure></p>\n<h4 id=\"插入：\"><a href=\"#插入：\" class=\"headerlink\" title=\"插入：\"></a>插入：</h4><p>语法<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> table_name</div><div class=\"line\"><span class=\"keyword\">VALUES</span> (value1, value2,....)</div></pre></td></tr></table></figure></p>\n<p>您还可以规定希望在其中插入数据的列：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"title\">INSERT</span></span> INTO table_name (column1, column2,...)</div><div class=\"line\"><span class=\"function\"><span class=\"title\">VALUES</span></span> (value1, value2,....)</div></pre></td></tr></table></figure></p>\n<p>注释：SQL 语句对大小写不敏感。<strong>INSERT INTO 与 insert into</strong> 相同。</p>\n<p>为了让 PHP 执行该语句，我们必须使用 <strong>mysql_query()</strong> 函数。该函数用于向 MySQL 连接发送查询或命令。<br>例子<br>在前面的章节，我们创建了一个名为 “Persons” 的表，有三个列：”Firstname”, “Lastname” 以及 “Age”。我们将在本例中使用同样的表。下面的例子向 “Persons” 表添加了两个新记录：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"INSERT INTO Persons (FirstName, LastName, Age) </span></div><div class=\"line\">VALUES ('Peter', 'Griffin', '35')\");</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"INSERT INTO Persons (FirstName, LastName, Age) </span></div><div class=\"line\">VALUES ('Glenn', 'Quagmire', '33')\");</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"把来自表单的数据插入数据库\"><a href=\"#把来自表单的数据插入数据库\" class=\"headerlink\" title=\"把来自表单的数据插入数据库\"></a>把来自表单的数据插入数据库</h4><p>现在，我们创建一个 HTML 表单，这个表单可把新记录插入 “Persons” 表。<br>这是这个 HTML 表单：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"insert.php\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span>&gt;</span></div><div class=\"line\">Firstname: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"firstname\"</span> /&gt;</span></div><div class=\"line\">Lastname: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"lastname\"</span> /&gt;</span></div><div class=\"line\">Age: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>当用户点击上例中 HTML 表单中的提交按钮时，表单数据被发送到 “insert.php”。”insert.php” 文件连接数据库，并通过 <strong>$_POST</strong> 变量从表单取回值。然后，mysql_query() 函数执行 <strong>INSERT INTO</strong> 语句，一条新的记录会添加到数据库表中。<br>下面是 “insert.php” 页面的代码：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">$sql=<span class=\"string\">\"INSERT INTO Persons (FirstName, LastName, Age)</span></div><div class=\"line\">VALUES</div><div class=\"line\">('$_POST[firstname]','$_POST[lastname]','$_POST[age]')\";</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> (!mysql_query($sql,$con))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Error: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"1 record added\"</span>;</div><div class=\"line\"></div><div class=\"line\">mysql_close($con)</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"修改：\"><a href=\"#修改：\" class=\"headerlink\" title=\"修改：\"></a>修改：</h4><p><code>UPDATE</code> 语句用于修改数据库表中的数据。<br>语法<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">UPDATE table_name</div><div class=\"line\">SET column_name = new_value</div><div class=\"line\">WHERE column_name = some_value</div></pre></td></tr></table></figure></p>\n<p>注释：SQL 对大小写不敏感。UPDATE 与 update 等效。<br>为了让 PHP 执行上面的语句，我们必须使用 mysql_query( 函数。该函数用于向 SQL 连接发送查询和命令。<br>例子<br>稍早时，我们在本教程中创建了一个名为 “Persons” 的表。它看起来类似这样：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n<td>35</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<p>下面的例子更新 “Persons” 表的一些数据：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"UPDATE Persons SET Age = '36'</span></div><div class=\"line\">WHERE FirstName = 'Peter' AND LastName = 'Griffin'\");</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>在这次更新后，”Persons” 表格是这样的：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n<td>36</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"删除：\"><a href=\"#删除：\" class=\"headerlink\" title=\"删除：\"></a>删除：</h4><p>删除数据库中的数据<br><code>DELETE FROM</code> 语句用于从数据库表中删除记录。<br>语法<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">DELETE FROM table_name</div><div class=\"line\">WHERE column_name = some_value</div></pre></td></tr></table></figure></p>\n<p>注释：SQL 对大小写不敏感。DELETE FROM 与 delete from 等效。<br>为了让 PHP 执行上面的语句，我们必须使用 <strong>mysql_query</strong>( 函数。该函数用于向 SQL 连接发送查询和命令。<br>例子<br>稍早时，我们在本教程中创建了一个名为 “Persons” 的表。它看起来类似这样：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n<td>35</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<p>下面的例子删除 “Persons” 表中所有 LastName=’Griffin’ 的记录：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"DELETE FROM Persons WHERE LastName='Griffin'\"</span>);</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>在这次删除之后，表是这样的：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"查询：\"><a href=\"#查询：\" class=\"headerlink\" title=\"查询：\"></a>查询：</h4><p><code>SELECT</code> 语句用于从数据库中选取数据。<br>语法<br>SELECT column_name(s) FROM table_name<br>注释：SQL 语句对大小写不敏感。SELECT 与 select 等效。<br>为了让 PHP 执行上面的语句，我们必须使用<strong> mysql_query()</strong> 函数。该函数用于向 MySQL 发送查询或命令。<br>例子<br>下面的例子选取存储在 “Persons” 表中的所有数据（* 字符选取表中所有数据）：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">$result = mysql_query(<span class=\"string\">\"SELECT * FROM Persons\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">while</span>($row = mysql_fetch_array($result))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">echo</span> $row[<span class=\"string\">'FirstName'</span>] . <span class=\"string\">\" \"</span> . $row[<span class=\"string\">'LastName'</span>];</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;br /&gt;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>上面这个例子在 $result 变量中存放由 mysql_query() 函数返回的数据。接下来，我们使用 mysql_fetch_array() 函数以数组的形式从记录集返回第一行。每个随后对 mysql_fetch_array() 函数的调用都会返回记录集中的下一行。 while loop 语句会循环记录集中的所有记录。为了输出每行的值，我们使用了 PHP 的 $row 变量 ($row[‘FirstName’] 和 $row[‘LastName’])。<br>以上代码的输出：<br>Peter Griffin<br>Glenn Quagmire</p>\n<h4 id=\"在-HTML-表格中显示结果\"><a href=\"#在-HTML-表格中显示结果\" class=\"headerlink\" title=\"在 HTML 表格中显示结果\"></a>在 HTML 表格中显示结果</h4><p>下面的例子选取的数据与上面的例子相同，但是将把数据显示在一个 HTML 表格中：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">$result = mysql_query(<span class=\"string\">\"SELECT * FROM Persons\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;table border='1'&gt;</span></div><div class=\"line\">&lt;tr&gt;</div><div class=\"line\">&lt;th&gt;Firstname&lt;/th&gt;</div><div class=\"line\">&lt;th&gt;Lastname&lt;/th&gt;</div><div class=\"line\">&lt;/tr&gt;\";</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">while</span>($row = mysql_fetch_array($result))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;tr&gt;\"</span>;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;td&gt;\"</span> . $row[<span class=\"string\">'FirstName'</span>] . <span class=\"string\">\"&lt;/td&gt;\"</span>;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;td&gt;\"</span> . $row[<span class=\"string\">'LastName'</span>] . <span class=\"string\">\"&lt;/td&gt;\"</span>;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;/tr&gt;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;/table&gt;\"</span>;</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>以上代码的输出：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n</tr>\n</tbody>\n</table>\n<hr>\n","excerpt":"","more":"<p>MySql</p>\n<h3 id=\"特别要注意大小写和命令后的英文-号。\"><a href=\"#特别要注意大小写和命令后的英文-号。\" class=\"headerlink\" title=\"特别要注意大小写和命令后的英文;号。\"></a>特别要注意大小写和命令后的英文;号。</h3><p><strong>新安装默认密码为空</strong><code>mysql -u root</code> 即可进入，不要<code>mysql -u root -p</code>进不去的<br>大于5.7的版本默认有随机密码，执行<code>cat  /var/log/mysqld.log | grep password | grep &#39;root@localhost&#39; | awk -F &#39;root@localhost: &#39; &#39;{print $2}&#39;</code>查看随机生成的密码。</p>\n<h2 id=\"查看数据库\"><a href=\"#查看数据库\" class=\"headerlink\" title=\"查看数据库\"></a>查看数据库</h2><p><code>SHOW DATABASES;</code></p>\n<h2 id=\"查看表\"><a href=\"#查看表\" class=\"headerlink\" title=\"查看表\"></a>查看表</h2><pre><code>USE blog;\nSHOW TABLES;\n</code></pre><h2 id=\"查看表中的列\"><a href=\"#查看表中的列\" class=\"headerlink\" title=\"查看表中的列\"></a>查看表中的列</h2><pre><code>SHOW COLUMNS FROM auth_user; 或：DESCRIBE auth_user;\n</code></pre><p><strong>describe 表名</strong> 是 <strong>show columns from 表名</strong> 的一种快捷方式。</p>\n<h2 id=\"创建数据库\"><a href=\"#创建数据库\" class=\"headerlink\" title=\"创建数据库\"></a>创建数据库</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; CREATE DATABASE 库名;</div><div class=\"line\">mysql&gt; USE 库名;</div><div class=\"line\">mysql&gt; CREATE TABLE 表名 (字段名 VARCHAR(20), 字段名 CHAR(1));</div></pre></td></tr></table></figure>\n<p>例：</p>\n<h2 id=\"创建表\"><a href=\"#创建表\" class=\"headerlink\" title=\"创建表\"></a>创建表</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">use</span> demo;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> pet(</div><div class=\"line\">        <span class=\"keyword\">name</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>),        #名字</div><div class=\"line\">        owner <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>),       #主人</div><div class=\"line\">        species <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>),     #种类</div><div class=\"line\">        sex <span class=\"built_in\">char</span>(<span class=\"number\">1</span>),             #性别</div><div class=\"line\">        birth <span class=\"built_in\">date</span>,              #出生日期</div><div class=\"line\">        death <span class=\"built_in\">date</span>               #死亡日期</div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<p>为了验证你的表是按你期望的方式创建，使用一个<strong>DESCRIBE</strong>语句：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/mysql%E6%95%B0%E6%8D%AE%E5%BA%93001.jpg\" alt=\"\"></p>\n<h2 id=\"删除数据库：\"><a href=\"#删除数据库：\" class=\"headerlink\" title=\"删除数据库：\"></a>删除数据库：</h2><p>mysql&gt; <code>DROP DATABASE 库名;</code></p>\n<h2 id=\"删除数据表：\"><a href=\"#删除数据表：\" class=\"headerlink\" title=\"删除数据表：\"></a>删除数据表：</h2><p>mysql&gt; <code>DROP TABLE 表名；</code></p>\n<h2 id=\"将表中记录清空：\"><a href=\"#将表中记录清空：\" class=\"headerlink\" title=\"将表中记录清空：\"></a>将表中记录清空：</h2><p>mysql&gt; <code>DELETE FROM 表名;</code></p>\n<h2 id=\"创建表-复杂形式-：\"><a href=\"#创建表-复杂形式-：\" class=\"headerlink\" title=\"创建表(复杂形式)：\"></a>创建表(复杂形式)：</h2><h3 id=\"创建customer表：\"><a href=\"#创建customer表：\" class=\"headerlink\" title=\"创建customer表：\"></a>创建customer表：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> customers(</div><div class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span> auto_increment,</div><div class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">char</span>(<span class=\"number\">20</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span>,</div><div class=\"line\">    address <span class=\"built_in\">char</span>(<span class=\"number\">50</span>) <span class=\"literal\">null</span>,</div><div class=\"line\">    city <span class=\"built_in\">char</span>(<span class=\"number\">50</span>) <span class=\"literal\">null</span>,</div><div class=\"line\">    age <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span>,</div><div class=\"line\">    love <span class=\"built_in\">char</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">default</span> <span class=\"string\">'No habbit'</span>,</div><div class=\"line\">    primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>)</div><div class=\"line\">)<span class=\"keyword\">engine</span>=<span class=\"keyword\">InnoDB</span>;</div></pre></td></tr></table></figure>\n<p><strong>SELECT last_insert_id();</strong>这个函数可以获得返回最后一个<strong>auto_increment</strong>值。默认值为：default ‘No habbit’,<br>引擎类型，多为<strong>engine = InnoDB</strong>，如果省略了<strong>engine=</strong>语句，则使用默认的引擎(MyISAM)</p>\n<h2 id=\"更改表结构：\"><a href=\"#更改表结构：\" class=\"headerlink\" title=\"更改表结构：\"></a>更改表结构：</h2><ul>\n<li>增加一列：<br>  <code>alter table pet add des char(100) null;</code></li>\n<li>删除：<br>  <code>alter table pet drop column des;</code></li>\n<li>重命名表：<br>  <code>rename table pet to animals;</code></li>\n<li>添加id字段：<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> pet <span class=\"keyword\">add</span> <span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span></div><div class=\"line\">primary <span class=\"keyword\">key</span> auto_increment <span class=\"keyword\">first</span>;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>详见：<a href=\"http://www.cnblogs.com/beginman/p/3249472.html\">http://www.cnblogs.com/beginman/p/3249472.html</a></p>\n<h2 id=\"查看密码\"><a href=\"#查看密码\" class=\"headerlink\" title=\"查看密码\"></a>查看密码</h2><ul>\n<li><p>1.用root 进入mysql后<br>mysql&gt;<code>set password =password(&#39;你的密码&#39;);</code><br>mysql&gt;<code>flush privileges;</code></p>\n</li>\n<li><p>2.使用GRANT语句<br>mysql&gt;<code>grant all on *.* to &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;你的密码&#39;with grant option ;</code><br>mysql&gt;<code>flush privileges;</code></p>\n</li>\n<li><p>3.进入mysql库修改user表<br>mysql&gt;<code>use mysql;</code><br>mysql&gt;<code>update user set password=password(&#39;你的密码&#39;) where user=&#39;root&#39;;</code><br>mysql&gt;<code>flush privileges;</code></p>\n</li>\n</ul>\n<h2 id=\"设置数据库密码\"><a href=\"#设置数据库密码\" class=\"headerlink\" title=\"设置数据库密码\"></a>设置数据库密码</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -u root -p</div><div class=\"line\">&gt; （输入密码）</div><div class=\"line\">&gt; create user <span class=\"string\">'用户名'</span>@<span class=\"string\">'localhost'</span> identified by <span class=\"string\">'密码'</span>;</div><div class=\"line\">&gt; grant all privileges on 库名.* to <span class=\"string\">'用户名'</span>@<span class=\"string\">'localhost'</span>;</div><div class=\"line\">&gt; flush privileges;</div><div class=\"line\">&gt; <span class=\"keyword\">exit</span>;</div></pre></td></tr></table></figure>\n<h2 id=\"修改Mysql密码\"><a href=\"#修改Mysql密码\" class=\"headerlink\" title=\"修改Mysql密码\"></a>修改Mysql密码</h2><ul>\n<li><p>方法一：<br>使用phpmyadmin，直接修改Mysql库的user 表。或者使用Navicat for Mysql 直接修改连接属性。<br>【据说可以用直接修改user表文件的方法：<br><strong>法一：</strong>关闭MySQL，Windows下打开Mysql\\data\\mysql，有三个文件user.frm,user.MYD,user.MYI找个知道密码的MySQL，替换相应的这三个文件，如果user表结构没改过，一般也没人去改，替换user.MYD就可以了。<br><strong>法二：</strong>也可以直接编辑user.MYD，找个十六进制编辑器，UltraEdit就有这个功能。关闭MySQL，打开user.MYD。将用户名root后面的八个字符改为565491d704013245，新密码就是123456。或者将它们对应的十六进制数字，（左边那里，一个字符对应两个数字），改为 00 02 02 02 02 02 02 02,这就是空密码，在编辑器右边看到的都是星号*，看起来很象小数点。重开MySQL，输入root和你的新密码。】</p>\n</li>\n<li><p>方法二：使用mysqladmin<br>cd到mysql的bin文件夹，然后执行如下<br>D:\\Mysql\\bin&gt;<code>mysqladmin -u root -p password 新密码</code><br>Enter password:(在此输入原密码)<br>格式：<strong>mysqladmin -u用户名 -p旧密码 password 新密码。</strong></p>\n</li>\n</ul>\n<h4 id=\"忘记密码：\"><a href=\"#忘记密码：\" class=\"headerlink\" title=\"忘记密码：\"></a>忘记密码：</h4><ul>\n<li>1.用root或者运行mysqld的用户登录系统； </li>\n<li>2．利用kill命令结束掉mysqld的进程； </li>\n<li>3．使用<strong>–skip-grant-tables</strong>参数启动MySQL Server </li>\n<li>shell&gt;<code>mysqld_safe --skip-grant-tables &amp;</code> </li>\n<li>UPDATE user SET password=PASSWORD(“new password”) WHERE user=’root’;</li>\n<li>4.为root@localhost设置新密码 </li>\n<li>shell&gt;<code>mysqladmin -u root flush-privileges password &quot;newpassword&quot;</code></li>\n<li>5．重启MySQL Server</li>\n</ul>\n<hr>\n<p>看提示，PHP执行时看错误，是用mysql还是mysqli<br>语法<br><strong>mysql_connect(servername,username,password);</strong></p>\n<p>参数描述servername可选。规定要连接的服务器。默认是 “localhost:3306”。username可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。password可选。规定登录所用的密码。默认是 “”。</p>\n<p>语法<br><strong>CREATE DATABASE database_name</strong></p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>servername</td>\n<td>可选。规定要连接的服务器。默认是 “localhost:3306”。</td>\n</tr>\n<tr>\n<td>username</td>\n<td>可选。规定登录所使用的用户名。默认值是拥有服务器进程的用户的名称。</td>\n</tr>\n<tr>\n<td>passwd</td>\n<td>可选。规定登录所用的密码。默认是 “”。</td>\n</tr>\n</tbody>\n</table>\n<p>为了让 PHP 执行上面的语句，我们必须使用 mysql_query() 函数。此函数用于向 MySQL 连接发送查询或命令。<br>连接：<br>例子:<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"><span class=\"comment\">//在一个变量中 ($con) 存放了在脚本中供稍后使用的连接。如果连接失败，将执行 \"die\" 部分：</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>创建：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\">// Create database</div><div class=\"line\">//创建了一个名为 &quot;my_db&quot; 的数据库：</div><div class=\"line\">if (mysql_query(&quot;CREATE DATABASE my_db&quot;,$con))</div><div class=\"line\">  &#123;</div><div class=\"line\">  echo &quot;Database created&quot;;</div><div class=\"line\">  &#125;</div><div class=\"line\">else</div><div class=\"line\">  &#123;</div><div class=\"line\">  echo &quot;Error creating database: &quot; . mysql_error();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">// Create table in my_db database</div><div class=\"line\">//创建一个名为 &quot;Persons&quot; 的表，此表有三列。列名是 &quot;FirstName&quot;, &quot;LastName&quot; 以及 &quot;Age&quot;：</div><div class=\"line\">//重要事项：在创建表之前，必须首先选择数据库。通过 mysql_select_db() 函数选取数据库。</div><div class=\"line\">//注释：当您创建 varchar 类型的数据库字段时，必须规定该字段的最大长度，例如：varchar(15)。</div><div class=\"line\">mysql_select_db(&quot;my_db&quot;, $con);</div><div class=\"line\">$sql = &quot;CREATE TABLE Persons </div><div class=\"line\">(</div><div class=\"line\">FirstName varchar(15),</div><div class=\"line\">LastName varchar(15),</div><div class=\"line\">Age int</div><div class=\"line\">)&quot;;</div><div class=\"line\">mysql_query($sql,$con);</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);   //提前关闭连接，请使用 mysql_close() 函数,不加此句则脚本结束后关闭。</div><div class=\"line\">?&gt;</div></pre></td></tr></table></figure></p>\n<hr>\n<p>MySQL 数据类型<br>下面的可使用的各种 MySQL 数据类型：</p>\n<table>\n<thead>\n<tr>\n<th>数值类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>int(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>smallint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>tinyint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>mediumint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>bigint(size)</td>\n<td>仅支持整数。在 size 参数中规定数字的最大值。</td>\n</tr>\n<tr>\n<td>—</td>\n<td>—</td>\n</tr>\n<tr>\n<td>decimal(size,d)</td>\n<td>支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。</td>\n</tr>\n<tr>\n<td>double(size,d)</td>\n<td>支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。</td>\n</tr>\n<tr>\n<td>float(size,d)</td>\n<td>支持带有小数的数字。在 size 参数中规定数字的最大值。在 d 参数中规定小数点右侧的数字的最大值。</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>文本数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>char(size)</td>\n<td>支持固定长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定固定长度。</td>\n</tr>\n<tr>\n<td>varchar(size)</td>\n<td>支持可变长度的字符串。（可包含字母、数字以及特殊符号）。在 size 参数中规定最大长度。</td>\n</tr>\n<tr>\n<td>tinytext</td>\n<td>支持可变长度的字符串，最大长度是 255 个字符。</td>\n</tr>\n<tr>\n<td>text blob</td>\n<td>支持可变长度的字符串，最大长度是 65535 个字符。</td>\n</tr>\n<tr>\n<td>mediumtext mediumblob</td>\n<td>支持可变长度的字符串，最大长度是 16777215 个字符。</td>\n</tr>\n<tr>\n<td>longtext longblob</td>\n<td>支持可变长度的字符串，最大长度是 4294967295 个字符。</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>日期数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>date(yyyy-mm-dd)</td>\n<td>支持日期或时间</td>\n</tr>\n<tr>\n<td>datetime(yyyy-mm-dd hh:mm:ss)</td>\n<td>支持日期或时间</td>\n</tr>\n<tr>\n<td>timestamp(yyyymmddhhmmss)</td>\n<td>支持日期或时间</td>\n</tr>\n<tr>\n<td>time(hh:mm:ss)</td>\n<td>支持日期或时间</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>杂项数据类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>enum(value1,value2,ect)</td>\n<td>ENUM 是 ENUMERATED 列表的缩写。可以在括号中存放最多 65535 个值。</td>\n</tr>\n<tr>\n<td>set</td>\n<td>SET 与 ENUM 相似。但是，SET 可拥有最多 64 个列表项目，并可存放不止一个 choice</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"主键和自动递增字段\"><a href=\"#主键和自动递增字段\" class=\"headerlink\" title=\"主键和自动递增字段\"></a>主键和自动递增字段</h4><p>每个表都应有一个主键字段。<br>主键用于对表中的行进行唯一标识。每个主键值在表中必须是唯一的。此外，主键字段不能为空，这是由于数据库引擎需要一个值来对记录进行定位。<br>主键字段永远要被编入索引。这条规则没有例外。你必须对主键字段进行索引，这样数据库引擎才能快速定位给予该键值的行。<br>下面的例子把 <strong>personID</strong> 字段设置为主键字段。主键字段通常是 ID 号，且通常使用 <strong>AUTO_INCREMENT</strong> 设置。<strong>AUTO_INCREMENT</strong> 会在新记录被添加时逐一增加该字段的值。要确保主键字段不为空，我们必须向该字段添加 <strong>NOT NULL</strong> 设置。<br>例：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">$sql = &quot;CREATE TABLE Persons </div><div class=\"line\">(</div><div class=\"line\">personID int NOT NULL AUTO_INCREMENT, </div><div class=\"line\">PRIMARY KEY(personID),</div><div class=\"line\">FirstName varchar(15),</div><div class=\"line\">LastName varchar(15),</div><div class=\"line\">Age int</div><div class=\"line\">)&quot;;</div><div class=\"line\"></div><div class=\"line\">mysql_query($sql,$con);</div></pre></td></tr></table></figure></p>\n<h4 id=\"插入：\"><a href=\"#插入：\" class=\"headerlink\" title=\"插入：\"></a>插入：</h4><p>语法<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> table_name</div><div class=\"line\"><span class=\"keyword\">VALUES</span> (value1, value2,....)</div></pre></td></tr></table></figure></p>\n<p>您还可以规定希望在其中插入数据的列：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"title\">INSERT</span></span> INTO table_name (column1, column2,...)</div><div class=\"line\"><span class=\"function\"><span class=\"title\">VALUES</span></span> (value1, value2,....)</div></pre></td></tr></table></figure></p>\n<p>注释：SQL 语句对大小写不敏感。<strong>INSERT INTO 与 insert into</strong> 相同。</p>\n<p>为了让 PHP 执行该语句，我们必须使用 <strong>mysql_query()</strong> 函数。该函数用于向 MySQL 连接发送查询或命令。<br>例子<br>在前面的章节，我们创建了一个名为 “Persons” 的表，有三个列：”Firstname”, “Lastname” 以及 “Age”。我们将在本例中使用同样的表。下面的例子向 “Persons” 表添加了两个新记录：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"INSERT INTO Persons (FirstName, LastName, Age) </div><div class=\"line\">VALUES ('Peter', 'Griffin', '35')\"</span>);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"INSERT INTO Persons (FirstName, LastName, Age) </div><div class=\"line\">VALUES ('Glenn', 'Quagmire', '33')\"</span>);</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"把来自表单的数据插入数据库\"><a href=\"#把来自表单的数据插入数据库\" class=\"headerlink\" title=\"把来自表单的数据插入数据库\"></a>把来自表单的数据插入数据库</h4><p>现在，我们创建一个 HTML 表单，这个表单可把新记录插入 “Persons” 表。<br>这是这个 HTML 表单：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"insert.php\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span>&gt;</span></div><div class=\"line\">Firstname: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"firstname\"</span> /&gt;</span></div><div class=\"line\">Lastname: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"lastname\"</span> /&gt;</span></div><div class=\"line\">Age: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> /&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>当用户点击上例中 HTML 表单中的提交按钮时，表单数据被发送到 “insert.php”。”insert.php” 文件连接数据库，并通过 <strong>$_POST</strong> 变量从表单取回值。然后，mysql_query() 函数执行 <strong>INSERT INTO</strong> 语句，一条新的记录会添加到数据库表中。<br>下面是 “insert.php” 页面的代码：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">$sql=<span class=\"string\">\"INSERT INTO Persons (FirstName, LastName, Age)</div><div class=\"line\">VALUES</div><div class=\"line\">('$_POST[firstname]','$_POST[lastname]','$_POST[age]')\"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> (!mysql_query($sql,$con))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Error: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"1 record added\"</span>;</div><div class=\"line\"></div><div class=\"line\">mysql_close($con)</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"修改：\"><a href=\"#修改：\" class=\"headerlink\" title=\"修改：\"></a>修改：</h4><p><code>UPDATE</code> 语句用于修改数据库表中的数据。<br>语法<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">UPDATE table_name</div><div class=\"line\">SET column_name = new_value</div><div class=\"line\">WHERE column_name = some_value</div></pre></td></tr></table></figure></p>\n<p>注释：SQL 对大小写不敏感。UPDATE 与 update 等效。<br>为了让 PHP 执行上面的语句，我们必须使用 mysql_query( 函数。该函数用于向 SQL 连接发送查询和命令。<br>例子<br>稍早时，我们在本教程中创建了一个名为 “Persons” 的表。它看起来类似这样：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n<td>35</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<p>下面的例子更新 “Persons” 表的一些数据：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"UPDATE Persons SET Age = '36'</div><div class=\"line\">WHERE FirstName = 'Peter' AND LastName = 'Griffin'\"</span>);</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>在这次更新后，”Persons” 表格是这样的：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n<td>36</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"删除：\"><a href=\"#删除：\" class=\"headerlink\" title=\"删除：\"></a>删除：</h4><p>删除数据库中的数据<br><code>DELETE FROM</code> 语句用于从数据库表中删除记录。<br>语法<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">DELETE FROM table_name</div><div class=\"line\">WHERE column_name = some_value</div></pre></td></tr></table></figure></p>\n<p>注释：SQL 对大小写不敏感。DELETE FROM 与 delete from 等效。<br>为了让 PHP 执行上面的语句，我们必须使用 <strong>mysql_query</strong>( 函数。该函数用于向 SQL 连接发送查询和命令。<br>例子<br>稍早时，我们在本教程中创建了一个名为 “Persons” 的表。它看起来类似这样：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n<td>35</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<p>下面的例子删除 “Persons” 表中所有 LastName=’Griffin’ 的记录：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">mysql_query(<span class=\"string\">\"DELETE FROM Persons WHERE LastName='Griffin'\"</span>);</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>在这次删除之后，表是这样的：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n<th>Age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n<td>33</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"查询：\"><a href=\"#查询：\" class=\"headerlink\" title=\"查询：\"></a>查询：</h4><p><code>SELECT</code> 语句用于从数据库中选取数据。<br>语法<br>SELECT column_name(s) FROM table_name<br>注释：SQL 语句对大小写不敏感。SELECT 与 select 等效。<br>为了让 PHP 执行上面的语句，我们必须使用<strong> mysql_query()</strong> 函数。该函数用于向 MySQL 发送查询或命令。<br>例子<br>下面的例子选取存储在 “Persons” 表中的所有数据（* 字符选取表中所有数据）：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">$result = mysql_query(<span class=\"string\">\"SELECT * FROM Persons\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">while</span>($row = mysql_fetch_array($result))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">echo</span> $row[<span class=\"string\">'FirstName'</span>] . <span class=\"string\">\" \"</span> . $row[<span class=\"string\">'LastName'</span>];</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;br /&gt;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>上面这个例子在 $result 变量中存放由 mysql_query() 函数返回的数据。接下来，我们使用 mysql_fetch_array() 函数以数组的形式从记录集返回第一行。每个随后对 mysql_fetch_array() 函数的调用都会返回记录集中的下一行。 while loop 语句会循环记录集中的所有记录。为了输出每行的值，我们使用了 PHP 的 $row 变量 ($row[‘FirstName’] 和 $row[‘LastName’])。<br>以上代码的输出：<br>Peter Griffin<br>Glenn Quagmire</p>\n<h4 id=\"在-HTML-表格中显示结果\"><a href=\"#在-HTML-表格中显示结果\" class=\"headerlink\" title=\"在 HTML 表格中显示结果\"></a>在 HTML 表格中显示结果</h4><p>下面的例子选取的数据与上面的例子相同，但是将把数据显示在一个 HTML 表格中：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"localhost\"</span>,<span class=\"string\">\"peter\"</span>,<span class=\"string\">\"abc123\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">mysql_select_db(<span class=\"string\">\"my_db\"</span>, $con);</div><div class=\"line\"></div><div class=\"line\">$result = mysql_query(<span class=\"string\">\"SELECT * FROM Persons\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;table border='1'&gt;</div><div class=\"line\">&lt;tr&gt;</div><div class=\"line\">&lt;th&gt;Firstname&lt;/th&gt;</div><div class=\"line\">&lt;th&gt;Lastname&lt;/th&gt;</div><div class=\"line\">&lt;/tr&gt;\"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">while</span>($row = mysql_fetch_array($result))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;tr&gt;\"</span>;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;td&gt;\"</span> . $row[<span class=\"string\">'FirstName'</span>] . <span class=\"string\">\"&lt;/td&gt;\"</span>;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;td&gt;\"</span> . $row[<span class=\"string\">'LastName'</span>] . <span class=\"string\">\"&lt;/td&gt;\"</span>;</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;/tr&gt;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;/table&gt;\"</span>;</div><div class=\"line\"></div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure></p>\n<p>以上代码的输出：</p>\n<table>\n<thead>\n<tr>\n<th>FirstName</th>\n<th>LastName</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Peter</td>\n<td>Griffin</td>\n</tr>\n<tr>\n<td>Glenn</td>\n<td>Quagmire</td>\n</tr>\n</tbody>\n</table>\n<hr>\n"},{"title":"Linux学习流程发展","abbrlink":33925,"date":"2016-11-02T06:20:45.000Z","_content":"\n## 网上看到的网文，摘录学习\n\n#### 1、推荐的发行版如下：\n  \n● UBUNTU 适合纯菜鸟，追求稳定的官方支持，对系统稳定性要求较弱，喜欢最新应用，相对来说不太喜欢折腾的开发者。\n\n  ● Debian，相对UBUNTU难很多的发行版，突出特点是稳定与容易使用的包管理系统，缺点是企业支持不足，为社区开发驱动。\n\n  ● Arch，追逐时尚的开发者的首选，优点是包更新相当快，无缝升级，一次安装基本可以一直运作下去，没有如UBUNTU那样的版本概念，说的专业点叫滚动升级，保持你的系统一定是最新的。缺点显然易见，不稳定。同时安装配置相对Debian再麻烦点。\n\n  ● Gentoo，相对Arch再难点，考验使用者的综合水平，从系统安装到微调，内核编译都亲历亲为，是高手及黑客显示自己技术手段，按需配置符合自己要求的系统的首选。\n  ● Slackware与Gentoo类似。\n\n  ● CentOS，社区维护的RedHat的复刻版本，完全使用RedHat的源码重新编译生成，与RedHat的兼容性在理论上来说是最好的。如果你专注于Linux服务器，如网络管理，架站，那么CentOS是你的选择。\n\n  ● LFS，终极黑客显摆工具，完全从源代码安装，编译系统。安装前你得到的只有一份文档，你要做的就是照文档你的说明，一步步，一条条命令，一个个软件包的去构建你的Linux，完全由你自己控制，想要什么就是什么。如果你做出了LFS，证明你的Linux功底已经相当不错，如果你能拿LFS文档活学活用，再将Linux从源代码开始移植到嵌入式系统，我敢说中国的企业你可以混的很好。\n\n\n\n#### 2、Linux平台的C/C++开发，同时还有Bash脚本编程[JAVA]\n再下个阶段，你需要学习的是Linux平台的C/C++开发，同时还有Bash脚本编程，如果你对Java兴趣很深还有Java。 同样，建议你抛弃掉图形界面的IDE，从VIM开始，为什么是VIM，而不是Emacs， 我无意挑起编辑器大战，但我觉得VIM适合初学者，适合手比较笨，脑袋比较慢的开发者。 Emacs的键位太多，太复杂，我很畏惧。然后是GCC，Make，Eclipse（Java，C++或者）。\n虽然将C++列在了Eclipse中，但我并不推荐用IDE开发C++，因为这不是Linux的文化， 容易让你忽略一些你应该注意的问题。 IDE让你变懒，懒得跟猪一样。如果你对程序调试，测试工作很感兴趣，GDB也得学的很好， 如果不是GDB也是必修课。这是开发的第一步，注意我并没有提过一句Linux系统API的内容， 这个阶段也不要关心这个。你要做的就是积累经验，在Linux平台的开发经验。\n我推荐的书如下：C语言程序设计。 C语言，白皮书当然更好。 C++推荐C++ Primer Plus， Java我不喜欢，就不推荐了，附一个别人的书单：java 入门书籍。 工具方面推荐VIM的官方手册，GCC中文文档，GDB中文文档，GNU开源软件开发指导（电子书）， 汇编语言程序设计（让你对库，链接，内嵌汇编，编译器优化选项有初步了解，不必深度）。\n如果你这个阶段过不了就不必往下做了，这是底线，最基础的基础，否则离开，不要霍霍Linux开发。 不专业的Linux开发者作出的程序是与Linux文化或UNIX文化相背的，程序是走不远的， 不可能像Bash，VIM这些神品一样。 所以做不好干脆离开。\n\n#### 3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\n**UNIX环境高级编程**堪称神作，经典中的经典。\n接下来进入Linux系统编程，不二选择，APUE，UNIX环境高级编程，一遍一遍的看， 看10遍都嫌少，如果你可以在大学将这本书翻烂，里面的内容都实践过，有作品，你口头表达能力够强， 你可以在面试时说服所有的考官。（可能有点夸张，但APUE绝对是圣经一般的读物，即使是Windows程序员也从其中汲取养分， Google创始人的案头书籍，扎尔伯克的床头读物。）\n\n这本书看完后你会对Linux系统编程有相当的了解，知道Linux与Windows平台间开发的差异在哪？ 它们的优缺点在哪？我的总结如下：做Windows平台开发，很苦，微软的系统API总在扩容， 想使用最新潮，最高效的功能，最适合当前流行系统的功能你必须时刻学习。 Linux不是，Linux系统的核心API就100来个，记忆力好完全可以背下来。 而且经久不变，为什么不变，因为要同UNIX兼容，符合POSIX标准。 所以Linux平台的开发大多是专注于底层的或服务器编程。如果你看完APUE的感触有很多，希望验证你的某些想法或经验，推荐UNIX程序设计艺术， 世界顶级黑客将同你分享他的看法。\n\n亚马逊书店：https://www.amazon.cn/gp/product/B008Z1IEQ8/ref=as_li_ss_tl?ie=UTF8&camp=536&creative=3132&creativeASIN=B008Z1IEQ8&linkCode=as2&tag=cfjh-23\n\n#### 4、选择方向：网络，图形，嵌入式，设备驱动\n现在是时候做分流了。 大体上我分为四个方向：网络，图形，嵌入式，设备驱动。\n\n**网络方向：**服务器软件编写及高性能的并发程序编写\n如果选择网络，再细分，我对其他的不是他熟悉，只说服务器软件编写及高性能的并发程序编写吧。 相对来说这是网络编程中技术含量最高的，也是底层的。 需要很多的经验，看很多的书，做很多的项目。\n我的看法是以下面的顺序来看书：\n\n  1. APUE再深读 – 尤其是进程，线程，IPC，套接字\n  2. 多核程序设计 - Pthread一定得吃透了，你很NB\n  3. UNIX网络编程 – 卷一，卷二\n  4. TCP/IP网络详解 – 卷一 再看上面两本书时就该看了\n  5. TCP/IP 网络详解 – 卷二 我觉得看到卷二就差不多了，当然卷三看了更好，努力，争取看了\n  6. Lighttpd源代码 - 这个服务器也很有名了\n  7. Nginx源代码 – 相较于Apache，Nginx的源码较少，如果能看个大致，很NB。看源代码主要是要学习里面的套接字编程及并发控制，想想都激动。如果你有这些本事，可以试着往暴雪投简历，为他们写服务器后台，想一想全球的魔兽都运行在你的服务器软件上。\n  8. Linux内核 TCP/IP协议栈 – 深入了解TCP/IP的实现\n如果你还喜欢驱动程序设计，可以看看更底层的协议，如链路层的，写什么路由器，网卡， 网络设备的驱动及嵌入式系统软件应该也不成问题了。\n当然一般的网络公司，就算百度级别的也该毫不犹豫的雇用你。 只是看后面这些书需要时间与经验，所以35岁以前办到吧！跳槽到给你未来的地方！\n\n**图形方向：**我觉得图形方向也是很有前途的，以下几个方面。\n\n  1. Opengl的工业及游戏开发，国外较成熟。\n  2. 影视动画特效，如皮克斯，也是国外较成熟。\n  3. GPU计算技术，可以应用在浏览器网页渲染上，GPU计算资源利用上，由于开源的原因，有很多的文档程序可以参考。如果能进火狐开发，或google做浏览器开发，应该会很好 。\n\n**嵌入式方向：**嵌入式方向没说的，Linux很重要。\n掌握多个架构，不仅X86的，ARM的，单片机什么的也必须得懂。 硬件不懂我预见你会死在半路上，我也想走嵌入式方向，但我觉得就学校教授嵌入式的方法， 我连学电子的那帮学生都竞争不过。 奉劝大家，一定得懂硬件再去做，如果走到嵌入式应用开发，只能祝你好运， 不要碰上像Nokia，Hp这样的公司，否则你会很惨的。\n\n**驱动程序设计：**软件开发周期是很长的，硬件不同，很快。 每个月诞生那么多的新硬件，如何让他们在Linux上工作起来，这是你的工作。 由于Linux的兼容性很好，如果不是太低层的驱动，基本C语言就可以搞定，系统架构的影响不大， 因为有系统支持，你可能做些许更改就可以在ARM上使用PC的硬件了， 所以做硬件驱动开发不像嵌入式，对硬件知识的要求很高。\n可以从事的方向也很多，如家电啊，特别是如索尼，日立，希捷，富士康这样的厂子，很稀缺的\n\n\n\n---","source":"_posts/文章阅读/2016-11-02-Linux学习流程发展.md","raw":"---\ntitle: Linux学习流程发展\ncategories:\n  - 文章阅读\ntags:\n  - Linux学习流程发展\nabbrlink: 33925\ndate: 2016-11-02 14:20:45\n---\n\n## 网上看到的网文，摘录学习\n\n#### 1、推荐的发行版如下：\n  \n● UBUNTU 适合纯菜鸟，追求稳定的官方支持，对系统稳定性要求较弱，喜欢最新应用，相对来说不太喜欢折腾的开发者。\n\n  ● Debian，相对UBUNTU难很多的发行版，突出特点是稳定与容易使用的包管理系统，缺点是企业支持不足，为社区开发驱动。\n\n  ● Arch，追逐时尚的开发者的首选，优点是包更新相当快，无缝升级，一次安装基本可以一直运作下去，没有如UBUNTU那样的版本概念，说的专业点叫滚动升级，保持你的系统一定是最新的。缺点显然易见，不稳定。同时安装配置相对Debian再麻烦点。\n\n  ● Gentoo，相对Arch再难点，考验使用者的综合水平，从系统安装到微调，内核编译都亲历亲为，是高手及黑客显示自己技术手段，按需配置符合自己要求的系统的首选。\n  ● Slackware与Gentoo类似。\n\n  ● CentOS，社区维护的RedHat的复刻版本，完全使用RedHat的源码重新编译生成，与RedHat的兼容性在理论上来说是最好的。如果你专注于Linux服务器，如网络管理，架站，那么CentOS是你的选择。\n\n  ● LFS，终极黑客显摆工具，完全从源代码安装，编译系统。安装前你得到的只有一份文档，你要做的就是照文档你的说明，一步步，一条条命令，一个个软件包的去构建你的Linux，完全由你自己控制，想要什么就是什么。如果你做出了LFS，证明你的Linux功底已经相当不错，如果你能拿LFS文档活学活用，再将Linux从源代码开始移植到嵌入式系统，我敢说中国的企业你可以混的很好。\n\n\n\n#### 2、Linux平台的C/C++开发，同时还有Bash脚本编程[JAVA]\n再下个阶段，你需要学习的是Linux平台的C/C++开发，同时还有Bash脚本编程，如果你对Java兴趣很深还有Java。 同样，建议你抛弃掉图形界面的IDE，从VIM开始，为什么是VIM，而不是Emacs， 我无意挑起编辑器大战，但我觉得VIM适合初学者，适合手比较笨，脑袋比较慢的开发者。 Emacs的键位太多，太复杂，我很畏惧。然后是GCC，Make，Eclipse（Java，C++或者）。\n虽然将C++列在了Eclipse中，但我并不推荐用IDE开发C++，因为这不是Linux的文化， 容易让你忽略一些你应该注意的问题。 IDE让你变懒，懒得跟猪一样。如果你对程序调试，测试工作很感兴趣，GDB也得学的很好， 如果不是GDB也是必修课。这是开发的第一步，注意我并没有提过一句Linux系统API的内容， 这个阶段也不要关心这个。你要做的就是积累经验，在Linux平台的开发经验。\n我推荐的书如下：C语言程序设计。 C语言，白皮书当然更好。 C++推荐C++ Primer Plus， Java我不喜欢，就不推荐了，附一个别人的书单：java 入门书籍。 工具方面推荐VIM的官方手册，GCC中文文档，GDB中文文档，GNU开源软件开发指导（电子书）， 汇编语言程序设计（让你对库，链接，内嵌汇编，编译器优化选项有初步了解，不必深度）。\n如果你这个阶段过不了就不必往下做了，这是底线，最基础的基础，否则离开，不要霍霍Linux开发。 不专业的Linux开发者作出的程序是与Linux文化或UNIX文化相背的，程序是走不远的， 不可能像Bash，VIM这些神品一样。 所以做不好干脆离开。\n\n#### 3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\n**UNIX环境高级编程**堪称神作，经典中的经典。\n接下来进入Linux系统编程，不二选择，APUE，UNIX环境高级编程，一遍一遍的看， 看10遍都嫌少，如果你可以在大学将这本书翻烂，里面的内容都实践过，有作品，你口头表达能力够强， 你可以在面试时说服所有的考官。（可能有点夸张，但APUE绝对是圣经一般的读物，即使是Windows程序员也从其中汲取养分， Google创始人的案头书籍，扎尔伯克的床头读物。）\n\n这本书看完后你会对Linux系统编程有相当的了解，知道Linux与Windows平台间开发的差异在哪？ 它们的优缺点在哪？我的总结如下：做Windows平台开发，很苦，微软的系统API总在扩容， 想使用最新潮，最高效的功能，最适合当前流行系统的功能你必须时刻学习。 Linux不是，Linux系统的核心API就100来个，记忆力好完全可以背下来。 而且经久不变，为什么不变，因为要同UNIX兼容，符合POSIX标准。 所以Linux平台的开发大多是专注于底层的或服务器编程。如果你看完APUE的感触有很多，希望验证你的某些想法或经验，推荐UNIX程序设计艺术， 世界顶级黑客将同你分享他的看法。\n\n亚马逊书店：https://www.amazon.cn/gp/product/B008Z1IEQ8/ref=as_li_ss_tl?ie=UTF8&camp=536&creative=3132&creativeASIN=B008Z1IEQ8&linkCode=as2&tag=cfjh-23\n\n#### 4、选择方向：网络，图形，嵌入式，设备驱动\n现在是时候做分流了。 大体上我分为四个方向：网络，图形，嵌入式，设备驱动。\n\n**网络方向：**服务器软件编写及高性能的并发程序编写\n如果选择网络，再细分，我对其他的不是他熟悉，只说服务器软件编写及高性能的并发程序编写吧。 相对来说这是网络编程中技术含量最高的，也是底层的。 需要很多的经验，看很多的书，做很多的项目。\n我的看法是以下面的顺序来看书：\n\n  1. APUE再深读 – 尤其是进程，线程，IPC，套接字\n  2. 多核程序设计 - Pthread一定得吃透了，你很NB\n  3. UNIX网络编程 – 卷一，卷二\n  4. TCP/IP网络详解 – 卷一 再看上面两本书时就该看了\n  5. TCP/IP 网络详解 – 卷二 我觉得看到卷二就差不多了，当然卷三看了更好，努力，争取看了\n  6. Lighttpd源代码 - 这个服务器也很有名了\n  7. Nginx源代码 – 相较于Apache，Nginx的源码较少，如果能看个大致，很NB。看源代码主要是要学习里面的套接字编程及并发控制，想想都激动。如果你有这些本事，可以试着往暴雪投简历，为他们写服务器后台，想一想全球的魔兽都运行在你的服务器软件上。\n  8. Linux内核 TCP/IP协议栈 – 深入了解TCP/IP的实现\n如果你还喜欢驱动程序设计，可以看看更底层的协议，如链路层的，写什么路由器，网卡， 网络设备的驱动及嵌入式系统软件应该也不成问题了。\n当然一般的网络公司，就算百度级别的也该毫不犹豫的雇用你。 只是看后面这些书需要时间与经验，所以35岁以前办到吧！跳槽到给你未来的地方！\n\n**图形方向：**我觉得图形方向也是很有前途的，以下几个方面。\n\n  1. Opengl的工业及游戏开发，国外较成熟。\n  2. 影视动画特效，如皮克斯，也是国外较成熟。\n  3. GPU计算技术，可以应用在浏览器网页渲染上，GPU计算资源利用上，由于开源的原因，有很多的文档程序可以参考。如果能进火狐开发，或google做浏览器开发，应该会很好 。\n\n**嵌入式方向：**嵌入式方向没说的，Linux很重要。\n掌握多个架构，不仅X86的，ARM的，单片机什么的也必须得懂。 硬件不懂我预见你会死在半路上，我也想走嵌入式方向，但我觉得就学校教授嵌入式的方法， 我连学电子的那帮学生都竞争不过。 奉劝大家，一定得懂硬件再去做，如果走到嵌入式应用开发，只能祝你好运， 不要碰上像Nokia，Hp这样的公司，否则你会很惨的。\n\n**驱动程序设计：**软件开发周期是很长的，硬件不同，很快。 每个月诞生那么多的新硬件，如何让他们在Linux上工作起来，这是你的工作。 由于Linux的兼容性很好，如果不是太低层的驱动，基本C语言就可以搞定，系统架构的影响不大， 因为有系统支持，你可能做些许更改就可以在ARM上使用PC的硬件了， 所以做硬件驱动开发不像嵌入式，对硬件知识的要求很高。\n可以从事的方向也很多，如家电啊，特别是如索尼，日立，希捷，富士康这样的厂子，很稀缺的\n\n\n\n---","slug":"文章阅读-2016-11-02-Linux学习流程发展","published":1,"updated":"2016-11-21T02:17:08.908Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjlr0013d8pkscjqit0v","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h2 id=\"网上看到的网文，摘录学习\"><a href=\"#网上看到的网文，摘录学习\" class=\"headerlink\" title=\"网上看到的网文，摘录学习\"></a>网上看到的网文，摘录学习</h2><h4 id=\"1、推荐的发行版如下：\"><a href=\"#1、推荐的发行版如下：\" class=\"headerlink\" title=\"1、推荐的发行版如下：\"></a>1、推荐的发行版如下：</h4><p>● UBUNTU 适合纯菜鸟，追求稳定的官方支持，对系统稳定性要求较弱，喜欢最新应用，相对来说不太喜欢折腾的开发者。</p>\n<p>  ● Debian，相对UBUNTU难很多的发行版，突出特点是稳定与容易使用的包管理系统，缺点是企业支持不足，为社区开发驱动。</p>\n<p>  ● Arch，追逐时尚的开发者的首选，优点是包更新相当快，无缝升级，一次安装基本可以一直运作下去，没有如UBUNTU那样的版本概念，说的专业点叫滚动升级，保持你的系统一定是最新的。缺点显然易见，不稳定。同时安装配置相对Debian再麻烦点。</p>\n<p>  ● Gentoo，相对Arch再难点，考验使用者的综合水平，从系统安装到微调，内核编译都亲历亲为，是高手及黑客显示自己技术手段，按需配置符合自己要求的系统的首选。<br>  ● Slackware与Gentoo类似。</p>\n<p>  ● CentOS，社区维护的RedHat的复刻版本，完全使用RedHat的源码重新编译生成，与RedHat的兼容性在理论上来说是最好的。如果你专注于Linux服务器，如网络管理，架站，那么CentOS是你的选择。</p>\n<p>  ● LFS，终极黑客显摆工具，完全从源代码安装，编译系统。安装前你得到的只有一份文档，你要做的就是照文档你的说明，一步步，一条条命令，一个个软件包的去构建你的Linux，完全由你自己控制，想要什么就是什么。如果你做出了LFS，证明你的Linux功底已经相当不错，如果你能拿LFS文档活学活用，再将Linux从源代码开始移植到嵌入式系统，我敢说中国的企业你可以混的很好。</p>\n<h4 id=\"2、Linux平台的C-C-开发，同时还有Bash脚本编程-JAVA\"><a href=\"#2、Linux平台的C-C-开发，同时还有Bash脚本编程-JAVA\" class=\"headerlink\" title=\"2、Linux平台的C/C++开发，同时还有Bash脚本编程[JAVA]\"></a>2、Linux平台的C/C++开发，同时还有Bash脚本编程[JAVA]</h4><p>再下个阶段，你需要学习的是Linux平台的C/C++开发，同时还有Bash脚本编程，如果你对Java兴趣很深还有Java。 同样，建议你抛弃掉图形界面的IDE，从VIM开始，为什么是VIM，而不是Emacs， 我无意挑起编辑器大战，但我觉得VIM适合初学者，适合手比较笨，脑袋比较慢的开发者。 Emacs的键位太多，太复杂，我很畏惧。然后是GCC，Make，Eclipse（Java，C++或者）。<br>虽然将C++列在了Eclipse中，但我并不推荐用IDE开发C++，因为这不是Linux的文化， 容易让你忽略一些你应该注意的问题。 IDE让你变懒，懒得跟猪一样。如果你对程序调试，测试工作很感兴趣，GDB也得学的很好， 如果不是GDB也是必修课。这是开发的第一步，注意我并没有提过一句Linux系统API的内容， 这个阶段也不要关心这个。你要做的就是积累经验，在Linux平台的开发经验。<br>我推荐的书如下：C语言程序设计。 C语言，白皮书当然更好。 C++推荐C++ Primer Plus， Java我不喜欢，就不推荐了，附一个别人的书单：java 入门书籍。 工具方面推荐VIM的官方手册，GCC中文文档，GDB中文文档，GNU开源软件开发指导（电子书）， 汇编语言程序设计（让你对库，链接，内嵌汇编，编译器优化选项有初步了解，不必深度）。<br>如果你这个阶段过不了就不必往下做了，这是底线，最基础的基础，否则离开，不要霍霍Linux开发。 不专业的Linux开发者作出的程序是与Linux文化或UNIX文化相背的，程序是走不远的， 不可能像Bash，VIM这些神品一样。 所以做不好干脆离开。</p>\n<h4 id=\"3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\"><a href=\"#3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\" class=\"headerlink\" title=\"3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\"></a>3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）</h4><p><strong>UNIX环境高级编程</strong>堪称神作，经典中的经典。<br>接下来进入Linux系统编程，不二选择，APUE，UNIX环境高级编程，一遍一遍的看， 看10遍都嫌少，如果你可以在大学将这本书翻烂，里面的内容都实践过，有作品，你口头表达能力够强， 你可以在面试时说服所有的考官。（可能有点夸张，但APUE绝对是圣经一般的读物，即使是Windows程序员也从其中汲取养分， Google创始人的案头书籍，扎尔伯克的床头读物。）</p>\n<p>这本书看完后你会对Linux系统编程有相当的了解，知道Linux与Windows平台间开发的差异在哪？ 它们的优缺点在哪？我的总结如下：做Windows平台开发，很苦，微软的系统API总在扩容， 想使用最新潮，最高效的功能，最适合当前流行系统的功能你必须时刻学习。 Linux不是，Linux系统的核心API就100来个，记忆力好完全可以背下来。 而且经久不变，为什么不变，因为要同UNIX兼容，符合POSIX标准。 所以Linux平台的开发大多是专注于底层的或服务器编程。如果你看完APUE的感触有很多，希望验证你的某些想法或经验，推荐UNIX程序设计艺术， 世界顶级黑客将同你分享他的看法。</p>\n<p>亚马逊书店：<a href=\"https://www.amazon.cn/gp/product/B008Z1IEQ8/ref=as_li_ss_tl?ie=UTF8&amp;camp=536&amp;creative=3132&amp;creativeASIN=B008Z1IEQ8&amp;linkCode=as2&amp;tag=cfjh-23\" target=\"_blank\" rel=\"external\">https://www.amazon.cn/gp/product/B008Z1IEQ8/ref=as_li_ss_tl?ie=UTF8&amp;camp=536&amp;creative=3132&amp;creativeASIN=B008Z1IEQ8&amp;linkCode=as2&amp;tag=cfjh-23</a></p>\n<h4 id=\"4、选择方向：网络，图形，嵌入式，设备驱动\"><a href=\"#4、选择方向：网络，图形，嵌入式，设备驱动\" class=\"headerlink\" title=\"4、选择方向：网络，图形，嵌入式，设备驱动\"></a>4、选择方向：网络，图形，嵌入式，设备驱动</h4><p>现在是时候做分流了。 大体上我分为四个方向：网络，图形，嵌入式，设备驱动。</p>\n<p><strong>网络方向：</strong>服务器软件编写及高性能的并发程序编写<br>如果选择网络，再细分，我对其他的不是他熟悉，只说服务器软件编写及高性能的并发程序编写吧。 相对来说这是网络编程中技术含量最高的，也是底层的。 需要很多的经验，看很多的书，做很多的项目。<br>我的看法是以下面的顺序来看书：</p>\n<ol>\n<li>APUE再深读 – 尤其是进程，线程，IPC，套接字</li>\n<li>多核程序设计 - Pthread一定得吃透了，你很NB</li>\n<li>UNIX网络编程 – 卷一，卷二</li>\n<li>TCP/IP网络详解 – 卷一 再看上面两本书时就该看了</li>\n<li>TCP/IP 网络详解 – 卷二 我觉得看到卷二就差不多了，当然卷三看了更好，努力，争取看了</li>\n<li>Lighttpd源代码 - 这个服务器也很有名了</li>\n<li>Nginx源代码 – 相较于Apache，Nginx的源码较少，如果能看个大致，很NB。看源代码主要是要学习里面的套接字编程及并发控制，想想都激动。如果你有这些本事，可以试着往暴雪投简历，为他们写服务器后台，想一想全球的魔兽都运行在你的服务器软件上。</li>\n<li>Linux内核 TCP/IP协议栈 – 深入了解TCP/IP的实现<br>如果你还喜欢驱动程序设计，可以看看更底层的协议，如链路层的，写什么路由器，网卡， 网络设备的驱动及嵌入式系统软件应该也不成问题了。<br>当然一般的网络公司，就算百度级别的也该毫不犹豫的雇用你。 只是看后面这些书需要时间与经验，所以35岁以前办到吧！跳槽到给你未来的地方！</li>\n</ol>\n<p><strong>图形方向：</strong>我觉得图形方向也是很有前途的，以下几个方面。</p>\n<ol>\n<li>Opengl的工业及游戏开发，国外较成熟。</li>\n<li>影视动画特效，如皮克斯，也是国外较成熟。</li>\n<li>GPU计算技术，可以应用在浏览器网页渲染上，GPU计算资源利用上，由于开源的原因，有很多的文档程序可以参考。如果能进火狐开发，或google做浏览器开发，应该会很好 。</li>\n</ol>\n<p><strong>嵌入式方向：</strong>嵌入式方向没说的，Linux很重要。<br>掌握多个架构，不仅X86的，ARM的，单片机什么的也必须得懂。 硬件不懂我预见你会死在半路上，我也想走嵌入式方向，但我觉得就学校教授嵌入式的方法， 我连学电子的那帮学生都竞争不过。 奉劝大家，一定得懂硬件再去做，如果走到嵌入式应用开发，只能祝你好运， 不要碰上像Nokia，Hp这样的公司，否则你会很惨的。</p>\n<p><strong>驱动程序设计：</strong>软件开发周期是很长的，硬件不同，很快。 每个月诞生那么多的新硬件，如何让他们在Linux上工作起来，这是你的工作。 由于Linux的兼容性很好，如果不是太低层的驱动，基本C语言就可以搞定，系统架构的影响不大， 因为有系统支持，你可能做些许更改就可以在ARM上使用PC的硬件了， 所以做硬件驱动开发不像嵌入式，对硬件知识的要求很高。<br>可以从事的方向也很多，如家电啊，特别是如索尼，日立，希捷，富士康这样的厂子，很稀缺的</p>\n<hr>\n","excerpt":"","more":"<h2 id=\"网上看到的网文，摘录学习\"><a href=\"#网上看到的网文，摘录学习\" class=\"headerlink\" title=\"网上看到的网文，摘录学习\"></a>网上看到的网文，摘录学习</h2><h4 id=\"1、推荐的发行版如下：\"><a href=\"#1、推荐的发行版如下：\" class=\"headerlink\" title=\"1、推荐的发行版如下：\"></a>1、推荐的发行版如下：</h4><p>● UBUNTU 适合纯菜鸟，追求稳定的官方支持，对系统稳定性要求较弱，喜欢最新应用，相对来说不太喜欢折腾的开发者。</p>\n<p>  ● Debian，相对UBUNTU难很多的发行版，突出特点是稳定与容易使用的包管理系统，缺点是企业支持不足，为社区开发驱动。</p>\n<p>  ● Arch，追逐时尚的开发者的首选，优点是包更新相当快，无缝升级，一次安装基本可以一直运作下去，没有如UBUNTU那样的版本概念，说的专业点叫滚动升级，保持你的系统一定是最新的。缺点显然易见，不稳定。同时安装配置相对Debian再麻烦点。</p>\n<p>  ● Gentoo，相对Arch再难点，考验使用者的综合水平，从系统安装到微调，内核编译都亲历亲为，是高手及黑客显示自己技术手段，按需配置符合自己要求的系统的首选。<br>  ● Slackware与Gentoo类似。</p>\n<p>  ● CentOS，社区维护的RedHat的复刻版本，完全使用RedHat的源码重新编译生成，与RedHat的兼容性在理论上来说是最好的。如果你专注于Linux服务器，如网络管理，架站，那么CentOS是你的选择。</p>\n<p>  ● LFS，终极黑客显摆工具，完全从源代码安装，编译系统。安装前你得到的只有一份文档，你要做的就是照文档你的说明，一步步，一条条命令，一个个软件包的去构建你的Linux，完全由你自己控制，想要什么就是什么。如果你做出了LFS，证明你的Linux功底已经相当不错，如果你能拿LFS文档活学活用，再将Linux从源代码开始移植到嵌入式系统，我敢说中国的企业你可以混的很好。</p>\n<h4 id=\"2、Linux平台的C-C-开发，同时还有Bash脚本编程-JAVA\"><a href=\"#2、Linux平台的C-C-开发，同时还有Bash脚本编程-JAVA\" class=\"headerlink\" title=\"2、Linux平台的C/C++开发，同时还有Bash脚本编程[JAVA]\"></a>2、Linux平台的C/C++开发，同时还有Bash脚本编程[JAVA]</h4><p>再下个阶段，你需要学习的是Linux平台的C/C++开发，同时还有Bash脚本编程，如果你对Java兴趣很深还有Java。 同样，建议你抛弃掉图形界面的IDE，从VIM开始，为什么是VIM，而不是Emacs， 我无意挑起编辑器大战，但我觉得VIM适合初学者，适合手比较笨，脑袋比较慢的开发者。 Emacs的键位太多，太复杂，我很畏惧。然后是GCC，Make，Eclipse（Java，C++或者）。<br>虽然将C++列在了Eclipse中，但我并不推荐用IDE开发C++，因为这不是Linux的文化， 容易让你忽略一些你应该注意的问题。 IDE让你变懒，懒得跟猪一样。如果你对程序调试，测试工作很感兴趣，GDB也得学的很好， 如果不是GDB也是必修课。这是开发的第一步，注意我并没有提过一句Linux系统API的内容， 这个阶段也不要关心这个。你要做的就是积累经验，在Linux平台的开发经验。<br>我推荐的书如下：C语言程序设计。 C语言，白皮书当然更好。 C++推荐C++ Primer Plus， Java我不喜欢，就不推荐了，附一个别人的书单：java 入门书籍。 工具方面推荐VIM的官方手册，GCC中文文档，GDB中文文档，GNU开源软件开发指导（电子书）， 汇编语言程序设计（让你对库，链接，内嵌汇编，编译器优化选项有初步了解，不必深度）。<br>如果你这个阶段过不了就不必往下做了，这是底线，最基础的基础，否则离开，不要霍霍Linux开发。 不专业的Linux开发者作出的程序是与Linux文化或UNIX文化相背的，程序是走不远的， 不可能像Bash，VIM这些神品一样。 所以做不好干脆离开。</p>\n<h4 id=\"3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\"><a href=\"#3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\" class=\"headerlink\" title=\"3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）\"></a>3、UNIX环境高级编程（作者英年早逝，第3版即将出版，稍等）</h4><p><strong>UNIX环境高级编程</strong>堪称神作，经典中的经典。<br>接下来进入Linux系统编程，不二选择，APUE，UNIX环境高级编程，一遍一遍的看， 看10遍都嫌少，如果你可以在大学将这本书翻烂，里面的内容都实践过，有作品，你口头表达能力够强， 你可以在面试时说服所有的考官。（可能有点夸张，但APUE绝对是圣经一般的读物，即使是Windows程序员也从其中汲取养分， Google创始人的案头书籍，扎尔伯克的床头读物。）</p>\n<p>这本书看完后你会对Linux系统编程有相当的了解，知道Linux与Windows平台间开发的差异在哪？ 它们的优缺点在哪？我的总结如下：做Windows平台开发，很苦，微软的系统API总在扩容， 想使用最新潮，最高效的功能，最适合当前流行系统的功能你必须时刻学习。 Linux不是，Linux系统的核心API就100来个，记忆力好完全可以背下来。 而且经久不变，为什么不变，因为要同UNIX兼容，符合POSIX标准。 所以Linux平台的开发大多是专注于底层的或服务器编程。如果你看完APUE的感触有很多，希望验证你的某些想法或经验，推荐UNIX程序设计艺术， 世界顶级黑客将同你分享他的看法。</p>\n<p>亚马逊书店：<a href=\"https://www.amazon.cn/gp/product/B008Z1IEQ8/ref=as_li_ss_tl?ie=UTF8&amp;camp=536&amp;creative=3132&amp;creativeASIN=B008Z1IEQ8&amp;linkCode=as2&amp;tag=cfjh-23\">https://www.amazon.cn/gp/product/B008Z1IEQ8/ref=as_li_ss_tl?ie=UTF8&amp;camp=536&amp;creative=3132&amp;creativeASIN=B008Z1IEQ8&amp;linkCode=as2&amp;tag=cfjh-23</a></p>\n<h4 id=\"4、选择方向：网络，图形，嵌入式，设备驱动\"><a href=\"#4、选择方向：网络，图形，嵌入式，设备驱动\" class=\"headerlink\" title=\"4、选择方向：网络，图形，嵌入式，设备驱动\"></a>4、选择方向：网络，图形，嵌入式，设备驱动</h4><p>现在是时候做分流了。 大体上我分为四个方向：网络，图形，嵌入式，设备驱动。</p>\n<p><strong>网络方向：</strong>服务器软件编写及高性能的并发程序编写<br>如果选择网络，再细分，我对其他的不是他熟悉，只说服务器软件编写及高性能的并发程序编写吧。 相对来说这是网络编程中技术含量最高的，也是底层的。 需要很多的经验，看很多的书，做很多的项目。<br>我的看法是以下面的顺序来看书：</p>\n<ol>\n<li>APUE再深读 – 尤其是进程，线程，IPC，套接字</li>\n<li>多核程序设计 - Pthread一定得吃透了，你很NB</li>\n<li>UNIX网络编程 – 卷一，卷二</li>\n<li>TCP/IP网络详解 – 卷一 再看上面两本书时就该看了</li>\n<li>TCP/IP 网络详解 – 卷二 我觉得看到卷二就差不多了，当然卷三看了更好，努力，争取看了</li>\n<li>Lighttpd源代码 - 这个服务器也很有名了</li>\n<li>Nginx源代码 – 相较于Apache，Nginx的源码较少，如果能看个大致，很NB。看源代码主要是要学习里面的套接字编程及并发控制，想想都激动。如果你有这些本事，可以试着往暴雪投简历，为他们写服务器后台，想一想全球的魔兽都运行在你的服务器软件上。</li>\n<li>Linux内核 TCP/IP协议栈 – 深入了解TCP/IP的实现<br>如果你还喜欢驱动程序设计，可以看看更底层的协议，如链路层的，写什么路由器，网卡， 网络设备的驱动及嵌入式系统软件应该也不成问题了。<br>当然一般的网络公司，就算百度级别的也该毫不犹豫的雇用你。 只是看后面这些书需要时间与经验，所以35岁以前办到吧！跳槽到给你未来的地方！</li>\n</ol>\n<p><strong>图形方向：</strong>我觉得图形方向也是很有前途的，以下几个方面。</p>\n<ol>\n<li>Opengl的工业及游戏开发，国外较成熟。</li>\n<li>影视动画特效，如皮克斯，也是国外较成熟。</li>\n<li>GPU计算技术，可以应用在浏览器网页渲染上，GPU计算资源利用上，由于开源的原因，有很多的文档程序可以参考。如果能进火狐开发，或google做浏览器开发，应该会很好 。</li>\n</ol>\n<p><strong>嵌入式方向：</strong>嵌入式方向没说的，Linux很重要。<br>掌握多个架构，不仅X86的，ARM的，单片机什么的也必须得懂。 硬件不懂我预见你会死在半路上，我也想走嵌入式方向，但我觉得就学校教授嵌入式的方法， 我连学电子的那帮学生都竞争不过。 奉劝大家，一定得懂硬件再去做，如果走到嵌入式应用开发，只能祝你好运， 不要碰上像Nokia，Hp这样的公司，否则你会很惨的。</p>\n<p><strong>驱动程序设计：</strong>软件开发周期是很长的，硬件不同，很快。 每个月诞生那么多的新硬件，如何让他们在Linux上工作起来，这是你的工作。 由于Linux的兼容性很好，如果不是太低层的驱动，基本C语言就可以搞定，系统架构的影响不大， 因为有系统支持，你可能做些许更改就可以在ARM上使用PC的硬件了， 所以做硬件驱动开发不像嵌入式，对硬件知识的要求很高。<br>可以从事的方向也很多，如家电啊，特别是如索尼，日立，希捷，富士康这样的厂子，很稀缺的</p>\n<hr>\n"},{"title":"高并发系统之服务器降级","abbrlink":19285,"date":"2016-11-02T09:19:21.000Z","_content":"\n#### 网上看到的文章，摘录分享。\n\n\n​在开发高并发系统时有三把利器用来保护系统：**缓存、降级和限流**。之前已经有一些文章介绍过缓存和限流了。本文将详细聊聊降级。当访问量剧增、服务出现问题（如响应时间慢或不响应）或非核心服务影响到核心流程的性能时，仍然需要保证服务还是可用的，即使是有损服务。系统可以根据一些关键数据进行自动降级，也可以配置开关实现人工降级。本文将介绍一些笔者在实际工作中遇到的或见到过的一些降级方案供大家参考。\n \n**降级的最终目的是保证核心服务可用**，即使是有损的。而且有些服务是无法降级的（如加入购物车、结算）。\n \n降级预案\n在进行降级之前要对系统进行梳理，看看系统是不是可以丢卒保帅；从而梳理出哪些必须誓死保护，哪些可降级；比如可以参考日志级别设置预案：\n\n**一般：**比如有些服务偶尔因为网络抖动或者服务正在上线而超时，可以自动降级；\n\n**警告：**有些服务在一段时间内成功率有波动（如在95~100%之间），可以自动降级或人工降级，并发送告警；\n\n**错误：**比如可用率低于90%，或者数据库连接池被打爆了，或者访问量突然猛增到系统能承受的最大阀值，此时可以根据情况自动降级或者人工降级；\n严重错误：比如因为特殊原因数据错误了，此时需要紧急人工降级。\n \n降级按照是否自动化可分为：**自动开关降级和人工开关降级**。\n\n降级按照功能可分为：**读服务降级、写服务降级**。\n\n降级按照处于的系统层次可分为：**多级降级**。\n\n---\n \n降级的功能点主要从服务端链路考虑，即根据用户访问的服务调用链路来梳理哪里需要降级：\n页面降级：在大促或者某些特殊情况下，某些页面占用了一些稀缺服务资源，在紧急情况下可以对其整个降级，以达到丢卒保帅；\n\n* 页面片段降级：比如商品详情页中的商家部分因为数据错误了，此时需要对其进行降级；\n页面异步请求降级：比如商品详情页上有推荐信息/配送至等异步加载的请求，如果这些信息响应慢或者后端服务有问题，可以进行降级；\n\n* 服务功能降级：比如渲染商品详情页时需要调用一些不太重要的服务：相关分类、热销榜等，而这些服务在异常情况下直接不获取，即降级即可；\n\n* 读降级：比如多级缓存模式，如果后端服务有问题，可以降级为只读缓存，这种方式适用于对读一致性要求不高的场景；\n\n* 写降级：比如秒杀抢购，我们可以只进行Cache的更新，然后异步同步扣减库存到DB，保证最终一致性即可，此时可以将DB降级为Cache。\n爬虫降级：在大促活动时，可以将爬虫流量导向静态页或者返回空数据，从而保护后端稀缺资源。\n \n* 自动开关降级\n自动降级是根据系统负载、资源使用情况、SLA等指标进行降级。\n\n* 超时降级\n当访问的数据库/http服务/远程调用响应慢或者长时间响应慢，且该服务不是核心服务的话可以在超时后自动降级；比如商品详情页上有推荐内容/评价，但是推荐内容/评价暂时不展示对用户购物流程不会产生很大的影响；对于这种服务是可以超时降级的。如果是调用别人的远程服务，和对方定义一个服务响应最大时间，如果超时了则自动降级。\n \n之前总结过一些的文章《使用httpclient必须知道的参数设置及代码写法、存在的风险》和《dbcp配置及jdbc超时设置总结》。在实际场景用一定主要配置好超时时间和超时重试次数和机制。\n \n* 统计失败次数降级\n有时候依赖一些不稳定的API，比如调用外部机票服务，当失败调用次数达到一定阀值自动降级；然后通过异步线程去探测服务是否恢复了，则取消降级。\n \n* 故障降级\n比如要调用的远程服务挂掉了（网络故障、DNS故障、http服务返回错误的状态码、rpc服务抛出异常），则可以直接降级。降级后的处理方案有：默认值（比如库存服务挂了，返回默认现货）、兜底数据（比如广告挂了，返回提前准备好的一些静态页面）、缓存（之前暂存的一些缓存数据）。\n \n* 限流降级\n当我们去秒杀或者抢购一些限购商品时，此时可能会因为访问量太大而导致系统崩溃，此时开发者会使用限流来进行限制访问量，当达到限流阀值，后续请求会被降级；降级后的处理方案可以是：排队页面（将用户导流到排队页面等一会重试）、无货（直接告知用户没货了）、错误页（如活动太火爆了，稍后重试）。\n \n* 人工开关降级\n在大促期间通过监控发现线上的一些服务存在问题，这个时候需要暂时将这些服务摘掉；还有有时候通过任务系统调用一些服务，但是服务依赖的数据库可能存在：网卡被打满了、挂掉了或者很多慢查询，此时需要暂停下任务系统让服务方进行处理；还有发现突然调用量太大，可能需要改变处理方式（比如同步转换为异步）；此时就可以使用开关来完成降级。开关可以存放到配置文件、存放到数据库、存放到Redis/ZooKeeper；如果不是存放在本地，可以定期同步开关数据（比如1秒同步一次）。然后通过判断某个KEY的值来决定是否降级。\n \n另外对于新开发的服务想上线进行灰度测试；但是不太确定该服务的逻辑是否正确，此时就需要设置开关，当新服务有问题可以通过开关切换回老服务。还有多机房服务，如果某个机房挂掉了，此时需要将一个机房的服务切到另一个机房，此时也可以通过开关完成切换。\n \n还有一些是因为功能问题需要暂时屏蔽掉某些功能，比如商品规格参数数据有问题，数据问题不能用回滚解决，此时需要开关控制降级。\n \n* 读服务降级\n对于读服务降级一般采用的策略有：暂时切换读（降级到读缓存、降级到走静态化）、暂时屏蔽读（屏蔽读入口、屏蔽某个读服务）。在《应用多级缓存模式支撑海量读服务》中曾经介绍过读服务，即接入层缓存-->应用层本地缓存-->分布式缓存-->RPC服务/DB，我们会在接入层、应用层设置开关，当分布式缓存、RPC服务/DB有问题自动降级为不调用。当然这种情况适用于对读一致性要求不高的场景。\n \n* 页面降级、页面片段降级、页面异步请求降级都是读服务降级，目的是丢卒保帅（比如因为这些服务也要使用核心资源、或者占了带宽影响到核心服务）或者因数据问题暂时屏蔽。\n \n还有一种是页面静态化场景：\n动态化降级为静态化：比如平时网站可以走动态化渲染商品详情页，但是到了大促来临之际可以将其切换为静态化来减少对核心资源的占用，而且可以提升性能；其他还有如列表页、首页、频道页都可以这么玩；可以通过一个程序定期的推送静态页到缓存或者生成到磁盘，出问题时直接切过去；\n静态化降级为动态化：比如当使用静态化来实现商品详情页架构时，平时使用静态化来提供服务，但是因为特殊原因静态化页面有问题了，需要暂时切换回动态化来保证服务正确性。\n \n**以上都保证出问题了有预案，用户还是可以使用网站，不影响用户购物。**\n \n* 写服务降级\n写服务在大多数场景下是不可降级的，不过可以通过一些迂回战术来解决问题。比如将同步操作转换为异步操作，或者限制写的量/比例。\n比如扣减库存一般这样操作：\n方案1：\n1、扣减DB库存，2、扣减成功后更新Redis中的库存；\n方案2：\n1、扣减Redis库存，2、同步扣减DB库存，如果扣减失败则回滚Redis库存；\n前两种方案非常依赖DB，假设此时DB性能跟不上则扣减库存就会遇到问题；因此我们可以想到方案3：\n1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为发送一条扣减DB库存的消息，然后异步进行DB库存扣减实现最终一致即可；\n这种方式发送扣减DB库存消息也可能成为瓶颈；这种情况我们可以考虑方案4：\n1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为写扣减DB库存消息到本机，然后本机通过异步进行DB库存扣减来实现最终一致性。\n \n也就是说正常情况可以同步扣减库存，在性能扛不住时降级为异步；另外如果是秒杀场景可以直接降级为异步，从而保护系统。还有如下单操作可以在大促时暂时降级将下单数据写入Redis，然后等峰值过去了再同步回DB，当然也有更好的解决方案，但是更复杂，不是本文的重点。\n还有如用户评价，如果评价量太大，也可以把评价从同步写降级为异步写。当然也可以对评价按钮进行按比例开放（比如一些人的看不到评价操作按钮）。比如评价成功后会发一些奖励，在必要的时候降级同步到异步。\n \n* 多级降级\n缓存是离用户最近越高效；而降级是离用户越近越能对系统保护的好。因为业务的复杂性导致越到后端QPS/TPS越低。\n \n* 页面JS降级开关：主要控制页面功能的降级，在页面中通过JS脚本部署功能降级开关，在适当时机开启/关闭开关。\n\n* 接入层降级开关：主要控制请求入口的降级，请求进入后会首先进入接入层，在接入层可以配置功能降级开关，可以根据实际情况进行自动/人工降级；这个可以参考《京东商品详情页服务闭环实践》，尤其在后端应用服务出问题时，通过接入层降级从而给应用服务有足够的时间恢复服务；\n应用层降级开关：主要控制业务的降级，在应用中配置相应的功能开关，根据实际业务情况进行自动/人工降级。\n\n\n原文：http://jinnianshilongnian.iteye.com/blog/2306477\n\n---","source":"_posts/文章阅读/2016-11-02-高并发系统之服务器降级.md","raw":"---\ntitle: 高并发系统之服务器降级\ncategories:\n  - 文章阅读\ntags:\n  - 高并发系统之降级特技\nabbrlink: 19285\ndate: 2016-11-02 17:19:21\n---\n\n#### 网上看到的文章，摘录分享。\n\n\n​在开发高并发系统时有三把利器用来保护系统：**缓存、降级和限流**。之前已经有一些文章介绍过缓存和限流了。本文将详细聊聊降级。当访问量剧增、服务出现问题（如响应时间慢或不响应）或非核心服务影响到核心流程的性能时，仍然需要保证服务还是可用的，即使是有损服务。系统可以根据一些关键数据进行自动降级，也可以配置开关实现人工降级。本文将介绍一些笔者在实际工作中遇到的或见到过的一些降级方案供大家参考。\n \n**降级的最终目的是保证核心服务可用**，即使是有损的。而且有些服务是无法降级的（如加入购物车、结算）。\n \n降级预案\n在进行降级之前要对系统进行梳理，看看系统是不是可以丢卒保帅；从而梳理出哪些必须誓死保护，哪些可降级；比如可以参考日志级别设置预案：\n\n**一般：**比如有些服务偶尔因为网络抖动或者服务正在上线而超时，可以自动降级；\n\n**警告：**有些服务在一段时间内成功率有波动（如在95~100%之间），可以自动降级或人工降级，并发送告警；\n\n**错误：**比如可用率低于90%，或者数据库连接池被打爆了，或者访问量突然猛增到系统能承受的最大阀值，此时可以根据情况自动降级或者人工降级；\n严重错误：比如因为特殊原因数据错误了，此时需要紧急人工降级。\n \n降级按照是否自动化可分为：**自动开关降级和人工开关降级**。\n\n降级按照功能可分为：**读服务降级、写服务降级**。\n\n降级按照处于的系统层次可分为：**多级降级**。\n\n---\n \n降级的功能点主要从服务端链路考虑，即根据用户访问的服务调用链路来梳理哪里需要降级：\n页面降级：在大促或者某些特殊情况下，某些页面占用了一些稀缺服务资源，在紧急情况下可以对其整个降级，以达到丢卒保帅；\n\n* 页面片段降级：比如商品详情页中的商家部分因为数据错误了，此时需要对其进行降级；\n页面异步请求降级：比如商品详情页上有推荐信息/配送至等异步加载的请求，如果这些信息响应慢或者后端服务有问题，可以进行降级；\n\n* 服务功能降级：比如渲染商品详情页时需要调用一些不太重要的服务：相关分类、热销榜等，而这些服务在异常情况下直接不获取，即降级即可；\n\n* 读降级：比如多级缓存模式，如果后端服务有问题，可以降级为只读缓存，这种方式适用于对读一致性要求不高的场景；\n\n* 写降级：比如秒杀抢购，我们可以只进行Cache的更新，然后异步同步扣减库存到DB，保证最终一致性即可，此时可以将DB降级为Cache。\n爬虫降级：在大促活动时，可以将爬虫流量导向静态页或者返回空数据，从而保护后端稀缺资源。\n \n* 自动开关降级\n自动降级是根据系统负载、资源使用情况、SLA等指标进行降级。\n\n* 超时降级\n当访问的数据库/http服务/远程调用响应慢或者长时间响应慢，且该服务不是核心服务的话可以在超时后自动降级；比如商品详情页上有推荐内容/评价，但是推荐内容/评价暂时不展示对用户购物流程不会产生很大的影响；对于这种服务是可以超时降级的。如果是调用别人的远程服务，和对方定义一个服务响应最大时间，如果超时了则自动降级。\n \n之前总结过一些的文章《使用httpclient必须知道的参数设置及代码写法、存在的风险》和《dbcp配置及jdbc超时设置总结》。在实际场景用一定主要配置好超时时间和超时重试次数和机制。\n \n* 统计失败次数降级\n有时候依赖一些不稳定的API，比如调用外部机票服务，当失败调用次数达到一定阀值自动降级；然后通过异步线程去探测服务是否恢复了，则取消降级。\n \n* 故障降级\n比如要调用的远程服务挂掉了（网络故障、DNS故障、http服务返回错误的状态码、rpc服务抛出异常），则可以直接降级。降级后的处理方案有：默认值（比如库存服务挂了，返回默认现货）、兜底数据（比如广告挂了，返回提前准备好的一些静态页面）、缓存（之前暂存的一些缓存数据）。\n \n* 限流降级\n当我们去秒杀或者抢购一些限购商品时，此时可能会因为访问量太大而导致系统崩溃，此时开发者会使用限流来进行限制访问量，当达到限流阀值，后续请求会被降级；降级后的处理方案可以是：排队页面（将用户导流到排队页面等一会重试）、无货（直接告知用户没货了）、错误页（如活动太火爆了，稍后重试）。\n \n* 人工开关降级\n在大促期间通过监控发现线上的一些服务存在问题，这个时候需要暂时将这些服务摘掉；还有有时候通过任务系统调用一些服务，但是服务依赖的数据库可能存在：网卡被打满了、挂掉了或者很多慢查询，此时需要暂停下任务系统让服务方进行处理；还有发现突然调用量太大，可能需要改变处理方式（比如同步转换为异步）；此时就可以使用开关来完成降级。开关可以存放到配置文件、存放到数据库、存放到Redis/ZooKeeper；如果不是存放在本地，可以定期同步开关数据（比如1秒同步一次）。然后通过判断某个KEY的值来决定是否降级。\n \n另外对于新开发的服务想上线进行灰度测试；但是不太确定该服务的逻辑是否正确，此时就需要设置开关，当新服务有问题可以通过开关切换回老服务。还有多机房服务，如果某个机房挂掉了，此时需要将一个机房的服务切到另一个机房，此时也可以通过开关完成切换。\n \n还有一些是因为功能问题需要暂时屏蔽掉某些功能，比如商品规格参数数据有问题，数据问题不能用回滚解决，此时需要开关控制降级。\n \n* 读服务降级\n对于读服务降级一般采用的策略有：暂时切换读（降级到读缓存、降级到走静态化）、暂时屏蔽读（屏蔽读入口、屏蔽某个读服务）。在《应用多级缓存模式支撑海量读服务》中曾经介绍过读服务，即接入层缓存-->应用层本地缓存-->分布式缓存-->RPC服务/DB，我们会在接入层、应用层设置开关，当分布式缓存、RPC服务/DB有问题自动降级为不调用。当然这种情况适用于对读一致性要求不高的场景。\n \n* 页面降级、页面片段降级、页面异步请求降级都是读服务降级，目的是丢卒保帅（比如因为这些服务也要使用核心资源、或者占了带宽影响到核心服务）或者因数据问题暂时屏蔽。\n \n还有一种是页面静态化场景：\n动态化降级为静态化：比如平时网站可以走动态化渲染商品详情页，但是到了大促来临之际可以将其切换为静态化来减少对核心资源的占用，而且可以提升性能；其他还有如列表页、首页、频道页都可以这么玩；可以通过一个程序定期的推送静态页到缓存或者生成到磁盘，出问题时直接切过去；\n静态化降级为动态化：比如当使用静态化来实现商品详情页架构时，平时使用静态化来提供服务，但是因为特殊原因静态化页面有问题了，需要暂时切换回动态化来保证服务正确性。\n \n**以上都保证出问题了有预案，用户还是可以使用网站，不影响用户购物。**\n \n* 写服务降级\n写服务在大多数场景下是不可降级的，不过可以通过一些迂回战术来解决问题。比如将同步操作转换为异步操作，或者限制写的量/比例。\n比如扣减库存一般这样操作：\n方案1：\n1、扣减DB库存，2、扣减成功后更新Redis中的库存；\n方案2：\n1、扣减Redis库存，2、同步扣减DB库存，如果扣减失败则回滚Redis库存；\n前两种方案非常依赖DB，假设此时DB性能跟不上则扣减库存就会遇到问题；因此我们可以想到方案3：\n1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为发送一条扣减DB库存的消息，然后异步进行DB库存扣减实现最终一致即可；\n这种方式发送扣减DB库存消息也可能成为瓶颈；这种情况我们可以考虑方案4：\n1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为写扣减DB库存消息到本机，然后本机通过异步进行DB库存扣减来实现最终一致性。\n \n也就是说正常情况可以同步扣减库存，在性能扛不住时降级为异步；另外如果是秒杀场景可以直接降级为异步，从而保护系统。还有如下单操作可以在大促时暂时降级将下单数据写入Redis，然后等峰值过去了再同步回DB，当然也有更好的解决方案，但是更复杂，不是本文的重点。\n还有如用户评价，如果评价量太大，也可以把评价从同步写降级为异步写。当然也可以对评价按钮进行按比例开放（比如一些人的看不到评价操作按钮）。比如评价成功后会发一些奖励，在必要的时候降级同步到异步。\n \n* 多级降级\n缓存是离用户最近越高效；而降级是离用户越近越能对系统保护的好。因为业务的复杂性导致越到后端QPS/TPS越低。\n \n* 页面JS降级开关：主要控制页面功能的降级，在页面中通过JS脚本部署功能降级开关，在适当时机开启/关闭开关。\n\n* 接入层降级开关：主要控制请求入口的降级，请求进入后会首先进入接入层，在接入层可以配置功能降级开关，可以根据实际情况进行自动/人工降级；这个可以参考《京东商品详情页服务闭环实践》，尤其在后端应用服务出问题时，通过接入层降级从而给应用服务有足够的时间恢复服务；\n应用层降级开关：主要控制业务的降级，在应用中配置相应的功能开关，根据实际业务情况进行自动/人工降级。\n\n\n原文：http://jinnianshilongnian.iteye.com/blog/2306477\n\n---","slug":"文章阅读-2016-11-02-高并发系统之服务器降级","published":1,"updated":"2016-11-21T02:17:08.946Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjlu0017d8pkzvomaooo","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h4 id=\"网上看到的文章，摘录分享。\"><a href=\"#网上看到的文章，摘录分享。\" class=\"headerlink\" title=\"网上看到的文章，摘录分享。\"></a>网上看到的文章，摘录分享。</h4><p>​在开发高并发系统时有三把利器用来保护系统：<strong>缓存、降级和限流</strong>。之前已经有一些文章介绍过缓存和限流了。本文将详细聊聊降级。当访问量剧增、服务出现问题（如响应时间慢或不响应）或非核心服务影响到核心流程的性能时，仍然需要保证服务还是可用的，即使是有损服务。系统可以根据一些关键数据进行自动降级，也可以配置开关实现人工降级。本文将介绍一些笔者在实际工作中遇到的或见到过的一些降级方案供大家参考。</p>\n<p><strong>降级的最终目的是保证核心服务可用</strong>，即使是有损的。而且有些服务是无法降级的（如加入购物车、结算）。</p>\n<p>降级预案<br>在进行降级之前要对系统进行梳理，看看系统是不是可以丢卒保帅；从而梳理出哪些必须誓死保护，哪些可降级；比如可以参考日志级别设置预案：</p>\n<p><strong>一般：</strong>比如有些服务偶尔因为网络抖动或者服务正在上线而超时，可以自动降级；</p>\n<p><strong>警告：</strong>有些服务在一段时间内成功率有波动（如在95~100%之间），可以自动降级或人工降级，并发送告警；</p>\n<p><strong>错误：</strong>比如可用率低于90%，或者数据库连接池被打爆了，或者访问量突然猛增到系统能承受的最大阀值，此时可以根据情况自动降级或者人工降级；<br>严重错误：比如因为特殊原因数据错误了，此时需要紧急人工降级。</p>\n<p>降级按照是否自动化可分为：<strong>自动开关降级和人工开关降级</strong>。</p>\n<p>降级按照功能可分为：<strong>读服务降级、写服务降级</strong>。</p>\n<p>降级按照处于的系统层次可分为：<strong>多级降级</strong>。</p>\n<hr>\n<p>降级的功能点主要从服务端链路考虑，即根据用户访问的服务调用链路来梳理哪里需要降级：<br>页面降级：在大促或者某些特殊情况下，某些页面占用了一些稀缺服务资源，在紧急情况下可以对其整个降级，以达到丢卒保帅；</p>\n<ul>\n<li><p>页面片段降级：比如商品详情页中的商家部分因为数据错误了，此时需要对其进行降级；<br>页面异步请求降级：比如商品详情页上有推荐信息/配送至等异步加载的请求，如果这些信息响应慢或者后端服务有问题，可以进行降级；</p>\n</li>\n<li><p>服务功能降级：比如渲染商品详情页时需要调用一些不太重要的服务：相关分类、热销榜等，而这些服务在异常情况下直接不获取，即降级即可；</p>\n</li>\n<li><p>读降级：比如多级缓存模式，如果后端服务有问题，可以降级为只读缓存，这种方式适用于对读一致性要求不高的场景；</p>\n</li>\n<li><p>写降级：比如秒杀抢购，我们可以只进行Cache的更新，然后异步同步扣减库存到DB，保证最终一致性即可，此时可以将DB降级为Cache。<br>爬虫降级：在大促活动时，可以将爬虫流量导向静态页或者返回空数据，从而保护后端稀缺资源。</p>\n</li>\n<li><p>自动开关降级<br>自动降级是根据系统负载、资源使用情况、SLA等指标进行降级。</p>\n</li>\n<li><p>超时降级<br>当访问的数据库/http服务/远程调用响应慢或者长时间响应慢，且该服务不是核心服务的话可以在超时后自动降级；比如商品详情页上有推荐内容/评价，但是推荐内容/评价暂时不展示对用户购物流程不会产生很大的影响；对于这种服务是可以超时降级的。如果是调用别人的远程服务，和对方定义一个服务响应最大时间，如果超时了则自动降级。</p>\n</li>\n</ul>\n<p>之前总结过一些的文章《使用httpclient必须知道的参数设置及代码写法、存在的风险》和《dbcp配置及jdbc超时设置总结》。在实际场景用一定主要配置好超时时间和超时重试次数和机制。</p>\n<ul>\n<li><p>统计失败次数降级<br>有时候依赖一些不稳定的API，比如调用外部机票服务，当失败调用次数达到一定阀值自动降级；然后通过异步线程去探测服务是否恢复了，则取消降级。</p>\n</li>\n<li><p>故障降级<br>比如要调用的远程服务挂掉了（网络故障、DNS故障、http服务返回错误的状态码、rpc服务抛出异常），则可以直接降级。降级后的处理方案有：默认值（比如库存服务挂了，返回默认现货）、兜底数据（比如广告挂了，返回提前准备好的一些静态页面）、缓存（之前暂存的一些缓存数据）。</p>\n</li>\n<li><p>限流降级<br>当我们去秒杀或者抢购一些限购商品时，此时可能会因为访问量太大而导致系统崩溃，此时开发者会使用限流来进行限制访问量，当达到限流阀值，后续请求会被降级；降级后的处理方案可以是：排队页面（将用户导流到排队页面等一会重试）、无货（直接告知用户没货了）、错误页（如活动太火爆了，稍后重试）。</p>\n</li>\n<li><p>人工开关降级<br>在大促期间通过监控发现线上的一些服务存在问题，这个时候需要暂时将这些服务摘掉；还有有时候通过任务系统调用一些服务，但是服务依赖的数据库可能存在：网卡被打满了、挂掉了或者很多慢查询，此时需要暂停下任务系统让服务方进行处理；还有发现突然调用量太大，可能需要改变处理方式（比如同步转换为异步）；此时就可以使用开关来完成降级。开关可以存放到配置文件、存放到数据库、存放到Redis/ZooKeeper；如果不是存放在本地，可以定期同步开关数据（比如1秒同步一次）。然后通过判断某个KEY的值来决定是否降级。</p>\n</li>\n</ul>\n<p>另外对于新开发的服务想上线进行灰度测试；但是不太确定该服务的逻辑是否正确，此时就需要设置开关，当新服务有问题可以通过开关切换回老服务。还有多机房服务，如果某个机房挂掉了，此时需要将一个机房的服务切到另一个机房，此时也可以通过开关完成切换。</p>\n<p>还有一些是因为功能问题需要暂时屏蔽掉某些功能，比如商品规格参数数据有问题，数据问题不能用回滚解决，此时需要开关控制降级。</p>\n<ul>\n<li><p>读服务降级<br>对于读服务降级一般采用的策略有：暂时切换读（降级到读缓存、降级到走静态化）、暂时屏蔽读（屏蔽读入口、屏蔽某个读服务）。在《应用多级缓存模式支撑海量读服务》中曾经介绍过读服务，即接入层缓存–&gt;应用层本地缓存–&gt;分布式缓存–&gt;RPC服务/DB，我们会在接入层、应用层设置开关，当分布式缓存、RPC服务/DB有问题自动降级为不调用。当然这种情况适用于对读一致性要求不高的场景。</p>\n</li>\n<li><p>页面降级、页面片段降级、页面异步请求降级都是读服务降级，目的是丢卒保帅（比如因为这些服务也要使用核心资源、或者占了带宽影响到核心服务）或者因数据问题暂时屏蔽。</p>\n</li>\n</ul>\n<p>还有一种是页面静态化场景：<br>动态化降级为静态化：比如平时网站可以走动态化渲染商品详情页，但是到了大促来临之际可以将其切换为静态化来减少对核心资源的占用，而且可以提升性能；其他还有如列表页、首页、频道页都可以这么玩；可以通过一个程序定期的推送静态页到缓存或者生成到磁盘，出问题时直接切过去；<br>静态化降级为动态化：比如当使用静态化来实现商品详情页架构时，平时使用静态化来提供服务，但是因为特殊原因静态化页面有问题了，需要暂时切换回动态化来保证服务正确性。</p>\n<p><strong>以上都保证出问题了有预案，用户还是可以使用网站，不影响用户购物。</strong></p>\n<ul>\n<li>写服务降级<br>写服务在大多数场景下是不可降级的，不过可以通过一些迂回战术来解决问题。比如将同步操作转换为异步操作，或者限制写的量/比例。<br>比如扣减库存一般这样操作：<br>方案1：<br>1、扣减DB库存，2、扣减成功后更新Redis中的库存；<br>方案2：<br>1、扣减Redis库存，2、同步扣减DB库存，如果扣减失败则回滚Redis库存；<br>前两种方案非常依赖DB，假设此时DB性能跟不上则扣减库存就会遇到问题；因此我们可以想到方案3：<br>1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为发送一条扣减DB库存的消息，然后异步进行DB库存扣减实现最终一致即可；<br>这种方式发送扣减DB库存消息也可能成为瓶颈；这种情况我们可以考虑方案4：<br>1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为写扣减DB库存消息到本机，然后本机通过异步进行DB库存扣减来实现最终一致性。</li>\n</ul>\n<p>也就是说正常情况可以同步扣减库存，在性能扛不住时降级为异步；另外如果是秒杀场景可以直接降级为异步，从而保护系统。还有如下单操作可以在大促时暂时降级将下单数据写入Redis，然后等峰值过去了再同步回DB，当然也有更好的解决方案，但是更复杂，不是本文的重点。<br>还有如用户评价，如果评价量太大，也可以把评价从同步写降级为异步写。当然也可以对评价按钮进行按比例开放（比如一些人的看不到评价操作按钮）。比如评价成功后会发一些奖励，在必要的时候降级同步到异步。</p>\n<ul>\n<li><p>多级降级<br>缓存是离用户最近越高效；而降级是离用户越近越能对系统保护的好。因为业务的复杂性导致越到后端QPS/TPS越低。</p>\n</li>\n<li><p>页面JS降级开关：主要控制页面功能的降级，在页面中通过JS脚本部署功能降级开关，在适当时机开启/关闭开关。</p>\n</li>\n<li><p>接入层降级开关：主要控制请求入口的降级，请求进入后会首先进入接入层，在接入层可以配置功能降级开关，可以根据实际情况进行自动/人工降级；这个可以参考《京东商品详情页服务闭环实践》，尤其在后端应用服务出问题时，通过接入层降级从而给应用服务有足够的时间恢复服务；<br>应用层降级开关：主要控制业务的降级，在应用中配置相应的功能开关，根据实际业务情况进行自动/人工降级。</p>\n</li>\n</ul>\n<p>原文：<a href=\"http://jinnianshilongnian.iteye.com/blog/2306477\" target=\"_blank\" rel=\"external\">http://jinnianshilongnian.iteye.com/blog/2306477</a></p>\n<hr>\n","excerpt":"","more":"<h4 id=\"网上看到的文章，摘录分享。\"><a href=\"#网上看到的文章，摘录分享。\" class=\"headerlink\" title=\"网上看到的文章，摘录分享。\"></a>网上看到的文章，摘录分享。</h4><p>​在开发高并发系统时有三把利器用来保护系统：<strong>缓存、降级和限流</strong>。之前已经有一些文章介绍过缓存和限流了。本文将详细聊聊降级。当访问量剧增、服务出现问题（如响应时间慢或不响应）或非核心服务影响到核心流程的性能时，仍然需要保证服务还是可用的，即使是有损服务。系统可以根据一些关键数据进行自动降级，也可以配置开关实现人工降级。本文将介绍一些笔者在实际工作中遇到的或见到过的一些降级方案供大家参考。</p>\n<p><strong>降级的最终目的是保证核心服务可用</strong>，即使是有损的。而且有些服务是无法降级的（如加入购物车、结算）。</p>\n<p>降级预案<br>在进行降级之前要对系统进行梳理，看看系统是不是可以丢卒保帅；从而梳理出哪些必须誓死保护，哪些可降级；比如可以参考日志级别设置预案：</p>\n<p><strong>一般：</strong>比如有些服务偶尔因为网络抖动或者服务正在上线而超时，可以自动降级；</p>\n<p><strong>警告：</strong>有些服务在一段时间内成功率有波动（如在95~100%之间），可以自动降级或人工降级，并发送告警；</p>\n<p><strong>错误：</strong>比如可用率低于90%，或者数据库连接池被打爆了，或者访问量突然猛增到系统能承受的最大阀值，此时可以根据情况自动降级或者人工降级；<br>严重错误：比如因为特殊原因数据错误了，此时需要紧急人工降级。</p>\n<p>降级按照是否自动化可分为：<strong>自动开关降级和人工开关降级</strong>。</p>\n<p>降级按照功能可分为：<strong>读服务降级、写服务降级</strong>。</p>\n<p>降级按照处于的系统层次可分为：<strong>多级降级</strong>。</p>\n<hr>\n<p>降级的功能点主要从服务端链路考虑，即根据用户访问的服务调用链路来梳理哪里需要降级：<br>页面降级：在大促或者某些特殊情况下，某些页面占用了一些稀缺服务资源，在紧急情况下可以对其整个降级，以达到丢卒保帅；</p>\n<ul>\n<li><p>页面片段降级：比如商品详情页中的商家部分因为数据错误了，此时需要对其进行降级；<br>页面异步请求降级：比如商品详情页上有推荐信息/配送至等异步加载的请求，如果这些信息响应慢或者后端服务有问题，可以进行降级；</p>\n</li>\n<li><p>服务功能降级：比如渲染商品详情页时需要调用一些不太重要的服务：相关分类、热销榜等，而这些服务在异常情况下直接不获取，即降级即可；</p>\n</li>\n<li><p>读降级：比如多级缓存模式，如果后端服务有问题，可以降级为只读缓存，这种方式适用于对读一致性要求不高的场景；</p>\n</li>\n<li><p>写降级：比如秒杀抢购，我们可以只进行Cache的更新，然后异步同步扣减库存到DB，保证最终一致性即可，此时可以将DB降级为Cache。<br>爬虫降级：在大促活动时，可以将爬虫流量导向静态页或者返回空数据，从而保护后端稀缺资源。</p>\n</li>\n<li><p>自动开关降级<br>自动降级是根据系统负载、资源使用情况、SLA等指标进行降级。</p>\n</li>\n<li><p>超时降级<br>当访问的数据库/http服务/远程调用响应慢或者长时间响应慢，且该服务不是核心服务的话可以在超时后自动降级；比如商品详情页上有推荐内容/评价，但是推荐内容/评价暂时不展示对用户购物流程不会产生很大的影响；对于这种服务是可以超时降级的。如果是调用别人的远程服务，和对方定义一个服务响应最大时间，如果超时了则自动降级。</p>\n</li>\n</ul>\n<p>之前总结过一些的文章《使用httpclient必须知道的参数设置及代码写法、存在的风险》和《dbcp配置及jdbc超时设置总结》。在实际场景用一定主要配置好超时时间和超时重试次数和机制。</p>\n<ul>\n<li><p>统计失败次数降级<br>有时候依赖一些不稳定的API，比如调用外部机票服务，当失败调用次数达到一定阀值自动降级；然后通过异步线程去探测服务是否恢复了，则取消降级。</p>\n</li>\n<li><p>故障降级<br>比如要调用的远程服务挂掉了（网络故障、DNS故障、http服务返回错误的状态码、rpc服务抛出异常），则可以直接降级。降级后的处理方案有：默认值（比如库存服务挂了，返回默认现货）、兜底数据（比如广告挂了，返回提前准备好的一些静态页面）、缓存（之前暂存的一些缓存数据）。</p>\n</li>\n<li><p>限流降级<br>当我们去秒杀或者抢购一些限购商品时，此时可能会因为访问量太大而导致系统崩溃，此时开发者会使用限流来进行限制访问量，当达到限流阀值，后续请求会被降级；降级后的处理方案可以是：排队页面（将用户导流到排队页面等一会重试）、无货（直接告知用户没货了）、错误页（如活动太火爆了，稍后重试）。</p>\n</li>\n<li><p>人工开关降级<br>在大促期间通过监控发现线上的一些服务存在问题，这个时候需要暂时将这些服务摘掉；还有有时候通过任务系统调用一些服务，但是服务依赖的数据库可能存在：网卡被打满了、挂掉了或者很多慢查询，此时需要暂停下任务系统让服务方进行处理；还有发现突然调用量太大，可能需要改变处理方式（比如同步转换为异步）；此时就可以使用开关来完成降级。开关可以存放到配置文件、存放到数据库、存放到Redis/ZooKeeper；如果不是存放在本地，可以定期同步开关数据（比如1秒同步一次）。然后通过判断某个KEY的值来决定是否降级。</p>\n</li>\n</ul>\n<p>另外对于新开发的服务想上线进行灰度测试；但是不太确定该服务的逻辑是否正确，此时就需要设置开关，当新服务有问题可以通过开关切换回老服务。还有多机房服务，如果某个机房挂掉了，此时需要将一个机房的服务切到另一个机房，此时也可以通过开关完成切换。</p>\n<p>还有一些是因为功能问题需要暂时屏蔽掉某些功能，比如商品规格参数数据有问题，数据问题不能用回滚解决，此时需要开关控制降级。</p>\n<ul>\n<li><p>读服务降级<br>对于读服务降级一般采用的策略有：暂时切换读（降级到读缓存、降级到走静态化）、暂时屏蔽读（屏蔽读入口、屏蔽某个读服务）。在《应用多级缓存模式支撑海量读服务》中曾经介绍过读服务，即接入层缓存–&gt;应用层本地缓存–&gt;分布式缓存–&gt;RPC服务/DB，我们会在接入层、应用层设置开关，当分布式缓存、RPC服务/DB有问题自动降级为不调用。当然这种情况适用于对读一致性要求不高的场景。</p>\n</li>\n<li><p>页面降级、页面片段降级、页面异步请求降级都是读服务降级，目的是丢卒保帅（比如因为这些服务也要使用核心资源、或者占了带宽影响到核心服务）或者因数据问题暂时屏蔽。</p>\n</li>\n</ul>\n<p>还有一种是页面静态化场景：<br>动态化降级为静态化：比如平时网站可以走动态化渲染商品详情页，但是到了大促来临之际可以将其切换为静态化来减少对核心资源的占用，而且可以提升性能；其他还有如列表页、首页、频道页都可以这么玩；可以通过一个程序定期的推送静态页到缓存或者生成到磁盘，出问题时直接切过去；<br>静态化降级为动态化：比如当使用静态化来实现商品详情页架构时，平时使用静态化来提供服务，但是因为特殊原因静态化页面有问题了，需要暂时切换回动态化来保证服务正确性。</p>\n<p><strong>以上都保证出问题了有预案，用户还是可以使用网站，不影响用户购物。</strong></p>\n<ul>\n<li>写服务降级<br>写服务在大多数场景下是不可降级的，不过可以通过一些迂回战术来解决问题。比如将同步操作转换为异步操作，或者限制写的量/比例。<br>比如扣减库存一般这样操作：<br>方案1：<br>1、扣减DB库存，2、扣减成功后更新Redis中的库存；<br>方案2：<br>1、扣减Redis库存，2、同步扣减DB库存，如果扣减失败则回滚Redis库存；<br>前两种方案非常依赖DB，假设此时DB性能跟不上则扣减库存就会遇到问题；因此我们可以想到方案3：<br>1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为发送一条扣减DB库存的消息，然后异步进行DB库存扣减实现最终一致即可；<br>这种方式发送扣减DB库存消息也可能成为瓶颈；这种情况我们可以考虑方案4：<br>1、扣减Redis库存，2、正常同步扣减DB库存，性能扛不住时降级为写扣减DB库存消息到本机，然后本机通过异步进行DB库存扣减来实现最终一致性。</li>\n</ul>\n<p>也就是说正常情况可以同步扣减库存，在性能扛不住时降级为异步；另外如果是秒杀场景可以直接降级为异步，从而保护系统。还有如下单操作可以在大促时暂时降级将下单数据写入Redis，然后等峰值过去了再同步回DB，当然也有更好的解决方案，但是更复杂，不是本文的重点。<br>还有如用户评价，如果评价量太大，也可以把评价从同步写降级为异步写。当然也可以对评价按钮进行按比例开放（比如一些人的看不到评价操作按钮）。比如评价成功后会发一些奖励，在必要的时候降级同步到异步。</p>\n<ul>\n<li><p>多级降级<br>缓存是离用户最近越高效；而降级是离用户越近越能对系统保护的好。因为业务的复杂性导致越到后端QPS/TPS越低。</p>\n</li>\n<li><p>页面JS降级开关：主要控制页面功能的降级，在页面中通过JS脚本部署功能降级开关，在适当时机开启/关闭开关。</p>\n</li>\n<li><p>接入层降级开关：主要控制请求入口的降级，请求进入后会首先进入接入层，在接入层可以配置功能降级开关，可以根据实际情况进行自动/人工降级；这个可以参考《京东商品详情页服务闭环实践》，尤其在后端应用服务出问题时，通过接入层降级从而给应用服务有足够的时间恢复服务；<br>应用层降级开关：主要控制业务的降级，在应用中配置相应的功能开关，根据实际业务情况进行自动/人工降级。</p>\n</li>\n</ul>\n<p>原文：<a href=\"http://jinnianshilongnian.iteye.com/blog/2306477\">http://jinnianshilongnian.iteye.com/blog/2306477</a></p>\n<hr>\n"},{"title":"用软文思维写工作总结","abbrlink":37921,"date":"2016-11-02T06:52:37.000Z","_content":"\n网上看到的网文，摘录分享\n\n## 如何用软文思维写工作总结？\n#### Step 1 : 工作总结的选题规划\n1. 给谁看\n工作总结，顾名思义就是要给领导看的，所以我们要做的第一件事就是分析领导的风格，领导的风格决定了总结的风格。一般来说主要有这么三类。\n请根据具体情况对号入座：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93001.png)\n2. 看什么\n领导主要想看些什么，你就要写些什么。\n这里有七个方面内容可供选择：你的（销售、生产）业绩、对未来工作的计划、工作心得、有哪些好的建议、对一些数据的分析和结论、对行业情况的调研结果，以及提出未来工作所需要的资源等等。当然其他方面也还有很多，以上仅供参考。\n3. 横向调研\n横向调研的意思是借鉴你同事的优秀工作总结，做到扬长避短。\n#### Step 2 : 挖掘工作总结的素材\n软文的素材主要是以下几个方面，它们的核心就是介绍企业的基本信息。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93002.png)\n用在工作总结上，就不是以企业为主体，而是以个人以及个人所在的团队为介绍对象。它们分别可写的指标如下图所示：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93003.png)\n#### Step 3 : 整合素材\n可以单纯地列出数字，计算增长比、横向对比、逐月比较、趋势预测等等，对于数据来说，最好的呈现方式就是图表。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93004.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93005.png)\n这时候可能有些人就要问了，我是属于行政类岗位，如果没有以上这些业绩指标，该怎么写呢？答案是，你依然可以从以下11个方框中找到你的成就感。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93006.png)\n正文撰写和标题拟定，就要根据以上确定的选题整理的素材自由发挥了。不过学姐为大家提供了一些非常好用的的句式↓\n工作总结优化的9种句式\n\n你是不是也有这种感受，刚写完的一个文案/总结，当时怎么也看不出有哪里不好，但是隔了一两天再看一遍，就能发现不少可以改进的地方。\n对于影响你升职加薪的工作总结，当然要一改再改，优化几遍再上交啦！\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93007.png)\n不过这里不是让你使用多么精美的措辞，毕竟不是写小说，工作总结的精髓还是在于它的理性意义。\n一篇优秀的工作总结要做到言语朴实但不呆板，成果累累却不张扬，让你的上司认为你是个踏实努力、有思想、有上进心、有潜力的好员工。怎么做到呢？\n可以参考以下9个句式，看看它们的巧妙之处。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93008.png)\n或者用“首先，其次，再次”等有逻辑的句式，表明你有非常清晰的工作思路；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93009.png)\n文章里要出现这类词，因为总结不能面面俱到，要突出主次，以免领导丢失重点，也认为你是个没有重点的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93010.png)\n通过某些真实的案例和数据得出结论，有凭有据，表明你的观点并非是天马行空想出来的；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93011.png)\n同上，当你提出一个观点时，需要数据、图表来佐证，图文结合更具说服力；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93012.png)\n不光要做会提问题的员工，还要主动寻找解决问题的方法，向领导表明你是个有建设性意见的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93013.png)\n很多人在总结报告里喜欢讲一些行业的成功案例（运营、用人等经验），但是如果不联系到自己的工作中，就会说明你只是个爱借用他人来吹牛的人；但反之就能表明你是个爱学习、爱思考、爱应用的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93014.png)\n当向领导提出同行竞争者的成功做法时，你还需要指出本公司目前需要的条件或需要克服的障碍，表明你是个思虑周全、靠谱的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93015.png)\n当你提出建议时，你需要落实具体的资源、人员计划。表明你真正深入思考了这个问题，是一个有较强执行力的人。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93016.png)\n最后总结一下，这半年（一年）自己哪方面做得好，哪方面还有待提高，如何提高，表明你是个勤思考，上进的人，也让领导相信你明年会做得更好（画大饼懂不懂？）。\n\n了解更多写工作总结的技巧，请戳[怎样用软文思维写工作总结？ >>](http://study.163.com/course/introduction/1599008.htm?inref=xuejieyouliao60#/courseDetail)\n\n\n\n---\n","source":"_posts/文章阅读/2016-11-02-用软文思维写工作总结.md","raw":"---\ntitle: 用软文思维写工作总结\ncategories:\n  - 文章阅读\ntags:\n  - 工作总结\nabbrlink: 37921\ndate: 2016-11-02 14:52:37\n---\n\n网上看到的网文，摘录分享\n\n## 如何用软文思维写工作总结？\n#### Step 1 : 工作总结的选题规划\n1. 给谁看\n工作总结，顾名思义就是要给领导看的，所以我们要做的第一件事就是分析领导的风格，领导的风格决定了总结的风格。一般来说主要有这么三类。\n请根据具体情况对号入座：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93001.png)\n2. 看什么\n领导主要想看些什么，你就要写些什么。\n这里有七个方面内容可供选择：你的（销售、生产）业绩、对未来工作的计划、工作心得、有哪些好的建议、对一些数据的分析和结论、对行业情况的调研结果，以及提出未来工作所需要的资源等等。当然其他方面也还有很多，以上仅供参考。\n3. 横向调研\n横向调研的意思是借鉴你同事的优秀工作总结，做到扬长避短。\n#### Step 2 : 挖掘工作总结的素材\n软文的素材主要是以下几个方面，它们的核心就是介绍企业的基本信息。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93002.png)\n用在工作总结上，就不是以企业为主体，而是以个人以及个人所在的团队为介绍对象。它们分别可写的指标如下图所示：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93003.png)\n#### Step 3 : 整合素材\n可以单纯地列出数字，计算增长比、横向对比、逐月比较、趋势预测等等，对于数据来说，最好的呈现方式就是图表。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93004.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93005.png)\n这时候可能有些人就要问了，我是属于行政类岗位，如果没有以上这些业绩指标，该怎么写呢？答案是，你依然可以从以下11个方框中找到你的成就感。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93006.png)\n正文撰写和标题拟定，就要根据以上确定的选题整理的素材自由发挥了。不过学姐为大家提供了一些非常好用的的句式↓\n工作总结优化的9种句式\n\n你是不是也有这种感受，刚写完的一个文案/总结，当时怎么也看不出有哪里不好，但是隔了一两天再看一遍，就能发现不少可以改进的地方。\n对于影响你升职加薪的工作总结，当然要一改再改，优化几遍再上交啦！\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93007.png)\n不过这里不是让你使用多么精美的措辞，毕竟不是写小说，工作总结的精髓还是在于它的理性意义。\n一篇优秀的工作总结要做到言语朴实但不呆板，成果累累却不张扬，让你的上司认为你是个踏实努力、有思想、有上进心、有潜力的好员工。怎么做到呢？\n可以参考以下9个句式，看看它们的巧妙之处。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93008.png)\n或者用“首先，其次，再次”等有逻辑的句式，表明你有非常清晰的工作思路；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93009.png)\n文章里要出现这类词，因为总结不能面面俱到，要突出主次，以免领导丢失重点，也认为你是个没有重点的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93010.png)\n通过某些真实的案例和数据得出结论，有凭有据，表明你的观点并非是天马行空想出来的；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93011.png)\n同上，当你提出一个观点时，需要数据、图表来佐证，图文结合更具说服力；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93012.png)\n不光要做会提问题的员工，还要主动寻找解决问题的方法，向领导表明你是个有建设性意见的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93013.png)\n很多人在总结报告里喜欢讲一些行业的成功案例（运营、用人等经验），但是如果不联系到自己的工作中，就会说明你只是个爱借用他人来吹牛的人；但反之就能表明你是个爱学习、爱思考、爱应用的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93014.png)\n当向领导提出同行竞争者的成功做法时，你还需要指出本公司目前需要的条件或需要克服的障碍，表明你是个思虑周全、靠谱的人；\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93015.png)\n当你提出建议时，你需要落实具体的资源、人员计划。表明你真正深入思考了这个问题，是一个有较强执行力的人。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93016.png)\n最后总结一下，这半年（一年）自己哪方面做得好，哪方面还有待提高，如何提高，表明你是个勤思考，上进的人，也让领导相信你明年会做得更好（画大饼懂不懂？）。\n\n了解更多写工作总结的技巧，请戳[怎样用软文思维写工作总结？ >>](http://study.163.com/course/introduction/1599008.htm?inref=xuejieyouliao60#/courseDetail)\n\n\n\n---\n","slug":"文章阅读-2016-11-02-用软文思维写工作总结","published":1,"updated":"2016-11-21T02:17:08.937Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjly001ad8pkmaj1j079","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>网上看到的网文，摘录分享</p>\n<h2 id=\"如何用软文思维写工作总结？\"><a href=\"#如何用软文思维写工作总结？\" class=\"headerlink\" title=\"如何用软文思维写工作总结？\"></a>如何用软文思维写工作总结？</h2><h4 id=\"Step-1-工作总结的选题规划\"><a href=\"#Step-1-工作总结的选题规划\" class=\"headerlink\" title=\"Step 1 : 工作总结的选题规划\"></a>Step 1 : 工作总结的选题规划</h4><ol>\n<li>给谁看<br>工作总结，顾名思义就是要给领导看的，所以我们要做的第一件事就是分析领导的风格，领导的风格决定了总结的风格。一般来说主要有这么三类。<br>请根据具体情况对号入座：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93001.png\" alt=\"\"></li>\n<li>看什么<br>领导主要想看些什么，你就要写些什么。<br>这里有七个方面内容可供选择：你的（销售、生产）业绩、对未来工作的计划、工作心得、有哪些好的建议、对一些数据的分析和结论、对行业情况的调研结果，以及提出未来工作所需要的资源等等。当然其他方面也还有很多，以上仅供参考。</li>\n<li>横向调研<br>横向调研的意思是借鉴你同事的优秀工作总结，做到扬长避短。<h4 id=\"Step-2-挖掘工作总结的素材\"><a href=\"#Step-2-挖掘工作总结的素材\" class=\"headerlink\" title=\"Step 2 : 挖掘工作总结的素材\"></a>Step 2 : 挖掘工作总结的素材</h4>软文的素材主要是以下几个方面，它们的核心就是介绍企业的基本信息。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93002.png\" alt=\"\"><br>用在工作总结上，就不是以企业为主体，而是以个人以及个人所在的团队为介绍对象。它们分别可写的指标如下图所示：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93003.png\" alt=\"\"><h4 id=\"Step-3-整合素材\"><a href=\"#Step-3-整合素材\" class=\"headerlink\" title=\"Step 3 : 整合素材\"></a>Step 3 : 整合素材</h4>可以单纯地列出数字，计算增长比、横向对比、逐月比较、趋势预测等等，对于数据来说，最好的呈现方式就是图表。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93004.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93005.png\" alt=\"\"><br>这时候可能有些人就要问了，我是属于行政类岗位，如果没有以上这些业绩指标，该怎么写呢？答案是，你依然可以从以下11个方框中找到你的成就感。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93006.png\" alt=\"\"><br>正文撰写和标题拟定，就要根据以上确定的选题整理的素材自由发挥了。不过学姐为大家提供了一些非常好用的的句式↓<br>工作总结优化的9种句式</li>\n</ol>\n<p>你是不是也有这种感受，刚写完的一个文案/总结，当时怎么也看不出有哪里不好，但是隔了一两天再看一遍，就能发现不少可以改进的地方。<br>对于影响你升职加薪的工作总结，当然要一改再改，优化几遍再上交啦！<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93007.png\" alt=\"\"><br>不过这里不是让你使用多么精美的措辞，毕竟不是写小说，工作总结的精髓还是在于它的理性意义。<br>一篇优秀的工作总结要做到言语朴实但不呆板，成果累累却不张扬，让你的上司认为你是个踏实努力、有思想、有上进心、有潜力的好员工。怎么做到呢？<br>可以参考以下9个句式，看看它们的巧妙之处。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93008.png\" alt=\"\"><br>或者用“首先，其次，再次”等有逻辑的句式，表明你有非常清晰的工作思路；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93009.png\" alt=\"\"><br>文章里要出现这类词，因为总结不能面面俱到，要突出主次，以免领导丢失重点，也认为你是个没有重点的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93010.png\" alt=\"\"><br>通过某些真实的案例和数据得出结论，有凭有据，表明你的观点并非是天马行空想出来的；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93011.png\" alt=\"\"><br>同上，当你提出一个观点时，需要数据、图表来佐证，图文结合更具说服力；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93012.png\" alt=\"\"><br>不光要做会提问题的员工，还要主动寻找解决问题的方法，向领导表明你是个有建设性意见的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93013.png\" alt=\"\"><br>很多人在总结报告里喜欢讲一些行业的成功案例（运营、用人等经验），但是如果不联系到自己的工作中，就会说明你只是个爱借用他人来吹牛的人；但反之就能表明你是个爱学习、爱思考、爱应用的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93014.png\" alt=\"\"><br>当向领导提出同行竞争者的成功做法时，你还需要指出本公司目前需要的条件或需要克服的障碍，表明你是个思虑周全、靠谱的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93015.png\" alt=\"\"><br>当你提出建议时，你需要落实具体的资源、人员计划。表明你真正深入思考了这个问题，是一个有较强执行力的人。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93016.png\" alt=\"\"><br>最后总结一下，这半年（一年）自己哪方面做得好，哪方面还有待提高，如何提高，表明你是个勤思考，上进的人，也让领导相信你明年会做得更好（画大饼懂不懂？）。</p>\n<p>了解更多写工作总结的技巧，请戳<a href=\"http://study.163.com/course/introduction/1599008.htm?inref=xuejieyouliao60#/courseDetail\" target=\"_blank\" rel=\"external\">怎样用软文思维写工作总结？ &gt;&gt;</a></p>\n<hr>\n","excerpt":"","more":"<p>网上看到的网文，摘录分享</p>\n<h2 id=\"如何用软文思维写工作总结？\"><a href=\"#如何用软文思维写工作总结？\" class=\"headerlink\" title=\"如何用软文思维写工作总结？\"></a>如何用软文思维写工作总结？</h2><h4 id=\"Step-1-工作总结的选题规划\"><a href=\"#Step-1-工作总结的选题规划\" class=\"headerlink\" title=\"Step 1 : 工作总结的选题规划\"></a>Step 1 : 工作总结的选题规划</h4><ol>\n<li>给谁看<br>工作总结，顾名思义就是要给领导看的，所以我们要做的第一件事就是分析领导的风格，领导的风格决定了总结的风格。一般来说主要有这么三类。<br>请根据具体情况对号入座：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93001.png\" alt=\"\"></li>\n<li>看什么<br>领导主要想看些什么，你就要写些什么。<br>这里有七个方面内容可供选择：你的（销售、生产）业绩、对未来工作的计划、工作心得、有哪些好的建议、对一些数据的分析和结论、对行业情况的调研结果，以及提出未来工作所需要的资源等等。当然其他方面也还有很多，以上仅供参考。</li>\n<li>横向调研<br>横向调研的意思是借鉴你同事的优秀工作总结，做到扬长避短。<h4 id=\"Step-2-挖掘工作总结的素材\"><a href=\"#Step-2-挖掘工作总结的素材\" class=\"headerlink\" title=\"Step 2 : 挖掘工作总结的素材\"></a>Step 2 : 挖掘工作总结的素材</h4>软文的素材主要是以下几个方面，它们的核心就是介绍企业的基本信息。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93002.png\" alt=\"\"><br>用在工作总结上，就不是以企业为主体，而是以个人以及个人所在的团队为介绍对象。它们分别可写的指标如下图所示：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93003.png\" alt=\"\"><h4 id=\"Step-3-整合素材\"><a href=\"#Step-3-整合素材\" class=\"headerlink\" title=\"Step 3 : 整合素材\"></a>Step 3 : 整合素材</h4>可以单纯地列出数字，计算增长比、横向对比、逐月比较、趋势预测等等，对于数据来说，最好的呈现方式就是图表。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93004.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93005.png\" alt=\"\"><br>这时候可能有些人就要问了，我是属于行政类岗位，如果没有以上这些业绩指标，该怎么写呢？答案是，你依然可以从以下11个方框中找到你的成就感。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93006.png\" alt=\"\"><br>正文撰写和标题拟定，就要根据以上确定的选题整理的素材自由发挥了。不过学姐为大家提供了一些非常好用的的句式↓<br>工作总结优化的9种句式</li>\n</ol>\n<p>你是不是也有这种感受，刚写完的一个文案/总结，当时怎么也看不出有哪里不好，但是隔了一两天再看一遍，就能发现不少可以改进的地方。<br>对于影响你升职加薪的工作总结，当然要一改再改，优化几遍再上交啦！<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93007.png\" alt=\"\"><br>不过这里不是让你使用多么精美的措辞，毕竟不是写小说，工作总结的精髓还是在于它的理性意义。<br>一篇优秀的工作总结要做到言语朴实但不呆板，成果累累却不张扬，让你的上司认为你是个踏实努力、有思想、有上进心、有潜力的好员工。怎么做到呢？<br>可以参考以下9个句式，看看它们的巧妙之处。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93008.png\" alt=\"\"><br>或者用“首先，其次，再次”等有逻辑的句式，表明你有非常清晰的工作思路；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93009.png\" alt=\"\"><br>文章里要出现这类词，因为总结不能面面俱到，要突出主次，以免领导丢失重点，也认为你是个没有重点的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93010.png\" alt=\"\"><br>通过某些真实的案例和数据得出结论，有凭有据，表明你的观点并非是天马行空想出来的；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93011.png\" alt=\"\"><br>同上，当你提出一个观点时，需要数据、图表来佐证，图文结合更具说服力；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93012.png\" alt=\"\"><br>不光要做会提问题的员工，还要主动寻找解决问题的方法，向领导表明你是个有建设性意见的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93013.png\" alt=\"\"><br>很多人在总结报告里喜欢讲一些行业的成功案例（运营、用人等经验），但是如果不联系到自己的工作中，就会说明你只是个爱借用他人来吹牛的人；但反之就能表明你是个爱学习、爱思考、爱应用的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93014.png\" alt=\"\"><br>当向领导提出同行竞争者的成功做法时，你还需要指出本公司目前需要的条件或需要克服的障碍，表明你是个思虑周全、靠谱的人；<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93015.png\" alt=\"\"><br>当你提出建议时，你需要落实具体的资源、人员计划。表明你真正深入思考了这个问题，是一个有较强执行力的人。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8%E8%BD%AF%E6%96%87%E6%80%9D%E7%BB%B4%E5%86%99%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93016.png\" alt=\"\"><br>最后总结一下，这半年（一年）自己哪方面做得好，哪方面还有待提高，如何提高，表明你是个勤思考，上进的人，也让领导相信你明年会做得更好（画大饼懂不懂？）。</p>\n<p>了解更多写工作总结的技巧，请戳<a href=\"http://study.163.com/course/introduction/1599008.htm?inref=xuejieyouliao60#/courseDetail\">怎样用软文思维写工作总结？ &gt;&gt;</a></p>\n<hr>\n"},{"title":"Linux 发行版汇总","abbrlink":51445,"date":"2016-11-07T14:36:49.000Z","_content":"\n# 前言\n### 本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\n\n---\n## Linux入门\n### Ubuntu\nUbuntu是一款基于Debian发行版，以Unity作为默认桌面环境的Linux操作系统。他是世界上最流行的发行版之一，每次发行，它都有提升。最新发行版为桌面、移动及其桌面移动混合版的优化。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB01.png)\n\n现在依然有Ubuntu移动平台，它专用于一些合作的智能手机及少数致力于Ubuntu触屏手持设备。较新的设备集成了汇集软件（Convergence software），使你可以通过无线HDMI连接器将你的智能手机转到PC上。\n\n \n### Kubuntu\nKubuntu是Ubuntu的衍生版，使用KDE而不是Unity作为默认桌面环境. 在此情况下，Kubuntu与Ubuntu大同小异，其发行时间也与Ubuntu保持一致。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB02.png)\n \n### Mint\nMint是优雅、现代Linux发行版，它易于使用且功能强大。它基于Ubuntu开发，可靠而安全，是最好用的管理软件之一。最近，它又成为了最为流行的Linux发行版之一，声称为Windows及Mac OS后最为流行的家用操作系统。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB03.png)\n\nMint有着丰富的桌面选项，默认为Cinnamon桌面, 你还可以使用MATE, KDE或Xfce.。Mint的Debian版也可用，定位为有经验的Linux用户。\n\n\n\n### Deepin\nDeepin 是一个基于 Ubuntu 的发行版，它带有时尚美观的深度桌面环境(Deepin Desktop Environment，DDE), 旨在吸引新的 Linux 用户。它的界面简单直观，系统设置面板的是所有发行版中最好看的一个。 DMusic, DPlayer 和 DTalk 是其专有的应用程序。\n\n有许多的基于 Ubuntu 的衍生版本都在视图用它们自己的方式来解决一些问题，而其中特别受关注的一个就是 Deepin。                \n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB04.png)\n\nDeepin 还具备易于使用的软件中心，远胜于其它具备类似功能的发行版。\n\n\n\n### PCLinuxOS\nPCLinuxOS 是专为普通 PC 用户设计的，它默认使用的是 KDE Plasma 桌面。这个发行版在安装驱动，获取办公软件，编辑照片，上网以及使用多媒体等操作上使用非常方便，还能快速创建快照备份。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB05.png)\n\n\n\n### Linux Lite\n基于 Ubuntu LTS 发行版, Linux Lite 是一个最小化的省空间型发行版, 它拥有一个干净简单的 Xfce 桌面，而且是 Windows 风格的。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB06.png)\n\nLinux Lite 的目标是将 Windows 用户引向 Linux。它对资源的节省意味这你可以在一台  CPU 只有 700Mhz 而且内存只有 512M 的 PC 上安装它。这就是我们所说的轻便（light）!\n\n \n### Zorin OS\nZorin OS 是专门为 Linux 新手设计的，便于人们从Windows 向 Linux 过渡。它拥有 Windows 用户比较熟悉的基于 Ubuntu 发行版的功能以及应用，也能让用户方便的使用他们仍然需要的 Windows 应用。Zorin OS 9 看起来很像 Windows 7，这样做只是单纯为了赢得一些从 Windows 到 Linux 的转化。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB07.png)\n\n\n---\n## 震撼的视觉\n### Elementary OS\n另外一个基于 Ubuntu 的发行版 Elementary OS ，自从其 Elementary OS Luna 版本发行依赖，已经拥有了属于它自己的不通表现。它拥有漂亮简介的默认应用，它们遵循这操作系统的美感诉求，例如电子邮件程序 Geary，网页浏览器 Midori, 日历程序 Maya, 电影播放器 Totem , 以及音乐播放器 Noise。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB08.png)\n\n\n### Apricity OS\n为了“最性感的 Linux 发行版”这个非正式的头衔而向 Elementary OS 发起挑战，就是 Apricity, 它采取了一种类似的方法。没有采用 Windows 式样的 Cinnamon 和 MATE 风格, Apricity 提供了一个令人惊叹的桌面换进，比起微软的那一套，它更能让人联想其 Android或者 iOS。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB09.png)\n\n---\n## 普通版\n### OpenSUSE\nOpenSUSE 发行版是 Linux 的一个普通发行版，由 OpenSUSE 项目构建，目标是在成为一个不错面向新手的发行版的同时，也能满足有经验的 Linux 用户的需求。OpenSUSE 附带有 YAST, 它是一个管理员程序，能对安装，包管理以及其它一些东西进行控制。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB10.png)\n\n \n### Fedora\nFedora 默认使用 GNOME 桌面环境，但是用户可以轻松的将其切换到 KDE， XFce， MATE 以及 Cinnamon。Fedora 的自定义变体, 被称作 Fedora 扩展，它们能满足用户的一些特殊需求。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB11.png)\n\n\n### Debian\nDebian 是一个比较老的 Linux 发行版，是跟着 GNOME 桌面环境一起出现的。不过，这个桌面环境也能用于 FreeBSD，并且对于其它内核的支持工作也在进行中， 比如Hurd。 Debian 以其预装的超过 37500 的程序包为荣，并且带有简单的功能使得其能轻松的获取到更多的包。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB12.png)\n \n### Korora\nKorora 最初基于 Gentoo Linux，并且投身于让 Linux 对新手来说使用起来更轻松，但同时能让专家使用起来感到实用。它在桌面环境方面由多种选择，包括 Cinnamon, GNOME, KDE, MATE 以及 Xfce 桌面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB13.png)\n\n \n### Slackware Linux\nSlackware 是专注于安全和简单得发行版, 旨在成为最像 Unix 的 Linux 发行版。它在服务器管理方面特别有用，因为它拥有 FTP， email 以及 web 服务器，能立即投入使用。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB14.png)\n\n \n### Mageia\nMageia起初是一个由社区驱动的，非营利的法国Mandriva Linux分支，它包括了所有主要的桌面环境，它主要使用KDE和GNOME作为其默认桌面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB15.png)\n\n \n### SparkyLinux\n\nSparkyLinux发行版是从Debian的“测试”分支演变而来的。主版本配备了定制版的轻量级的LXDE桌面，同时还可以使用其它一些定制桌面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB16.png)\n\n\n### Gentoo Linux\nGentoo Linux几乎可以满足你任何的需求。它的通用性和优异的性能正是它区别于其他发行版的。Gentoo Linux还配备了先进的软件包管理系统，称为Portage。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB17.png)\n\n \n### CentOS\nCentOS（社区企业操作系统）是一个由社区重建的Red Hat企业版Linux。它是专为那些想免费使用一个企业标准发行版的人而设计的。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB18.png)\n\n \n### PinGuy OS\nPinGuyOS很漂亮，从一开始我就想使用它。这个基于Ubuntu的发行版预装了所有常用的以及用于网络设置的最好软件，这使得它非常适合初学者。它具有一个修改过的GNOME用户界面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB19.png)\n\n\n---\n## 多媒体创作 \n### Fedora设计套件\n如果要节省时间，向Fedora中安装一些艺术工具和程序的话，你只需要安装来自Fedora艺术设计团队的spin版本。它重点关注的是绘画和桌面出版，你可以找到其中预安装的 Inkscape和GIMP等工具，还有其它很多的工具。 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB20.png)\n\n \n### Ubuntu Studio\nUbuntu Studio于2007年首次发布，它可能是那些具有创意天分的Linux用户的默认选择。有了XFCE桌面环境和低内核延迟，一切都是面向媒体制作。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB21.png)\n \n### KXStudio\n这里列举的所有用于创作的发行版都提供了优秀的工具集，然而KXStudio却不同，它侧重于音频制作。当你沉浸在KDE桌面中时，你就拥有了一个性能相当出色的数字工作室。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB22.png)\n\n \n### ArtistX\nArtistX专门面向所有类型的艺术家，从音乐到图形设计。它基于Ubuntu，并且预装了所有最好的2D和3D图形设计、视频制作，和GNU / Linux音频制作软件。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB23.png)\n\n\n### Iro\n如果动画、3D建模、合成、数字绘画和图像编辑是您首选的多媒体技术，你就需要Iro。没有大量的工具库（例如，像Ubuntu Studio）满足每个人的需要，而是提供了一组专门的应用程序。它们被集成在精简的用户界面中，如果你有一个发行版，就可以安装并开始工作，一点也不麻烦。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB24.png)\n\n\n---\n## 教育\n### DouDou\nDouDou Linux是为小孩子设计的，其目的是教他们如何探索计算机并使用计算机学习。它提供了一些适合2-12岁孩子玩的游戏和教育节目，它是一个安全的环境，家长不必整天看着。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB25.png)\n\n \n### Edubuntu\nEdubuntu被开发成了一个（感谢Ubuntu给予的合作）尽可能方便教师设置的版本，并且可以供所有年龄的儿童使用。它预装了所有最好的免费教育软件。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB26.png)\n\n \n### Uberstudent\nUberstudent是专门为大专院校和高级中学的学生而设计的。它预装的软件可以使做作业和管理任务变得更加容易。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB27.png)\n\n\n---\n## 树莓派发行\n### Raspbian Jessie\n流行的Raspberry Pi默认的操作系统是Raspbian Jessie，由树莓派基金会内部生产，它基于Debian。这款ARM发行版配备了大量编程工具，如Scratch，旨在帮助新手学习编程。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB28.png)\n\n \n### Kano OS\n和Raspbian类似的操作系统是Kano OS，它也是基于Debian，但更多地是侧重编程，不过这次针对的是儿童。它在一个更直观的用户界面中提供了儿童进行编程需要的所有工具，目的是让他们尽量少点麻烦。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB29.png)\n\n---\n## 轻量级/小型化\n### Lubuntu\nLubuntu 是一个基于 Ubuntu 的轻量级发行版，非常适合在笔记本电脑上使用。它使用的是小型化的 LXDE（轻量级 X11桌面环境 Lightweight X11 Desktop Environment)，附带拥有一些针对能效和速度方面进行过优化设计的轻量级应用程序。因为它对 RAM 和 系统资源需求不高，因此非常适合那些古老的计算机、网络以及移动设备。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB30.png)\n\n \n### Xubuntu\nXubuntu 是 Ubuntu 的一个衍生版本，使用 Xfce (XForms Common Environment) 桌面环境，因此它是优雅和轻量级的。它非常适合于笔记本和上网本，当然还有台式机。它比较轻巧，对系统资源的耗费不多，因此在比较古老的计算机上使用是比较理想的。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB31.png)\n\n \n### Puppy Linux\nPuppy Linux 是一个非常小巧的发行版，它可以整个放到 RAM 上面运行。因此 Puppy Linux 非常适合比较古老的计算机，即时计算机没有安装硬盘驱动器也是可以的! 它在删除恶意软件方面使用起来也比较轻松。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB32.png)\n\n### Manjaro Linux\nManjaro Linux 基于 Arch Linux， 它是一个运行快速，容易使用，轻量级的发行版。它的目标是 Arch Linux 的好处都能提供，此外对用户更加友好和易于使用，使得新手能轻松上手。它默认使用的是 Xfce 桌面，不过也可以选择其它的桌面环境。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB33.png)\n\n\n### Arch Linux\nArch Linux是一个为经验丰富的用户而设计的发行版。这个轻量级的最小化的发行版旨在使事情变得简单，更新时使用滚动发布模型。它具有一个定制的软件包管理器称为“Pacman”，这使得它易于编译、修改和共享软件包。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB34.png)\n\n \n### Tiny Core\nTiny Core Linux是一个非常轻便的，模块化的发行版，特别要指出的是其小尺寸（目前有15MB）。它基于Linux内核，并且使用了BusyBox和FLTK（快速、轻便的工具包）。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB35.png)\n\n \n### Bodhi \n这个基于Ubuntu的Bodhi Linux发行版具有轻量级而且漂亮的Enlightenment桌面。Bodhi尤其具有可定制性，可以使用主题和应用程序扩展开始的轻量级桌面环境。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB36.png)\n\n\n---\n## 视频游戏\n### Steam OS\nLinux上的游戏变得越来越受欢迎，虽然你可以在Ubuntu上轻松的安装Steam数字版下载服务，但你可能更喜欢一步到位安装Steam OS。这是一个以游戏为中心的发行版，针对游戏性能进行了优化，内置了专有的图形和声音驱动程序，以及Steam客户端。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB37.png)\n\nSteam OS是Steam 机器使用的发行版，所以如果你正安装自己的系统，你肯定想使用这个版本。\n\n\n### Ubuntu Game Pack\n能让你玩差不多6000种游戏，Ubuntu游戏包配有内置Steam，以及PlayOnLinux和Windows游戏模拟器。这个游戏包基于Ubuntu 14.04，如果你只想安装新操作系统并且想马上开始游戏，那么这是一个绝佳的选择！\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB38.png)\n\n\n### Play Linux\nPlay Linux基于Ubuntu 15.10，是一个优化的发行版，由于自动GPU安装程序工具可以使你的Linux当作游戏机来使用。这基本上简化了安装合适的显卡驱动程序的问题，满足你只玩游戏的需求。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB39.png)\n\n\n### SparkyLinux – Game Over Edition\n各种版本的SparkyLinux都是可选用的，但拥有游戏为中心的这个版本可能是最有用的。配备LXDE桌面和大量的预装游戏，而且你还会发现Steam，PlayOnLinux和预装的windows游戏模拟器。这是一个免费且又高端的巨大的游戏库！\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB40.png)\n\n---\n## 安全和恢复\n### Kali Linux\nKali Linux以前被称为BackTrack，是一个渗透测试发行版，被广泛应用于在线安全社区。这种基于Debian的Linux发行版可以轻松地执行数字取证任务。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB41.png)\n\n\n### Parted Magic\nParted Magic本质上是一个磁盘管理工具，作为硬盘分区和复制的主要工具，它还能轻松完成数据恢复和安全清理。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB042.png)\n \n### GParted\nGParted是一个用途单一的发行版，旨在使用图形界面对硬盘驱动器变的更加轻松。 众多发行版中的标准版本将被Linux用户熟知。这个版本是一个独立的专用操作系统，然而，它准备作为一张自启动光盘运行。你需要执行一些磁盘管理而不引导到您的计算机的操作系统么？那么就使用GParted吧。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB43.png)\n\n\n### TAILS\nTAILS是一个完全围绕隐私和安全概念的发行版。它是一个实时操作系统，您可以移植从DVD，USB棒或SD卡中，这样你就可以在任何的计算机上安全的使用，并使用完成后不会被行为追踪。为了最好的匿名性，所有的互联网连接都通过TOR（The Onion Router）路由，并且加密工具全程保护您的通信方法不会被窥视。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB44.png)\n\n\n---\n## 商业版本 \n### Red Hat Enterprise Linux\n红帽企业版Linux是Fedora的商业衍生产品，专为企业客户设计。 它提供诸多变体、插件以及认证可供管理员和应用程序使用。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB45.png)\n\n\n### SUSE Linux Enterprise\nSUSE Linux Enterprise桌面版专为企业使用而设计，它是可供企业安装使用的，这使其易于使用各种办公程序。 它具有足够的灵活性，可以在各种设备上运行，但对于极为关键的进程来说是足够可靠的。 同时还提供SUSE Linux Enterprise Server版本。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB46.png)\n\n\n---\n","source":"_posts/文章阅读/2016-11-07-Linux-发行版汇总.md","raw":"---\ntitle: Linux 发行版汇总\ncategories:\n  - 文章阅读\ntags:\n  - 最佳 Linux 发行版汇总\nabbrlink: 51445\ndate: 2016-11-07 22:36:49\n---\n\n# 前言\n### 本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\n\n---\n## Linux入门\n### Ubuntu\nUbuntu是一款基于Debian发行版，以Unity作为默认桌面环境的Linux操作系统。他是世界上最流行的发行版之一，每次发行，它都有提升。最新发行版为桌面、移动及其桌面移动混合版的优化。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB01.png)\n\n现在依然有Ubuntu移动平台，它专用于一些合作的智能手机及少数致力于Ubuntu触屏手持设备。较新的设备集成了汇集软件（Convergence software），使你可以通过无线HDMI连接器将你的智能手机转到PC上。\n\n \n### Kubuntu\nKubuntu是Ubuntu的衍生版，使用KDE而不是Unity作为默认桌面环境. 在此情况下，Kubuntu与Ubuntu大同小异，其发行时间也与Ubuntu保持一致。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB02.png)\n \n### Mint\nMint是优雅、现代Linux发行版，它易于使用且功能强大。它基于Ubuntu开发，可靠而安全，是最好用的管理软件之一。最近，它又成为了最为流行的Linux发行版之一，声称为Windows及Mac OS后最为流行的家用操作系统。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB03.png)\n\nMint有着丰富的桌面选项，默认为Cinnamon桌面, 你还可以使用MATE, KDE或Xfce.。Mint的Debian版也可用，定位为有经验的Linux用户。\n\n\n\n### Deepin\nDeepin 是一个基于 Ubuntu 的发行版，它带有时尚美观的深度桌面环境(Deepin Desktop Environment，DDE), 旨在吸引新的 Linux 用户。它的界面简单直观，系统设置面板的是所有发行版中最好看的一个。 DMusic, DPlayer 和 DTalk 是其专有的应用程序。\n\n有许多的基于 Ubuntu 的衍生版本都在视图用它们自己的方式来解决一些问题，而其中特别受关注的一个就是 Deepin。                \n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB04.png)\n\nDeepin 还具备易于使用的软件中心，远胜于其它具备类似功能的发行版。\n\n\n\n### PCLinuxOS\nPCLinuxOS 是专为普通 PC 用户设计的，它默认使用的是 KDE Plasma 桌面。这个发行版在安装驱动，获取办公软件，编辑照片，上网以及使用多媒体等操作上使用非常方便，还能快速创建快照备份。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB05.png)\n\n\n\n### Linux Lite\n基于 Ubuntu LTS 发行版, Linux Lite 是一个最小化的省空间型发行版, 它拥有一个干净简单的 Xfce 桌面，而且是 Windows 风格的。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB06.png)\n\nLinux Lite 的目标是将 Windows 用户引向 Linux。它对资源的节省意味这你可以在一台  CPU 只有 700Mhz 而且内存只有 512M 的 PC 上安装它。这就是我们所说的轻便（light）!\n\n \n### Zorin OS\nZorin OS 是专门为 Linux 新手设计的，便于人们从Windows 向 Linux 过渡。它拥有 Windows 用户比较熟悉的基于 Ubuntu 发行版的功能以及应用，也能让用户方便的使用他们仍然需要的 Windows 应用。Zorin OS 9 看起来很像 Windows 7，这样做只是单纯为了赢得一些从 Windows 到 Linux 的转化。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB07.png)\n\n\n---\n## 震撼的视觉\n### Elementary OS\n另外一个基于 Ubuntu 的发行版 Elementary OS ，自从其 Elementary OS Luna 版本发行依赖，已经拥有了属于它自己的不通表现。它拥有漂亮简介的默认应用，它们遵循这操作系统的美感诉求，例如电子邮件程序 Geary，网页浏览器 Midori, 日历程序 Maya, 电影播放器 Totem , 以及音乐播放器 Noise。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB08.png)\n\n\n### Apricity OS\n为了“最性感的 Linux 发行版”这个非正式的头衔而向 Elementary OS 发起挑战，就是 Apricity, 它采取了一种类似的方法。没有采用 Windows 式样的 Cinnamon 和 MATE 风格, Apricity 提供了一个令人惊叹的桌面换进，比起微软的那一套，它更能让人联想其 Android或者 iOS。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB09.png)\n\n---\n## 普通版\n### OpenSUSE\nOpenSUSE 发行版是 Linux 的一个普通发行版，由 OpenSUSE 项目构建，目标是在成为一个不错面向新手的发行版的同时，也能满足有经验的 Linux 用户的需求。OpenSUSE 附带有 YAST, 它是一个管理员程序，能对安装，包管理以及其它一些东西进行控制。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB10.png)\n\n \n### Fedora\nFedora 默认使用 GNOME 桌面环境，但是用户可以轻松的将其切换到 KDE， XFce， MATE 以及 Cinnamon。Fedora 的自定义变体, 被称作 Fedora 扩展，它们能满足用户的一些特殊需求。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB11.png)\n\n\n### Debian\nDebian 是一个比较老的 Linux 发行版，是跟着 GNOME 桌面环境一起出现的。不过，这个桌面环境也能用于 FreeBSD，并且对于其它内核的支持工作也在进行中， 比如Hurd。 Debian 以其预装的超过 37500 的程序包为荣，并且带有简单的功能使得其能轻松的获取到更多的包。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB12.png)\n \n### Korora\nKorora 最初基于 Gentoo Linux，并且投身于让 Linux 对新手来说使用起来更轻松，但同时能让专家使用起来感到实用。它在桌面环境方面由多种选择，包括 Cinnamon, GNOME, KDE, MATE 以及 Xfce 桌面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB13.png)\n\n \n### Slackware Linux\nSlackware 是专注于安全和简单得发行版, 旨在成为最像 Unix 的 Linux 发行版。它在服务器管理方面特别有用，因为它拥有 FTP， email 以及 web 服务器，能立即投入使用。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB14.png)\n\n \n### Mageia\nMageia起初是一个由社区驱动的，非营利的法国Mandriva Linux分支，它包括了所有主要的桌面环境，它主要使用KDE和GNOME作为其默认桌面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB15.png)\n\n \n### SparkyLinux\n\nSparkyLinux发行版是从Debian的“测试”分支演变而来的。主版本配备了定制版的轻量级的LXDE桌面，同时还可以使用其它一些定制桌面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB16.png)\n\n\n### Gentoo Linux\nGentoo Linux几乎可以满足你任何的需求。它的通用性和优异的性能正是它区别于其他发行版的。Gentoo Linux还配备了先进的软件包管理系统，称为Portage。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB17.png)\n\n \n### CentOS\nCentOS（社区企业操作系统）是一个由社区重建的Red Hat企业版Linux。它是专为那些想免费使用一个企业标准发行版的人而设计的。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB18.png)\n\n \n### PinGuy OS\nPinGuyOS很漂亮，从一开始我就想使用它。这个基于Ubuntu的发行版预装了所有常用的以及用于网络设置的最好软件，这使得它非常适合初学者。它具有一个修改过的GNOME用户界面。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB19.png)\n\n\n---\n## 多媒体创作 \n### Fedora设计套件\n如果要节省时间，向Fedora中安装一些艺术工具和程序的话，你只需要安装来自Fedora艺术设计团队的spin版本。它重点关注的是绘画和桌面出版，你可以找到其中预安装的 Inkscape和GIMP等工具，还有其它很多的工具。 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB20.png)\n\n \n### Ubuntu Studio\nUbuntu Studio于2007年首次发布，它可能是那些具有创意天分的Linux用户的默认选择。有了XFCE桌面环境和低内核延迟，一切都是面向媒体制作。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB21.png)\n \n### KXStudio\n这里列举的所有用于创作的发行版都提供了优秀的工具集，然而KXStudio却不同，它侧重于音频制作。当你沉浸在KDE桌面中时，你就拥有了一个性能相当出色的数字工作室。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB22.png)\n\n \n### ArtistX\nArtistX专门面向所有类型的艺术家，从音乐到图形设计。它基于Ubuntu，并且预装了所有最好的2D和3D图形设计、视频制作，和GNU / Linux音频制作软件。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB23.png)\n\n\n### Iro\n如果动画、3D建模、合成、数字绘画和图像编辑是您首选的多媒体技术，你就需要Iro。没有大量的工具库（例如，像Ubuntu Studio）满足每个人的需要，而是提供了一组专门的应用程序。它们被集成在精简的用户界面中，如果你有一个发行版，就可以安装并开始工作，一点也不麻烦。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB24.png)\n\n\n---\n## 教育\n### DouDou\nDouDou Linux是为小孩子设计的，其目的是教他们如何探索计算机并使用计算机学习。它提供了一些适合2-12岁孩子玩的游戏和教育节目，它是一个安全的环境，家长不必整天看着。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB25.png)\n\n \n### Edubuntu\nEdubuntu被开发成了一个（感谢Ubuntu给予的合作）尽可能方便教师设置的版本，并且可以供所有年龄的儿童使用。它预装了所有最好的免费教育软件。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB26.png)\n\n \n### Uberstudent\nUberstudent是专门为大专院校和高级中学的学生而设计的。它预装的软件可以使做作业和管理任务变得更加容易。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB27.png)\n\n\n---\n## 树莓派发行\n### Raspbian Jessie\n流行的Raspberry Pi默认的操作系统是Raspbian Jessie，由树莓派基金会内部生产，它基于Debian。这款ARM发行版配备了大量编程工具，如Scratch，旨在帮助新手学习编程。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB28.png)\n\n \n### Kano OS\n和Raspbian类似的操作系统是Kano OS，它也是基于Debian，但更多地是侧重编程，不过这次针对的是儿童。它在一个更直观的用户界面中提供了儿童进行编程需要的所有工具，目的是让他们尽量少点麻烦。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB29.png)\n\n---\n## 轻量级/小型化\n### Lubuntu\nLubuntu 是一个基于 Ubuntu 的轻量级发行版，非常适合在笔记本电脑上使用。它使用的是小型化的 LXDE（轻量级 X11桌面环境 Lightweight X11 Desktop Environment)，附带拥有一些针对能效和速度方面进行过优化设计的轻量级应用程序。因为它对 RAM 和 系统资源需求不高，因此非常适合那些古老的计算机、网络以及移动设备。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB30.png)\n\n \n### Xubuntu\nXubuntu 是 Ubuntu 的一个衍生版本，使用 Xfce (XForms Common Environment) 桌面环境，因此它是优雅和轻量级的。它非常适合于笔记本和上网本，当然还有台式机。它比较轻巧，对系统资源的耗费不多，因此在比较古老的计算机上使用是比较理想的。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB31.png)\n\n \n### Puppy Linux\nPuppy Linux 是一个非常小巧的发行版，它可以整个放到 RAM 上面运行。因此 Puppy Linux 非常适合比较古老的计算机，即时计算机没有安装硬盘驱动器也是可以的! 它在删除恶意软件方面使用起来也比较轻松。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB32.png)\n\n### Manjaro Linux\nManjaro Linux 基于 Arch Linux， 它是一个运行快速，容易使用，轻量级的发行版。它的目标是 Arch Linux 的好处都能提供，此外对用户更加友好和易于使用，使得新手能轻松上手。它默认使用的是 Xfce 桌面，不过也可以选择其它的桌面环境。\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB33.png)\n\n\n### Arch Linux\nArch Linux是一个为经验丰富的用户而设计的发行版。这个轻量级的最小化的发行版旨在使事情变得简单，更新时使用滚动发布模型。它具有一个定制的软件包管理器称为“Pacman”，这使得它易于编译、修改和共享软件包。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB34.png)\n\n \n### Tiny Core\nTiny Core Linux是一个非常轻便的，模块化的发行版，特别要指出的是其小尺寸（目前有15MB）。它基于Linux内核，并且使用了BusyBox和FLTK（快速、轻便的工具包）。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB35.png)\n\n \n### Bodhi \n这个基于Ubuntu的Bodhi Linux发行版具有轻量级而且漂亮的Enlightenment桌面。Bodhi尤其具有可定制性，可以使用主题和应用程序扩展开始的轻量级桌面环境。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB36.png)\n\n\n---\n## 视频游戏\n### Steam OS\nLinux上的游戏变得越来越受欢迎，虽然你可以在Ubuntu上轻松的安装Steam数字版下载服务，但你可能更喜欢一步到位安装Steam OS。这是一个以游戏为中心的发行版，针对游戏性能进行了优化，内置了专有的图形和声音驱动程序，以及Steam客户端。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB37.png)\n\nSteam OS是Steam 机器使用的发行版，所以如果你正安装自己的系统，你肯定想使用这个版本。\n\n\n### Ubuntu Game Pack\n能让你玩差不多6000种游戏，Ubuntu游戏包配有内置Steam，以及PlayOnLinux和Windows游戏模拟器。这个游戏包基于Ubuntu 14.04，如果你只想安装新操作系统并且想马上开始游戏，那么这是一个绝佳的选择！\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB38.png)\n\n\n### Play Linux\nPlay Linux基于Ubuntu 15.10，是一个优化的发行版，由于自动GPU安装程序工具可以使你的Linux当作游戏机来使用。这基本上简化了安装合适的显卡驱动程序的问题，满足你只玩游戏的需求。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB39.png)\n\n\n### SparkyLinux – Game Over Edition\n各种版本的SparkyLinux都是可选用的，但拥有游戏为中心的这个版本可能是最有用的。配备LXDE桌面和大量的预装游戏，而且你还会发现Steam，PlayOnLinux和预装的windows游戏模拟器。这是一个免费且又高端的巨大的游戏库！\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB40.png)\n\n---\n## 安全和恢复\n### Kali Linux\nKali Linux以前被称为BackTrack，是一个渗透测试发行版，被广泛应用于在线安全社区。这种基于Debian的Linux发行版可以轻松地执行数字取证任务。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB41.png)\n\n\n### Parted Magic\nParted Magic本质上是一个磁盘管理工具，作为硬盘分区和复制的主要工具，它还能轻松完成数据恢复和安全清理。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB042.png)\n \n### GParted\nGParted是一个用途单一的发行版，旨在使用图形界面对硬盘驱动器变的更加轻松。 众多发行版中的标准版本将被Linux用户熟知。这个版本是一个独立的专用操作系统，然而，它准备作为一张自启动光盘运行。你需要执行一些磁盘管理而不引导到您的计算机的操作系统么？那么就使用GParted吧。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB43.png)\n\n\n### TAILS\nTAILS是一个完全围绕隐私和安全概念的发行版。它是一个实时操作系统，您可以移植从DVD，USB棒或SD卡中，这样你就可以在任何的计算机上安全的使用，并使用完成后不会被行为追踪。为了最好的匿名性，所有的互联网连接都通过TOR（The Onion Router）路由，并且加密工具全程保护您的通信方法不会被窥视。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB44.png)\n\n\n---\n## 商业版本 \n### Red Hat Enterprise Linux\n红帽企业版Linux是Fedora的商业衍生产品，专为企业客户设计。 它提供诸多变体、插件以及认证可供管理员和应用程序使用。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB45.png)\n\n\n### SUSE Linux Enterprise\nSUSE Linux Enterprise桌面版专为企业使用而设计，它是可供企业安装使用的，这使其易于使用各种办公程序。 它具有足够的灵活性，可以在各种设备上运行，但对于极为关键的进程来说是足够可靠的。 同时还提供SUSE Linux Enterprise Server版本。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB46.png)\n\n\n---\n","slug":"文章阅读-2016-11-07-Linux-发行版汇总","published":1,"updated":"2016-11-21T02:17:08.951Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjm2001dd8pk7kee97yx","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><h3 id=\"本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\"><a href=\"#本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\" class=\"headerlink\" title=\"本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\"></a>本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。</h3><hr>\n<h2 id=\"Linux入门\"><a href=\"#Linux入门\" class=\"headerlink\" title=\"Linux入门\"></a>Linux入门</h2><h3 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h3><p>Ubuntu是一款基于Debian发行版，以Unity作为默认桌面环境的Linux操作系统。他是世界上最流行的发行版之一，每次发行，它都有提升。最新发行版为桌面、移动及其桌面移动混合版的优化。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB01.png\" alt=\"\"></p>\n<p>现在依然有Ubuntu移动平台，它专用于一些合作的智能手机及少数致力于Ubuntu触屏手持设备。较新的设备集成了汇集软件（Convergence software），使你可以通过无线HDMI连接器将你的智能手机转到PC上。</p>\n<h3 id=\"Kubuntu\"><a href=\"#Kubuntu\" class=\"headerlink\" title=\"Kubuntu\"></a>Kubuntu</h3><p>Kubuntu是Ubuntu的衍生版，使用KDE而不是Unity作为默认桌面环境. 在此情况下，Kubuntu与Ubuntu大同小异，其发行时间也与Ubuntu保持一致。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB02.png\" alt=\"\"></p>\n<h3 id=\"Mint\"><a href=\"#Mint\" class=\"headerlink\" title=\"Mint\"></a>Mint</h3><p>Mint是优雅、现代Linux发行版，它易于使用且功能强大。它基于Ubuntu开发，可靠而安全，是最好用的管理软件之一。最近，它又成为了最为流行的Linux发行版之一，声称为Windows及Mac OS后最为流行的家用操作系统。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB03.png\" alt=\"\"></p>\n<p>Mint有着丰富的桌面选项，默认为Cinnamon桌面, 你还可以使用MATE, KDE或Xfce.。Mint的Debian版也可用，定位为有经验的Linux用户。</p>\n<h3 id=\"Deepin\"><a href=\"#Deepin\" class=\"headerlink\" title=\"Deepin\"></a>Deepin</h3><p>Deepin 是一个基于 Ubuntu 的发行版，它带有时尚美观的深度桌面环境(Deepin Desktop Environment，DDE), 旨在吸引新的 Linux 用户。它的界面简单直观，系统设置面板的是所有发行版中最好看的一个。 DMusic, DPlayer 和 DTalk 是其专有的应用程序。</p>\n<p>有许多的基于 Ubuntu 的衍生版本都在视图用它们自己的方式来解决一些问题，而其中特别受关注的一个就是 Deepin。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB04.png\" alt=\"\"></p>\n<p>Deepin 还具备易于使用的软件中心，远胜于其它具备类似功能的发行版。</p>\n<h3 id=\"PCLinuxOS\"><a href=\"#PCLinuxOS\" class=\"headerlink\" title=\"PCLinuxOS\"></a>PCLinuxOS</h3><p>PCLinuxOS 是专为普通 PC 用户设计的，它默认使用的是 KDE Plasma 桌面。这个发行版在安装驱动，获取办公软件，编辑照片，上网以及使用多媒体等操作上使用非常方便，还能快速创建快照备份。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB05.png\" alt=\"\"></p>\n<h3 id=\"Linux-Lite\"><a href=\"#Linux-Lite\" class=\"headerlink\" title=\"Linux Lite\"></a>Linux Lite</h3><p>基于 Ubuntu LTS 发行版, Linux Lite 是一个最小化的省空间型发行版, 它拥有一个干净简单的 Xfce 桌面，而且是 Windows 风格的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB06.png\" alt=\"\"></p>\n<p>Linux Lite 的目标是将 Windows 用户引向 Linux。它对资源的节省意味这你可以在一台  CPU 只有 700Mhz 而且内存只有 512M 的 PC 上安装它。这就是我们所说的轻便（light）!</p>\n<h3 id=\"Zorin-OS\"><a href=\"#Zorin-OS\" class=\"headerlink\" title=\"Zorin OS\"></a>Zorin OS</h3><p>Zorin OS 是专门为 Linux 新手设计的，便于人们从Windows 向 Linux 过渡。它拥有 Windows 用户比较熟悉的基于 Ubuntu 发行版的功能以及应用，也能让用户方便的使用他们仍然需要的 Windows 应用。Zorin OS 9 看起来很像 Windows 7，这样做只是单纯为了赢得一些从 Windows 到 Linux 的转化。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB07.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"震撼的视觉\"><a href=\"#震撼的视觉\" class=\"headerlink\" title=\"震撼的视觉\"></a>震撼的视觉</h2><h3 id=\"Elementary-OS\"><a href=\"#Elementary-OS\" class=\"headerlink\" title=\"Elementary OS\"></a>Elementary OS</h3><p>另外一个基于 Ubuntu 的发行版 Elementary OS ，自从其 Elementary OS Luna 版本发行依赖，已经拥有了属于它自己的不通表现。它拥有漂亮简介的默认应用，它们遵循这操作系统的美感诉求，例如电子邮件程序 Geary，网页浏览器 Midori, 日历程序 Maya, 电影播放器 Totem , 以及音乐播放器 Noise。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB08.png\" alt=\"\"></p>\n<h3 id=\"Apricity-OS\"><a href=\"#Apricity-OS\" class=\"headerlink\" title=\"Apricity OS\"></a>Apricity OS</h3><p>为了“最性感的 Linux 发行版”这个非正式的头衔而向 Elementary OS 发起挑战，就是 Apricity, 它采取了一种类似的方法。没有采用 Windows 式样的 Cinnamon 和 MATE 风格, Apricity 提供了一个令人惊叹的桌面换进，比起微软的那一套，它更能让人联想其 Android或者 iOS。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB09.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"普通版\"><a href=\"#普通版\" class=\"headerlink\" title=\"普通版\"></a>普通版</h2><h3 id=\"OpenSUSE\"><a href=\"#OpenSUSE\" class=\"headerlink\" title=\"OpenSUSE\"></a>OpenSUSE</h3><p>OpenSUSE 发行版是 Linux 的一个普通发行版，由 OpenSUSE 项目构建，目标是在成为一个不错面向新手的发行版的同时，也能满足有经验的 Linux 用户的需求。OpenSUSE 附带有 YAST, 它是一个管理员程序，能对安装，包管理以及其它一些东西进行控制。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB10.png\" alt=\"\"></p>\n<h3 id=\"Fedora\"><a href=\"#Fedora\" class=\"headerlink\" title=\"Fedora\"></a>Fedora</h3><p>Fedora 默认使用 GNOME 桌面环境，但是用户可以轻松的将其切换到 KDE， XFce， MATE 以及 Cinnamon。Fedora 的自定义变体, 被称作 Fedora 扩展，它们能满足用户的一些特殊需求。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB11.png\" alt=\"\"></p>\n<h3 id=\"Debian\"><a href=\"#Debian\" class=\"headerlink\" title=\"Debian\"></a>Debian</h3><p>Debian 是一个比较老的 Linux 发行版，是跟着 GNOME 桌面环境一起出现的。不过，这个桌面环境也能用于 FreeBSD，并且对于其它内核的支持工作也在进行中， 比如Hurd。 Debian 以其预装的超过 37500 的程序包为荣，并且带有简单的功能使得其能轻松的获取到更多的包。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB12.png\" alt=\"\"></p>\n<h3 id=\"Korora\"><a href=\"#Korora\" class=\"headerlink\" title=\"Korora\"></a>Korora</h3><p>Korora 最初基于 Gentoo Linux，并且投身于让 Linux 对新手来说使用起来更轻松，但同时能让专家使用起来感到实用。它在桌面环境方面由多种选择，包括 Cinnamon, GNOME, KDE, MATE 以及 Xfce 桌面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB13.png\" alt=\"\"></p>\n<h3 id=\"Slackware-Linux\"><a href=\"#Slackware-Linux\" class=\"headerlink\" title=\"Slackware Linux\"></a>Slackware Linux</h3><p>Slackware 是专注于安全和简单得发行版, 旨在成为最像 Unix 的 Linux 发行版。它在服务器管理方面特别有用，因为它拥有 FTP， email 以及 web 服务器，能立即投入使用。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB14.png\" alt=\"\"></p>\n<h3 id=\"Mageia\"><a href=\"#Mageia\" class=\"headerlink\" title=\"Mageia\"></a>Mageia</h3><p>Mageia起初是一个由社区驱动的，非营利的法国Mandriva Linux分支，它包括了所有主要的桌面环境，它主要使用KDE和GNOME作为其默认桌面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB15.png\" alt=\"\"></p>\n<h3 id=\"SparkyLinux\"><a href=\"#SparkyLinux\" class=\"headerlink\" title=\"SparkyLinux\"></a>SparkyLinux</h3><p>SparkyLinux发行版是从Debian的“测试”分支演变而来的。主版本配备了定制版的轻量级的LXDE桌面，同时还可以使用其它一些定制桌面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB16.png\" alt=\"\"></p>\n<h3 id=\"Gentoo-Linux\"><a href=\"#Gentoo-Linux\" class=\"headerlink\" title=\"Gentoo Linux\"></a>Gentoo Linux</h3><p>Gentoo Linux几乎可以满足你任何的需求。它的通用性和优异的性能正是它区别于其他发行版的。Gentoo Linux还配备了先进的软件包管理系统，称为Portage。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB17.png\" alt=\"\"></p>\n<h3 id=\"CentOS\"><a href=\"#CentOS\" class=\"headerlink\" title=\"CentOS\"></a>CentOS</h3><p>CentOS（社区企业操作系统）是一个由社区重建的Red Hat企业版Linux。它是专为那些想免费使用一个企业标准发行版的人而设计的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB18.png\" alt=\"\"></p>\n<h3 id=\"PinGuy-OS\"><a href=\"#PinGuy-OS\" class=\"headerlink\" title=\"PinGuy OS\"></a>PinGuy OS</h3><p>PinGuyOS很漂亮，从一开始我就想使用它。这个基于Ubuntu的发行版预装了所有常用的以及用于网络设置的最好软件，这使得它非常适合初学者。它具有一个修改过的GNOME用户界面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB19.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"多媒体创作\"><a href=\"#多媒体创作\" class=\"headerlink\" title=\"多媒体创作\"></a>多媒体创作</h2><h3 id=\"Fedora设计套件\"><a href=\"#Fedora设计套件\" class=\"headerlink\" title=\"Fedora设计套件\"></a>Fedora设计套件</h3><p>如果要节省时间，向Fedora中安装一些艺术工具和程序的话，你只需要安装来自Fedora艺术设计团队的spin版本。它重点关注的是绘画和桌面出版，你可以找到其中预安装的 Inkscape和GIMP等工具，还有其它很多的工具。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB20.png\" alt=\"\"></p>\n<h3 id=\"Ubuntu-Studio\"><a href=\"#Ubuntu-Studio\" class=\"headerlink\" title=\"Ubuntu Studio\"></a>Ubuntu Studio</h3><p>Ubuntu Studio于2007年首次发布，它可能是那些具有创意天分的Linux用户的默认选择。有了XFCE桌面环境和低内核延迟，一切都是面向媒体制作。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB21.png\" alt=\"\"></p>\n<h3 id=\"KXStudio\"><a href=\"#KXStudio\" class=\"headerlink\" title=\"KXStudio\"></a>KXStudio</h3><p>这里列举的所有用于创作的发行版都提供了优秀的工具集，然而KXStudio却不同，它侧重于音频制作。当你沉浸在KDE桌面中时，你就拥有了一个性能相当出色的数字工作室。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB22.png\" alt=\"\"></p>\n<h3 id=\"ArtistX\"><a href=\"#ArtistX\" class=\"headerlink\" title=\"ArtistX\"></a>ArtistX</h3><p>ArtistX专门面向所有类型的艺术家，从音乐到图形设计。它基于Ubuntu，并且预装了所有最好的2D和3D图形设计、视频制作，和GNU / Linux音频制作软件。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB23.png\" alt=\"\"></p>\n<h3 id=\"Iro\"><a href=\"#Iro\" class=\"headerlink\" title=\"Iro\"></a>Iro</h3><p>如果动画、3D建模、合成、数字绘画和图像编辑是您首选的多媒体技术，你就需要Iro。没有大量的工具库（例如，像Ubuntu Studio）满足每个人的需要，而是提供了一组专门的应用程序。它们被集成在精简的用户界面中，如果你有一个发行版，就可以安装并开始工作，一点也不麻烦。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB24.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"教育\"><a href=\"#教育\" class=\"headerlink\" title=\"教育\"></a>教育</h2><h3 id=\"DouDou\"><a href=\"#DouDou\" class=\"headerlink\" title=\"DouDou\"></a>DouDou</h3><p>DouDou Linux是为小孩子设计的，其目的是教他们如何探索计算机并使用计算机学习。它提供了一些适合2-12岁孩子玩的游戏和教育节目，它是一个安全的环境，家长不必整天看着。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB25.png\" alt=\"\"></p>\n<h3 id=\"Edubuntu\"><a href=\"#Edubuntu\" class=\"headerlink\" title=\"Edubuntu\"></a>Edubuntu</h3><p>Edubuntu被开发成了一个（感谢Ubuntu给予的合作）尽可能方便教师设置的版本，并且可以供所有年龄的儿童使用。它预装了所有最好的免费教育软件。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB26.png\" alt=\"\"></p>\n<h3 id=\"Uberstudent\"><a href=\"#Uberstudent\" class=\"headerlink\" title=\"Uberstudent\"></a>Uberstudent</h3><p>Uberstudent是专门为大专院校和高级中学的学生而设计的。它预装的软件可以使做作业和管理任务变得更加容易。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB27.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"树莓派发行\"><a href=\"#树莓派发行\" class=\"headerlink\" title=\"树莓派发行\"></a>树莓派发行</h2><h3 id=\"Raspbian-Jessie\"><a href=\"#Raspbian-Jessie\" class=\"headerlink\" title=\"Raspbian Jessie\"></a>Raspbian Jessie</h3><p>流行的Raspberry Pi默认的操作系统是Raspbian Jessie，由树莓派基金会内部生产，它基于Debian。这款ARM发行版配备了大量编程工具，如Scratch，旨在帮助新手学习编程。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB28.png\" alt=\"\"></p>\n<h3 id=\"Kano-OS\"><a href=\"#Kano-OS\" class=\"headerlink\" title=\"Kano OS\"></a>Kano OS</h3><p>和Raspbian类似的操作系统是Kano OS，它也是基于Debian，但更多地是侧重编程，不过这次针对的是儿童。它在一个更直观的用户界面中提供了儿童进行编程需要的所有工具，目的是让他们尽量少点麻烦。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB29.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"轻量级-小型化\"><a href=\"#轻量级-小型化\" class=\"headerlink\" title=\"轻量级/小型化\"></a>轻量级/小型化</h2><h3 id=\"Lubuntu\"><a href=\"#Lubuntu\" class=\"headerlink\" title=\"Lubuntu\"></a>Lubuntu</h3><p>Lubuntu 是一个基于 Ubuntu 的轻量级发行版，非常适合在笔记本电脑上使用。它使用的是小型化的 LXDE（轻量级 X11桌面环境 Lightweight X11 Desktop Environment)，附带拥有一些针对能效和速度方面进行过优化设计的轻量级应用程序。因为它对 RAM 和 系统资源需求不高，因此非常适合那些古老的计算机、网络以及移动设备。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB30.png\" alt=\"\"></p>\n<h3 id=\"Xubuntu\"><a href=\"#Xubuntu\" class=\"headerlink\" title=\"Xubuntu\"></a>Xubuntu</h3><p>Xubuntu 是 Ubuntu 的一个衍生版本，使用 Xfce (XForms Common Environment) 桌面环境，因此它是优雅和轻量级的。它非常适合于笔记本和上网本，当然还有台式机。它比较轻巧，对系统资源的耗费不多，因此在比较古老的计算机上使用是比较理想的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB31.png\" alt=\"\"></p>\n<h3 id=\"Puppy-Linux\"><a href=\"#Puppy-Linux\" class=\"headerlink\" title=\"Puppy Linux\"></a>Puppy Linux</h3><p>Puppy Linux 是一个非常小巧的发行版，它可以整个放到 RAM 上面运行。因此 Puppy Linux 非常适合比较古老的计算机，即时计算机没有安装硬盘驱动器也是可以的! 它在删除恶意软件方面使用起来也比较轻松。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB32.png\" alt=\"\"></p>\n<h3 id=\"Manjaro-Linux\"><a href=\"#Manjaro-Linux\" class=\"headerlink\" title=\"Manjaro Linux\"></a>Manjaro Linux</h3><p>Manjaro Linux 基于 Arch Linux， 它是一个运行快速，容易使用，轻量级的发行版。它的目标是 Arch Linux 的好处都能提供，此外对用户更加友好和易于使用，使得新手能轻松上手。它默认使用的是 Xfce 桌面，不过也可以选择其它的桌面环境。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB33.png\" alt=\"\"></p>\n<h3 id=\"Arch-Linux\"><a href=\"#Arch-Linux\" class=\"headerlink\" title=\"Arch Linux\"></a>Arch Linux</h3><p>Arch Linux是一个为经验丰富的用户而设计的发行版。这个轻量级的最小化的发行版旨在使事情变得简单，更新时使用滚动发布模型。它具有一个定制的软件包管理器称为“Pacman”，这使得它易于编译、修改和共享软件包。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB34.png\" alt=\"\"></p>\n<h3 id=\"Tiny-Core\"><a href=\"#Tiny-Core\" class=\"headerlink\" title=\"Tiny Core\"></a>Tiny Core</h3><p>Tiny Core Linux是一个非常轻便的，模块化的发行版，特别要指出的是其小尺寸（目前有15MB）。它基于Linux内核，并且使用了BusyBox和FLTK（快速、轻便的工具包）。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB35.png\" alt=\"\"></p>\n<h3 id=\"Bodhi\"><a href=\"#Bodhi\" class=\"headerlink\" title=\"Bodhi\"></a>Bodhi</h3><p>这个基于Ubuntu的Bodhi Linux发行版具有轻量级而且漂亮的Enlightenment桌面。Bodhi尤其具有可定制性，可以使用主题和应用程序扩展开始的轻量级桌面环境。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB36.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"视频游戏\"><a href=\"#视频游戏\" class=\"headerlink\" title=\"视频游戏\"></a>视频游戏</h2><h3 id=\"Steam-OS\"><a href=\"#Steam-OS\" class=\"headerlink\" title=\"Steam OS\"></a>Steam OS</h3><p>Linux上的游戏变得越来越受欢迎，虽然你可以在Ubuntu上轻松的安装Steam数字版下载服务，但你可能更喜欢一步到位安装Steam OS。这是一个以游戏为中心的发行版，针对游戏性能进行了优化，内置了专有的图形和声音驱动程序，以及Steam客户端。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB37.png\" alt=\"\"></p>\n<p>Steam OS是Steam 机器使用的发行版，所以如果你正安装自己的系统，你肯定想使用这个版本。</p>\n<h3 id=\"Ubuntu-Game-Pack\"><a href=\"#Ubuntu-Game-Pack\" class=\"headerlink\" title=\"Ubuntu Game Pack\"></a>Ubuntu Game Pack</h3><p>能让你玩差不多6000种游戏，Ubuntu游戏包配有内置Steam，以及PlayOnLinux和Windows游戏模拟器。这个游戏包基于Ubuntu 14.04，如果你只想安装新操作系统并且想马上开始游戏，那么这是一个绝佳的选择！<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB38.png\" alt=\"\"></p>\n<h3 id=\"Play-Linux\"><a href=\"#Play-Linux\" class=\"headerlink\" title=\"Play Linux\"></a>Play Linux</h3><p>Play Linux基于Ubuntu 15.10，是一个优化的发行版，由于自动GPU安装程序工具可以使你的Linux当作游戏机来使用。这基本上简化了安装合适的显卡驱动程序的问题，满足你只玩游戏的需求。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB39.png\" alt=\"\"></p>\n<h3 id=\"SparkyLinux-–-Game-Over-Edition\"><a href=\"#SparkyLinux-–-Game-Over-Edition\" class=\"headerlink\" title=\"SparkyLinux – Game Over Edition\"></a>SparkyLinux – Game Over Edition</h3><p>各种版本的SparkyLinux都是可选用的，但拥有游戏为中心的这个版本可能是最有用的。配备LXDE桌面和大量的预装游戏，而且你还会发现Steam，PlayOnLinux和预装的windows游戏模拟器。这是一个免费且又高端的巨大的游戏库！<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB40.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"安全和恢复\"><a href=\"#安全和恢复\" class=\"headerlink\" title=\"安全和恢复\"></a>安全和恢复</h2><h3 id=\"Kali-Linux\"><a href=\"#Kali-Linux\" class=\"headerlink\" title=\"Kali Linux\"></a>Kali Linux</h3><p>Kali Linux以前被称为BackTrack，是一个渗透测试发行版，被广泛应用于在线安全社区。这种基于Debian的Linux发行版可以轻松地执行数字取证任务。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB41.png\" alt=\"\"></p>\n<h3 id=\"Parted-Magic\"><a href=\"#Parted-Magic\" class=\"headerlink\" title=\"Parted Magic\"></a>Parted Magic</h3><p>Parted Magic本质上是一个磁盘管理工具，作为硬盘分区和复制的主要工具，它还能轻松完成数据恢复和安全清理。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB042.png\" alt=\"\"></p>\n<h3 id=\"GParted\"><a href=\"#GParted\" class=\"headerlink\" title=\"GParted\"></a>GParted</h3><p>GParted是一个用途单一的发行版，旨在使用图形界面对硬盘驱动器变的更加轻松。 众多发行版中的标准版本将被Linux用户熟知。这个版本是一个独立的专用操作系统，然而，它准备作为一张自启动光盘运行。你需要执行一些磁盘管理而不引导到您的计算机的操作系统么？那么就使用GParted吧。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB43.png\" alt=\"\"></p>\n<h3 id=\"TAILS\"><a href=\"#TAILS\" class=\"headerlink\" title=\"TAILS\"></a>TAILS</h3><p>TAILS是一个完全围绕隐私和安全概念的发行版。它是一个实时操作系统，您可以移植从DVD，USB棒或SD卡中，这样你就可以在任何的计算机上安全的使用，并使用完成后不会被行为追踪。为了最好的匿名性，所有的互联网连接都通过TOR（The Onion Router）路由，并且加密工具全程保护您的通信方法不会被窥视。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB44.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"商业版本\"><a href=\"#商业版本\" class=\"headerlink\" title=\"商业版本\"></a>商业版本</h2><h3 id=\"Red-Hat-Enterprise-Linux\"><a href=\"#Red-Hat-Enterprise-Linux\" class=\"headerlink\" title=\"Red Hat Enterprise Linux\"></a>Red Hat Enterprise Linux</h3><p>红帽企业版Linux是Fedora的商业衍生产品，专为企业客户设计。 它提供诸多变体、插件以及认证可供管理员和应用程序使用。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB45.png\" alt=\"\"></p>\n<h3 id=\"SUSE-Linux-Enterprise\"><a href=\"#SUSE-Linux-Enterprise\" class=\"headerlink\" title=\"SUSE Linux Enterprise\"></a>SUSE Linux Enterprise</h3><p>SUSE Linux Enterprise桌面版专为企业使用而设计，它是可供企业安装使用的，这使其易于使用各种办公程序。 它具有足够的灵活性，可以在各种设备上运行，但对于极为关键的进程来说是足够可靠的。 同时还提供SUSE Linux Enterprise Server版本。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB46.png\" alt=\"\"></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><h3 id=\"本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\"><a href=\"#本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\" class=\"headerlink\" title=\"本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。\"></a>本文是在开源中国看到的，觉得还不错，说的很详细，特地摘录下来。</h3><hr>\n<h2 id=\"Linux入门\"><a href=\"#Linux入门\" class=\"headerlink\" title=\"Linux入门\"></a>Linux入门</h2><h3 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h3><p>Ubuntu是一款基于Debian发行版，以Unity作为默认桌面环境的Linux操作系统。他是世界上最流行的发行版之一，每次发行，它都有提升。最新发行版为桌面、移动及其桌面移动混合版的优化。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB01.png\" alt=\"\"></p>\n<p>现在依然有Ubuntu移动平台，它专用于一些合作的智能手机及少数致力于Ubuntu触屏手持设备。较新的设备集成了汇集软件（Convergence software），使你可以通过无线HDMI连接器将你的智能手机转到PC上。</p>\n<h3 id=\"Kubuntu\"><a href=\"#Kubuntu\" class=\"headerlink\" title=\"Kubuntu\"></a>Kubuntu</h3><p>Kubuntu是Ubuntu的衍生版，使用KDE而不是Unity作为默认桌面环境. 在此情况下，Kubuntu与Ubuntu大同小异，其发行时间也与Ubuntu保持一致。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB02.png\" alt=\"\"></p>\n<h3 id=\"Mint\"><a href=\"#Mint\" class=\"headerlink\" title=\"Mint\"></a>Mint</h3><p>Mint是优雅、现代Linux发行版，它易于使用且功能强大。它基于Ubuntu开发，可靠而安全，是最好用的管理软件之一。最近，它又成为了最为流行的Linux发行版之一，声称为Windows及Mac OS后最为流行的家用操作系统。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB03.png\" alt=\"\"></p>\n<p>Mint有着丰富的桌面选项，默认为Cinnamon桌面, 你还可以使用MATE, KDE或Xfce.。Mint的Debian版也可用，定位为有经验的Linux用户。</p>\n<h3 id=\"Deepin\"><a href=\"#Deepin\" class=\"headerlink\" title=\"Deepin\"></a>Deepin</h3><p>Deepin 是一个基于 Ubuntu 的发行版，它带有时尚美观的深度桌面环境(Deepin Desktop Environment，DDE), 旨在吸引新的 Linux 用户。它的界面简单直观，系统设置面板的是所有发行版中最好看的一个。 DMusic, DPlayer 和 DTalk 是其专有的应用程序。</p>\n<p>有许多的基于 Ubuntu 的衍生版本都在视图用它们自己的方式来解决一些问题，而其中特别受关注的一个就是 Deepin。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB04.png\" alt=\"\"></p>\n<p>Deepin 还具备易于使用的软件中心，远胜于其它具备类似功能的发行版。</p>\n<h3 id=\"PCLinuxOS\"><a href=\"#PCLinuxOS\" class=\"headerlink\" title=\"PCLinuxOS\"></a>PCLinuxOS</h3><p>PCLinuxOS 是专为普通 PC 用户设计的，它默认使用的是 KDE Plasma 桌面。这个发行版在安装驱动，获取办公软件，编辑照片，上网以及使用多媒体等操作上使用非常方便，还能快速创建快照备份。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB05.png\" alt=\"\"></p>\n<h3 id=\"Linux-Lite\"><a href=\"#Linux-Lite\" class=\"headerlink\" title=\"Linux Lite\"></a>Linux Lite</h3><p>基于 Ubuntu LTS 发行版, Linux Lite 是一个最小化的省空间型发行版, 它拥有一个干净简单的 Xfce 桌面，而且是 Windows 风格的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB06.png\" alt=\"\"></p>\n<p>Linux Lite 的目标是将 Windows 用户引向 Linux。它对资源的节省意味这你可以在一台  CPU 只有 700Mhz 而且内存只有 512M 的 PC 上安装它。这就是我们所说的轻便（light）!</p>\n<h3 id=\"Zorin-OS\"><a href=\"#Zorin-OS\" class=\"headerlink\" title=\"Zorin OS\"></a>Zorin OS</h3><p>Zorin OS 是专门为 Linux 新手设计的，便于人们从Windows 向 Linux 过渡。它拥有 Windows 用户比较熟悉的基于 Ubuntu 发行版的功能以及应用，也能让用户方便的使用他们仍然需要的 Windows 应用。Zorin OS 9 看起来很像 Windows 7，这样做只是单纯为了赢得一些从 Windows 到 Linux 的转化。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB07.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"震撼的视觉\"><a href=\"#震撼的视觉\" class=\"headerlink\" title=\"震撼的视觉\"></a>震撼的视觉</h2><h3 id=\"Elementary-OS\"><a href=\"#Elementary-OS\" class=\"headerlink\" title=\"Elementary OS\"></a>Elementary OS</h3><p>另外一个基于 Ubuntu 的发行版 Elementary OS ，自从其 Elementary OS Luna 版本发行依赖，已经拥有了属于它自己的不通表现。它拥有漂亮简介的默认应用，它们遵循这操作系统的美感诉求，例如电子邮件程序 Geary，网页浏览器 Midori, 日历程序 Maya, 电影播放器 Totem , 以及音乐播放器 Noise。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB08.png\" alt=\"\"></p>\n<h3 id=\"Apricity-OS\"><a href=\"#Apricity-OS\" class=\"headerlink\" title=\"Apricity OS\"></a>Apricity OS</h3><p>为了“最性感的 Linux 发行版”这个非正式的头衔而向 Elementary OS 发起挑战，就是 Apricity, 它采取了一种类似的方法。没有采用 Windows 式样的 Cinnamon 和 MATE 风格, Apricity 提供了一个令人惊叹的桌面换进，比起微软的那一套，它更能让人联想其 Android或者 iOS。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB09.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"普通版\"><a href=\"#普通版\" class=\"headerlink\" title=\"普通版\"></a>普通版</h2><h3 id=\"OpenSUSE\"><a href=\"#OpenSUSE\" class=\"headerlink\" title=\"OpenSUSE\"></a>OpenSUSE</h3><p>OpenSUSE 发行版是 Linux 的一个普通发行版，由 OpenSUSE 项目构建，目标是在成为一个不错面向新手的发行版的同时，也能满足有经验的 Linux 用户的需求。OpenSUSE 附带有 YAST, 它是一个管理员程序，能对安装，包管理以及其它一些东西进行控制。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB10.png\" alt=\"\"></p>\n<h3 id=\"Fedora\"><a href=\"#Fedora\" class=\"headerlink\" title=\"Fedora\"></a>Fedora</h3><p>Fedora 默认使用 GNOME 桌面环境，但是用户可以轻松的将其切换到 KDE， XFce， MATE 以及 Cinnamon。Fedora 的自定义变体, 被称作 Fedora 扩展，它们能满足用户的一些特殊需求。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB11.png\" alt=\"\"></p>\n<h3 id=\"Debian\"><a href=\"#Debian\" class=\"headerlink\" title=\"Debian\"></a>Debian</h3><p>Debian 是一个比较老的 Linux 发行版，是跟着 GNOME 桌面环境一起出现的。不过，这个桌面环境也能用于 FreeBSD，并且对于其它内核的支持工作也在进行中， 比如Hurd。 Debian 以其预装的超过 37500 的程序包为荣，并且带有简单的功能使得其能轻松的获取到更多的包。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB12.png\" alt=\"\"></p>\n<h3 id=\"Korora\"><a href=\"#Korora\" class=\"headerlink\" title=\"Korora\"></a>Korora</h3><p>Korora 最初基于 Gentoo Linux，并且投身于让 Linux 对新手来说使用起来更轻松，但同时能让专家使用起来感到实用。它在桌面环境方面由多种选择，包括 Cinnamon, GNOME, KDE, MATE 以及 Xfce 桌面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB13.png\" alt=\"\"></p>\n<h3 id=\"Slackware-Linux\"><a href=\"#Slackware-Linux\" class=\"headerlink\" title=\"Slackware Linux\"></a>Slackware Linux</h3><p>Slackware 是专注于安全和简单得发行版, 旨在成为最像 Unix 的 Linux 发行版。它在服务器管理方面特别有用，因为它拥有 FTP， email 以及 web 服务器，能立即投入使用。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB14.png\" alt=\"\"></p>\n<h3 id=\"Mageia\"><a href=\"#Mageia\" class=\"headerlink\" title=\"Mageia\"></a>Mageia</h3><p>Mageia起初是一个由社区驱动的，非营利的法国Mandriva Linux分支，它包括了所有主要的桌面环境，它主要使用KDE和GNOME作为其默认桌面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB15.png\" alt=\"\"></p>\n<h3 id=\"SparkyLinux\"><a href=\"#SparkyLinux\" class=\"headerlink\" title=\"SparkyLinux\"></a>SparkyLinux</h3><p>SparkyLinux发行版是从Debian的“测试”分支演变而来的。主版本配备了定制版的轻量级的LXDE桌面，同时还可以使用其它一些定制桌面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB16.png\" alt=\"\"></p>\n<h3 id=\"Gentoo-Linux\"><a href=\"#Gentoo-Linux\" class=\"headerlink\" title=\"Gentoo Linux\"></a>Gentoo Linux</h3><p>Gentoo Linux几乎可以满足你任何的需求。它的通用性和优异的性能正是它区别于其他发行版的。Gentoo Linux还配备了先进的软件包管理系统，称为Portage。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB17.png\" alt=\"\"></p>\n<h3 id=\"CentOS\"><a href=\"#CentOS\" class=\"headerlink\" title=\"CentOS\"></a>CentOS</h3><p>CentOS（社区企业操作系统）是一个由社区重建的Red Hat企业版Linux。它是专为那些想免费使用一个企业标准发行版的人而设计的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB18.png\" alt=\"\"></p>\n<h3 id=\"PinGuy-OS\"><a href=\"#PinGuy-OS\" class=\"headerlink\" title=\"PinGuy OS\"></a>PinGuy OS</h3><p>PinGuyOS很漂亮，从一开始我就想使用它。这个基于Ubuntu的发行版预装了所有常用的以及用于网络设置的最好软件，这使得它非常适合初学者。它具有一个修改过的GNOME用户界面。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB19.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"多媒体创作\"><a href=\"#多媒体创作\" class=\"headerlink\" title=\"多媒体创作\"></a>多媒体创作</h2><h3 id=\"Fedora设计套件\"><a href=\"#Fedora设计套件\" class=\"headerlink\" title=\"Fedora设计套件\"></a>Fedora设计套件</h3><p>如果要节省时间，向Fedora中安装一些艺术工具和程序的话，你只需要安装来自Fedora艺术设计团队的spin版本。它重点关注的是绘画和桌面出版，你可以找到其中预安装的 Inkscape和GIMP等工具，还有其它很多的工具。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB20.png\" alt=\"\"></p>\n<h3 id=\"Ubuntu-Studio\"><a href=\"#Ubuntu-Studio\" class=\"headerlink\" title=\"Ubuntu Studio\"></a>Ubuntu Studio</h3><p>Ubuntu Studio于2007年首次发布，它可能是那些具有创意天分的Linux用户的默认选择。有了XFCE桌面环境和低内核延迟，一切都是面向媒体制作。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB21.png\" alt=\"\"></p>\n<h3 id=\"KXStudio\"><a href=\"#KXStudio\" class=\"headerlink\" title=\"KXStudio\"></a>KXStudio</h3><p>这里列举的所有用于创作的发行版都提供了优秀的工具集，然而KXStudio却不同，它侧重于音频制作。当你沉浸在KDE桌面中时，你就拥有了一个性能相当出色的数字工作室。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB22.png\" alt=\"\"></p>\n<h3 id=\"ArtistX\"><a href=\"#ArtistX\" class=\"headerlink\" title=\"ArtistX\"></a>ArtistX</h3><p>ArtistX专门面向所有类型的艺术家，从音乐到图形设计。它基于Ubuntu，并且预装了所有最好的2D和3D图形设计、视频制作，和GNU / Linux音频制作软件。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB23.png\" alt=\"\"></p>\n<h3 id=\"Iro\"><a href=\"#Iro\" class=\"headerlink\" title=\"Iro\"></a>Iro</h3><p>如果动画、3D建模、合成、数字绘画和图像编辑是您首选的多媒体技术，你就需要Iro。没有大量的工具库（例如，像Ubuntu Studio）满足每个人的需要，而是提供了一组专门的应用程序。它们被集成在精简的用户界面中，如果你有一个发行版，就可以安装并开始工作，一点也不麻烦。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB24.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"教育\"><a href=\"#教育\" class=\"headerlink\" title=\"教育\"></a>教育</h2><h3 id=\"DouDou\"><a href=\"#DouDou\" class=\"headerlink\" title=\"DouDou\"></a>DouDou</h3><p>DouDou Linux是为小孩子设计的，其目的是教他们如何探索计算机并使用计算机学习。它提供了一些适合2-12岁孩子玩的游戏和教育节目，它是一个安全的环境，家长不必整天看着。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB25.png\" alt=\"\"></p>\n<h3 id=\"Edubuntu\"><a href=\"#Edubuntu\" class=\"headerlink\" title=\"Edubuntu\"></a>Edubuntu</h3><p>Edubuntu被开发成了一个（感谢Ubuntu给予的合作）尽可能方便教师设置的版本，并且可以供所有年龄的儿童使用。它预装了所有最好的免费教育软件。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB26.png\" alt=\"\"></p>\n<h3 id=\"Uberstudent\"><a href=\"#Uberstudent\" class=\"headerlink\" title=\"Uberstudent\"></a>Uberstudent</h3><p>Uberstudent是专门为大专院校和高级中学的学生而设计的。它预装的软件可以使做作业和管理任务变得更加容易。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB27.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"树莓派发行\"><a href=\"#树莓派发行\" class=\"headerlink\" title=\"树莓派发行\"></a>树莓派发行</h2><h3 id=\"Raspbian-Jessie\"><a href=\"#Raspbian-Jessie\" class=\"headerlink\" title=\"Raspbian Jessie\"></a>Raspbian Jessie</h3><p>流行的Raspberry Pi默认的操作系统是Raspbian Jessie，由树莓派基金会内部生产，它基于Debian。这款ARM发行版配备了大量编程工具，如Scratch，旨在帮助新手学习编程。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB28.png\" alt=\"\"></p>\n<h3 id=\"Kano-OS\"><a href=\"#Kano-OS\" class=\"headerlink\" title=\"Kano OS\"></a>Kano OS</h3><p>和Raspbian类似的操作系统是Kano OS，它也是基于Debian，但更多地是侧重编程，不过这次针对的是儿童。它在一个更直观的用户界面中提供了儿童进行编程需要的所有工具，目的是让他们尽量少点麻烦。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB29.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"轻量级-小型化\"><a href=\"#轻量级-小型化\" class=\"headerlink\" title=\"轻量级/小型化\"></a>轻量级/小型化</h2><h3 id=\"Lubuntu\"><a href=\"#Lubuntu\" class=\"headerlink\" title=\"Lubuntu\"></a>Lubuntu</h3><p>Lubuntu 是一个基于 Ubuntu 的轻量级发行版，非常适合在笔记本电脑上使用。它使用的是小型化的 LXDE（轻量级 X11桌面环境 Lightweight X11 Desktop Environment)，附带拥有一些针对能效和速度方面进行过优化设计的轻量级应用程序。因为它对 RAM 和 系统资源需求不高，因此非常适合那些古老的计算机、网络以及移动设备。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB30.png\" alt=\"\"></p>\n<h3 id=\"Xubuntu\"><a href=\"#Xubuntu\" class=\"headerlink\" title=\"Xubuntu\"></a>Xubuntu</h3><p>Xubuntu 是 Ubuntu 的一个衍生版本，使用 Xfce (XForms Common Environment) 桌面环境，因此它是优雅和轻量级的。它非常适合于笔记本和上网本，当然还有台式机。它比较轻巧，对系统资源的耗费不多，因此在比较古老的计算机上使用是比较理想的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB31.png\" alt=\"\"></p>\n<h3 id=\"Puppy-Linux\"><a href=\"#Puppy-Linux\" class=\"headerlink\" title=\"Puppy Linux\"></a>Puppy Linux</h3><p>Puppy Linux 是一个非常小巧的发行版，它可以整个放到 RAM 上面运行。因此 Puppy Linux 非常适合比较古老的计算机，即时计算机没有安装硬盘驱动器也是可以的! 它在删除恶意软件方面使用起来也比较轻松。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB32.png\" alt=\"\"></p>\n<h3 id=\"Manjaro-Linux\"><a href=\"#Manjaro-Linux\" class=\"headerlink\" title=\"Manjaro Linux\"></a>Manjaro Linux</h3><p>Manjaro Linux 基于 Arch Linux， 它是一个运行快速，容易使用，轻量级的发行版。它的目标是 Arch Linux 的好处都能提供，此外对用户更加友好和易于使用，使得新手能轻松上手。它默认使用的是 Xfce 桌面，不过也可以选择其它的桌面环境。</p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB33.png\" alt=\"\"></p>\n<h3 id=\"Arch-Linux\"><a href=\"#Arch-Linux\" class=\"headerlink\" title=\"Arch Linux\"></a>Arch Linux</h3><p>Arch Linux是一个为经验丰富的用户而设计的发行版。这个轻量级的最小化的发行版旨在使事情变得简单，更新时使用滚动发布模型。它具有一个定制的软件包管理器称为“Pacman”，这使得它易于编译、修改和共享软件包。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB34.png\" alt=\"\"></p>\n<h3 id=\"Tiny-Core\"><a href=\"#Tiny-Core\" class=\"headerlink\" title=\"Tiny Core\"></a>Tiny Core</h3><p>Tiny Core Linux是一个非常轻便的，模块化的发行版，特别要指出的是其小尺寸（目前有15MB）。它基于Linux内核，并且使用了BusyBox和FLTK（快速、轻便的工具包）。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB35.png\" alt=\"\"></p>\n<h3 id=\"Bodhi\"><a href=\"#Bodhi\" class=\"headerlink\" title=\"Bodhi\"></a>Bodhi</h3><p>这个基于Ubuntu的Bodhi Linux发行版具有轻量级而且漂亮的Enlightenment桌面。Bodhi尤其具有可定制性，可以使用主题和应用程序扩展开始的轻量级桌面环境。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB36.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"视频游戏\"><a href=\"#视频游戏\" class=\"headerlink\" title=\"视频游戏\"></a>视频游戏</h2><h3 id=\"Steam-OS\"><a href=\"#Steam-OS\" class=\"headerlink\" title=\"Steam OS\"></a>Steam OS</h3><p>Linux上的游戏变得越来越受欢迎，虽然你可以在Ubuntu上轻松的安装Steam数字版下载服务，但你可能更喜欢一步到位安装Steam OS。这是一个以游戏为中心的发行版，针对游戏性能进行了优化，内置了专有的图形和声音驱动程序，以及Steam客户端。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB37.png\" alt=\"\"></p>\n<p>Steam OS是Steam 机器使用的发行版，所以如果你正安装自己的系统，你肯定想使用这个版本。</p>\n<h3 id=\"Ubuntu-Game-Pack\"><a href=\"#Ubuntu-Game-Pack\" class=\"headerlink\" title=\"Ubuntu Game Pack\"></a>Ubuntu Game Pack</h3><p>能让你玩差不多6000种游戏，Ubuntu游戏包配有内置Steam，以及PlayOnLinux和Windows游戏模拟器。这个游戏包基于Ubuntu 14.04，如果你只想安装新操作系统并且想马上开始游戏，那么这是一个绝佳的选择！<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB38.png\" alt=\"\"></p>\n<h3 id=\"Play-Linux\"><a href=\"#Play-Linux\" class=\"headerlink\" title=\"Play Linux\"></a>Play Linux</h3><p>Play Linux基于Ubuntu 15.10，是一个优化的发行版，由于自动GPU安装程序工具可以使你的Linux当作游戏机来使用。这基本上简化了安装合适的显卡驱动程序的问题，满足你只玩游戏的需求。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB39.png\" alt=\"\"></p>\n<h3 id=\"SparkyLinux-–-Game-Over-Edition\"><a href=\"#SparkyLinux-–-Game-Over-Edition\" class=\"headerlink\" title=\"SparkyLinux – Game Over Edition\"></a>SparkyLinux – Game Over Edition</h3><p>各种版本的SparkyLinux都是可选用的，但拥有游戏为中心的这个版本可能是最有用的。配备LXDE桌面和大量的预装游戏，而且你还会发现Steam，PlayOnLinux和预装的windows游戏模拟器。这是一个免费且又高端的巨大的游戏库！<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB40.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"安全和恢复\"><a href=\"#安全和恢复\" class=\"headerlink\" title=\"安全和恢复\"></a>安全和恢复</h2><h3 id=\"Kali-Linux\"><a href=\"#Kali-Linux\" class=\"headerlink\" title=\"Kali Linux\"></a>Kali Linux</h3><p>Kali Linux以前被称为BackTrack，是一个渗透测试发行版，被广泛应用于在线安全社区。这种基于Debian的Linux发行版可以轻松地执行数字取证任务。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB41.png\" alt=\"\"></p>\n<h3 id=\"Parted-Magic\"><a href=\"#Parted-Magic\" class=\"headerlink\" title=\"Parted Magic\"></a>Parted Magic</h3><p>Parted Magic本质上是一个磁盘管理工具，作为硬盘分区和复制的主要工具，它还能轻松完成数据恢复和安全清理。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB042.png\" alt=\"\"></p>\n<h3 id=\"GParted\"><a href=\"#GParted\" class=\"headerlink\" title=\"GParted\"></a>GParted</h3><p>GParted是一个用途单一的发行版，旨在使用图形界面对硬盘驱动器变的更加轻松。 众多发行版中的标准版本将被Linux用户熟知。这个版本是一个独立的专用操作系统，然而，它准备作为一张自启动光盘运行。你需要执行一些磁盘管理而不引导到您的计算机的操作系统么？那么就使用GParted吧。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB43.png\" alt=\"\"></p>\n<h3 id=\"TAILS\"><a href=\"#TAILS\" class=\"headerlink\" title=\"TAILS\"></a>TAILS</h3><p>TAILS是一个完全围绕隐私和安全概念的发行版。它是一个实时操作系统，您可以移植从DVD，USB棒或SD卡中，这样你就可以在任何的计算机上安全的使用，并使用完成后不会被行为追踪。为了最好的匿名性，所有的互联网连接都通过TOR（The Onion Router）路由，并且加密工具全程保护您的通信方法不会被窥视。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB44.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"商业版本\"><a href=\"#商业版本\" class=\"headerlink\" title=\"商业版本\"></a>商业版本</h2><h3 id=\"Red-Hat-Enterprise-Linux\"><a href=\"#Red-Hat-Enterprise-Linux\" class=\"headerlink\" title=\"Red Hat Enterprise Linux\"></a>Red Hat Enterprise Linux</h3><p>红帽企业版Linux是Fedora的商业衍生产品，专为企业客户设计。 它提供诸多变体、插件以及认证可供管理员和应用程序使用。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB45.png\" alt=\"\"></p>\n<h3 id=\"SUSE-Linux-Enterprise\"><a href=\"#SUSE-Linux-Enterprise\" class=\"headerlink\" title=\"SUSE Linux Enterprise\"></a>SUSE Linux Enterprise</h3><p>SUSE Linux Enterprise桌面版专为企业使用而设计，它是可供企业安装使用的，这使其易于使用各种办公程序。 它具有足够的灵活性，可以在各种设备上运行，但对于极为关键的进程来说是足够可靠的。 同时还提供SUSE Linux Enterprise Server版本。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%9C%80%E4%BD%B3%20Linux%20%E5%8F%91%E8%A1%8C%E7%89%88%E6%B1%87%E6%80%BB46.png\" alt=\"\"></p>\n<hr>\n"},{"title":"vim常用命令","abbrlink":22091,"date":"2016-11-03T15:31:47.000Z","_content":"\n![](http://ofyfogrgx.bkt.clouddn.com//blog/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4001.jpeg)\n\n# 插入模式\n按「i」切换进入插入模式「insert mode」，按\"i\"进入插入模式后是从光标\n当前位置开始输入文件；\n  \n### 按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\n### 按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\n  : **w filename** （输入 「w filename」将文章以指定的文件名filename保存）\n  : **wq** (输入「wq」，存盘并退出vim)\n  : **q!** (输入q!， 不存盘强制退出vim)\n  :**ZZ** (输入「ZZ」，存盘并退出vim)\n\n---\n# 移动光标\nvi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母\n「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。\n* 按数字「0」：移到行首。\n* 按「G」：移动到文章的开头。\n* 按「w」：光标跳到下个字符串的开头\n* 按「e」：光标跳到下个字符串的字尾\n* 按「b」：光标回到上个字符串的开头\n* 按「#」：光标移到某个字符串后，按#会高亮所有的这个字符串。\n\n# 删除文字\n* 「x」：每按一次，删除光标所在位置的\"后面\"一个字符。\n* 「\\*x」：例如，「6x」表示删除光标所在位置的\"后面\"6个字符。\n* 「X」：大写的X，每按一次，删除光标所在位置的\"前面\"一个字符。\n* 「\\*X」：例如，「20X」表示删除光标所在位置的\"前面\"20个字符。\n* 「dd」：删除光标所在行。\n* 「\\*dd」：从光标所在行开始删除#行\n\n# 复制\n* 「yw」：将光标所在之处到字尾的字符复制到缓冲区中。\n* 「\\*yw」：复制#个字到缓冲区\n* 「yy」：复制光标所在行到缓冲区。\n* 「\\*yy」：例如，「6yy」表示拷贝从光标所在的该行\"往下数\"6行文字。\n* 「p」：将缓冲区内的字符贴到光标所在位置。注意：所有与\"y\"有关的复制\n  命令都必须与\"p\"配合才能完成复制与粘贴功能。\n\n# 替换\n* 「r」：替换光标所在处的字符。\n* 「R」：替换光标所到之处的字符，直到按下「ESC」键为止。\n\n# 撤销\n* 「u」：如果您误执行一个命令，可以马上按下「u」撤销，回到上一个操作。按多\n 次\"u\"可以执行多次回复。\n\n# 更改\n* 「cw」：更改光标所在处的字到字尾处[更改某个字符串]()\n* 「c\\*w」：例如，「c3w」表示更改3个字\n\n# 跳至指定的行\n* 「ctrl」+「g」列出光标所在行的行号，及总行数。\n* 「\\*G」：例如，「15G」，表示移动光标至文章的第15行行首。\n\n---\n\n先按「ESC」键确定您已经处于「command mode」下后，\n再按「：」冒号即可进入「last line mode」。\n# 列出行号\n  :**set nu** 会在文件中的每一行前面列出行号。\n# 跳到文件中的某一行\n :**行号**  在冒号后输入一个数字，再按回车键就会跳到该行了。\n# 查找字符\n :**/关键字**  可以一直按「n」会往后寻找到您要的关键字为止。\n\n\n---","source":"_posts/杂项/2016-11-03-vim常用命令.md","raw":"---\ntitle: vim常用命令\ncategories:\n  - 杂项\ntags:\n  - vim常用命令\nabbrlink: 22091\ndate: 2016-11-03 23:31:47\n---\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4001.jpeg)\n\n# 插入模式\n按「i」切换进入插入模式「insert mode」，按\"i\"进入插入模式后是从光标\n当前位置开始输入文件；\n  \n### 按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\n### 按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\n  : **w filename** （输入 「w filename」将文章以指定的文件名filename保存）\n  : **wq** (输入「wq」，存盘并退出vim)\n  : **q!** (输入q!， 不存盘强制退出vim)\n  :**ZZ** (输入「ZZ」，存盘并退出vim)\n\n---\n# 移动光标\nvi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母\n「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。\n* 按数字「0」：移到行首。\n* 按「G」：移动到文章的开头。\n* 按「w」：光标跳到下个字符串的开头\n* 按「e」：光标跳到下个字符串的字尾\n* 按「b」：光标回到上个字符串的开头\n* 按「#」：光标移到某个字符串后，按#会高亮所有的这个字符串。\n\n# 删除文字\n* 「x」：每按一次，删除光标所在位置的\"后面\"一个字符。\n* 「\\*x」：例如，「6x」表示删除光标所在位置的\"后面\"6个字符。\n* 「X」：大写的X，每按一次，删除光标所在位置的\"前面\"一个字符。\n* 「\\*X」：例如，「20X」表示删除光标所在位置的\"前面\"20个字符。\n* 「dd」：删除光标所在行。\n* 「\\*dd」：从光标所在行开始删除#行\n\n# 复制\n* 「yw」：将光标所在之处到字尾的字符复制到缓冲区中。\n* 「\\*yw」：复制#个字到缓冲区\n* 「yy」：复制光标所在行到缓冲区。\n* 「\\*yy」：例如，「6yy」表示拷贝从光标所在的该行\"往下数\"6行文字。\n* 「p」：将缓冲区内的字符贴到光标所在位置。注意：所有与\"y\"有关的复制\n  命令都必须与\"p\"配合才能完成复制与粘贴功能。\n\n# 替换\n* 「r」：替换光标所在处的字符。\n* 「R」：替换光标所到之处的字符，直到按下「ESC」键为止。\n\n# 撤销\n* 「u」：如果您误执行一个命令，可以马上按下「u」撤销，回到上一个操作。按多\n 次\"u\"可以执行多次回复。\n\n# 更改\n* 「cw」：更改光标所在处的字到字尾处[更改某个字符串]()\n* 「c\\*w」：例如，「c3w」表示更改3个字\n\n# 跳至指定的行\n* 「ctrl」+「g」列出光标所在行的行号，及总行数。\n* 「\\*G」：例如，「15G」，表示移动光标至文章的第15行行首。\n\n---\n\n先按「ESC」键确定您已经处于「command mode」下后，\n再按「：」冒号即可进入「last line mode」。\n# 列出行号\n  :**set nu** 会在文件中的每一行前面列出行号。\n# 跳到文件中的某一行\n :**行号**  在冒号后输入一个数字，再按回车键就会跳到该行了。\n# 查找字符\n :**/关键字**  可以一直按「n」会往后寻找到您要的关键字为止。\n\n\n---","slug":"杂项-2016-11-03-vim常用命令","published":1,"updated":"2016-11-21T02:17:08.955Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjm5001fd8pk4e9qm1x0","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4001.jpeg\" alt=\"\"></p>\n<h1 id=\"插入模式\"><a href=\"#插入模式\" class=\"headerlink\" title=\"插入模式\"></a>插入模式</h1><p>按「i」切换进入插入模式「insert mode」，按”i”进入插入模式后是从光标<br>当前位置开始输入文件；</p>\n<h3 id=\"按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\"><a href=\"#按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\" class=\"headerlink\" title=\"按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\"></a>按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。</h3><h3 id=\"按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\"><a href=\"#按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\" class=\"headerlink\" title=\"按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\"></a>按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。</h3><p>  : <strong>w filename</strong> （输入 「w filename」将文章以指定的文件名filename保存）<br>  : <strong>wq</strong> (输入「wq」，存盘并退出vim)<br>  : <strong>q!</strong> (输入q!， 不存盘强制退出vim)<br>  :<strong>ZZ</strong> (输入「ZZ」，存盘并退出vim)</p>\n<hr>\n<h1 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h1><p>vi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母<br>「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。</p>\n<ul>\n<li>按数字「0」：移到行首。</li>\n<li>按「G」：移动到文章的开头。</li>\n<li>按「w」：光标跳到下个字符串的开头</li>\n<li>按「e」：光标跳到下个字符串的字尾</li>\n<li>按「b」：光标回到上个字符串的开头</li>\n<li>按「#」：光标移到某个字符串后，按#会高亮所有的这个字符串。</li>\n</ul>\n<h1 id=\"删除文字\"><a href=\"#删除文字\" class=\"headerlink\" title=\"删除文字\"></a>删除文字</h1><ul>\n<li>「x」：每按一次，删除光标所在位置的”后面”一个字符。</li>\n<li>「*x」：例如，「6x」表示删除光标所在位置的”后面”6个字符。</li>\n<li>「X」：大写的X，每按一次，删除光标所在位置的”前面”一个字符。</li>\n<li>「*X」：例如，「20X」表示删除光标所在位置的”前面”20个字符。</li>\n<li>「dd」：删除光标所在行。</li>\n<li>「*dd」：从光标所在行开始删除#行</li>\n</ul>\n<h1 id=\"复制\"><a href=\"#复制\" class=\"headerlink\" title=\"复制\"></a>复制</h1><ul>\n<li>「yw」：将光标所在之处到字尾的字符复制到缓冲区中。</li>\n<li>「*yw」：复制#个字到缓冲区</li>\n<li>「yy」：复制光标所在行到缓冲区。</li>\n<li>「*yy」：例如，「6yy」表示拷贝从光标所在的该行”往下数”6行文字。</li>\n<li>「p」：将缓冲区内的字符贴到光标所在位置。注意：所有与”y”有关的复制<br>命令都必须与”p”配合才能完成复制与粘贴功能。</li>\n</ul>\n<h1 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h1><ul>\n<li>「r」：替换光标所在处的字符。</li>\n<li>「R」：替换光标所到之处的字符，直到按下「ESC」键为止。</li>\n</ul>\n<h1 id=\"撤销\"><a href=\"#撤销\" class=\"headerlink\" title=\"撤销\"></a>撤销</h1><ul>\n<li>「u」：如果您误执行一个命令，可以马上按下「u」撤销，回到上一个操作。按多<br>次”u”可以执行多次回复。</li>\n</ul>\n<h1 id=\"更改\"><a href=\"#更改\" class=\"headerlink\" title=\"更改\"></a>更改</h1><ul>\n<li>「cw」：更改光标所在处的字到字尾处<a href=\"\">更改某个字符串</a></li>\n<li>「c*w」：例如，「c3w」表示更改3个字</li>\n</ul>\n<h1 id=\"跳至指定的行\"><a href=\"#跳至指定的行\" class=\"headerlink\" title=\"跳至指定的行\"></a>跳至指定的行</h1><ul>\n<li>「ctrl」+「g」列出光标所在行的行号，及总行数。</li>\n<li>「*G」：例如，「15G」，表示移动光标至文章的第15行行首。</li>\n</ul>\n<hr>\n<p>先按「ESC」键确定您已经处于「command mode」下后，<br>再按「：」冒号即可进入「last line mode」。</p>\n<h1 id=\"列出行号\"><a href=\"#列出行号\" class=\"headerlink\" title=\"列出行号\"></a>列出行号</h1><p>  :<strong>set nu</strong> 会在文件中的每一行前面列出行号。</p>\n<h1 id=\"跳到文件中的某一行\"><a href=\"#跳到文件中的某一行\" class=\"headerlink\" title=\"跳到文件中的某一行\"></a>跳到文件中的某一行</h1><p> :<strong>行号</strong>  在冒号后输入一个数字，再按回车键就会跳到该行了。</p>\n<h1 id=\"查找字符\"><a href=\"#查找字符\" class=\"headerlink\" title=\"查找字符\"></a>查找字符</h1><p> :<strong>/关键字</strong>  可以一直按「n」会往后寻找到您要的关键字为止。</p>\n<hr>\n","excerpt":"","more":"<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4001.jpeg\" alt=\"\"></p>\n<h1 id=\"插入模式\"><a href=\"#插入模式\" class=\"headerlink\" title=\"插入模式\"></a>插入模式</h1><p>按「i」切换进入插入模式「insert mode」，按”i”进入插入模式后是从光标<br>当前位置开始输入文件；</p>\n<h3 id=\"按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\"><a href=\"#按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\" class=\"headerlink\" title=\"按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。\"></a>按「a」进入插入模式后，从当前光标所在位置的下一个位置开始输入文字。</h3><h3 id=\"按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\"><a href=\"#按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\" class=\"headerlink\" title=\"按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。\"></a>按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。</h3><p>  : <strong>w filename</strong> （输入 「w filename」将文章以指定的文件名filename保存）<br>  : <strong>wq</strong> (输入「wq」，存盘并退出vim)<br>  : <strong>q!</strong> (输入q!， 不存盘强制退出vim)<br>  :<strong>ZZ</strong> (输入「ZZ」，存盘并退出vim)</p>\n<hr>\n<h1 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h1><p>vi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母<br>「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。</p>\n<ul>\n<li>按数字「0」：移到行首。</li>\n<li>按「G」：移动到文章的开头。</li>\n<li>按「w」：光标跳到下个字符串的开头</li>\n<li>按「e」：光标跳到下个字符串的字尾</li>\n<li>按「b」：光标回到上个字符串的开头</li>\n<li>按「#」：光标移到某个字符串后，按#会高亮所有的这个字符串。</li>\n</ul>\n<h1 id=\"删除文字\"><a href=\"#删除文字\" class=\"headerlink\" title=\"删除文字\"></a>删除文字</h1><ul>\n<li>「x」：每按一次，删除光标所在位置的”后面”一个字符。</li>\n<li>「*x」：例如，「6x」表示删除光标所在位置的”后面”6个字符。</li>\n<li>「X」：大写的X，每按一次，删除光标所在位置的”前面”一个字符。</li>\n<li>「*X」：例如，「20X」表示删除光标所在位置的”前面”20个字符。</li>\n<li>「dd」：删除光标所在行。</li>\n<li>「*dd」：从光标所在行开始删除#行</li>\n</ul>\n<h1 id=\"复制\"><a href=\"#复制\" class=\"headerlink\" title=\"复制\"></a>复制</h1><ul>\n<li>「yw」：将光标所在之处到字尾的字符复制到缓冲区中。</li>\n<li>「*yw」：复制#个字到缓冲区</li>\n<li>「yy」：复制光标所在行到缓冲区。</li>\n<li>「*yy」：例如，「6yy」表示拷贝从光标所在的该行”往下数”6行文字。</li>\n<li>「p」：将缓冲区内的字符贴到光标所在位置。注意：所有与”y”有关的复制<br>命令都必须与”p”配合才能完成复制与粘贴功能。</li>\n</ul>\n<h1 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h1><ul>\n<li>「r」：替换光标所在处的字符。</li>\n<li>「R」：替换光标所到之处的字符，直到按下「ESC」键为止。</li>\n</ul>\n<h1 id=\"撤销\"><a href=\"#撤销\" class=\"headerlink\" title=\"撤销\"></a>撤销</h1><ul>\n<li>「u」：如果您误执行一个命令，可以马上按下「u」撤销，回到上一个操作。按多<br>次”u”可以执行多次回复。</li>\n</ul>\n<h1 id=\"更改\"><a href=\"#更改\" class=\"headerlink\" title=\"更改\"></a>更改</h1><ul>\n<li>「cw」：更改光标所在处的字到字尾处<a href=\"\">更改某个字符串</a></li>\n<li>「c*w」：例如，「c3w」表示更改3个字</li>\n</ul>\n<h1 id=\"跳至指定的行\"><a href=\"#跳至指定的行\" class=\"headerlink\" title=\"跳至指定的行\"></a>跳至指定的行</h1><ul>\n<li>「ctrl」+「g」列出光标所在行的行号，及总行数。</li>\n<li>「*G」：例如，「15G」，表示移动光标至文章的第15行行首。</li>\n</ul>\n<hr>\n<p>先按「ESC」键确定您已经处于「command mode」下后，<br>再按「：」冒号即可进入「last line mode」。</p>\n<h1 id=\"列出行号\"><a href=\"#列出行号\" class=\"headerlink\" title=\"列出行号\"></a>列出行号</h1><p>  :<strong>set nu</strong> 会在文件中的每一行前面列出行号。</p>\n<h1 id=\"跳到文件中的某一行\"><a href=\"#跳到文件中的某一行\" class=\"headerlink\" title=\"跳到文件中的某一行\"></a>跳到文件中的某一行</h1><p> :<strong>行号</strong>  在冒号后输入一个数字，再按回车键就会跳到该行了。</p>\n<h1 id=\"查找字符\"><a href=\"#查找字符\" class=\"headerlink\" title=\"查找字符\"></a>查找字符</h1><p> :<strong>/关键字</strong>  可以一直按「n」会往后寻找到您要的关键字为止。</p>\n<hr>\n"},{"title":"程序员怎样才能找到一个靠谱的创业公司","abbrlink":48545,"date":"2016-11-02T06:32:40.000Z","_content":"\n### 推酷上看到的一篇文网文，摘录学习\n\n#### 项目前景\n面试公司之前，要首先从网上搜集该公司有关的新闻和资料，大致了解一下公司所做的项目，面试的时候和经理深入探讨一下关于产品项目的想法，以便更全面的有个大概的了解。项目是一个公司的内在核心，产品是公司的孩子，代表着公司的前景和未来。根据当前互联网的大环境和未来发展以及当下的用户市场来诊断一下该公司的核心产品项目的前途，以及是否是你感兴趣的方向。如果你感觉没有前景，而且又不是你感兴趣的方向，建议不要选择，一个合适的环境和项目才能促进你提高。\n当然，如果你仅仅考虑的是当下为了挣钱，而不是自己的兴趣爱好，那如果你感觉该公司项目产品有市场前景，有钱途，但是又没有自己的主见和兴趣，那你可以选择这家公司。没有前景的项目公司建议大家慎重选择，毕竟融资困难，最后有可能发不出工资来。你可能会说，我们怎么能判断准确？是的，并不是每个人都能判断准确，投资人都叫风投，风险投资，所有的选择都是有风险的，这需要自己平时多关心互联网的发展和未来的方向，以及一些热点，扩展自己的一些知识量和阅历，使自己判断能力的准确度更高，仅此而已。\n#### CEO的魅力\n我这里把CEO的魅力分为两个：一是领导力，二是执行力。这是一个优秀的CEO必不可少的素质。\n这里的领导力，我暂时定义为以下几点：广阔视野，分析思维，概念思维，真知灼见，知人善任，卓越领导，影响他人，相信自己。前面的几点视野，思维，灼见，这些能力，可以使CEO能够准确的判断市场和未来，带着公司稳步的走向未来，发展更好。后面的知人善任，卓越领导，影响他人，相信自己，才能能够使创业团队更加团结稳定，使大家更加信服的追随他。对于影响他人，我们不求每个CEO都像乔布斯一样，具有现实扭曲力场的能力，最起码能够让他人和你观点不会冲突，这样才能领到团队，团结一心。\n关于执行力，我想说这里的执行力我更加偏向与作为一个公司的领导，他的承诺的执行力，而不是整天那股权和期权忽悠创业团队，说公司上市了大家都是元老，都会有股份或者期权。整天那摸不着，看不见的东西忽悠大家拼命给他干活的CEO不是一个让人信服的人，让团队没有安全感。记住：画大饼谁都会，让你能吃到的CEO不多见。从创业起，融到资金后，整天自己抱着钱，不顾员工利益的CEO,即使将来创业成功，他也不会让你知道饼是啥味。记住：口头承诺不如白纸黑字。\n如果你去的公司，在工作了几个月之后，发现公司的CEO没有领导力，也没有执行力，果断劝你们赶紧给自己找下家和后路，否则……后果自负。\n#### 管理团队\n刚才我们谈到了CEO的魅力问题，CEO影响着管理团队的团结和战斗力。如果一个CEO和管理团队因为期权、股权问题，还有对于公司的战略规划上有分歧，整天勾心斗角，明面上精致团结或者矛盾隐私化，暗地里暗度陈仓，这样的公司是没有任何战斗力和前景的。\n如果你所在的公司，你发现了有这样的苗头或者征兆，甚至已经正在发生，内部管理团队不和的现象，建议你们慎重选择，或者尽早离职。所谓上身不正下身外，管理团队把心思都放在了勾心头角上，哪有心力去按照既定的战略规划去安心，用心经营项目和产品啊。\n#### 技术团队\n有些创业公司号称是产品驱动型的，还有什么运营驱动型，用户驱动型，当然还有技术驱动型的公司，不管什么驱动型的公司，归根结底得有自己的产品，做产品就得需要技术，所以一个公司技术的重要性不言而喻，尤其是创业公司前期，产品未获得市场认可之前，技术尤为重要。一个好的技术团队可以成就一个好的产品的同时，更能够提高技术团队内程序员的技术水平。如果技术团队能力不强，你认为公司的产品性能，体验，交互会好吗？交互体验是用户使用产品最直观的感受。一个成功的产品需要强大的运营，需要市场的认可，更需要技术的提高和优化。\n如果你去的公司技术团队技术能力不强，你在里面学不到东西，一直在用自己之前学到的陈旧技术，那还是别呆在哪里了，提高技术最好的方法就是：勇于挑战自己不会的东西。作为技术型的人员，切记不要自己待在一个舒适区太久，会让你变得懒惰，落后，甚至淘汰，要向温水煮青蛙一样，我们要适度的学会跳出舒适区，去挑战自己。\n#### 总结\n当然，你看到这里可能会对比自己的处境，感觉完全达到以上几点要求的创业公司太少了，是人在一起就会磕磕绊绊，当然，这是肯定的，但是如果你待在的那个公司触犯了上面的两条及以上，我还是建议你要重新选择或者离职，去找更好的公司。这仅仅是我个人的观点，可以参考，也可以不认同，我只是用经验告诉大家以后小心上当。我为什么把项目前景和CEO的魅力放在前两位呢，因为如果你工作的那个公司，这两点都做到了，后面管理团队和技术团队也差不到哪里去。\n记住：路是自己走出来的，路更是自己选择的。我们不要做一个敢于跳槽的程序员，而是要做一个不害怕跳槽的程序员。你们懂我的意思吧？我相信大家都懂。\n\n\n---\n\n \n","source":"_posts/文章阅读/2016-11-02-程序员怎样才能找到一个靠谱的创业公司.md","raw":"---\ntitle: 程序员怎样才能找到一个靠谱的创业公司\ncategories:\n  - 文章阅读\ntags:\n  - 创业的公司\nabbrlink: 48545\ndate: 2016-11-02 14:32:40\n---\n\n### 推酷上看到的一篇文网文，摘录学习\n\n#### 项目前景\n面试公司之前，要首先从网上搜集该公司有关的新闻和资料，大致了解一下公司所做的项目，面试的时候和经理深入探讨一下关于产品项目的想法，以便更全面的有个大概的了解。项目是一个公司的内在核心，产品是公司的孩子，代表着公司的前景和未来。根据当前互联网的大环境和未来发展以及当下的用户市场来诊断一下该公司的核心产品项目的前途，以及是否是你感兴趣的方向。如果你感觉没有前景，而且又不是你感兴趣的方向，建议不要选择，一个合适的环境和项目才能促进你提高。\n当然，如果你仅仅考虑的是当下为了挣钱，而不是自己的兴趣爱好，那如果你感觉该公司项目产品有市场前景，有钱途，但是又没有自己的主见和兴趣，那你可以选择这家公司。没有前景的项目公司建议大家慎重选择，毕竟融资困难，最后有可能发不出工资来。你可能会说，我们怎么能判断准确？是的，并不是每个人都能判断准确，投资人都叫风投，风险投资，所有的选择都是有风险的，这需要自己平时多关心互联网的发展和未来的方向，以及一些热点，扩展自己的一些知识量和阅历，使自己判断能力的准确度更高，仅此而已。\n#### CEO的魅力\n我这里把CEO的魅力分为两个：一是领导力，二是执行力。这是一个优秀的CEO必不可少的素质。\n这里的领导力，我暂时定义为以下几点：广阔视野，分析思维，概念思维，真知灼见，知人善任，卓越领导，影响他人，相信自己。前面的几点视野，思维，灼见，这些能力，可以使CEO能够准确的判断市场和未来，带着公司稳步的走向未来，发展更好。后面的知人善任，卓越领导，影响他人，相信自己，才能能够使创业团队更加团结稳定，使大家更加信服的追随他。对于影响他人，我们不求每个CEO都像乔布斯一样，具有现实扭曲力场的能力，最起码能够让他人和你观点不会冲突，这样才能领到团队，团结一心。\n关于执行力，我想说这里的执行力我更加偏向与作为一个公司的领导，他的承诺的执行力，而不是整天那股权和期权忽悠创业团队，说公司上市了大家都是元老，都会有股份或者期权。整天那摸不着，看不见的东西忽悠大家拼命给他干活的CEO不是一个让人信服的人，让团队没有安全感。记住：画大饼谁都会，让你能吃到的CEO不多见。从创业起，融到资金后，整天自己抱着钱，不顾员工利益的CEO,即使将来创业成功，他也不会让你知道饼是啥味。记住：口头承诺不如白纸黑字。\n如果你去的公司，在工作了几个月之后，发现公司的CEO没有领导力，也没有执行力，果断劝你们赶紧给自己找下家和后路，否则……后果自负。\n#### 管理团队\n刚才我们谈到了CEO的魅力问题，CEO影响着管理团队的团结和战斗力。如果一个CEO和管理团队因为期权、股权问题，还有对于公司的战略规划上有分歧，整天勾心斗角，明面上精致团结或者矛盾隐私化，暗地里暗度陈仓，这样的公司是没有任何战斗力和前景的。\n如果你所在的公司，你发现了有这样的苗头或者征兆，甚至已经正在发生，内部管理团队不和的现象，建议你们慎重选择，或者尽早离职。所谓上身不正下身外，管理团队把心思都放在了勾心头角上，哪有心力去按照既定的战略规划去安心，用心经营项目和产品啊。\n#### 技术团队\n有些创业公司号称是产品驱动型的，还有什么运营驱动型，用户驱动型，当然还有技术驱动型的公司，不管什么驱动型的公司，归根结底得有自己的产品，做产品就得需要技术，所以一个公司技术的重要性不言而喻，尤其是创业公司前期，产品未获得市场认可之前，技术尤为重要。一个好的技术团队可以成就一个好的产品的同时，更能够提高技术团队内程序员的技术水平。如果技术团队能力不强，你认为公司的产品性能，体验，交互会好吗？交互体验是用户使用产品最直观的感受。一个成功的产品需要强大的运营，需要市场的认可，更需要技术的提高和优化。\n如果你去的公司技术团队技术能力不强，你在里面学不到东西，一直在用自己之前学到的陈旧技术，那还是别呆在哪里了，提高技术最好的方法就是：勇于挑战自己不会的东西。作为技术型的人员，切记不要自己待在一个舒适区太久，会让你变得懒惰，落后，甚至淘汰，要向温水煮青蛙一样，我们要适度的学会跳出舒适区，去挑战自己。\n#### 总结\n当然，你看到这里可能会对比自己的处境，感觉完全达到以上几点要求的创业公司太少了，是人在一起就会磕磕绊绊，当然，这是肯定的，但是如果你待在的那个公司触犯了上面的两条及以上，我还是建议你要重新选择或者离职，去找更好的公司。这仅仅是我个人的观点，可以参考，也可以不认同，我只是用经验告诉大家以后小心上当。我为什么把项目前景和CEO的魅力放在前两位呢，因为如果你工作的那个公司，这两点都做到了，后面管理团队和技术团队也差不到哪里去。\n记住：路是自己走出来的，路更是自己选择的。我们不要做一个敢于跳槽的程序员，而是要做一个不害怕跳槽的程序员。你们懂我的意思吧？我相信大家都懂。\n\n\n---\n\n \n","slug":"文章阅读-2016-11-02-程序员怎样才能找到一个靠谱的创业公司","published":1,"updated":"2016-11-21T02:17:08.942Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjm6001hd8pkrcaomw63","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h3 id=\"推酷上看到的一篇文网文，摘录学习\"><a href=\"#推酷上看到的一篇文网文，摘录学习\" class=\"headerlink\" title=\"推酷上看到的一篇文网文，摘录学习\"></a>推酷上看到的一篇文网文，摘录学习</h3><h4 id=\"项目前景\"><a href=\"#项目前景\" class=\"headerlink\" title=\"项目前景\"></a>项目前景</h4><p>面试公司之前，要首先从网上搜集该公司有关的新闻和资料，大致了解一下公司所做的项目，面试的时候和经理深入探讨一下关于产品项目的想法，以便更全面的有个大概的了解。项目是一个公司的内在核心，产品是公司的孩子，代表着公司的前景和未来。根据当前互联网的大环境和未来发展以及当下的用户市场来诊断一下该公司的核心产品项目的前途，以及是否是你感兴趣的方向。如果你感觉没有前景，而且又不是你感兴趣的方向，建议不要选择，一个合适的环境和项目才能促进你提高。<br>当然，如果你仅仅考虑的是当下为了挣钱，而不是自己的兴趣爱好，那如果你感觉该公司项目产品有市场前景，有钱途，但是又没有自己的主见和兴趣，那你可以选择这家公司。没有前景的项目公司建议大家慎重选择，毕竟融资困难，最后有可能发不出工资来。你可能会说，我们怎么能判断准确？是的，并不是每个人都能判断准确，投资人都叫风投，风险投资，所有的选择都是有风险的，这需要自己平时多关心互联网的发展和未来的方向，以及一些热点，扩展自己的一些知识量和阅历，使自己判断能力的准确度更高，仅此而已。</p>\n<h4 id=\"CEO的魅力\"><a href=\"#CEO的魅力\" class=\"headerlink\" title=\"CEO的魅力\"></a>CEO的魅力</h4><p>我这里把CEO的魅力分为两个：一是领导力，二是执行力。这是一个优秀的CEO必不可少的素质。<br>这里的领导力，我暂时定义为以下几点：广阔视野，分析思维，概念思维，真知灼见，知人善任，卓越领导，影响他人，相信自己。前面的几点视野，思维，灼见，这些能力，可以使CEO能够准确的判断市场和未来，带着公司稳步的走向未来，发展更好。后面的知人善任，卓越领导，影响他人，相信自己，才能能够使创业团队更加团结稳定，使大家更加信服的追随他。对于影响他人，我们不求每个CEO都像乔布斯一样，具有现实扭曲力场的能力，最起码能够让他人和你观点不会冲突，这样才能领到团队，团结一心。<br>关于执行力，我想说这里的执行力我更加偏向与作为一个公司的领导，他的承诺的执行力，而不是整天那股权和期权忽悠创业团队，说公司上市了大家都是元老，都会有股份或者期权。整天那摸不着，看不见的东西忽悠大家拼命给他干活的CEO不是一个让人信服的人，让团队没有安全感。记住：画大饼谁都会，让你能吃到的CEO不多见。从创业起，融到资金后，整天自己抱着钱，不顾员工利益的CEO,即使将来创业成功，他也不会让你知道饼是啥味。记住：口头承诺不如白纸黑字。<br>如果你去的公司，在工作了几个月之后，发现公司的CEO没有领导力，也没有执行力，果断劝你们赶紧给自己找下家和后路，否则……后果自负。</p>\n<h4 id=\"管理团队\"><a href=\"#管理团队\" class=\"headerlink\" title=\"管理团队\"></a>管理团队</h4><p>刚才我们谈到了CEO的魅力问题，CEO影响着管理团队的团结和战斗力。如果一个CEO和管理团队因为期权、股权问题，还有对于公司的战略规划上有分歧，整天勾心斗角，明面上精致团结或者矛盾隐私化，暗地里暗度陈仓，这样的公司是没有任何战斗力和前景的。<br>如果你所在的公司，你发现了有这样的苗头或者征兆，甚至已经正在发生，内部管理团队不和的现象，建议你们慎重选择，或者尽早离职。所谓上身不正下身外，管理团队把心思都放在了勾心头角上，哪有心力去按照既定的战略规划去安心，用心经营项目和产品啊。</p>\n<h4 id=\"技术团队\"><a href=\"#技术团队\" class=\"headerlink\" title=\"技术团队\"></a>技术团队</h4><p>有些创业公司号称是产品驱动型的，还有什么运营驱动型，用户驱动型，当然还有技术驱动型的公司，不管什么驱动型的公司，归根结底得有自己的产品，做产品就得需要技术，所以一个公司技术的重要性不言而喻，尤其是创业公司前期，产品未获得市场认可之前，技术尤为重要。一个好的技术团队可以成就一个好的产品的同时，更能够提高技术团队内程序员的技术水平。如果技术团队能力不强，你认为公司的产品性能，体验，交互会好吗？交互体验是用户使用产品最直观的感受。一个成功的产品需要强大的运营，需要市场的认可，更需要技术的提高和优化。<br>如果你去的公司技术团队技术能力不强，你在里面学不到东西，一直在用自己之前学到的陈旧技术，那还是别呆在哪里了，提高技术最好的方法就是：勇于挑战自己不会的东西。作为技术型的人员，切记不要自己待在一个舒适区太久，会让你变得懒惰，落后，甚至淘汰，要向温水煮青蛙一样，我们要适度的学会跳出舒适区，去挑战自己。</p>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><p>当然，你看到这里可能会对比自己的处境，感觉完全达到以上几点要求的创业公司太少了，是人在一起就会磕磕绊绊，当然，这是肯定的，但是如果你待在的那个公司触犯了上面的两条及以上，我还是建议你要重新选择或者离职，去找更好的公司。这仅仅是我个人的观点，可以参考，也可以不认同，我只是用经验告诉大家以后小心上当。我为什么把项目前景和CEO的魅力放在前两位呢，因为如果你工作的那个公司，这两点都做到了，后面管理团队和技术团队也差不到哪里去。<br>记住：路是自己走出来的，路更是自己选择的。我们不要做一个敢于跳槽的程序员，而是要做一个不害怕跳槽的程序员。你们懂我的意思吧？我相信大家都懂。</p>\n<hr>\n","excerpt":"","more":"<h3 id=\"推酷上看到的一篇文网文，摘录学习\"><a href=\"#推酷上看到的一篇文网文，摘录学习\" class=\"headerlink\" title=\"推酷上看到的一篇文网文，摘录学习\"></a>推酷上看到的一篇文网文，摘录学习</h3><h4 id=\"项目前景\"><a href=\"#项目前景\" class=\"headerlink\" title=\"项目前景\"></a>项目前景</h4><p>面试公司之前，要首先从网上搜集该公司有关的新闻和资料，大致了解一下公司所做的项目，面试的时候和经理深入探讨一下关于产品项目的想法，以便更全面的有个大概的了解。项目是一个公司的内在核心，产品是公司的孩子，代表着公司的前景和未来。根据当前互联网的大环境和未来发展以及当下的用户市场来诊断一下该公司的核心产品项目的前途，以及是否是你感兴趣的方向。如果你感觉没有前景，而且又不是你感兴趣的方向，建议不要选择，一个合适的环境和项目才能促进你提高。<br>当然，如果你仅仅考虑的是当下为了挣钱，而不是自己的兴趣爱好，那如果你感觉该公司项目产品有市场前景，有钱途，但是又没有自己的主见和兴趣，那你可以选择这家公司。没有前景的项目公司建议大家慎重选择，毕竟融资困难，最后有可能发不出工资来。你可能会说，我们怎么能判断准确？是的，并不是每个人都能判断准确，投资人都叫风投，风险投资，所有的选择都是有风险的，这需要自己平时多关心互联网的发展和未来的方向，以及一些热点，扩展自己的一些知识量和阅历，使自己判断能力的准确度更高，仅此而已。</p>\n<h4 id=\"CEO的魅力\"><a href=\"#CEO的魅力\" class=\"headerlink\" title=\"CEO的魅力\"></a>CEO的魅力</h4><p>我这里把CEO的魅力分为两个：一是领导力，二是执行力。这是一个优秀的CEO必不可少的素质。<br>这里的领导力，我暂时定义为以下几点：广阔视野，分析思维，概念思维，真知灼见，知人善任，卓越领导，影响他人，相信自己。前面的几点视野，思维，灼见，这些能力，可以使CEO能够准确的判断市场和未来，带着公司稳步的走向未来，发展更好。后面的知人善任，卓越领导，影响他人，相信自己，才能能够使创业团队更加团结稳定，使大家更加信服的追随他。对于影响他人，我们不求每个CEO都像乔布斯一样，具有现实扭曲力场的能力，最起码能够让他人和你观点不会冲突，这样才能领到团队，团结一心。<br>关于执行力，我想说这里的执行力我更加偏向与作为一个公司的领导，他的承诺的执行力，而不是整天那股权和期权忽悠创业团队，说公司上市了大家都是元老，都会有股份或者期权。整天那摸不着，看不见的东西忽悠大家拼命给他干活的CEO不是一个让人信服的人，让团队没有安全感。记住：画大饼谁都会，让你能吃到的CEO不多见。从创业起，融到资金后，整天自己抱着钱，不顾员工利益的CEO,即使将来创业成功，他也不会让你知道饼是啥味。记住：口头承诺不如白纸黑字。<br>如果你去的公司，在工作了几个月之后，发现公司的CEO没有领导力，也没有执行力，果断劝你们赶紧给自己找下家和后路，否则……后果自负。</p>\n<h4 id=\"管理团队\"><a href=\"#管理团队\" class=\"headerlink\" title=\"管理团队\"></a>管理团队</h4><p>刚才我们谈到了CEO的魅力问题，CEO影响着管理团队的团结和战斗力。如果一个CEO和管理团队因为期权、股权问题，还有对于公司的战略规划上有分歧，整天勾心斗角，明面上精致团结或者矛盾隐私化，暗地里暗度陈仓，这样的公司是没有任何战斗力和前景的。<br>如果你所在的公司，你发现了有这样的苗头或者征兆，甚至已经正在发生，内部管理团队不和的现象，建议你们慎重选择，或者尽早离职。所谓上身不正下身外，管理团队把心思都放在了勾心头角上，哪有心力去按照既定的战略规划去安心，用心经营项目和产品啊。</p>\n<h4 id=\"技术团队\"><a href=\"#技术团队\" class=\"headerlink\" title=\"技术团队\"></a>技术团队</h4><p>有些创业公司号称是产品驱动型的，还有什么运营驱动型，用户驱动型，当然还有技术驱动型的公司，不管什么驱动型的公司，归根结底得有自己的产品，做产品就得需要技术，所以一个公司技术的重要性不言而喻，尤其是创业公司前期，产品未获得市场认可之前，技术尤为重要。一个好的技术团队可以成就一个好的产品的同时，更能够提高技术团队内程序员的技术水平。如果技术团队能力不强，你认为公司的产品性能，体验，交互会好吗？交互体验是用户使用产品最直观的感受。一个成功的产品需要强大的运营，需要市场的认可，更需要技术的提高和优化。<br>如果你去的公司技术团队技术能力不强，你在里面学不到东西，一直在用自己之前学到的陈旧技术，那还是别呆在哪里了，提高技术最好的方法就是：勇于挑战自己不会的东西。作为技术型的人员，切记不要自己待在一个舒适区太久，会让你变得懒惰，落后，甚至淘汰，要向温水煮青蛙一样，我们要适度的学会跳出舒适区，去挑战自己。</p>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><p>当然，你看到这里可能会对比自己的处境，感觉完全达到以上几点要求的创业公司太少了，是人在一起就会磕磕绊绊，当然，这是肯定的，但是如果你待在的那个公司触犯了上面的两条及以上，我还是建议你要重新选择或者离职，去找更好的公司。这仅仅是我个人的观点，可以参考，也可以不认同，我只是用经验告诉大家以后小心上当。我为什么把项目前景和CEO的魅力放在前两位呢，因为如果你工作的那个公司，这两点都做到了，后面管理团队和技术团队也差不到哪里去。<br>记住：路是自己走出来的，路更是自己选择的。我们不要做一个敢于跳槽的程序员，而是要做一个不害怕跳槽的程序员。你们懂我的意思吧？我相信大家都懂。</p>\n<hr>\n"},{"title":"常用网站链接","abbrlink":44568,"date":"2016-11-11T06:25:27.000Z","_content":"\n一些方便个人查询的链接，而不用打开笔记，不喜欢请忽略。\n\n---\n# 环境搭建\n一键LNMP  http://lnmp.org\n一键LAMP  http://www.wdlinux.cn/bbs/forum-5-1.html\n\nphp官网     http://www.php.net/\nphpmyadmin  http://www.phpmyadmin.net/\nmysql       http://www.mysql.com/\n\t\nDiscuz!     http://www.discuz.net/forum.php\nWordPress   https://cn.wordpress.org/\n\n---\n# 网站管理\njoomla    https://www.joomla.org/\nWDCP      http://www.wdlinux.cn/wdcp/\nAMH       http://amh.sh/install.htm\nPHPCMS    http://www.phpcms.cn/\n\n---\n# yum源\n网易163源          http://mirrors.163.com/\n阿里云源           http://mirrors.aliyun.com/  \n搜狐源             http://mirrors.sohu.com/\n中科大源           http://mirrors.ustc.edu.cn/\n\n---\n# 系统下载\nCentOS官网        https://www.centos.org/\nUbuntu官网        http://www.ubuntu.com/download\nDebian官网        https://www.debian.org/\nFedora官网        https://getfedora.org/\nRedHat官网        https://www.redhat.com\n\n---\n# 运维\n在线man命令查询：http://man.linuxde.net/       \nLinux常用命令大全：\nhttp://www.cnblogs.com/DamonTang/archive/2012/10/17/2727942.html\n运维abcDocker：http://www.abcdocker.com/\n运维俱乐部：http://www.ywclub.org/\n\n持续集成（上线部署）：\n瓦力：http://www.walle-web.io\nJenkins：https://jenkins.io\n\n# 博客平台\n静态：\nHexo       https://hexo.io\nForbox     https://www.farbox.com\nJekyll     http://jekyll.com.cn\nPelican    http://blog.getpelican.com\n\n动态：\ntypecho    http://typecho.org\nWordPress  https://cn.wordpress.org\nZ-Blog     https://www.zblogcn.com\nEmlog      http://www.emlog.net\n\n# 持续集成\njenkins       http://www.jenkins.io/\nwalle(瓦力)   http://www.walle-web.io/\nCheungSSH     http://www.oschina.net/p/cheungssh\n\n# 批量安装Linux之搭建服务器\nhttp://www.centoscn.com/image-text/setup/2015/0126/4564.html\nhttp://www.centoscn.com/image-text/setup/2014/0912/3720.html\n\nhttps://my.oschina.net/alanlqc/blog/147047\n\n# 梯子\n**搬瓦工VPS(支持支付宝)**\n新手教程：http://www.tennfy.com/2020.html\n购买链接：https://bwh1.net/vps-hosting.php\n其他教程：http://www.tennfy.com/2083.html\n\nXX-Net:https://github.com/XX-net/XX-Net\n\nhttps://www.dou-bi.co\n\n各种SS：https://liyuans.com/archives/free-ss-account-collection.html\n\n如有乐享：http://51.ruyo.net\n\nMarkSS:http://markss.xyz\n\n---\n# 高精度IP定位\n普通精度IP定位：https://www.opengps.cn/Data/IP/IPSearch.aspx\n百度高精度IP定位：https://www.opengps.cn/Data/IP/IPHighAccuracy.aspx\n\n---\n# Docker\nDocker平台：https://www.daocloud.io\n\n---\n# Python生成二维码\n艺术二维码：https://github.com/sylnsfar/qrcode\n\n---\n# 素材\nPS 插件和小软件推荐：http://www.4kong.com\n\n---\n# 学习、技能\n**免费计算机编程类书籍**：https://haiwx.github.io/2016/09/13/CodeBooks/\n\n**HTML**：\n\nW3school：http://www.w3school.com.cn/index.html\nhttp协议：http://www.kancloud.cn/kancloud/tealeaf-http\nHtml5 tricks：http://www.html5tricks.com/jquery-china-map.html\nRGB值与色值：[RGB值与色值之间的联系](http://wenku.baidu.com/link?url=DA4A9qCNXngKm7Aa1_utP1Je4GLpa-pPm144H5X8uDsYk_K9xtGCNgRfMUSg_pJ3W3XMl8ueZZO1n8-WAEtpTd0mxPiS5TE4U6RQnEM1y97###)\n**Python**：\n\nPython简明教程：http://www.kuqin.com/abyteofpython_cn/\nPython之路：http://www.cnblogs.com/alex3714/articles/5465198.html#3519330\nPython在线手册：http://docs.pythontab.com/ \nPython 练手：https://www.zhihu.com/question/29372574\n\n\n\n\n**shell**：\n\n京峰免费shell课程：http://v.jfedu.net/web/course/2\ngithub年度shell：https://www.zhihu.com/question/28182203\nShell教程：http://c.biancheng.net/cpp/shell/\n\n\n\n\n**PHP**：\n学PHP最快要多久？2个月学PHP：http://www.zhihu.com/question/39078661?plg_nld=1&plg_uin=1&plg_auth=1&plg_nld=1&plg_usr=1&plg_vkey=1&plg_dev=1\n\n\n\n**版本控制**\n图形客户端：https://www.sourcetreeapp.com/\nGit知识：http://lib.csdn.net/base/git\n\nSVN：\n\n\n**web**\nnginx中文文档：http://www.nginx.cn/doc/index.html\n\n\n\n---\n# 别人的博客\n优秀Coding博客分享：https://coding.net/u/coding/p/awesome-blogs/git\nhttp://www.arao.me\nhttp://www.ilanni.com\nhttp://iwanli.me\nhttp://blog.foreverqing.com\nhttp://www.jokinkuang.info\nhttp://www.tianfeiyu.com\nhttp://yonsm.net\nhttp://tianshaojie.com   Android\nhttp://www.ezlippi.com \nhttp://www.joryhe.com\nhttps://www.maoshu.cc/page/6   猫叔Mac\nhttps://teddysun.com\nhttps://neveryu.github.io\nhttp://willxue.top\nhttp://zhishuo.info\nhttp://notes.iissnan.com\nhttp://blog.tangxiaozhu.com/p/45374067/\nhttp://www.tennfy.com/    VPS\nhttp://www.linuxde.net/\nhttp://www.cnblogs.com/vamei/\n\nLogin926:\nhttp://www.jianshu.com/p/53e0d2a617da\nhttp://login926.top\n\nhttps://haiwx.github.io\nhttps://cyang.tech\n\n卢松松的博客\nhttp://lusongsong.com/\n\nhttps://qqdie.com/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n---\n\n","source":"_posts/杂项/2016-11-11-常用网站链接.md","raw":"---\ntitle: 常用网站链接\ncategories:\n  - 杂项\ntags:\n  - 网页链接更新页\nabbrlink: 44568\ndate: 2016-11-11 14:25:27\n---\n\n一些方便个人查询的链接，而不用打开笔记，不喜欢请忽略。\n\n---\n# 环境搭建\n一键LNMP  http://lnmp.org\n一键LAMP  http://www.wdlinux.cn/bbs/forum-5-1.html\n\nphp官网     http://www.php.net/\nphpmyadmin  http://www.phpmyadmin.net/\nmysql       http://www.mysql.com/\n\t\nDiscuz!     http://www.discuz.net/forum.php\nWordPress   https://cn.wordpress.org/\n\n---\n# 网站管理\njoomla    https://www.joomla.org/\nWDCP      http://www.wdlinux.cn/wdcp/\nAMH       http://amh.sh/install.htm\nPHPCMS    http://www.phpcms.cn/\n\n---\n# yum源\n网易163源          http://mirrors.163.com/\n阿里云源           http://mirrors.aliyun.com/  \n搜狐源             http://mirrors.sohu.com/\n中科大源           http://mirrors.ustc.edu.cn/\n\n---\n# 系统下载\nCentOS官网        https://www.centos.org/\nUbuntu官网        http://www.ubuntu.com/download\nDebian官网        https://www.debian.org/\nFedora官网        https://getfedora.org/\nRedHat官网        https://www.redhat.com\n\n---\n# 运维\n在线man命令查询：http://man.linuxde.net/       \nLinux常用命令大全：\nhttp://www.cnblogs.com/DamonTang/archive/2012/10/17/2727942.html\n运维abcDocker：http://www.abcdocker.com/\n运维俱乐部：http://www.ywclub.org/\n\n持续集成（上线部署）：\n瓦力：http://www.walle-web.io\nJenkins：https://jenkins.io\n\n# 博客平台\n静态：\nHexo       https://hexo.io\nForbox     https://www.farbox.com\nJekyll     http://jekyll.com.cn\nPelican    http://blog.getpelican.com\n\n动态：\ntypecho    http://typecho.org\nWordPress  https://cn.wordpress.org\nZ-Blog     https://www.zblogcn.com\nEmlog      http://www.emlog.net\n\n# 持续集成\njenkins       http://www.jenkins.io/\nwalle(瓦力)   http://www.walle-web.io/\nCheungSSH     http://www.oschina.net/p/cheungssh\n\n# 批量安装Linux之搭建服务器\nhttp://www.centoscn.com/image-text/setup/2015/0126/4564.html\nhttp://www.centoscn.com/image-text/setup/2014/0912/3720.html\n\nhttps://my.oschina.net/alanlqc/blog/147047\n\n# 梯子\n**搬瓦工VPS(支持支付宝)**\n新手教程：http://www.tennfy.com/2020.html\n购买链接：https://bwh1.net/vps-hosting.php\n其他教程：http://www.tennfy.com/2083.html\n\nXX-Net:https://github.com/XX-net/XX-Net\n\nhttps://www.dou-bi.co\n\n各种SS：https://liyuans.com/archives/free-ss-account-collection.html\n\n如有乐享：http://51.ruyo.net\n\nMarkSS:http://markss.xyz\n\n---\n# 高精度IP定位\n普通精度IP定位：https://www.opengps.cn/Data/IP/IPSearch.aspx\n百度高精度IP定位：https://www.opengps.cn/Data/IP/IPHighAccuracy.aspx\n\n---\n# Docker\nDocker平台：https://www.daocloud.io\n\n---\n# Python生成二维码\n艺术二维码：https://github.com/sylnsfar/qrcode\n\n---\n# 素材\nPS 插件和小软件推荐：http://www.4kong.com\n\n---\n# 学习、技能\n**免费计算机编程类书籍**：https://haiwx.github.io/2016/09/13/CodeBooks/\n\n**HTML**：\n\nW3school：http://www.w3school.com.cn/index.html\nhttp协议：http://www.kancloud.cn/kancloud/tealeaf-http\nHtml5 tricks：http://www.html5tricks.com/jquery-china-map.html\nRGB值与色值：[RGB值与色值之间的联系](http://wenku.baidu.com/link?url=DA4A9qCNXngKm7Aa1_utP1Je4GLpa-pPm144H5X8uDsYk_K9xtGCNgRfMUSg_pJ3W3XMl8ueZZO1n8-WAEtpTd0mxPiS5TE4U6RQnEM1y97###)\n**Python**：\n\nPython简明教程：http://www.kuqin.com/abyteofpython_cn/\nPython之路：http://www.cnblogs.com/alex3714/articles/5465198.html#3519330\nPython在线手册：http://docs.pythontab.com/ \nPython 练手：https://www.zhihu.com/question/29372574\n\n\n\n\n**shell**：\n\n京峰免费shell课程：http://v.jfedu.net/web/course/2\ngithub年度shell：https://www.zhihu.com/question/28182203\nShell教程：http://c.biancheng.net/cpp/shell/\n\n\n\n\n**PHP**：\n学PHP最快要多久？2个月学PHP：http://www.zhihu.com/question/39078661?plg_nld=1&plg_uin=1&plg_auth=1&plg_nld=1&plg_usr=1&plg_vkey=1&plg_dev=1\n\n\n\n**版本控制**\n图形客户端：https://www.sourcetreeapp.com/\nGit知识：http://lib.csdn.net/base/git\n\nSVN：\n\n\n**web**\nnginx中文文档：http://www.nginx.cn/doc/index.html\n\n\n\n---\n# 别人的博客\n优秀Coding博客分享：https://coding.net/u/coding/p/awesome-blogs/git\nhttp://www.arao.me\nhttp://www.ilanni.com\nhttp://iwanli.me\nhttp://blog.foreverqing.com\nhttp://www.jokinkuang.info\nhttp://www.tianfeiyu.com\nhttp://yonsm.net\nhttp://tianshaojie.com   Android\nhttp://www.ezlippi.com \nhttp://www.joryhe.com\nhttps://www.maoshu.cc/page/6   猫叔Mac\nhttps://teddysun.com\nhttps://neveryu.github.io\nhttp://willxue.top\nhttp://zhishuo.info\nhttp://notes.iissnan.com\nhttp://blog.tangxiaozhu.com/p/45374067/\nhttp://www.tennfy.com/    VPS\nhttp://www.linuxde.net/\nhttp://www.cnblogs.com/vamei/\n\nLogin926:\nhttp://www.jianshu.com/p/53e0d2a617da\nhttp://login926.top\n\nhttps://haiwx.github.io\nhttps://cyang.tech\n\n卢松松的博客\nhttp://lusongsong.com/\n\nhttps://qqdie.com/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n---\n\n","slug":"杂项-2016-11-11-常用网站链接","published":1,"updated":"2016-12-12T07:17:57.311Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjm9001kd8pk9ukmybq2","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>一些方便个人查询的链接，而不用打开笔记，不喜欢请忽略。</p>\n<hr>\n<h1 id=\"环境搭建\"><a href=\"#环境搭建\" class=\"headerlink\" title=\"环境搭建\"></a>环境搭建</h1><p>一键LNMP  <a href=\"http://lnmp.org\" target=\"_blank\" rel=\"external\">http://lnmp.org</a><br>一键LAMP  <a href=\"http://www.wdlinux.cn/bbs/forum-5-1.html\" target=\"_blank\" rel=\"external\">http://www.wdlinux.cn/bbs/forum-5-1.html</a></p>\n<p>php官网     <a href=\"http://www.php.net/\" target=\"_blank\" rel=\"external\">http://www.php.net/</a><br>phpmyadmin  <a href=\"http://www.phpmyadmin.net/\" target=\"_blank\" rel=\"external\">http://www.phpmyadmin.net/</a><br>mysql       <a href=\"http://www.mysql.com/\" target=\"_blank\" rel=\"external\">http://www.mysql.com/</a></p>\n<p>Discuz!     <a href=\"http://www.discuz.net/forum.php\" target=\"_blank\" rel=\"external\">http://www.discuz.net/forum.php</a><br>WordPress   <a href=\"https://cn.wordpress.org/\" target=\"_blank\" rel=\"external\">https://cn.wordpress.org/</a></p>\n<hr>\n<h1 id=\"网站管理\"><a href=\"#网站管理\" class=\"headerlink\" title=\"网站管理\"></a>网站管理</h1><p>joomla    <a href=\"https://www.joomla.org/\" target=\"_blank\" rel=\"external\">https://www.joomla.org/</a><br>WDCP      <a href=\"http://www.wdlinux.cn/wdcp/\" target=\"_blank\" rel=\"external\">http://www.wdlinux.cn/wdcp/</a><br>AMH       <a href=\"http://amh.sh/install.htm\" target=\"_blank\" rel=\"external\">http://amh.sh/install.htm</a><br>PHPCMS    <a href=\"http://www.phpcms.cn/\" target=\"_blank\" rel=\"external\">http://www.phpcms.cn/</a></p>\n<hr>\n<h1 id=\"yum源\"><a href=\"#yum源\" class=\"headerlink\" title=\"yum源\"></a>yum源</h1><p>网易163源          <a href=\"http://mirrors.163.com/\" target=\"_blank\" rel=\"external\">http://mirrors.163.com/</a><br>阿里云源           <a href=\"http://mirrors.aliyun.com/\" target=\"_blank\" rel=\"external\">http://mirrors.aliyun.com/</a><br>搜狐源             <a href=\"http://mirrors.sohu.com/\" target=\"_blank\" rel=\"external\">http://mirrors.sohu.com/</a><br>中科大源           <a href=\"http://mirrors.ustc.edu.cn/\" target=\"_blank\" rel=\"external\">http://mirrors.ustc.edu.cn/</a></p>\n<hr>\n<h1 id=\"系统下载\"><a href=\"#系统下载\" class=\"headerlink\" title=\"系统下载\"></a>系统下载</h1><p>CentOS官网        <a href=\"https://www.centos.org/\" target=\"_blank\" rel=\"external\">https://www.centos.org/</a><br>Ubuntu官网        <a href=\"http://www.ubuntu.com/download\" target=\"_blank\" rel=\"external\">http://www.ubuntu.com/download</a><br>Debian官网        <a href=\"https://www.debian.org/\" target=\"_blank\" rel=\"external\">https://www.debian.org/</a><br>Fedora官网        <a href=\"https://getfedora.org/\" target=\"_blank\" rel=\"external\">https://getfedora.org/</a><br>RedHat官网        <a href=\"https://www.redhat.com\" target=\"_blank\" rel=\"external\">https://www.redhat.com</a></p>\n<hr>\n<h1 id=\"运维\"><a href=\"#运维\" class=\"headerlink\" title=\"运维\"></a>运维</h1><p>在线man命令查询：<a href=\"http://man.linuxde.net/\" target=\"_blank\" rel=\"external\">http://man.linuxde.net/</a><br>Linux常用命令大全：<br><a href=\"http://www.cnblogs.com/DamonTang/archive/2012/10/17/2727942.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/DamonTang/archive/2012/10/17/2727942.html</a><br>运维abcDocker：<a href=\"http://www.abcdocker.com/\" target=\"_blank\" rel=\"external\">http://www.abcdocker.com/</a><br>运维俱乐部：<a href=\"http://www.ywclub.org/\" target=\"_blank\" rel=\"external\">http://www.ywclub.org/</a></p>\n<p>持续集成（上线部署）：<br>瓦力：<a href=\"http://www.walle-web.io\" target=\"_blank\" rel=\"external\">http://www.walle-web.io</a><br>Jenkins：<a href=\"https://jenkins.io\" target=\"_blank\" rel=\"external\">https://jenkins.io</a></p>\n<h1 id=\"博客平台\"><a href=\"#博客平台\" class=\"headerlink\" title=\"博客平台\"></a>博客平台</h1><p>静态：<br>Hexo       <a href=\"https://hexo.io\" target=\"_blank\" rel=\"external\">https://hexo.io</a><br>Forbox     <a href=\"https://www.farbox.com\" target=\"_blank\" rel=\"external\">https://www.farbox.com</a><br>Jekyll     <a href=\"http://jekyll.com.cn\" target=\"_blank\" rel=\"external\">http://jekyll.com.cn</a><br>Pelican    <a href=\"http://blog.getpelican.com\" target=\"_blank\" rel=\"external\">http://blog.getpelican.com</a></p>\n<p>动态：<br>typecho    <a href=\"http://typecho.org\" target=\"_blank\" rel=\"external\">http://typecho.org</a><br>WordPress  <a href=\"https://cn.wordpress.org\" target=\"_blank\" rel=\"external\">https://cn.wordpress.org</a><br>Z-Blog     <a href=\"https://www.zblogcn.com\" target=\"_blank\" rel=\"external\">https://www.zblogcn.com</a><br>Emlog      <a href=\"http://www.emlog.net\" target=\"_blank\" rel=\"external\">http://www.emlog.net</a></p>\n<h1 id=\"持续集成\"><a href=\"#持续集成\" class=\"headerlink\" title=\"持续集成\"></a>持续集成</h1><p>jenkins       <a href=\"http://www.jenkins.io/\" target=\"_blank\" rel=\"external\">http://www.jenkins.io/</a><br>walle(瓦力)   <a href=\"http://www.walle-web.io/\" target=\"_blank\" rel=\"external\">http://www.walle-web.io/</a><br>CheungSSH     <a href=\"http://www.oschina.net/p/cheungssh\" target=\"_blank\" rel=\"external\">http://www.oschina.net/p/cheungssh</a></p>\n<h1 id=\"批量安装Linux之搭建服务器\"><a href=\"#批量安装Linux之搭建服务器\" class=\"headerlink\" title=\"批量安装Linux之搭建服务器\"></a>批量安装Linux之搭建服务器</h1><p><a href=\"http://www.centoscn.com/image-text/setup/2015/0126/4564.html\" target=\"_blank\" rel=\"external\">http://www.centoscn.com/image-text/setup/2015/0126/4564.html</a><br><a href=\"http://www.centoscn.com/image-text/setup/2014/0912/3720.html\" target=\"_blank\" rel=\"external\">http://www.centoscn.com/image-text/setup/2014/0912/3720.html</a></p>\n<p><a href=\"https://my.oschina.net/alanlqc/blog/147047\" target=\"_blank\" rel=\"external\">https://my.oschina.net/alanlqc/blog/147047</a></p>\n<h1 id=\"梯子\"><a href=\"#梯子\" class=\"headerlink\" title=\"梯子\"></a>梯子</h1><p><strong>搬瓦工VPS(支持支付宝)</strong><br>新手教程：<a href=\"http://www.tennfy.com/2020.html\" target=\"_blank\" rel=\"external\">http://www.tennfy.com/2020.html</a><br>购买链接：<a href=\"https://bwh1.net/vps-hosting.php\" target=\"_blank\" rel=\"external\">https://bwh1.net/vps-hosting.php</a><br>其他教程：<a href=\"http://www.tennfy.com/2083.html\" target=\"_blank\" rel=\"external\">http://www.tennfy.com/2083.html</a></p>\n<p>XX-Net:<a href=\"https://github.com/XX-net/XX-Net\" target=\"_blank\" rel=\"external\">https://github.com/XX-net/XX-Net</a></p>\n<p><a href=\"https://www.dou-bi.co\" target=\"_blank\" rel=\"external\">https://www.dou-bi.co</a></p>\n<p>各种SS：<a href=\"https://liyuans.com/archives/free-ss-account-collection.html\" target=\"_blank\" rel=\"external\">https://liyuans.com/archives/free-ss-account-collection.html</a></p>\n<p>如有乐享：<a href=\"http://51.ruyo.net\" target=\"_blank\" rel=\"external\">http://51.ruyo.net</a></p>\n<p>MarkSS:<a href=\"http://markss.xyz\" target=\"_blank\" rel=\"external\">http://markss.xyz</a></p>\n<hr>\n<h1 id=\"高精度IP定位\"><a href=\"#高精度IP定位\" class=\"headerlink\" title=\"高精度IP定位\"></a>高精度IP定位</h1><p>普通精度IP定位：<a href=\"https://www.opengps.cn/Data/IP/IPSearch.aspx\" target=\"_blank\" rel=\"external\">https://www.opengps.cn/Data/IP/IPSearch.aspx</a><br>百度高精度IP定位：<a href=\"https://www.opengps.cn/Data/IP/IPHighAccuracy.aspx\" target=\"_blank\" rel=\"external\">https://www.opengps.cn/Data/IP/IPHighAccuracy.aspx</a></p>\n<hr>\n<h1 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h1><p>Docker平台：<a href=\"https://www.daocloud.io\" target=\"_blank\" rel=\"external\">https://www.daocloud.io</a></p>\n<hr>\n<h1 id=\"Python生成二维码\"><a href=\"#Python生成二维码\" class=\"headerlink\" title=\"Python生成二维码\"></a>Python生成二维码</h1><p>艺术二维码：<a href=\"https://github.com/sylnsfar/qrcode\" target=\"_blank\" rel=\"external\">https://github.com/sylnsfar/qrcode</a></p>\n<hr>\n<h1 id=\"素材\"><a href=\"#素材\" class=\"headerlink\" title=\"素材\"></a>素材</h1><p>PS 插件和小软件推荐：<a href=\"http://www.4kong.com\" target=\"_blank\" rel=\"external\">http://www.4kong.com</a></p>\n<hr>\n<h1 id=\"学习、技能\"><a href=\"#学习、技能\" class=\"headerlink\" title=\"学习、技能\"></a>学习、技能</h1><p><strong>免费计算机编程类书籍</strong>：<a href=\"https://haiwx.github.io/2016/09/13/CodeBooks/\" target=\"_blank\" rel=\"external\">https://haiwx.github.io/2016/09/13/CodeBooks/</a></p>\n<p><strong>HTML</strong>：</p>\n<p>W3school：<a href=\"http://www.w3school.com.cn/index.html\" target=\"_blank\" rel=\"external\">http://www.w3school.com.cn/index.html</a><br>http协议：<a href=\"http://www.kancloud.cn/kancloud/tealeaf-http\" target=\"_blank\" rel=\"external\">http://www.kancloud.cn/kancloud/tealeaf-http</a><br>Html5 tricks：<a href=\"http://www.html5tricks.com/jquery-china-map.html\" target=\"_blank\" rel=\"external\">http://www.html5tricks.com/jquery-china-map.html</a><br>RGB值与色值：<a href=\"http://wenku.baidu.com/link?url=DA4A9qCNXngKm7Aa1_utP1Je4GLpa-pPm144H5X8uDsYk_K9xtGCNgRfMUSg_pJ3W3XMl8ueZZO1n8-WAEtpTd0mxPiS5TE4U6RQnEM1y97###\" target=\"_blank\" rel=\"external\">RGB值与色值之间的联系</a><br><strong>Python</strong>：</p>\n<p>Python简明教程：<a href=\"http://www.kuqin.com/abyteofpython_cn/\" target=\"_blank\" rel=\"external\">http://www.kuqin.com/abyteofpython_cn/</a><br>Python之路：<a href=\"http://www.cnblogs.com/alex3714/articles/5465198.html#3519330\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/alex3714/articles/5465198.html#3519330</a><br>Python在线手册：<a href=\"http://docs.pythontab.com/\" target=\"_blank\" rel=\"external\">http://docs.pythontab.com/</a><br>Python 练手：<a href=\"https://www.zhihu.com/question/29372574\" target=\"_blank\" rel=\"external\">https://www.zhihu.com/question/29372574</a></p>\n<p><strong>shell</strong>：</p>\n<p>京峰免费shell课程：<a href=\"http://v.jfedu.net/web/course/2\" target=\"_blank\" rel=\"external\">http://v.jfedu.net/web/course/2</a><br>github年度shell：<a href=\"https://www.zhihu.com/question/28182203\" target=\"_blank\" rel=\"external\">https://www.zhihu.com/question/28182203</a><br>Shell教程：<a href=\"http://c.biancheng.net/cpp/shell/\" target=\"_blank\" rel=\"external\">http://c.biancheng.net/cpp/shell/</a></p>\n<p><strong>PHP</strong>：<br>学PHP最快要多久？2个月学PHP：<a href=\"http://www.zhihu.com/question/39078661?plg_nld=1&amp;plg_uin=1&amp;plg_auth=1&amp;plg_nld=1&amp;plg_usr=1&amp;plg_vkey=1&amp;plg_dev=1\" target=\"_blank\" rel=\"external\">http://www.zhihu.com/question/39078661?plg_nld=1&amp;plg_uin=1&amp;plg_auth=1&amp;plg_nld=1&amp;plg_usr=1&amp;plg_vkey=1&amp;plg_dev=1</a></p>\n<p><strong>版本控制</strong><br>图形客户端：<a href=\"https://www.sourcetreeapp.com/\" target=\"_blank\" rel=\"external\">https://www.sourcetreeapp.com/</a><br>Git知识：<a href=\"http://lib.csdn.net/base/git\" target=\"_blank\" rel=\"external\">http://lib.csdn.net/base/git</a></p>\n<p>SVN：</p>\n<p><strong>web</strong><br>nginx中文文档：<a href=\"http://www.nginx.cn/doc/index.html\" target=\"_blank\" rel=\"external\">http://www.nginx.cn/doc/index.html</a></p>\n<hr>\n<h1 id=\"别人的博客\"><a href=\"#别人的博客\" class=\"headerlink\" title=\"别人的博客\"></a>别人的博客</h1><p>优秀Coding博客分享：<a href=\"https://coding.net/u/coding/p/awesome-blogs/git\" target=\"_blank\" rel=\"external\">https://coding.net/u/coding/p/awesome-blogs/git</a><br><a href=\"http://www.arao.me\" target=\"_blank\" rel=\"external\">http://www.arao.me</a><br><a href=\"http://www.ilanni.com\" target=\"_blank\" rel=\"external\">http://www.ilanni.com</a><br><a href=\"http://iwanli.me\" target=\"_blank\" rel=\"external\">http://iwanli.me</a><br><a href=\"http://blog.foreverqing.com\" target=\"_blank\" rel=\"external\">http://blog.foreverqing.com</a><br><a href=\"http://www.jokinkuang.info\" target=\"_blank\" rel=\"external\">http://www.jokinkuang.info</a><br><a href=\"http://www.tianfeiyu.com\" target=\"_blank\" rel=\"external\">http://www.tianfeiyu.com</a><br><a href=\"http://yonsm.net\" target=\"_blank\" rel=\"external\">http://yonsm.net</a><br><a href=\"http://tianshaojie.com\" target=\"_blank\" rel=\"external\">http://tianshaojie.com</a>   Android<br><a href=\"http://www.ezlippi.com\" target=\"_blank\" rel=\"external\">http://www.ezlippi.com</a><br><a href=\"http://www.joryhe.com\" target=\"_blank\" rel=\"external\">http://www.joryhe.com</a><br><a href=\"https://www.maoshu.cc/page/6\" target=\"_blank\" rel=\"external\">https://www.maoshu.cc/page/6</a>   猫叔Mac<br><a href=\"https://teddysun.com\" target=\"_blank\" rel=\"external\">https://teddysun.com</a><br><a href=\"https://neveryu.github.io\" target=\"_blank\" rel=\"external\">https://neveryu.github.io</a><br><a href=\"http://willxue.top\" target=\"_blank\" rel=\"external\">http://willxue.top</a><br><a href=\"http://zhishuo.info\" target=\"_blank\" rel=\"external\">http://zhishuo.info</a><br><a href=\"http://notes.iissnan.com\" target=\"_blank\" rel=\"external\">http://notes.iissnan.com</a><br><a href=\"http://blog.tangxiaozhu.com/p/45374067/\" target=\"_blank\" rel=\"external\">http://blog.tangxiaozhu.com/p/45374067/</a><br><a href=\"http://www.tennfy.com/\" target=\"_blank\" rel=\"external\">http://www.tennfy.com/</a>    VPS<br><a href=\"http://www.linuxde.net/\" target=\"_blank\" rel=\"external\">http://www.linuxde.net/</a><br><a href=\"http://www.cnblogs.com/vamei/\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/vamei/</a></p>\n<p>Login926:<br><a href=\"http://www.jianshu.com/p/53e0d2a617da\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/53e0d2a617da</a><br><a href=\"http://login926.top\" target=\"_blank\" rel=\"external\">http://login926.top</a></p>\n<p><a href=\"https://haiwx.github.io\" target=\"_blank\" rel=\"external\">https://haiwx.github.io</a><br><a href=\"https://cyang.tech\" target=\"_blank\" rel=\"external\">https://cyang.tech</a></p>\n<p>卢松松的博客<br><a href=\"http://lusongsong.com/\" target=\"_blank\" rel=\"external\">http://lusongsong.com/</a></p>\n<p><a href=\"https://qqdie.com/\" target=\"_blank\" rel=\"external\">https://qqdie.com/</a></p>\n<hr>\n","excerpt":"","more":"<p>一些方便个人查询的链接，而不用打开笔记，不喜欢请忽略。</p>\n<hr>\n<h1 id=\"环境搭建\"><a href=\"#环境搭建\" class=\"headerlink\" title=\"环境搭建\"></a>环境搭建</h1><p>一键LNMP  <a href=\"http://lnmp.org\">http://lnmp.org</a><br>一键LAMP  <a href=\"http://www.wdlinux.cn/bbs/forum-5-1.html\">http://www.wdlinux.cn/bbs/forum-5-1.html</a></p>\n<p>php官网     <a href=\"http://www.php.net/\">http://www.php.net/</a><br>phpmyadmin  <a href=\"http://www.phpmyadmin.net/\">http://www.phpmyadmin.net/</a><br>mysql       <a href=\"http://www.mysql.com/\">http://www.mysql.com/</a></p>\n<p>Discuz!     <a href=\"http://www.discuz.net/forum.php\">http://www.discuz.net/forum.php</a><br>WordPress   <a href=\"https://cn.wordpress.org/\">https://cn.wordpress.org/</a></p>\n<hr>\n<h1 id=\"网站管理\"><a href=\"#网站管理\" class=\"headerlink\" title=\"网站管理\"></a>网站管理</h1><p>joomla    <a href=\"https://www.joomla.org/\">https://www.joomla.org/</a><br>WDCP      <a href=\"http://www.wdlinux.cn/wdcp/\">http://www.wdlinux.cn/wdcp/</a><br>AMH       <a href=\"http://amh.sh/install.htm\">http://amh.sh/install.htm</a><br>PHPCMS    <a href=\"http://www.phpcms.cn/\">http://www.phpcms.cn/</a></p>\n<hr>\n<h1 id=\"yum源\"><a href=\"#yum源\" class=\"headerlink\" title=\"yum源\"></a>yum源</h1><p>网易163源          <a href=\"http://mirrors.163.com/\">http://mirrors.163.com/</a><br>阿里云源           <a href=\"http://mirrors.aliyun.com/\">http://mirrors.aliyun.com/</a><br>搜狐源             <a href=\"http://mirrors.sohu.com/\">http://mirrors.sohu.com/</a><br>中科大源           <a href=\"http://mirrors.ustc.edu.cn/\">http://mirrors.ustc.edu.cn/</a></p>\n<hr>\n<h1 id=\"系统下载\"><a href=\"#系统下载\" class=\"headerlink\" title=\"系统下载\"></a>系统下载</h1><p>CentOS官网        <a href=\"https://www.centos.org/\">https://www.centos.org/</a><br>Ubuntu官网        <a href=\"http://www.ubuntu.com/download\">http://www.ubuntu.com/download</a><br>Debian官网        <a href=\"https://www.debian.org/\">https://www.debian.org/</a><br>Fedora官网        <a href=\"https://getfedora.org/\">https://getfedora.org/</a><br>RedHat官网        <a href=\"https://www.redhat.com\">https://www.redhat.com</a></p>\n<hr>\n<h1 id=\"运维\"><a href=\"#运维\" class=\"headerlink\" title=\"运维\"></a>运维</h1><p>在线man命令查询：<a href=\"http://man.linuxde.net/\">http://man.linuxde.net/</a><br>Linux常用命令大全：<br><a href=\"http://www.cnblogs.com/DamonTang/archive/2012/10/17/2727942.html\">http://www.cnblogs.com/DamonTang/archive/2012/10/17/2727942.html</a><br>运维abcDocker：<a href=\"http://www.abcdocker.com/\">http://www.abcdocker.com/</a><br>运维俱乐部：<a href=\"http://www.ywclub.org/\">http://www.ywclub.org/</a></p>\n<p>持续集成（上线部署）：<br>瓦力：<a href=\"http://www.walle-web.io\">http://www.walle-web.io</a><br>Jenkins：<a href=\"https://jenkins.io\">https://jenkins.io</a></p>\n<h1 id=\"博客平台\"><a href=\"#博客平台\" class=\"headerlink\" title=\"博客平台\"></a>博客平台</h1><p>静态：<br>Hexo       <a href=\"https://hexo.io\">https://hexo.io</a><br>Forbox     <a href=\"https://www.farbox.com\">https://www.farbox.com</a><br>Jekyll     <a href=\"http://jekyll.com.cn\">http://jekyll.com.cn</a><br>Pelican    <a href=\"http://blog.getpelican.com\">http://blog.getpelican.com</a></p>\n<p>动态：<br>typecho    <a href=\"http://typecho.org\">http://typecho.org</a><br>WordPress  <a href=\"https://cn.wordpress.org\">https://cn.wordpress.org</a><br>Z-Blog     <a href=\"https://www.zblogcn.com\">https://www.zblogcn.com</a><br>Emlog      <a href=\"http://www.emlog.net\">http://www.emlog.net</a></p>\n<h1 id=\"持续集成\"><a href=\"#持续集成\" class=\"headerlink\" title=\"持续集成\"></a>持续集成</h1><p>jenkins       <a href=\"http://www.jenkins.io/\">http://www.jenkins.io/</a><br>walle(瓦力)   <a href=\"http://www.walle-web.io/\">http://www.walle-web.io/</a><br>CheungSSH     <a href=\"http://www.oschina.net/p/cheungssh\">http://www.oschina.net/p/cheungssh</a></p>\n<h1 id=\"批量安装Linux之搭建服务器\"><a href=\"#批量安装Linux之搭建服务器\" class=\"headerlink\" title=\"批量安装Linux之搭建服务器\"></a>批量安装Linux之搭建服务器</h1><p><a href=\"http://www.centoscn.com/image-text/setup/2015/0126/4564.html\">http://www.centoscn.com/image-text/setup/2015/0126/4564.html</a><br><a href=\"http://www.centoscn.com/image-text/setup/2014/0912/3720.html\">http://www.centoscn.com/image-text/setup/2014/0912/3720.html</a></p>\n<p><a href=\"https://my.oschina.net/alanlqc/blog/147047\">https://my.oschina.net/alanlqc/blog/147047</a></p>\n<h1 id=\"梯子\"><a href=\"#梯子\" class=\"headerlink\" title=\"梯子\"></a>梯子</h1><p><strong>搬瓦工VPS(支持支付宝)</strong><br>新手教程：<a href=\"http://www.tennfy.com/2020.html\">http://www.tennfy.com/2020.html</a><br>购买链接：<a href=\"https://bwh1.net/vps-hosting.php\">https://bwh1.net/vps-hosting.php</a><br>其他教程：<a href=\"http://www.tennfy.com/2083.html\">http://www.tennfy.com/2083.html</a></p>\n<p>XX-Net:<a href=\"https://github.com/XX-net/XX-Net\">https://github.com/XX-net/XX-Net</a></p>\n<p><a href=\"https://www.dou-bi.co\">https://www.dou-bi.co</a></p>\n<p>各种SS：<a href=\"https://liyuans.com/archives/free-ss-account-collection.html\">https://liyuans.com/archives/free-ss-account-collection.html</a></p>\n<p>如有乐享：<a href=\"http://51.ruyo.net\">http://51.ruyo.net</a></p>\n<p>MarkSS:<a href=\"http://markss.xyz\">http://markss.xyz</a></p>\n<hr>\n<h1 id=\"高精度IP定位\"><a href=\"#高精度IP定位\" class=\"headerlink\" title=\"高精度IP定位\"></a>高精度IP定位</h1><p>普通精度IP定位：<a href=\"https://www.opengps.cn/Data/IP/IPSearch.aspx\">https://www.opengps.cn/Data/IP/IPSearch.aspx</a><br>百度高精度IP定位：<a href=\"https://www.opengps.cn/Data/IP/IPHighAccuracy.aspx\">https://www.opengps.cn/Data/IP/IPHighAccuracy.aspx</a></p>\n<hr>\n<h1 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h1><p>Docker平台：<a href=\"https://www.daocloud.io\">https://www.daocloud.io</a></p>\n<hr>\n<h1 id=\"Python生成二维码\"><a href=\"#Python生成二维码\" class=\"headerlink\" title=\"Python生成二维码\"></a>Python生成二维码</h1><p>艺术二维码：<a href=\"https://github.com/sylnsfar/qrcode\">https://github.com/sylnsfar/qrcode</a></p>\n<hr>\n<h1 id=\"素材\"><a href=\"#素材\" class=\"headerlink\" title=\"素材\"></a>素材</h1><p>PS 插件和小软件推荐：<a href=\"http://www.4kong.com\">http://www.4kong.com</a></p>\n<hr>\n<h1 id=\"学习、技能\"><a href=\"#学习、技能\" class=\"headerlink\" title=\"学习、技能\"></a>学习、技能</h1><p><strong>免费计算机编程类书籍</strong>：<a href=\"https://haiwx.github.io/2016/09/13/CodeBooks/\">https://haiwx.github.io/2016/09/13/CodeBooks/</a></p>\n<p><strong>HTML</strong>：</p>\n<p>W3school：<a href=\"http://www.w3school.com.cn/index.html\">http://www.w3school.com.cn/index.html</a><br>http协议：<a href=\"http://www.kancloud.cn/kancloud/tealeaf-http\">http://www.kancloud.cn/kancloud/tealeaf-http</a><br>Html5 tricks：<a href=\"http://www.html5tricks.com/jquery-china-map.html\">http://www.html5tricks.com/jquery-china-map.html</a><br>RGB值与色值：<a href=\"http://wenku.baidu.com/link?url=DA4A9qCNXngKm7Aa1_utP1Je4GLpa-pPm144H5X8uDsYk_K9xtGCNgRfMUSg_pJ3W3XMl8ueZZO1n8-WAEtpTd0mxPiS5TE4U6RQnEM1y97###\">RGB值与色值之间的联系</a><br><strong>Python</strong>：</p>\n<p>Python简明教程：<a href=\"http://www.kuqin.com/abyteofpython_cn/\">http://www.kuqin.com/abyteofpython_cn/</a><br>Python之路：<a href=\"http://www.cnblogs.com/alex3714/articles/5465198.html#3519330\">http://www.cnblogs.com/alex3714/articles/5465198.html#3519330</a><br>Python在线手册：<a href=\"http://docs.pythontab.com/\">http://docs.pythontab.com/</a><br>Python 练手：<a href=\"https://www.zhihu.com/question/29372574\">https://www.zhihu.com/question/29372574</a></p>\n<p><strong>shell</strong>：</p>\n<p>京峰免费shell课程：<a href=\"http://v.jfedu.net/web/course/2\">http://v.jfedu.net/web/course/2</a><br>github年度shell：<a href=\"https://www.zhihu.com/question/28182203\">https://www.zhihu.com/question/28182203</a><br>Shell教程：<a href=\"http://c.biancheng.net/cpp/shell/\">http://c.biancheng.net/cpp/shell/</a></p>\n<p><strong>PHP</strong>：<br>学PHP最快要多久？2个月学PHP：<a href=\"http://www.zhihu.com/question/39078661?plg_nld=1&amp;plg_uin=1&amp;plg_auth=1&amp;plg_nld=1&amp;plg_usr=1&amp;plg_vkey=1&amp;plg_dev=1\">http://www.zhihu.com/question/39078661?plg_nld=1&amp;plg_uin=1&amp;plg_auth=1&amp;plg_nld=1&amp;plg_usr=1&amp;plg_vkey=1&amp;plg_dev=1</a></p>\n<p><strong>版本控制</strong><br>图形客户端：<a href=\"https://www.sourcetreeapp.com/\">https://www.sourcetreeapp.com/</a><br>Git知识：<a href=\"http://lib.csdn.net/base/git\">http://lib.csdn.net/base/git</a></p>\n<p>SVN：</p>\n<p><strong>web</strong><br>nginx中文文档：<a href=\"http://www.nginx.cn/doc/index.html\">http://www.nginx.cn/doc/index.html</a></p>\n<hr>\n<h1 id=\"别人的博客\"><a href=\"#别人的博客\" class=\"headerlink\" title=\"别人的博客\"></a>别人的博客</h1><p>优秀Coding博客分享：<a href=\"https://coding.net/u/coding/p/awesome-blogs/git\">https://coding.net/u/coding/p/awesome-blogs/git</a><br><a href=\"http://www.arao.me\">http://www.arao.me</a><br><a href=\"http://www.ilanni.com\">http://www.ilanni.com</a><br><a href=\"http://iwanli.me\">http://iwanli.me</a><br><a href=\"http://blog.foreverqing.com\">http://blog.foreverqing.com</a><br><a href=\"http://www.jokinkuang.info\">http://www.jokinkuang.info</a><br><a href=\"http://www.tianfeiyu.com\">http://www.tianfeiyu.com</a><br><a href=\"http://yonsm.net\">http://yonsm.net</a><br><a href=\"http://tianshaojie.com\">http://tianshaojie.com</a>   Android<br><a href=\"http://www.ezlippi.com\">http://www.ezlippi.com</a><br><a href=\"http://www.joryhe.com\">http://www.joryhe.com</a><br><a href=\"https://www.maoshu.cc/page/6\">https://www.maoshu.cc/page/6</a>   猫叔Mac<br><a href=\"https://teddysun.com\">https://teddysun.com</a><br><a href=\"https://neveryu.github.io\">https://neveryu.github.io</a><br><a href=\"http://willxue.top\">http://willxue.top</a><br><a href=\"http://zhishuo.info\">http://zhishuo.info</a><br><a href=\"http://notes.iissnan.com\">http://notes.iissnan.com</a><br><a href=\"http://blog.tangxiaozhu.com/p/45374067/\">http://blog.tangxiaozhu.com/p/45374067/</a><br><a href=\"http://www.tennfy.com/\">http://www.tennfy.com/</a>    VPS<br><a href=\"http://www.linuxde.net/\">http://www.linuxde.net/</a><br><a href=\"http://www.cnblogs.com/vamei/\">http://www.cnblogs.com/vamei/</a></p>\n<p>Login926:<br><a href=\"http://www.jianshu.com/p/53e0d2a617da\">http://www.jianshu.com/p/53e0d2a617da</a><br><a href=\"http://login926.top\">http://login926.top</a></p>\n<p><a href=\"https://haiwx.github.io\">https://haiwx.github.io</a><br><a href=\"https://cyang.tech\">https://cyang.tech</a></p>\n<p>卢松松的博客<br><a href=\"http://lusongsong.com/\">http://lusongsong.com/</a></p>\n<p><a href=\"https://qqdie.com/\">https://qqdie.com/</a></p>\n<hr>\n"},{"title":"创业手册","top":10,"abbrlink":6179,"date":"2016-12-08T06:46:20.000Z","keywords":"创业手册","_content":"\n我们花了很多时间在为创业团队提供建议。尽管一对一的建议会一直很重要，但是我们认为对广泛建议进行提炼，并提供给 YC 和 YC 旗下公司会有助于 YC 的成长。所以我们觉得我们需要把这些都公开给大家。\n\n本剧本适合且只适合刚来到创业世界的人阅读。本剧本大部分内容对于已阅读过我们的合伙人所写的东西的人来说已不新鲜 — 本剧本的目的就是将内容做成合集。关于如何规模化一家创业公司的说明或许会有第二部分 — 但本剧本已基本覆盖了创业起步的部分。\n\n作为一家创业公司，你的目标就是做一些用户喜欢的东西。如果你要做的话，接下来你还需要考虑如何得到更多用户。但是这第一部分是非常关键的 — 思考下今天非常成功的公司吧。他们都开始于一个非常受用户欢迎且用户自愿为其宣传的产品。如果你在这个部分失败了，你就永远失败了。如果你欺骗你自己，认为你的用户喜欢你的产品但实际上他们不喜欢，你仍然会失败。\n\n创业公司坟墓里充斥着这类自认为他们可以跳过此步的人。\n\n打造一个受一小群用户热爱的产品会比打造一个受很多用户喜欢（请注意”喜欢”与”热爱”的区别）的产品更好。尽管”一小群热爱”和”一大群喜欢”看起来的积极感觉一样多，但比起后者需要将用户从”喜欢”转化为”热爱”，前者获取更多用户会很简单。\n\n如果要用一个词汇来警告一个准备创业的人：（你的产品）弱爆了！我们从 YC 创业者中收集到的最一致的一条反馈是，创业是他们无法想象的难，因为他们没有一个针对此工作和启动强度的框架。加入一家正在火箭飞船轨道上高速发展的创业公司是更为明智的选择。\n\n在另一方面，实际上创建一个创业公司并不会对你的职业生涯产生很多威胁 — 如果你非常善于技术的话，失败了还会找到工作。大部分人非常不善于评估风险。我个人认为更为危险的是你有一个自己非常热衷的想法和产品，但你仍然待在一个安全，舒适，不过瘾的工作岗位上。\n\n为了创业成功，你需要有：一个好想法（包括一个好市场），一个好团队，一个好产品，和强大的执行。\n\n---\n# 第一部分\n## 想法\n在 YC ，我们首先会问创业团队他们正在打造的产品以及其理由。对于这个问题我们期待清晰且简洁的答案。这将作为对创始人及其想法的评估。作为一个创始人，能够清晰地思考并交流是很重要的 — 对于招聘，融资，销售，等其他。想法在广义上需要可以清楚地表达并传播，复杂的想法常常是其混乱思维和虚构问题的表现。如果一个想法没能让第一次听到的人感到兴奋，这并不好。\n\n**我们问的另外一个问题是：谁迫切需要他们的产品。**\n\n最理想的情况是，你自己也是目标用户。其次的理想情况是，你对目标用户非常了解。\n\n如果一个公司已经有用户了，我们会问其用户数量及其增长速度。我们会分析该产品为什么没有增长得更快，我们会着重搞清楚其用户是否真正热爱其产品。很多情况下是他们告诉他们的朋友去用这个产品，而不是公司推动其增长。我们还会问其公司是否已开始盈利，如果不，为什么？\n\n如果该公司还没有用户，我们会考虑搭建最小化的产品以便测试该想法—比如，如果我们从最佳用户体验的反方向入手，我们会先去做内核部分。\n\n对想法进行测试的办法无非是先启动它并去看结果是什么，或者去贩卖它（比如：在你开始写代码前去获得一份用户意向书。）前者对了解用户想法更好（用户或许会告诉你他们将使用你的产品，但实际上并没有），后者对面向企业的想法更佳（如果一个公司告诉你他们会使用你的产品，那就去做吧。）特别的，如果你是一家面向企业的公司，我们会问你首要的问题就是，你有没有一个用户会买你正在打造的产品的意向或信息。对于大多数生物科技和硬件科技公司，他们检测想法的办法是先和潜在用户聊聊并试图找出可以做出第一代产品的最小集合。\n\n让你的想法和你从用户得到的反馈一起成长是很重要的。你需要非常了解你的用户—这对于你评估一个想法，打造一个产品，和创办一个好公司至关重要。\n\n正如前面提到的，创业是非常难的。它需要很长时间，及持续的异常的努力。创始人及其员工需要有共同的使命感去维系它。所以我们会问创始人为什么他要创办这个特别的公司。.\n\n我们还会问该公司什么时候会形成垄断。关于这个问题有很多描述，但我们使用了 Peter Thiel 的词汇。显然，我们不希望你的公司通过不道德的手段攻击竞争对手。相反，我们会寻找那些在规模化更有力且难以被复制的公司。\n\n最后，我们询问市场。市场今天有多大，市场增长得多快，以及为什么这个市场会在十年内具有大规模。我们试图搞清楚为什么这个市场在快速发展，以及为什么这是一个适合创业公司发展的市场。我们喜欢那种当主流技术正在发生变化但大部分人未察觉到的 — 大公司不擅长此道。还有一个与直觉相反的最佳答案是去切一个小蛋糕的大部分（而不是一个大蛋糕的小部分）。\n\n**与想法有关的其他思考：**\n\n比起一些衍生产品我们更喜欢新东西。很多大公司都开始于一些全新的东西（一个广被接受的关于”全新”的定义是 10 倍的好。）如果已经有 10 家其他公司在同一时间做同样的事情，这听起来像已存在的东西，我们对此怀疑态度。\n\n一个违反直觉的原因是，做一些新东西比做衍生且简单的产品是更容易的。而且如果你是前者的话人们会帮助你；如果你是后者，他们不会帮助你。\n\n好想法都是听起来很糟糕但实际上不错的。所以你不需要对你的想法过于保密 — 如果这确实是一个好想法，那它听起来不会像值得剽窃的想法。如果它听起来很值得剽窃，有好想法的人比将其执行并成立公司去实践的人多 1000 倍。如果你告诉别人你在做什么，人们或许会帮助你。\n\n谈到告诉别人你的想法 — 尽管当人们第一次听到它时感到兴奋是很重要的，很大一部分人会说你的想法太烂了。或许他们是正确的，或许他们不擅长评估创业公司，又或者他们仅仅是嫉妒。不管原因如何，这种情况会时常发生，他会很伤害，或者尽管你认为自己不会受其影响，你仍然会。此时你越保持自信并不被其他人影响，你就越会保持好状态。不管你取得了多大的成功，喷子永远不会走开。\n\n如果你没有想法但是想成立一个创业公司呢？你最好别。有了好想法后再通过创业公司让其传播到世界才是上策。\n\n我们曾经尝试过一个实验，资助一些没有想法的初创团队，在一个他们在得到资助后着陆在一个有前途的想法上。\n\n他们都失败了。我认为其一部分原因就是好的创始人倾向于有很多好想法（经常是过多了）。但你有一家创业公司后面临的更大的一个问题是，你需要赶快想出一个好想法，因为这已经是一家正式公司了，你的想法不能太疯狂。你最终获得一个貌似有理的但走歪的想法。这就是核心威胁。\n\n因此，最好不要过于积极地强迫自己想出创业点子。相反，学习很多不同的东西。练习发现问题，那些似乎效率不高的事情，和重大技术转变。为你觉得有趣的项目工作。走出自己的方式去和聪明，有趣的人打交道。在某些时候，想法就出现了。\n\n---\n# 第二部分\n## 一个好团队\n\n平庸的团队建不成伟大的公司。我们看创始人最重要的一个事情就是其实力。当我做后期投资时，我同样看重创始人的雇员的实力。\n\n什么让一个创始人伟大？最重要的特质就是永不止步，决心，坚韧性和智慧。智力与激情也是很重要的。这些特质都比经验和 “擅长 X 语言和 Y 框架” 更为重要。\n\n我们发现最成功的创始人都是一些具有低应力处理事务的人，因为你会感觉到”不管这件事是什么，他 / 她将做成这件事。”有时你可以通过意志的纯粹力量取得成功。\n\n好的创始人有一些看似矛盾的特质。一个重要的例子就是刚性和柔性。当创业涉及到几乎一切事情时，你需要保持对公司和它的使命的核心强烈信念，并依然非常灵活且愿意学习新的东西。\n\n最好的创始人都异常敏捷。这是果断，专注，力度，并把事情做好的能力的一个指标。\n\n不善言谈的创始人都很糟糕。沟通是一项创始人必备的技能 — 实际上，我认为这是最重要的且常被忽视的创始人技能。\n\n科技创业公司必须至少有一个创办人可以建立公司的产品或服务，以及至少一个创始人（或可以成为）擅长销售和与用户沟通。这可以是同一个人。\n\n当你在选择合伙人时请考虑这些标准 — 这将会是你做过最重要的决定，而且这一步经常会被做得很随意。你需要一个你非常了解的人，而不是你在合伙人聚会中刚遇到的一个人。你可以通过更多信息来评估你的合伙人，你不能走错这一步。同时，在某些时候，创业公司的期望值可能处于 X 坐标轴的下方。此时如果你和你的联合创始人预先存在联系，你们不能甩掉一个人并保持前行。联合创始人的关系破裂是一个早期创业团队死亡的最大原因，我们会常常看到联合创始人们抱着共同目的去成立一家创业公司。\n\n目前为止最好的情况是，找一个好的联合创始人。其次的最佳做法是成为一个独立的创业者。目前最坏的情况是，找一个不好的联合创始人。如果事情没搞头了，你应该迅速分道扬镳。\n\n一个关于净资产的简报：随着时间的推移，关于股权分配的话题并没有变简单 — 所以早点把它做好吧。平分是最好的选择，为了防止当两个创始人分离时造成死锁，有一个人多拿一份股权也是不错的选择。\n\n---\n# 第三部分\n## 一个好产品\n\n有一个好产品，这就是通往成功的秘密。这是所有伟大的公司仅有的唯一共同点。\n\n如果你不去做一个你的用户会喜欢的东西你最终会失败。尽管创始人都去寻找其他技巧。但创业是你人生中唯一不需要寻找技巧的事情。\n\n一个好产品是保持长期增长的唯一方法。最终你的公司会变很大以至于所有的增长黑技巧（Growth Hack）都不起作用，你需要借助那些期望用你的产品的用户来保持增长。这是关于超级成功的公司最重要的事情。别无他法。想一下所有非常成功的技术公司—他们都在做这件事。\n\n你需要在你的公司里建立一个“产品改进引擎”。你应该和你的用户交谈，并观看他们使用你的产品，找出哪些部分是分杆，然后把你的产品做更好。然后再重复做一遍。这个周期应该是该公司的头号重点，它应该推动一切。如果你每周都能提高你的产品 5%，它就真的会复合。\n\n这个周期的重复速率越快，公司通常就越好。在 YC，我们告诉创业者应除了吃，睡，运动，并花时间与他们的亲人外，要专注建立产品与用户交流。\n\n要把这个周期做好，你还需与你的用户更进一步接触。甚至是观察用户使用你的产品。如果可以的话，请坐到他们的办公室。衡量他对你说的和他实际上在做的。你不应该在你和用户之间加入中间人，这个状态保持越久越好 — 这意味着创始人需要做销售，客服，等等。\n\n尽全力搞懂你的用户。真正弄清楚他们需要什么，在哪里找到他们，以及他们在哪里感到不满。\n\n“从小事做起（Do things that don’t scale）” 显然已成为了创业团队的口头禅。 通常你需要在一定时间招募种子用户（Ben Silbermann 过去常在咖啡馆邀请陌生人使用 Pinterest）然后打造一款他们需要的产品。很多创始人讨厌 这一步，然后仅仅想在媒体宣传其产品。但那常常不会成功。人工招募用户，然后去做一款你的种子用户会告诉他们朋友的好产品吧。\n\n你还需要把东西分成小片，一边走一边重复和适应。不要尝试做很长期的计划，特别不要把成批的东西做一次公开发行。你需要从简单处着手 — 其表面积越小越好 — 然后将其更快地打造出来。实际上，简单永远是好的，你需要保持你的产品和公司尽可能简单。\n\n我们都会问创业团队一些相同问题：用户使用你的产品超过一次了吗？你的用户对你的产品狂热吗？你的用户会在你的公司消失后变得很沮丧吗？你的用户会在不是你要求的情况下向别人推荐你的产品吗？如果你是 B2B 的公司，你有至少 10 家付费用户吗？\n\n如果没有，那这就是潜在的问题，然后我们会告诉该公司把产品做的更好。对于一家公司为何没在成长的原因我都持怀疑态度 — 因为大多数情况下真正的原因是他们的产品还不够好。\n\n但如果初创团队不清楚他们接下来要对其产品干什么，或者他们的产品就是不够好，我们就派他们去找用户谈谈。虽然这也不是每次都会有效 — 人们会问福特寻求更快的马 — 但这种办法会常常惊人的有效。事实上，更普遍的是，在公司内有任何分歧时，请和你的用户谈谈。\n\n最好的创始人都很关心产品质量，甚至是看似无关紧要的细节。但这看来是有效的办法。同时，“产品” 应包括所有与该公司的用户的交互。你需要提供优秀的支持，好的销售互动等。\n\n请记住，如果你没有做出好产品，什么东西都救不了你。\n\n---\n# 第四部分\n## 好的执行\n\n尽管打造一款好产品是重要的，但这还不够。你还需要将其转变成一个好公司，你必须亲自去做 — 雇佣一个“经验丰富的经理”去帮你招聘这种很常见的行为是失败创业公司的墓地。在创业中很长一段时间内，你不能把招聘这个职位外包出去。\n\n你还需要盈利，这听起来很明显。这时候你该考虑如何盈利了。\n\nCEO 的唯一职位描述就是保证公司成功。作为 CEO 即使你有很多不足，你仍可以雇佣那些弥补你的不足的人才来让他们来把事情做好。有经验的 CEO 与一个理想的工商管理硕士可能会有技能的差距，但他/她也是不会理解用户，不会有和你相同的产品嗅觉，也并不会太在意产品。\n\n## 成长\n\n增长和动力是伟大执行的关键。（只要不是 “以 90 美分的价格出售 1 美元”的）增长就解决了所有的问题，而缺乏增长的问题除了增长这个办法外无解的。如果你在增长，就会感觉到你在成功，大家都很高兴。如果你在增长，每个时间段都会有新的角色和责任，大家会觉得自己的事业正在进步。如果你不在增长，这感觉就像你失败了，大家不快乐并且离开。如果你不在增长，大家就只会推卸责任和抱怨了。\n\n创业公司没有动力的话，创始人和雇员都会焦灼起来，很难形容的沮丧。\n\n好的执行的首要方针就是“永不失去动力”。但是你该如何做到呢？\n\n最重要的办法就是让它成为你的首要任务。公司会按 CEO 去执行。为公司优化找到一个指标是很具价值的，也值得花时间去找到正确的增长指标。如果你关注增长，然后设定一个目标，公司其他人都会专注于该目标。\n\n**以下是一些例子**。\n\nAirbnb 的创办者构建了一个他们想达到的前瞻性图谱。他们把这个图谱挂到了所有地方 — 在他们的冰箱上，桌子上，卫生间镜子上。如果他们这周达到了目标，那很好，如果没有，他们就会一直对此进行研究。\n\nMark Zuckerberg 曾说道 Facebook 最重要的革新就是在增长缓慢时设立了一个增长团队。在其公司这一团队是（也许仍然是）一个最负盛名的团体—每个人都知道它是多么重要。\n\n对增长不利的东西要记录下来。以公司的角度去讨论你如何可以增长得更快。如果你知道局限是什么，你自然需要思考如何解决它。\n\n对于你准备去做的任何一件事，请问自己“这是优化增长的最佳做法吗？”比如，去参加一个会议并不是优化增长的最佳做法，除非你期望去那里销售你的产品。\n\n透明公开的内部指标报表（包括财务状况）是一个很好的事情。因为某些原因，创始人总是很害怕这一点。但它是好的，可以让整个公司专注于增长。专注于指标的员工和他们目前做到的状况有直接联系。如果你隐藏了这些标准，人们很难集中在他们身上。\n\n关于指标，请勿欺骗自己设定虚高的指标。这里常见的问题就是专注于注册量而忽视了留存。而对于增长，留存是和获取新用户同样重要的。\n\n建立一个内部节奏去保持动力也是很重要的。你的增长过程需要一个“律动” — 新功能，客户，新员工，盈利里程碑，合作伙伴，等等其他需要内部和外部去发布的。\n\n你应该设定富有野心的但大体可以实现的指标，并每个月审查进度。庆祝成功吧！保持将策略告诉内部人员，告诉每个员工你从客户那里听到的东西，等等。你在内部越分享更多 — 包括好消息和坏消息 — 你的公司就会越好。\n\n这里有几个创始人经常陷入的陷阱。其中一个就是如果公司疯狂成长但一切都看起来难以置信的破败和低效率，大家都担心其破碎。在实践中，这似乎很少发生（我可以指出 Friendster 是一个最近因为技术债务而死亡的创业公司。）相反，如果你增长很快但其他事情没有优化，这其实是很好的事情 — 你需要做的就是解决它以得到更快的增长！我最喜欢投资那些增长很快但未做优化的公司 — 他们都被严重低估了。\n\n另一个相关的陷阱就是有关长期问题—比如“我们在规模大后该怎么办？”答案就是等你先把规模做大后再考虑这个问题吧。很多创业公司在考虑这个问题时死掉了，因为他们没有想通。一个好经验就是只考虑比目前 10 倍规模大的情况。大多数早期创业团队都应该把“从小事做起”贴到他们的墙上并执行它。比如，好的创业公司常常在早期做很好的客户服务，不好的公司则担心这些小钱不够多（而不做）。但是好的客户服务会让种子用户充满惊喜，随着产品越来越好你需要减少客服工作，因为你已经知道客户纠结的东西并对此提高了产品/体验。（顺便强调下，这是个很好的例子 —去做好客服工作）\n\n关于 “从小事做起” 这里有个很大的误区 — 这不应该成为你最终不去盈利的借口。在早期有差点的单元经济是允许的，但你在后期如果还没做好盈利的话，你最好去找个好点的理由吧。\n\n另外一个陷阱是在增长绝对数值变坏时（尽管在比例上看起来还好）变得沮丧。对于指数增长，人类的直觉很不擅长。请提醒你的团队，所有的大公司都增长自一个小团队。\n\n一些最大的陷阱是创始人相信会带来增长，但在实践中长时间几乎从不。常见的例子是处理其他公司和“大型新闻发布会”。小心这些，并了解他们实际上从未有效。相反，所有的大公司都通过 — 打造一个用户喜爱的产品，在起初亲自招募用户，然后测试大量的增长策略（广告，引荐计划，销售和营销等），并做更多的工作。问你的客户在哪里找到更多的类似你的用户的人。\n\n请记住销售和市场营销不是差的词汇。尽管如果你没有一个伟大的产品，他们也不会拯救你，但他们可以帮助加速增长。如果你是一个面向企业的公司，那这是你的公司必备的。\n\n特别是不要害怕去销售。创始人中至少要有一个擅长邀请人们使用你的产品并付费的人。\n\nAlex Schultz 有一个关于消费产品增长的很值得观看的讲座。 对于 B2B 产品，我认为正确的答案就是一直跟踪每月的收入增长，并记住更长的销售周期意味着前几个月的数据不会好看的（虽然有时向创业公司销售，使其作为种子用户可以解决这个问题）。\n\n---\n## 专注 & 强度\n\n如果我必须把我的建议提炼成两个词，我会挑专注和力度。这些词汇似乎真的匹配于我所认识的最优秀的创始人。\n\n他们不屈地专注于他们的产品和增长。事实上，他们不想做其他任何事情，他们说很多“不”（这是很难的，因为存在很多刚开始创业的人喜欢做新的事情。）\n\n一个通用规则是，在你控制好了第一件事之前不要让你的公司开始做下一件事。我认识的好公司没有同时开始做很多事的，他们要确认才去做，并一直做好。你可以做的事情比你想象的要少得多。一个非常常见的创业公司死亡的原因是做太多错误的事情。优先次序是关键且困难的。（同样重要的是要确定公司的优先顺序是设置你自己的战术优先级。我发现最适合我的是一张笔记的清单，每天少于 3 个的主要任务和少于 30 个的小任务，还有一张年度的总体目标的工作清单。）\n\n虽然伟大的创始人不做很多大的项目，他们要做就做到极致。他们把事情做得很快。这是是决定性的，但你有一家创业公司时这是很难的 — 你会得到很多矛盾的意见，这都是因为做一件事有多种方式，且因为存在很多不好的建议。好的创始人听取所有的建议，然后迅速作出自己的决定。 .\n\n请注意，这并不意味着做任何事情都要做到极致—这是很重要的一点。你必须选择去做正确的事情。Paul Buchheit 说过，要去找到用 10% 的努力得到 90% 价值的方法。市场不在乎你工作如何努力 — 只在乎你是否做了正确的事情。\n\n同时专注于产品质量和快速行动很难。但能做到这些就是好的创始人。\n\n我从未见过一个行动缓慢的创始人真正成功过。你和其他创业公司都一样。你也需要保持专注和快速行动。那些建造火箭和核反应堆的公司都致力于此。所有失败的公司都有个糟糕的理由解释其为何不一样且不需要快速行动。\n\n但你发现某件事有效时，保持前行。不要被其他事情分心。不要关闭脚下的喷气机。\n\n不要沉沦于早期的成功，你还没有一个很有前途的开始，如通过大量的网络事件，并在大量的网站上发言。初步成功的创业者们面临一个选择：要么一直在做他们正在做的事情，要么他们开始花很多时间考虑自己的 “个人品牌” 和享受成为创始人的状态。\n\n拒绝会议和新闻发布会是很难的 — 他们感觉良好，在你的空间看到其他创始人受关注也是令人不爽的。但这不会持续很长时间。最终，新闻界人士会看出谁是胜者，如果你的公司是真正成功的话，你会得到你想不到的更多关注。极端的情况是，早期创始人带着自己的公关团队 — 他们认为在电视上看的在现实中也是一样的，然后他们大部分都失败了。\n\n专注和强度在长跑中会赢得胜利。（Charlie Rose 曾说过结合专注和个人联系就能把事情做成，这句话一直伴随着我。）\n\n---\n## CEO的工作\n\n我之前提到的 CEO 的唯一普遍的工作描述是确保公司成功。虽然这是真的，我还想谈一点特别是关于 CEO 应如何花他/她的时间。\n\n**一个 CEO 需要:**\n1）设定公司的愿景和战略，\n2）向公司的每一个人布道，\n3）招募和管理团队，尤其是在你自己不擅长的领域里，\n4）筹集资金，确保公司不缺钱，\n5）设置执行质量标准，\n\n除此之外，找到你最喜爱的部分，并坚持在那里。\n\n正如我在开始时提到的，这是一个强度很高的工作。如果你成功了，它会把你的生活带到一个你想象不到的程度，这个公司会一直在你的脑海里。极致的专注和极高的强度意味着它不是平衡工作和生活的最佳选择。你还可以有一个很大的选择 — 你的家人，参加很多的比赛，等等 — 或另一个并没有那么丰富的生活。还有很多选择只有你自己可以做出决定，你会一直在做选择，不论你在委派方面做得多好。\n\n你的目标应该是超级响应你的团队和世界，要很清楚地知道战略和事件优先级别，出席一切重要的事情，并快速执行（特别是当其阻止到其他选择时。）你也应该采取一种“不惜一切代价”的态度 — 仍会有讨厌的笨蛋。如果团队看到你在做这些事情，他们也会这样做。\n\n管理自己的心理是非常困难且重要的。这一点已经成为老生常谈，但它是正确的—情感的高点和低点都是非常激烈的，如果你不知道如何在其中保持一定水平，你就会纠结。当 CEO 是孤独的。重要的是在一切都融化时，可以与其他 CEO 打电话（YC 的一个重要的意外发明是有一个让创始人找同伴的方式。）\n\n一个成功的创业需要很长的时间，当然比大多数创业者在一开始设想的要长得多。你不能把它当作一个通宵。你必须吃好，睡好，并锻炼身体。你得花时间和你的家人和朋友在一起。你还需要在一个你真正充满激情的领域工作，除了这些，没有其他东西能够长期支持你。\n\n所有的一切都会感觉破碎，多样和规模不一的灾难会让你惊讶。你的工作是用你的微笑来解决他们，让你的团队放心，一切都会好的。通常事情并不像他们看起来那么坏，但有时他们实际上是真的坏了。在任何情况下，只要继续走，不断成长。\n\nCEO 不找借口。很多不好和不公正的事情会发生。但是不要去说，当然更不要对团队说，“如果我们有更多的钱的话” 或 “如果我们有另一个工程师的话”。要么找出一个使这发生的方法，要么找出没有它的方法。那些让自己制造很多借口的人和创业公司的 CEO 们几乎总是失败。让自己在不公正中感到 1 分钟的不安即可，然后要清楚，想出一个解决办法这取决于你。努力做到让人们在谈论你时说：“ X 总是能把事情搞定” 。\n\n非初次创业的创业者知道他/她们在做什么。在你位置联系他们，并寻求帮助，你会变更好。如何成为一个好的领导者和管理者是值得投资去学习的。做这件事的最好方法是找一个导师 — 读书似乎不那么有效。\n\n在 YC 我们数量惊人的建议就是 “去问他们” 或 “想做就做吧” 。初次创业者都认为在你需要寻求某人一件事或想做一件新的事情时有秘诀。但我需要重复下，创业时，所有的秘诀都不生效了。你仅需保持直接，自愿去请求就好，但不要成为一个讨厌鬼。.\n\n扭曲他人的现实但不是你自己的现实也是很重要的。你需要说服别人你的公司是注定成为这个年代最重要的创业公司，但你还需要对任何可能出错的事情保持怀疑。\n\n持久。大多数创始人放弃得太快了或转移到下一个产品太快了。如果事情进展得不好，找出问题的根源是什么，确保你得到答案。作为一个成功创业公司 CEO 的一个巨大的特质就是是不放弃（虽然你不想固执于其他原因，这是另一个明显的矛盾，和一个要作出的艰难的判断。）\n\n乐观。虽然在世界某处可能有一个伟大且悲观的 CEO ，但我还没有见过他/她。相信未来会更好，公司将更好地在未来发挥重要的作用，这些对 CEO 和其他被影响的公司是重要的。这在理论上很容易，在短期的现实挑战中缺很难。不要忽视了长期的愿景，并相信每天的挑战将被遗忘，取而代之的是一年一年的进步。\n\n你的工作中定义任务和定义指标是最重要的。这可能有点奇怪，但它是值得早点去做的。无论你在什么时候开始还是在几年之后，随着你的成长，每一个新人都需要先植入公司的使命和价值然后再传播给他人。因此尽早写下你的价值观和使命。\n\n另一个我认为值得重复的陈词滥调是：建立一个公司有点像建立一种宗教。如果人们不把他们的日常生活和他们所关心的更高的目标联系起来，他们就不会做好工作。我认为在 YC 中 Airbnb 在这方面做得最好，我强烈推荐看看他们的文化价值观。\n\n一个 CEO 常见的错误就是致力于商业常见领域而不是在新产品和新方案上。比如，很多创始人认为他们需要在 人力资源，市场，财务，融资，公关等其他事情上寻找新方法。这常常是不好的。在已有事务中工作，把你的创造力用在你正在打造的产品和服务上。\n\n---\n## 招聘 & 管理\n\n招聘是你最重要的工作也是你打造一个成功公司的关键（和打造一个好产品相对。）\n\n我的第一条建议是不要做它。我们在 YC 最成功的公司都是等了比较长的时间后才开始招聘的。员工很贵。员工增加组织的复杂性和沟通开销。你有可以和联合创始人讲但不能和同一间房的员工讲的话。员工也增加了惯性，团队成员越多，在改变方向时难度越（指数级别的）高。抵制从你的雇员人数中获得自我价值的冲动。\n\n最好的人才都有很多机会。他们希望加入一家火箭般的公司。如果你什么都没有，招募他们是很难的。一旦你明显成功了，他们都会来加入你。\n\n值得重复提的是，好人才都有很多选择，你需要好人才来建立一个伟大的公司。要具有很大的公平、信任和责任心。愿意去寻求你认为你不可能得到的人。请记住，你想雇用的人要是那种如果他们想，就可以开始他们自己的公司的人。\n\n当你在招聘模式（即，当你把产品-市场形态为 T-infinity），你应该花你的 25% 的时间在招聘上。至少有一个创始人，通常是 CEO 需要擅长招聘。这是大多数 CEO 的首要任务。每个人都说，CEO 们应该在招聘上花很多时间，但在实践中，只有最好的 CEO 才去做。这里或许有些蹊跷。\n\n不要对你雇佣的人的品质做出妥协。每个人都知道这一点，然而，每个人都会在某些时候对这一点做出绝望的让步。每个人都会后悔，有时甚至会把公司杀死。好的和坏的人都有传染性的，如果你开始与平庸的人，平均值常常不会提高。公司开始与平庸的早期员工几乎从未恢复。相信你的直觉。如果你有疑问，那么答案是否定的。\n\n不要雇佣长期消极的人。他们不适合早期的创业公司 — 世界其他的人每天都会预测你的死亡，公司需要在其内部团结起来，从信念到矛盾。\n\n在任何角色中用态度而不是经验去评估。寻找原认知和把事情搞定的记录。寻找那些你喜欢的人才 — 你需要花费很多时间并陷入紧张的情况。对于你已经认识的人，在他们全职加入前先尝试在一个项目中共同工作。\n\n投资成为一个好管理者，这对于大多数创业者是很难的，它绝对是违反直觉的，但做得这点很重要。找到可以帮助你的导师，如果你不擅长这一点，你会迅速失去员工，如果你不挽留员工，即使你成为世界上最好的招聘官也不重要了。作为一个好管理者的大部分原则都被很好说明过了，但我从来没有讨论的问题是“不要进入英雄模式”。大多数的初次管理者都会在某个时候把变成这种模式受害者，并试着自己做所有的事情，并成为他们的工作人员触不可及的。它通常结束于一次崩溃。请抵制一切切换到这种模式的诱惑，并愿意在项目后期有一个运作良好的团队。\n\n说到管理，争取做到把每个人都弄到同一间办公室。由于某些原因，初创公司总是妥协于此。但几乎所有的最成功的初创公司开始于聚集在一起。我认为远程工作对大公司来说是很好的，但它并不是一个创业公司大范围成功的秘诀。\n\n最后，辞退要快。每个人都知道这个原则，但没有人去做。但我觉得我应该说出来。同样，开除那些那些对文化有毒害的人，不管他们做什么，他们都是多么的好。文化是你雇佣、开除、提升人中定义的。 .\n\n我就此写了一篇详细的博客。\n\n---\n## 竞争对手\n\n关于竞争对手的一个快速的词：竞争对手是一个创业公司的鬼故事。初次创业者认为他们会杀死 99% 的创业者，但 99% 的创业者死于自杀，而不是谋杀。去考虑你的内部问题吧。如果你失败了，很可能是因为你没能成功地制造一个伟大的产品和/或未能建立一个伟大的公司。99% 的时候，你应该忽略竞争对手。特别是当他们在报纸中筹集了大量的钱或是制造很多噪音的时候。不要担心一个竞争对手，直到他们交付出一个真正的，跨时代的产品。新闻稿比代码更容易编写，比制作一个伟大的产品更容易。Henry Ford 说过：“竞争对手害怕的人永远是不在乎其他的一切，且依旧在做更好的生意的人。”\n\n每一个大公司在规模小的时候，都面临比你现在面临的更糟糕的竞争威胁，他们都走了出来。万事总有一个对策。\n\n---\n## 盈利\n\n哦对了，盈利。你需要搞清楚如何做到它。\n\n一个简短版本是你需要让人们在你交付产品/服务中成本越高时付更多钱。因为一些原因，大家总是忘了如何把交付成本计算到账本里。\n\n如果你有一个免费的产品，不要打算购买用户。这对广告支持的企业真的很难。你需要让一些人与他们的朋友分享。\n\n如果你有一个低于1000美元的客户终身价值（LTV）的付费产品，你通常不要去销售。尝试不同的用户获取方法如 SEO / SEM，广告，邮件，等等，但要在 3 个月偿还你的客户获取成本（CAC）。如果你有一个超过1000美元的 LTV（净给你）付费产品，你也许可以直接销售，如果你的产品好卖。但除非你的 LTV 是 5000 美元或更高，它可能无效。试着通过推销自己的产品学习什么是有效的。销售黑技巧是一本有用的书。\n\n在任何情况下，试着去做到 “拉面盈利” — 即，赚的钱可以维持创始人吃拉面即可。当你来到这一步，你可以控制自己的命运，不在受到来自投资者和金融市场波动的影响。\n\n观察你的现金流。虽然这听起来令人难以置信，但我们已经看到很多创始人在没有意识到的情况下，钱花完了(然后 阅读 Paul Graham 的文章).\n\n---\n## 融资\n\n大多数初创公司在某个时候筹集资金。\n\n你应该在你需要的时候，或是在条件成熟时筹集资金。要小心，不要失去你的节俭或开始扔钱去解决问题。没有足够的钱可能是坏的，但有太多的钱几乎总是坏的。\n\n成功筹集到资金的秘诀是成为一个好的公司。所有其他的东西的创始人做了尝试优化的过程可能只占到 5% 的重要性。投资者寻找的是不论他们是否投资都会很成功的，但在得到外部资金会成长得更快的公司。“真正成功”这部分是重要的，因为巨大成功才会使得投资者得到回报，如果投资者相信你有 100% 的机会创造一个价值 1000 万美元的公司，但几乎没有机会建立一个更大的公司，他/她仍然可能不会投资，即使在估值非常低的情况下。所以要一直去解释为什么你的公司会是一个巨大的成功。\n\n投资者在错过下一个谷歌和在回想起来显然是愚蠢的东西上浪费钱的双重担心下所驱动（对于最好的公司，他们两者都担心。）\n\n如果你的公司不足以吸引资金就去融资，这不是一个好主意。你会抹黑名誉和并浪费时间。\n\n如果你在努力筹集资金，不要让情绪低落下去。很多优秀的公司都纠结于此，因为最好的公司在开始时看起来很糟糕（而且他们几乎总是看起来过时了。）当投资者告诉你没有，请记住“不”但别记住原因。同时请记住所有的“可以”都意味着“不”—投资人擅长用 “或许可以” 来表达 “不”。\n\n在融资对话中平等是很重要的 — 你不要去把你最喜欢的投资者列在名单上。让投资者采取行动的方法是担心其他投资者会抢走他们的机会。\n\n把融资看成是一种必要的邪恶，并尽可能迅速地完成这些事。有些创始人爱上融资，这是不好的。最好是有一个创始人这样做，以便公司不停顿下来。\n\n记住，大多数风投不了解很多行业。指标总是最有说服力的。\n\n不幸的是，大多数投资者（Y Combinator 是一个显著的例外）还需要通过你们都认识的人的引荐后才把你当回事，这种模式将开始变化。.\n\n坚持干净的条款（复杂的条款在每一轮融资后会更糟糕），但不要过度优化，特别是在估值上。估值是一种定量的竞争，所以创始人爱竞争最高估值。但中间估值不重要。\n\n第一次检查是最难得到的，所以集中精力去获取，这通常意味着你的注意力集中在谁最喜欢的人身上。总是常备多个计划，其中一个就是不融资，并且依据利息灵活的，如果你能把更多的钱更良好地利用，并且在其合理范围内，请保持开放心态去谈论这个。\n\n擅长 pitching 的一个重要关键是让你的故事尽可能清晰易懂。当然，最重要的关键是要有一个好的公司。有包括在 pitch 上有很多需要注意的，但至少你要有：使命，痛点，产品/服务，商业模式，团队，市场和市场增长率，财务。\n\n请记住，每一轮的资金的指标会越来越高。如果你只是为你的种子轮做一个引人注目的演示，不要惊讶于你的A轮。\n\n好的投资者真的做了大量的增值。坏的投资者会有损。大多数投资者陷在中间，既不增加也不减少。一个只投资小数额的投资者通常不会为你做任何事情（例如，请注意排队轮）。\n\n伟大的董事会成员是除了用户外对公司最佳的外部驱动力，外部驱动力具有大多数创始人想不到的价值。请愿意接受较低的估值，以获得一个伟大的愿意参与董事会成员。\n\n我认为 这篇由 Paul Graham 写的文章 是最好的关于融资的文章。作为一个战术点，你通常需要成为一个特拉华的 C 类公司，以提高机构的资本，所以最好是组成那样的。\n\n---\n# 结语\n请记住每个好想法都至少有一千人拥有。他们其中一个会成功。区别就是执行。这是一个磨练，每个人都希望有其他别的将想法变成功的办法，但是他们至今没找到。所以你需要的就是一个好想法，一个好产品，一个好团队，一个好执行。就是这么简单！; )\n\n感谢 Paul Buchheit, Erica Carpenter, Brian Chesky, Adam D’Angelo, Paul Graham, Drew Houston, Justin Kan, Matt Krisiloff, Aaron Levie, Gabriel Leydon, Jessica Livingston, Dustin Moskovitz, David Rusenko 和 Colleen Taylor 贡献了主意。\n\n作者：Sam Altman\n原文链接：http://playbook.samaltman.com/\n\n这田舍君的一篇博文，觉得还不错，原地址：[创业手册](https://ipro.xin/2016/09/28/%E5%88%9B%E4%B8%9A%E6%89%8B%E5%86%8C/)\n\n\n---\n\n","source":"_posts/文章阅读/2016-12-08-创业手册.md","raw":"---\ntitle: 创业手册\ncategories:\n  - 文章阅读\ntags:\n  - 创业手册\ntop: 10\nabbrlink: 6179\ndate: 2016-12-08 14:46:20\nkeywords: 创业手册\n---\n\n我们花了很多时间在为创业团队提供建议。尽管一对一的建议会一直很重要，但是我们认为对广泛建议进行提炼，并提供给 YC 和 YC 旗下公司会有助于 YC 的成长。所以我们觉得我们需要把这些都公开给大家。\n\n本剧本适合且只适合刚来到创业世界的人阅读。本剧本大部分内容对于已阅读过我们的合伙人所写的东西的人来说已不新鲜 — 本剧本的目的就是将内容做成合集。关于如何规模化一家创业公司的说明或许会有第二部分 — 但本剧本已基本覆盖了创业起步的部分。\n\n作为一家创业公司，你的目标就是做一些用户喜欢的东西。如果你要做的话，接下来你还需要考虑如何得到更多用户。但是这第一部分是非常关键的 — 思考下今天非常成功的公司吧。他们都开始于一个非常受用户欢迎且用户自愿为其宣传的产品。如果你在这个部分失败了，你就永远失败了。如果你欺骗你自己，认为你的用户喜欢你的产品但实际上他们不喜欢，你仍然会失败。\n\n创业公司坟墓里充斥着这类自认为他们可以跳过此步的人。\n\n打造一个受一小群用户热爱的产品会比打造一个受很多用户喜欢（请注意”喜欢”与”热爱”的区别）的产品更好。尽管”一小群热爱”和”一大群喜欢”看起来的积极感觉一样多，但比起后者需要将用户从”喜欢”转化为”热爱”，前者获取更多用户会很简单。\n\n如果要用一个词汇来警告一个准备创业的人：（你的产品）弱爆了！我们从 YC 创业者中收集到的最一致的一条反馈是，创业是他们无法想象的难，因为他们没有一个针对此工作和启动强度的框架。加入一家正在火箭飞船轨道上高速发展的创业公司是更为明智的选择。\n\n在另一方面，实际上创建一个创业公司并不会对你的职业生涯产生很多威胁 — 如果你非常善于技术的话，失败了还会找到工作。大部分人非常不善于评估风险。我个人认为更为危险的是你有一个自己非常热衷的想法和产品，但你仍然待在一个安全，舒适，不过瘾的工作岗位上。\n\n为了创业成功，你需要有：一个好想法（包括一个好市场），一个好团队，一个好产品，和强大的执行。\n\n---\n# 第一部分\n## 想法\n在 YC ，我们首先会问创业团队他们正在打造的产品以及其理由。对于这个问题我们期待清晰且简洁的答案。这将作为对创始人及其想法的评估。作为一个创始人，能够清晰地思考并交流是很重要的 — 对于招聘，融资，销售，等其他。想法在广义上需要可以清楚地表达并传播，复杂的想法常常是其混乱思维和虚构问题的表现。如果一个想法没能让第一次听到的人感到兴奋，这并不好。\n\n**我们问的另外一个问题是：谁迫切需要他们的产品。**\n\n最理想的情况是，你自己也是目标用户。其次的理想情况是，你对目标用户非常了解。\n\n如果一个公司已经有用户了，我们会问其用户数量及其增长速度。我们会分析该产品为什么没有增长得更快，我们会着重搞清楚其用户是否真正热爱其产品。很多情况下是他们告诉他们的朋友去用这个产品，而不是公司推动其增长。我们还会问其公司是否已开始盈利，如果不，为什么？\n\n如果该公司还没有用户，我们会考虑搭建最小化的产品以便测试该想法—比如，如果我们从最佳用户体验的反方向入手，我们会先去做内核部分。\n\n对想法进行测试的办法无非是先启动它并去看结果是什么，或者去贩卖它（比如：在你开始写代码前去获得一份用户意向书。）前者对了解用户想法更好（用户或许会告诉你他们将使用你的产品，但实际上并没有），后者对面向企业的想法更佳（如果一个公司告诉你他们会使用你的产品，那就去做吧。）特别的，如果你是一家面向企业的公司，我们会问你首要的问题就是，你有没有一个用户会买你正在打造的产品的意向或信息。对于大多数生物科技和硬件科技公司，他们检测想法的办法是先和潜在用户聊聊并试图找出可以做出第一代产品的最小集合。\n\n让你的想法和你从用户得到的反馈一起成长是很重要的。你需要非常了解你的用户—这对于你评估一个想法，打造一个产品，和创办一个好公司至关重要。\n\n正如前面提到的，创业是非常难的。它需要很长时间，及持续的异常的努力。创始人及其员工需要有共同的使命感去维系它。所以我们会问创始人为什么他要创办这个特别的公司。.\n\n我们还会问该公司什么时候会形成垄断。关于这个问题有很多描述，但我们使用了 Peter Thiel 的词汇。显然，我们不希望你的公司通过不道德的手段攻击竞争对手。相反，我们会寻找那些在规模化更有力且难以被复制的公司。\n\n最后，我们询问市场。市场今天有多大，市场增长得多快，以及为什么这个市场会在十年内具有大规模。我们试图搞清楚为什么这个市场在快速发展，以及为什么这是一个适合创业公司发展的市场。我们喜欢那种当主流技术正在发生变化但大部分人未察觉到的 — 大公司不擅长此道。还有一个与直觉相反的最佳答案是去切一个小蛋糕的大部分（而不是一个大蛋糕的小部分）。\n\n**与想法有关的其他思考：**\n\n比起一些衍生产品我们更喜欢新东西。很多大公司都开始于一些全新的东西（一个广被接受的关于”全新”的定义是 10 倍的好。）如果已经有 10 家其他公司在同一时间做同样的事情，这听起来像已存在的东西，我们对此怀疑态度。\n\n一个违反直觉的原因是，做一些新东西比做衍生且简单的产品是更容易的。而且如果你是前者的话人们会帮助你；如果你是后者，他们不会帮助你。\n\n好想法都是听起来很糟糕但实际上不错的。所以你不需要对你的想法过于保密 — 如果这确实是一个好想法，那它听起来不会像值得剽窃的想法。如果它听起来很值得剽窃，有好想法的人比将其执行并成立公司去实践的人多 1000 倍。如果你告诉别人你在做什么，人们或许会帮助你。\n\n谈到告诉别人你的想法 — 尽管当人们第一次听到它时感到兴奋是很重要的，很大一部分人会说你的想法太烂了。或许他们是正确的，或许他们不擅长评估创业公司，又或者他们仅仅是嫉妒。不管原因如何，这种情况会时常发生，他会很伤害，或者尽管你认为自己不会受其影响，你仍然会。此时你越保持自信并不被其他人影响，你就越会保持好状态。不管你取得了多大的成功，喷子永远不会走开。\n\n如果你没有想法但是想成立一个创业公司呢？你最好别。有了好想法后再通过创业公司让其传播到世界才是上策。\n\n我们曾经尝试过一个实验，资助一些没有想法的初创团队，在一个他们在得到资助后着陆在一个有前途的想法上。\n\n他们都失败了。我认为其一部分原因就是好的创始人倾向于有很多好想法（经常是过多了）。但你有一家创业公司后面临的更大的一个问题是，你需要赶快想出一个好想法，因为这已经是一家正式公司了，你的想法不能太疯狂。你最终获得一个貌似有理的但走歪的想法。这就是核心威胁。\n\n因此，最好不要过于积极地强迫自己想出创业点子。相反，学习很多不同的东西。练习发现问题，那些似乎效率不高的事情，和重大技术转变。为你觉得有趣的项目工作。走出自己的方式去和聪明，有趣的人打交道。在某些时候，想法就出现了。\n\n---\n# 第二部分\n## 一个好团队\n\n平庸的团队建不成伟大的公司。我们看创始人最重要的一个事情就是其实力。当我做后期投资时，我同样看重创始人的雇员的实力。\n\n什么让一个创始人伟大？最重要的特质就是永不止步，决心，坚韧性和智慧。智力与激情也是很重要的。这些特质都比经验和 “擅长 X 语言和 Y 框架” 更为重要。\n\n我们发现最成功的创始人都是一些具有低应力处理事务的人，因为你会感觉到”不管这件事是什么，他 / 她将做成这件事。”有时你可以通过意志的纯粹力量取得成功。\n\n好的创始人有一些看似矛盾的特质。一个重要的例子就是刚性和柔性。当创业涉及到几乎一切事情时，你需要保持对公司和它的使命的核心强烈信念，并依然非常灵活且愿意学习新的东西。\n\n最好的创始人都异常敏捷。这是果断，专注，力度，并把事情做好的能力的一个指标。\n\n不善言谈的创始人都很糟糕。沟通是一项创始人必备的技能 — 实际上，我认为这是最重要的且常被忽视的创始人技能。\n\n科技创业公司必须至少有一个创办人可以建立公司的产品或服务，以及至少一个创始人（或可以成为）擅长销售和与用户沟通。这可以是同一个人。\n\n当你在选择合伙人时请考虑这些标准 — 这将会是你做过最重要的决定，而且这一步经常会被做得很随意。你需要一个你非常了解的人，而不是你在合伙人聚会中刚遇到的一个人。你可以通过更多信息来评估你的合伙人，你不能走错这一步。同时，在某些时候，创业公司的期望值可能处于 X 坐标轴的下方。此时如果你和你的联合创始人预先存在联系，你们不能甩掉一个人并保持前行。联合创始人的关系破裂是一个早期创业团队死亡的最大原因，我们会常常看到联合创始人们抱着共同目的去成立一家创业公司。\n\n目前为止最好的情况是，找一个好的联合创始人。其次的最佳做法是成为一个独立的创业者。目前最坏的情况是，找一个不好的联合创始人。如果事情没搞头了，你应该迅速分道扬镳。\n\n一个关于净资产的简报：随着时间的推移，关于股权分配的话题并没有变简单 — 所以早点把它做好吧。平分是最好的选择，为了防止当两个创始人分离时造成死锁，有一个人多拿一份股权也是不错的选择。\n\n---\n# 第三部分\n## 一个好产品\n\n有一个好产品，这就是通往成功的秘密。这是所有伟大的公司仅有的唯一共同点。\n\n如果你不去做一个你的用户会喜欢的东西你最终会失败。尽管创始人都去寻找其他技巧。但创业是你人生中唯一不需要寻找技巧的事情。\n\n一个好产品是保持长期增长的唯一方法。最终你的公司会变很大以至于所有的增长黑技巧（Growth Hack）都不起作用，你需要借助那些期望用你的产品的用户来保持增长。这是关于超级成功的公司最重要的事情。别无他法。想一下所有非常成功的技术公司—他们都在做这件事。\n\n你需要在你的公司里建立一个“产品改进引擎”。你应该和你的用户交谈，并观看他们使用你的产品，找出哪些部分是分杆，然后把你的产品做更好。然后再重复做一遍。这个周期应该是该公司的头号重点，它应该推动一切。如果你每周都能提高你的产品 5%，它就真的会复合。\n\n这个周期的重复速率越快，公司通常就越好。在 YC，我们告诉创业者应除了吃，睡，运动，并花时间与他们的亲人外，要专注建立产品与用户交流。\n\n要把这个周期做好，你还需与你的用户更进一步接触。甚至是观察用户使用你的产品。如果可以的话，请坐到他们的办公室。衡量他对你说的和他实际上在做的。你不应该在你和用户之间加入中间人，这个状态保持越久越好 — 这意味着创始人需要做销售，客服，等等。\n\n尽全力搞懂你的用户。真正弄清楚他们需要什么，在哪里找到他们，以及他们在哪里感到不满。\n\n“从小事做起（Do things that don’t scale）” 显然已成为了创业团队的口头禅。 通常你需要在一定时间招募种子用户（Ben Silbermann 过去常在咖啡馆邀请陌生人使用 Pinterest）然后打造一款他们需要的产品。很多创始人讨厌 这一步，然后仅仅想在媒体宣传其产品。但那常常不会成功。人工招募用户，然后去做一款你的种子用户会告诉他们朋友的好产品吧。\n\n你还需要把东西分成小片，一边走一边重复和适应。不要尝试做很长期的计划，特别不要把成批的东西做一次公开发行。你需要从简单处着手 — 其表面积越小越好 — 然后将其更快地打造出来。实际上，简单永远是好的，你需要保持你的产品和公司尽可能简单。\n\n我们都会问创业团队一些相同问题：用户使用你的产品超过一次了吗？你的用户对你的产品狂热吗？你的用户会在你的公司消失后变得很沮丧吗？你的用户会在不是你要求的情况下向别人推荐你的产品吗？如果你是 B2B 的公司，你有至少 10 家付费用户吗？\n\n如果没有，那这就是潜在的问题，然后我们会告诉该公司把产品做的更好。对于一家公司为何没在成长的原因我都持怀疑态度 — 因为大多数情况下真正的原因是他们的产品还不够好。\n\n但如果初创团队不清楚他们接下来要对其产品干什么，或者他们的产品就是不够好，我们就派他们去找用户谈谈。虽然这也不是每次都会有效 — 人们会问福特寻求更快的马 — 但这种办法会常常惊人的有效。事实上，更普遍的是，在公司内有任何分歧时，请和你的用户谈谈。\n\n最好的创始人都很关心产品质量，甚至是看似无关紧要的细节。但这看来是有效的办法。同时，“产品” 应包括所有与该公司的用户的交互。你需要提供优秀的支持，好的销售互动等。\n\n请记住，如果你没有做出好产品，什么东西都救不了你。\n\n---\n# 第四部分\n## 好的执行\n\n尽管打造一款好产品是重要的，但这还不够。你还需要将其转变成一个好公司，你必须亲自去做 — 雇佣一个“经验丰富的经理”去帮你招聘这种很常见的行为是失败创业公司的墓地。在创业中很长一段时间内，你不能把招聘这个职位外包出去。\n\n你还需要盈利，这听起来很明显。这时候你该考虑如何盈利了。\n\nCEO 的唯一职位描述就是保证公司成功。作为 CEO 即使你有很多不足，你仍可以雇佣那些弥补你的不足的人才来让他们来把事情做好。有经验的 CEO 与一个理想的工商管理硕士可能会有技能的差距，但他/她也是不会理解用户，不会有和你相同的产品嗅觉，也并不会太在意产品。\n\n## 成长\n\n增长和动力是伟大执行的关键。（只要不是 “以 90 美分的价格出售 1 美元”的）增长就解决了所有的问题，而缺乏增长的问题除了增长这个办法外无解的。如果你在增长，就会感觉到你在成功，大家都很高兴。如果你在增长，每个时间段都会有新的角色和责任，大家会觉得自己的事业正在进步。如果你不在增长，这感觉就像你失败了，大家不快乐并且离开。如果你不在增长，大家就只会推卸责任和抱怨了。\n\n创业公司没有动力的话，创始人和雇员都会焦灼起来，很难形容的沮丧。\n\n好的执行的首要方针就是“永不失去动力”。但是你该如何做到呢？\n\n最重要的办法就是让它成为你的首要任务。公司会按 CEO 去执行。为公司优化找到一个指标是很具价值的，也值得花时间去找到正确的增长指标。如果你关注增长，然后设定一个目标，公司其他人都会专注于该目标。\n\n**以下是一些例子**。\n\nAirbnb 的创办者构建了一个他们想达到的前瞻性图谱。他们把这个图谱挂到了所有地方 — 在他们的冰箱上，桌子上，卫生间镜子上。如果他们这周达到了目标，那很好，如果没有，他们就会一直对此进行研究。\n\nMark Zuckerberg 曾说道 Facebook 最重要的革新就是在增长缓慢时设立了一个增长团队。在其公司这一团队是（也许仍然是）一个最负盛名的团体—每个人都知道它是多么重要。\n\n对增长不利的东西要记录下来。以公司的角度去讨论你如何可以增长得更快。如果你知道局限是什么，你自然需要思考如何解决它。\n\n对于你准备去做的任何一件事，请问自己“这是优化增长的最佳做法吗？”比如，去参加一个会议并不是优化增长的最佳做法，除非你期望去那里销售你的产品。\n\n透明公开的内部指标报表（包括财务状况）是一个很好的事情。因为某些原因，创始人总是很害怕这一点。但它是好的，可以让整个公司专注于增长。专注于指标的员工和他们目前做到的状况有直接联系。如果你隐藏了这些标准，人们很难集中在他们身上。\n\n关于指标，请勿欺骗自己设定虚高的指标。这里常见的问题就是专注于注册量而忽视了留存。而对于增长，留存是和获取新用户同样重要的。\n\n建立一个内部节奏去保持动力也是很重要的。你的增长过程需要一个“律动” — 新功能，客户，新员工，盈利里程碑，合作伙伴，等等其他需要内部和外部去发布的。\n\n你应该设定富有野心的但大体可以实现的指标，并每个月审查进度。庆祝成功吧！保持将策略告诉内部人员，告诉每个员工你从客户那里听到的东西，等等。你在内部越分享更多 — 包括好消息和坏消息 — 你的公司就会越好。\n\n这里有几个创始人经常陷入的陷阱。其中一个就是如果公司疯狂成长但一切都看起来难以置信的破败和低效率，大家都担心其破碎。在实践中，这似乎很少发生（我可以指出 Friendster 是一个最近因为技术债务而死亡的创业公司。）相反，如果你增长很快但其他事情没有优化，这其实是很好的事情 — 你需要做的就是解决它以得到更快的增长！我最喜欢投资那些增长很快但未做优化的公司 — 他们都被严重低估了。\n\n另一个相关的陷阱就是有关长期问题—比如“我们在规模大后该怎么办？”答案就是等你先把规模做大后再考虑这个问题吧。很多创业公司在考虑这个问题时死掉了，因为他们没有想通。一个好经验就是只考虑比目前 10 倍规模大的情况。大多数早期创业团队都应该把“从小事做起”贴到他们的墙上并执行它。比如，好的创业公司常常在早期做很好的客户服务，不好的公司则担心这些小钱不够多（而不做）。但是好的客户服务会让种子用户充满惊喜，随着产品越来越好你需要减少客服工作，因为你已经知道客户纠结的东西并对此提高了产品/体验。（顺便强调下，这是个很好的例子 —去做好客服工作）\n\n关于 “从小事做起” 这里有个很大的误区 — 这不应该成为你最终不去盈利的借口。在早期有差点的单元经济是允许的，但你在后期如果还没做好盈利的话，你最好去找个好点的理由吧。\n\n另外一个陷阱是在增长绝对数值变坏时（尽管在比例上看起来还好）变得沮丧。对于指数增长，人类的直觉很不擅长。请提醒你的团队，所有的大公司都增长自一个小团队。\n\n一些最大的陷阱是创始人相信会带来增长，但在实践中长时间几乎从不。常见的例子是处理其他公司和“大型新闻发布会”。小心这些，并了解他们实际上从未有效。相反，所有的大公司都通过 — 打造一个用户喜爱的产品，在起初亲自招募用户，然后测试大量的增长策略（广告，引荐计划，销售和营销等），并做更多的工作。问你的客户在哪里找到更多的类似你的用户的人。\n\n请记住销售和市场营销不是差的词汇。尽管如果你没有一个伟大的产品，他们也不会拯救你，但他们可以帮助加速增长。如果你是一个面向企业的公司，那这是你的公司必备的。\n\n特别是不要害怕去销售。创始人中至少要有一个擅长邀请人们使用你的产品并付费的人。\n\nAlex Schultz 有一个关于消费产品增长的很值得观看的讲座。 对于 B2B 产品，我认为正确的答案就是一直跟踪每月的收入增长，并记住更长的销售周期意味着前几个月的数据不会好看的（虽然有时向创业公司销售，使其作为种子用户可以解决这个问题）。\n\n---\n## 专注 & 强度\n\n如果我必须把我的建议提炼成两个词，我会挑专注和力度。这些词汇似乎真的匹配于我所认识的最优秀的创始人。\n\n他们不屈地专注于他们的产品和增长。事实上，他们不想做其他任何事情，他们说很多“不”（这是很难的，因为存在很多刚开始创业的人喜欢做新的事情。）\n\n一个通用规则是，在你控制好了第一件事之前不要让你的公司开始做下一件事。我认识的好公司没有同时开始做很多事的，他们要确认才去做，并一直做好。你可以做的事情比你想象的要少得多。一个非常常见的创业公司死亡的原因是做太多错误的事情。优先次序是关键且困难的。（同样重要的是要确定公司的优先顺序是设置你自己的战术优先级。我发现最适合我的是一张笔记的清单，每天少于 3 个的主要任务和少于 30 个的小任务，还有一张年度的总体目标的工作清单。）\n\n虽然伟大的创始人不做很多大的项目，他们要做就做到极致。他们把事情做得很快。这是是决定性的，但你有一家创业公司时这是很难的 — 你会得到很多矛盾的意见，这都是因为做一件事有多种方式，且因为存在很多不好的建议。好的创始人听取所有的建议，然后迅速作出自己的决定。 .\n\n请注意，这并不意味着做任何事情都要做到极致—这是很重要的一点。你必须选择去做正确的事情。Paul Buchheit 说过，要去找到用 10% 的努力得到 90% 价值的方法。市场不在乎你工作如何努力 — 只在乎你是否做了正确的事情。\n\n同时专注于产品质量和快速行动很难。但能做到这些就是好的创始人。\n\n我从未见过一个行动缓慢的创始人真正成功过。你和其他创业公司都一样。你也需要保持专注和快速行动。那些建造火箭和核反应堆的公司都致力于此。所有失败的公司都有个糟糕的理由解释其为何不一样且不需要快速行动。\n\n但你发现某件事有效时，保持前行。不要被其他事情分心。不要关闭脚下的喷气机。\n\n不要沉沦于早期的成功，你还没有一个很有前途的开始，如通过大量的网络事件，并在大量的网站上发言。初步成功的创业者们面临一个选择：要么一直在做他们正在做的事情，要么他们开始花很多时间考虑自己的 “个人品牌” 和享受成为创始人的状态。\n\n拒绝会议和新闻发布会是很难的 — 他们感觉良好，在你的空间看到其他创始人受关注也是令人不爽的。但这不会持续很长时间。最终，新闻界人士会看出谁是胜者，如果你的公司是真正成功的话，你会得到你想不到的更多关注。极端的情况是，早期创始人带着自己的公关团队 — 他们认为在电视上看的在现实中也是一样的，然后他们大部分都失败了。\n\n专注和强度在长跑中会赢得胜利。（Charlie Rose 曾说过结合专注和个人联系就能把事情做成，这句话一直伴随着我。）\n\n---\n## CEO的工作\n\n我之前提到的 CEO 的唯一普遍的工作描述是确保公司成功。虽然这是真的，我还想谈一点特别是关于 CEO 应如何花他/她的时间。\n\n**一个 CEO 需要:**\n1）设定公司的愿景和战略，\n2）向公司的每一个人布道，\n3）招募和管理团队，尤其是在你自己不擅长的领域里，\n4）筹集资金，确保公司不缺钱，\n5）设置执行质量标准，\n\n除此之外，找到你最喜爱的部分，并坚持在那里。\n\n正如我在开始时提到的，这是一个强度很高的工作。如果你成功了，它会把你的生活带到一个你想象不到的程度，这个公司会一直在你的脑海里。极致的专注和极高的强度意味着它不是平衡工作和生活的最佳选择。你还可以有一个很大的选择 — 你的家人，参加很多的比赛，等等 — 或另一个并没有那么丰富的生活。还有很多选择只有你自己可以做出决定，你会一直在做选择，不论你在委派方面做得多好。\n\n你的目标应该是超级响应你的团队和世界，要很清楚地知道战略和事件优先级别，出席一切重要的事情，并快速执行（特别是当其阻止到其他选择时。）你也应该采取一种“不惜一切代价”的态度 — 仍会有讨厌的笨蛋。如果团队看到你在做这些事情，他们也会这样做。\n\n管理自己的心理是非常困难且重要的。这一点已经成为老生常谈，但它是正确的—情感的高点和低点都是非常激烈的，如果你不知道如何在其中保持一定水平，你就会纠结。当 CEO 是孤独的。重要的是在一切都融化时，可以与其他 CEO 打电话（YC 的一个重要的意外发明是有一个让创始人找同伴的方式。）\n\n一个成功的创业需要很长的时间，当然比大多数创业者在一开始设想的要长得多。你不能把它当作一个通宵。你必须吃好，睡好，并锻炼身体。你得花时间和你的家人和朋友在一起。你还需要在一个你真正充满激情的领域工作，除了这些，没有其他东西能够长期支持你。\n\n所有的一切都会感觉破碎，多样和规模不一的灾难会让你惊讶。你的工作是用你的微笑来解决他们，让你的团队放心，一切都会好的。通常事情并不像他们看起来那么坏，但有时他们实际上是真的坏了。在任何情况下，只要继续走，不断成长。\n\nCEO 不找借口。很多不好和不公正的事情会发生。但是不要去说，当然更不要对团队说，“如果我们有更多的钱的话” 或 “如果我们有另一个工程师的话”。要么找出一个使这发生的方法，要么找出没有它的方法。那些让自己制造很多借口的人和创业公司的 CEO 们几乎总是失败。让自己在不公正中感到 1 分钟的不安即可，然后要清楚，想出一个解决办法这取决于你。努力做到让人们在谈论你时说：“ X 总是能把事情搞定” 。\n\n非初次创业的创业者知道他/她们在做什么。在你位置联系他们，并寻求帮助，你会变更好。如何成为一个好的领导者和管理者是值得投资去学习的。做这件事的最好方法是找一个导师 — 读书似乎不那么有效。\n\n在 YC 我们数量惊人的建议就是 “去问他们” 或 “想做就做吧” 。初次创业者都认为在你需要寻求某人一件事或想做一件新的事情时有秘诀。但我需要重复下，创业时，所有的秘诀都不生效了。你仅需保持直接，自愿去请求就好，但不要成为一个讨厌鬼。.\n\n扭曲他人的现实但不是你自己的现实也是很重要的。你需要说服别人你的公司是注定成为这个年代最重要的创业公司，但你还需要对任何可能出错的事情保持怀疑。\n\n持久。大多数创始人放弃得太快了或转移到下一个产品太快了。如果事情进展得不好，找出问题的根源是什么，确保你得到答案。作为一个成功创业公司 CEO 的一个巨大的特质就是是不放弃（虽然你不想固执于其他原因，这是另一个明显的矛盾，和一个要作出的艰难的判断。）\n\n乐观。虽然在世界某处可能有一个伟大且悲观的 CEO ，但我还没有见过他/她。相信未来会更好，公司将更好地在未来发挥重要的作用，这些对 CEO 和其他被影响的公司是重要的。这在理论上很容易，在短期的现实挑战中缺很难。不要忽视了长期的愿景，并相信每天的挑战将被遗忘，取而代之的是一年一年的进步。\n\n你的工作中定义任务和定义指标是最重要的。这可能有点奇怪，但它是值得早点去做的。无论你在什么时候开始还是在几年之后，随着你的成长，每一个新人都需要先植入公司的使命和价值然后再传播给他人。因此尽早写下你的价值观和使命。\n\n另一个我认为值得重复的陈词滥调是：建立一个公司有点像建立一种宗教。如果人们不把他们的日常生活和他们所关心的更高的目标联系起来，他们就不会做好工作。我认为在 YC 中 Airbnb 在这方面做得最好，我强烈推荐看看他们的文化价值观。\n\n一个 CEO 常见的错误就是致力于商业常见领域而不是在新产品和新方案上。比如，很多创始人认为他们需要在 人力资源，市场，财务，融资，公关等其他事情上寻找新方法。这常常是不好的。在已有事务中工作，把你的创造力用在你正在打造的产品和服务上。\n\n---\n## 招聘 & 管理\n\n招聘是你最重要的工作也是你打造一个成功公司的关键（和打造一个好产品相对。）\n\n我的第一条建议是不要做它。我们在 YC 最成功的公司都是等了比较长的时间后才开始招聘的。员工很贵。员工增加组织的复杂性和沟通开销。你有可以和联合创始人讲但不能和同一间房的员工讲的话。员工也增加了惯性，团队成员越多，在改变方向时难度越（指数级别的）高。抵制从你的雇员人数中获得自我价值的冲动。\n\n最好的人才都有很多机会。他们希望加入一家火箭般的公司。如果你什么都没有，招募他们是很难的。一旦你明显成功了，他们都会来加入你。\n\n值得重复提的是，好人才都有很多选择，你需要好人才来建立一个伟大的公司。要具有很大的公平、信任和责任心。愿意去寻求你认为你不可能得到的人。请记住，你想雇用的人要是那种如果他们想，就可以开始他们自己的公司的人。\n\n当你在招聘模式（即，当你把产品-市场形态为 T-infinity），你应该花你的 25% 的时间在招聘上。至少有一个创始人，通常是 CEO 需要擅长招聘。这是大多数 CEO 的首要任务。每个人都说，CEO 们应该在招聘上花很多时间，但在实践中，只有最好的 CEO 才去做。这里或许有些蹊跷。\n\n不要对你雇佣的人的品质做出妥协。每个人都知道这一点，然而，每个人都会在某些时候对这一点做出绝望的让步。每个人都会后悔，有时甚至会把公司杀死。好的和坏的人都有传染性的，如果你开始与平庸的人，平均值常常不会提高。公司开始与平庸的早期员工几乎从未恢复。相信你的直觉。如果你有疑问，那么答案是否定的。\n\n不要雇佣长期消极的人。他们不适合早期的创业公司 — 世界其他的人每天都会预测你的死亡，公司需要在其内部团结起来，从信念到矛盾。\n\n在任何角色中用态度而不是经验去评估。寻找原认知和把事情搞定的记录。寻找那些你喜欢的人才 — 你需要花费很多时间并陷入紧张的情况。对于你已经认识的人，在他们全职加入前先尝试在一个项目中共同工作。\n\n投资成为一个好管理者，这对于大多数创业者是很难的，它绝对是违反直觉的，但做得这点很重要。找到可以帮助你的导师，如果你不擅长这一点，你会迅速失去员工，如果你不挽留员工，即使你成为世界上最好的招聘官也不重要了。作为一个好管理者的大部分原则都被很好说明过了，但我从来没有讨论的问题是“不要进入英雄模式”。大多数的初次管理者都会在某个时候把变成这种模式受害者，并试着自己做所有的事情，并成为他们的工作人员触不可及的。它通常结束于一次崩溃。请抵制一切切换到这种模式的诱惑，并愿意在项目后期有一个运作良好的团队。\n\n说到管理，争取做到把每个人都弄到同一间办公室。由于某些原因，初创公司总是妥协于此。但几乎所有的最成功的初创公司开始于聚集在一起。我认为远程工作对大公司来说是很好的，但它并不是一个创业公司大范围成功的秘诀。\n\n最后，辞退要快。每个人都知道这个原则，但没有人去做。但我觉得我应该说出来。同样，开除那些那些对文化有毒害的人，不管他们做什么，他们都是多么的好。文化是你雇佣、开除、提升人中定义的。 .\n\n我就此写了一篇详细的博客。\n\n---\n## 竞争对手\n\n关于竞争对手的一个快速的词：竞争对手是一个创业公司的鬼故事。初次创业者认为他们会杀死 99% 的创业者，但 99% 的创业者死于自杀，而不是谋杀。去考虑你的内部问题吧。如果你失败了，很可能是因为你没能成功地制造一个伟大的产品和/或未能建立一个伟大的公司。99% 的时候，你应该忽略竞争对手。特别是当他们在报纸中筹集了大量的钱或是制造很多噪音的时候。不要担心一个竞争对手，直到他们交付出一个真正的，跨时代的产品。新闻稿比代码更容易编写，比制作一个伟大的产品更容易。Henry Ford 说过：“竞争对手害怕的人永远是不在乎其他的一切，且依旧在做更好的生意的人。”\n\n每一个大公司在规模小的时候，都面临比你现在面临的更糟糕的竞争威胁，他们都走了出来。万事总有一个对策。\n\n---\n## 盈利\n\n哦对了，盈利。你需要搞清楚如何做到它。\n\n一个简短版本是你需要让人们在你交付产品/服务中成本越高时付更多钱。因为一些原因，大家总是忘了如何把交付成本计算到账本里。\n\n如果你有一个免费的产品，不要打算购买用户。这对广告支持的企业真的很难。你需要让一些人与他们的朋友分享。\n\n如果你有一个低于1000美元的客户终身价值（LTV）的付费产品，你通常不要去销售。尝试不同的用户获取方法如 SEO / SEM，广告，邮件，等等，但要在 3 个月偿还你的客户获取成本（CAC）。如果你有一个超过1000美元的 LTV（净给你）付费产品，你也许可以直接销售，如果你的产品好卖。但除非你的 LTV 是 5000 美元或更高，它可能无效。试着通过推销自己的产品学习什么是有效的。销售黑技巧是一本有用的书。\n\n在任何情况下，试着去做到 “拉面盈利” — 即，赚的钱可以维持创始人吃拉面即可。当你来到这一步，你可以控制自己的命运，不在受到来自投资者和金融市场波动的影响。\n\n观察你的现金流。虽然这听起来令人难以置信，但我们已经看到很多创始人在没有意识到的情况下，钱花完了(然后 阅读 Paul Graham 的文章).\n\n---\n## 融资\n\n大多数初创公司在某个时候筹集资金。\n\n你应该在你需要的时候，或是在条件成熟时筹集资金。要小心，不要失去你的节俭或开始扔钱去解决问题。没有足够的钱可能是坏的，但有太多的钱几乎总是坏的。\n\n成功筹集到资金的秘诀是成为一个好的公司。所有其他的东西的创始人做了尝试优化的过程可能只占到 5% 的重要性。投资者寻找的是不论他们是否投资都会很成功的，但在得到外部资金会成长得更快的公司。“真正成功”这部分是重要的，因为巨大成功才会使得投资者得到回报，如果投资者相信你有 100% 的机会创造一个价值 1000 万美元的公司，但几乎没有机会建立一个更大的公司，他/她仍然可能不会投资，即使在估值非常低的情况下。所以要一直去解释为什么你的公司会是一个巨大的成功。\n\n投资者在错过下一个谷歌和在回想起来显然是愚蠢的东西上浪费钱的双重担心下所驱动（对于最好的公司，他们两者都担心。）\n\n如果你的公司不足以吸引资金就去融资，这不是一个好主意。你会抹黑名誉和并浪费时间。\n\n如果你在努力筹集资金，不要让情绪低落下去。很多优秀的公司都纠结于此，因为最好的公司在开始时看起来很糟糕（而且他们几乎总是看起来过时了。）当投资者告诉你没有，请记住“不”但别记住原因。同时请记住所有的“可以”都意味着“不”—投资人擅长用 “或许可以” 来表达 “不”。\n\n在融资对话中平等是很重要的 — 你不要去把你最喜欢的投资者列在名单上。让投资者采取行动的方法是担心其他投资者会抢走他们的机会。\n\n把融资看成是一种必要的邪恶，并尽可能迅速地完成这些事。有些创始人爱上融资，这是不好的。最好是有一个创始人这样做，以便公司不停顿下来。\n\n记住，大多数风投不了解很多行业。指标总是最有说服力的。\n\n不幸的是，大多数投资者（Y Combinator 是一个显著的例外）还需要通过你们都认识的人的引荐后才把你当回事，这种模式将开始变化。.\n\n坚持干净的条款（复杂的条款在每一轮融资后会更糟糕），但不要过度优化，特别是在估值上。估值是一种定量的竞争，所以创始人爱竞争最高估值。但中间估值不重要。\n\n第一次检查是最难得到的，所以集中精力去获取，这通常意味着你的注意力集中在谁最喜欢的人身上。总是常备多个计划，其中一个就是不融资，并且依据利息灵活的，如果你能把更多的钱更良好地利用，并且在其合理范围内，请保持开放心态去谈论这个。\n\n擅长 pitching 的一个重要关键是让你的故事尽可能清晰易懂。当然，最重要的关键是要有一个好的公司。有包括在 pitch 上有很多需要注意的，但至少你要有：使命，痛点，产品/服务，商业模式，团队，市场和市场增长率，财务。\n\n请记住，每一轮的资金的指标会越来越高。如果你只是为你的种子轮做一个引人注目的演示，不要惊讶于你的A轮。\n\n好的投资者真的做了大量的增值。坏的投资者会有损。大多数投资者陷在中间，既不增加也不减少。一个只投资小数额的投资者通常不会为你做任何事情（例如，请注意排队轮）。\n\n伟大的董事会成员是除了用户外对公司最佳的外部驱动力，外部驱动力具有大多数创始人想不到的价值。请愿意接受较低的估值，以获得一个伟大的愿意参与董事会成员。\n\n我认为 这篇由 Paul Graham 写的文章 是最好的关于融资的文章。作为一个战术点，你通常需要成为一个特拉华的 C 类公司，以提高机构的资本，所以最好是组成那样的。\n\n---\n# 结语\n请记住每个好想法都至少有一千人拥有。他们其中一个会成功。区别就是执行。这是一个磨练，每个人都希望有其他别的将想法变成功的办法，但是他们至今没找到。所以你需要的就是一个好想法，一个好产品，一个好团队，一个好执行。就是这么简单！; )\n\n感谢 Paul Buchheit, Erica Carpenter, Brian Chesky, Adam D’Angelo, Paul Graham, Drew Houston, Justin Kan, Matt Krisiloff, Aaron Levie, Gabriel Leydon, Jessica Livingston, Dustin Moskovitz, David Rusenko 和 Colleen Taylor 贡献了主意。\n\n作者：Sam Altman\n原文链接：http://playbook.samaltman.com/\n\n这田舍君的一篇博文，觉得还不错，原地址：[创业手册](https://ipro.xin/2016/09/28/%E5%88%9B%E4%B8%9A%E6%89%8B%E5%86%8C/)\n\n\n---\n\n","slug":"文章阅读-2016-12-08-创业手册","published":1,"updated":"2016-12-08T07:05:27.010Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjmb001md8pkwrktqxdp","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>我们花了很多时间在为创业团队提供建议。尽管一对一的建议会一直很重要，但是我们认为对广泛建议进行提炼，并提供给 YC 和 YC 旗下公司会有助于 YC 的成长。所以我们觉得我们需要把这些都公开给大家。</p>\n<p>本剧本适合且只适合刚来到创业世界的人阅读。本剧本大部分内容对于已阅读过我们的合伙人所写的东西的人来说已不新鲜 — 本剧本的目的就是将内容做成合集。关于如何规模化一家创业公司的说明或许会有第二部分 — 但本剧本已基本覆盖了创业起步的部分。</p>\n<p>作为一家创业公司，你的目标就是做一些用户喜欢的东西。如果你要做的话，接下来你还需要考虑如何得到更多用户。但是这第一部分是非常关键的 — 思考下今天非常成功的公司吧。他们都开始于一个非常受用户欢迎且用户自愿为其宣传的产品。如果你在这个部分失败了，你就永远失败了。如果你欺骗你自己，认为你的用户喜欢你的产品但实际上他们不喜欢，你仍然会失败。</p>\n<p>创业公司坟墓里充斥着这类自认为他们可以跳过此步的人。</p>\n<p>打造一个受一小群用户热爱的产品会比打造一个受很多用户喜欢（请注意”喜欢”与”热爱”的区别）的产品更好。尽管”一小群热爱”和”一大群喜欢”看起来的积极感觉一样多，但比起后者需要将用户从”喜欢”转化为”热爱”，前者获取更多用户会很简单。</p>\n<p>如果要用一个词汇来警告一个准备创业的人：（你的产品）弱爆了！我们从 YC 创业者中收集到的最一致的一条反馈是，创业是他们无法想象的难，因为他们没有一个针对此工作和启动强度的框架。加入一家正在火箭飞船轨道上高速发展的创业公司是更为明智的选择。</p>\n<p>在另一方面，实际上创建一个创业公司并不会对你的职业生涯产生很多威胁 — 如果你非常善于技术的话，失败了还会找到工作。大部分人非常不善于评估风险。我个人认为更为危险的是你有一个自己非常热衷的想法和产品，但你仍然待在一个安全，舒适，不过瘾的工作岗位上。</p>\n<p>为了创业成功，你需要有：一个好想法（包括一个好市场），一个好团队，一个好产品，和强大的执行。</p>\n<hr>\n<h1 id=\"第一部分\"><a href=\"#第一部分\" class=\"headerlink\" title=\"第一部分\"></a>第一部分</h1><h2 id=\"想法\"><a href=\"#想法\" class=\"headerlink\" title=\"想法\"></a>想法</h2><p>在 YC ，我们首先会问创业团队他们正在打造的产品以及其理由。对于这个问题我们期待清晰且简洁的答案。这将作为对创始人及其想法的评估。作为一个创始人，能够清晰地思考并交流是很重要的 — 对于招聘，融资，销售，等其他。想法在广义上需要可以清楚地表达并传播，复杂的想法常常是其混乱思维和虚构问题的表现。如果一个想法没能让第一次听到的人感到兴奋，这并不好。</p>\n<p><strong>我们问的另外一个问题是：谁迫切需要他们的产品。</strong></p>\n<p>最理想的情况是，你自己也是目标用户。其次的理想情况是，你对目标用户非常了解。</p>\n<p>如果一个公司已经有用户了，我们会问其用户数量及其增长速度。我们会分析该产品为什么没有增长得更快，我们会着重搞清楚其用户是否真正热爱其产品。很多情况下是他们告诉他们的朋友去用这个产品，而不是公司推动其增长。我们还会问其公司是否已开始盈利，如果不，为什么？</p>\n<p>如果该公司还没有用户，我们会考虑搭建最小化的产品以便测试该想法—比如，如果我们从最佳用户体验的反方向入手，我们会先去做内核部分。</p>\n<p>对想法进行测试的办法无非是先启动它并去看结果是什么，或者去贩卖它（比如：在你开始写代码前去获得一份用户意向书。）前者对了解用户想法更好（用户或许会告诉你他们将使用你的产品，但实际上并没有），后者对面向企业的想法更佳（如果一个公司告诉你他们会使用你的产品，那就去做吧。）特别的，如果你是一家面向企业的公司，我们会问你首要的问题就是，你有没有一个用户会买你正在打造的产品的意向或信息。对于大多数生物科技和硬件科技公司，他们检测想法的办法是先和潜在用户聊聊并试图找出可以做出第一代产品的最小集合。</p>\n<p>让你的想法和你从用户得到的反馈一起成长是很重要的。你需要非常了解你的用户—这对于你评估一个想法，打造一个产品，和创办一个好公司至关重要。</p>\n<p>正如前面提到的，创业是非常难的。它需要很长时间，及持续的异常的努力。创始人及其员工需要有共同的使命感去维系它。所以我们会问创始人为什么他要创办这个特别的公司。.</p>\n<p>我们还会问该公司什么时候会形成垄断。关于这个问题有很多描述，但我们使用了 Peter Thiel 的词汇。显然，我们不希望你的公司通过不道德的手段攻击竞争对手。相反，我们会寻找那些在规模化更有力且难以被复制的公司。</p>\n<p>最后，我们询问市场。市场今天有多大，市场增长得多快，以及为什么这个市场会在十年内具有大规模。我们试图搞清楚为什么这个市场在快速发展，以及为什么这是一个适合创业公司发展的市场。我们喜欢那种当主流技术正在发生变化但大部分人未察觉到的 — 大公司不擅长此道。还有一个与直觉相反的最佳答案是去切一个小蛋糕的大部分（而不是一个大蛋糕的小部分）。</p>\n<p><strong>与想法有关的其他思考：</strong></p>\n<p>比起一些衍生产品我们更喜欢新东西。很多大公司都开始于一些全新的东西（一个广被接受的关于”全新”的定义是 10 倍的好。）如果已经有 10 家其他公司在同一时间做同样的事情，这听起来像已存在的东西，我们对此怀疑态度。</p>\n<p>一个违反直觉的原因是，做一些新东西比做衍生且简单的产品是更容易的。而且如果你是前者的话人们会帮助你；如果你是后者，他们不会帮助你。</p>\n<p>好想法都是听起来很糟糕但实际上不错的。所以你不需要对你的想法过于保密 — 如果这确实是一个好想法，那它听起来不会像值得剽窃的想法。如果它听起来很值得剽窃，有好想法的人比将其执行并成立公司去实践的人多 1000 倍。如果你告诉别人你在做什么，人们或许会帮助你。</p>\n<p>谈到告诉别人你的想法 — 尽管当人们第一次听到它时感到兴奋是很重要的，很大一部分人会说你的想法太烂了。或许他们是正确的，或许他们不擅长评估创业公司，又或者他们仅仅是嫉妒。不管原因如何，这种情况会时常发生，他会很伤害，或者尽管你认为自己不会受其影响，你仍然会。此时你越保持自信并不被其他人影响，你就越会保持好状态。不管你取得了多大的成功，喷子永远不会走开。</p>\n<p>如果你没有想法但是想成立一个创业公司呢？你最好别。有了好想法后再通过创业公司让其传播到世界才是上策。</p>\n<p>我们曾经尝试过一个实验，资助一些没有想法的初创团队，在一个他们在得到资助后着陆在一个有前途的想法上。</p>\n<p>他们都失败了。我认为其一部分原因就是好的创始人倾向于有很多好想法（经常是过多了）。但你有一家创业公司后面临的更大的一个问题是，你需要赶快想出一个好想法，因为这已经是一家正式公司了，你的想法不能太疯狂。你最终获得一个貌似有理的但走歪的想法。这就是核心威胁。</p>\n<p>因此，最好不要过于积极地强迫自己想出创业点子。相反，学习很多不同的东西。练习发现问题，那些似乎效率不高的事情，和重大技术转变。为你觉得有趣的项目工作。走出自己的方式去和聪明，有趣的人打交道。在某些时候，想法就出现了。</p>\n<hr>\n<h1 id=\"第二部分\"><a href=\"#第二部分\" class=\"headerlink\" title=\"第二部分\"></a>第二部分</h1><h2 id=\"一个好团队\"><a href=\"#一个好团队\" class=\"headerlink\" title=\"一个好团队\"></a>一个好团队</h2><p>平庸的团队建不成伟大的公司。我们看创始人最重要的一个事情就是其实力。当我做后期投资时，我同样看重创始人的雇员的实力。</p>\n<p>什么让一个创始人伟大？最重要的特质就是永不止步，决心，坚韧性和智慧。智力与激情也是很重要的。这些特质都比经验和 “擅长 X 语言和 Y 框架” 更为重要。</p>\n<p>我们发现最成功的创始人都是一些具有低应力处理事务的人，因为你会感觉到”不管这件事是什么，他 / 她将做成这件事。”有时你可以通过意志的纯粹力量取得成功。</p>\n<p>好的创始人有一些看似矛盾的特质。一个重要的例子就是刚性和柔性。当创业涉及到几乎一切事情时，你需要保持对公司和它的使命的核心强烈信念，并依然非常灵活且愿意学习新的东西。</p>\n<p>最好的创始人都异常敏捷。这是果断，专注，力度，并把事情做好的能力的一个指标。</p>\n<p>不善言谈的创始人都很糟糕。沟通是一项创始人必备的技能 — 实际上，我认为这是最重要的且常被忽视的创始人技能。</p>\n<p>科技创业公司必须至少有一个创办人可以建立公司的产品或服务，以及至少一个创始人（或可以成为）擅长销售和与用户沟通。这可以是同一个人。</p>\n<p>当你在选择合伙人时请考虑这些标准 — 这将会是你做过最重要的决定，而且这一步经常会被做得很随意。你需要一个你非常了解的人，而不是你在合伙人聚会中刚遇到的一个人。你可以通过更多信息来评估你的合伙人，你不能走错这一步。同时，在某些时候，创业公司的期望值可能处于 X 坐标轴的下方。此时如果你和你的联合创始人预先存在联系，你们不能甩掉一个人并保持前行。联合创始人的关系破裂是一个早期创业团队死亡的最大原因，我们会常常看到联合创始人们抱着共同目的去成立一家创业公司。</p>\n<p>目前为止最好的情况是，找一个好的联合创始人。其次的最佳做法是成为一个独立的创业者。目前最坏的情况是，找一个不好的联合创始人。如果事情没搞头了，你应该迅速分道扬镳。</p>\n<p>一个关于净资产的简报：随着时间的推移，关于股权分配的话题并没有变简单 — 所以早点把它做好吧。平分是最好的选择，为了防止当两个创始人分离时造成死锁，有一个人多拿一份股权也是不错的选择。</p>\n<hr>\n<h1 id=\"第三部分\"><a href=\"#第三部分\" class=\"headerlink\" title=\"第三部分\"></a>第三部分</h1><h2 id=\"一个好产品\"><a href=\"#一个好产品\" class=\"headerlink\" title=\"一个好产品\"></a>一个好产品</h2><p>有一个好产品，这就是通往成功的秘密。这是所有伟大的公司仅有的唯一共同点。</p>\n<p>如果你不去做一个你的用户会喜欢的东西你最终会失败。尽管创始人都去寻找其他技巧。但创业是你人生中唯一不需要寻找技巧的事情。</p>\n<p>一个好产品是保持长期增长的唯一方法。最终你的公司会变很大以至于所有的增长黑技巧（Growth Hack）都不起作用，你需要借助那些期望用你的产品的用户来保持增长。这是关于超级成功的公司最重要的事情。别无他法。想一下所有非常成功的技术公司—他们都在做这件事。</p>\n<p>你需要在你的公司里建立一个“产品改进引擎”。你应该和你的用户交谈，并观看他们使用你的产品，找出哪些部分是分杆，然后把你的产品做更好。然后再重复做一遍。这个周期应该是该公司的头号重点，它应该推动一切。如果你每周都能提高你的产品 5%，它就真的会复合。</p>\n<p>这个周期的重复速率越快，公司通常就越好。在 YC，我们告诉创业者应除了吃，睡，运动，并花时间与他们的亲人外，要专注建立产品与用户交流。</p>\n<p>要把这个周期做好，你还需与你的用户更进一步接触。甚至是观察用户使用你的产品。如果可以的话，请坐到他们的办公室。衡量他对你说的和他实际上在做的。你不应该在你和用户之间加入中间人，这个状态保持越久越好 — 这意味着创始人需要做销售，客服，等等。</p>\n<p>尽全力搞懂你的用户。真正弄清楚他们需要什么，在哪里找到他们，以及他们在哪里感到不满。</p>\n<p>“从小事做起（Do things that don’t scale）” 显然已成为了创业团队的口头禅。 通常你需要在一定时间招募种子用户（Ben Silbermann 过去常在咖啡馆邀请陌生人使用 Pinterest）然后打造一款他们需要的产品。很多创始人讨厌 这一步，然后仅仅想在媒体宣传其产品。但那常常不会成功。人工招募用户，然后去做一款你的种子用户会告诉他们朋友的好产品吧。</p>\n<p>你还需要把东西分成小片，一边走一边重复和适应。不要尝试做很长期的计划，特别不要把成批的东西做一次公开发行。你需要从简单处着手 — 其表面积越小越好 — 然后将其更快地打造出来。实际上，简单永远是好的，你需要保持你的产品和公司尽可能简单。</p>\n<p>我们都会问创业团队一些相同问题：用户使用你的产品超过一次了吗？你的用户对你的产品狂热吗？你的用户会在你的公司消失后变得很沮丧吗？你的用户会在不是你要求的情况下向别人推荐你的产品吗？如果你是 B2B 的公司，你有至少 10 家付费用户吗？</p>\n<p>如果没有，那这就是潜在的问题，然后我们会告诉该公司把产品做的更好。对于一家公司为何没在成长的原因我都持怀疑态度 — 因为大多数情况下真正的原因是他们的产品还不够好。</p>\n<p>但如果初创团队不清楚他们接下来要对其产品干什么，或者他们的产品就是不够好，我们就派他们去找用户谈谈。虽然这也不是每次都会有效 — 人们会问福特寻求更快的马 — 但这种办法会常常惊人的有效。事实上，更普遍的是，在公司内有任何分歧时，请和你的用户谈谈。</p>\n<p>最好的创始人都很关心产品质量，甚至是看似无关紧要的细节。但这看来是有效的办法。同时，“产品” 应包括所有与该公司的用户的交互。你需要提供优秀的支持，好的销售互动等。</p>\n<p>请记住，如果你没有做出好产品，什么东西都救不了你。</p>\n<hr>\n<h1 id=\"第四部分\"><a href=\"#第四部分\" class=\"headerlink\" title=\"第四部分\"></a>第四部分</h1><h2 id=\"好的执行\"><a href=\"#好的执行\" class=\"headerlink\" title=\"好的执行\"></a>好的执行</h2><p>尽管打造一款好产品是重要的，但这还不够。你还需要将其转变成一个好公司，你必须亲自去做 — 雇佣一个“经验丰富的经理”去帮你招聘这种很常见的行为是失败创业公司的墓地。在创业中很长一段时间内，你不能把招聘这个职位外包出去。</p>\n<p>你还需要盈利，这听起来很明显。这时候你该考虑如何盈利了。</p>\n<p>CEO 的唯一职位描述就是保证公司成功。作为 CEO 即使你有很多不足，你仍可以雇佣那些弥补你的不足的人才来让他们来把事情做好。有经验的 CEO 与一个理想的工商管理硕士可能会有技能的差距，但他/她也是不会理解用户，不会有和你相同的产品嗅觉，也并不会太在意产品。</p>\n<h2 id=\"成长\"><a href=\"#成长\" class=\"headerlink\" title=\"成长\"></a>成长</h2><p>增长和动力是伟大执行的关键。（只要不是 “以 90 美分的价格出售 1 美元”的）增长就解决了所有的问题，而缺乏增长的问题除了增长这个办法外无解的。如果你在增长，就会感觉到你在成功，大家都很高兴。如果你在增长，每个时间段都会有新的角色和责任，大家会觉得自己的事业正在进步。如果你不在增长，这感觉就像你失败了，大家不快乐并且离开。如果你不在增长，大家就只会推卸责任和抱怨了。</p>\n<p>创业公司没有动力的话，创始人和雇员都会焦灼起来，很难形容的沮丧。</p>\n<p>好的执行的首要方针就是“永不失去动力”。但是你该如何做到呢？</p>\n<p>最重要的办法就是让它成为你的首要任务。公司会按 CEO 去执行。为公司优化找到一个指标是很具价值的，也值得花时间去找到正确的增长指标。如果你关注增长，然后设定一个目标，公司其他人都会专注于该目标。</p>\n<p><strong>以下是一些例子</strong>。</p>\n<p>Airbnb 的创办者构建了一个他们想达到的前瞻性图谱。他们把这个图谱挂到了所有地方 — 在他们的冰箱上，桌子上，卫生间镜子上。如果他们这周达到了目标，那很好，如果没有，他们就会一直对此进行研究。</p>\n<p>Mark Zuckerberg 曾说道 Facebook 最重要的革新就是在增长缓慢时设立了一个增长团队。在其公司这一团队是（也许仍然是）一个最负盛名的团体—每个人都知道它是多么重要。</p>\n<p>对增长不利的东西要记录下来。以公司的角度去讨论你如何可以增长得更快。如果你知道局限是什么，你自然需要思考如何解决它。</p>\n<p>对于你准备去做的任何一件事，请问自己“这是优化增长的最佳做法吗？”比如，去参加一个会议并不是优化增长的最佳做法，除非你期望去那里销售你的产品。</p>\n<p>透明公开的内部指标报表（包括财务状况）是一个很好的事情。因为某些原因，创始人总是很害怕这一点。但它是好的，可以让整个公司专注于增长。专注于指标的员工和他们目前做到的状况有直接联系。如果你隐藏了这些标准，人们很难集中在他们身上。</p>\n<p>关于指标，请勿欺骗自己设定虚高的指标。这里常见的问题就是专注于注册量而忽视了留存。而对于增长，留存是和获取新用户同样重要的。</p>\n<p>建立一个内部节奏去保持动力也是很重要的。你的增长过程需要一个“律动” — 新功能，客户，新员工，盈利里程碑，合作伙伴，等等其他需要内部和外部去发布的。</p>\n<p>你应该设定富有野心的但大体可以实现的指标，并每个月审查进度。庆祝成功吧！保持将策略告诉内部人员，告诉每个员工你从客户那里听到的东西，等等。你在内部越分享更多 — 包括好消息和坏消息 — 你的公司就会越好。</p>\n<p>这里有几个创始人经常陷入的陷阱。其中一个就是如果公司疯狂成长但一切都看起来难以置信的破败和低效率，大家都担心其破碎。在实践中，这似乎很少发生（我可以指出 Friendster 是一个最近因为技术债务而死亡的创业公司。）相反，如果你增长很快但其他事情没有优化，这其实是很好的事情 — 你需要做的就是解决它以得到更快的增长！我最喜欢投资那些增长很快但未做优化的公司 — 他们都被严重低估了。</p>\n<p>另一个相关的陷阱就是有关长期问题—比如“我们在规模大后该怎么办？”答案就是等你先把规模做大后再考虑这个问题吧。很多创业公司在考虑这个问题时死掉了，因为他们没有想通。一个好经验就是只考虑比目前 10 倍规模大的情况。大多数早期创业团队都应该把“从小事做起”贴到他们的墙上并执行它。比如，好的创业公司常常在早期做很好的客户服务，不好的公司则担心这些小钱不够多（而不做）。但是好的客户服务会让种子用户充满惊喜，随着产品越来越好你需要减少客服工作，因为你已经知道客户纠结的东西并对此提高了产品/体验。（顺便强调下，这是个很好的例子 —去做好客服工作）</p>\n<p>关于 “从小事做起” 这里有个很大的误区 — 这不应该成为你最终不去盈利的借口。在早期有差点的单元经济是允许的，但你在后期如果还没做好盈利的话，你最好去找个好点的理由吧。</p>\n<p>另外一个陷阱是在增长绝对数值变坏时（尽管在比例上看起来还好）变得沮丧。对于指数增长，人类的直觉很不擅长。请提醒你的团队，所有的大公司都增长自一个小团队。</p>\n<p>一些最大的陷阱是创始人相信会带来增长，但在实践中长时间几乎从不。常见的例子是处理其他公司和“大型新闻发布会”。小心这些，并了解他们实际上从未有效。相反，所有的大公司都通过 — 打造一个用户喜爱的产品，在起初亲自招募用户，然后测试大量的增长策略（广告，引荐计划，销售和营销等），并做更多的工作。问你的客户在哪里找到更多的类似你的用户的人。</p>\n<p>请记住销售和市场营销不是差的词汇。尽管如果你没有一个伟大的产品，他们也不会拯救你，但他们可以帮助加速增长。如果你是一个面向企业的公司，那这是你的公司必备的。</p>\n<p>特别是不要害怕去销售。创始人中至少要有一个擅长邀请人们使用你的产品并付费的人。</p>\n<p>Alex Schultz 有一个关于消费产品增长的很值得观看的讲座。 对于 B2B 产品，我认为正确的答案就是一直跟踪每月的收入增长，并记住更长的销售周期意味着前几个月的数据不会好看的（虽然有时向创业公司销售，使其作为种子用户可以解决这个问题）。</p>\n<hr>\n<h2 id=\"专注-amp-强度\"><a href=\"#专注-amp-强度\" class=\"headerlink\" title=\"专注 &amp; 强度\"></a>专注 &amp; 强度</h2><p>如果我必须把我的建议提炼成两个词，我会挑专注和力度。这些词汇似乎真的匹配于我所认识的最优秀的创始人。</p>\n<p>他们不屈地专注于他们的产品和增长。事实上，他们不想做其他任何事情，他们说很多“不”（这是很难的，因为存在很多刚开始创业的人喜欢做新的事情。）</p>\n<p>一个通用规则是，在你控制好了第一件事之前不要让你的公司开始做下一件事。我认识的好公司没有同时开始做很多事的，他们要确认才去做，并一直做好。你可以做的事情比你想象的要少得多。一个非常常见的创业公司死亡的原因是做太多错误的事情。优先次序是关键且困难的。（同样重要的是要确定公司的优先顺序是设置你自己的战术优先级。我发现最适合我的是一张笔记的清单，每天少于 3 个的主要任务和少于 30 个的小任务，还有一张年度的总体目标的工作清单。）</p>\n<p>虽然伟大的创始人不做很多大的项目，他们要做就做到极致。他们把事情做得很快。这是是决定性的，但你有一家创业公司时这是很难的 — 你会得到很多矛盾的意见，这都是因为做一件事有多种方式，且因为存在很多不好的建议。好的创始人听取所有的建议，然后迅速作出自己的决定。 .</p>\n<p>请注意，这并不意味着做任何事情都要做到极致—这是很重要的一点。你必须选择去做正确的事情。Paul Buchheit 说过，要去找到用 10% 的努力得到 90% 价值的方法。市场不在乎你工作如何努力 — 只在乎你是否做了正确的事情。</p>\n<p>同时专注于产品质量和快速行动很难。但能做到这些就是好的创始人。</p>\n<p>我从未见过一个行动缓慢的创始人真正成功过。你和其他创业公司都一样。你也需要保持专注和快速行动。那些建造火箭和核反应堆的公司都致力于此。所有失败的公司都有个糟糕的理由解释其为何不一样且不需要快速行动。</p>\n<p>但你发现某件事有效时，保持前行。不要被其他事情分心。不要关闭脚下的喷气机。</p>\n<p>不要沉沦于早期的成功，你还没有一个很有前途的开始，如通过大量的网络事件，并在大量的网站上发言。初步成功的创业者们面临一个选择：要么一直在做他们正在做的事情，要么他们开始花很多时间考虑自己的 “个人品牌” 和享受成为创始人的状态。</p>\n<p>拒绝会议和新闻发布会是很难的 — 他们感觉良好，在你的空间看到其他创始人受关注也是令人不爽的。但这不会持续很长时间。最终，新闻界人士会看出谁是胜者，如果你的公司是真正成功的话，你会得到你想不到的更多关注。极端的情况是，早期创始人带着自己的公关团队 — 他们认为在电视上看的在现实中也是一样的，然后他们大部分都失败了。</p>\n<p>专注和强度在长跑中会赢得胜利。（Charlie Rose 曾说过结合专注和个人联系就能把事情做成，这句话一直伴随着我。）</p>\n<hr>\n<h2 id=\"CEO的工作\"><a href=\"#CEO的工作\" class=\"headerlink\" title=\"CEO的工作\"></a>CEO的工作</h2><p>我之前提到的 CEO 的唯一普遍的工作描述是确保公司成功。虽然这是真的，我还想谈一点特别是关于 CEO 应如何花他/她的时间。</p>\n<p><strong>一个 CEO 需要:</strong><br>1）设定公司的愿景和战略，<br>2）向公司的每一个人布道，<br>3）招募和管理团队，尤其是在你自己不擅长的领域里，<br>4）筹集资金，确保公司不缺钱，<br>5）设置执行质量标准，</p>\n<p>除此之外，找到你最喜爱的部分，并坚持在那里。</p>\n<p>正如我在开始时提到的，这是一个强度很高的工作。如果你成功了，它会把你的生活带到一个你想象不到的程度，这个公司会一直在你的脑海里。极致的专注和极高的强度意味着它不是平衡工作和生活的最佳选择。你还可以有一个很大的选择 — 你的家人，参加很多的比赛，等等 — 或另一个并没有那么丰富的生活。还有很多选择只有你自己可以做出决定，你会一直在做选择，不论你在委派方面做得多好。</p>\n<p>你的目标应该是超级响应你的团队和世界，要很清楚地知道战略和事件优先级别，出席一切重要的事情，并快速执行（特别是当其阻止到其他选择时。）你也应该采取一种“不惜一切代价”的态度 — 仍会有讨厌的笨蛋。如果团队看到你在做这些事情，他们也会这样做。</p>\n<p>管理自己的心理是非常困难且重要的。这一点已经成为老生常谈，但它是正确的—情感的高点和低点都是非常激烈的，如果你不知道如何在其中保持一定水平，你就会纠结。当 CEO 是孤独的。重要的是在一切都融化时，可以与其他 CEO 打电话（YC 的一个重要的意外发明是有一个让创始人找同伴的方式。）</p>\n<p>一个成功的创业需要很长的时间，当然比大多数创业者在一开始设想的要长得多。你不能把它当作一个通宵。你必须吃好，睡好，并锻炼身体。你得花时间和你的家人和朋友在一起。你还需要在一个你真正充满激情的领域工作，除了这些，没有其他东西能够长期支持你。</p>\n<p>所有的一切都会感觉破碎，多样和规模不一的灾难会让你惊讶。你的工作是用你的微笑来解决他们，让你的团队放心，一切都会好的。通常事情并不像他们看起来那么坏，但有时他们实际上是真的坏了。在任何情况下，只要继续走，不断成长。</p>\n<p>CEO 不找借口。很多不好和不公正的事情会发生。但是不要去说，当然更不要对团队说，“如果我们有更多的钱的话” 或 “如果我们有另一个工程师的话”。要么找出一个使这发生的方法，要么找出没有它的方法。那些让自己制造很多借口的人和创业公司的 CEO 们几乎总是失败。让自己在不公正中感到 1 分钟的不安即可，然后要清楚，想出一个解决办法这取决于你。努力做到让人们在谈论你时说：“ X 总是能把事情搞定” 。</p>\n<p>非初次创业的创业者知道他/她们在做什么。在你位置联系他们，并寻求帮助，你会变更好。如何成为一个好的领导者和管理者是值得投资去学习的。做这件事的最好方法是找一个导师 — 读书似乎不那么有效。</p>\n<p>在 YC 我们数量惊人的建议就是 “去问他们” 或 “想做就做吧” 。初次创业者都认为在你需要寻求某人一件事或想做一件新的事情时有秘诀。但我需要重复下，创业时，所有的秘诀都不生效了。你仅需保持直接，自愿去请求就好，但不要成为一个讨厌鬼。.</p>\n<p>扭曲他人的现实但不是你自己的现实也是很重要的。你需要说服别人你的公司是注定成为这个年代最重要的创业公司，但你还需要对任何可能出错的事情保持怀疑。</p>\n<p>持久。大多数创始人放弃得太快了或转移到下一个产品太快了。如果事情进展得不好，找出问题的根源是什么，确保你得到答案。作为一个成功创业公司 CEO 的一个巨大的特质就是是不放弃（虽然你不想固执于其他原因，这是另一个明显的矛盾，和一个要作出的艰难的判断。）</p>\n<p>乐观。虽然在世界某处可能有一个伟大且悲观的 CEO ，但我还没有见过他/她。相信未来会更好，公司将更好地在未来发挥重要的作用，这些对 CEO 和其他被影响的公司是重要的。这在理论上很容易，在短期的现实挑战中缺很难。不要忽视了长期的愿景，并相信每天的挑战将被遗忘，取而代之的是一年一年的进步。</p>\n<p>你的工作中定义任务和定义指标是最重要的。这可能有点奇怪，但它是值得早点去做的。无论你在什么时候开始还是在几年之后，随着你的成长，每一个新人都需要先植入公司的使命和价值然后再传播给他人。因此尽早写下你的价值观和使命。</p>\n<p>另一个我认为值得重复的陈词滥调是：建立一个公司有点像建立一种宗教。如果人们不把他们的日常生活和他们所关心的更高的目标联系起来，他们就不会做好工作。我认为在 YC 中 Airbnb 在这方面做得最好，我强烈推荐看看他们的文化价值观。</p>\n<p>一个 CEO 常见的错误就是致力于商业常见领域而不是在新产品和新方案上。比如，很多创始人认为他们需要在 人力资源，市场，财务，融资，公关等其他事情上寻找新方法。这常常是不好的。在已有事务中工作，把你的创造力用在你正在打造的产品和服务上。</p>\n<hr>\n<h2 id=\"招聘-amp-管理\"><a href=\"#招聘-amp-管理\" class=\"headerlink\" title=\"招聘 &amp; 管理\"></a>招聘 &amp; 管理</h2><p>招聘是你最重要的工作也是你打造一个成功公司的关键（和打造一个好产品相对。）</p>\n<p>我的第一条建议是不要做它。我们在 YC 最成功的公司都是等了比较长的时间后才开始招聘的。员工很贵。员工增加组织的复杂性和沟通开销。你有可以和联合创始人讲但不能和同一间房的员工讲的话。员工也增加了惯性，团队成员越多，在改变方向时难度越（指数级别的）高。抵制从你的雇员人数中获得自我价值的冲动。</p>\n<p>最好的人才都有很多机会。他们希望加入一家火箭般的公司。如果你什么都没有，招募他们是很难的。一旦你明显成功了，他们都会来加入你。</p>\n<p>值得重复提的是，好人才都有很多选择，你需要好人才来建立一个伟大的公司。要具有很大的公平、信任和责任心。愿意去寻求你认为你不可能得到的人。请记住，你想雇用的人要是那种如果他们想，就可以开始他们自己的公司的人。</p>\n<p>当你在招聘模式（即，当你把产品-市场形态为 T-infinity），你应该花你的 25% 的时间在招聘上。至少有一个创始人，通常是 CEO 需要擅长招聘。这是大多数 CEO 的首要任务。每个人都说，CEO 们应该在招聘上花很多时间，但在实践中，只有最好的 CEO 才去做。这里或许有些蹊跷。</p>\n<p>不要对你雇佣的人的品质做出妥协。每个人都知道这一点，然而，每个人都会在某些时候对这一点做出绝望的让步。每个人都会后悔，有时甚至会把公司杀死。好的和坏的人都有传染性的，如果你开始与平庸的人，平均值常常不会提高。公司开始与平庸的早期员工几乎从未恢复。相信你的直觉。如果你有疑问，那么答案是否定的。</p>\n<p>不要雇佣长期消极的人。他们不适合早期的创业公司 — 世界其他的人每天都会预测你的死亡，公司需要在其内部团结起来，从信念到矛盾。</p>\n<p>在任何角色中用态度而不是经验去评估。寻找原认知和把事情搞定的记录。寻找那些你喜欢的人才 — 你需要花费很多时间并陷入紧张的情况。对于你已经认识的人，在他们全职加入前先尝试在一个项目中共同工作。</p>\n<p>投资成为一个好管理者，这对于大多数创业者是很难的，它绝对是违反直觉的，但做得这点很重要。找到可以帮助你的导师，如果你不擅长这一点，你会迅速失去员工，如果你不挽留员工，即使你成为世界上最好的招聘官也不重要了。作为一个好管理者的大部分原则都被很好说明过了，但我从来没有讨论的问题是“不要进入英雄模式”。大多数的初次管理者都会在某个时候把变成这种模式受害者，并试着自己做所有的事情，并成为他们的工作人员触不可及的。它通常结束于一次崩溃。请抵制一切切换到这种模式的诱惑，并愿意在项目后期有一个运作良好的团队。</p>\n<p>说到管理，争取做到把每个人都弄到同一间办公室。由于某些原因，初创公司总是妥协于此。但几乎所有的最成功的初创公司开始于聚集在一起。我认为远程工作对大公司来说是很好的，但它并不是一个创业公司大范围成功的秘诀。</p>\n<p>最后，辞退要快。每个人都知道这个原则，但没有人去做。但我觉得我应该说出来。同样，开除那些那些对文化有毒害的人，不管他们做什么，他们都是多么的好。文化是你雇佣、开除、提升人中定义的。 .</p>\n<p>我就此写了一篇详细的博客。</p>\n<hr>\n<h2 id=\"竞争对手\"><a href=\"#竞争对手\" class=\"headerlink\" title=\"竞争对手\"></a>竞争对手</h2><p>关于竞争对手的一个快速的词：竞争对手是一个创业公司的鬼故事。初次创业者认为他们会杀死 99% 的创业者，但 99% 的创业者死于自杀，而不是谋杀。去考虑你的内部问题吧。如果你失败了，很可能是因为你没能成功地制造一个伟大的产品和/或未能建立一个伟大的公司。99% 的时候，你应该忽略竞争对手。特别是当他们在报纸中筹集了大量的钱或是制造很多噪音的时候。不要担心一个竞争对手，直到他们交付出一个真正的，跨时代的产品。新闻稿比代码更容易编写，比制作一个伟大的产品更容易。Henry Ford 说过：“竞争对手害怕的人永远是不在乎其他的一切，且依旧在做更好的生意的人。”</p>\n<p>每一个大公司在规模小的时候，都面临比你现在面临的更糟糕的竞争威胁，他们都走了出来。万事总有一个对策。</p>\n<hr>\n<h2 id=\"盈利\"><a href=\"#盈利\" class=\"headerlink\" title=\"盈利\"></a>盈利</h2><p>哦对了，盈利。你需要搞清楚如何做到它。</p>\n<p>一个简短版本是你需要让人们在你交付产品/服务中成本越高时付更多钱。因为一些原因，大家总是忘了如何把交付成本计算到账本里。</p>\n<p>如果你有一个免费的产品，不要打算购买用户。这对广告支持的企业真的很难。你需要让一些人与他们的朋友分享。</p>\n<p>如果你有一个低于1000美元的客户终身价值（LTV）的付费产品，你通常不要去销售。尝试不同的用户获取方法如 SEO / SEM，广告，邮件，等等，但要在 3 个月偿还你的客户获取成本（CAC）。如果你有一个超过1000美元的 LTV（净给你）付费产品，你也许可以直接销售，如果你的产品好卖。但除非你的 LTV 是 5000 美元或更高，它可能无效。试着通过推销自己的产品学习什么是有效的。销售黑技巧是一本有用的书。</p>\n<p>在任何情况下，试着去做到 “拉面盈利” — 即，赚的钱可以维持创始人吃拉面即可。当你来到这一步，你可以控制自己的命运，不在受到来自投资者和金融市场波动的影响。</p>\n<p>观察你的现金流。虽然这听起来令人难以置信，但我们已经看到很多创始人在没有意识到的情况下，钱花完了(然后 阅读 Paul Graham 的文章).</p>\n<hr>\n<h2 id=\"融资\"><a href=\"#融资\" class=\"headerlink\" title=\"融资\"></a>融资</h2><p>大多数初创公司在某个时候筹集资金。</p>\n<p>你应该在你需要的时候，或是在条件成熟时筹集资金。要小心，不要失去你的节俭或开始扔钱去解决问题。没有足够的钱可能是坏的，但有太多的钱几乎总是坏的。</p>\n<p>成功筹集到资金的秘诀是成为一个好的公司。所有其他的东西的创始人做了尝试优化的过程可能只占到 5% 的重要性。投资者寻找的是不论他们是否投资都会很成功的，但在得到外部资金会成长得更快的公司。“真正成功”这部分是重要的，因为巨大成功才会使得投资者得到回报，如果投资者相信你有 100% 的机会创造一个价值 1000 万美元的公司，但几乎没有机会建立一个更大的公司，他/她仍然可能不会投资，即使在估值非常低的情况下。所以要一直去解释为什么你的公司会是一个巨大的成功。</p>\n<p>投资者在错过下一个谷歌和在回想起来显然是愚蠢的东西上浪费钱的双重担心下所驱动（对于最好的公司，他们两者都担心。）</p>\n<p>如果你的公司不足以吸引资金就去融资，这不是一个好主意。你会抹黑名誉和并浪费时间。</p>\n<p>如果你在努力筹集资金，不要让情绪低落下去。很多优秀的公司都纠结于此，因为最好的公司在开始时看起来很糟糕（而且他们几乎总是看起来过时了。）当投资者告诉你没有，请记住“不”但别记住原因。同时请记住所有的“可以”都意味着“不”—投资人擅长用 “或许可以” 来表达 “不”。</p>\n<p>在融资对话中平等是很重要的 — 你不要去把你最喜欢的投资者列在名单上。让投资者采取行动的方法是担心其他投资者会抢走他们的机会。</p>\n<p>把融资看成是一种必要的邪恶，并尽可能迅速地完成这些事。有些创始人爱上融资，这是不好的。最好是有一个创始人这样做，以便公司不停顿下来。</p>\n<p>记住，大多数风投不了解很多行业。指标总是最有说服力的。</p>\n<p>不幸的是，大多数投资者（Y Combinator 是一个显著的例外）还需要通过你们都认识的人的引荐后才把你当回事，这种模式将开始变化。.</p>\n<p>坚持干净的条款（复杂的条款在每一轮融资后会更糟糕），但不要过度优化，特别是在估值上。估值是一种定量的竞争，所以创始人爱竞争最高估值。但中间估值不重要。</p>\n<p>第一次检查是最难得到的，所以集中精力去获取，这通常意味着你的注意力集中在谁最喜欢的人身上。总是常备多个计划，其中一个就是不融资，并且依据利息灵活的，如果你能把更多的钱更良好地利用，并且在其合理范围内，请保持开放心态去谈论这个。</p>\n<p>擅长 pitching 的一个重要关键是让你的故事尽可能清晰易懂。当然，最重要的关键是要有一个好的公司。有包括在 pitch 上有很多需要注意的，但至少你要有：使命，痛点，产品/服务，商业模式，团队，市场和市场增长率，财务。</p>\n<p>请记住，每一轮的资金的指标会越来越高。如果你只是为你的种子轮做一个引人注目的演示，不要惊讶于你的A轮。</p>\n<p>好的投资者真的做了大量的增值。坏的投资者会有损。大多数投资者陷在中间，既不增加也不减少。一个只投资小数额的投资者通常不会为你做任何事情（例如，请注意排队轮）。</p>\n<p>伟大的董事会成员是除了用户外对公司最佳的外部驱动力，外部驱动力具有大多数创始人想不到的价值。请愿意接受较低的估值，以获得一个伟大的愿意参与董事会成员。</p>\n<p>我认为 这篇由 Paul Graham 写的文章 是最好的关于融资的文章。作为一个战术点，你通常需要成为一个特拉华的 C 类公司，以提高机构的资本，所以最好是组成那样的。</p>\n<hr>\n<h1 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h1><p>请记住每个好想法都至少有一千人拥有。他们其中一个会成功。区别就是执行。这是一个磨练，每个人都希望有其他别的将想法变成功的办法，但是他们至今没找到。所以你需要的就是一个好想法，一个好产品，一个好团队，一个好执行。就是这么简单！; )</p>\n<p>感谢 Paul Buchheit, Erica Carpenter, Brian Chesky, Adam D’Angelo, Paul Graham, Drew Houston, Justin Kan, Matt Krisiloff, Aaron Levie, Gabriel Leydon, Jessica Livingston, Dustin Moskovitz, David Rusenko 和 Colleen Taylor 贡献了主意。</p>\n<p>作者：Sam Altman<br>原文链接：<a href=\"http://playbook.samaltman.com/\" target=\"_blank\" rel=\"external\">http://playbook.samaltman.com/</a></p>\n<p>这田舍君的一篇博文，觉得还不错，原地址：<a href=\"https://ipro.xin/2016/09/28/%E5%88%9B%E4%B8%9A%E6%89%8B%E5%86%8C/\" target=\"_blank\" rel=\"external\">创业手册</a></p>\n<hr>\n","excerpt":"","more":"<p>我们花了很多时间在为创业团队提供建议。尽管一对一的建议会一直很重要，但是我们认为对广泛建议进行提炼，并提供给 YC 和 YC 旗下公司会有助于 YC 的成长。所以我们觉得我们需要把这些都公开给大家。</p>\n<p>本剧本适合且只适合刚来到创业世界的人阅读。本剧本大部分内容对于已阅读过我们的合伙人所写的东西的人来说已不新鲜 — 本剧本的目的就是将内容做成合集。关于如何规模化一家创业公司的说明或许会有第二部分 — 但本剧本已基本覆盖了创业起步的部分。</p>\n<p>作为一家创业公司，你的目标就是做一些用户喜欢的东西。如果你要做的话，接下来你还需要考虑如何得到更多用户。但是这第一部分是非常关键的 — 思考下今天非常成功的公司吧。他们都开始于一个非常受用户欢迎且用户自愿为其宣传的产品。如果你在这个部分失败了，你就永远失败了。如果你欺骗你自己，认为你的用户喜欢你的产品但实际上他们不喜欢，你仍然会失败。</p>\n<p>创业公司坟墓里充斥着这类自认为他们可以跳过此步的人。</p>\n<p>打造一个受一小群用户热爱的产品会比打造一个受很多用户喜欢（请注意”喜欢”与”热爱”的区别）的产品更好。尽管”一小群热爱”和”一大群喜欢”看起来的积极感觉一样多，但比起后者需要将用户从”喜欢”转化为”热爱”，前者获取更多用户会很简单。</p>\n<p>如果要用一个词汇来警告一个准备创业的人：（你的产品）弱爆了！我们从 YC 创业者中收集到的最一致的一条反馈是，创业是他们无法想象的难，因为他们没有一个针对此工作和启动强度的框架。加入一家正在火箭飞船轨道上高速发展的创业公司是更为明智的选择。</p>\n<p>在另一方面，实际上创建一个创业公司并不会对你的职业生涯产生很多威胁 — 如果你非常善于技术的话，失败了还会找到工作。大部分人非常不善于评估风险。我个人认为更为危险的是你有一个自己非常热衷的想法和产品，但你仍然待在一个安全，舒适，不过瘾的工作岗位上。</p>\n<p>为了创业成功，你需要有：一个好想法（包括一个好市场），一个好团队，一个好产品，和强大的执行。</p>\n<hr>\n<h1 id=\"第一部分\"><a href=\"#第一部分\" class=\"headerlink\" title=\"第一部分\"></a>第一部分</h1><h2 id=\"想法\"><a href=\"#想法\" class=\"headerlink\" title=\"想法\"></a>想法</h2><p>在 YC ，我们首先会问创业团队他们正在打造的产品以及其理由。对于这个问题我们期待清晰且简洁的答案。这将作为对创始人及其想法的评估。作为一个创始人，能够清晰地思考并交流是很重要的 — 对于招聘，融资，销售，等其他。想法在广义上需要可以清楚地表达并传播，复杂的想法常常是其混乱思维和虚构问题的表现。如果一个想法没能让第一次听到的人感到兴奋，这并不好。</p>\n<p><strong>我们问的另外一个问题是：谁迫切需要他们的产品。</strong></p>\n<p>最理想的情况是，你自己也是目标用户。其次的理想情况是，你对目标用户非常了解。</p>\n<p>如果一个公司已经有用户了，我们会问其用户数量及其增长速度。我们会分析该产品为什么没有增长得更快，我们会着重搞清楚其用户是否真正热爱其产品。很多情况下是他们告诉他们的朋友去用这个产品，而不是公司推动其增长。我们还会问其公司是否已开始盈利，如果不，为什么？</p>\n<p>如果该公司还没有用户，我们会考虑搭建最小化的产品以便测试该想法—比如，如果我们从最佳用户体验的反方向入手，我们会先去做内核部分。</p>\n<p>对想法进行测试的办法无非是先启动它并去看结果是什么，或者去贩卖它（比如：在你开始写代码前去获得一份用户意向书。）前者对了解用户想法更好（用户或许会告诉你他们将使用你的产品，但实际上并没有），后者对面向企业的想法更佳（如果一个公司告诉你他们会使用你的产品，那就去做吧。）特别的，如果你是一家面向企业的公司，我们会问你首要的问题就是，你有没有一个用户会买你正在打造的产品的意向或信息。对于大多数生物科技和硬件科技公司，他们检测想法的办法是先和潜在用户聊聊并试图找出可以做出第一代产品的最小集合。</p>\n<p>让你的想法和你从用户得到的反馈一起成长是很重要的。你需要非常了解你的用户—这对于你评估一个想法，打造一个产品，和创办一个好公司至关重要。</p>\n<p>正如前面提到的，创业是非常难的。它需要很长时间，及持续的异常的努力。创始人及其员工需要有共同的使命感去维系它。所以我们会问创始人为什么他要创办这个特别的公司。.</p>\n<p>我们还会问该公司什么时候会形成垄断。关于这个问题有很多描述，但我们使用了 Peter Thiel 的词汇。显然，我们不希望你的公司通过不道德的手段攻击竞争对手。相反，我们会寻找那些在规模化更有力且难以被复制的公司。</p>\n<p>最后，我们询问市场。市场今天有多大，市场增长得多快，以及为什么这个市场会在十年内具有大规模。我们试图搞清楚为什么这个市场在快速发展，以及为什么这是一个适合创业公司发展的市场。我们喜欢那种当主流技术正在发生变化但大部分人未察觉到的 — 大公司不擅长此道。还有一个与直觉相反的最佳答案是去切一个小蛋糕的大部分（而不是一个大蛋糕的小部分）。</p>\n<p><strong>与想法有关的其他思考：</strong></p>\n<p>比起一些衍生产品我们更喜欢新东西。很多大公司都开始于一些全新的东西（一个广被接受的关于”全新”的定义是 10 倍的好。）如果已经有 10 家其他公司在同一时间做同样的事情，这听起来像已存在的东西，我们对此怀疑态度。</p>\n<p>一个违反直觉的原因是，做一些新东西比做衍生且简单的产品是更容易的。而且如果你是前者的话人们会帮助你；如果你是后者，他们不会帮助你。</p>\n<p>好想法都是听起来很糟糕但实际上不错的。所以你不需要对你的想法过于保密 — 如果这确实是一个好想法，那它听起来不会像值得剽窃的想法。如果它听起来很值得剽窃，有好想法的人比将其执行并成立公司去实践的人多 1000 倍。如果你告诉别人你在做什么，人们或许会帮助你。</p>\n<p>谈到告诉别人你的想法 — 尽管当人们第一次听到它时感到兴奋是很重要的，很大一部分人会说你的想法太烂了。或许他们是正确的，或许他们不擅长评估创业公司，又或者他们仅仅是嫉妒。不管原因如何，这种情况会时常发生，他会很伤害，或者尽管你认为自己不会受其影响，你仍然会。此时你越保持自信并不被其他人影响，你就越会保持好状态。不管你取得了多大的成功，喷子永远不会走开。</p>\n<p>如果你没有想法但是想成立一个创业公司呢？你最好别。有了好想法后再通过创业公司让其传播到世界才是上策。</p>\n<p>我们曾经尝试过一个实验，资助一些没有想法的初创团队，在一个他们在得到资助后着陆在一个有前途的想法上。</p>\n<p>他们都失败了。我认为其一部分原因就是好的创始人倾向于有很多好想法（经常是过多了）。但你有一家创业公司后面临的更大的一个问题是，你需要赶快想出一个好想法，因为这已经是一家正式公司了，你的想法不能太疯狂。你最终获得一个貌似有理的但走歪的想法。这就是核心威胁。</p>\n<p>因此，最好不要过于积极地强迫自己想出创业点子。相反，学习很多不同的东西。练习发现问题，那些似乎效率不高的事情，和重大技术转变。为你觉得有趣的项目工作。走出自己的方式去和聪明，有趣的人打交道。在某些时候，想法就出现了。</p>\n<hr>\n<h1 id=\"第二部分\"><a href=\"#第二部分\" class=\"headerlink\" title=\"第二部分\"></a>第二部分</h1><h2 id=\"一个好团队\"><a href=\"#一个好团队\" class=\"headerlink\" title=\"一个好团队\"></a>一个好团队</h2><p>平庸的团队建不成伟大的公司。我们看创始人最重要的一个事情就是其实力。当我做后期投资时，我同样看重创始人的雇员的实力。</p>\n<p>什么让一个创始人伟大？最重要的特质就是永不止步，决心，坚韧性和智慧。智力与激情也是很重要的。这些特质都比经验和 “擅长 X 语言和 Y 框架” 更为重要。</p>\n<p>我们发现最成功的创始人都是一些具有低应力处理事务的人，因为你会感觉到”不管这件事是什么，他 / 她将做成这件事。”有时你可以通过意志的纯粹力量取得成功。</p>\n<p>好的创始人有一些看似矛盾的特质。一个重要的例子就是刚性和柔性。当创业涉及到几乎一切事情时，你需要保持对公司和它的使命的核心强烈信念，并依然非常灵活且愿意学习新的东西。</p>\n<p>最好的创始人都异常敏捷。这是果断，专注，力度，并把事情做好的能力的一个指标。</p>\n<p>不善言谈的创始人都很糟糕。沟通是一项创始人必备的技能 — 实际上，我认为这是最重要的且常被忽视的创始人技能。</p>\n<p>科技创业公司必须至少有一个创办人可以建立公司的产品或服务，以及至少一个创始人（或可以成为）擅长销售和与用户沟通。这可以是同一个人。</p>\n<p>当你在选择合伙人时请考虑这些标准 — 这将会是你做过最重要的决定，而且这一步经常会被做得很随意。你需要一个你非常了解的人，而不是你在合伙人聚会中刚遇到的一个人。你可以通过更多信息来评估你的合伙人，你不能走错这一步。同时，在某些时候，创业公司的期望值可能处于 X 坐标轴的下方。此时如果你和你的联合创始人预先存在联系，你们不能甩掉一个人并保持前行。联合创始人的关系破裂是一个早期创业团队死亡的最大原因，我们会常常看到联合创始人们抱着共同目的去成立一家创业公司。</p>\n<p>目前为止最好的情况是，找一个好的联合创始人。其次的最佳做法是成为一个独立的创业者。目前最坏的情况是，找一个不好的联合创始人。如果事情没搞头了，你应该迅速分道扬镳。</p>\n<p>一个关于净资产的简报：随着时间的推移，关于股权分配的话题并没有变简单 — 所以早点把它做好吧。平分是最好的选择，为了防止当两个创始人分离时造成死锁，有一个人多拿一份股权也是不错的选择。</p>\n<hr>\n<h1 id=\"第三部分\"><a href=\"#第三部分\" class=\"headerlink\" title=\"第三部分\"></a>第三部分</h1><h2 id=\"一个好产品\"><a href=\"#一个好产品\" class=\"headerlink\" title=\"一个好产品\"></a>一个好产品</h2><p>有一个好产品，这就是通往成功的秘密。这是所有伟大的公司仅有的唯一共同点。</p>\n<p>如果你不去做一个你的用户会喜欢的东西你最终会失败。尽管创始人都去寻找其他技巧。但创业是你人生中唯一不需要寻找技巧的事情。</p>\n<p>一个好产品是保持长期增长的唯一方法。最终你的公司会变很大以至于所有的增长黑技巧（Growth Hack）都不起作用，你需要借助那些期望用你的产品的用户来保持增长。这是关于超级成功的公司最重要的事情。别无他法。想一下所有非常成功的技术公司—他们都在做这件事。</p>\n<p>你需要在你的公司里建立一个“产品改进引擎”。你应该和你的用户交谈，并观看他们使用你的产品，找出哪些部分是分杆，然后把你的产品做更好。然后再重复做一遍。这个周期应该是该公司的头号重点，它应该推动一切。如果你每周都能提高你的产品 5%，它就真的会复合。</p>\n<p>这个周期的重复速率越快，公司通常就越好。在 YC，我们告诉创业者应除了吃，睡，运动，并花时间与他们的亲人外，要专注建立产品与用户交流。</p>\n<p>要把这个周期做好，你还需与你的用户更进一步接触。甚至是观察用户使用你的产品。如果可以的话，请坐到他们的办公室。衡量他对你说的和他实际上在做的。你不应该在你和用户之间加入中间人，这个状态保持越久越好 — 这意味着创始人需要做销售，客服，等等。</p>\n<p>尽全力搞懂你的用户。真正弄清楚他们需要什么，在哪里找到他们，以及他们在哪里感到不满。</p>\n<p>“从小事做起（Do things that don’t scale）” 显然已成为了创业团队的口头禅。 通常你需要在一定时间招募种子用户（Ben Silbermann 过去常在咖啡馆邀请陌生人使用 Pinterest）然后打造一款他们需要的产品。很多创始人讨厌 这一步，然后仅仅想在媒体宣传其产品。但那常常不会成功。人工招募用户，然后去做一款你的种子用户会告诉他们朋友的好产品吧。</p>\n<p>你还需要把东西分成小片，一边走一边重复和适应。不要尝试做很长期的计划，特别不要把成批的东西做一次公开发行。你需要从简单处着手 — 其表面积越小越好 — 然后将其更快地打造出来。实际上，简单永远是好的，你需要保持你的产品和公司尽可能简单。</p>\n<p>我们都会问创业团队一些相同问题：用户使用你的产品超过一次了吗？你的用户对你的产品狂热吗？你的用户会在你的公司消失后变得很沮丧吗？你的用户会在不是你要求的情况下向别人推荐你的产品吗？如果你是 B2B 的公司，你有至少 10 家付费用户吗？</p>\n<p>如果没有，那这就是潜在的问题，然后我们会告诉该公司把产品做的更好。对于一家公司为何没在成长的原因我都持怀疑态度 — 因为大多数情况下真正的原因是他们的产品还不够好。</p>\n<p>但如果初创团队不清楚他们接下来要对其产品干什么，或者他们的产品就是不够好，我们就派他们去找用户谈谈。虽然这也不是每次都会有效 — 人们会问福特寻求更快的马 — 但这种办法会常常惊人的有效。事实上，更普遍的是，在公司内有任何分歧时，请和你的用户谈谈。</p>\n<p>最好的创始人都很关心产品质量，甚至是看似无关紧要的细节。但这看来是有效的办法。同时，“产品” 应包括所有与该公司的用户的交互。你需要提供优秀的支持，好的销售互动等。</p>\n<p>请记住，如果你没有做出好产品，什么东西都救不了你。</p>\n<hr>\n<h1 id=\"第四部分\"><a href=\"#第四部分\" class=\"headerlink\" title=\"第四部分\"></a>第四部分</h1><h2 id=\"好的执行\"><a href=\"#好的执行\" class=\"headerlink\" title=\"好的执行\"></a>好的执行</h2><p>尽管打造一款好产品是重要的，但这还不够。你还需要将其转变成一个好公司，你必须亲自去做 — 雇佣一个“经验丰富的经理”去帮你招聘这种很常见的行为是失败创业公司的墓地。在创业中很长一段时间内，你不能把招聘这个职位外包出去。</p>\n<p>你还需要盈利，这听起来很明显。这时候你该考虑如何盈利了。</p>\n<p>CEO 的唯一职位描述就是保证公司成功。作为 CEO 即使你有很多不足，你仍可以雇佣那些弥补你的不足的人才来让他们来把事情做好。有经验的 CEO 与一个理想的工商管理硕士可能会有技能的差距，但他/她也是不会理解用户，不会有和你相同的产品嗅觉，也并不会太在意产品。</p>\n<h2 id=\"成长\"><a href=\"#成长\" class=\"headerlink\" title=\"成长\"></a>成长</h2><p>增长和动力是伟大执行的关键。（只要不是 “以 90 美分的价格出售 1 美元”的）增长就解决了所有的问题，而缺乏增长的问题除了增长这个办法外无解的。如果你在增长，就会感觉到你在成功，大家都很高兴。如果你在增长，每个时间段都会有新的角色和责任，大家会觉得自己的事业正在进步。如果你不在增长，这感觉就像你失败了，大家不快乐并且离开。如果你不在增长，大家就只会推卸责任和抱怨了。</p>\n<p>创业公司没有动力的话，创始人和雇员都会焦灼起来，很难形容的沮丧。</p>\n<p>好的执行的首要方针就是“永不失去动力”。但是你该如何做到呢？</p>\n<p>最重要的办法就是让它成为你的首要任务。公司会按 CEO 去执行。为公司优化找到一个指标是很具价值的，也值得花时间去找到正确的增长指标。如果你关注增长，然后设定一个目标，公司其他人都会专注于该目标。</p>\n<p><strong>以下是一些例子</strong>。</p>\n<p>Airbnb 的创办者构建了一个他们想达到的前瞻性图谱。他们把这个图谱挂到了所有地方 — 在他们的冰箱上，桌子上，卫生间镜子上。如果他们这周达到了目标，那很好，如果没有，他们就会一直对此进行研究。</p>\n<p>Mark Zuckerberg 曾说道 Facebook 最重要的革新就是在增长缓慢时设立了一个增长团队。在其公司这一团队是（也许仍然是）一个最负盛名的团体—每个人都知道它是多么重要。</p>\n<p>对增长不利的东西要记录下来。以公司的角度去讨论你如何可以增长得更快。如果你知道局限是什么，你自然需要思考如何解决它。</p>\n<p>对于你准备去做的任何一件事，请问自己“这是优化增长的最佳做法吗？”比如，去参加一个会议并不是优化增长的最佳做法，除非你期望去那里销售你的产品。</p>\n<p>透明公开的内部指标报表（包括财务状况）是一个很好的事情。因为某些原因，创始人总是很害怕这一点。但它是好的，可以让整个公司专注于增长。专注于指标的员工和他们目前做到的状况有直接联系。如果你隐藏了这些标准，人们很难集中在他们身上。</p>\n<p>关于指标，请勿欺骗自己设定虚高的指标。这里常见的问题就是专注于注册量而忽视了留存。而对于增长，留存是和获取新用户同样重要的。</p>\n<p>建立一个内部节奏去保持动力也是很重要的。你的增长过程需要一个“律动” — 新功能，客户，新员工，盈利里程碑，合作伙伴，等等其他需要内部和外部去发布的。</p>\n<p>你应该设定富有野心的但大体可以实现的指标，并每个月审查进度。庆祝成功吧！保持将策略告诉内部人员，告诉每个员工你从客户那里听到的东西，等等。你在内部越分享更多 — 包括好消息和坏消息 — 你的公司就会越好。</p>\n<p>这里有几个创始人经常陷入的陷阱。其中一个就是如果公司疯狂成长但一切都看起来难以置信的破败和低效率，大家都担心其破碎。在实践中，这似乎很少发生（我可以指出 Friendster 是一个最近因为技术债务而死亡的创业公司。）相反，如果你增长很快但其他事情没有优化，这其实是很好的事情 — 你需要做的就是解决它以得到更快的增长！我最喜欢投资那些增长很快但未做优化的公司 — 他们都被严重低估了。</p>\n<p>另一个相关的陷阱就是有关长期问题—比如“我们在规模大后该怎么办？”答案就是等你先把规模做大后再考虑这个问题吧。很多创业公司在考虑这个问题时死掉了，因为他们没有想通。一个好经验就是只考虑比目前 10 倍规模大的情况。大多数早期创业团队都应该把“从小事做起”贴到他们的墙上并执行它。比如，好的创业公司常常在早期做很好的客户服务，不好的公司则担心这些小钱不够多（而不做）。但是好的客户服务会让种子用户充满惊喜，随着产品越来越好你需要减少客服工作，因为你已经知道客户纠结的东西并对此提高了产品/体验。（顺便强调下，这是个很好的例子 —去做好客服工作）</p>\n<p>关于 “从小事做起” 这里有个很大的误区 — 这不应该成为你最终不去盈利的借口。在早期有差点的单元经济是允许的，但你在后期如果还没做好盈利的话，你最好去找个好点的理由吧。</p>\n<p>另外一个陷阱是在增长绝对数值变坏时（尽管在比例上看起来还好）变得沮丧。对于指数增长，人类的直觉很不擅长。请提醒你的团队，所有的大公司都增长自一个小团队。</p>\n<p>一些最大的陷阱是创始人相信会带来增长，但在实践中长时间几乎从不。常见的例子是处理其他公司和“大型新闻发布会”。小心这些，并了解他们实际上从未有效。相反，所有的大公司都通过 — 打造一个用户喜爱的产品，在起初亲自招募用户，然后测试大量的增长策略（广告，引荐计划，销售和营销等），并做更多的工作。问你的客户在哪里找到更多的类似你的用户的人。</p>\n<p>请记住销售和市场营销不是差的词汇。尽管如果你没有一个伟大的产品，他们也不会拯救你，但他们可以帮助加速增长。如果你是一个面向企业的公司，那这是你的公司必备的。</p>\n<p>特别是不要害怕去销售。创始人中至少要有一个擅长邀请人们使用你的产品并付费的人。</p>\n<p>Alex Schultz 有一个关于消费产品增长的很值得观看的讲座。 对于 B2B 产品，我认为正确的答案就是一直跟踪每月的收入增长，并记住更长的销售周期意味着前几个月的数据不会好看的（虽然有时向创业公司销售，使其作为种子用户可以解决这个问题）。</p>\n<hr>\n<h2 id=\"专注-amp-强度\"><a href=\"#专注-amp-强度\" class=\"headerlink\" title=\"专注 &amp; 强度\"></a>专注 &amp; 强度</h2><p>如果我必须把我的建议提炼成两个词，我会挑专注和力度。这些词汇似乎真的匹配于我所认识的最优秀的创始人。</p>\n<p>他们不屈地专注于他们的产品和增长。事实上，他们不想做其他任何事情，他们说很多“不”（这是很难的，因为存在很多刚开始创业的人喜欢做新的事情。）</p>\n<p>一个通用规则是，在你控制好了第一件事之前不要让你的公司开始做下一件事。我认识的好公司没有同时开始做很多事的，他们要确认才去做，并一直做好。你可以做的事情比你想象的要少得多。一个非常常见的创业公司死亡的原因是做太多错误的事情。优先次序是关键且困难的。（同样重要的是要确定公司的优先顺序是设置你自己的战术优先级。我发现最适合我的是一张笔记的清单，每天少于 3 个的主要任务和少于 30 个的小任务，还有一张年度的总体目标的工作清单。）</p>\n<p>虽然伟大的创始人不做很多大的项目，他们要做就做到极致。他们把事情做得很快。这是是决定性的，但你有一家创业公司时这是很难的 — 你会得到很多矛盾的意见，这都是因为做一件事有多种方式，且因为存在很多不好的建议。好的创始人听取所有的建议，然后迅速作出自己的决定。 .</p>\n<p>请注意，这并不意味着做任何事情都要做到极致—这是很重要的一点。你必须选择去做正确的事情。Paul Buchheit 说过，要去找到用 10% 的努力得到 90% 价值的方法。市场不在乎你工作如何努力 — 只在乎你是否做了正确的事情。</p>\n<p>同时专注于产品质量和快速行动很难。但能做到这些就是好的创始人。</p>\n<p>我从未见过一个行动缓慢的创始人真正成功过。你和其他创业公司都一样。你也需要保持专注和快速行动。那些建造火箭和核反应堆的公司都致力于此。所有失败的公司都有个糟糕的理由解释其为何不一样且不需要快速行动。</p>\n<p>但你发现某件事有效时，保持前行。不要被其他事情分心。不要关闭脚下的喷气机。</p>\n<p>不要沉沦于早期的成功，你还没有一个很有前途的开始，如通过大量的网络事件，并在大量的网站上发言。初步成功的创业者们面临一个选择：要么一直在做他们正在做的事情，要么他们开始花很多时间考虑自己的 “个人品牌” 和享受成为创始人的状态。</p>\n<p>拒绝会议和新闻发布会是很难的 — 他们感觉良好，在你的空间看到其他创始人受关注也是令人不爽的。但这不会持续很长时间。最终，新闻界人士会看出谁是胜者，如果你的公司是真正成功的话，你会得到你想不到的更多关注。极端的情况是，早期创始人带着自己的公关团队 — 他们认为在电视上看的在现实中也是一样的，然后他们大部分都失败了。</p>\n<p>专注和强度在长跑中会赢得胜利。（Charlie Rose 曾说过结合专注和个人联系就能把事情做成，这句话一直伴随着我。）</p>\n<hr>\n<h2 id=\"CEO的工作\"><a href=\"#CEO的工作\" class=\"headerlink\" title=\"CEO的工作\"></a>CEO的工作</h2><p>我之前提到的 CEO 的唯一普遍的工作描述是确保公司成功。虽然这是真的，我还想谈一点特别是关于 CEO 应如何花他/她的时间。</p>\n<p><strong>一个 CEO 需要:</strong><br>1）设定公司的愿景和战略，<br>2）向公司的每一个人布道，<br>3）招募和管理团队，尤其是在你自己不擅长的领域里，<br>4）筹集资金，确保公司不缺钱，<br>5）设置执行质量标准，</p>\n<p>除此之外，找到你最喜爱的部分，并坚持在那里。</p>\n<p>正如我在开始时提到的，这是一个强度很高的工作。如果你成功了，它会把你的生活带到一个你想象不到的程度，这个公司会一直在你的脑海里。极致的专注和极高的强度意味着它不是平衡工作和生活的最佳选择。你还可以有一个很大的选择 — 你的家人，参加很多的比赛，等等 — 或另一个并没有那么丰富的生活。还有很多选择只有你自己可以做出决定，你会一直在做选择，不论你在委派方面做得多好。</p>\n<p>你的目标应该是超级响应你的团队和世界，要很清楚地知道战略和事件优先级别，出席一切重要的事情，并快速执行（特别是当其阻止到其他选择时。）你也应该采取一种“不惜一切代价”的态度 — 仍会有讨厌的笨蛋。如果团队看到你在做这些事情，他们也会这样做。</p>\n<p>管理自己的心理是非常困难且重要的。这一点已经成为老生常谈，但它是正确的—情感的高点和低点都是非常激烈的，如果你不知道如何在其中保持一定水平，你就会纠结。当 CEO 是孤独的。重要的是在一切都融化时，可以与其他 CEO 打电话（YC 的一个重要的意外发明是有一个让创始人找同伴的方式。）</p>\n<p>一个成功的创业需要很长的时间，当然比大多数创业者在一开始设想的要长得多。你不能把它当作一个通宵。你必须吃好，睡好，并锻炼身体。你得花时间和你的家人和朋友在一起。你还需要在一个你真正充满激情的领域工作，除了这些，没有其他东西能够长期支持你。</p>\n<p>所有的一切都会感觉破碎，多样和规模不一的灾难会让你惊讶。你的工作是用你的微笑来解决他们，让你的团队放心，一切都会好的。通常事情并不像他们看起来那么坏，但有时他们实际上是真的坏了。在任何情况下，只要继续走，不断成长。</p>\n<p>CEO 不找借口。很多不好和不公正的事情会发生。但是不要去说，当然更不要对团队说，“如果我们有更多的钱的话” 或 “如果我们有另一个工程师的话”。要么找出一个使这发生的方法，要么找出没有它的方法。那些让自己制造很多借口的人和创业公司的 CEO 们几乎总是失败。让自己在不公正中感到 1 分钟的不安即可，然后要清楚，想出一个解决办法这取决于你。努力做到让人们在谈论你时说：“ X 总是能把事情搞定” 。</p>\n<p>非初次创业的创业者知道他/她们在做什么。在你位置联系他们，并寻求帮助，你会变更好。如何成为一个好的领导者和管理者是值得投资去学习的。做这件事的最好方法是找一个导师 — 读书似乎不那么有效。</p>\n<p>在 YC 我们数量惊人的建议就是 “去问他们” 或 “想做就做吧” 。初次创业者都认为在你需要寻求某人一件事或想做一件新的事情时有秘诀。但我需要重复下，创业时，所有的秘诀都不生效了。你仅需保持直接，自愿去请求就好，但不要成为一个讨厌鬼。.</p>\n<p>扭曲他人的现实但不是你自己的现实也是很重要的。你需要说服别人你的公司是注定成为这个年代最重要的创业公司，但你还需要对任何可能出错的事情保持怀疑。</p>\n<p>持久。大多数创始人放弃得太快了或转移到下一个产品太快了。如果事情进展得不好，找出问题的根源是什么，确保你得到答案。作为一个成功创业公司 CEO 的一个巨大的特质就是是不放弃（虽然你不想固执于其他原因，这是另一个明显的矛盾，和一个要作出的艰难的判断。）</p>\n<p>乐观。虽然在世界某处可能有一个伟大且悲观的 CEO ，但我还没有见过他/她。相信未来会更好，公司将更好地在未来发挥重要的作用，这些对 CEO 和其他被影响的公司是重要的。这在理论上很容易，在短期的现实挑战中缺很难。不要忽视了长期的愿景，并相信每天的挑战将被遗忘，取而代之的是一年一年的进步。</p>\n<p>你的工作中定义任务和定义指标是最重要的。这可能有点奇怪，但它是值得早点去做的。无论你在什么时候开始还是在几年之后，随着你的成长，每一个新人都需要先植入公司的使命和价值然后再传播给他人。因此尽早写下你的价值观和使命。</p>\n<p>另一个我认为值得重复的陈词滥调是：建立一个公司有点像建立一种宗教。如果人们不把他们的日常生活和他们所关心的更高的目标联系起来，他们就不会做好工作。我认为在 YC 中 Airbnb 在这方面做得最好，我强烈推荐看看他们的文化价值观。</p>\n<p>一个 CEO 常见的错误就是致力于商业常见领域而不是在新产品和新方案上。比如，很多创始人认为他们需要在 人力资源，市场，财务，融资，公关等其他事情上寻找新方法。这常常是不好的。在已有事务中工作，把你的创造力用在你正在打造的产品和服务上。</p>\n<hr>\n<h2 id=\"招聘-amp-管理\"><a href=\"#招聘-amp-管理\" class=\"headerlink\" title=\"招聘 &amp; 管理\"></a>招聘 &amp; 管理</h2><p>招聘是你最重要的工作也是你打造一个成功公司的关键（和打造一个好产品相对。）</p>\n<p>我的第一条建议是不要做它。我们在 YC 最成功的公司都是等了比较长的时间后才开始招聘的。员工很贵。员工增加组织的复杂性和沟通开销。你有可以和联合创始人讲但不能和同一间房的员工讲的话。员工也增加了惯性，团队成员越多，在改变方向时难度越（指数级别的）高。抵制从你的雇员人数中获得自我价值的冲动。</p>\n<p>最好的人才都有很多机会。他们希望加入一家火箭般的公司。如果你什么都没有，招募他们是很难的。一旦你明显成功了，他们都会来加入你。</p>\n<p>值得重复提的是，好人才都有很多选择，你需要好人才来建立一个伟大的公司。要具有很大的公平、信任和责任心。愿意去寻求你认为你不可能得到的人。请记住，你想雇用的人要是那种如果他们想，就可以开始他们自己的公司的人。</p>\n<p>当你在招聘模式（即，当你把产品-市场形态为 T-infinity），你应该花你的 25% 的时间在招聘上。至少有一个创始人，通常是 CEO 需要擅长招聘。这是大多数 CEO 的首要任务。每个人都说，CEO 们应该在招聘上花很多时间，但在实践中，只有最好的 CEO 才去做。这里或许有些蹊跷。</p>\n<p>不要对你雇佣的人的品质做出妥协。每个人都知道这一点，然而，每个人都会在某些时候对这一点做出绝望的让步。每个人都会后悔，有时甚至会把公司杀死。好的和坏的人都有传染性的，如果你开始与平庸的人，平均值常常不会提高。公司开始与平庸的早期员工几乎从未恢复。相信你的直觉。如果你有疑问，那么答案是否定的。</p>\n<p>不要雇佣长期消极的人。他们不适合早期的创业公司 — 世界其他的人每天都会预测你的死亡，公司需要在其内部团结起来，从信念到矛盾。</p>\n<p>在任何角色中用态度而不是经验去评估。寻找原认知和把事情搞定的记录。寻找那些你喜欢的人才 — 你需要花费很多时间并陷入紧张的情况。对于你已经认识的人，在他们全职加入前先尝试在一个项目中共同工作。</p>\n<p>投资成为一个好管理者，这对于大多数创业者是很难的，它绝对是违反直觉的，但做得这点很重要。找到可以帮助你的导师，如果你不擅长这一点，你会迅速失去员工，如果你不挽留员工，即使你成为世界上最好的招聘官也不重要了。作为一个好管理者的大部分原则都被很好说明过了，但我从来没有讨论的问题是“不要进入英雄模式”。大多数的初次管理者都会在某个时候把变成这种模式受害者，并试着自己做所有的事情，并成为他们的工作人员触不可及的。它通常结束于一次崩溃。请抵制一切切换到这种模式的诱惑，并愿意在项目后期有一个运作良好的团队。</p>\n<p>说到管理，争取做到把每个人都弄到同一间办公室。由于某些原因，初创公司总是妥协于此。但几乎所有的最成功的初创公司开始于聚集在一起。我认为远程工作对大公司来说是很好的，但它并不是一个创业公司大范围成功的秘诀。</p>\n<p>最后，辞退要快。每个人都知道这个原则，但没有人去做。但我觉得我应该说出来。同样，开除那些那些对文化有毒害的人，不管他们做什么，他们都是多么的好。文化是你雇佣、开除、提升人中定义的。 .</p>\n<p>我就此写了一篇详细的博客。</p>\n<hr>\n<h2 id=\"竞争对手\"><a href=\"#竞争对手\" class=\"headerlink\" title=\"竞争对手\"></a>竞争对手</h2><p>关于竞争对手的一个快速的词：竞争对手是一个创业公司的鬼故事。初次创业者认为他们会杀死 99% 的创业者，但 99% 的创业者死于自杀，而不是谋杀。去考虑你的内部问题吧。如果你失败了，很可能是因为你没能成功地制造一个伟大的产品和/或未能建立一个伟大的公司。99% 的时候，你应该忽略竞争对手。特别是当他们在报纸中筹集了大量的钱或是制造很多噪音的时候。不要担心一个竞争对手，直到他们交付出一个真正的，跨时代的产品。新闻稿比代码更容易编写，比制作一个伟大的产品更容易。Henry Ford 说过：“竞争对手害怕的人永远是不在乎其他的一切，且依旧在做更好的生意的人。”</p>\n<p>每一个大公司在规模小的时候，都面临比你现在面临的更糟糕的竞争威胁，他们都走了出来。万事总有一个对策。</p>\n<hr>\n<h2 id=\"盈利\"><a href=\"#盈利\" class=\"headerlink\" title=\"盈利\"></a>盈利</h2><p>哦对了，盈利。你需要搞清楚如何做到它。</p>\n<p>一个简短版本是你需要让人们在你交付产品/服务中成本越高时付更多钱。因为一些原因，大家总是忘了如何把交付成本计算到账本里。</p>\n<p>如果你有一个免费的产品，不要打算购买用户。这对广告支持的企业真的很难。你需要让一些人与他们的朋友分享。</p>\n<p>如果你有一个低于1000美元的客户终身价值（LTV）的付费产品，你通常不要去销售。尝试不同的用户获取方法如 SEO / SEM，广告，邮件，等等，但要在 3 个月偿还你的客户获取成本（CAC）。如果你有一个超过1000美元的 LTV（净给你）付费产品，你也许可以直接销售，如果你的产品好卖。但除非你的 LTV 是 5000 美元或更高，它可能无效。试着通过推销自己的产品学习什么是有效的。销售黑技巧是一本有用的书。</p>\n<p>在任何情况下，试着去做到 “拉面盈利” — 即，赚的钱可以维持创始人吃拉面即可。当你来到这一步，你可以控制自己的命运，不在受到来自投资者和金融市场波动的影响。</p>\n<p>观察你的现金流。虽然这听起来令人难以置信，但我们已经看到很多创始人在没有意识到的情况下，钱花完了(然后 阅读 Paul Graham 的文章).</p>\n<hr>\n<h2 id=\"融资\"><a href=\"#融资\" class=\"headerlink\" title=\"融资\"></a>融资</h2><p>大多数初创公司在某个时候筹集资金。</p>\n<p>你应该在你需要的时候，或是在条件成熟时筹集资金。要小心，不要失去你的节俭或开始扔钱去解决问题。没有足够的钱可能是坏的，但有太多的钱几乎总是坏的。</p>\n<p>成功筹集到资金的秘诀是成为一个好的公司。所有其他的东西的创始人做了尝试优化的过程可能只占到 5% 的重要性。投资者寻找的是不论他们是否投资都会很成功的，但在得到外部资金会成长得更快的公司。“真正成功”这部分是重要的，因为巨大成功才会使得投资者得到回报，如果投资者相信你有 100% 的机会创造一个价值 1000 万美元的公司，但几乎没有机会建立一个更大的公司，他/她仍然可能不会投资，即使在估值非常低的情况下。所以要一直去解释为什么你的公司会是一个巨大的成功。</p>\n<p>投资者在错过下一个谷歌和在回想起来显然是愚蠢的东西上浪费钱的双重担心下所驱动（对于最好的公司，他们两者都担心。）</p>\n<p>如果你的公司不足以吸引资金就去融资，这不是一个好主意。你会抹黑名誉和并浪费时间。</p>\n<p>如果你在努力筹集资金，不要让情绪低落下去。很多优秀的公司都纠结于此，因为最好的公司在开始时看起来很糟糕（而且他们几乎总是看起来过时了。）当投资者告诉你没有，请记住“不”但别记住原因。同时请记住所有的“可以”都意味着“不”—投资人擅长用 “或许可以” 来表达 “不”。</p>\n<p>在融资对话中平等是很重要的 — 你不要去把你最喜欢的投资者列在名单上。让投资者采取行动的方法是担心其他投资者会抢走他们的机会。</p>\n<p>把融资看成是一种必要的邪恶，并尽可能迅速地完成这些事。有些创始人爱上融资，这是不好的。最好是有一个创始人这样做，以便公司不停顿下来。</p>\n<p>记住，大多数风投不了解很多行业。指标总是最有说服力的。</p>\n<p>不幸的是，大多数投资者（Y Combinator 是一个显著的例外）还需要通过你们都认识的人的引荐后才把你当回事，这种模式将开始变化。.</p>\n<p>坚持干净的条款（复杂的条款在每一轮融资后会更糟糕），但不要过度优化，特别是在估值上。估值是一种定量的竞争，所以创始人爱竞争最高估值。但中间估值不重要。</p>\n<p>第一次检查是最难得到的，所以集中精力去获取，这通常意味着你的注意力集中在谁最喜欢的人身上。总是常备多个计划，其中一个就是不融资，并且依据利息灵活的，如果你能把更多的钱更良好地利用，并且在其合理范围内，请保持开放心态去谈论这个。</p>\n<p>擅长 pitching 的一个重要关键是让你的故事尽可能清晰易懂。当然，最重要的关键是要有一个好的公司。有包括在 pitch 上有很多需要注意的，但至少你要有：使命，痛点，产品/服务，商业模式，团队，市场和市场增长率，财务。</p>\n<p>请记住，每一轮的资金的指标会越来越高。如果你只是为你的种子轮做一个引人注目的演示，不要惊讶于你的A轮。</p>\n<p>好的投资者真的做了大量的增值。坏的投资者会有损。大多数投资者陷在中间，既不增加也不减少。一个只投资小数额的投资者通常不会为你做任何事情（例如，请注意排队轮）。</p>\n<p>伟大的董事会成员是除了用户外对公司最佳的外部驱动力，外部驱动力具有大多数创始人想不到的价值。请愿意接受较低的估值，以获得一个伟大的愿意参与董事会成员。</p>\n<p>我认为 这篇由 Paul Graham 写的文章 是最好的关于融资的文章。作为一个战术点，你通常需要成为一个特拉华的 C 类公司，以提高机构的资本，所以最好是组成那样的。</p>\n<hr>\n<h1 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h1><p>请记住每个好想法都至少有一千人拥有。他们其中一个会成功。区别就是执行。这是一个磨练，每个人都希望有其他别的将想法变成功的办法，但是他们至今没找到。所以你需要的就是一个好想法，一个好产品，一个好团队，一个好执行。就是这么简单！; )</p>\n<p>感谢 Paul Buchheit, Erica Carpenter, Brian Chesky, Adam D’Angelo, Paul Graham, Drew Houston, Justin Kan, Matt Krisiloff, Aaron Levie, Gabriel Leydon, Jessica Livingston, Dustin Moskovitz, David Rusenko 和 Colleen Taylor 贡献了主意。</p>\n<p>作者：Sam Altman<br>原文链接：<a href=\"http://playbook.samaltman.com/\">http://playbook.samaltman.com/</a></p>\n<p>这田舍君的一篇博文，觉得还不错，原地址：<a href=\"https://ipro.xin/2016/09/28/%E5%88%9B%E4%B8%9A%E6%89%8B%E5%86%8C/\">创业手册</a></p>\n<hr>\n"},{"title":"工具集","abbrlink":13710,"date":"2016-11-03T14:22:03.000Z","_content":"\n# 备份\n### 备份软件\n  ● Amanda -客户端-服务器模型备份工具\n  ● Bacula – 另一个客户端-服务器模型备份工具\n  ● Backupninja -轻量级，可扩展的元数据备份系统\n  ● Backuppc -客户端-服务器模型备份工具和文件共享方案。\n  ● Burp -网络备份和还原程序\n  ● Duplicity -使用rsync算法加密的带宽-效率备份\n  ● Lsyncd -监控一个本地目录树的变化,然后产生一个进程去同步变化。默认使用rsync。\n  ● Rsnapshot -文件系统快照工具\n  ● SafeKeep -使用rdiff-backup，集中的，基于pull的备份\n  ● TarSnap – 具有一个开源客户端的安全备份服务\n  ● UrBackup -另一个客户端-服务器备份系统\n  ● DREBS – AWS EBS支持策略的备份脚本\n# 克隆\n### 克隆软件\n  ● Clonezilla -分区和磁盘镜像/克隆程序\n  ● Fog – 另一个计算机克隆解决方案\n  ● Redo Backup -简单的备份，恢复和还原\n### 云计算\n  ● AppScale – 兼容Google App引擎的开源云计算软件.\n  ● Archipel -使用Libvirt管理和监视虚拟机\n  ● CloudStack -创建，管理和部署基础云服务的云计算软件\n  ● Cobbler -Cobbler是一个Linux安装服务器，允许快速地构网络安装环境\n  ● Eucalyptus -兼容AWS的开源私有云软件\n  ● Mesos -开发和运行能效高的分布式系统。\n  ● OpenNebula -一个用于系统管理员和研发运维的用户驱动的云管理平台\n  ● OpenStack -构建私有和开放云的开源软件\n  ● The Foreman -Foreman是一个用于物理和虚拟服务器的全生命周期管理工具.FOSS.\n  ● Openstack Juno   云计算平台（类似阿里云，腾讯云这样的管理平台）\n云业务流程\n  ● BOSH -IaaS业务流程平台，最初用于部署和管理云计算平台PaaS,但也用于通用的分布式系统。\n  ● Cloudify -使用Python和YAML编写的开源TOSCA-based云业务流程软件平台。\n  ● Juju -云业务流程工具用于管理服务，比如charms，YAML配置和部署脚本集\n  ● MCollective -来自Puppet实验室的管理服务器业务流程和开发的Ruby框架\n  ● Overcast -在不同的云提供商上部署VMs，并在任何或所有（VM）上通过SSH并行运行命令行和脚本\n  ● Rundeck – 简单的业务流程工具\n  ● Salt -Python编写\n云存储\n  ● git-annex assistant -在你的每一个OSX和Linux电脑，Android设备，可移动驱动，NAS电器和云服务上一个同步文件夹\n  ● ownCloud -提供你的文件的统一访问，通过web，你的电脑和你的移动设备\n  ● Seafile -另一个开源的云存储解决方案\n  ● SparkleShare -提供云存储和文件同步服务。它默认使用Git作为存储后端\n  ● Swift -一个高可用，分布式，最终一致的对象/大数据存储\n  ● Syncthing -一个用于私有，加密和身份认证数据的开源系统\n代码审查\n基于Web的协作式代码审查系统\n  ● Gerrit -基于Git版本控制，它促进软件开发人员审查源代码修改和批准或拒绝这些变更。\n  ● Review Board – 基于MIT License的可用自由软件\n协作软件\n协作软件和群件套件\n  ● Citadel/UX -协同套件（消息和群件）继承于Citadel家族程序\n  ● EGroupware -PHP编写的群件软件\n  ● Horde Groupware -基于PHP的协作软件套件，包括邮件，日历，wiki，时间跟踪和文件管理\n  ● Kolab – 另一个群件套件\n  ● SOGo – 协作软件服务器，专注简单性和可伸缩性\n  ● Zimbra -协作软件套件，包括邮件服务和web客户端\n# 配置管理数据库\n### 配置管理数据库（CMDB）软件\n  ● i-doit – 开源的IT文档管理和CMDB\n  ● iTop -一个完全开源的，ITIL,基于web的服务管理工具\n  ● Ralph -用于大型数据中心或较小本地网络的资产管理，DICM和CMDB系统\n  ● Clusto -帮助跟踪你的库存，在哪，如何连接，同时提供一个和基础架构元素交互的抽象接口\n# 配置管理\n### 配置管理工具\n  ● Ansible -Python编写的，通过SSH管理节点\n  ● Jenkins+Ansible+Gitlab自动化部署三剑客 \n[http://www.showerlee.com/archives/1880][1]\n  ● CFEngine -轻量级代理系统。通过申明语言配置状态。\n  ● Chef -Rbuy和Erlang编写，使用纯RubyDSL\n  ● Fabric – Python库和cli工具，为应用程序部署或系统管理任务简化使用SSH。\n  ● Pallet -通过Clojure DSL进行架构定义，配置和管理\n  ● Puppet – Ruby编写，使用Puppet声明语言或Rbuy DSL\n  ● Salt – Python编写\n  ● Slaughter – Perl编写\n# 持续继承和持续部署\n### 持续集成/部署软件\n  ● Buildbot – 基于Python的持续集成工具\n  ● Drone – 构建在Docker，使用YAML文件配置的的持续集成服务器\n  ● GitLab CI -基于rbuy。他们也提供GitLab用于管理git存储库\n  ● Go – 开源的持续交付服务器\n  ● Jenkins – 一个可扩展的开源持续集成服务器\n  ● Vlad the Deployer -自动化部署\n# 分布式文件系统\n### 网络分布式文件系统\n  ● Ceph -分布式对象存储和文件系统\n  ● DRBD -分布式块设备复制\n  ● LeoFS -非结构化对象/数据存储和高可用性,分布,最终一致的存储系统。\n  ● GlusterFS – 可扩展，网络附加存储文件系统。\n  ● HDFS – Java编写的，用于Hadoop框架的分布式、可伸缩、可移植文件系统\n  ● Lustre -一种并行分布式文件系统,一般用于大规模集群计算。\n  ● MooseFS – 容错、网络分布式文件系统。\n  ● MogileFS -应用程序级别、网络分布式文件系统。\n  ● OpenAFS -只读副本和多操作系统支持的分布式网络文件系统\n  ● TahoeLAFS -安全、分散、容错、点对点分布式数据存储和分布式文件系统。\n  ● XtreemFS -XtreemFS是一个用于存储需求的容错式分布式文件系统。\n# DNS\n### DNS服务器\n  ● Bind -最广泛使用的域名服务软件\n  ● djbdns -DNS应用集合，包括tinydns\n  ● Designate – DNS REST API,支持多种DNS服务器的后端\n  ● dnsmasq -为小规模网络提供DNS,DHCP和TFTP服务的轻量级服务\n  ● Knot – 高性能，权威的DNS服务器\n  ● NSD – 权威的、高性能的、简单的域名服务器。\n  ● PowerDNS -具有各种数据存储后端和负载平衡功能的DNS服务器。\n  ● Unbound – 验证、递归和缓存DNS解析器。\n  ● Yadifa – 具有DNSSEC兼容的轻量级的权威域名服务器，支持.eu的顶级域名。\n# 主机控制面板\n### Web主机控制面板\n  ● Ajenti -Linux和BSD控制面板\n  ● Feathur – VPS供应和管理软件\n  ● ISPConfig -Linux主机控制面板\n  ● VestaCP -用于Linux和Nginx的主机面板\n  ● Virtualmin -基于webmin的Linux控制面板\n  ● ZPanel -Linux BSD和Windows控制面板\n# IMAP/POP3\n### IMAP/POP3邮件服务器\n  ● Courier IMAP/POP3 -快速，可伸缩，企业级IMAP和POP3服务器\n  ● Cyrus IMAP/POP3 -运行在密封服务器上,普通用户不允许登录。\n  ● Dovecot -主要考虑安全而编写的IMAP和POP3服务器\n  ● Qpopper – 一个古老且流行的POP3服务器实现\n# IT资产管理\n### IT资产管理软件\n  ● GLPI -带有额外管理接口的信息资源管理器\n  ● OCS Inventory NG -允许用户清算IT资产\n  ● RackTables -数据中心和服务器房间资产，比如将硬件资产,网络地址,在货架空间,网络配置文档化。\n  ● Ralph – 针对大型数据中心系统以及小型局域网网络的资产管理、DCIM和CMDB。\n  ● Snipe IT -资产和许可证管理软件\n# LDAP\n### LDAP服务器\n  ● 389 Directory Server – 通过Red Hat部署\n  ● Apache Directory Server -用Java编写的Apache软件基金会项目\n  ● Fusion Directory -基于OpenLDAP改善服务和公司目录的管理\n  ● OpenDJ – OpenDS分支\n  ● OpenDS -另一个用Java编写的目录服务器\n  ● OpenLDAP -由OpenLDAP项目开发\n# 日志管理\n### 日志管理工具：收集，解析，可视化\n  ● Elasticsearch – 一个基于Lucene的文档存储，主要用于日志索引、存储和分析。\n  ● Fluentd – 日志收集和发出\n  ● Flume -分布式日志收集和聚合系统\n  ● Graylog2 -具有报警选项的可插入日志和事件分析服务器\n  ● Heka -流处理系统，可用于日志聚合\n  ● Kibana – 可视化日志和时间戳数据\n  ● Logstash -管理事件和日志的工具\n  ● Octopussy -日志管理解决方案（可视化/报警/报告）\n# 监控\n### 监控软件\n  ● Cacti -基于Web的网络监控和图形工具\n  ● Cabot – 监控和报警，类似PagerDuty\n  ● check_mk -Nagios的扩展集合\n  ● Dash -一个用于GNU/Linux机器的低开销web仪表板监控。\n  ● Icinga – Nagios分支\n  ● LibreNMS – Observium分支\n  ● Monit – 管理和监控Unix系统的小型开源工具\n  ● Munin -网络资源监控工具\n  ● Naemon -基于Nagios4内核的网络监控工具，具有性能加强和新功能\n  ● Nagios -计算机系统，网络和基础架构监控软件\n  ● Observium -服务器和网络设备的SNMP监控，运行在linux\n  ● OMD -开放的监控分布\n  ● Opsview -基于Nagios4，Opsview核心，用于小型IT和测试环境\n  ● Riemann -灵活和快速的事件处理器，允许负责时间和度量分析\n  ● Sensu -开源的监控框架\n  ● Sentry – 应用监控，事件记录和聚合\n  ● Shinken – 另一个监控框架\n  ● Thruk – 多后台监控的web接口，支持Naemon，Nagios，Icinga和Shinken\n  ● Xymon -灵感来自Big Brother的网络监控\n  ● Zabbix – Enterprise-class software for monitoring of networks and applications.\n  ● Zabbix – 监控网络和应用的企业级软件\n  ● Zenoss -基于Zope的应用，服务器和网络管理平台\n# 度量和度量收集\n### 度量收集和显示软件\n  ● Collectd -系统统计收集守护进程\n  ● Collectl -高精度系统性能指标收集工具。\n  ● Dashing -Ruby gem,允许快速统计仪表板的开发。基于HTML5，允许在数据中心或会议室进行大屏幕显示。\n  ● Diamond -基于Python的统计收集守护进程\n  ● Ganglia – 基于RRD用于网格和/或集群的服务器的高性能、可伸缩监控设备。兼容Graphite，使用一个单一的收集进程。\n  ● Grafana -一个Graphite或InfluxDB仪表盘和图形编辑器\n  ● 开源的可伸缩绘图服务器\n  ● InfluxDB -开源的分布式时间序列数据库，没有外部依赖。\n  ● KairosDB -快速分布式可扩展的时间序列数据库,OpenTSDB 1. x的分支。\n  ● OpenTSDB -存储和服务大量的时间序列数据，不丢失粒度。\n  ● RRDtool – 开源企业标准，用于时间序列数据的高性能数据记录和绘图系统\n  ● Statsd -应用统计监听\n# 网络配置管理\n### 网络配置管理工具\n  ● GestióIP -一个自动的基于web的IPV4/IPV6地址管理工具\n  ● RANCID -监控网络设备配置和维护历史变更\n  ● rConfig -另一个网络配置管理工具\n# 时事通讯\n### 时事通讯软件\n  ● DadaMail -Perl编写的邮件列表管理器\n  ● phpList -PHP编写的时事通讯管理器\n# NOSQL\n### NOSQL数据库\n#### ● 列族\n  ○ Apache HBase – Hadoop数据库，一个分布式的大数据存储\n  ○ Cassandra -分布式数据库管理系统，设计用于处理大量数据跨多个服务器。\n  ○ Hypertable -基于c++的bigtable DBMS,节省通信，可独立或在Hadoop类似的分布式FS上运行。\n####  ● 文档存储\n  ○ CouchDB -易于使用,多主机复制的面向文档的数据库系统。\n  ○ ElasticSearch – 基于Java的数据库,受欢迎的日志聚合,和电子邮件归档项目。\n  ○ MongoDB – 另一个面向文档的数据库系统\n  ○ RavenDB – 具有ACID/事物功能的基于文档的数据库\n  ○ RethinkDB -开源分布式文档存储数据库，关注JSON\n#### ● 图\n  ○ FlockDB -Twitter分布式，容错图数据库\n  ○ Neo4j – 开源图数据库\n#### ● 键值\n  ○ LevelDB -Google高性能键值数据库\n  ○ Redis – 支持网络，基于内存，键值，亦可持久化数据库\n  ○ Riak -另一个容错的键值NoSQL数据库\nNoSQL服务器比较: [https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis][2]\n### 打包\n  ● fpm – 万能的多格式包创建器\n  ● omnibus-ruby – 全栈，跨发行版的包管理软件（Ruby）\n  ● packman -全栈，跨发行版的包管理软件（Python）\n  ● tito – 为git项目构建RPM\n### 队列\n  ● BeanstalkD – A simple, fast work queue.\n  ● BeanstalkD – 一个简单快速的工作队列\n  ● Gearman -快速的多语言队列或任务处理平台\n  ● NSQ – 实时分发的消息平台\n  ● RabbitMQ -健壮的，全功能，跨发行版的队列系统\n  ● ZeroMQ -轻量级队列系统\n# RDBMS\n### 关系数据库管理系统\n  ● Firebird – 真正的全球开源数据库\n  ● Galera -Galera MySQL集群是一个易于使用的高可用性解决方案，具有很高的系统正常运行时间,没有数据丢失,为未来的增长提供可伸缩性。\n  ● MariaDB -MySQL的社区开发分支\n  ● MySQL – 非常流行的RDBMS服务器\n  ● Percona Server -增强的，可替换MySQL\n  ● PostgreSQL – 对象关系数据库管理系统（ORDBMS)\n  ● PostgreSQL-XL – 基于PostgreSQL的可伸缩开源数据库集群\n  ● SQLite -自包容，弱服务器，零配置，支持事务的SQL DBS实现库\n# 安全\n### 安全工具\n  ● Denyhosts -阻止SSH字典攻击和暴力攻击\n  ● Fail2Ban – 扫描日志文件，并对具有恶意行为显示的IP采取措施\n  ● SpamAssassin -一个强大的和受欢迎的垃圾邮件过滤器，它采用多种检测技术。\n服务发现\n  ● Consul – Consule是伊戈尔服务发现，监控和配置的工具\n  ● Doozerd – Doozer是一个高可用，完全一致的存储，用于少量非常重要的数据\n  ● ZooKeeper – ZooKeeper是一个集中的服务，用于维护配置信息，命名，提供分布式同步和组服务\n# SMTP\n### SMTP服务器\n  ● Exim -由剑桥大学开发的消息传输代理（MTA)\n  ● Haraka – 用JavaScirpt编写的高性能，可插入的SMTP服务器\n  ● MailCatcher -Ruby gem部署一个简单的SMTP MTA网关，接收所有邮件并在web接口显示。对调试和开发有用。\n  ● Maildrop -开源的一次性邮件服务器，对开发也很有用\n  ● OpenSMTPD -从OpenBSD项目实现的安全的SMTP服务器\n  ● Postfix – 快速，易于管理和安全的Sendmail替代品\n  ● Qmail – 安全的Sendmail替代品\n  ● Sendmail -消息传输代理（MTA)\n# 软件容器\n### 操作系统级别的虚拟化\n  ● Bitnami -为web应用，开发栈和虚拟设备生产开源软件安装器或软件包\n  ● Docker – 给开发者和系统管理员构建，发布和运行分布式应用程序的开放平台\n  ● OpenVZ -Linux平台基于容器的虚拟化\n# SSH\n### SSH工具\n  ● autossh -网络中断后自动复位ssh会话。\n  ● Cluster SSH -通过一个图形化控制台控制多个xterm窗口。\n  ● DSH -Dancer的shell/分布式shell-从一个命令行包装执行多个远程shell命令。\n  ● Mosh – 移动shell\n  ● parallel-ssh -提供并行的OpenSSH版本和相关工具\n  ● SSH Power Tool -不使用pre-shared钥匙的情况下对多个服务器同时执行命令和上传文件\n# 统计\n### 分析软件\n  ● Analog – 世界上最流行的日志分析工具\n  ● GoAccess -在终端运行的开源的实时web日志分析和交互视图\n  ● Piwik -免费和开源的web分析应用\n  ● Webalizer – F快速免费的web服务器日志文件分析程序\n# 工单系统\n### 基于web的工单系统\n  ● Bugzilla -由Mozilla项目开发和使用过的通用缺陷跟踪和测试工具\n  ● Cerb – 基于商业开源许可的基于组的邮件管理项目\n  ● Flyspray – 使用PHP编写的缺陷跟踪系统\n  ● MantisBT -另一个基于web的缺陷跟踪系统\n  ● osTicket -开源的技术支持工单系统\n  ● Otrs -免费和开源故障通知单系统软件包,公司,组织,或其他实体可以使用它来基于询问分配工单并跟踪进一步的沟通。\n  ● Request Tracker -使用Perl编写的工单跟踪系统\n  ● TheBugGenie -开源的工单系统，具有非常完备的用户权限分配\n# 故障排除\n### 故障排除工具\n  ● mitmproxy -ython工具，用于拦截,查看和修改网络流量。在排除某些问题是非常重要的。\n  ● Sysdig -从一个运行的linux实例上捕获系统状态和活动，之后保存，过滤和分析\n  ● Wireshark -世界上著名的网络协议分析工具\n# 项目管理\n### 基于web的项目管理和缺陷跟踪系统\n  ● ChiliProject – Redmine分支\n  ● GitBucket 用Scala编写的GitHub的克隆，单独jar安装\n  ● GitLab -用Rbuy编写的GitHub的克隆\n  ● Gogs -用Go编写\n  ● OpenProject -开源的项目协作项目\n  ● Phabricator PHP编写\n  ● Redmine – 基于rails在rbuy编写\n  ● The Bug Genie -PHP编写\n  ● Trac -python编写\n  ● 阿里云持续交付https://crp.aliyun.com/#page6\nredmine项目管理系统\nhttps://bitnami.com/stack/redmine/installer\n\n\n# 版本控制\n### 软件版本和版本控制\n  ● Fossil -分布式版本控制，内建wiki和缺陷跟踪\n  ● Git -速度很快的分布式版本控制和源代码管理\n  ● GNU Bazaar -由Cannoicalzi赞助的分布式版本控制系统\n  ● Mercurial -另一个版本控制\n  ● Subversion -客户端-服务器版本控制系统\n  ● Coding\n  ● 码云\n  ● 阿里云 code.aliyun.com\n# 虚拟化\n### 虚拟化软件\n  ● Ganeti -在KVM和Xen上构建的集群虚拟服务器管理软件\n  ● KVM -Linux内核虚拟化架构\n  ● oVirt -管理虚拟机，存储和虚拟网络\n  ● Packer – 从单个源配置为多个平台创建相同的机器镜像\n  ● Vagrant – 创建完整开发环境的工具\n  ● VirtualBox -来自Oracle公司的虚拟化产品\n  ● Xen -用于32/64位Intel/AMD(IA 64）和PowerPC 970架构的虚拟机监控器\n  ● Docker\n  ● cockpit  (图形化管理Docker容器)\n# VPN\n### VPN软件\n  ● OpenVPN -使用一个定制的安全密钥交换协议,利用SSL / TLS。\n  ● Pritunl -基于OpenVPN的方案，易于设置\n  ● SoftEther – 具有高级特性的多协议VPN软件\n  ● sshuttle -穷人的VPN\n  ● strongSwan – Linux下完整的IPsec实现\n  ● tinc -分布式点对点VPN\n\n# 物联网\n● contiki   一开源物联网系统，支持tcp,vnc等协议\n● yeelink   物联网在线平台\n\n\n# 15款顶级开源人工智能工具推荐\nhttps://www.oschina.net/news/77729/15top-opensource-artificial-intelligence-tools?from=20161009\n\n\n\n[1]:\thttp://www.showerlee.com/archives/1880\n[2]:\thttps://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis\n\n---","source":"_posts/杂项/2016-11-03-工具集.md","raw":"---\ntitle: 工具集\ncategories:\n  - 杂项\ntags:\n  - 工具集\nabbrlink: 13710\ndate: 2016-11-03 22:22:03\n---\n\n# 备份\n### 备份软件\n  ● Amanda -客户端-服务器模型备份工具\n  ● Bacula – 另一个客户端-服务器模型备份工具\n  ● Backupninja -轻量级，可扩展的元数据备份系统\n  ● Backuppc -客户端-服务器模型备份工具和文件共享方案。\n  ● Burp -网络备份和还原程序\n  ● Duplicity -使用rsync算法加密的带宽-效率备份\n  ● Lsyncd -监控一个本地目录树的变化,然后产生一个进程去同步变化。默认使用rsync。\n  ● Rsnapshot -文件系统快照工具\n  ● SafeKeep -使用rdiff-backup，集中的，基于pull的备份\n  ● TarSnap – 具有一个开源客户端的安全备份服务\n  ● UrBackup -另一个客户端-服务器备份系统\n  ● DREBS – AWS EBS支持策略的备份脚本\n# 克隆\n### 克隆软件\n  ● Clonezilla -分区和磁盘镜像/克隆程序\n  ● Fog – 另一个计算机克隆解决方案\n  ● Redo Backup -简单的备份，恢复和还原\n### 云计算\n  ● AppScale – 兼容Google App引擎的开源云计算软件.\n  ● Archipel -使用Libvirt管理和监视虚拟机\n  ● CloudStack -创建，管理和部署基础云服务的云计算软件\n  ● Cobbler -Cobbler是一个Linux安装服务器，允许快速地构网络安装环境\n  ● Eucalyptus -兼容AWS的开源私有云软件\n  ● Mesos -开发和运行能效高的分布式系统。\n  ● OpenNebula -一个用于系统管理员和研发运维的用户驱动的云管理平台\n  ● OpenStack -构建私有和开放云的开源软件\n  ● The Foreman -Foreman是一个用于物理和虚拟服务器的全生命周期管理工具.FOSS.\n  ● Openstack Juno   云计算平台（类似阿里云，腾讯云这样的管理平台）\n云业务流程\n  ● BOSH -IaaS业务流程平台，最初用于部署和管理云计算平台PaaS,但也用于通用的分布式系统。\n  ● Cloudify -使用Python和YAML编写的开源TOSCA-based云业务流程软件平台。\n  ● Juju -云业务流程工具用于管理服务，比如charms，YAML配置和部署脚本集\n  ● MCollective -来自Puppet实验室的管理服务器业务流程和开发的Ruby框架\n  ● Overcast -在不同的云提供商上部署VMs，并在任何或所有（VM）上通过SSH并行运行命令行和脚本\n  ● Rundeck – 简单的业务流程工具\n  ● Salt -Python编写\n云存储\n  ● git-annex assistant -在你的每一个OSX和Linux电脑，Android设备，可移动驱动，NAS电器和云服务上一个同步文件夹\n  ● ownCloud -提供你的文件的统一访问，通过web，你的电脑和你的移动设备\n  ● Seafile -另一个开源的云存储解决方案\n  ● SparkleShare -提供云存储和文件同步服务。它默认使用Git作为存储后端\n  ● Swift -一个高可用，分布式，最终一致的对象/大数据存储\n  ● Syncthing -一个用于私有，加密和身份认证数据的开源系统\n代码审查\n基于Web的协作式代码审查系统\n  ● Gerrit -基于Git版本控制，它促进软件开发人员审查源代码修改和批准或拒绝这些变更。\n  ● Review Board – 基于MIT License的可用自由软件\n协作软件\n协作软件和群件套件\n  ● Citadel/UX -协同套件（消息和群件）继承于Citadel家族程序\n  ● EGroupware -PHP编写的群件软件\n  ● Horde Groupware -基于PHP的协作软件套件，包括邮件，日历，wiki，时间跟踪和文件管理\n  ● Kolab – 另一个群件套件\n  ● SOGo – 协作软件服务器，专注简单性和可伸缩性\n  ● Zimbra -协作软件套件，包括邮件服务和web客户端\n# 配置管理数据库\n### 配置管理数据库（CMDB）软件\n  ● i-doit – 开源的IT文档管理和CMDB\n  ● iTop -一个完全开源的，ITIL,基于web的服务管理工具\n  ● Ralph -用于大型数据中心或较小本地网络的资产管理，DICM和CMDB系统\n  ● Clusto -帮助跟踪你的库存，在哪，如何连接，同时提供一个和基础架构元素交互的抽象接口\n# 配置管理\n### 配置管理工具\n  ● Ansible -Python编写的，通过SSH管理节点\n  ● Jenkins+Ansible+Gitlab自动化部署三剑客 \n[http://www.showerlee.com/archives/1880][1]\n  ● CFEngine -轻量级代理系统。通过申明语言配置状态。\n  ● Chef -Rbuy和Erlang编写，使用纯RubyDSL\n  ● Fabric – Python库和cli工具，为应用程序部署或系统管理任务简化使用SSH。\n  ● Pallet -通过Clojure DSL进行架构定义，配置和管理\n  ● Puppet – Ruby编写，使用Puppet声明语言或Rbuy DSL\n  ● Salt – Python编写\n  ● Slaughter – Perl编写\n# 持续继承和持续部署\n### 持续集成/部署软件\n  ● Buildbot – 基于Python的持续集成工具\n  ● Drone – 构建在Docker，使用YAML文件配置的的持续集成服务器\n  ● GitLab CI -基于rbuy。他们也提供GitLab用于管理git存储库\n  ● Go – 开源的持续交付服务器\n  ● Jenkins – 一个可扩展的开源持续集成服务器\n  ● Vlad the Deployer -自动化部署\n# 分布式文件系统\n### 网络分布式文件系统\n  ● Ceph -分布式对象存储和文件系统\n  ● DRBD -分布式块设备复制\n  ● LeoFS -非结构化对象/数据存储和高可用性,分布,最终一致的存储系统。\n  ● GlusterFS – 可扩展，网络附加存储文件系统。\n  ● HDFS – Java编写的，用于Hadoop框架的分布式、可伸缩、可移植文件系统\n  ● Lustre -一种并行分布式文件系统,一般用于大规模集群计算。\n  ● MooseFS – 容错、网络分布式文件系统。\n  ● MogileFS -应用程序级别、网络分布式文件系统。\n  ● OpenAFS -只读副本和多操作系统支持的分布式网络文件系统\n  ● TahoeLAFS -安全、分散、容错、点对点分布式数据存储和分布式文件系统。\n  ● XtreemFS -XtreemFS是一个用于存储需求的容错式分布式文件系统。\n# DNS\n### DNS服务器\n  ● Bind -最广泛使用的域名服务软件\n  ● djbdns -DNS应用集合，包括tinydns\n  ● Designate – DNS REST API,支持多种DNS服务器的后端\n  ● dnsmasq -为小规模网络提供DNS,DHCP和TFTP服务的轻量级服务\n  ● Knot – 高性能，权威的DNS服务器\n  ● NSD – 权威的、高性能的、简单的域名服务器。\n  ● PowerDNS -具有各种数据存储后端和负载平衡功能的DNS服务器。\n  ● Unbound – 验证、递归和缓存DNS解析器。\n  ● Yadifa – 具有DNSSEC兼容的轻量级的权威域名服务器，支持.eu的顶级域名。\n# 主机控制面板\n### Web主机控制面板\n  ● Ajenti -Linux和BSD控制面板\n  ● Feathur – VPS供应和管理软件\n  ● ISPConfig -Linux主机控制面板\n  ● VestaCP -用于Linux和Nginx的主机面板\n  ● Virtualmin -基于webmin的Linux控制面板\n  ● ZPanel -Linux BSD和Windows控制面板\n# IMAP/POP3\n### IMAP/POP3邮件服务器\n  ● Courier IMAP/POP3 -快速，可伸缩，企业级IMAP和POP3服务器\n  ● Cyrus IMAP/POP3 -运行在密封服务器上,普通用户不允许登录。\n  ● Dovecot -主要考虑安全而编写的IMAP和POP3服务器\n  ● Qpopper – 一个古老且流行的POP3服务器实现\n# IT资产管理\n### IT资产管理软件\n  ● GLPI -带有额外管理接口的信息资源管理器\n  ● OCS Inventory NG -允许用户清算IT资产\n  ● RackTables -数据中心和服务器房间资产，比如将硬件资产,网络地址,在货架空间,网络配置文档化。\n  ● Ralph – 针对大型数据中心系统以及小型局域网网络的资产管理、DCIM和CMDB。\n  ● Snipe IT -资产和许可证管理软件\n# LDAP\n### LDAP服务器\n  ● 389 Directory Server – 通过Red Hat部署\n  ● Apache Directory Server -用Java编写的Apache软件基金会项目\n  ● Fusion Directory -基于OpenLDAP改善服务和公司目录的管理\n  ● OpenDJ – OpenDS分支\n  ● OpenDS -另一个用Java编写的目录服务器\n  ● OpenLDAP -由OpenLDAP项目开发\n# 日志管理\n### 日志管理工具：收集，解析，可视化\n  ● Elasticsearch – 一个基于Lucene的文档存储，主要用于日志索引、存储和分析。\n  ● Fluentd – 日志收集和发出\n  ● Flume -分布式日志收集和聚合系统\n  ● Graylog2 -具有报警选项的可插入日志和事件分析服务器\n  ● Heka -流处理系统，可用于日志聚合\n  ● Kibana – 可视化日志和时间戳数据\n  ● Logstash -管理事件和日志的工具\n  ● Octopussy -日志管理解决方案（可视化/报警/报告）\n# 监控\n### 监控软件\n  ● Cacti -基于Web的网络监控和图形工具\n  ● Cabot – 监控和报警，类似PagerDuty\n  ● check_mk -Nagios的扩展集合\n  ● Dash -一个用于GNU/Linux机器的低开销web仪表板监控。\n  ● Icinga – Nagios分支\n  ● LibreNMS – Observium分支\n  ● Monit – 管理和监控Unix系统的小型开源工具\n  ● Munin -网络资源监控工具\n  ● Naemon -基于Nagios4内核的网络监控工具，具有性能加强和新功能\n  ● Nagios -计算机系统，网络和基础架构监控软件\n  ● Observium -服务器和网络设备的SNMP监控，运行在linux\n  ● OMD -开放的监控分布\n  ● Opsview -基于Nagios4，Opsview核心，用于小型IT和测试环境\n  ● Riemann -灵活和快速的事件处理器，允许负责时间和度量分析\n  ● Sensu -开源的监控框架\n  ● Sentry – 应用监控，事件记录和聚合\n  ● Shinken – 另一个监控框架\n  ● Thruk – 多后台监控的web接口，支持Naemon，Nagios，Icinga和Shinken\n  ● Xymon -灵感来自Big Brother的网络监控\n  ● Zabbix – Enterprise-class software for monitoring of networks and applications.\n  ● Zabbix – 监控网络和应用的企业级软件\n  ● Zenoss -基于Zope的应用，服务器和网络管理平台\n# 度量和度量收集\n### 度量收集和显示软件\n  ● Collectd -系统统计收集守护进程\n  ● Collectl -高精度系统性能指标收集工具。\n  ● Dashing -Ruby gem,允许快速统计仪表板的开发。基于HTML5，允许在数据中心或会议室进行大屏幕显示。\n  ● Diamond -基于Python的统计收集守护进程\n  ● Ganglia – 基于RRD用于网格和/或集群的服务器的高性能、可伸缩监控设备。兼容Graphite，使用一个单一的收集进程。\n  ● Grafana -一个Graphite或InfluxDB仪表盘和图形编辑器\n  ● 开源的可伸缩绘图服务器\n  ● InfluxDB -开源的分布式时间序列数据库，没有外部依赖。\n  ● KairosDB -快速分布式可扩展的时间序列数据库,OpenTSDB 1. x的分支。\n  ● OpenTSDB -存储和服务大量的时间序列数据，不丢失粒度。\n  ● RRDtool – 开源企业标准，用于时间序列数据的高性能数据记录和绘图系统\n  ● Statsd -应用统计监听\n# 网络配置管理\n### 网络配置管理工具\n  ● GestióIP -一个自动的基于web的IPV4/IPV6地址管理工具\n  ● RANCID -监控网络设备配置和维护历史变更\n  ● rConfig -另一个网络配置管理工具\n# 时事通讯\n### 时事通讯软件\n  ● DadaMail -Perl编写的邮件列表管理器\n  ● phpList -PHP编写的时事通讯管理器\n# NOSQL\n### NOSQL数据库\n#### ● 列族\n  ○ Apache HBase – Hadoop数据库，一个分布式的大数据存储\n  ○ Cassandra -分布式数据库管理系统，设计用于处理大量数据跨多个服务器。\n  ○ Hypertable -基于c++的bigtable DBMS,节省通信，可独立或在Hadoop类似的分布式FS上运行。\n####  ● 文档存储\n  ○ CouchDB -易于使用,多主机复制的面向文档的数据库系统。\n  ○ ElasticSearch – 基于Java的数据库,受欢迎的日志聚合,和电子邮件归档项目。\n  ○ MongoDB – 另一个面向文档的数据库系统\n  ○ RavenDB – 具有ACID/事物功能的基于文档的数据库\n  ○ RethinkDB -开源分布式文档存储数据库，关注JSON\n#### ● 图\n  ○ FlockDB -Twitter分布式，容错图数据库\n  ○ Neo4j – 开源图数据库\n#### ● 键值\n  ○ LevelDB -Google高性能键值数据库\n  ○ Redis – 支持网络，基于内存，键值，亦可持久化数据库\n  ○ Riak -另一个容错的键值NoSQL数据库\nNoSQL服务器比较: [https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis][2]\n### 打包\n  ● fpm – 万能的多格式包创建器\n  ● omnibus-ruby – 全栈，跨发行版的包管理软件（Ruby）\n  ● packman -全栈，跨发行版的包管理软件（Python）\n  ● tito – 为git项目构建RPM\n### 队列\n  ● BeanstalkD – A simple, fast work queue.\n  ● BeanstalkD – 一个简单快速的工作队列\n  ● Gearman -快速的多语言队列或任务处理平台\n  ● NSQ – 实时分发的消息平台\n  ● RabbitMQ -健壮的，全功能，跨发行版的队列系统\n  ● ZeroMQ -轻量级队列系统\n# RDBMS\n### 关系数据库管理系统\n  ● Firebird – 真正的全球开源数据库\n  ● Galera -Galera MySQL集群是一个易于使用的高可用性解决方案，具有很高的系统正常运行时间,没有数据丢失,为未来的增长提供可伸缩性。\n  ● MariaDB -MySQL的社区开发分支\n  ● MySQL – 非常流行的RDBMS服务器\n  ● Percona Server -增强的，可替换MySQL\n  ● PostgreSQL – 对象关系数据库管理系统（ORDBMS)\n  ● PostgreSQL-XL – 基于PostgreSQL的可伸缩开源数据库集群\n  ● SQLite -自包容，弱服务器，零配置，支持事务的SQL DBS实现库\n# 安全\n### 安全工具\n  ● Denyhosts -阻止SSH字典攻击和暴力攻击\n  ● Fail2Ban – 扫描日志文件，并对具有恶意行为显示的IP采取措施\n  ● SpamAssassin -一个强大的和受欢迎的垃圾邮件过滤器，它采用多种检测技术。\n服务发现\n  ● Consul – Consule是伊戈尔服务发现，监控和配置的工具\n  ● Doozerd – Doozer是一个高可用，完全一致的存储，用于少量非常重要的数据\n  ● ZooKeeper – ZooKeeper是一个集中的服务，用于维护配置信息，命名，提供分布式同步和组服务\n# SMTP\n### SMTP服务器\n  ● Exim -由剑桥大学开发的消息传输代理（MTA)\n  ● Haraka – 用JavaScirpt编写的高性能，可插入的SMTP服务器\n  ● MailCatcher -Ruby gem部署一个简单的SMTP MTA网关，接收所有邮件并在web接口显示。对调试和开发有用。\n  ● Maildrop -开源的一次性邮件服务器，对开发也很有用\n  ● OpenSMTPD -从OpenBSD项目实现的安全的SMTP服务器\n  ● Postfix – 快速，易于管理和安全的Sendmail替代品\n  ● Qmail – 安全的Sendmail替代品\n  ● Sendmail -消息传输代理（MTA)\n# 软件容器\n### 操作系统级别的虚拟化\n  ● Bitnami -为web应用，开发栈和虚拟设备生产开源软件安装器或软件包\n  ● Docker – 给开发者和系统管理员构建，发布和运行分布式应用程序的开放平台\n  ● OpenVZ -Linux平台基于容器的虚拟化\n# SSH\n### SSH工具\n  ● autossh -网络中断后自动复位ssh会话。\n  ● Cluster SSH -通过一个图形化控制台控制多个xterm窗口。\n  ● DSH -Dancer的shell/分布式shell-从一个命令行包装执行多个远程shell命令。\n  ● Mosh – 移动shell\n  ● parallel-ssh -提供并行的OpenSSH版本和相关工具\n  ● SSH Power Tool -不使用pre-shared钥匙的情况下对多个服务器同时执行命令和上传文件\n# 统计\n### 分析软件\n  ● Analog – 世界上最流行的日志分析工具\n  ● GoAccess -在终端运行的开源的实时web日志分析和交互视图\n  ● Piwik -免费和开源的web分析应用\n  ● Webalizer – F快速免费的web服务器日志文件分析程序\n# 工单系统\n### 基于web的工单系统\n  ● Bugzilla -由Mozilla项目开发和使用过的通用缺陷跟踪和测试工具\n  ● Cerb – 基于商业开源许可的基于组的邮件管理项目\n  ● Flyspray – 使用PHP编写的缺陷跟踪系统\n  ● MantisBT -另一个基于web的缺陷跟踪系统\n  ● osTicket -开源的技术支持工单系统\n  ● Otrs -免费和开源故障通知单系统软件包,公司,组织,或其他实体可以使用它来基于询问分配工单并跟踪进一步的沟通。\n  ● Request Tracker -使用Perl编写的工单跟踪系统\n  ● TheBugGenie -开源的工单系统，具有非常完备的用户权限分配\n# 故障排除\n### 故障排除工具\n  ● mitmproxy -ython工具，用于拦截,查看和修改网络流量。在排除某些问题是非常重要的。\n  ● Sysdig -从一个运行的linux实例上捕获系统状态和活动，之后保存，过滤和分析\n  ● Wireshark -世界上著名的网络协议分析工具\n# 项目管理\n### 基于web的项目管理和缺陷跟踪系统\n  ● ChiliProject – Redmine分支\n  ● GitBucket 用Scala编写的GitHub的克隆，单独jar安装\n  ● GitLab -用Rbuy编写的GitHub的克隆\n  ● Gogs -用Go编写\n  ● OpenProject -开源的项目协作项目\n  ● Phabricator PHP编写\n  ● Redmine – 基于rails在rbuy编写\n  ● The Bug Genie -PHP编写\n  ● Trac -python编写\n  ● 阿里云持续交付https://crp.aliyun.com/#page6\nredmine项目管理系统\nhttps://bitnami.com/stack/redmine/installer\n\n\n# 版本控制\n### 软件版本和版本控制\n  ● Fossil -分布式版本控制，内建wiki和缺陷跟踪\n  ● Git -速度很快的分布式版本控制和源代码管理\n  ● GNU Bazaar -由Cannoicalzi赞助的分布式版本控制系统\n  ● Mercurial -另一个版本控制\n  ● Subversion -客户端-服务器版本控制系统\n  ● Coding\n  ● 码云\n  ● 阿里云 code.aliyun.com\n# 虚拟化\n### 虚拟化软件\n  ● Ganeti -在KVM和Xen上构建的集群虚拟服务器管理软件\n  ● KVM -Linux内核虚拟化架构\n  ● oVirt -管理虚拟机，存储和虚拟网络\n  ● Packer – 从单个源配置为多个平台创建相同的机器镜像\n  ● Vagrant – 创建完整开发环境的工具\n  ● VirtualBox -来自Oracle公司的虚拟化产品\n  ● Xen -用于32/64位Intel/AMD(IA 64）和PowerPC 970架构的虚拟机监控器\n  ● Docker\n  ● cockpit  (图形化管理Docker容器)\n# VPN\n### VPN软件\n  ● OpenVPN -使用一个定制的安全密钥交换协议,利用SSL / TLS。\n  ● Pritunl -基于OpenVPN的方案，易于设置\n  ● SoftEther – 具有高级特性的多协议VPN软件\n  ● sshuttle -穷人的VPN\n  ● strongSwan – Linux下完整的IPsec实现\n  ● tinc -分布式点对点VPN\n\n# 物联网\n● contiki   一开源物联网系统，支持tcp,vnc等协议\n● yeelink   物联网在线平台\n\n\n# 15款顶级开源人工智能工具推荐\nhttps://www.oschina.net/news/77729/15top-opensource-artificial-intelligence-tools?from=20161009\n\n\n\n[1]:\thttp://www.showerlee.com/archives/1880\n[2]:\thttps://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis\n\n---","slug":"杂项-2016-11-03-工具集","published":1,"updated":"2016-11-21T02:17:08.960Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjme001pd8pkmt8xyz6u","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"备份\"><a href=\"#备份\" class=\"headerlink\" title=\"备份\"></a>备份</h1><h3 id=\"备份软件\"><a href=\"#备份软件\" class=\"headerlink\" title=\"备份软件\"></a>备份软件</h3><p>  ● Amanda -客户端-服务器模型备份工具<br>  ● Bacula – 另一个客户端-服务器模型备份工具<br>  ● Backupninja -轻量级，可扩展的元数据备份系统<br>  ● Backuppc -客户端-服务器模型备份工具和文件共享方案。<br>  ● Burp -网络备份和还原程序<br>  ● Duplicity -使用rsync算法加密的带宽-效率备份<br>  ● Lsyncd -监控一个本地目录树的变化,然后产生一个进程去同步变化。默认使用rsync。<br>  ● Rsnapshot -文件系统快照工具<br>  ● SafeKeep -使用rdiff-backup，集中的，基于pull的备份<br>  ● TarSnap – 具有一个开源客户端的安全备份服务<br>  ● UrBackup -另一个客户端-服务器备份系统<br>  ● DREBS – AWS EBS支持策略的备份脚本</p>\n<h1 id=\"克隆\"><a href=\"#克隆\" class=\"headerlink\" title=\"克隆\"></a>克隆</h1><h3 id=\"克隆软件\"><a href=\"#克隆软件\" class=\"headerlink\" title=\"克隆软件\"></a>克隆软件</h3><p>  ● Clonezilla -分区和磁盘镜像/克隆程序<br>  ● Fog – 另一个计算机克隆解决方案<br>  ● Redo Backup -简单的备份，恢复和还原</p>\n<h3 id=\"云计算\"><a href=\"#云计算\" class=\"headerlink\" title=\"云计算\"></a>云计算</h3><p>  ● AppScale – 兼容Google App引擎的开源云计算软件.<br>  ● Archipel -使用Libvirt管理和监视虚拟机<br>  ● CloudStack -创建，管理和部署基础云服务的云计算软件<br>  ● Cobbler -Cobbler是一个Linux安装服务器，允许快速地构网络安装环境<br>  ● Eucalyptus -兼容AWS的开源私有云软件<br>  ● Mesos -开发和运行能效高的分布式系统。<br>  ● OpenNebula -一个用于系统管理员和研发运维的用户驱动的云管理平台<br>  ● OpenStack -构建私有和开放云的开源软件<br>  ● The Foreman -Foreman是一个用于物理和虚拟服务器的全生命周期管理工具.FOSS.<br>  ● Openstack Juno   云计算平台（类似阿里云，腾讯云这样的管理平台）<br>云业务流程<br>  ● BOSH -IaaS业务流程平台，最初用于部署和管理云计算平台PaaS,但也用于通用的分布式系统。<br>  ● Cloudify -使用Python和YAML编写的开源TOSCA-based云业务流程软件平台。<br>  ● Juju -云业务流程工具用于管理服务，比如charms，YAML配置和部署脚本集<br>  ● MCollective -来自Puppet实验室的管理服务器业务流程和开发的Ruby框架<br>  ● Overcast -在不同的云提供商上部署VMs，并在任何或所有（VM）上通过SSH并行运行命令行和脚本<br>  ● Rundeck – 简单的业务流程工具<br>  ● Salt -Python编写<br>云存储<br>  ● git-annex assistant -在你的每一个OSX和Linux电脑，Android设备，可移动驱动，NAS电器和云服务上一个同步文件夹<br>  ● ownCloud -提供你的文件的统一访问，通过web，你的电脑和你的移动设备<br>  ● Seafile -另一个开源的云存储解决方案<br>  ● SparkleShare -提供云存储和文件同步服务。它默认使用Git作为存储后端<br>  ● Swift -一个高可用，分布式，最终一致的对象/大数据存储<br>  ● Syncthing -一个用于私有，加密和身份认证数据的开源系统<br>代码审查<br>基于Web的协作式代码审查系统<br>  ● Gerrit -基于Git版本控制，它促进软件开发人员审查源代码修改和批准或拒绝这些变更。<br>  ● Review Board – 基于MIT License的可用自由软件<br>协作软件<br>协作软件和群件套件<br>  ● Citadel/UX -协同套件（消息和群件）继承于Citadel家族程序<br>  ● EGroupware -PHP编写的群件软件<br>  ● Horde Groupware -基于PHP的协作软件套件，包括邮件，日历，wiki，时间跟踪和文件管理<br>  ● Kolab – 另一个群件套件<br>  ● SOGo – 协作软件服务器，专注简单性和可伸缩性<br>  ● Zimbra -协作软件套件，包括邮件服务和web客户端</p>\n<h1 id=\"配置管理数据库\"><a href=\"#配置管理数据库\" class=\"headerlink\" title=\"配置管理数据库\"></a>配置管理数据库</h1><h3 id=\"配置管理数据库（CMDB）软件\"><a href=\"#配置管理数据库（CMDB）软件\" class=\"headerlink\" title=\"配置管理数据库（CMDB）软件\"></a>配置管理数据库（CMDB）软件</h3><p>  ● i-doit – 开源的IT文档管理和CMDB<br>  ● iTop -一个完全开源的，ITIL,基于web的服务管理工具<br>  ● Ralph -用于大型数据中心或较小本地网络的资产管理，DICM和CMDB系统<br>  ● Clusto -帮助跟踪你的库存，在哪，如何连接，同时提供一个和基础架构元素交互的抽象接口</p>\n<h1 id=\"配置管理\"><a href=\"#配置管理\" class=\"headerlink\" title=\"配置管理\"></a>配置管理</h1><h3 id=\"配置管理工具\"><a href=\"#配置管理工具\" class=\"headerlink\" title=\"配置管理工具\"></a>配置管理工具</h3><p>  ● Ansible -Python编写的，通过SSH管理节点<br>  ● Jenkins+Ansible+Gitlab自动化部署三剑客<br><a href=\"http://www.showerlee.com/archives/1880\" target=\"_blank\" rel=\"external\">http://www.showerlee.com/archives/1880</a><br>  ● CFEngine -轻量级代理系统。通过申明语言配置状态。<br>  ● Chef -Rbuy和Erlang编写，使用纯RubyDSL<br>  ● Fabric – Python库和cli工具，为应用程序部署或系统管理任务简化使用SSH。<br>  ● Pallet -通过Clojure DSL进行架构定义，配置和管理<br>  ● Puppet – Ruby编写，使用Puppet声明语言或Rbuy DSL<br>  ● Salt – Python编写<br>  ● Slaughter – Perl编写</p>\n<h1 id=\"持续继承和持续部署\"><a href=\"#持续继承和持续部署\" class=\"headerlink\" title=\"持续继承和持续部署\"></a>持续继承和持续部署</h1><h3 id=\"持续集成-部署软件\"><a href=\"#持续集成-部署软件\" class=\"headerlink\" title=\"持续集成/部署软件\"></a>持续集成/部署软件</h3><p>  ● Buildbot – 基于Python的持续集成工具<br>  ● Drone – 构建在Docker，使用YAML文件配置的的持续集成服务器<br>  ● GitLab CI -基于rbuy。他们也提供GitLab用于管理git存储库<br>  ● Go – 开源的持续交付服务器<br>  ● Jenkins – 一个可扩展的开源持续集成服务器<br>  ● Vlad the Deployer -自动化部署</p>\n<h1 id=\"分布式文件系统\"><a href=\"#分布式文件系统\" class=\"headerlink\" title=\"分布式文件系统\"></a>分布式文件系统</h1><h3 id=\"网络分布式文件系统\"><a href=\"#网络分布式文件系统\" class=\"headerlink\" title=\"网络分布式文件系统\"></a>网络分布式文件系统</h3><p>  ● Ceph -分布式对象存储和文件系统<br>  ● DRBD -分布式块设备复制<br>  ● LeoFS -非结构化对象/数据存储和高可用性,分布,最终一致的存储系统。<br>  ● GlusterFS – 可扩展，网络附加存储文件系统。<br>  ● HDFS – Java编写的，用于Hadoop框架的分布式、可伸缩、可移植文件系统<br>  ● Lustre -一种并行分布式文件系统,一般用于大规模集群计算。<br>  ● MooseFS – 容错、网络分布式文件系统。<br>  ● MogileFS -应用程序级别、网络分布式文件系统。<br>  ● OpenAFS -只读副本和多操作系统支持的分布式网络文件系统<br>  ● TahoeLAFS -安全、分散、容错、点对点分布式数据存储和分布式文件系统。<br>  ● XtreemFS -XtreemFS是一个用于存储需求的容错式分布式文件系统。</p>\n<h1 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h1><h3 id=\"DNS服务器\"><a href=\"#DNS服务器\" class=\"headerlink\" title=\"DNS服务器\"></a>DNS服务器</h3><p>  ● Bind -最广泛使用的域名服务软件<br>  ● djbdns -DNS应用集合，包括tinydns<br>  ● Designate – DNS REST API,支持多种DNS服务器的后端<br>  ● dnsmasq -为小规模网络提供DNS,DHCP和TFTP服务的轻量级服务<br>  ● Knot – 高性能，权威的DNS服务器<br>  ● NSD – 权威的、高性能的、简单的域名服务器。<br>  ● PowerDNS -具有各种数据存储后端和负载平衡功能的DNS服务器。<br>  ● Unbound – 验证、递归和缓存DNS解析器。<br>  ● Yadifa – 具有DNSSEC兼容的轻量级的权威域名服务器，支持.eu的顶级域名。</p>\n<h1 id=\"主机控制面板\"><a href=\"#主机控制面板\" class=\"headerlink\" title=\"主机控制面板\"></a>主机控制面板</h1><h3 id=\"Web主机控制面板\"><a href=\"#Web主机控制面板\" class=\"headerlink\" title=\"Web主机控制面板\"></a>Web主机控制面板</h3><p>  ● Ajenti -Linux和BSD控制面板<br>  ● Feathur – VPS供应和管理软件<br>  ● ISPConfig -Linux主机控制面板<br>  ● VestaCP -用于Linux和Nginx的主机面板<br>  ● Virtualmin -基于webmin的Linux控制面板<br>  ● ZPanel -Linux BSD和Windows控制面板</p>\n<h1 id=\"IMAP-POP3\"><a href=\"#IMAP-POP3\" class=\"headerlink\" title=\"IMAP/POP3\"></a>IMAP/POP3</h1><h3 id=\"IMAP-POP3邮件服务器\"><a href=\"#IMAP-POP3邮件服务器\" class=\"headerlink\" title=\"IMAP/POP3邮件服务器\"></a>IMAP/POP3邮件服务器</h3><p>  ● Courier IMAP/POP3 -快速，可伸缩，企业级IMAP和POP3服务器<br>  ● Cyrus IMAP/POP3 -运行在密封服务器上,普通用户不允许登录。<br>  ● Dovecot -主要考虑安全而编写的IMAP和POP3服务器<br>  ● Qpopper – 一个古老且流行的POP3服务器实现</p>\n<h1 id=\"IT资产管理\"><a href=\"#IT资产管理\" class=\"headerlink\" title=\"IT资产管理\"></a>IT资产管理</h1><h3 id=\"IT资产管理软件\"><a href=\"#IT资产管理软件\" class=\"headerlink\" title=\"IT资产管理软件\"></a>IT资产管理软件</h3><p>  ● GLPI -带有额外管理接口的信息资源管理器<br>  ● OCS Inventory NG -允许用户清算IT资产<br>  ● RackTables -数据中心和服务器房间资产，比如将硬件资产,网络地址,在货架空间,网络配置文档化。<br>  ● Ralph – 针对大型数据中心系统以及小型局域网网络的资产管理、DCIM和CMDB。<br>  ● Snipe IT -资产和许可证管理软件</p>\n<h1 id=\"LDAP\"><a href=\"#LDAP\" class=\"headerlink\" title=\"LDAP\"></a>LDAP</h1><h3 id=\"LDAP服务器\"><a href=\"#LDAP服务器\" class=\"headerlink\" title=\"LDAP服务器\"></a>LDAP服务器</h3><p>  ● 389 Directory Server – 通过Red Hat部署<br>  ● Apache Directory Server -用Java编写的Apache软件基金会项目<br>  ● Fusion Directory -基于OpenLDAP改善服务和公司目录的管理<br>  ● OpenDJ – OpenDS分支<br>  ● OpenDS -另一个用Java编写的目录服务器<br>  ● OpenLDAP -由OpenLDAP项目开发</p>\n<h1 id=\"日志管理\"><a href=\"#日志管理\" class=\"headerlink\" title=\"日志管理\"></a>日志管理</h1><h3 id=\"日志管理工具：收集，解析，可视化\"><a href=\"#日志管理工具：收集，解析，可视化\" class=\"headerlink\" title=\"日志管理工具：收集，解析，可视化\"></a>日志管理工具：收集，解析，可视化</h3><p>  ● Elasticsearch – 一个基于Lucene的文档存储，主要用于日志索引、存储和分析。<br>  ● Fluentd – 日志收集和发出<br>  ● Flume -分布式日志收集和聚合系统<br>  ● Graylog2 -具有报警选项的可插入日志和事件分析服务器<br>  ● Heka -流处理系统，可用于日志聚合<br>  ● Kibana – 可视化日志和时间戳数据<br>  ● Logstash -管理事件和日志的工具<br>  ● Octopussy -日志管理解决方案（可视化/报警/报告）</p>\n<h1 id=\"监控\"><a href=\"#监控\" class=\"headerlink\" title=\"监控\"></a>监控</h1><h3 id=\"监控软件\"><a href=\"#监控软件\" class=\"headerlink\" title=\"监控软件\"></a>监控软件</h3><p>  ● Cacti -基于Web的网络监控和图形工具<br>  ● Cabot – 监控和报警，类似PagerDuty<br>  ● check_mk -Nagios的扩展集合<br>  ● Dash -一个用于GNU/Linux机器的低开销web仪表板监控。<br>  ● Icinga – Nagios分支<br>  ● LibreNMS – Observium分支<br>  ● Monit – 管理和监控Unix系统的小型开源工具<br>  ● Munin -网络资源监控工具<br>  ● Naemon -基于Nagios4内核的网络监控工具，具有性能加强和新功能<br>  ● Nagios -计算机系统，网络和基础架构监控软件<br>  ● Observium -服务器和网络设备的SNMP监控，运行在linux<br>  ● OMD -开放的监控分布<br>  ● Opsview -基于Nagios4，Opsview核心，用于小型IT和测试环境<br>  ● Riemann -灵活和快速的事件处理器，允许负责时间和度量分析<br>  ● Sensu -开源的监控框架<br>  ● Sentry – 应用监控，事件记录和聚合<br>  ● Shinken – 另一个监控框架<br>  ● Thruk – 多后台监控的web接口，支持Naemon，Nagios，Icinga和Shinken<br>  ● Xymon -灵感来自Big Brother的网络监控<br>  ● Zabbix – Enterprise-class software for monitoring of networks and applications.<br>  ● Zabbix – 监控网络和应用的企业级软件<br>  ● Zenoss -基于Zope的应用，服务器和网络管理平台</p>\n<h1 id=\"度量和度量收集\"><a href=\"#度量和度量收集\" class=\"headerlink\" title=\"度量和度量收集\"></a>度量和度量收集</h1><h3 id=\"度量收集和显示软件\"><a href=\"#度量收集和显示软件\" class=\"headerlink\" title=\"度量收集和显示软件\"></a>度量收集和显示软件</h3><p>  ● Collectd -系统统计收集守护进程<br>  ● Collectl -高精度系统性能指标收集工具。<br>  ● Dashing -Ruby gem,允许快速统计仪表板的开发。基于HTML5，允许在数据中心或会议室进行大屏幕显示。<br>  ● Diamond -基于Python的统计收集守护进程<br>  ● Ganglia – 基于RRD用于网格和/或集群的服务器的高性能、可伸缩监控设备。兼容Graphite，使用一个单一的收集进程。<br>  ● Grafana -一个Graphite或InfluxDB仪表盘和图形编辑器<br>  ● 开源的可伸缩绘图服务器<br>  ● InfluxDB -开源的分布式时间序列数据库，没有外部依赖。<br>  ● KairosDB -快速分布式可扩展的时间序列数据库,OpenTSDB 1. x的分支。<br>  ● OpenTSDB -存储和服务大量的时间序列数据，不丢失粒度。<br>  ● RRDtool – 开源企业标准，用于时间序列数据的高性能数据记录和绘图系统<br>  ● Statsd -应用统计监听</p>\n<h1 id=\"网络配置管理\"><a href=\"#网络配置管理\" class=\"headerlink\" title=\"网络配置管理\"></a>网络配置管理</h1><h3 id=\"网络配置管理工具\"><a href=\"#网络配置管理工具\" class=\"headerlink\" title=\"网络配置管理工具\"></a>网络配置管理工具</h3><p>  ● GestióIP -一个自动的基于web的IPV4/IPV6地址管理工具<br>  ● RANCID -监控网络设备配置和维护历史变更<br>  ● rConfig -另一个网络配置管理工具</p>\n<h1 id=\"时事通讯\"><a href=\"#时事通讯\" class=\"headerlink\" title=\"时事通讯\"></a>时事通讯</h1><h3 id=\"时事通讯软件\"><a href=\"#时事通讯软件\" class=\"headerlink\" title=\"时事通讯软件\"></a>时事通讯软件</h3><p>  ● DadaMail -Perl编写的邮件列表管理器<br>  ● phpList -PHP编写的时事通讯管理器</p>\n<h1 id=\"NOSQL\"><a href=\"#NOSQL\" class=\"headerlink\" title=\"NOSQL\"></a>NOSQL</h1><h3 id=\"NOSQL数据库\"><a href=\"#NOSQL数据库\" class=\"headerlink\" title=\"NOSQL数据库\"></a>NOSQL数据库</h3><h4 id=\"●-列族\"><a href=\"#●-列族\" class=\"headerlink\" title=\"● 列族\"></a>● 列族</h4><p>  ○ Apache HBase – Hadoop数据库，一个分布式的大数据存储<br>  ○ Cassandra -分布式数据库管理系统，设计用于处理大量数据跨多个服务器。<br>  ○ Hypertable -基于c++的bigtable DBMS,节省通信，可独立或在Hadoop类似的分布式FS上运行。</p>\n<h4 id=\"●-文档存储\"><a href=\"#●-文档存储\" class=\"headerlink\" title=\"● 文档存储\"></a>● 文档存储</h4><p>  ○ CouchDB -易于使用,多主机复制的面向文档的数据库系统。<br>  ○ ElasticSearch – 基于Java的数据库,受欢迎的日志聚合,和电子邮件归档项目。<br>  ○ MongoDB – 另一个面向文档的数据库系统<br>  ○ RavenDB – 具有ACID/事物功能的基于文档的数据库<br>  ○ RethinkDB -开源分布式文档存储数据库，关注JSON</p>\n<h4 id=\"●-图\"><a href=\"#●-图\" class=\"headerlink\" title=\"● 图\"></a>● 图</h4><p>  ○ FlockDB -Twitter分布式，容错图数据库<br>  ○ Neo4j – 开源图数据库</p>\n<h4 id=\"●-键值\"><a href=\"#●-键值\" class=\"headerlink\" title=\"● 键值\"></a>● 键值</h4><p>  ○ LevelDB -Google高性能键值数据库<br>  ○ Redis – 支持网络，基于内存，键值，亦可持久化数据库<br>  ○ Riak -另一个容错的键值NoSQL数据库<br>NoSQL服务器比较: <a href=\"https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis\" target=\"_blank\" rel=\"external\">https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis</a></p>\n<h3 id=\"打包\"><a href=\"#打包\" class=\"headerlink\" title=\"打包\"></a>打包</h3><p>  ● fpm – 万能的多格式包创建器<br>  ● omnibus-ruby – 全栈，跨发行版的包管理软件（Ruby）<br>  ● packman -全栈，跨发行版的包管理软件（Python）<br>  ● tito – 为git项目构建RPM</p>\n<h3 id=\"队列\"><a href=\"#队列\" class=\"headerlink\" title=\"队列\"></a>队列</h3><p>  ● BeanstalkD – A simple, fast work queue.<br>  ● BeanstalkD – 一个简单快速的工作队列<br>  ● Gearman -快速的多语言队列或任务处理平台<br>  ● NSQ – 实时分发的消息平台<br>  ● RabbitMQ -健壮的，全功能，跨发行版的队列系统<br>  ● ZeroMQ -轻量级队列系统</p>\n<h1 id=\"RDBMS\"><a href=\"#RDBMS\" class=\"headerlink\" title=\"RDBMS\"></a>RDBMS</h1><h3 id=\"关系数据库管理系统\"><a href=\"#关系数据库管理系统\" class=\"headerlink\" title=\"关系数据库管理系统\"></a>关系数据库管理系统</h3><p>  ● Firebird – 真正的全球开源数据库<br>  ● Galera -Galera MySQL集群是一个易于使用的高可用性解决方案，具有很高的系统正常运行时间,没有数据丢失,为未来的增长提供可伸缩性。<br>  ● MariaDB -MySQL的社区开发分支<br>  ● MySQL – 非常流行的RDBMS服务器<br>  ● Percona Server -增强的，可替换MySQL<br>  ● PostgreSQL – 对象关系数据库管理系统（ORDBMS)<br>  ● PostgreSQL-XL – 基于PostgreSQL的可伸缩开源数据库集群<br>  ● SQLite -自包容，弱服务器，零配置，支持事务的SQL DBS实现库</p>\n<h1 id=\"安全\"><a href=\"#安全\" class=\"headerlink\" title=\"安全\"></a>安全</h1><h3 id=\"安全工具\"><a href=\"#安全工具\" class=\"headerlink\" title=\"安全工具\"></a>安全工具</h3><p>  ● Denyhosts -阻止SSH字典攻击和暴力攻击<br>  ● Fail2Ban – 扫描日志文件，并对具有恶意行为显示的IP采取措施<br>  ● SpamAssassin -一个强大的和受欢迎的垃圾邮件过滤器，它采用多种检测技术。<br>服务发现<br>  ● Consul – Consule是伊戈尔服务发现，监控和配置的工具<br>  ● Doozerd – Doozer是一个高可用，完全一致的存储，用于少量非常重要的数据<br>  ● ZooKeeper – ZooKeeper是一个集中的服务，用于维护配置信息，命名，提供分布式同步和组服务</p>\n<h1 id=\"SMTP\"><a href=\"#SMTP\" class=\"headerlink\" title=\"SMTP\"></a>SMTP</h1><h3 id=\"SMTP服务器\"><a href=\"#SMTP服务器\" class=\"headerlink\" title=\"SMTP服务器\"></a>SMTP服务器</h3><p>  ● Exim -由剑桥大学开发的消息传输代理（MTA)<br>  ● Haraka – 用JavaScirpt编写的高性能，可插入的SMTP服务器<br>  ● MailCatcher -Ruby gem部署一个简单的SMTP MTA网关，接收所有邮件并在web接口显示。对调试和开发有用。<br>  ● Maildrop -开源的一次性邮件服务器，对开发也很有用<br>  ● OpenSMTPD -从OpenBSD项目实现的安全的SMTP服务器<br>  ● Postfix – 快速，易于管理和安全的Sendmail替代品<br>  ● Qmail – 安全的Sendmail替代品<br>  ● Sendmail -消息传输代理（MTA)</p>\n<h1 id=\"软件容器\"><a href=\"#软件容器\" class=\"headerlink\" title=\"软件容器\"></a>软件容器</h1><h3 id=\"操作系统级别的虚拟化\"><a href=\"#操作系统级别的虚拟化\" class=\"headerlink\" title=\"操作系统级别的虚拟化\"></a>操作系统级别的虚拟化</h3><p>  ● Bitnami -为web应用，开发栈和虚拟设备生产开源软件安装器或软件包<br>  ● Docker – 给开发者和系统管理员构建，发布和运行分布式应用程序的开放平台<br>  ● OpenVZ -Linux平台基于容器的虚拟化</p>\n<h1 id=\"SSH\"><a href=\"#SSH\" class=\"headerlink\" title=\"SSH\"></a>SSH</h1><h3 id=\"SSH工具\"><a href=\"#SSH工具\" class=\"headerlink\" title=\"SSH工具\"></a>SSH工具</h3><p>  ● autossh -网络中断后自动复位ssh会话。<br>  ● Cluster SSH -通过一个图形化控制台控制多个xterm窗口。<br>  ● DSH -Dancer的shell/分布式shell-从一个命令行包装执行多个远程shell命令。<br>  ● Mosh – 移动shell<br>  ● parallel-ssh -提供并行的OpenSSH版本和相关工具<br>  ● SSH Power Tool -不使用pre-shared钥匙的情况下对多个服务器同时执行命令和上传文件</p>\n<h1 id=\"统计\"><a href=\"#统计\" class=\"headerlink\" title=\"统计\"></a>统计</h1><h3 id=\"分析软件\"><a href=\"#分析软件\" class=\"headerlink\" title=\"分析软件\"></a>分析软件</h3><p>  ● Analog – 世界上最流行的日志分析工具<br>  ● GoAccess -在终端运行的开源的实时web日志分析和交互视图<br>  ● Piwik -免费和开源的web分析应用<br>  ● Webalizer – F快速免费的web服务器日志文件分析程序</p>\n<h1 id=\"工单系统\"><a href=\"#工单系统\" class=\"headerlink\" title=\"工单系统\"></a>工单系统</h1><h3 id=\"基于web的工单系统\"><a href=\"#基于web的工单系统\" class=\"headerlink\" title=\"基于web的工单系统\"></a>基于web的工单系统</h3><p>  ● Bugzilla -由Mozilla项目开发和使用过的通用缺陷跟踪和测试工具<br>  ● Cerb – 基于商业开源许可的基于组的邮件管理项目<br>  ● Flyspray – 使用PHP编写的缺陷跟踪系统<br>  ● MantisBT -另一个基于web的缺陷跟踪系统<br>  ● osTicket -开源的技术支持工单系统<br>  ● Otrs -免费和开源故障通知单系统软件包,公司,组织,或其他实体可以使用它来基于询问分配工单并跟踪进一步的沟通。<br>  ● Request Tracker -使用Perl编写的工单跟踪系统<br>  ● TheBugGenie -开源的工单系统，具有非常完备的用户权限分配</p>\n<h1 id=\"故障排除\"><a href=\"#故障排除\" class=\"headerlink\" title=\"故障排除\"></a>故障排除</h1><h3 id=\"故障排除工具\"><a href=\"#故障排除工具\" class=\"headerlink\" title=\"故障排除工具\"></a>故障排除工具</h3><p>  ● mitmproxy -ython工具，用于拦截,查看和修改网络流量。在排除某些问题是非常重要的。<br>  ● Sysdig -从一个运行的linux实例上捕获系统状态和活动，之后保存，过滤和分析<br>  ● Wireshark -世界上著名的网络协议分析工具</p>\n<h1 id=\"项目管理\"><a href=\"#项目管理\" class=\"headerlink\" title=\"项目管理\"></a>项目管理</h1><h3 id=\"基于web的项目管理和缺陷跟踪系统\"><a href=\"#基于web的项目管理和缺陷跟踪系统\" class=\"headerlink\" title=\"基于web的项目管理和缺陷跟踪系统\"></a>基于web的项目管理和缺陷跟踪系统</h3><p>  ● ChiliProject – Redmine分支<br>  ● GitBucket 用Scala编写的GitHub的克隆，单独jar安装<br>  ● GitLab -用Rbuy编写的GitHub的克隆<br>  ● Gogs -用Go编写<br>  ● OpenProject -开源的项目协作项目<br>  ● Phabricator PHP编写<br>  ● Redmine – 基于rails在rbuy编写<br>  ● The Bug Genie -PHP编写<br>  ● Trac -python编写<br>  ● 阿里云持续交付<a href=\"https://crp.aliyun.com/#page6\" target=\"_blank\" rel=\"external\">https://crp.aliyun.com/#page6</a><br>redmine项目管理系统<br><a href=\"https://bitnami.com/stack/redmine/installer\" target=\"_blank\" rel=\"external\">https://bitnami.com/stack/redmine/installer</a></p>\n<h1 id=\"版本控制\"><a href=\"#版本控制\" class=\"headerlink\" title=\"版本控制\"></a>版本控制</h1><h3 id=\"软件版本和版本控制\"><a href=\"#软件版本和版本控制\" class=\"headerlink\" title=\"软件版本和版本控制\"></a>软件版本和版本控制</h3><p>  ● Fossil -分布式版本控制，内建wiki和缺陷跟踪<br>  ● Git -速度很快的分布式版本控制和源代码管理<br>  ● GNU Bazaar -由Cannoicalzi赞助的分布式版本控制系统<br>  ● Mercurial -另一个版本控制<br>  ● Subversion -客户端-服务器版本控制系统<br>  ● Coding<br>  ● 码云<br>  ● 阿里云 code.aliyun.com</p>\n<h1 id=\"虚拟化\"><a href=\"#虚拟化\" class=\"headerlink\" title=\"虚拟化\"></a>虚拟化</h1><h3 id=\"虚拟化软件\"><a href=\"#虚拟化软件\" class=\"headerlink\" title=\"虚拟化软件\"></a>虚拟化软件</h3><p>  ● Ganeti -在KVM和Xen上构建的集群虚拟服务器管理软件<br>  ● KVM -Linux内核虚拟化架构<br>  ● oVirt -管理虚拟机，存储和虚拟网络<br>  ● Packer – 从单个源配置为多个平台创建相同的机器镜像<br>  ● Vagrant – 创建完整开发环境的工具<br>  ● VirtualBox -来自Oracle公司的虚拟化产品<br>  ● Xen -用于32/64位Intel/AMD(IA 64）和PowerPC 970架构的虚拟机监控器<br>  ● Docker<br>  ● cockpit  (图形化管理Docker容器)</p>\n<h1 id=\"VPN\"><a href=\"#VPN\" class=\"headerlink\" title=\"VPN\"></a>VPN</h1><h3 id=\"VPN软件\"><a href=\"#VPN软件\" class=\"headerlink\" title=\"VPN软件\"></a>VPN软件</h3><p>  ● OpenVPN -使用一个定制的安全密钥交换协议,利用SSL / TLS。<br>  ● Pritunl -基于OpenVPN的方案，易于设置<br>  ● SoftEther – 具有高级特性的多协议VPN软件<br>  ● sshuttle -穷人的VPN<br>  ● strongSwan – Linux下完整的IPsec实现<br>  ● tinc -分布式点对点VPN</p>\n<h1 id=\"物联网\"><a href=\"#物联网\" class=\"headerlink\" title=\"物联网\"></a>物联网</h1><p>● contiki   一开源物联网系统，支持tcp,vnc等协议<br>● yeelink   物联网在线平台</p>\n<h1 id=\"15款顶级开源人工智能工具推荐\"><a href=\"#15款顶级开源人工智能工具推荐\" class=\"headerlink\" title=\"15款顶级开源人工智能工具推荐\"></a>15款顶级开源人工智能工具推荐</h1><p><a href=\"https://www.oschina.net/news/77729/15top-opensource-artificial-intelligence-tools?from=20161009\" target=\"_blank\" rel=\"external\">https://www.oschina.net/news/77729/15top-opensource-artificial-intelligence-tools?from=20161009</a></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"备份\"><a href=\"#备份\" class=\"headerlink\" title=\"备份\"></a>备份</h1><h3 id=\"备份软件\"><a href=\"#备份软件\" class=\"headerlink\" title=\"备份软件\"></a>备份软件</h3><p>  ● Amanda -客户端-服务器模型备份工具<br>  ● Bacula – 另一个客户端-服务器模型备份工具<br>  ● Backupninja -轻量级，可扩展的元数据备份系统<br>  ● Backuppc -客户端-服务器模型备份工具和文件共享方案。<br>  ● Burp -网络备份和还原程序<br>  ● Duplicity -使用rsync算法加密的带宽-效率备份<br>  ● Lsyncd -监控一个本地目录树的变化,然后产生一个进程去同步变化。默认使用rsync。<br>  ● Rsnapshot -文件系统快照工具<br>  ● SafeKeep -使用rdiff-backup，集中的，基于pull的备份<br>  ● TarSnap – 具有一个开源客户端的安全备份服务<br>  ● UrBackup -另一个客户端-服务器备份系统<br>  ● DREBS – AWS EBS支持策略的备份脚本</p>\n<h1 id=\"克隆\"><a href=\"#克隆\" class=\"headerlink\" title=\"克隆\"></a>克隆</h1><h3 id=\"克隆软件\"><a href=\"#克隆软件\" class=\"headerlink\" title=\"克隆软件\"></a>克隆软件</h3><p>  ● Clonezilla -分区和磁盘镜像/克隆程序<br>  ● Fog – 另一个计算机克隆解决方案<br>  ● Redo Backup -简单的备份，恢复和还原</p>\n<h3 id=\"云计算\"><a href=\"#云计算\" class=\"headerlink\" title=\"云计算\"></a>云计算</h3><p>  ● AppScale – 兼容Google App引擎的开源云计算软件.<br>  ● Archipel -使用Libvirt管理和监视虚拟机<br>  ● CloudStack -创建，管理和部署基础云服务的云计算软件<br>  ● Cobbler -Cobbler是一个Linux安装服务器，允许快速地构网络安装环境<br>  ● Eucalyptus -兼容AWS的开源私有云软件<br>  ● Mesos -开发和运行能效高的分布式系统。<br>  ● OpenNebula -一个用于系统管理员和研发运维的用户驱动的云管理平台<br>  ● OpenStack -构建私有和开放云的开源软件<br>  ● The Foreman -Foreman是一个用于物理和虚拟服务器的全生命周期管理工具.FOSS.<br>  ● Openstack Juno   云计算平台（类似阿里云，腾讯云这样的管理平台）<br>云业务流程<br>  ● BOSH -IaaS业务流程平台，最初用于部署和管理云计算平台PaaS,但也用于通用的分布式系统。<br>  ● Cloudify -使用Python和YAML编写的开源TOSCA-based云业务流程软件平台。<br>  ● Juju -云业务流程工具用于管理服务，比如charms，YAML配置和部署脚本集<br>  ● MCollective -来自Puppet实验室的管理服务器业务流程和开发的Ruby框架<br>  ● Overcast -在不同的云提供商上部署VMs，并在任何或所有（VM）上通过SSH并行运行命令行和脚本<br>  ● Rundeck – 简单的业务流程工具<br>  ● Salt -Python编写<br>云存储<br>  ● git-annex assistant -在你的每一个OSX和Linux电脑，Android设备，可移动驱动，NAS电器和云服务上一个同步文件夹<br>  ● ownCloud -提供你的文件的统一访问，通过web，你的电脑和你的移动设备<br>  ● Seafile -另一个开源的云存储解决方案<br>  ● SparkleShare -提供云存储和文件同步服务。它默认使用Git作为存储后端<br>  ● Swift -一个高可用，分布式，最终一致的对象/大数据存储<br>  ● Syncthing -一个用于私有，加密和身份认证数据的开源系统<br>代码审查<br>基于Web的协作式代码审查系统<br>  ● Gerrit -基于Git版本控制，它促进软件开发人员审查源代码修改和批准或拒绝这些变更。<br>  ● Review Board – 基于MIT License的可用自由软件<br>协作软件<br>协作软件和群件套件<br>  ● Citadel/UX -协同套件（消息和群件）继承于Citadel家族程序<br>  ● EGroupware -PHP编写的群件软件<br>  ● Horde Groupware -基于PHP的协作软件套件，包括邮件，日历，wiki，时间跟踪和文件管理<br>  ● Kolab – 另一个群件套件<br>  ● SOGo – 协作软件服务器，专注简单性和可伸缩性<br>  ● Zimbra -协作软件套件，包括邮件服务和web客户端</p>\n<h1 id=\"配置管理数据库\"><a href=\"#配置管理数据库\" class=\"headerlink\" title=\"配置管理数据库\"></a>配置管理数据库</h1><h3 id=\"配置管理数据库（CMDB）软件\"><a href=\"#配置管理数据库（CMDB）软件\" class=\"headerlink\" title=\"配置管理数据库（CMDB）软件\"></a>配置管理数据库（CMDB）软件</h3><p>  ● i-doit – 开源的IT文档管理和CMDB<br>  ● iTop -一个完全开源的，ITIL,基于web的服务管理工具<br>  ● Ralph -用于大型数据中心或较小本地网络的资产管理，DICM和CMDB系统<br>  ● Clusto -帮助跟踪你的库存，在哪，如何连接，同时提供一个和基础架构元素交互的抽象接口</p>\n<h1 id=\"配置管理\"><a href=\"#配置管理\" class=\"headerlink\" title=\"配置管理\"></a>配置管理</h1><h3 id=\"配置管理工具\"><a href=\"#配置管理工具\" class=\"headerlink\" title=\"配置管理工具\"></a>配置管理工具</h3><p>  ● Ansible -Python编写的，通过SSH管理节点<br>  ● Jenkins+Ansible+Gitlab自动化部署三剑客<br><a href=\"http://www.showerlee.com/archives/1880\">http://www.showerlee.com/archives/1880</a><br>  ● CFEngine -轻量级代理系统。通过申明语言配置状态。<br>  ● Chef -Rbuy和Erlang编写，使用纯RubyDSL<br>  ● Fabric – Python库和cli工具，为应用程序部署或系统管理任务简化使用SSH。<br>  ● Pallet -通过Clojure DSL进行架构定义，配置和管理<br>  ● Puppet – Ruby编写，使用Puppet声明语言或Rbuy DSL<br>  ● Salt – Python编写<br>  ● Slaughter – Perl编写</p>\n<h1 id=\"持续继承和持续部署\"><a href=\"#持续继承和持续部署\" class=\"headerlink\" title=\"持续继承和持续部署\"></a>持续继承和持续部署</h1><h3 id=\"持续集成-部署软件\"><a href=\"#持续集成-部署软件\" class=\"headerlink\" title=\"持续集成/部署软件\"></a>持续集成/部署软件</h3><p>  ● Buildbot – 基于Python的持续集成工具<br>  ● Drone – 构建在Docker，使用YAML文件配置的的持续集成服务器<br>  ● GitLab CI -基于rbuy。他们也提供GitLab用于管理git存储库<br>  ● Go – 开源的持续交付服务器<br>  ● Jenkins – 一个可扩展的开源持续集成服务器<br>  ● Vlad the Deployer -自动化部署</p>\n<h1 id=\"分布式文件系统\"><a href=\"#分布式文件系统\" class=\"headerlink\" title=\"分布式文件系统\"></a>分布式文件系统</h1><h3 id=\"网络分布式文件系统\"><a href=\"#网络分布式文件系统\" class=\"headerlink\" title=\"网络分布式文件系统\"></a>网络分布式文件系统</h3><p>  ● Ceph -分布式对象存储和文件系统<br>  ● DRBD -分布式块设备复制<br>  ● LeoFS -非结构化对象/数据存储和高可用性,分布,最终一致的存储系统。<br>  ● GlusterFS – 可扩展，网络附加存储文件系统。<br>  ● HDFS – Java编写的，用于Hadoop框架的分布式、可伸缩、可移植文件系统<br>  ● Lustre -一种并行分布式文件系统,一般用于大规模集群计算。<br>  ● MooseFS – 容错、网络分布式文件系统。<br>  ● MogileFS -应用程序级别、网络分布式文件系统。<br>  ● OpenAFS -只读副本和多操作系统支持的分布式网络文件系统<br>  ● TahoeLAFS -安全、分散、容错、点对点分布式数据存储和分布式文件系统。<br>  ● XtreemFS -XtreemFS是一个用于存储需求的容错式分布式文件系统。</p>\n<h1 id=\"DNS\"><a href=\"#DNS\" class=\"headerlink\" title=\"DNS\"></a>DNS</h1><h3 id=\"DNS服务器\"><a href=\"#DNS服务器\" class=\"headerlink\" title=\"DNS服务器\"></a>DNS服务器</h3><p>  ● Bind -最广泛使用的域名服务软件<br>  ● djbdns -DNS应用集合，包括tinydns<br>  ● Designate – DNS REST API,支持多种DNS服务器的后端<br>  ● dnsmasq -为小规模网络提供DNS,DHCP和TFTP服务的轻量级服务<br>  ● Knot – 高性能，权威的DNS服务器<br>  ● NSD – 权威的、高性能的、简单的域名服务器。<br>  ● PowerDNS -具有各种数据存储后端和负载平衡功能的DNS服务器。<br>  ● Unbound – 验证、递归和缓存DNS解析器。<br>  ● Yadifa – 具有DNSSEC兼容的轻量级的权威域名服务器，支持.eu的顶级域名。</p>\n<h1 id=\"主机控制面板\"><a href=\"#主机控制面板\" class=\"headerlink\" title=\"主机控制面板\"></a>主机控制面板</h1><h3 id=\"Web主机控制面板\"><a href=\"#Web主机控制面板\" class=\"headerlink\" title=\"Web主机控制面板\"></a>Web主机控制面板</h3><p>  ● Ajenti -Linux和BSD控制面板<br>  ● Feathur – VPS供应和管理软件<br>  ● ISPConfig -Linux主机控制面板<br>  ● VestaCP -用于Linux和Nginx的主机面板<br>  ● Virtualmin -基于webmin的Linux控制面板<br>  ● ZPanel -Linux BSD和Windows控制面板</p>\n<h1 id=\"IMAP-POP3\"><a href=\"#IMAP-POP3\" class=\"headerlink\" title=\"IMAP/POP3\"></a>IMAP/POP3</h1><h3 id=\"IMAP-POP3邮件服务器\"><a href=\"#IMAP-POP3邮件服务器\" class=\"headerlink\" title=\"IMAP/POP3邮件服务器\"></a>IMAP/POP3邮件服务器</h3><p>  ● Courier IMAP/POP3 -快速，可伸缩，企业级IMAP和POP3服务器<br>  ● Cyrus IMAP/POP3 -运行在密封服务器上,普通用户不允许登录。<br>  ● Dovecot -主要考虑安全而编写的IMAP和POP3服务器<br>  ● Qpopper – 一个古老且流行的POP3服务器实现</p>\n<h1 id=\"IT资产管理\"><a href=\"#IT资产管理\" class=\"headerlink\" title=\"IT资产管理\"></a>IT资产管理</h1><h3 id=\"IT资产管理软件\"><a href=\"#IT资产管理软件\" class=\"headerlink\" title=\"IT资产管理软件\"></a>IT资产管理软件</h3><p>  ● GLPI -带有额外管理接口的信息资源管理器<br>  ● OCS Inventory NG -允许用户清算IT资产<br>  ● RackTables -数据中心和服务器房间资产，比如将硬件资产,网络地址,在货架空间,网络配置文档化。<br>  ● Ralph – 针对大型数据中心系统以及小型局域网网络的资产管理、DCIM和CMDB。<br>  ● Snipe IT -资产和许可证管理软件</p>\n<h1 id=\"LDAP\"><a href=\"#LDAP\" class=\"headerlink\" title=\"LDAP\"></a>LDAP</h1><h3 id=\"LDAP服务器\"><a href=\"#LDAP服务器\" class=\"headerlink\" title=\"LDAP服务器\"></a>LDAP服务器</h3><p>  ● 389 Directory Server – 通过Red Hat部署<br>  ● Apache Directory Server -用Java编写的Apache软件基金会项目<br>  ● Fusion Directory -基于OpenLDAP改善服务和公司目录的管理<br>  ● OpenDJ – OpenDS分支<br>  ● OpenDS -另一个用Java编写的目录服务器<br>  ● OpenLDAP -由OpenLDAP项目开发</p>\n<h1 id=\"日志管理\"><a href=\"#日志管理\" class=\"headerlink\" title=\"日志管理\"></a>日志管理</h1><h3 id=\"日志管理工具：收集，解析，可视化\"><a href=\"#日志管理工具：收集，解析，可视化\" class=\"headerlink\" title=\"日志管理工具：收集，解析，可视化\"></a>日志管理工具：收集，解析，可视化</h3><p>  ● Elasticsearch – 一个基于Lucene的文档存储，主要用于日志索引、存储和分析。<br>  ● Fluentd – 日志收集和发出<br>  ● Flume -分布式日志收集和聚合系统<br>  ● Graylog2 -具有报警选项的可插入日志和事件分析服务器<br>  ● Heka -流处理系统，可用于日志聚合<br>  ● Kibana – 可视化日志和时间戳数据<br>  ● Logstash -管理事件和日志的工具<br>  ● Octopussy -日志管理解决方案（可视化/报警/报告）</p>\n<h1 id=\"监控\"><a href=\"#监控\" class=\"headerlink\" title=\"监控\"></a>监控</h1><h3 id=\"监控软件\"><a href=\"#监控软件\" class=\"headerlink\" title=\"监控软件\"></a>监控软件</h3><p>  ● Cacti -基于Web的网络监控和图形工具<br>  ● Cabot – 监控和报警，类似PagerDuty<br>  ● check_mk -Nagios的扩展集合<br>  ● Dash -一个用于GNU/Linux机器的低开销web仪表板监控。<br>  ● Icinga – Nagios分支<br>  ● LibreNMS – Observium分支<br>  ● Monit – 管理和监控Unix系统的小型开源工具<br>  ● Munin -网络资源监控工具<br>  ● Naemon -基于Nagios4内核的网络监控工具，具有性能加强和新功能<br>  ● Nagios -计算机系统，网络和基础架构监控软件<br>  ● Observium -服务器和网络设备的SNMP监控，运行在linux<br>  ● OMD -开放的监控分布<br>  ● Opsview -基于Nagios4，Opsview核心，用于小型IT和测试环境<br>  ● Riemann -灵活和快速的事件处理器，允许负责时间和度量分析<br>  ● Sensu -开源的监控框架<br>  ● Sentry – 应用监控，事件记录和聚合<br>  ● Shinken – 另一个监控框架<br>  ● Thruk – 多后台监控的web接口，支持Naemon，Nagios，Icinga和Shinken<br>  ● Xymon -灵感来自Big Brother的网络监控<br>  ● Zabbix – Enterprise-class software for monitoring of networks and applications.<br>  ● Zabbix – 监控网络和应用的企业级软件<br>  ● Zenoss -基于Zope的应用，服务器和网络管理平台</p>\n<h1 id=\"度量和度量收集\"><a href=\"#度量和度量收集\" class=\"headerlink\" title=\"度量和度量收集\"></a>度量和度量收集</h1><h3 id=\"度量收集和显示软件\"><a href=\"#度量收集和显示软件\" class=\"headerlink\" title=\"度量收集和显示软件\"></a>度量收集和显示软件</h3><p>  ● Collectd -系统统计收集守护进程<br>  ● Collectl -高精度系统性能指标收集工具。<br>  ● Dashing -Ruby gem,允许快速统计仪表板的开发。基于HTML5，允许在数据中心或会议室进行大屏幕显示。<br>  ● Diamond -基于Python的统计收集守护进程<br>  ● Ganglia – 基于RRD用于网格和/或集群的服务器的高性能、可伸缩监控设备。兼容Graphite，使用一个单一的收集进程。<br>  ● Grafana -一个Graphite或InfluxDB仪表盘和图形编辑器<br>  ● 开源的可伸缩绘图服务器<br>  ● InfluxDB -开源的分布式时间序列数据库，没有外部依赖。<br>  ● KairosDB -快速分布式可扩展的时间序列数据库,OpenTSDB 1. x的分支。<br>  ● OpenTSDB -存储和服务大量的时间序列数据，不丢失粒度。<br>  ● RRDtool – 开源企业标准，用于时间序列数据的高性能数据记录和绘图系统<br>  ● Statsd -应用统计监听</p>\n<h1 id=\"网络配置管理\"><a href=\"#网络配置管理\" class=\"headerlink\" title=\"网络配置管理\"></a>网络配置管理</h1><h3 id=\"网络配置管理工具\"><a href=\"#网络配置管理工具\" class=\"headerlink\" title=\"网络配置管理工具\"></a>网络配置管理工具</h3><p>  ● GestióIP -一个自动的基于web的IPV4/IPV6地址管理工具<br>  ● RANCID -监控网络设备配置和维护历史变更<br>  ● rConfig -另一个网络配置管理工具</p>\n<h1 id=\"时事通讯\"><a href=\"#时事通讯\" class=\"headerlink\" title=\"时事通讯\"></a>时事通讯</h1><h3 id=\"时事通讯软件\"><a href=\"#时事通讯软件\" class=\"headerlink\" title=\"时事通讯软件\"></a>时事通讯软件</h3><p>  ● DadaMail -Perl编写的邮件列表管理器<br>  ● phpList -PHP编写的时事通讯管理器</p>\n<h1 id=\"NOSQL\"><a href=\"#NOSQL\" class=\"headerlink\" title=\"NOSQL\"></a>NOSQL</h1><h3 id=\"NOSQL数据库\"><a href=\"#NOSQL数据库\" class=\"headerlink\" title=\"NOSQL数据库\"></a>NOSQL数据库</h3><h4 id=\"●-列族\"><a href=\"#●-列族\" class=\"headerlink\" title=\"● 列族\"></a>● 列族</h4><p>  ○ Apache HBase – Hadoop数据库，一个分布式的大数据存储<br>  ○ Cassandra -分布式数据库管理系统，设计用于处理大量数据跨多个服务器。<br>  ○ Hypertable -基于c++的bigtable DBMS,节省通信，可独立或在Hadoop类似的分布式FS上运行。</p>\n<h4 id=\"●-文档存储\"><a href=\"#●-文档存储\" class=\"headerlink\" title=\"● 文档存储\"></a>● 文档存储</h4><p>  ○ CouchDB -易于使用,多主机复制的面向文档的数据库系统。<br>  ○ ElasticSearch – 基于Java的数据库,受欢迎的日志聚合,和电子邮件归档项目。<br>  ○ MongoDB – 另一个面向文档的数据库系统<br>  ○ RavenDB – 具有ACID/事物功能的基于文档的数据库<br>  ○ RethinkDB -开源分布式文档存储数据库，关注JSON</p>\n<h4 id=\"●-图\"><a href=\"#●-图\" class=\"headerlink\" title=\"● 图\"></a>● 图</h4><p>  ○ FlockDB -Twitter分布式，容错图数据库<br>  ○ Neo4j – 开源图数据库</p>\n<h4 id=\"●-键值\"><a href=\"#●-键值\" class=\"headerlink\" title=\"● 键值\"></a>● 键值</h4><p>  ○ LevelDB -Google高性能键值数据库<br>  ○ Redis – 支持网络，基于内存，键值，亦可持久化数据库<br>  ○ Riak -另一个容错的键值NoSQL数据库<br>NoSQL服务器比较: <a href=\"https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis\">https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis</a></p>\n<h3 id=\"打包\"><a href=\"#打包\" class=\"headerlink\" title=\"打包\"></a>打包</h3><p>  ● fpm – 万能的多格式包创建器<br>  ● omnibus-ruby – 全栈，跨发行版的包管理软件（Ruby）<br>  ● packman -全栈，跨发行版的包管理软件（Python）<br>  ● tito – 为git项目构建RPM</p>\n<h3 id=\"队列\"><a href=\"#队列\" class=\"headerlink\" title=\"队列\"></a>队列</h3><p>  ● BeanstalkD – A simple, fast work queue.<br>  ● BeanstalkD – 一个简单快速的工作队列<br>  ● Gearman -快速的多语言队列或任务处理平台<br>  ● NSQ – 实时分发的消息平台<br>  ● RabbitMQ -健壮的，全功能，跨发行版的队列系统<br>  ● ZeroMQ -轻量级队列系统</p>\n<h1 id=\"RDBMS\"><a href=\"#RDBMS\" class=\"headerlink\" title=\"RDBMS\"></a>RDBMS</h1><h3 id=\"关系数据库管理系统\"><a href=\"#关系数据库管理系统\" class=\"headerlink\" title=\"关系数据库管理系统\"></a>关系数据库管理系统</h3><p>  ● Firebird – 真正的全球开源数据库<br>  ● Galera -Galera MySQL集群是一个易于使用的高可用性解决方案，具有很高的系统正常运行时间,没有数据丢失,为未来的增长提供可伸缩性。<br>  ● MariaDB -MySQL的社区开发分支<br>  ● MySQL – 非常流行的RDBMS服务器<br>  ● Percona Server -增强的，可替换MySQL<br>  ● PostgreSQL – 对象关系数据库管理系统（ORDBMS)<br>  ● PostgreSQL-XL – 基于PostgreSQL的可伸缩开源数据库集群<br>  ● SQLite -自包容，弱服务器，零配置，支持事务的SQL DBS实现库</p>\n<h1 id=\"安全\"><a href=\"#安全\" class=\"headerlink\" title=\"安全\"></a>安全</h1><h3 id=\"安全工具\"><a href=\"#安全工具\" class=\"headerlink\" title=\"安全工具\"></a>安全工具</h3><p>  ● Denyhosts -阻止SSH字典攻击和暴力攻击<br>  ● Fail2Ban – 扫描日志文件，并对具有恶意行为显示的IP采取措施<br>  ● SpamAssassin -一个强大的和受欢迎的垃圾邮件过滤器，它采用多种检测技术。<br>服务发现<br>  ● Consul – Consule是伊戈尔服务发现，监控和配置的工具<br>  ● Doozerd – Doozer是一个高可用，完全一致的存储，用于少量非常重要的数据<br>  ● ZooKeeper – ZooKeeper是一个集中的服务，用于维护配置信息，命名，提供分布式同步和组服务</p>\n<h1 id=\"SMTP\"><a href=\"#SMTP\" class=\"headerlink\" title=\"SMTP\"></a>SMTP</h1><h3 id=\"SMTP服务器\"><a href=\"#SMTP服务器\" class=\"headerlink\" title=\"SMTP服务器\"></a>SMTP服务器</h3><p>  ● Exim -由剑桥大学开发的消息传输代理（MTA)<br>  ● Haraka – 用JavaScirpt编写的高性能，可插入的SMTP服务器<br>  ● MailCatcher -Ruby gem部署一个简单的SMTP MTA网关，接收所有邮件并在web接口显示。对调试和开发有用。<br>  ● Maildrop -开源的一次性邮件服务器，对开发也很有用<br>  ● OpenSMTPD -从OpenBSD项目实现的安全的SMTP服务器<br>  ● Postfix – 快速，易于管理和安全的Sendmail替代品<br>  ● Qmail – 安全的Sendmail替代品<br>  ● Sendmail -消息传输代理（MTA)</p>\n<h1 id=\"软件容器\"><a href=\"#软件容器\" class=\"headerlink\" title=\"软件容器\"></a>软件容器</h1><h3 id=\"操作系统级别的虚拟化\"><a href=\"#操作系统级别的虚拟化\" class=\"headerlink\" title=\"操作系统级别的虚拟化\"></a>操作系统级别的虚拟化</h3><p>  ● Bitnami -为web应用，开发栈和虚拟设备生产开源软件安装器或软件包<br>  ● Docker – 给开发者和系统管理员构建，发布和运行分布式应用程序的开放平台<br>  ● OpenVZ -Linux平台基于容器的虚拟化</p>\n<h1 id=\"SSH\"><a href=\"#SSH\" class=\"headerlink\" title=\"SSH\"></a>SSH</h1><h3 id=\"SSH工具\"><a href=\"#SSH工具\" class=\"headerlink\" title=\"SSH工具\"></a>SSH工具</h3><p>  ● autossh -网络中断后自动复位ssh会话。<br>  ● Cluster SSH -通过一个图形化控制台控制多个xterm窗口。<br>  ● DSH -Dancer的shell/分布式shell-从一个命令行包装执行多个远程shell命令。<br>  ● Mosh – 移动shell<br>  ● parallel-ssh -提供并行的OpenSSH版本和相关工具<br>  ● SSH Power Tool -不使用pre-shared钥匙的情况下对多个服务器同时执行命令和上传文件</p>\n<h1 id=\"统计\"><a href=\"#统计\" class=\"headerlink\" title=\"统计\"></a>统计</h1><h3 id=\"分析软件\"><a href=\"#分析软件\" class=\"headerlink\" title=\"分析软件\"></a>分析软件</h3><p>  ● Analog – 世界上最流行的日志分析工具<br>  ● GoAccess -在终端运行的开源的实时web日志分析和交互视图<br>  ● Piwik -免费和开源的web分析应用<br>  ● Webalizer – F快速免费的web服务器日志文件分析程序</p>\n<h1 id=\"工单系统\"><a href=\"#工单系统\" class=\"headerlink\" title=\"工单系统\"></a>工单系统</h1><h3 id=\"基于web的工单系统\"><a href=\"#基于web的工单系统\" class=\"headerlink\" title=\"基于web的工单系统\"></a>基于web的工单系统</h3><p>  ● Bugzilla -由Mozilla项目开发和使用过的通用缺陷跟踪和测试工具<br>  ● Cerb – 基于商业开源许可的基于组的邮件管理项目<br>  ● Flyspray – 使用PHP编写的缺陷跟踪系统<br>  ● MantisBT -另一个基于web的缺陷跟踪系统<br>  ● osTicket -开源的技术支持工单系统<br>  ● Otrs -免费和开源故障通知单系统软件包,公司,组织,或其他实体可以使用它来基于询问分配工单并跟踪进一步的沟通。<br>  ● Request Tracker -使用Perl编写的工单跟踪系统<br>  ● TheBugGenie -开源的工单系统，具有非常完备的用户权限分配</p>\n<h1 id=\"故障排除\"><a href=\"#故障排除\" class=\"headerlink\" title=\"故障排除\"></a>故障排除</h1><h3 id=\"故障排除工具\"><a href=\"#故障排除工具\" class=\"headerlink\" title=\"故障排除工具\"></a>故障排除工具</h3><p>  ● mitmproxy -ython工具，用于拦截,查看和修改网络流量。在排除某些问题是非常重要的。<br>  ● Sysdig -从一个运行的linux实例上捕获系统状态和活动，之后保存，过滤和分析<br>  ● Wireshark -世界上著名的网络协议分析工具</p>\n<h1 id=\"项目管理\"><a href=\"#项目管理\" class=\"headerlink\" title=\"项目管理\"></a>项目管理</h1><h3 id=\"基于web的项目管理和缺陷跟踪系统\"><a href=\"#基于web的项目管理和缺陷跟踪系统\" class=\"headerlink\" title=\"基于web的项目管理和缺陷跟踪系统\"></a>基于web的项目管理和缺陷跟踪系统</h3><p>  ● ChiliProject – Redmine分支<br>  ● GitBucket 用Scala编写的GitHub的克隆，单独jar安装<br>  ● GitLab -用Rbuy编写的GitHub的克隆<br>  ● Gogs -用Go编写<br>  ● OpenProject -开源的项目协作项目<br>  ● Phabricator PHP编写<br>  ● Redmine – 基于rails在rbuy编写<br>  ● The Bug Genie -PHP编写<br>  ● Trac -python编写<br>  ● 阿里云持续交付<a href=\"https://crp.aliyun.com/#page6\">https://crp.aliyun.com/#page6</a><br>redmine项目管理系统<br><a href=\"https://bitnami.com/stack/redmine/installer\">https://bitnami.com/stack/redmine/installer</a></p>\n<h1 id=\"版本控制\"><a href=\"#版本控制\" class=\"headerlink\" title=\"版本控制\"></a>版本控制</h1><h3 id=\"软件版本和版本控制\"><a href=\"#软件版本和版本控制\" class=\"headerlink\" title=\"软件版本和版本控制\"></a>软件版本和版本控制</h3><p>  ● Fossil -分布式版本控制，内建wiki和缺陷跟踪<br>  ● Git -速度很快的分布式版本控制和源代码管理<br>  ● GNU Bazaar -由Cannoicalzi赞助的分布式版本控制系统<br>  ● Mercurial -另一个版本控制<br>  ● Subversion -客户端-服务器版本控制系统<br>  ● Coding<br>  ● 码云<br>  ● 阿里云 code.aliyun.com</p>\n<h1 id=\"虚拟化\"><a href=\"#虚拟化\" class=\"headerlink\" title=\"虚拟化\"></a>虚拟化</h1><h3 id=\"虚拟化软件\"><a href=\"#虚拟化软件\" class=\"headerlink\" title=\"虚拟化软件\"></a>虚拟化软件</h3><p>  ● Ganeti -在KVM和Xen上构建的集群虚拟服务器管理软件<br>  ● KVM -Linux内核虚拟化架构<br>  ● oVirt -管理虚拟机，存储和虚拟网络<br>  ● Packer – 从单个源配置为多个平台创建相同的机器镜像<br>  ● Vagrant – 创建完整开发环境的工具<br>  ● VirtualBox -来自Oracle公司的虚拟化产品<br>  ● Xen -用于32/64位Intel/AMD(IA 64）和PowerPC 970架构的虚拟机监控器<br>  ● Docker<br>  ● cockpit  (图形化管理Docker容器)</p>\n<h1 id=\"VPN\"><a href=\"#VPN\" class=\"headerlink\" title=\"VPN\"></a>VPN</h1><h3 id=\"VPN软件\"><a href=\"#VPN软件\" class=\"headerlink\" title=\"VPN软件\"></a>VPN软件</h3><p>  ● OpenVPN -使用一个定制的安全密钥交换协议,利用SSL / TLS。<br>  ● Pritunl -基于OpenVPN的方案，易于设置<br>  ● SoftEther – 具有高级特性的多协议VPN软件<br>  ● sshuttle -穷人的VPN<br>  ● strongSwan – Linux下完整的IPsec实现<br>  ● tinc -分布式点对点VPN</p>\n<h1 id=\"物联网\"><a href=\"#物联网\" class=\"headerlink\" title=\"物联网\"></a>物联网</h1><p>● contiki   一开源物联网系统，支持tcp,vnc等协议<br>● yeelink   物联网在线平台</p>\n<h1 id=\"15款顶级开源人工智能工具推荐\"><a href=\"#15款顶级开源人工智能工具推荐\" class=\"headerlink\" title=\"15款顶级开源人工智能工具推荐\"></a>15款顶级开源人工智能工具推荐</h1><p><a href=\"https://www.oschina.net/news/77729/15top-opensource-artificial-intelligence-tools?from=20161009\">https://www.oschina.net/news/77729/15top-opensource-artificial-intelligence-tools?from=20161009</a></p>\n<hr>\n"},{"title":"Linux常见面试题","abbrlink":21385,"date":"2016-11-08T01:34:29.000Z","_content":"\n关于IT行业面试题和面试经验，推荐网站：\n\n* 1.[leetcode](https://leetcode.com/)\n* 2.[牛客网](http://www.nowcoder.com/)\n\n---\n\n\n# 填空\n\n* 1、在Linux系统中，以 **文件** 方式访问设备。\n* 2、Linux内核引导时，从文件 **/etc/fstab** 中读取要加载的文件系统\n* 3、Linux文件系统中每个文件用 **i节点** 来标识\n* 4、全部磁盘块由四个部分组成，分别为: **引导块、专用块、i节点块、数据存储块**\n* 5、前台起动的进程使用:** ctrl+c** 禁止\n* 6、安装Linux系统对硬盘分区时，必须有两种分区类型：**文件系统 和 交换分区。**\n* 7、网络管理的重要任务是 **监控 和 控制**\n* 8、内核分为 **文件管理系统、I/O管理系统 、内存管理系统 和进程管理系统** 等四个子系统。\n\n# 系统\n## 1、Linux开机启动过程？\n\n*   1）主机加电自检，加载BOLS硬件信息\n*   2）读取MBR的引导文件（grub，lilo）\n*   3）引导linux内核\n*   4）运行第一个进程init（进程号永远为1）\n*   5）进入相应的运行级别\n*   6）运行终端，输入用户名和密码\n\n## 2、Linux系统缺省的运行级别\n```\n0.关机\n1.单机用户模式 \n2.字符界面的多用户模式（不支持网络）\n3.字符界面的多用户模式\n4.未分配使用 \n5.图形界面的多用户模式 \n6.重启```\n\n## 3、Linux系统是由那些部分组成？\nLinux系统内核，shell，文件系统和应用程序四部分组成\n\n## 4、硬链接和软链接有什么区别？\n* 1）硬链接不可以跨分区，软件链可以跨分区\n* 2）硬链接指向一个i节点，而软链接则是创建一个新的i节点\n* 3）删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除\n\n## 5、如何规划一台Linux主机，步骤是怎样？\n* 1、确定机器是做什么用的，比如是做web、db、还是游戏服务器\n* 2、确定好之后，就要定系统需要怎么安装，默认安装哪些系统、分区怎么做\n* 3、需要优化系统的哪些参数，需要创建哪些用户等等的\n\n## 6、查看系统当前进程连接数？\n```\nnetstat -an | grep ESTABLISHED | wc -l```\n\n## 7、如何在/usr目录下找出大小超过10MB的文件?\n```\nfind /usr -type f -size +10240k ```\n\n## 8、添加一条到192.168.3.0/24的路由，网关为192.168.1.254？\n```\nroute add -net 192.168.3.0/24 netmask 255.255.255.0 gw 192.168.1.254```\n\n## 9、如何在/var目录下找出90天之内未被访问过的文件?\n```\nfind /var \\! -atime -90 ```\n\n## 10、如何在/home目录下找出120天之前被修改过的文件?\n```\nfind /home  -mtime +120```\n\n## 11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\n```\nfind / -name core -exec rm {} \\;```\n\n## 12、有一普通用户想在每周日凌晨零点零分定期备份/user/backup到/tmp目录下，该用户应如何做?\n```\ncrontab -e\n0 0 * * 7 /bin/cp /user/backup /tmp```\n\n# 安全\n## 1、防火墙有几张表几条链？\n4张表，5条链\n\n## 2、一台Linux系统初始化环境后需要做一些什么安全工作？\n* 1、添加普通用户登陆，禁止root用户登陆，更改SSH端口号\n* 2、服务器使用密钥登陆，禁止密码登陆\n* 3、开启防火墙，关闭SElinux，根据业务需求设置相应的防火墙规则\n* 4、装fail2ban这种防止SSH暴力破击的软件\n* 5、设置只允许公司办公网出口IP能登陆服务器（看公司实际需要）\n* 6、设置nginx_waf模块防止SQL注入\n* 7、把Web服务使用www用户启动，更改网站目录的所有者和所属组为www\n* 8、修改历史命令记录的条数为10条\n\n## 3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\n   简介：\n*    CC攻击主要是用来攻击页面的，模拟多个用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽\n*    DDOS攻击中文名叫分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动DDOS攻击，\n攻击即是通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的\n   预防： \n*    防CC/DDOS攻击这些只能是用硬件防火墙做流量清洗，将攻击流量引入黑洞\n   流量清洗这一块，主要是买ISP服务商的防攻击的服务就可以，机房一般有空余流量，\n   我们一般是买服务，毕竟攻击不会是持续长时间\n\n## 4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\n### 简介：\n*   由于程序员的水平及经验参差不齐，大部分程序员在编写代码的时候，没有对用户输入数据的合法性进行判断，\n*   应用程序存在安全隐患。用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的SQL注入。\n*   SQL注入是从正常的WWW端口访问，而且表面看起来跟一般的Web页面访问没什么区别，如果管理员没查看日志的习惯，可能被入侵很长时间都不会发觉。\n### 过滤与预防：\n数据库网页端注入这种，可以考虑使用nginx_waf做过滤与预防\n\n# 脚本\n* 1、用Shell编程，判断一文件是不是字符设备文件，如果是将其拷贝到 /dev 目录下。\n```\n#!/bin/bash\nread -p \"Input file name: \" FILENAME\nif [ -c \"$FILENAME\" ];then\n　　cp $FILENAME /dev\nfi```\n\n* 2、设计一个shell程序，添加一个新组为class1，然后添加属于这个组的30个用户，用户名的形式为stdxx，其中xx从01到30。\n```\n#!/bin/bash\ngroupadd class1\nfor((i=1;i<31;i++))\ndo\n        if [ $i -le 10 ];then\n                useradd -g class1 std0$i\n        else\n                useradd -g class1 std$i\n        fi\ndone```\n\n* 3、编写shell程序，实现自动删除50个账号的功能。账号名为stud1至stud50。\n```\n#!/bin/bash\nfor((i=1;i<51;i++))\ndo\n                userdel -r stud$i\ndone```\n\n\n---\n\n","source":"_posts/杂项/2016-11-08-Linux常见面试题.md","raw":"---\ntitle: Linux常见面试题\ncategories:\n  - 杂项\ntags:\n  - Linux常见面试题\nabbrlink: 21385\ndate: 2016-11-08 09:34:29\n---\n\n关于IT行业面试题和面试经验，推荐网站：\n\n* 1.[leetcode](https://leetcode.com/)\n* 2.[牛客网](http://www.nowcoder.com/)\n\n---\n\n\n# 填空\n\n* 1、在Linux系统中，以 **文件** 方式访问设备。\n* 2、Linux内核引导时，从文件 **/etc/fstab** 中读取要加载的文件系统\n* 3、Linux文件系统中每个文件用 **i节点** 来标识\n* 4、全部磁盘块由四个部分组成，分别为: **引导块、专用块、i节点块、数据存储块**\n* 5、前台起动的进程使用:** ctrl+c** 禁止\n* 6、安装Linux系统对硬盘分区时，必须有两种分区类型：**文件系统 和 交换分区。**\n* 7、网络管理的重要任务是 **监控 和 控制**\n* 8、内核分为 **文件管理系统、I/O管理系统 、内存管理系统 和进程管理系统** 等四个子系统。\n\n# 系统\n## 1、Linux开机启动过程？\n\n*   1）主机加电自检，加载BOLS硬件信息\n*   2）读取MBR的引导文件（grub，lilo）\n*   3）引导linux内核\n*   4）运行第一个进程init（进程号永远为1）\n*   5）进入相应的运行级别\n*   6）运行终端，输入用户名和密码\n\n## 2、Linux系统缺省的运行级别\n```\n0.关机\n1.单机用户模式 \n2.字符界面的多用户模式（不支持网络）\n3.字符界面的多用户模式\n4.未分配使用 \n5.图形界面的多用户模式 \n6.重启```\n\n## 3、Linux系统是由那些部分组成？\nLinux系统内核，shell，文件系统和应用程序四部分组成\n\n## 4、硬链接和软链接有什么区别？\n* 1）硬链接不可以跨分区，软件链可以跨分区\n* 2）硬链接指向一个i节点，而软链接则是创建一个新的i节点\n* 3）删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除\n\n## 5、如何规划一台Linux主机，步骤是怎样？\n* 1、确定机器是做什么用的，比如是做web、db、还是游戏服务器\n* 2、确定好之后，就要定系统需要怎么安装，默认安装哪些系统、分区怎么做\n* 3、需要优化系统的哪些参数，需要创建哪些用户等等的\n\n## 6、查看系统当前进程连接数？\n```\nnetstat -an | grep ESTABLISHED | wc -l```\n\n## 7、如何在/usr目录下找出大小超过10MB的文件?\n```\nfind /usr -type f -size +10240k ```\n\n## 8、添加一条到192.168.3.0/24的路由，网关为192.168.1.254？\n```\nroute add -net 192.168.3.0/24 netmask 255.255.255.0 gw 192.168.1.254```\n\n## 9、如何在/var目录下找出90天之内未被访问过的文件?\n```\nfind /var \\! -atime -90 ```\n\n## 10、如何在/home目录下找出120天之前被修改过的文件?\n```\nfind /home  -mtime +120```\n\n## 11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\n```\nfind / -name core -exec rm {} \\;```\n\n## 12、有一普通用户想在每周日凌晨零点零分定期备份/user/backup到/tmp目录下，该用户应如何做?\n```\ncrontab -e\n0 0 * * 7 /bin/cp /user/backup /tmp```\n\n# 安全\n## 1、防火墙有几张表几条链？\n4张表，5条链\n\n## 2、一台Linux系统初始化环境后需要做一些什么安全工作？\n* 1、添加普通用户登陆，禁止root用户登陆，更改SSH端口号\n* 2、服务器使用密钥登陆，禁止密码登陆\n* 3、开启防火墙，关闭SElinux，根据业务需求设置相应的防火墙规则\n* 4、装fail2ban这种防止SSH暴力破击的软件\n* 5、设置只允许公司办公网出口IP能登陆服务器（看公司实际需要）\n* 6、设置nginx_waf模块防止SQL注入\n* 7、把Web服务使用www用户启动，更改网站目录的所有者和所属组为www\n* 8、修改历史命令记录的条数为10条\n\n## 3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\n   简介：\n*    CC攻击主要是用来攻击页面的，模拟多个用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽\n*    DDOS攻击中文名叫分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动DDOS攻击，\n攻击即是通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的\n   预防： \n*    防CC/DDOS攻击这些只能是用硬件防火墙做流量清洗，将攻击流量引入黑洞\n   流量清洗这一块，主要是买ISP服务商的防攻击的服务就可以，机房一般有空余流量，\n   我们一般是买服务，毕竟攻击不会是持续长时间\n\n## 4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\n### 简介：\n*   由于程序员的水平及经验参差不齐，大部分程序员在编写代码的时候，没有对用户输入数据的合法性进行判断，\n*   应用程序存在安全隐患。用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的SQL注入。\n*   SQL注入是从正常的WWW端口访问，而且表面看起来跟一般的Web页面访问没什么区别，如果管理员没查看日志的习惯，可能被入侵很长时间都不会发觉。\n### 过滤与预防：\n数据库网页端注入这种，可以考虑使用nginx_waf做过滤与预防\n\n# 脚本\n* 1、用Shell编程，判断一文件是不是字符设备文件，如果是将其拷贝到 /dev 目录下。\n```\n#!/bin/bash\nread -p \"Input file name: \" FILENAME\nif [ -c \"$FILENAME\" ];then\n　　cp $FILENAME /dev\nfi```\n\n* 2、设计一个shell程序，添加一个新组为class1，然后添加属于这个组的30个用户，用户名的形式为stdxx，其中xx从01到30。\n```\n#!/bin/bash\ngroupadd class1\nfor((i=1;i<31;i++))\ndo\n        if [ $i -le 10 ];then\n                useradd -g class1 std0$i\n        else\n                useradd -g class1 std$i\n        fi\ndone```\n\n* 3、编写shell程序，实现自动删除50个账号的功能。账号名为stud1至stud50。\n```\n#!/bin/bash\nfor((i=1;i<51;i++))\ndo\n                userdel -r stud$i\ndone```\n\n\n---\n\n","slug":"杂项-2016-11-08-Linux常见面试题","published":1,"updated":"2016-11-21T02:17:08.964Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjmg001rd8pkp85mgfsx","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>关于IT行业面试题和面试经验，推荐网站：</p>\n<ul>\n<li>1.<a href=\"https://leetcode.com/\" target=\"_blank\" rel=\"external\">leetcode</a></li>\n<li>2.<a href=\"http://www.nowcoder.com/\" target=\"_blank\" rel=\"external\">牛客网</a></li>\n</ul>\n<hr>\n<h1 id=\"填空\"><a href=\"#填空\" class=\"headerlink\" title=\"填空\"></a>填空</h1><ul>\n<li>1、在Linux系统中，以 <strong>文件</strong> 方式访问设备。</li>\n<li>2、Linux内核引导时，从文件 <strong>/etc/fstab</strong> 中读取要加载的文件系统</li>\n<li>3、Linux文件系统中每个文件用 <strong>i节点</strong> 来标识</li>\n<li>4、全部磁盘块由四个部分组成，分别为: <strong>引导块、专用块、i节点块、数据存储块</strong></li>\n<li>5、前台起动的进程使用:<strong> ctrl+c</strong> 禁止</li>\n<li>6、安装Linux系统对硬盘分区时，必须有两种分区类型：<strong>文件系统 和 交换分区。</strong></li>\n<li>7、网络管理的重要任务是 <strong>监控 和 控制</strong></li>\n<li>8、内核分为 <strong>文件管理系统、I/O管理系统 、内存管理系统 和进程管理系统</strong> 等四个子系统。</li>\n</ul>\n<h1 id=\"系统\"><a href=\"#系统\" class=\"headerlink\" title=\"系统\"></a>系统</h1><h2 id=\"1、Linux开机启动过程？\"><a href=\"#1、Linux开机启动过程？\" class=\"headerlink\" title=\"1、Linux开机启动过程？\"></a>1、Linux开机启动过程？</h2><ul>\n<li>1）主机加电自检，加载BOLS硬件信息</li>\n<li>2）读取MBR的引导文件（grub，lilo）</li>\n<li>3）引导linux内核</li>\n<li>4）运行第一个进程init（进程号永远为1）</li>\n<li>5）进入相应的运行级别</li>\n<li>6）运行终端，输入用户名和密码</li>\n</ul>\n<h2 id=\"2、Linux系统缺省的运行级别\"><a href=\"#2、Linux系统缺省的运行级别\" class=\"headerlink\" title=\"2、Linux系统缺省的运行级别\"></a>2、Linux系统缺省的运行级别</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">0.</span>关机</div><div class=\"line\"><span class=\"number\">1.</span>单机用户模式 </div><div class=\"line\"><span class=\"number\">2.</span>字符界面的多用户模式（不支持网络）</div><div class=\"line\"><span class=\"number\">3.</span>字符界面的多用户模式</div><div class=\"line\"><span class=\"number\">4.</span>未分配使用 </div><div class=\"line\"><span class=\"number\">5.</span>图形界面的多用户模式 </div><div class=\"line\"><span class=\"number\">6.</span>重启</div></pre></td></tr></table></figure>\n<h2 id=\"3、Linux系统是由那些部分组成？\"><a href=\"#3、Linux系统是由那些部分组成？\" class=\"headerlink\" title=\"3、Linux系统是由那些部分组成？\"></a>3、Linux系统是由那些部分组成？</h2><p>Linux系统内核，shell，文件系统和应用程序四部分组成</p>\n<h2 id=\"4、硬链接和软链接有什么区别？\"><a href=\"#4、硬链接和软链接有什么区别？\" class=\"headerlink\" title=\"4、硬链接和软链接有什么区别？\"></a>4、硬链接和软链接有什么区别？</h2><ul>\n<li>1）硬链接不可以跨分区，软件链可以跨分区</li>\n<li>2）硬链接指向一个i节点，而软链接则是创建一个新的i节点</li>\n<li>3）删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除</li>\n</ul>\n<h2 id=\"5、如何规划一台Linux主机，步骤是怎样？\"><a href=\"#5、如何规划一台Linux主机，步骤是怎样？\" class=\"headerlink\" title=\"5、如何规划一台Linux主机，步骤是怎样？\"></a>5、如何规划一台Linux主机，步骤是怎样？</h2><ul>\n<li>1、确定机器是做什么用的，比如是做web、db、还是游戏服务器</li>\n<li>2、确定好之后，就要定系统需要怎么安装，默认安装哪些系统、分区怎么做</li>\n<li>3、需要优化系统的哪些参数，需要创建哪些用户等等的</li>\n</ul>\n<h2 id=\"6、查看系统当前进程连接数？\"><a href=\"#6、查看系统当前进程连接数？\" class=\"headerlink\" title=\"6、查看系统当前进程连接数？\"></a>6、查看系统当前进程连接数？</h2><figure class=\"highlight coq\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">netstat -an | <span class=\"type\">grep</span> ESTABLISHED | <span class=\"type\">wc</span> -l</div></pre></td></tr></table></figure>\n<h2 id=\"7、如何在-usr目录下找出大小超过10MB的文件\"><a href=\"#7、如何在-usr目录下找出大小超过10MB的文件\" class=\"headerlink\" title=\"7、如何在/usr目录下找出大小超过10MB的文件?\"></a>7、如何在/usr目录下找出大小超过10MB的文件?</h2><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> /usr -<span class=\"built_in\">type</span> f -<span class=\"built_in\">size</span> +<span class=\"number\">10240</span>k</div></pre></td></tr></table></figure>\n<h2 id=\"8、添加一条到192-168-3-0-24的路由，网关为192-168-1-254？\"><a href=\"#8、添加一条到192-168-3-0-24的路由，网关为192-168-1-254？\" class=\"headerlink\" title=\"8、添加一条到192.168.3.0/24的路由，网关为192.168.1.254？\"></a>8、添加一条到192.168.3.0/24的路由，网关为192.168.1.254？</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">route add -net <span class=\"number\">192.168</span><span class=\"number\">.3</span><span class=\"number\">.0</span>/<span class=\"number\">24</span> netmask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span> gw <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.254</span></div></pre></td></tr></table></figure>\n<h2 id=\"9、如何在-var目录下找出90天之内未被访问过的文件\"><a href=\"#9、如何在-var目录下找出90天之内未被访问过的文件\" class=\"headerlink\" title=\"9、如何在/var目录下找出90天之内未被访问过的文件?\"></a>9、如何在/var目录下找出90天之内未被访问过的文件?</h2><figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> /<span class=\"built_in\">var</span> \\! -atime -<span class=\"number\">90</span></div></pre></td></tr></table></figure>\n<h2 id=\"10、如何在-home目录下找出120天之前被修改过的文件\"><a href=\"#10、如何在-home目录下找出120天之前被修改过的文件\" class=\"headerlink\" title=\"10、如何在/home目录下找出120天之前被修改过的文件?\"></a>10、如何在/home目录下找出120天之前被修改过的文件?</h2><figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> /<span class=\"built_in\">home</span>  -mtime +<span class=\"number\">120</span></div></pre></td></tr></table></figure>\n<h2 id=\"11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\"><a href=\"#11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\" class=\"headerlink\" title=\"11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\"></a>11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。</h2><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> / -<span class=\"built_in\">name</span> core -<span class=\"built_in\">exec</span> rm &#123;&#125; \\;</div></pre></td></tr></table></figure>\n<h2 id=\"12、有一普通用户想在每周日凌晨零点零分定期备份-user-backup到-tmp目录下，该用户应如何做\"><a href=\"#12、有一普通用户想在每周日凌晨零点零分定期备份-user-backup到-tmp目录下，该用户应如何做\" class=\"headerlink\" title=\"12、有一普通用户想在每周日凌晨零点零分定期备份/user/backup到/tmp目录下，该用户应如何做?\"></a>12、有一普通用户想在每周日凌晨零点零分定期备份/user/backup到/tmp目录下，该用户应如何做?</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">crontab -e</div><div class=\"line\"><span class=\"number\">0</span> <span class=\"number\">0</span> * * <span class=\"number\">7</span> /bin/cp /user/backup /tmp</div></pre></td></tr></table></figure>\n<h1 id=\"安全\"><a href=\"#安全\" class=\"headerlink\" title=\"安全\"></a>安全</h1><h2 id=\"1、防火墙有几张表几条链？\"><a href=\"#1、防火墙有几张表几条链？\" class=\"headerlink\" title=\"1、防火墙有几张表几条链？\"></a>1、防火墙有几张表几条链？</h2><p>4张表，5条链</p>\n<h2 id=\"2、一台Linux系统初始化环境后需要做一些什么安全工作？\"><a href=\"#2、一台Linux系统初始化环境后需要做一些什么安全工作？\" class=\"headerlink\" title=\"2、一台Linux系统初始化环境后需要做一些什么安全工作？\"></a>2、一台Linux系统初始化环境后需要做一些什么安全工作？</h2><ul>\n<li>1、添加普通用户登陆，禁止root用户登陆，更改SSH端口号</li>\n<li>2、服务器使用密钥登陆，禁止密码登陆</li>\n<li>3、开启防火墙，关闭SElinux，根据业务需求设置相应的防火墙规则</li>\n<li>4、装fail2ban这种防止SSH暴力破击的软件</li>\n<li>5、设置只允许公司办公网出口IP能登陆服务器（看公司实际需要）</li>\n<li>6、设置nginx_waf模块防止SQL注入</li>\n<li>7、把Web服务使用www用户启动，更改网站目录的所有者和所属组为www</li>\n<li>8、修改历史命令记录的条数为10条</li>\n</ul>\n<h2 id=\"3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\"><a href=\"#3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\" class=\"headerlink\" title=\"3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\"></a>3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？</h2><p>   简介：</p>\n<ul>\n<li>CC攻击主要是用来攻击页面的，模拟多个用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽</li>\n<li>DDOS攻击中文名叫分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动DDOS攻击，<br>攻击即是通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的<br>预防： </li>\n<li>防CC/DDOS攻击这些只能是用硬件防火墙做流量清洗，将攻击流量引入黑洞<br>流量清洗这一块，主要是买ISP服务商的防攻击的服务就可以，机房一般有空余流量，<br>我们一般是买服务，毕竟攻击不会是持续长时间</li>\n</ul>\n<h2 id=\"4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\"><a href=\"#4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\" class=\"headerlink\" title=\"4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\"></a>4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？</h2><h3 id=\"简介：\"><a href=\"#简介：\" class=\"headerlink\" title=\"简介：\"></a>简介：</h3><ul>\n<li>由于程序员的水平及经验参差不齐，大部分程序员在编写代码的时候，没有对用户输入数据的合法性进行判断，</li>\n<li>应用程序存在安全隐患。用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的SQL注入。</li>\n<li>SQL注入是从正常的WWW端口访问，而且表面看起来跟一般的Web页面访问没什么区别，如果管理员没查看日志的习惯，可能被入侵很长时间都不会发觉。<h3 id=\"过滤与预防：\"><a href=\"#过滤与预防：\" class=\"headerlink\" title=\"过滤与预防：\"></a>过滤与预防：</h3>数据库网页端注入这种，可以考虑使用nginx_waf做过滤与预防</li>\n</ul>\n<h1 id=\"脚本\"><a href=\"#脚本\" class=\"headerlink\" title=\"脚本\"></a>脚本</h1><ul>\n<li><p>1、用Shell编程，判断一文件是不是字符设备文件，如果是将其拷贝到 /dev 目录下。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"built_in\">read</span> -p <span class=\"string\">\"Input file name: \"</span> FILENAME</div><div class=\"line\"><span class=\"keyword\">if</span> [ -c <span class=\"string\">\"<span class=\"variable\">$FILENAME</span>\"</span> ];<span class=\"keyword\">then</span></div><div class=\"line\">　　cp <span class=\"variable\">$FILENAME</span> /dev</div><div class=\"line\"><span class=\"keyword\">fi</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>2、设计一个shell程序，添加一个新组为class1，然后添加属于这个组的30个用户，用户名的形式为stdxx，其中xx从01到30。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\">groupadd class1</div><div class=\"line\"><span class=\"keyword\">for</span>((i=1;i&lt;31;i++))</div><div class=\"line\"><span class=\"keyword\">do</span></div><div class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -le 10 ];<span class=\"keyword\">then</span></div><div class=\"line\">                useradd -g class1 std0<span class=\"variable\">$i</span></div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">                useradd -g class1 std<span class=\"variable\">$i</span></div><div class=\"line\">        <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">done</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>3、编写shell程序，实现自动删除50个账号的功能。账号名为stud1至stud50。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"keyword\">for</span>((i=1;i&lt;51;i++))</div><div class=\"line\"><span class=\"keyword\">do</span></div><div class=\"line\">                userdel -r stud<span class=\"variable\">$i</span></div><div class=\"line\"><span class=\"keyword\">done</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n","excerpt":"","more":"<p>关于IT行业面试题和面试经验，推荐网站：</p>\n<ul>\n<li>1.<a href=\"https://leetcode.com/\">leetcode</a></li>\n<li>2.<a href=\"http://www.nowcoder.com/\">牛客网</a></li>\n</ul>\n<hr>\n<h1 id=\"填空\"><a href=\"#填空\" class=\"headerlink\" title=\"填空\"></a>填空</h1><ul>\n<li>1、在Linux系统中，以 <strong>文件</strong> 方式访问设备。</li>\n<li>2、Linux内核引导时，从文件 <strong>/etc/fstab</strong> 中读取要加载的文件系统</li>\n<li>3、Linux文件系统中每个文件用 <strong>i节点</strong> 来标识</li>\n<li>4、全部磁盘块由四个部分组成，分别为: <strong>引导块、专用块、i节点块、数据存储块</strong></li>\n<li>5、前台起动的进程使用:<strong> ctrl+c</strong> 禁止</li>\n<li>6、安装Linux系统对硬盘分区时，必须有两种分区类型：<strong>文件系统 和 交换分区。</strong></li>\n<li>7、网络管理的重要任务是 <strong>监控 和 控制</strong></li>\n<li>8、内核分为 <strong>文件管理系统、I/O管理系统 、内存管理系统 和进程管理系统</strong> 等四个子系统。</li>\n</ul>\n<h1 id=\"系统\"><a href=\"#系统\" class=\"headerlink\" title=\"系统\"></a>系统</h1><h2 id=\"1、Linux开机启动过程？\"><a href=\"#1、Linux开机启动过程？\" class=\"headerlink\" title=\"1、Linux开机启动过程？\"></a>1、Linux开机启动过程？</h2><ul>\n<li>1）主机加电自检，加载BOLS硬件信息</li>\n<li>2）读取MBR的引导文件（grub，lilo）</li>\n<li>3）引导linux内核</li>\n<li>4）运行第一个进程init（进程号永远为1）</li>\n<li>5）进入相应的运行级别</li>\n<li>6）运行终端，输入用户名和密码</li>\n</ul>\n<h2 id=\"2、Linux系统缺省的运行级别\"><a href=\"#2、Linux系统缺省的运行级别\" class=\"headerlink\" title=\"2、Linux系统缺省的运行级别\"></a>2、Linux系统缺省的运行级别</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">0.</span>关机</div><div class=\"line\"><span class=\"number\">1.</span>单机用户模式 </div><div class=\"line\"><span class=\"number\">2.</span>字符界面的多用户模式（不支持网络）</div><div class=\"line\"><span class=\"number\">3.</span>字符界面的多用户模式</div><div class=\"line\"><span class=\"number\">4.</span>未分配使用 </div><div class=\"line\"><span class=\"number\">5.</span>图形界面的多用户模式 </div><div class=\"line\"><span class=\"number\">6.</span>重启</div></pre></td></tr></table></figure>\n<h2 id=\"3、Linux系统是由那些部分组成？\"><a href=\"#3、Linux系统是由那些部分组成？\" class=\"headerlink\" title=\"3、Linux系统是由那些部分组成？\"></a>3、Linux系统是由那些部分组成？</h2><p>Linux系统内核，shell，文件系统和应用程序四部分组成</p>\n<h2 id=\"4、硬链接和软链接有什么区别？\"><a href=\"#4、硬链接和软链接有什么区别？\" class=\"headerlink\" title=\"4、硬链接和软链接有什么区别？\"></a>4、硬链接和软链接有什么区别？</h2><ul>\n<li>1）硬链接不可以跨分区，软件链可以跨分区</li>\n<li>2）硬链接指向一个i节点，而软链接则是创建一个新的i节点</li>\n<li>3）删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除</li>\n</ul>\n<h2 id=\"5、如何规划一台Linux主机，步骤是怎样？\"><a href=\"#5、如何规划一台Linux主机，步骤是怎样？\" class=\"headerlink\" title=\"5、如何规划一台Linux主机，步骤是怎样？\"></a>5、如何规划一台Linux主机，步骤是怎样？</h2><ul>\n<li>1、确定机器是做什么用的，比如是做web、db、还是游戏服务器</li>\n<li>2、确定好之后，就要定系统需要怎么安装，默认安装哪些系统、分区怎么做</li>\n<li>3、需要优化系统的哪些参数，需要创建哪些用户等等的</li>\n</ul>\n<h2 id=\"6、查看系统当前进程连接数？\"><a href=\"#6、查看系统当前进程连接数？\" class=\"headerlink\" title=\"6、查看系统当前进程连接数？\"></a>6、查看系统当前进程连接数？</h2><figure class=\"highlight coq\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">netstat -an | <span class=\"type\">grep</span> ESTABLISHED | <span class=\"type\">wc</span> -l</div></pre></td></tr></table></figure>\n<h2 id=\"7、如何在-usr目录下找出大小超过10MB的文件\"><a href=\"#7、如何在-usr目录下找出大小超过10MB的文件\" class=\"headerlink\" title=\"7、如何在/usr目录下找出大小超过10MB的文件?\"></a>7、如何在/usr目录下找出大小超过10MB的文件?</h2><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> /usr -<span class=\"built_in\">type</span> f -<span class=\"built_in\">size</span> +<span class=\"number\">10240</span>k</div></pre></td></tr></table></figure>\n<h2 id=\"8、添加一条到192-168-3-0-24的路由，网关为192-168-1-254？\"><a href=\"#8、添加一条到192-168-3-0-24的路由，网关为192-168-1-254？\" class=\"headerlink\" title=\"8、添加一条到192.168.3.0/24的路由，网关为192.168.1.254？\"></a>8、添加一条到192.168.3.0/24的路由，网关为192.168.1.254？</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">route add -net <span class=\"number\">192.168</span><span class=\"number\">.3</span><span class=\"number\">.0</span>/<span class=\"number\">24</span> netmask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span> gw <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.254</span></div></pre></td></tr></table></figure>\n<h2 id=\"9、如何在-var目录下找出90天之内未被访问过的文件\"><a href=\"#9、如何在-var目录下找出90天之内未被访问过的文件\" class=\"headerlink\" title=\"9、如何在/var目录下找出90天之内未被访问过的文件?\"></a>9、如何在/var目录下找出90天之内未被访问过的文件?</h2><figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> /<span class=\"built_in\">var</span> \\! -atime -<span class=\"number\">90</span></div></pre></td></tr></table></figure>\n<h2 id=\"10、如何在-home目录下找出120天之前被修改过的文件\"><a href=\"#10、如何在-home目录下找出120天之前被修改过的文件\" class=\"headerlink\" title=\"10、如何在/home目录下找出120天之前被修改过的文件?\"></a>10、如何在/home目录下找出120天之前被修改过的文件?</h2><figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> /<span class=\"built_in\">home</span>  -mtime +<span class=\"number\">120</span></div></pre></td></tr></table></figure>\n<h2 id=\"11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\"><a href=\"#11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\" class=\"headerlink\" title=\"11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。\"></a>11、在整个目录树下查找文件“core”，如发现则无需提示直接删除它们。</h2><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> / -<span class=\"built_in\">name</span> core -<span class=\"built_in\">exec</span> rm &#123;&#125; \\;</div></pre></td></tr></table></figure>\n<h2 id=\"12、有一普通用户想在每周日凌晨零点零分定期备份-user-backup到-tmp目录下，该用户应如何做\"><a href=\"#12、有一普通用户想在每周日凌晨零点零分定期备份-user-backup到-tmp目录下，该用户应如何做\" class=\"headerlink\" title=\"12、有一普通用户想在每周日凌晨零点零分定期备份/user/backup到/tmp目录下，该用户应如何做?\"></a>12、有一普通用户想在每周日凌晨零点零分定期备份/user/backup到/tmp目录下，该用户应如何做?</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">crontab -e</div><div class=\"line\"><span class=\"number\">0</span> <span class=\"number\">0</span> * * <span class=\"number\">7</span> /bin/cp /user/backup /tmp</div></pre></td></tr></table></figure>\n<h1 id=\"安全\"><a href=\"#安全\" class=\"headerlink\" title=\"安全\"></a>安全</h1><h2 id=\"1、防火墙有几张表几条链？\"><a href=\"#1、防火墙有几张表几条链？\" class=\"headerlink\" title=\"1、防火墙有几张表几条链？\"></a>1、防火墙有几张表几条链？</h2><p>4张表，5条链</p>\n<h2 id=\"2、一台Linux系统初始化环境后需要做一些什么安全工作？\"><a href=\"#2、一台Linux系统初始化环境后需要做一些什么安全工作？\" class=\"headerlink\" title=\"2、一台Linux系统初始化环境后需要做一些什么安全工作？\"></a>2、一台Linux系统初始化环境后需要做一些什么安全工作？</h2><ul>\n<li>1、添加普通用户登陆，禁止root用户登陆，更改SSH端口号</li>\n<li>2、服务器使用密钥登陆，禁止密码登陆</li>\n<li>3、开启防火墙，关闭SElinux，根据业务需求设置相应的防火墙规则</li>\n<li>4、装fail2ban这种防止SSH暴力破击的软件</li>\n<li>5、设置只允许公司办公网出口IP能登陆服务器（看公司实际需要）</li>\n<li>6、设置nginx_waf模块防止SQL注入</li>\n<li>7、把Web服务使用www用户启动，更改网站目录的所有者和所属组为www</li>\n<li>8、修改历史命令记录的条数为10条</li>\n</ul>\n<h2 id=\"3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\"><a href=\"#3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\" class=\"headerlink\" title=\"3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？\"></a>3、什么叫CC攻击？什么叫DDOS攻击？怎么预防CC攻击和DDOS攻击？</h2><p>   简介：</p>\n<ul>\n<li>CC攻击主要是用来攻击页面的，模拟多个用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽</li>\n<li>DDOS攻击中文名叫分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动DDOS攻击，<br>攻击即是通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的<br>预防： </li>\n<li>防CC/DDOS攻击这些只能是用硬件防火墙做流量清洗，将攻击流量引入黑洞<br>流量清洗这一块，主要是买ISP服务商的防攻击的服务就可以，机房一般有空余流量，<br>我们一般是买服务，毕竟攻击不会是持续长时间</li>\n</ul>\n<h2 id=\"4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\"><a href=\"#4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\" class=\"headerlink\" title=\"4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？\"></a>4、什么是网站数据库注入？怎么过滤与预防网站数据库注入？</h2><h3 id=\"简介：\"><a href=\"#简介：\" class=\"headerlink\" title=\"简介：\"></a>简介：</h3><ul>\n<li>由于程序员的水平及经验参差不齐，大部分程序员在编写代码的时候，没有对用户输入数据的合法性进行判断，</li>\n<li>应用程序存在安全隐患。用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的SQL注入。</li>\n<li>SQL注入是从正常的WWW端口访问，而且表面看起来跟一般的Web页面访问没什么区别，如果管理员没查看日志的习惯，可能被入侵很长时间都不会发觉。<h3 id=\"过滤与预防：\"><a href=\"#过滤与预防：\" class=\"headerlink\" title=\"过滤与预防：\"></a>过滤与预防：</h3>数据库网页端注入这种，可以考虑使用nginx_waf做过滤与预防</li>\n</ul>\n<h1 id=\"脚本\"><a href=\"#脚本\" class=\"headerlink\" title=\"脚本\"></a>脚本</h1><ul>\n<li><p>1、用Shell编程，判断一文件是不是字符设备文件，如果是将其拷贝到 /dev 目录下。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"built_in\">read</span> -p <span class=\"string\">\"Input file name: \"</span> FILENAME</div><div class=\"line\"><span class=\"keyword\">if</span> [ -c <span class=\"string\">\"<span class=\"variable\">$FILENAME</span>\"</span> ];<span class=\"keyword\">then</span></div><div class=\"line\">　　cp <span class=\"variable\">$FILENAME</span> /dev</div><div class=\"line\"><span class=\"keyword\">fi</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>2、设计一个shell程序，添加一个新组为class1，然后添加属于这个组的30个用户，用户名的形式为stdxx，其中xx从01到30。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\">groupadd class1</div><div class=\"line\"><span class=\"keyword\">for</span>((i=1;i&lt;31;i++))</div><div class=\"line\"><span class=\"keyword\">do</span></div><div class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -le 10 ];<span class=\"keyword\">then</span></div><div class=\"line\">                useradd -g class1 std0<span class=\"variable\">$i</span></div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">                useradd -g class1 std<span class=\"variable\">$i</span></div><div class=\"line\">        <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">done</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>3、编写shell程序，实现自动删除50个账号的功能。账号名为stud1至stud50。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"keyword\">for</span>((i=1;i&lt;51;i++))</div><div class=\"line\"><span class=\"keyword\">do</span></div><div class=\"line\">                userdel -r stud<span class=\"variable\">$i</span></div><div class=\"line\"><span class=\"keyword\">done</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n"},{"title":"博客中插入音乐_视频","top":10,"abbrlink":27125,"date":"2016-12-06T08:18:15.000Z","keywords":"博客中插入音乐、视频","_content":"\n本文是参考Raintons的博文写的。感谢Raintons的文章。\n\n# Markdown 通用插入方法\nMarkdown 作为轻量级的标记语言，兼容 html 语法，可以直接在 Markdown 文档中使用 html 语法。\n大部分音乐、视频网站都可以直接生成播放器代码(尽量用直接生成的代码)，直接粘贴到 Markdown 文档中即可。有些标签不支持 https，尽量选支持https的网站，因为**https网站加载http资源会被屏蔽掉，简单的在http地址后加个s测试即可知道是否支持https** 。\n\n\n**Html居中代码**：\n`<center>我是内容，替换我</center>`\n或`<blockquote class=\"blockquote-center\">我是内容，替换我</blockquote>`\n\n\n## 视频：\n```\n<video width=\"480\" height=\"320\" controls>\n<source src=\"movie.mp4\">\n</video>```\n\n经测试不支持内嵌优酷之类的flash播放，**src**后面的地址要指向视频文件。**width**和**height**最好填写好对应视频的大小，不然周围有边框不好看。视频居中要用`<blockquote class=\"blockquote-center\">我是内容，替换我</blockquote>`才行。下面给大家偷偷放女票的片片，还没告诉她，希望不要打我(=^ ^=)\n<blockquote class=\"blockquote-center\">\n<video width=\"544\" height=\"962\" controls>\n<source src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161207/085157022.mp4\">\n</video>\n</blockquote>\n\n网站生成代码，点分享即可生成播放代码。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161206/173516104.png)\n<iframe height=498 width=510 src='http://player.youku.com/embed/XNjIyMjY4MjM2' frameborder=0 'allowfullscreen'></iframe>\n\n---\n## 音频：\n音频分享和视频分享是一样的，也能生成外链播放器代码（有多种标签自由选择），只有网易云音乐是单独有生成按钮的。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161206/164604641.png)\n\n<center>\n<embed src=\"https://music.163.com/style/swf/widget.swf?sid=450980312&type=0&auto=0&width=310&height=430\" width=\"330\" height=\"450\"  allowNetworking=\"all\"></embed>\n</center>\n\n\n---\n# dplayer插件插入\n## 安装\n两款插件基于 DIYgod 编写的 html5 播放器 APlayer 和 DPlayer 开发。\n\n首先安装两款插件\n```\nnpm install hexo-tag-dplayer --save\nnpm install hexo-tag-aplayer --save```\n安装到最后 npm 可能会报错，忽视即可。\n\n安装成功后，在 Markdown 文档中添加 APlayer 和 DPlayer 标签即可,比如添加如下代码使用 APlayer 和 DPlayer(此处无耻的copy代码)：\n```\n{% aplayer \"Caffeine\" \"Jeff Williams\" \"http://7xq131.com1.z0.glb.clouddn.com/Preparation.mp3\" \"autoplay\" %}\n{% dplayer \"url=http://devtest.qiniudn.com/若能绽放光芒.mp4\" \"api=http://dplayer.daoapp.io\" \"pic=http://devtest.qiniudn.com/若能绽放光芒.png\" \"id=9E2E3368B56CDBB4\" \"loop=yes\" \"theme=#FADFA3\" \"autoplay=false\" \"token=tokendemo\" %}```\n`hexo s`时如果报错，看看报什么错，**报找不到目录**或**找不到文件**错误就按提示创建目录或文件（文件内容可以为空，但必须存在该文件）\n\n---\n## 音频\n参考：\nhttps://github.com/DIYgod/APlayer\nhttps://github.com/grzhan/hexo-tag-aplayer#upstream-issue\n\n{% aplayer \"Apple Stone\" \"Lost\" autoplay :music=\"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\" %}\n\n---\n## 视频：\n参考：\nhttps://github.com/NextMoe/hexo-tag-dplayer\nhttps://github.com/DIYgod/DPlayer\n\n{% dplayer \"url=http://devtest.qiniudn.com/若能绽放光芒.mp4\" \"addition=https://dplayer.daoapp.io/bilibili?aid=4157142\" \"api=http://dplayer.donot.help/dplayerpy\" \"pic=http://devtest.qiniudn.com/若能绽放光芒.png\" \"id=2622668\" \"loop=yes\" \"theme=#FADFA3\" \"autoplay=false\" \"width=233px\" %}\n\n\n---\n# HTML标签和dplayer对比\n\n|项目|使用难度|是否支持https|是否使用html5|\n|---|---|---|---|---|---|---|\n|插入html语言|小|大部分不支持|大部分使用Flash|\n|使用Hexo插件|中等|支持|使用html5|\n\n---\n此功能太实用了，看了Raintons的博文不禁心动，自己尝试了一番，感觉甚好，原文地址：http://login926.top/2016/07/20/HexoMedia/\n\n---","source":"_posts/杂项/2016-12-06-博客中插入音乐-视频.md","raw":"---\ntitle: 博客中插入音乐_视频\ncategories:\n  - 杂项\ntags:\n  - 博客中插入音乐_视频\ntop: 10\nabbrlink: 27125\ndate: 2016-12-06 16:18:15\nkeywords: 博客中插入音乐、视频\n---\n\n本文是参考Raintons的博文写的。感谢Raintons的文章。\n\n# Markdown 通用插入方法\nMarkdown 作为轻量级的标记语言，兼容 html 语法，可以直接在 Markdown 文档中使用 html 语法。\n大部分音乐、视频网站都可以直接生成播放器代码(尽量用直接生成的代码)，直接粘贴到 Markdown 文档中即可。有些标签不支持 https，尽量选支持https的网站，因为**https网站加载http资源会被屏蔽掉，简单的在http地址后加个s测试即可知道是否支持https** 。\n\n\n**Html居中代码**：\n`<center>我是内容，替换我</center>`\n或`<blockquote class=\"blockquote-center\">我是内容，替换我</blockquote>`\n\n\n## 视频：\n```\n<video width=\"480\" height=\"320\" controls>\n<source src=\"movie.mp4\">\n</video>```\n\n经测试不支持内嵌优酷之类的flash播放，**src**后面的地址要指向视频文件。**width**和**height**最好填写好对应视频的大小，不然周围有边框不好看。视频居中要用`<blockquote class=\"blockquote-center\">我是内容，替换我</blockquote>`才行。下面给大家偷偷放女票的片片，还没告诉她，希望不要打我(=^ ^=)\n<blockquote class=\"blockquote-center\">\n<video width=\"544\" height=\"962\" controls>\n<source src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161207/085157022.mp4\">\n</video>\n</blockquote>\n\n网站生成代码，点分享即可生成播放代码。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161206/173516104.png)\n<iframe height=498 width=510 src='http://player.youku.com/embed/XNjIyMjY4MjM2' frameborder=0 'allowfullscreen'></iframe>\n\n---\n## 音频：\n音频分享和视频分享是一样的，也能生成外链播放器代码（有多种标签自由选择），只有网易云音乐是单独有生成按钮的。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161206/164604641.png)\n\n<center>\n<embed src=\"https://music.163.com/style/swf/widget.swf?sid=450980312&type=0&auto=0&width=310&height=430\" width=\"330\" height=\"450\"  allowNetworking=\"all\"></embed>\n</center>\n\n\n---\n# dplayer插件插入\n## 安装\n两款插件基于 DIYgod 编写的 html5 播放器 APlayer 和 DPlayer 开发。\n\n首先安装两款插件\n```\nnpm install hexo-tag-dplayer --save\nnpm install hexo-tag-aplayer --save```\n安装到最后 npm 可能会报错，忽视即可。\n\n安装成功后，在 Markdown 文档中添加 APlayer 和 DPlayer 标签即可,比如添加如下代码使用 APlayer 和 DPlayer(此处无耻的copy代码)：\n```\n{% aplayer \"Caffeine\" \"Jeff Williams\" \"http://7xq131.com1.z0.glb.clouddn.com/Preparation.mp3\" \"autoplay\" %}\n{% dplayer \"url=http://devtest.qiniudn.com/若能绽放光芒.mp4\" \"api=http://dplayer.daoapp.io\" \"pic=http://devtest.qiniudn.com/若能绽放光芒.png\" \"id=9E2E3368B56CDBB4\" \"loop=yes\" \"theme=#FADFA3\" \"autoplay=false\" \"token=tokendemo\" %}```\n`hexo s`时如果报错，看看报什么错，**报找不到目录**或**找不到文件**错误就按提示创建目录或文件（文件内容可以为空，但必须存在该文件）\n\n---\n## 音频\n参考：\nhttps://github.com/DIYgod/APlayer\nhttps://github.com/grzhan/hexo-tag-aplayer#upstream-issue\n\n{% aplayer \"Apple Stone\" \"Lost\" autoplay :music=\"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\" %}\n\n---\n## 视频：\n参考：\nhttps://github.com/NextMoe/hexo-tag-dplayer\nhttps://github.com/DIYgod/DPlayer\n\n{% dplayer \"url=http://devtest.qiniudn.com/若能绽放光芒.mp4\" \"addition=https://dplayer.daoapp.io/bilibili?aid=4157142\" \"api=http://dplayer.donot.help/dplayerpy\" \"pic=http://devtest.qiniudn.com/若能绽放光芒.png\" \"id=2622668\" \"loop=yes\" \"theme=#FADFA3\" \"autoplay=false\" \"width=233px\" %}\n\n\n---\n# HTML标签和dplayer对比\n\n|项目|使用难度|是否支持https|是否使用html5|\n|---|---|---|---|---|---|---|\n|插入html语言|小|大部分不支持|大部分使用Flash|\n|使用Hexo插件|中等|支持|使用html5|\n\n---\n此功能太实用了，看了Raintons的博文不禁心动，自己尝试了一番，感觉甚好，原文地址：http://login926.top/2016/07/20/HexoMedia/\n\n---","slug":"杂项-2016-12-06-博客中插入音乐-视频","published":1,"updated":"2016-12-07T01:18:12.267Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjmk001ud8pk3nrridhy","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>本文是参考Raintons的博文写的。感谢Raintons的文章。</p>\n<h1 id=\"Markdown-通用插入方法\"><a href=\"#Markdown-通用插入方法\" class=\"headerlink\" title=\"Markdown 通用插入方法\"></a>Markdown 通用插入方法</h1><p>Markdown 作为轻量级的标记语言，兼容 html 语法，可以直接在 Markdown 文档中使用 html 语法。<br>大部分音乐、视频网站都可以直接生成播放器代码(尽量用直接生成的代码)，直接粘贴到 Markdown 文档中即可。有些标签不支持 https，尽量选支持https的网站，因为<strong>https网站加载http资源会被屏蔽掉，简单的在http地址后加个s测试即可知道是否支持https</strong> 。</p>\n<p><strong>Html居中代码</strong>：<br><code>&lt;center&gt;我是内容，替换我&lt;/center&gt;</code><br>或<code>&lt;blockquote class=&quot;blockquote-center&quot;&gt;我是内容，替换我&lt;/blockquote&gt;</code></p>\n<h2 id=\"视频：\"><a href=\"#视频：\" class=\"headerlink\" title=\"视频：\"></a>视频：</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">width</span>=<span class=\"string\">\"480\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"320\"</span> <span class=\"attr\">controls</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">src</span>=<span class=\"string\">\"movie.mp4\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>经测试不支持内嵌优酷之类的flash播放，<strong>src</strong>后面的地址要指向视频文件。<strong>width</strong>和<strong>height</strong>最好填写好对应视频的大小，不然周围有边框不好看。视频居中要用<code>&lt;blockquote class=&quot;blockquote-center&quot;&gt;我是内容，替换我&lt;/blockquote&gt;</code>才行。下面给大家偷偷放女票的片片，还没告诉她，希望不要打我(=^ ^=)</p>\n<blockquote class=\"blockquote-center\"><br><video width=\"544\" height=\"962\" controls><br><source src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161207/085157022.mp4\"><br></video><br></blockquote>\n\n<p>网站生成代码，点分享即可生成播放代码。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161206/173516104.png\" alt=\"mark\"></p>\n<iframe height=\"498\" width=\"510\" src=\"http://player.youku.com/embed/XNjIyMjY4MjM2\" frameborder=\"0\" 'allowfullscreen'=\"\"></iframe>\n\n<hr>\n<h2 id=\"音频：\"><a href=\"#音频：\" class=\"headerlink\" title=\"音频：\"></a>音频：</h2><p>音频分享和视频分享是一样的，也能生成外链播放器代码（有多种标签自由选择），只有网易云音乐是单独有生成按钮的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161206/164604641.png\" alt=\"mark\"></p>\n<center><br><embed src=\"https://music.163.com/style/swf/widget.swf?sid=450980312&type=0&auto=0&width=310&height=430\" width=\"330\" height=\"450\" allownetworking=\"all\"><br></center>\n\n\n<hr>\n<h1 id=\"dplayer插件插入\"><a href=\"#dplayer插件插入\" class=\"headerlink\" title=\"dplayer插件插入\"></a>dplayer插件插入</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>两款插件基于 DIYgod 编写的 html5 播放器 APlayer 和 DPlayer 开发。</p>\n<p>首先安装两款插件<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-tag-dplayer <span class=\"comment\">--save</span></div><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-tag-aplayer <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>安装到最后 npm 可能会报错，忽视即可。</p>\n<p>安装成功后，在 Markdown 文档中添加 APlayer 和 DPlayer 标签即可,比如添加如下代码使用 APlayer 和 DPlayer(此处无耻的copy代码)：<br><figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;<span class=\"meta\">%</span> aplayer <span class=\"string\">\"Caffeine\"</span> <span class=\"string\">\"Jeff Williams\"</span> <span class=\"string\">\"http://7xq131.com1.z0.glb.clouddn.com/Preparation.mp3\"</span> <span class=\"string\">\"autoplay\"</span> <span class=\"meta\">%</span>&#125;</div><div class=\"line\">&#123;<span class=\"meta\">%</span> dplayer <span class=\"string\">\"url=http://devtest.qiniudn.com/若能绽放光芒.mp4\"</span> <span class=\"string\">\"api=http://dplayer.daoapp.io\"</span> <span class=\"string\">\"pic=http://devtest.qiniudn.com/若能绽放光芒.png\"</span> <span class=\"string\">\"id=9E2E3368B56CDBB4\"</span> <span class=\"string\">\"loop=yes\"</span> <span class=\"string\">\"theme=#FADFA3\"</span> <span class=\"string\">\"autoplay=false\"</span> <span class=\"string\">\"token=tokendemo\"</span> <span class=\"meta\">%</span>&#125;</div></pre></td></tr></table></figure></p>\n<p><code>hexo s</code>时如果报错，看看报什么错，<strong>报找不到目录</strong>或<strong>找不到文件</strong>错误就按提示创建目录或文件（文件内容可以为空，但必须存在该文件）</p>\n<hr>\n<h2 id=\"音频\"><a href=\"#音频\" class=\"headerlink\" title=\"音频\"></a>音频</h2><p>参考：<br><a href=\"https://github.com/DIYgod/APlayer\" target=\"_blank\" rel=\"external\">https://github.com/DIYgod/APlayer</a><br><a href=\"https://github.com/grzhan/hexo-tag-aplayer#upstream-issue\" target=\"_blank\" rel=\"external\">https://github.com/grzhan/hexo-tag-aplayer#upstream-issue</a></p>\n<div id=\"aplayer0\" class=\"aplayer\" style=\"margin-bottom: 20px;\"></div><script>var aplayer0 = new APlayer({element: document.getElementById(\"aplayer0\"),narrow: false,autoplay: false,showlrc: 0,music : {title: \"Apple Stone\",author: \"Lost\",url: \"autoplay\",pic: \":music=http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\"}});aplayer0.init();</script>\n<hr>\n<h2 id=\"视频：-1\"><a href=\"#视频：-1\" class=\"headerlink\" title=\"视频：\"></a>视频：</h2><p>参考：<br><a href=\"https://github.com/NextMoe/hexo-tag-dplayer\" target=\"_blank\" rel=\"external\">https://github.com/NextMoe/hexo-tag-dplayer</a><br><a href=\"https://github.com/DIYgod/DPlayer\" target=\"_blank\" rel=\"external\">https://github.com/DIYgod/DPlayer</a></p>\n<div id=\"dplayer0\" class=\"dplayer\" style=\"margin-bottom: 20px;\"></div><script>var dplayer0 = new DPlayer({\"element\":document.getElementById(\"dplayer0\"),\"autoplay\":false,\"theme\":\"#FADFA3\",\"loop\":true,\"video\":{\"url\":\"http://devtest.qiniudn.com/若能绽放光芒.mp4\",\"pic\":\"http://devtest.qiniudn.com/若能绽放光芒.png\"},\"danmaku\":{\"api\":\"http://dplayer.donot.help/dplayerpy\",\"id\":\"2622668\",\"addition\":[\"https://dplayer.daoapp.io/bilibili?aid=4157142\"]}});</script>\n<hr>\n<h1 id=\"HTML标签和dplayer对比\"><a href=\"#HTML标签和dplayer对比\" class=\"headerlink\" title=\"HTML标签和dplayer对比\"></a>HTML标签和dplayer对比</h1><table>\n<thead>\n<tr>\n<th>项目</th>\n<th>使用难度</th>\n<th>是否支持https</th>\n<th>是否使用html5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>插入html语言</td>\n<td>小</td>\n<td>大部分不支持</td>\n<td>大部分使用Flash</td>\n</tr>\n<tr>\n<td>使用Hexo插件</td>\n<td>中等</td>\n<td>支持</td>\n<td>使用html5</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>此功能太实用了，看了Raintons的博文不禁心动，自己尝试了一番，感觉甚好，原文地址：<a href=\"http://login926.top/2016/07/20/HexoMedia/\" target=\"_blank\" rel=\"external\">http://login926.top/2016/07/20/HexoMedia/</a></p>\n<hr>\n","excerpt":"","more":"<p>本文是参考Raintons的博文写的。感谢Raintons的文章。</p>\n<h1 id=\"Markdown-通用插入方法\"><a href=\"#Markdown-通用插入方法\" class=\"headerlink\" title=\"Markdown 通用插入方法\"></a>Markdown 通用插入方法</h1><p>Markdown 作为轻量级的标记语言，兼容 html 语法，可以直接在 Markdown 文档中使用 html 语法。<br>大部分音乐、视频网站都可以直接生成播放器代码(尽量用直接生成的代码)，直接粘贴到 Markdown 文档中即可。有些标签不支持 https，尽量选支持https的网站，因为<strong>https网站加载http资源会被屏蔽掉，简单的在http地址后加个s测试即可知道是否支持https</strong> 。</p>\n<p><strong>Html居中代码</strong>：<br><code>&lt;center&gt;我是内容，替换我&lt;/center&gt;</code><br>或<code>&lt;blockquote class=&quot;blockquote-center&quot;&gt;我是内容，替换我&lt;/blockquote&gt;</code></p>\n<h2 id=\"视频：\"><a href=\"#视频：\" class=\"headerlink\" title=\"视频：\"></a>视频：</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">width</span>=<span class=\"string\">\"480\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"320\"</span> <span class=\"attr\">controls</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">source</span> <span class=\"attr\">src</span>=<span class=\"string\">\"movie.mp4\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>经测试不支持内嵌优酷之类的flash播放，<strong>src</strong>后面的地址要指向视频文件。<strong>width</strong>和<strong>height</strong>最好填写好对应视频的大小，不然周围有边框不好看。视频居中要用<code>&lt;blockquote class=&quot;blockquote-center&quot;&gt;我是内容，替换我&lt;/blockquote&gt;</code>才行。下面给大家偷偷放女票的片片，还没告诉她，希望不要打我(=^ ^=)</p>\n<blockquote class=\"blockquote-center\"><br><video width=\"544\" height=\"962\" controls><br><source src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161207/085157022.mp4\"><br></video><br></blockquote>\n\n<p>网站生成代码，点分享即可生成播放代码。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161206/173516104.png\" alt=\"mark\"></p>\n<iframe height=498 width=510 src='http://player.youku.com/embed/XNjIyMjY4MjM2' frameborder=0 'allowfullscreen'></iframe>\n\n<hr>\n<h2 id=\"音频：\"><a href=\"#音频：\" class=\"headerlink\" title=\"音频：\"></a>音频：</h2><p>音频分享和视频分享是一样的，也能生成外链播放器代码（有多种标签自由选择），只有网易云音乐是单独有生成按钮的。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161206/164604641.png\" alt=\"mark\"></p>\n<center><br><embed src=\"https://music.163.com/style/swf/widget.swf?sid=450980312&type=0&auto=0&width=310&height=430\" width=\"330\" height=\"450\"  allowNetworking=\"all\"></embed><br></center>\n\n\n<hr>\n<h1 id=\"dplayer插件插入\"><a href=\"#dplayer插件插入\" class=\"headerlink\" title=\"dplayer插件插入\"></a>dplayer插件插入</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>两款插件基于 DIYgod 编写的 html5 播放器 APlayer 和 DPlayer 开发。</p>\n<p>首先安装两款插件<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-tag-dplayer <span class=\"comment\">--save</span></div><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-tag-aplayer <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>安装到最后 npm 可能会报错，忽视即可。</p>\n<p>安装成功后，在 Markdown 文档中添加 APlayer 和 DPlayer 标签即可,比如添加如下代码使用 APlayer 和 DPlayer(此处无耻的copy代码)：<br><figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;<span class=\"meta\">%</span> aplayer <span class=\"string\">\"Caffeine\"</span> <span class=\"string\">\"Jeff Williams\"</span> <span class=\"string\">\"http://7xq131.com1.z0.glb.clouddn.com/Preparation.mp3\"</span> <span class=\"string\">\"autoplay\"</span> <span class=\"meta\">%</span>&#125;</div><div class=\"line\">&#123;<span class=\"meta\">%</span> dplayer <span class=\"string\">\"url=http://devtest.qiniudn.com/若能绽放光芒.mp4\"</span> <span class=\"string\">\"api=http://dplayer.daoapp.io\"</span> <span class=\"string\">\"pic=http://devtest.qiniudn.com/若能绽放光芒.png\"</span> <span class=\"string\">\"id=9E2E3368B56CDBB4\"</span> <span class=\"string\">\"loop=yes\"</span> <span class=\"string\">\"theme=#FADFA3\"</span> <span class=\"string\">\"autoplay=false\"</span> <span class=\"string\">\"token=tokendemo\"</span> <span class=\"meta\">%</span>&#125;</div></pre></td></tr></table></figure></p>\n<p><code>hexo s</code>时如果报错，看看报什么错，<strong>报找不到目录</strong>或<strong>找不到文件</strong>错误就按提示创建目录或文件（文件内容可以为空，但必须存在该文件）</p>\n<hr>\n<h2 id=\"音频\"><a href=\"#音频\" class=\"headerlink\" title=\"音频\"></a>音频</h2><p>参考：<br><a href=\"https://github.com/DIYgod/APlayer\">https://github.com/DIYgod/APlayer</a><br><a href=\"https://github.com/grzhan/hexo-tag-aplayer#upstream-issue\">https://github.com/grzhan/hexo-tag-aplayer#upstream-issue</a></p>\n<div id=\"aplayer0\" class=\"aplayer\" style=\"margin-bottom: 20px;\"></div><script>var aplayer0 = new APlayer({element: document.getElementById(\"aplayer0\"),narrow: false,autoplay: false,showlrc: 0,music : {title: \"Apple Stone\",author: \"Lost\",url: \"autoplay\",pic: \":music=http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\"}});aplayer0.init();</script>\n<hr>\n<h2 id=\"视频：-1\"><a href=\"#视频：-1\" class=\"headerlink\" title=\"视频：\"></a>视频：</h2><p>参考：<br><a href=\"https://github.com/NextMoe/hexo-tag-dplayer\">https://github.com/NextMoe/hexo-tag-dplayer</a><br><a href=\"https://github.com/DIYgod/DPlayer\">https://github.com/DIYgod/DPlayer</a></p>\n<div id=\"dplayer0\" class=\"dplayer\" style=\"margin-bottom: 20px;\"></div><script>var dplayer0 = new DPlayer({\"element\":document.getElementById(\"dplayer0\"),\"autoplay\":false,\"theme\":\"#FADFA3\",\"loop\":true,\"video\":{\"url\":\"http://devtest.qiniudn.com/若能绽放光芒.mp4\",\"pic\":\"http://devtest.qiniudn.com/若能绽放光芒.png\"},\"danmaku\":{\"api\":\"http://dplayer.donot.help/dplayerpy\",\"id\":\"2622668\",\"addition\":[\"https://dplayer.daoapp.io/bilibili?aid=4157142\"]}});</script>\n<hr>\n<h1 id=\"HTML标签和dplayer对比\"><a href=\"#HTML标签和dplayer对比\" class=\"headerlink\" title=\"HTML标签和dplayer对比\"></a>HTML标签和dplayer对比</h1><table>\n<thead>\n<tr>\n<th>项目</th>\n<th>使用难度</th>\n<th>是否支持https</th>\n<th>是否使用html5</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>插入html语言</td>\n<td>小</td>\n<td>大部分不支持</td>\n<td>大部分使用Flash</td>\n</tr>\n<tr>\n<td>使用Hexo插件</td>\n<td>中等</td>\n<td>支持</td>\n<td>使用html5</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>此功能太实用了，看了Raintons的博文不禁心动，自己尝试了一番，感觉甚好，原文地址：<a href=\"http://login926.top/2016/07/20/HexoMedia/\">http://login926.top/2016/07/20/HexoMedia/</a></p>\n<hr>\n"},{"title":"操作系统常用配置设置","abbrlink":3766,"date":"2016-11-25T02:57:35.000Z","_content":"\n# Ubuntu\n## 开启root用户登录桌面\n```\nsudo vim /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf\n加上下面一句\ngreeter-show-manual-login=true\n然后修改密码\nsudo passwd root\n重启系统```\n\n---\n## 允许root用户登录ssh\n```\n/etc/ssh/sshd_config\n修改PermitRootLogin\nPermitRootLogin yes\n#保存退出重启服务\nsudo service ssh restart\n```\n\n\n\n\n\n\n\n\n\n---\n# Centos\n## Docker Centos修改密码出错\nCentOS 修改root密码时报错：\n/usr/share/cracklib/pw_dict.pwd: No such file or directory PWOpen: No such file or directory \n\n这是因为缺少某些lib库。解决办法：`yum reinstall -y cracklib-dicts`\n\n\n\n---\n# Mac\n\n\n\n\n\n\n---\n# Windows\n\n\n\n\n\n\n---\n\n","source":"_posts/杂项/2016-11-25-操作系统常用配置设置.md","raw":"---\ntitle: 操作系统常用配置设置\ncategories:\n  - 杂项\ntags:\n  - 操作系统常用配置设置\nabbrlink: 3766\ndate: 2016-11-25 10:57:35\n---\n\n# Ubuntu\n## 开启root用户登录桌面\n```\nsudo vim /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf\n加上下面一句\ngreeter-show-manual-login=true\n然后修改密码\nsudo passwd root\n重启系统```\n\n---\n## 允许root用户登录ssh\n```\n/etc/ssh/sshd_config\n修改PermitRootLogin\nPermitRootLogin yes\n#保存退出重启服务\nsudo service ssh restart\n```\n\n\n\n\n\n\n\n\n\n---\n# Centos\n## Docker Centos修改密码出错\nCentOS 修改root密码时报错：\n/usr/share/cracklib/pw_dict.pwd: No such file or directory PWOpen: No such file or directory \n\n这是因为缺少某些lib库。解决办法：`yum reinstall -y cracklib-dicts`\n\n\n\n---\n# Mac\n\n\n\n\n\n\n---\n# Windows\n\n\n\n\n\n\n---\n\n","slug":"杂项-2016-11-25-操作系统常用配置设置","published":1,"updated":"2016-12-09T06:37:34.717Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjmp001wd8pkz2gb8ll8","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h1><h2 id=\"开启root用户登录桌面\"><a href=\"#开启root用户登录桌面\" class=\"headerlink\" title=\"开启root用户登录桌面\"></a>开启root用户登录桌面</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo vim /usr/share/lightdm/lightdm<span class=\"selector-class\">.conf</span><span class=\"selector-class\">.d</span>/<span class=\"number\">50</span>-ubuntu<span class=\"selector-class\">.conf</span></div><div class=\"line\">加上下面一句</div><div class=\"line\">greeter-show-manual-login=true</div><div class=\"line\">然后修改密码</div><div class=\"line\">sudo passwd root</div><div class=\"line\">重启系统</div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"允许root用户登录ssh\"><a href=\"#允许root用户登录ssh\" class=\"headerlink\" title=\"允许root用户登录ssh\"></a>允许root用户登录ssh</h2><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/ssh/sshd_config</div><div class=\"line\">修改PermitRootLogin</div><div class=\"line\">PermitRootLogin <span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"comment\">#保存退出重启服务</span></div><div class=\"line\">sudo service ssh restart</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><h2 id=\"Docker-Centos修改密码出错\"><a href=\"#Docker-Centos修改密码出错\" class=\"headerlink\" title=\"Docker Centos修改密码出错\"></a>Docker Centos修改密码出错</h2><p>CentOS 修改root密码时报错：<br>/usr/share/cracklib/pw_dict.pwd: No such file or directory PWOpen: No such file or directory </p>\n<p>这是因为缺少某些lib库。解决办法：<code>yum reinstall -y cracklib-dicts</code></p>\n<hr>\n<h1 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h1><hr>\n<h1 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h1><hr>\n","excerpt":"","more":"<h1 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h1><h2 id=\"开启root用户登录桌面\"><a href=\"#开启root用户登录桌面\" class=\"headerlink\" title=\"开启root用户登录桌面\"></a>开启root用户登录桌面</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo vim /usr/share/lightdm/lightdm<span class=\"selector-class\">.conf</span><span class=\"selector-class\">.d</span>/<span class=\"number\">50</span>-ubuntu<span class=\"selector-class\">.conf</span></div><div class=\"line\">加上下面一句</div><div class=\"line\">greeter-show-manual-login=true</div><div class=\"line\">然后修改密码</div><div class=\"line\">sudo passwd root</div><div class=\"line\">重启系统</div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"允许root用户登录ssh\"><a href=\"#允许root用户登录ssh\" class=\"headerlink\" title=\"允许root用户登录ssh\"></a>允许root用户登录ssh</h2><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/ssh/sshd_config</div><div class=\"line\">修改PermitRootLogin</div><div class=\"line\">PermitRootLogin <span class=\"literal\">yes</span></div><div class=\"line\"><span class=\"comment\">#保存退出重启服务</span></div><div class=\"line\">sudo service ssh restart</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><h2 id=\"Docker-Centos修改密码出错\"><a href=\"#Docker-Centos修改密码出错\" class=\"headerlink\" title=\"Docker Centos修改密码出错\"></a>Docker Centos修改密码出错</h2><p>CentOS 修改root密码时报错：<br>/usr/share/cracklib/pw_dict.pwd: No such file or directory PWOpen: No such file or directory </p>\n<p>这是因为缺少某些lib库。解决办法：<code>yum reinstall -y cracklib-dicts</code></p>\n<hr>\n<h1 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h1><hr>\n<h1 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h1><hr>\n"},{"title":"CentOS上搭建PHP环境","abbrlink":36733,"date":"2016-11-02T04:21:24.000Z","_content":"\n在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP\n**http://www.centos.bz/2013/08/ezhttp-tutorial/**\n \n安装:\n\n```\nyum install httpd httpd-devel\nyum install php php-devel\nyum install php-mysql php-gd php-imap php-ldap php-odbc php-pear php-xml php-xmlrpc\nyum install mysql mysql-server\n/etc/init.d/mysqld start\n/etc/init.d/httpd restart\n```\n\n此时可以在目录：/var/www/html/下建立一个PHP文件\n代码：\n\n`<?php phpinfo(); ?>`\n\n然后访问这个文件，就能看到PHP的一些信息，php.ini配置文件的路径可以在这个页面上看到\n\n \n**测试mysql是否链接成功的php代码**\n\n```php\n<?php\n$con = mysql_connect(\"10.0.@.@@\",\"@@\",\"@@\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n \nmysql_select_db(\"mydb\", $con);\n \n$result = mysql_query(\"SELECT * FROM sys_user\");\n \nwhile($row = mysql_fetch_array($result))\n  {\n  echo $row['UserName'] . \" \" . $row['PassWord'] . \" \" . $row['id'];\n  echo \"<br />\";\n  }\n \nmysql_close($con);\n?>\n```\n\n可以把上面的代码传入目录/var/www/html/\n就可以看到执行情况\n\n\n\n---\n","source":"_posts/环境搭建/2016-11-02-CentOS搭建PHP环境.md","raw":"---\ntitle: CentOS上搭建PHP环境\ncategories:\n  - 环境搭建\ntags:\n  - Centos PHP\nabbrlink: 36733\ndate: 2016-11-02 12:21:24\n---\n\n在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP\n**http://www.centos.bz/2013/08/ezhttp-tutorial/**\n \n安装:\n\n```\nyum install httpd httpd-devel\nyum install php php-devel\nyum install php-mysql php-gd php-imap php-ldap php-odbc php-pear php-xml php-xmlrpc\nyum install mysql mysql-server\n/etc/init.d/mysqld start\n/etc/init.d/httpd restart\n```\n\n此时可以在目录：/var/www/html/下建立一个PHP文件\n代码：\n\n`<?php phpinfo(); ?>`\n\n然后访问这个文件，就能看到PHP的一些信息，php.ini配置文件的路径可以在这个页面上看到\n\n \n**测试mysql是否链接成功的php代码**\n\n```php\n<?php\n$con = mysql_connect(\"10.0.@.@@\",\"@@\",\"@@\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n \nmysql_select_db(\"mydb\", $con);\n \n$result = mysql_query(\"SELECT * FROM sys_user\");\n \nwhile($row = mysql_fetch_array($result))\n  {\n  echo $row['UserName'] . \" \" . $row['PassWord'] . \" \" . $row['id'];\n  echo \"<br />\";\n  }\n \nmysql_close($con);\n?>\n```\n\n可以把上面的代码传入目录/var/www/html/\n就可以看到执行情况\n\n\n\n---\n","slug":"环境搭建-2016-11-02-CentOS搭建PHP环境","published":1,"updated":"2016-11-21T02:17:09.007Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjmr0020d8pkzfr7132z","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP<br><strong><a href=\"http://www.centos.bz/2013/08/ezhttp-tutorial/\" target=\"_blank\" rel=\"external\">http://www.centos.bz/2013/08/ezhttp-tutorial/</a></strong></p>\n<p>安装:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> httpd httpd-devel</div><div class=\"line\">yum <span class=\"keyword\">install</span> php php-devel</div><div class=\"line\">yum <span class=\"keyword\">install</span> php-mysql php-gd php-imap php-ldap php-odbc php-pear php-<span class=\"keyword\">xml</span> php-xmlrpc</div><div class=\"line\">yum <span class=\"keyword\">install</span> mysql mysql-<span class=\"keyword\">server</span></div><div class=\"line\">/etc/init.d/mysqld <span class=\"keyword\">start</span></div><div class=\"line\">/etc/init.d/httpd restart</div></pre></td></tr></table></figure>\n<p>此时可以在目录：/var/www/html/下建立一个PHP文件<br>代码：</p>\n<p><code>&lt;?php phpinfo(); ?&gt;</code></p>\n<p>然后访问这个文件，就能看到PHP的一些信息，php.ini配置文件的路径可以在这个页面上看到</p>\n<p><strong>测试mysql是否链接成功的php代码</strong></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"10.0.@.@@\"</span>,<span class=\"string\">\"@@\"</span>,<span class=\"string\">\"@@\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"> </div><div class=\"line\">mysql_select_db(<span class=\"string\">\"mydb\"</span>, $con);</div><div class=\"line\"> </div><div class=\"line\">$result = mysql_query(<span class=\"string\">\"SELECT * FROM sys_user\"</span>);</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">while</span>($row = mysql_fetch_array($result))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">echo</span> $row[<span class=\"string\">'UserName'</span>] . <span class=\"string\">\" \"</span> . $row[<span class=\"string\">'PassWord'</span>] . <span class=\"string\">\" \"</span> . $row[<span class=\"string\">'id'</span>];</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;br /&gt;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"> </div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<p>可以把上面的代码传入目录/var/www/html/<br>就可以看到执行情况</p>\n<hr>\n","excerpt":"","more":"<p>在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP<br><strong><a href=\"http://www.centos.bz/2013/08/ezhttp-tutorial/\">http://www.centos.bz/2013/08/ezhttp-tutorial/</a></strong></p>\n<p>安装:</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> httpd httpd-devel</div><div class=\"line\">yum <span class=\"keyword\">install</span> php php-devel</div><div class=\"line\">yum <span class=\"keyword\">install</span> php-mysql php-gd php-imap php-ldap php-odbc php-pear php-<span class=\"keyword\">xml</span> php-xmlrpc</div><div class=\"line\">yum <span class=\"keyword\">install</span> mysql mysql-<span class=\"keyword\">server</span></div><div class=\"line\">/etc/init.d/mysqld <span class=\"keyword\">start</span></div><div class=\"line\">/etc/init.d/httpd restart</div></pre></td></tr></table></figure>\n<p>此时可以在目录：/var/www/html/下建立一个PHP文件<br>代码：</p>\n<p><code>&lt;?php phpinfo(); ?&gt;</code></p>\n<p>然后访问这个文件，就能看到PHP的一些信息，php.ini配置文件的路径可以在这个页面上看到</p>\n<p><strong>测试mysql是否链接成功的php代码</strong></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">$con = mysql_connect(<span class=\"string\">\"10.0.@.@@\"</span>,<span class=\"string\">\"@@\"</span>,<span class=\"string\">\"@@\"</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$con)</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">die</span>(<span class=\"string\">'Could not connect: '</span> . mysql_error());</div><div class=\"line\">  &#125;</div><div class=\"line\"> </div><div class=\"line\">mysql_select_db(<span class=\"string\">\"mydb\"</span>, $con);</div><div class=\"line\"> </div><div class=\"line\">$result = mysql_query(<span class=\"string\">\"SELECT * FROM sys_user\"</span>);</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">while</span>($row = mysql_fetch_array($result))</div><div class=\"line\">  &#123;</div><div class=\"line\">  <span class=\"keyword\">echo</span> $row[<span class=\"string\">'UserName'</span>] . <span class=\"string\">\" \"</span> . $row[<span class=\"string\">'PassWord'</span>] . <span class=\"string\">\" \"</span> . $row[<span class=\"string\">'id'</span>];</div><div class=\"line\">  <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;br /&gt;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"> </div><div class=\"line\">mysql_close($con);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<p>可以把上面的代码传入目录/var/www/html/<br>就可以看到执行情况</p>\n<hr>\n"},{"layout":"post","title":"ruby开发环境搭建","abbrlink":31766,"date":"2016-10-31T03:21:24.000Z","_content":"# Ubuntu 16 #\n安装ruby环境\n`sudo apt-get install ruby ruby-dev`\n检查ruby版本\n`ruby -v`\n`gem --version`\n irb     环境测试\nirb(main):001:0> 3+5\n=> 8\nirb(main):002:0> puts \"hello world!\"\nhello world!\nirb(main):001:0>exit\n\n---\n\n# Centos #\n`yum list ruby `看看yum仓库版本是多少，版本太低就源码安装。\n```\nyum install openssl* openssl-devel zlib-devel gcc gcc-c++ make autoconf readline-devel curl-devel expat-devel gettext-devel -y\n```\n\n关闭iptables和SELINUX（不关闭也是可以的）\n```\nservice iptables stop\nsetenforce 0\nvi /etc/sysconfig/selinux\nSELINUX=disabled         #禁用selinux  \n```\n源码编译安装：\n```\nwget http://ftp.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.gz\ntar zxvf ruby-2.3.1.tar.gz\ncd ruby-2.3.1\n./configure --enable-shared --enable-pthread --prefix=/usr/local/ruby\nmake && make install\n```\n编译时如果报错如下：\nossl_pkey_ec.c:815: error: ‘EC_GROUP_new_curve_GF2m' undeclared (first use in this function)\n需要安装补丁，也就是替换两个ssl库文件，以下为该补丁文件打包下载地址\n详见：https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808\n解决方法：\n```\ncd ruby-2.3.1\nwget --no-check-certificate https://bugs.ruby-lang.org/projects/rubytrunk/repository/revisions/41808/raw/ext/openssl/ossl_pkey_ec.c\nwget --no-check-certificate https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808/raw/test/openssl/test_pkey_ec.rb\nmv ext/openssl/ossl_pkey_ec.c  ext/openssl/ossl_pkey_ec.c.bak\ncp ossl_pkey_ec.c ext/openssl/\nmv test/openssl/test_pkey_ec.rb test/openssl/test_pkey_ec.rb.bak\ncp test_pkey_ec.rb  test/openssl/\n```\n重新编译：\n`make && make install`\n\n将ruby命令集加入系统环境变量\n```\necho \"PATH=$PATH:/usr/local/ruby/bin;export PATH\" >> /etc/profile\nsource /etc/profile\n```\n检查ruby版本\n`ruby -v`\n`gem --version`\n irb     环境测试\nirb(main):001:0> 3+5\n=> 8\nirb(main):002:0> puts \"hello world!\"\nhello world!\nirb(main):001:0>exit\n\n---\n\n# Mac10.12 #\nmac在10.11之后的版本，安全机制发生了变更，/usr/local/目录已经没有写权限了。\n\n* xcode升级到8.0及以上版本\n\n不要用mac自带的ruby及brew方式安装ruby，容易出各种错误。\n安装rvm（ruby的版本控制器）https://github.com/rvm/rvm\n`curl -L https://get.rvm.io | bash -s stable --autolibs=enabled --ruby --rails --trace`\n可能会有警告，有提示把某一句加入/Users/用户名/.bash_profile 中，重开终端。`rvm -v`显示版本，说明安装成功。\n\n安装homebrew （官网http://brew.sh/index_zh-cn.html）\n\ngithub:https://github.com/Homebrew/homebrew\n\n`/usr/bin/ruby`使用的是mac自带的2.0版本的ruby，也可以直接用ruby使用新版本的ruby。\n```ruby\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" \n```\n`brew -v`\n\n列出ruby可安装的版本信息\n`rvm list known`\n安装一个ruby版本\n`rvm install 2.3.1`\n如果想设置为默认版本，可以用这条命令来完成\n`rvm use 2.3.1 --default`     一般上一步安装好就已经设为默认了\n查看已安装的ruby\n`rvm list`\n卸载一个已安装ruby版本\n`rvm remove 2.3.1`\n`ruby -v`\n会发现版本号变成最新的啦！\n\n检查ruby版本\n`ruby -v`\n`gem --version`\n irb     环境测试\nirb(main):001:0> 3+5\n=> 8\nirb(main):002:0> puts \"hello world!\"\nhello world!\nirb(main):001:0>exit\n\n安装各种扩展（可选）\nrails：ruby web框架\n`gem install rails`\n\n---\n\n# Windows #\n直接到官网下载：\nhttp://rubyinstaller.org/downloads \nhttp://www.ruby-lang.org/zh_cn/downloads/ （源码）\n安装时勾选自动添加PATH，安装完成后重启生效。\n也可以cmd运行 `set a = b` 然后重开cmd，环境变量就生效了。\n\n---\n\n# Ruby源 #\n国外源如果屏蔽了，更改gem安装源到淘宝，每条命令都有成功提示\n`gem update --system`     #升级gem版本\n`gem uninstall rubygems-update`    #移除gem升级脚本\n`gem sources --remove https://rubygems.org/`\n`gem sources -a https://ruby.taobao.org/`\n`gem sources -l`\n\n* windows 不要更换源，添加不了淘宝源，就换回原来的源。\n\n* Mac 如果报-SSL错误请把https改为http。\n*** CURRENT SOURCES ***\nhttp://ruby.taobao.org/\n\n\n\n---","source":"_posts/环境搭建/2016-10-21-Ruby开发环境搭建.md","raw":"---\nlayout: post\ntitle: ruby开发环境搭建\ncategories:\n  - 环境搭建\ntags:\n  - ruby2.3.1安装\nabbrlink: 31766\ndate: 2016-10-31 11:21:24\n---\n# Ubuntu 16 #\n安装ruby环境\n`sudo apt-get install ruby ruby-dev`\n检查ruby版本\n`ruby -v`\n`gem --version`\n irb     环境测试\nirb(main):001:0> 3+5\n=> 8\nirb(main):002:0> puts \"hello world!\"\nhello world!\nirb(main):001:0>exit\n\n---\n\n# Centos #\n`yum list ruby `看看yum仓库版本是多少，版本太低就源码安装。\n```\nyum install openssl* openssl-devel zlib-devel gcc gcc-c++ make autoconf readline-devel curl-devel expat-devel gettext-devel -y\n```\n\n关闭iptables和SELINUX（不关闭也是可以的）\n```\nservice iptables stop\nsetenforce 0\nvi /etc/sysconfig/selinux\nSELINUX=disabled         #禁用selinux  \n```\n源码编译安装：\n```\nwget http://ftp.ruby-lang.org/pub/ruby/2.3/ruby-2.3.1.tar.gz\ntar zxvf ruby-2.3.1.tar.gz\ncd ruby-2.3.1\n./configure --enable-shared --enable-pthread --prefix=/usr/local/ruby\nmake && make install\n```\n编译时如果报错如下：\nossl_pkey_ec.c:815: error: ‘EC_GROUP_new_curve_GF2m' undeclared (first use in this function)\n需要安装补丁，也就是替换两个ssl库文件，以下为该补丁文件打包下载地址\n详见：https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808\n解决方法：\n```\ncd ruby-2.3.1\nwget --no-check-certificate https://bugs.ruby-lang.org/projects/rubytrunk/repository/revisions/41808/raw/ext/openssl/ossl_pkey_ec.c\nwget --no-check-certificate https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808/raw/test/openssl/test_pkey_ec.rb\nmv ext/openssl/ossl_pkey_ec.c  ext/openssl/ossl_pkey_ec.c.bak\ncp ossl_pkey_ec.c ext/openssl/\nmv test/openssl/test_pkey_ec.rb test/openssl/test_pkey_ec.rb.bak\ncp test_pkey_ec.rb  test/openssl/\n```\n重新编译：\n`make && make install`\n\n将ruby命令集加入系统环境变量\n```\necho \"PATH=$PATH:/usr/local/ruby/bin;export PATH\" >> /etc/profile\nsource /etc/profile\n```\n检查ruby版本\n`ruby -v`\n`gem --version`\n irb     环境测试\nirb(main):001:0> 3+5\n=> 8\nirb(main):002:0> puts \"hello world!\"\nhello world!\nirb(main):001:0>exit\n\n---\n\n# Mac10.12 #\nmac在10.11之后的版本，安全机制发生了变更，/usr/local/目录已经没有写权限了。\n\n* xcode升级到8.0及以上版本\n\n不要用mac自带的ruby及brew方式安装ruby，容易出各种错误。\n安装rvm（ruby的版本控制器）https://github.com/rvm/rvm\n`curl -L https://get.rvm.io | bash -s stable --autolibs=enabled --ruby --rails --trace`\n可能会有警告，有提示把某一句加入/Users/用户名/.bash_profile 中，重开终端。`rvm -v`显示版本，说明安装成功。\n\n安装homebrew （官网http://brew.sh/index_zh-cn.html）\n\ngithub:https://github.com/Homebrew/homebrew\n\n`/usr/bin/ruby`使用的是mac自带的2.0版本的ruby，也可以直接用ruby使用新版本的ruby。\n```ruby\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" \n```\n`brew -v`\n\n列出ruby可安装的版本信息\n`rvm list known`\n安装一个ruby版本\n`rvm install 2.3.1`\n如果想设置为默认版本，可以用这条命令来完成\n`rvm use 2.3.1 --default`     一般上一步安装好就已经设为默认了\n查看已安装的ruby\n`rvm list`\n卸载一个已安装ruby版本\n`rvm remove 2.3.1`\n`ruby -v`\n会发现版本号变成最新的啦！\n\n检查ruby版本\n`ruby -v`\n`gem --version`\n irb     环境测试\nirb(main):001:0> 3+5\n=> 8\nirb(main):002:0> puts \"hello world!\"\nhello world!\nirb(main):001:0>exit\n\n安装各种扩展（可选）\nrails：ruby web框架\n`gem install rails`\n\n---\n\n# Windows #\n直接到官网下载：\nhttp://rubyinstaller.org/downloads \nhttp://www.ruby-lang.org/zh_cn/downloads/ （源码）\n安装时勾选自动添加PATH，安装完成后重启生效。\n也可以cmd运行 `set a = b` 然后重开cmd，环境变量就生效了。\n\n---\n\n# Ruby源 #\n国外源如果屏蔽了，更改gem安装源到淘宝，每条命令都有成功提示\n`gem update --system`     #升级gem版本\n`gem uninstall rubygems-update`    #移除gem升级脚本\n`gem sources --remove https://rubygems.org/`\n`gem sources -a https://ruby.taobao.org/`\n`gem sources -l`\n\n* windows 不要更换源，添加不了淘宝源，就换回原来的源。\n\n* Mac 如果报-SSL错误请把https改为http。\n*** CURRENT SOURCES ***\nhttp://ruby.taobao.org/\n\n\n\n---","slug":"环境搭建-2016-10-21-Ruby开发环境搭建","published":1,"updated":"2016-11-21T02:17:08.976Z","comments":1,"photos":[],"link":"","_id":"ciwlrsjmv0023d8pkac5356oy","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Ubuntu-16\"><a href=\"#Ubuntu-16\" class=\"headerlink\" title=\"Ubuntu 16\"></a>Ubuntu 16</h1><p>安装ruby环境<br><code>sudo apt-get install ruby ruby-dev</code><br>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>\n<hr>\n<h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><p><code>yum list ruby</code>看看yum仓库版本是多少，版本太低就源码安装。<br><figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">yum</span> <span class=\"comment\">install</span> <span class=\"comment\">openssl*</span> <span class=\"comment\">openssl</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">zlib</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">gcc</span> <span class=\"comment\">gcc</span><span class=\"literal\">-</span><span class=\"comment\">c</span><span class=\"literal\">+</span><span class=\"literal\">+</span> <span class=\"comment\">make</span> <span class=\"comment\">autoconf</span> <span class=\"comment\">readline</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">curl</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">expat</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">gettext</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"literal\">-</span><span class=\"comment\">y</span></div></pre></td></tr></table></figure></p>\n<p>关闭iptables和SELINUX（不关闭也是可以的）<br><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">service</span> iptables stop</div><div class=\"line\"><span class=\"symbol\">setenforce</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">vi</span> /etc/sysconfig/<span class=\"keyword\">selinux</span></div><div class=\"line\"><span class=\"keyword\">SELINUX=disabled </span>        #禁用<span class=\"keyword\">selinux</span></div></pre></td></tr></table></figure></p>\n<p>源码编译安装：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http://ftp.<span class=\"keyword\">ruby</span>-lang.org/pub/<span class=\"keyword\">ruby</span>/<span class=\"number\">2.3</span>/<span class=\"keyword\">ruby</span>-<span class=\"number\">2.3</span>.<span class=\"number\">1</span>.tar.gz</div><div class=\"line\">tar zxvf <span class=\"keyword\">ruby</span>-<span class=\"number\">2.3</span>.<span class=\"number\">1</span>.tar.gz</div><div class=\"line\"><span class=\"keyword\">cd</span> <span class=\"keyword\">ruby</span>-<span class=\"number\">2.3</span>.<span class=\"number\">1</span></div><div class=\"line\">./configure --enable-shared --enable-pthread --prefix=/usr/local/<span class=\"keyword\">ruby</span></div><div class=\"line\"><span class=\"keyword\">make</span> &amp;&amp; <span class=\"keyword\">make</span> install</div></pre></td></tr></table></figure></p>\n<p>编译时如果报错如下：<br>ossl_pkey_ec.c:815: error: ‘EC_GROUP_new_curve_GF2m’ undeclared (first use in this function)<br>需要安装补丁，也就是替换两个ssl库文件，以下为该补丁文件打包下载地址<br>详见：<a href=\"https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808\" target=\"_blank\" rel=\"external\">https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808</a><br>解决方法：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd ruby-<span class=\"number\">2.3</span>.<span class=\"number\">1</span></div><div class=\"line\">wget --no-check-certificate https:<span class=\"comment\">//bugs.ruby-lang.org/projects/rubytrunk/repository/revisions/41808/raw/ext/openssl/ossl_pkey_ec.c</span></div><div class=\"line\">wget --no-check-certificate https:<span class=\"comment\">//bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808/raw/test/openssl/test_pkey_ec.rb</span></div><div class=\"line\">mv ext/openssl/ossl_pkey_ec<span class=\"selector-class\">.c</span>  ext/openssl/ossl_pkey_ec<span class=\"selector-class\">.c</span><span class=\"selector-class\">.bak</span></div><div class=\"line\">cp ossl_pkey_ec<span class=\"selector-class\">.c</span> ext/openssl/</div><div class=\"line\">mv test/openssl/test_pkey_ec<span class=\"selector-class\">.rb</span> test/openssl/test_pkey_ec<span class=\"selector-class\">.rb</span><span class=\"selector-class\">.bak</span></div><div class=\"line\">cp test_pkey_ec<span class=\"selector-class\">.rb</span>  test/openssl/</div></pre></td></tr></table></figure></p>\n<p>重新编译：<br><code>make &amp;&amp; make install</code></p>\n<p>将ruby命令集加入系统环境变量<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"PATH=$PATH:/usr/local/ruby/bin;export PATH\"</span> &gt;&gt; /etc/<span class=\"keyword\">profile</span></div><div class=\"line\"><span class=\"keyword\">source</span> /etc/<span class=\"keyword\">profile</span></div></pre></td></tr></table></figure></p>\n<p>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>\n<hr>\n<h1 id=\"Mac10-12\"><a href=\"#Mac10-12\" class=\"headerlink\" title=\"Mac10.12\"></a>Mac10.12</h1><p>mac在10.11之后的版本，安全机制发生了变更，/usr/local/目录已经没有写权限了。</p>\n<ul>\n<li>xcode升级到8.0及以上版本</li>\n</ul>\n<p>不要用mac自带的ruby及brew方式安装ruby，容易出各种错误。<br>安装rvm（ruby的版本控制器）<a href=\"https://github.com/rvm/rvm\" target=\"_blank\" rel=\"external\">https://github.com/rvm/rvm</a><br><code>curl -L https://get.rvm.io | bash -s stable --autolibs=enabled --ruby --rails --trace</code><br>可能会有警告，有提示把某一句加入/Users/用户名/.bash_profile 中，重开终端。<code>rvm -v</code>显示版本，说明安装成功。</p>\n<p>安装homebrew （官网<a href=\"http://brew.sh/index_zh-cn.html）\" target=\"_blank\" rel=\"external\">http://brew.sh/index_zh-cn.html）</a></p>\n<p>github:<a href=\"https://github.com/Homebrew/homebrew\" target=\"_blank\" rel=\"external\">https://github.com/Homebrew/homebrew</a></p>\n<p><code>/usr/bin/ruby</code>使用的是mac自带的2.0版本的ruby，也可以直接用ruby使用新版本的ruby。<br><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">/usr/bin/ruby -e <span class=\"string\">\"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"</span></div></pre></td></tr></table></figure></p>\n<p><code>brew -v</code></p>\n<p>列出ruby可安装的版本信息<br><code>rvm list known</code><br>安装一个ruby版本<br><code>rvm install 2.3.1</code><br>如果想设置为默认版本，可以用这条命令来完成<br><code>rvm use 2.3.1 --default</code>     一般上一步安装好就已经设为默认了<br>查看已安装的ruby<br><code>rvm list</code><br>卸载一个已安装ruby版本<br><code>rvm remove 2.3.1</code><br><code>ruby -v</code><br>会发现版本号变成最新的啦！</p>\n<p>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>\n<p>安装各种扩展（可选）<br>rails：ruby web框架<br><code>gem install rails</code></p>\n<hr>\n<h1 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h1><p>直接到官网下载：<br><a href=\"http://rubyinstaller.org/downloads\" target=\"_blank\" rel=\"external\">http://rubyinstaller.org/downloads</a><br><a href=\"http://www.ruby-lang.org/zh_cn/downloads/\" target=\"_blank\" rel=\"external\">http://www.ruby-lang.org/zh_cn/downloads/</a> （源码）<br>安装时勾选自动添加PATH，安装完成后重启生效。<br>也可以cmd运行 <code>set a = b</code> 然后重开cmd，环境变量就生效了。</p>\n<hr>\n<h1 id=\"Ruby源\"><a href=\"#Ruby源\" class=\"headerlink\" title=\"Ruby源\"></a>Ruby源</h1><p>国外源如果屏蔽了，更改gem安装源到淘宝，每条命令都有成功提示<br><code>gem update --system</code>     #升级gem版本<br><code>gem uninstall rubygems-update</code>    #移除gem升级脚本<br><code>gem sources --remove https://rubygems.org/</code><br><code>gem sources -a https://ruby.taobao.org/</code><br><code>gem sources -l</code></p>\n<ul>\n<li><p>windows 不要更换源，添加不了淘宝源，就换回原来的源。</p>\n</li>\n<li><p>Mac 如果报-SSL错误请把https改为http。<br><strong><em> CURRENT SOURCES </em></strong><br><a href=\"http://ruby.taobao.org/\" target=\"_blank\" rel=\"external\">http://ruby.taobao.org/</a></p>\n</li>\n</ul>\n<hr>\n","excerpt":"","more":"<h1 id=\"Ubuntu-16\"><a href=\"#Ubuntu-16\" class=\"headerlink\" title=\"Ubuntu 16\"></a>Ubuntu 16</h1><p>安装ruby环境<br><code>sudo apt-get install ruby ruby-dev</code><br>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>\n<hr>\n<h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><p><code>yum list ruby</code>看看yum仓库版本是多少，版本太低就源码安装。<br><figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">yum</span> <span class=\"comment\">install</span> <span class=\"comment\">openssl*</span> <span class=\"comment\">openssl</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">zlib</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">gcc</span> <span class=\"comment\">gcc</span><span class=\"literal\">-</span><span class=\"comment\">c</span><span class=\"literal\">+</span><span class=\"literal\">+</span> <span class=\"comment\">make</span> <span class=\"comment\">autoconf</span> <span class=\"comment\">readline</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">curl</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">expat</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"comment\">gettext</span><span class=\"literal\">-</span><span class=\"comment\">devel</span> <span class=\"literal\">-</span><span class=\"comment\">y</span></div></pre></td></tr></table></figure></p>\n<p>关闭iptables和SELINUX（不关闭也是可以的）<br><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">service</span> iptables stop</div><div class=\"line\"><span class=\"symbol\">setenforce</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">vi</span> /etc/sysconfig/<span class=\"keyword\">selinux</div><div class=\"line\"></span><span class=\"keyword\">SELINUX=disabled </span>        #禁用<span class=\"keyword\">selinux</span></div></pre></td></tr></table></figure></p>\n<p>源码编译安装：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http://ftp.<span class=\"keyword\">ruby</span>-lang.org/pub/<span class=\"keyword\">ruby</span>/<span class=\"number\">2.3</span>/<span class=\"keyword\">ruby</span>-<span class=\"number\">2.3</span>.<span class=\"number\">1</span>.tar.gz</div><div class=\"line\">tar zxvf <span class=\"keyword\">ruby</span>-<span class=\"number\">2.3</span>.<span class=\"number\">1</span>.tar.gz</div><div class=\"line\"><span class=\"keyword\">cd</span> <span class=\"keyword\">ruby</span>-<span class=\"number\">2.3</span>.<span class=\"number\">1</span></div><div class=\"line\">./configure --enable-shared --enable-pthread --prefix=/usr/local/<span class=\"keyword\">ruby</span></div><div class=\"line\"><span class=\"keyword\">make</span> &amp;&amp; <span class=\"keyword\">make</span> install</div></pre></td></tr></table></figure></p>\n<p>编译时如果报错如下：<br>ossl_pkey_ec.c:815: error: ‘EC_GROUP_new_curve_GF2m’ undeclared (first use in this function)<br>需要安装补丁，也就是替换两个ssl库文件，以下为该补丁文件打包下载地址<br>详见：<a href=\"https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808\">https://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808</a><br>解决方法：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd ruby-<span class=\"number\">2.3</span>.<span class=\"number\">1</span></div><div class=\"line\">wget --no-check-certificate https:<span class=\"comment\">//bugs.ruby-lang.org/projects/rubytrunk/repository/revisions/41808/raw/ext/openssl/ossl_pkey_ec.c</span></div><div class=\"line\">wget --no-check-certificate https:<span class=\"comment\">//bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/41808/raw/test/openssl/test_pkey_ec.rb</span></div><div class=\"line\">mv ext/openssl/ossl_pkey_ec<span class=\"selector-class\">.c</span>  ext/openssl/ossl_pkey_ec<span class=\"selector-class\">.c</span><span class=\"selector-class\">.bak</span></div><div class=\"line\">cp ossl_pkey_ec<span class=\"selector-class\">.c</span> ext/openssl/</div><div class=\"line\">mv test/openssl/test_pkey_ec<span class=\"selector-class\">.rb</span> test/openssl/test_pkey_ec<span class=\"selector-class\">.rb</span><span class=\"selector-class\">.bak</span></div><div class=\"line\">cp test_pkey_ec<span class=\"selector-class\">.rb</span>  test/openssl/</div></pre></td></tr></table></figure></p>\n<p>重新编译：<br><code>make &amp;&amp; make install</code></p>\n<p>将ruby命令集加入系统环境变量<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"PATH=$PATH:/usr/local/ruby/bin;export PATH\"</span> &gt;&gt; /etc/<span class=\"keyword\">profile</span></div><div class=\"line\"><span class=\"keyword\">source</span> /etc/<span class=\"keyword\">profile</span></div></pre></td></tr></table></figure></p>\n<p>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>\n<hr>\n<h1 id=\"Mac10-12\"><a href=\"#Mac10-12\" class=\"headerlink\" title=\"Mac10.12\"></a>Mac10.12</h1><p>mac在10.11之后的版本，安全机制发生了变更，/usr/local/目录已经没有写权限了。</p>\n<ul>\n<li>xcode升级到8.0及以上版本</li>\n</ul>\n<p>不要用mac自带的ruby及brew方式安装ruby，容易出各种错误。<br>安装rvm（ruby的版本控制器）<a href=\"https://github.com/rvm/rvm\">https://github.com/rvm/rvm</a><br><code>curl -L https://get.rvm.io | bash -s stable --autolibs=enabled --ruby --rails --trace</code><br>可能会有警告，有提示把某一句加入/Users/用户名/.bash_profile 中，重开终端。<code>rvm -v</code>显示版本，说明安装成功。</p>\n<p>安装homebrew （官网<a href=\"http://brew.sh/index_zh-cn.html）\">http://brew.sh/index_zh-cn.html）</a></p>\n<p>github:<a href=\"https://github.com/Homebrew/homebrew\">https://github.com/Homebrew/homebrew</a></p>\n<p><code>/usr/bin/ruby</code>使用的是mac自带的2.0版本的ruby，也可以直接用ruby使用新版本的ruby。<br><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">/usr/bin/ruby -e <span class=\"string\">\"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"</span></div></pre></td></tr></table></figure></p>\n<p><code>brew -v</code></p>\n<p>列出ruby可安装的版本信息<br><code>rvm list known</code><br>安装一个ruby版本<br><code>rvm install 2.3.1</code><br>如果想设置为默认版本，可以用这条命令来完成<br><code>rvm use 2.3.1 --default</code>     一般上一步安装好就已经设为默认了<br>查看已安装的ruby<br><code>rvm list</code><br>卸载一个已安装ruby版本<br><code>rvm remove 2.3.1</code><br><code>ruby -v</code><br>会发现版本号变成最新的啦！</p>\n<p>检查ruby版本<br><code>ruby -v</code><br><code>gem --version</code><br> irb     环境测试<br>irb(main):001:0&gt; 3+5<br>=&gt; 8<br>irb(main):002:0&gt; puts “hello world!”<br>hello world!<br>irb(main):001:0&gt;exit</p>\n<p>安装各种扩展（可选）<br>rails：ruby web框架<br><code>gem install rails</code></p>\n<hr>\n<h1 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h1><p>直接到官网下载：<br><a href=\"http://rubyinstaller.org/downloads\">http://rubyinstaller.org/downloads</a><br><a href=\"http://www.ruby-lang.org/zh_cn/downloads/\">http://www.ruby-lang.org/zh_cn/downloads/</a> （源码）<br>安装时勾选自动添加PATH，安装完成后重启生效。<br>也可以cmd运行 <code>set a = b</code> 然后重开cmd，环境变量就生效了。</p>\n<hr>\n<h1 id=\"Ruby源\"><a href=\"#Ruby源\" class=\"headerlink\" title=\"Ruby源\"></a>Ruby源</h1><p>国外源如果屏蔽了，更改gem安装源到淘宝，每条命令都有成功提示<br><code>gem update --system</code>     #升级gem版本<br><code>gem uninstall rubygems-update</code>    #移除gem升级脚本<br><code>gem sources --remove https://rubygems.org/</code><br><code>gem sources -a https://ruby.taobao.org/</code><br><code>gem sources -l</code></p>\n<ul>\n<li><p>windows 不要更换源，添加不了淘宝源，就换回原来的源。</p>\n</li>\n<li><p>Mac 如果报-SSL错误请把https改为http。<br><strong><em> CURRENT SOURCES </em></strong><br><a href=\"http://ruby.taobao.org/\">http://ruby.taobao.org/</a></p>\n</li>\n</ul>\n<hr>\n"},{"title":"CentOS 7安装配置LAMP服务器","abbrlink":60501,"date":"2016-11-02T04:21:52.000Z","_content":"\n# CentOS 7搭建LAMP环境(Apache+PHP+MariaDB)\n\n在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP\n**http://www.centos.bz/2013/08/ezhttp-tutorial/**\n \n## 准备篇（可跳过此步）：\n### 一、配置防火墙，开启80端口、3306端口\nCentOS 7默认使用的是firewall作为防火墙，这里改为iptables防火墙。\n#### 1、关闭firewall：\n```\nsystemctl stop firewalld.service #停止firewall\nsystemctl disable firewalld.service #禁止firewall开机启动```\n#### 2、安装iptables防火墙\n```\nyum install iptables-services #安装\nvim /etc/sysconfig/iptables #编辑防火墙配置文件```\n增加规则：\n```\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT```\n:wq! #保存退出\n```\nsystemctl restart iptables #最后重启防火墙使配置生效\nsystemctl enable iptables #设置防火墙开机启动```\n### 二、关闭SELINUX\n```\nvim /etc/selinux/config\n#SELINUX=enforcing #注释掉\n#SELINUXTYPE=targeted #注释掉\nSELINUX=disabled #增加```\n:wq! #保存退出\n`setenforce 0` #使配置立即生效\n---\n## 安装篇：\n一、安装MariaDB\nCentOS 7.0中，已经使用MariaDB替代了MySQL数据库\n#### 1、安装MariaDB\n```\nyum install mariadb mariadb-server -y\nsystemctl start mariadb #启动MariaDB```\n\n`cp /usr/share/mysql/my-huge.cnf /etc/my.cnf` 拷贝配置文件（注意：如果/etc目录下面默认有一个my.cnf，直接覆盖即可）\n#### 2、为root账户设置密码\n`mysql_secure_installation`\n\n* 回车，根据提示输入Y\n* 输入2次密码，回车\n* 根据提示一路输入Y\n* 最后出现：Thanks for using MySQL!\n* MariaDB密码设置完成，重新启动 MariaDB：\n`systemctl restart mariadb` #重启MariaDB\n\n#### 3、安装Apache和PHP\n```\nyum install http php php-mysql php-gd libjpeg* php-ldap php-odbc php-pear php-xml php-xmlrpc php-mbstring php-bcmath php-mhash -y\nsystemctl restart mariadb  #重启MariaDB\nsystemctl enable mariadb #设置开机启动\nsystemctl start httpd #启动apache\nsystemctl enable httpd #设置apache开机启动```\n\n在客户端浏览器中打开服务器IP地址，会出现测试界面，说明apache安装成功\n\n---\n\n## 配置篇:\n### 一、Apache配置\n`vim /etc/httpd/conf/httpd.conf` 编辑配置文件\n\n* ServerSignature On  #添加，在错误页中显示Apache的版本，Off为不显示\n* Options Indexes FollowSymLinks  #修改为：Options Includes ExecCGI FollowSymLinks（允许服务器执行CGI及SSI，禁止列出目录）\n* #AddHandler cgi-script .cgi　取消注释（允许扩展名为.pl的CGI脚本运行）\n* AllowOverride None　 #修改为：AllowOverride All （允许.htaccess）\n* AddDefaultCharset UTF-8　#修改为：AddDefaultCharset GB2312　（添加GB2312为默认编码）\n* #Options Indexes FollowSymLinks   #修改为 Options FollowSymLinks（不在浏览器上显示树状目录结构）\n* DirectoryIndex index.html   #修改为：DirectoryIndex index.html index.htm\n* Default.html Default.htmindex.php（设置默认首页文件，增加index.php）\n* MaxKeepAliveRequests 500  #添加MaxKeepAliveRequests 500 （增加同时连接数）\n\n:wq! #保存退出\n`systemctl restart httpd`重启apache\n`rm -f /etc/httpd/conf.d/welcome.conf /var/www/error/noindex.html` 删除默认测试页\n\n---\n\n### 二、php配置\n`vim /etc/php.ini` 编辑配置文件\n\n* date.timezone = PRC #把前面的分号去掉，改为date.timezone = PRC\n* (这里列出了PHP禁用的函数，如果某些程序需要用到这个函数，可以删除，取消禁用。)\n```\ndisable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,getservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd, posix_getegid,posix_geteuid,posix_getgid, posix_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid, posix_getppid,posix_getpwnam,posix_getpwuid, posix_getrlimit, posix_getsid,posix_getuid,posix_isatty, posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid, posix_setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname \n```\n* expose_php = Off #禁止显示php版本的信息\n* short_open_tag = ON #支持php短标签\n* open_basedir = .:/tmp/  (设置表示允许访问当前目录(即PHP脚本文件所在之目录)和/tmp/目录,可以防止php木马跨站,如果改了之后安装程序有问题(例如：织梦内容管理系统)，可以注销此行，或者直接写上程序的目录/data/www.osyunwei.com/:/tmp/)\n* \n:wq! #保存退出\n```\nsystemctl restart mariadb #重启MariaDB\nsystemctl restart httpd #重启apache```\n测试篇\n```cd /var/www/html\nvim index.php #输入下面内容```\n```php\n<?php\nphpinfo();\n?>\n```\n:wq! #保存退出\n在客户端浏览器输入服务器IP地址，可以看到相关的配置信息！\n\n注意：apache默认的程序目录是**/var/www/html**\n权限设置：`chown apache.apache -R /var/www/html`\n\n参考：http://www.osyunwei.com/archives/7829.html\n\n---","source":"_posts/环境搭建/2016-11-02-CentOS-7安装配置LAMP服务器.md","raw":"---\ntitle: CentOS 7安装配置LAMP服务器\ncategories:\n  - 环境搭建\ntags:\n  - Centos7 lanm\nabbrlink: 60501\ndate: 2016-11-02 12:21:52\n---\n\n# CentOS 7搭建LAMP环境(Apache+PHP+MariaDB)\n\n在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP\n**http://www.centos.bz/2013/08/ezhttp-tutorial/**\n \n## 准备篇（可跳过此步）：\n### 一、配置防火墙，开启80端口、3306端口\nCentOS 7默认使用的是firewall作为防火墙，这里改为iptables防火墙。\n#### 1、关闭firewall：\n```\nsystemctl stop firewalld.service #停止firewall\nsystemctl disable firewalld.service #禁止firewall开机启动```\n#### 2、安装iptables防火墙\n```\nyum install iptables-services #安装\nvim /etc/sysconfig/iptables #编辑防火墙配置文件```\n增加规则：\n```\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT```\n:wq! #保存退出\n```\nsystemctl restart iptables #最后重启防火墙使配置生效\nsystemctl enable iptables #设置防火墙开机启动```\n### 二、关闭SELINUX\n```\nvim /etc/selinux/config\n#SELINUX=enforcing #注释掉\n#SELINUXTYPE=targeted #注释掉\nSELINUX=disabled #增加```\n:wq! #保存退出\n`setenforce 0` #使配置立即生效\n---\n## 安装篇：\n一、安装MariaDB\nCentOS 7.0中，已经使用MariaDB替代了MySQL数据库\n#### 1、安装MariaDB\n```\nyum install mariadb mariadb-server -y\nsystemctl start mariadb #启动MariaDB```\n\n`cp /usr/share/mysql/my-huge.cnf /etc/my.cnf` 拷贝配置文件（注意：如果/etc目录下面默认有一个my.cnf，直接覆盖即可）\n#### 2、为root账户设置密码\n`mysql_secure_installation`\n\n* 回车，根据提示输入Y\n* 输入2次密码，回车\n* 根据提示一路输入Y\n* 最后出现：Thanks for using MySQL!\n* MariaDB密码设置完成，重新启动 MariaDB：\n`systemctl restart mariadb` #重启MariaDB\n\n#### 3、安装Apache和PHP\n```\nyum install http php php-mysql php-gd libjpeg* php-ldap php-odbc php-pear php-xml php-xmlrpc php-mbstring php-bcmath php-mhash -y\nsystemctl restart mariadb  #重启MariaDB\nsystemctl enable mariadb #设置开机启动\nsystemctl start httpd #启动apache\nsystemctl enable httpd #设置apache开机启动```\n\n在客户端浏览器中打开服务器IP地址，会出现测试界面，说明apache安装成功\n\n---\n\n## 配置篇:\n### 一、Apache配置\n`vim /etc/httpd/conf/httpd.conf` 编辑配置文件\n\n* ServerSignature On  #添加，在错误页中显示Apache的版本，Off为不显示\n* Options Indexes FollowSymLinks  #修改为：Options Includes ExecCGI FollowSymLinks（允许服务器执行CGI及SSI，禁止列出目录）\n* #AddHandler cgi-script .cgi　取消注释（允许扩展名为.pl的CGI脚本运行）\n* AllowOverride None　 #修改为：AllowOverride All （允许.htaccess）\n* AddDefaultCharset UTF-8　#修改为：AddDefaultCharset GB2312　（添加GB2312为默认编码）\n* #Options Indexes FollowSymLinks   #修改为 Options FollowSymLinks（不在浏览器上显示树状目录结构）\n* DirectoryIndex index.html   #修改为：DirectoryIndex index.html index.htm\n* Default.html Default.htmindex.php（设置默认首页文件，增加index.php）\n* MaxKeepAliveRequests 500  #添加MaxKeepAliveRequests 500 （增加同时连接数）\n\n:wq! #保存退出\n`systemctl restart httpd`重启apache\n`rm -f /etc/httpd/conf.d/welcome.conf /var/www/error/noindex.html` 删除默认测试页\n\n---\n\n### 二、php配置\n`vim /etc/php.ini` 编辑配置文件\n\n* date.timezone = PRC #把前面的分号去掉，改为date.timezone = PRC\n* (这里列出了PHP禁用的函数，如果某些程序需要用到这个函数，可以删除，取消禁用。)\n```\ndisable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,getservbyname,getservbyport,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd, posix_getegid,posix_geteuid,posix_getgid, posix_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid, posix_getppid,posix_getpwnam,posix_getpwuid, posix_getrlimit, posix_getsid,posix_getuid,posix_isatty, posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid, posix_setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname \n```\n* expose_php = Off #禁止显示php版本的信息\n* short_open_tag = ON #支持php短标签\n* open_basedir = .:/tmp/  (设置表示允许访问当前目录(即PHP脚本文件所在之目录)和/tmp/目录,可以防止php木马跨站,如果改了之后安装程序有问题(例如：织梦内容管理系统)，可以注销此行，或者直接写上程序的目录/data/www.osyunwei.com/:/tmp/)\n* \n:wq! #保存退出\n```\nsystemctl restart mariadb #重启MariaDB\nsystemctl restart httpd #重启apache```\n测试篇\n```cd /var/www/html\nvim index.php #输入下面内容```\n```php\n<?php\nphpinfo();\n?>\n```\n:wq! #保存退出\n在客户端浏览器输入服务器IP地址，可以看到相关的配置信息！\n\n注意：apache默认的程序目录是**/var/www/html**\n权限设置：`chown apache.apache -R /var/www/html`\n\n参考：http://www.osyunwei.com/archives/7829.html\n\n---","slug":"环境搭建-2016-11-02-CentOS-7安装配置LAMP服务器","published":1,"updated":"2016-11-21T02:17:08.980Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjn10027d8pkmfcusxnr","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"CentOS-7搭建LAMP环境-Apache-PHP-MariaDB\"><a href=\"#CentOS-7搭建LAMP环境-Apache-PHP-MariaDB\" class=\"headerlink\" title=\"CentOS 7搭建LAMP环境(Apache+PHP+MariaDB)\"></a>CentOS 7搭建LAMP环境(Apache+PHP+MariaDB)</h1><p>在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP<br><strong><a href=\"http://www.centos.bz/2013/08/ezhttp-tutorial/\" target=\"_blank\" rel=\"external\">http://www.centos.bz/2013/08/ezhttp-tutorial/</a></strong></p>\n<h2 id=\"准备篇（可跳过此步）：\"><a href=\"#准备篇（可跳过此步）：\" class=\"headerlink\" title=\"准备篇（可跳过此步）：\"></a>准备篇（可跳过此步）：</h2><h3 id=\"一、配置防火墙，开启80端口、3306端口\"><a href=\"#一、配置防火墙，开启80端口、3306端口\" class=\"headerlink\" title=\"一、配置防火墙，开启80端口、3306端口\"></a>一、配置防火墙，开启80端口、3306端口</h3><p>CentOS 7默认使用的是firewall作为防火墙，这里改为iptables防火墙。</p>\n<h4 id=\"1、关闭firewall：\"><a href=\"#1、关闭firewall：\" class=\"headerlink\" title=\"1、关闭firewall：\"></a>1、关闭firewall：</h4><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl <span class=\"keyword\">stop</span> firewalld.service <span class=\"meta\">#停止firewall</span></div><div class=\"line\">systemctl <span class=\"keyword\">disable</span> firewalld.service <span class=\"meta\">#禁止firewall开机启动</span></div></pre></td></tr></table></figure>\n<h4 id=\"2、安装iptables防火墙\"><a href=\"#2、安装iptables防火墙\" class=\"headerlink\" title=\"2、安装iptables防火墙\"></a>2、安装iptables防火墙</h4><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> iptables-services <span class=\"comment\">#安装</span></div><div class=\"line\">vim /etc/sysconfig/iptables <span class=\"comment\">#编辑防火墙配置文件</span></div></pre></td></tr></table></figure>\n<p>增加规则：<br><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">22</span> -j ACCEPT</div><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">3306</span> -j ACCEPT</div></pre></td></tr></table></figure></p>\n<p>:wq! #保存退出<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl restart iptables <span class=\"comment\">#最后重启防火墙使配置生效</span></div><div class=\"line\">systemctl <span class=\"built_in\">enable</span> iptables <span class=\"comment\">#设置防火墙开机启动</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"二、关闭SELINUX\"><a href=\"#二、关闭SELINUX\" class=\"headerlink\" title=\"二、关闭SELINUX\"></a>二、关闭SELINUX</h3><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim <span class=\"meta-keyword\">/etc/</span>selinux/config</div><div class=\"line\"><span class=\"meta\">#SELINUX=enforcing #注释掉</span></div><div class=\"line\"><span class=\"meta\">#SELINUXTYPE=targeted #注释掉</span></div><div class=\"line\">SELINUX=disabled <span class=\"meta\">#增加</span></div></pre></td></tr></table></figure>\n<p>:wq! #保存退出</p>\n<h2 id=\"setenforce-0-使配置立即生效\"><a href=\"#setenforce-0-使配置立即生效\" class=\"headerlink\" title=\"setenforce 0 #使配置立即生效\"></a><code>setenforce 0</code> #使配置立即生效</h2><h2 id=\"安装篇：\"><a href=\"#安装篇：\" class=\"headerlink\" title=\"安装篇：\"></a>安装篇：</h2><p>一、安装MariaDB<br>CentOS 7.0中，已经使用MariaDB替代了MySQL数据库</p>\n<h4 id=\"1、安装MariaDB\"><a href=\"#1、安装MariaDB\" class=\"headerlink\" title=\"1、安装MariaDB\"></a>1、安装MariaDB</h4><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">yum</span> install <span class=\"keyword\">mariadb </span><span class=\"keyword\">mariadb-server </span>-y</div><div class=\"line\"><span class=\"symbol\">systemctl</span> start <span class=\"keyword\">mariadb </span>#启动<span class=\"keyword\">MariaDB</span></div></pre></td></tr></table></figure>\n<p><code>cp /usr/share/mysql/my-huge.cnf /etc/my.cnf</code> 拷贝配置文件（注意：如果/etc目录下面默认有一个my.cnf，直接覆盖即可）</p>\n<h4 id=\"2、为root账户设置密码\"><a href=\"#2、为root账户设置密码\" class=\"headerlink\" title=\"2、为root账户设置密码\"></a>2、为root账户设置密码</h4><p><code>mysql_secure_installation</code></p>\n<ul>\n<li>回车，根据提示输入Y</li>\n<li>输入2次密码，回车</li>\n<li>根据提示一路输入Y</li>\n<li>最后出现：Thanks for using MySQL!</li>\n<li>MariaDB密码设置完成，重新启动 MariaDB：<br><code>systemctl restart mariadb</code> #重启MariaDB</li>\n</ul>\n<h4 id=\"3、安装Apache和PHP\"><a href=\"#3、安装Apache和PHP\" class=\"headerlink\" title=\"3、安装Apache和PHP\"></a>3、安装Apache和PHP</h4><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install http php php-mysql php-gd libjpeg* php-ldap php-odbc php-pear php-<span class=\"keyword\">xml</span> <span class=\"title\">php-xmlrpc</span> php-mbstring php-bcmath php-mhash -y</div><div class=\"line\">systemctl restart mariadb  <span class=\"comment\">#重启MariaDB</span></div><div class=\"line\">systemctl enable mariadb <span class=\"comment\">#设置开机启动</span></div><div class=\"line\">systemctl <span class=\"literal\">start</span> httpd <span class=\"comment\">#启动apache</span></div><div class=\"line\">systemctl enable httpd <span class=\"comment\">#设置apache开机启动</span></div></pre></td></tr></table></figure>\n<p>在客户端浏览器中打开服务器IP地址，会出现测试界面，说明apache安装成功</p>\n<hr>\n<h2 id=\"配置篇\"><a href=\"#配置篇\" class=\"headerlink\" title=\"配置篇:\"></a>配置篇:</h2><h3 id=\"一、Apache配置\"><a href=\"#一、Apache配置\" class=\"headerlink\" title=\"一、Apache配置\"></a>一、Apache配置</h3><p><code>vim /etc/httpd/conf/httpd.conf</code> 编辑配置文件</p>\n<ul>\n<li>ServerSignature On  #添加，在错误页中显示Apache的版本，Off为不显示</li>\n<li>Options Indexes FollowSymLinks  #修改为：Options Includes ExecCGI FollowSymLinks（允许服务器执行CGI及SSI，禁止列出目录）</li>\n<li>#AddHandler cgi-script .cgi　取消注释（允许扩展名为.pl的CGI脚本运行）</li>\n<li>AllowOverride None　 #修改为：AllowOverride All （允许.htaccess）</li>\n<li>AddDefaultCharset UTF-8　#修改为：AddDefaultCharset GB2312　（添加GB2312为默认编码）</li>\n<li>#Options Indexes FollowSymLinks   #修改为 Options FollowSymLinks（不在浏览器上显示树状目录结构）</li>\n<li>DirectoryIndex index.html   #修改为：DirectoryIndex index.html index.htm</li>\n<li>Default.html Default.htmindex.php（设置默认首页文件，增加index.php）</li>\n<li>MaxKeepAliveRequests 500  #添加MaxKeepAliveRequests 500 （增加同时连接数）</li>\n</ul>\n<p>:wq! #保存退出<br><code>systemctl restart httpd</code>重启apache<br><code>rm -f /etc/httpd/conf.d/welcome.conf /var/www/error/noindex.html</code> 删除默认测试页</p>\n<hr>\n<h3 id=\"二、php配置\"><a href=\"#二、php配置\" class=\"headerlink\" title=\"二、php配置\"></a>二、php配置</h3><p><code>vim /etc/php.ini</code> 编辑配置文件</p>\n<ul>\n<li>date.timezone = PRC #把前面的分号去掉，改为date.timezone = PRC</li>\n<li><p>(这里列出了PHP禁用的函数，如果某些程序需要用到这个函数，可以删除，取消禁用。)</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">disable_functions = passthru,<span class=\"keyword\">exec</span>,<span class=\"keyword\">system</span>,<span class=\"keyword\">chroot</span>,scandir,chgrp,<span class=\"keyword\">chown</span>,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,openlog,syslog,<span class=\"keyword\">readlink</span>,<span class=\"keyword\">symlink</span>,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,<span class=\"keyword\">getservbyname</span>,<span class=\"keyword\">getservbyport</span>,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd, posix_getegid,posix_geteuid,posix_getgid, posix_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid, posix_getppid,posix_getpwnam,posix_getpwuid, posix_getrlimit, posix_getsid,posix_getuid,posix_isatty, posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid, posix_setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</div></pre></td></tr></table></figure>\n</li>\n<li><p>expose_php = Off #禁止显示php版本的信息</p>\n</li>\n<li>short_open_tag = ON #支持php短标签</li>\n<li>open_basedir = .:/tmp/  (设置表示允许访问当前目录(即PHP脚本文件所在之目录)和/tmp/目录,可以防止php木马跨站,如果改了之后安装程序有问题(例如：织梦内容管理系统)，可以注销此行，或者直接写上程序的目录/data/www.osyunwei.com/:/tmp/)</li>\n<li>:wq! #保存退出<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">systemctl</span> restart mariadb <span class=\"comment\">#重启MariaDB</span></div><div class=\"line\">systemctl restart httpd <span class=\"comment\">#重启apache</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>测试篇<br><figure class=\"highlight plain\"><figcaption><span>/var/www/html</span></figcaption><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim index.php #输入下面内容</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">phpinfo();</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<p>:wq! #保存退出<br>在客户端浏览器输入服务器IP地址，可以看到相关的配置信息！</p>\n<p>注意：apache默认的程序目录是<strong>/var/www/html</strong><br>权限设置：<code>chown apache.apache -R /var/www/html</code></p>\n<p>参考：<a href=\"http://www.osyunwei.com/archives/7829.html\" target=\"_blank\" rel=\"external\">http://www.osyunwei.com/archives/7829.html</a></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"CentOS-7搭建LAMP环境-Apache-PHP-MariaDB\"><a href=\"#CentOS-7搭建LAMP环境-Apache-PHP-MariaDB\" class=\"headerlink\" title=\"CentOS 7搭建LAMP环境(Apache+PHP+MariaDB)\"></a>CentOS 7搭建LAMP环境(Apache+PHP+MariaDB)</h1><p>在CentOS上搭建PHP服务器环境,可以使用一键自动部署环境的工具，请参见网友开发的这个工具LAMP，LNMP，LNAMP<br><strong><a href=\"http://www.centos.bz/2013/08/ezhttp-tutorial/\">http://www.centos.bz/2013/08/ezhttp-tutorial/</a></strong></p>\n<h2 id=\"准备篇（可跳过此步）：\"><a href=\"#准备篇（可跳过此步）：\" class=\"headerlink\" title=\"准备篇（可跳过此步）：\"></a>准备篇（可跳过此步）：</h2><h3 id=\"一、配置防火墙，开启80端口、3306端口\"><a href=\"#一、配置防火墙，开启80端口、3306端口\" class=\"headerlink\" title=\"一、配置防火墙，开启80端口、3306端口\"></a>一、配置防火墙，开启80端口、3306端口</h3><p>CentOS 7默认使用的是firewall作为防火墙，这里改为iptables防火墙。</p>\n<h4 id=\"1、关闭firewall：\"><a href=\"#1、关闭firewall：\" class=\"headerlink\" title=\"1、关闭firewall：\"></a>1、关闭firewall：</h4><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl <span class=\"keyword\">stop</span> firewalld.service <span class=\"meta\">#停止firewall</span></div><div class=\"line\">systemctl <span class=\"keyword\">disable</span> firewalld.service <span class=\"meta\">#禁止firewall开机启动</span></div></pre></td></tr></table></figure>\n<h4 id=\"2、安装iptables防火墙\"><a href=\"#2、安装iptables防火墙\" class=\"headerlink\" title=\"2、安装iptables防火墙\"></a>2、安装iptables防火墙</h4><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> iptables-services <span class=\"comment\">#安装</span></div><div class=\"line\">vim /etc/sysconfig/iptables <span class=\"comment\">#编辑防火墙配置文件</span></div></pre></td></tr></table></figure>\n<p>增加规则：<br><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">22</span> -j ACCEPT</div><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">3306</span> -j ACCEPT</div></pre></td></tr></table></figure></p>\n<p>:wq! #保存退出<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl restart iptables <span class=\"comment\">#最后重启防火墙使配置生效</span></div><div class=\"line\">systemctl <span class=\"built_in\">enable</span> iptables <span class=\"comment\">#设置防火墙开机启动</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"二、关闭SELINUX\"><a href=\"#二、关闭SELINUX\" class=\"headerlink\" title=\"二、关闭SELINUX\"></a>二、关闭SELINUX</h3><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim <span class=\"meta-keyword\">/etc/</span>selinux/config</div><div class=\"line\"><span class=\"meta\">#SELINUX=enforcing #注释掉</span></div><div class=\"line\"><span class=\"meta\">#SELINUXTYPE=targeted #注释掉</span></div><div class=\"line\">SELINUX=disabled <span class=\"meta\">#增加</span></div></pre></td></tr></table></figure>\n<p>:wq! #保存退出</p>\n<h2 id=\"setenforce-0-使配置立即生效\"><a href=\"#setenforce-0-使配置立即生效\" class=\"headerlink\" title=\"setenforce 0 #使配置立即生效\"></a><code>setenforce 0</code> #使配置立即生效</h2><h2 id=\"安装篇：\"><a href=\"#安装篇：\" class=\"headerlink\" title=\"安装篇：\"></a>安装篇：</h2><p>一、安装MariaDB<br>CentOS 7.0中，已经使用MariaDB替代了MySQL数据库</p>\n<h4 id=\"1、安装MariaDB\"><a href=\"#1、安装MariaDB\" class=\"headerlink\" title=\"1、安装MariaDB\"></a>1、安装MariaDB</h4><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">yum</span> install <span class=\"keyword\">mariadb </span><span class=\"keyword\">mariadb-server </span>-y</div><div class=\"line\"><span class=\"symbol\">systemctl</span> start <span class=\"keyword\">mariadb </span>#启动<span class=\"keyword\">MariaDB</span></div></pre></td></tr></table></figure>\n<p><code>cp /usr/share/mysql/my-huge.cnf /etc/my.cnf</code> 拷贝配置文件（注意：如果/etc目录下面默认有一个my.cnf，直接覆盖即可）</p>\n<h4 id=\"2、为root账户设置密码\"><a href=\"#2、为root账户设置密码\" class=\"headerlink\" title=\"2、为root账户设置密码\"></a>2、为root账户设置密码</h4><p><code>mysql_secure_installation</code></p>\n<ul>\n<li>回车，根据提示输入Y</li>\n<li>输入2次密码，回车</li>\n<li>根据提示一路输入Y</li>\n<li>最后出现：Thanks for using MySQL!</li>\n<li>MariaDB密码设置完成，重新启动 MariaDB：<br><code>systemctl restart mariadb</code> #重启MariaDB</li>\n</ul>\n<h4 id=\"3、安装Apache和PHP\"><a href=\"#3、安装Apache和PHP\" class=\"headerlink\" title=\"3、安装Apache和PHP\"></a>3、安装Apache和PHP</h4><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install http php php-mysql php-gd libjpeg* php-ldap php-odbc php-pear php-<span class=\"keyword\">xml</span> <span class=\"title\">php-xmlrpc</span> php-mbstring php-bcmath php-mhash -y</div><div class=\"line\">systemctl restart mariadb  <span class=\"comment\">#重启MariaDB</span></div><div class=\"line\">systemctl enable mariadb <span class=\"comment\">#设置开机启动</span></div><div class=\"line\">systemctl <span class=\"literal\">start</span> httpd <span class=\"comment\">#启动apache</span></div><div class=\"line\">systemctl enable httpd <span class=\"comment\">#设置apache开机启动</span></div></pre></td></tr></table></figure>\n<p>在客户端浏览器中打开服务器IP地址，会出现测试界面，说明apache安装成功</p>\n<hr>\n<h2 id=\"配置篇\"><a href=\"#配置篇\" class=\"headerlink\" title=\"配置篇:\"></a>配置篇:</h2><h3 id=\"一、Apache配置\"><a href=\"#一、Apache配置\" class=\"headerlink\" title=\"一、Apache配置\"></a>一、Apache配置</h3><p><code>vim /etc/httpd/conf/httpd.conf</code> 编辑配置文件</p>\n<ul>\n<li>ServerSignature On  #添加，在错误页中显示Apache的版本，Off为不显示</li>\n<li>Options Indexes FollowSymLinks  #修改为：Options Includes ExecCGI FollowSymLinks（允许服务器执行CGI及SSI，禁止列出目录）</li>\n<li>#AddHandler cgi-script .cgi　取消注释（允许扩展名为.pl的CGI脚本运行）</li>\n<li>AllowOverride None　 #修改为：AllowOverride All （允许.htaccess）</li>\n<li>AddDefaultCharset UTF-8　#修改为：AddDefaultCharset GB2312　（添加GB2312为默认编码）</li>\n<li>#Options Indexes FollowSymLinks   #修改为 Options FollowSymLinks（不在浏览器上显示树状目录结构）</li>\n<li>DirectoryIndex index.html   #修改为：DirectoryIndex index.html index.htm</li>\n<li>Default.html Default.htmindex.php（设置默认首页文件，增加index.php）</li>\n<li>MaxKeepAliveRequests 500  #添加MaxKeepAliveRequests 500 （增加同时连接数）</li>\n</ul>\n<p>:wq! #保存退出<br><code>systemctl restart httpd</code>重启apache<br><code>rm -f /etc/httpd/conf.d/welcome.conf /var/www/error/noindex.html</code> 删除默认测试页</p>\n<hr>\n<h3 id=\"二、php配置\"><a href=\"#二、php配置\" class=\"headerlink\" title=\"二、php配置\"></a>二、php配置</h3><p><code>vim /etc/php.ini</code> 编辑配置文件</p>\n<ul>\n<li>date.timezone = PRC #把前面的分号去掉，改为date.timezone = PRC</li>\n<li><p>(这里列出了PHP禁用的函数，如果某些程序需要用到这个函数，可以删除，取消禁用。)</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">disable_functions = passthru,<span class=\"keyword\">exec</span>,<span class=\"keyword\">system</span>,<span class=\"keyword\">chroot</span>,scandir,chgrp,<span class=\"keyword\">chown</span>,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,openlog,syslog,<span class=\"keyword\">readlink</span>,<span class=\"keyword\">symlink</span>,popepassthru,stream_socket_server,escapeshellcmd,dll,popen,disk_free_space,checkdnsrr,checkdnsrr,<span class=\"keyword\">getservbyname</span>,<span class=\"keyword\">getservbyport</span>,disk_total_space,posix_ctermid,posix_get_last_error,posix_getcwd, posix_getegid,posix_geteuid,posix_getgid, posix_getgrgid,posix_getgrnam,posix_getgroups,posix_getlogin,posix_getpgid,posix_getpgrp,posix_getpid, posix_getppid,posix_getpwnam,posix_getpwuid, posix_getrlimit, posix_getsid,posix_getuid,posix_isatty, posix_kill,posix_mkfifo,posix_setegid,posix_seteuid,posix_setgid, posix_setpgid,posix_setsid,posix_setuid,posix_strerror,posix_times,posix_ttyname,posix_uname</div></pre></td></tr></table></figure>\n</li>\n<li><p>expose_php = Off #禁止显示php版本的信息</p>\n</li>\n<li>short_open_tag = ON #支持php短标签</li>\n<li>open_basedir = .:/tmp/  (设置表示允许访问当前目录(即PHP脚本文件所在之目录)和/tmp/目录,可以防止php木马跨站,如果改了之后安装程序有问题(例如：织梦内容管理系统)，可以注销此行，或者直接写上程序的目录/data/www.osyunwei.com/:/tmp/)</li>\n<li>:wq! #保存退出<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">systemctl</span> restart mariadb <span class=\"comment\">#重启MariaDB</span></div><div class=\"line\">systemctl restart httpd <span class=\"comment\">#重启apache</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>测试篇<br><figure class=\"highlight plain\"><figcaption><span>/var/www/html</span></figcaption><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim index.php #输入下面内容</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\">phpinfo();</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<p>:wq! #保存退出<br>在客户端浏览器输入服务器IP地址，可以看到相关的配置信息！</p>\n<p>注意：apache默认的程序目录是<strong>/var/www/html</strong><br>权限设置：<code>chown apache.apache -R /var/www/html</code></p>\n<p>参考：<a href=\"http://www.osyunwei.com/archives/7829.html\">http://www.osyunwei.com/archives/7829.html</a></p>\n<hr>\n"},{"title":"Node.js开发环境搭建","abbrlink":34025,"date":"2016-11-02T03:44:34.000Z","_content":"\n\n官网：https://nodejs.org \n# Mac、Windows\n官网下载对应的安装包安装即可。\n带有**Source Code**字样的才是源码；带有**linux** 字样的是编译好的文件，解压**bin**目录下可以看到**node、npm** 文件，复制到**/usr/local/bin/**下即可，**node_modules**目录是模块（不推荐，很多库及模块没有安装，这种方法我没有安装成功）。\n\n---\n\n# Ubuntu 16 、CentOS 7 \n## 法一：apt-get命令安装\n\n```\napt install nodejs-legacy nodejs npm\n```\n\n## 法二：源码安装(用root用户操作)\n \n**（6版本以下要升级g++及其他库，去官网下载带linux字样的编译好的版本简单点）**\n\n**gcc版本要4.8以上**\n\nCentos: **yum install g++ cmake gcc-c++ gmake -y**           \n\nUbuntu：**apt-get install python build-essential gcc g++**   \n\n```\ngit clone https://github.com/nodejs/node.git\nchmod -R 755 node\ncd node\n./configure    #指定安装目录加上--prefix=/usr/local/node/版本号\nmake\nmake install\n```\n\n也可在**https://nodejs.org/en/download/**下载Nodejs带**Source Code**字样的源码，`tar -zxvf filename` 解压，之后的操作是一样的。\n\n查看 node 版本：`node --version`\n\n命令无法运行的话,需要设置nodejs环境变量：\n`vim /etc/profile`\n在空行出添加以下内容：\n\n```\n\t#set for nodejs\n\t#若./configure时指定了安装路径则改为安装路径：/usr/local/node/版本号\n\texport NODE_HOME=/usr/bin/node  \t\n\texport PATH=$NODE_HOME/bin:$PATH\n```\n\n保存并退出，编译**/etc/profile** 使配置生效\n\n`source /etc/profile`\n\n现在就可以正常使用啦！\n\nnpm模块安装路径\n默认：**/usr/local/lib/node_modules**\n\n指定路径：**/usr/local/node/版本号/lib/node_modules**\n\n---\n\n# 淘宝 NPM 镜像源\n国内直接使用 npm 的官方镜像可能非常慢的，可以使用淘宝 NPM 镜像。\n淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。\n**http://npm.taobao.org/**\n## 方法一、通过config命令\n\n```\nnpm config set registry https://registry.npm.taobao.org\nnpm info underscore #（如果上面配置正确这个命令会有字符串response） \n```\n\n## 方法二、命令行指定\n`npm --registry https://registry.npm.taobao.org info underscore` \n\n## 方法三、编辑 ~/.npmrc 加入下面内容\n`registry = https://registry.npm.taobao.org`\n\n你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:\n(不推荐，这样自由手动安装是用cnpm,脚本安装还是用的默认npm)\n`npm install -g cnpm --registry=https://registry.npm.taobao.org`\n\n这样就可以使用 cnpm 命令来安装模块了：\n\n`cnpm install [name]`\n\n\nNode.js教程:\nhttp://www.runoob.com/nodejs/nodejs-npm.html\n\n---","source":"_posts/环境搭建/2016-11-02-Node-js开发环境搭建.md","raw":"---\ntitle: Node.js开发环境搭建\ncategories:\n  - 环境搭建\ntags:\n  - Node.js\nabbrlink: 34025\ndate: 2016-11-02 11:44:34\n---\n\n\n官网：https://nodejs.org \n# Mac、Windows\n官网下载对应的安装包安装即可。\n带有**Source Code**字样的才是源码；带有**linux** 字样的是编译好的文件，解压**bin**目录下可以看到**node、npm** 文件，复制到**/usr/local/bin/**下即可，**node_modules**目录是模块（不推荐，很多库及模块没有安装，这种方法我没有安装成功）。\n\n---\n\n# Ubuntu 16 、CentOS 7 \n## 法一：apt-get命令安装\n\n```\napt install nodejs-legacy nodejs npm\n```\n\n## 法二：源码安装(用root用户操作)\n \n**（6版本以下要升级g++及其他库，去官网下载带linux字样的编译好的版本简单点）**\n\n**gcc版本要4.8以上**\n\nCentos: **yum install g++ cmake gcc-c++ gmake -y**           \n\nUbuntu：**apt-get install python build-essential gcc g++**   \n\n```\ngit clone https://github.com/nodejs/node.git\nchmod -R 755 node\ncd node\n./configure    #指定安装目录加上--prefix=/usr/local/node/版本号\nmake\nmake install\n```\n\n也可在**https://nodejs.org/en/download/**下载Nodejs带**Source Code**字样的源码，`tar -zxvf filename` 解压，之后的操作是一样的。\n\n查看 node 版本：`node --version`\n\n命令无法运行的话,需要设置nodejs环境变量：\n`vim /etc/profile`\n在空行出添加以下内容：\n\n```\n\t#set for nodejs\n\t#若./configure时指定了安装路径则改为安装路径：/usr/local/node/版本号\n\texport NODE_HOME=/usr/bin/node  \t\n\texport PATH=$NODE_HOME/bin:$PATH\n```\n\n保存并退出，编译**/etc/profile** 使配置生效\n\n`source /etc/profile`\n\n现在就可以正常使用啦！\n\nnpm模块安装路径\n默认：**/usr/local/lib/node_modules**\n\n指定路径：**/usr/local/node/版本号/lib/node_modules**\n\n---\n\n# 淘宝 NPM 镜像源\n国内直接使用 npm 的官方镜像可能非常慢的，可以使用淘宝 NPM 镜像。\n淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。\n**http://npm.taobao.org/**\n## 方法一、通过config命令\n\n```\nnpm config set registry https://registry.npm.taobao.org\nnpm info underscore #（如果上面配置正确这个命令会有字符串response） \n```\n\n## 方法二、命令行指定\n`npm --registry https://registry.npm.taobao.org info underscore` \n\n## 方法三、编辑 ~/.npmrc 加入下面内容\n`registry = https://registry.npm.taobao.org`\n\n你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:\n(不推荐，这样自由手动安装是用cnpm,脚本安装还是用的默认npm)\n`npm install -g cnpm --registry=https://registry.npm.taobao.org`\n\n这样就可以使用 cnpm 命令来安装模块了：\n\n`cnpm install [name]`\n\n\nNode.js教程:\nhttp://www.runoob.com/nodejs/nodejs-npm.html\n\n---","slug":"环境搭建-2016-11-02-Node-js开发环境搭建","published":1,"updated":"2016-11-21T02:17:09.013Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjn3002ad8pkgg9a97gi","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>官网：<a href=\"https://nodejs.org\" target=\"_blank\" rel=\"external\">https://nodejs.org</a> </p>\n<h1 id=\"Mac、Windows\"><a href=\"#Mac、Windows\" class=\"headerlink\" title=\"Mac、Windows\"></a>Mac、Windows</h1><p>官网下载对应的安装包安装即可。<br>带有<strong>Source Code</strong>字样的才是源码；带有<strong>linux</strong> 字样的是编译好的文件，解压<strong>bin</strong>目录下可以看到<strong>node、npm</strong> 文件，复制到<strong>/usr/local/bin/</strong>下即可，<strong>node_modules</strong>目录是模块（不推荐，很多库及模块没有安装，这种方法我没有安装成功）。</p>\n<hr>\n<h1 id=\"Ubuntu-16-、CentOS-7\"><a href=\"#Ubuntu-16-、CentOS-7\" class=\"headerlink\" title=\"Ubuntu 16 、CentOS 7\"></a>Ubuntu 16 、CentOS 7</h1><h2 id=\"法一：apt-get命令安装\"><a href=\"#法一：apt-get命令安装\" class=\"headerlink\" title=\"法一：apt-get命令安装\"></a>法一：apt-get命令安装</h2><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt <span class=\"keyword\">install</span> nodejs-legacy nodejs npm</div></pre></td></tr></table></figure>\n<h2 id=\"法二：源码安装-用root用户操作\"><a href=\"#法二：源码安装-用root用户操作\" class=\"headerlink\" title=\"法二：源码安装(用root用户操作)\"></a>法二：源码安装(用root用户操作)</h2><p><strong>（6版本以下要升级g++及其他库，去官网下载带linux字样的编译好的版本简单点）</strong></p>\n<p><strong>gcc版本要4.8以上</strong></p>\n<p>Centos: <strong>yum install g++ cmake gcc-c++ gmake -y</strong>           </p>\n<p>Ubuntu：<strong>apt-get install python build-essential gcc g++</strong>   </p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/nodejs/<span class=\"keyword\">node</span>.<span class=\"title\">git</span></div><div class=\"line\">chmod -R <span class=\"number\">755</span> <span class=\"keyword\">node</span></div><div class=\"line\"><span class=\"title\">cd</span> <span class=\"keyword\">node</span></div><div class=\"line\"><span class=\"title\">./configure</span>    <span class=\"comment\">#指定安装目录加上--prefix=/usr/local/node/版本号</span></div><div class=\"line\">make</div><div class=\"line\">make install</div></pre></td></tr></table></figure>\n<p>也可在<strong><a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"external\">https://nodejs.org/en/download/</a></strong>下载Nodejs带<strong>Source Code</strong>字样的源码，<code>tar -zxvf filename</code> 解压，之后的操作是一样的。</p>\n<p>查看 node 版本：<code>node --version</code></p>\n<p>命令无法运行的话,需要设置nodejs环境变量：<br><code>vim /etc/profile</code><br>在空行出添加以下内容：</p>\n<figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">#<span class=\"keyword\">set</span> for <span class=\"comment\">nodejs</span></div><div class=\"line\">#若./configure时指定了安装路径则改为安装路径：/usr/local/node/版本号</div><div class=\"line\">export NODE_HOME=/usr/bin/node  \t</div><div class=\"line\">export <span class=\"comment\">PATH=$NODE_HOME</span>/bin:$PATH</div></pre></td></tr></table></figure>\n<p>保存并退出，编译<strong>/etc/profile</strong> 使配置生效</p>\n<p><code>source /etc/profile</code></p>\n<p>现在就可以正常使用啦！</p>\n<p>npm模块安装路径<br>默认：<strong>/usr/local/lib/node_modules</strong></p>\n<p>指定路径：<strong>/usr/local/node/版本号/lib/node_modules</strong></p>\n<hr>\n<h1 id=\"淘宝-NPM-镜像源\"><a href=\"#淘宝-NPM-镜像源\" class=\"headerlink\" title=\"淘宝 NPM 镜像源\"></a>淘宝 NPM 镜像源</h1><p>国内直接使用 npm 的官方镜像可能非常慢的，可以使用淘宝 NPM 镜像。<br>淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。<br><strong><a href=\"http://npm.taobao.org/\" target=\"_blank\" rel=\"external\">http://npm.taobao.org/</a></strong></p>\n<h2 id=\"方法一、通过config命令\"><a href=\"#方法一、通过config命令\" class=\"headerlink\" title=\"方法一、通过config命令\"></a>方法一、通过config命令</h2><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">npm</span> config set registry https:<span class=\"regexp\">//</span>registry.<span class=\"built_in\">npm</span>.taobao.org</div><div class=\"line\"><span class=\"built_in\">npm</span> info underscore <span class=\"comment\">#（如果上面配置正确这个命令会有字符串response）</span></div></pre></td></tr></table></figure>\n<h2 id=\"方法二、命令行指定\"><a href=\"#方法二、命令行指定\" class=\"headerlink\" title=\"方法二、命令行指定\"></a>方法二、命令行指定</h2><p><code>npm --registry https://registry.npm.taobao.org info underscore</code> </p>\n<h2 id=\"方法三、编辑-npmrc-加入下面内容\"><a href=\"#方法三、编辑-npmrc-加入下面内容\" class=\"headerlink\" title=\"方法三、编辑 ~/.npmrc 加入下面内容\"></a>方法三、编辑 ~/.npmrc 加入下面内容</h2><p><code>registry = https://registry.npm.taobao.org</code></p>\n<p>你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:<br>(不推荐，这样自由手动安装是用cnpm,脚本安装还是用的默认npm)<br><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p>\n<p>这样就可以使用 cnpm 命令来安装模块了：</p>\n<p><code>cnpm install [name]</code></p>\n<p>Node.js教程:<br><a href=\"http://www.runoob.com/nodejs/nodejs-npm.html\" target=\"_blank\" rel=\"external\">http://www.runoob.com/nodejs/nodejs-npm.html</a></p>\n<hr>\n","excerpt":"","more":"<p>官网：<a href=\"https://nodejs.org\">https://nodejs.org</a> </p>\n<h1 id=\"Mac、Windows\"><a href=\"#Mac、Windows\" class=\"headerlink\" title=\"Mac、Windows\"></a>Mac、Windows</h1><p>官网下载对应的安装包安装即可。<br>带有<strong>Source Code</strong>字样的才是源码；带有<strong>linux</strong> 字样的是编译好的文件，解压<strong>bin</strong>目录下可以看到<strong>node、npm</strong> 文件，复制到<strong>/usr/local/bin/</strong>下即可，<strong>node_modules</strong>目录是模块（不推荐，很多库及模块没有安装，这种方法我没有安装成功）。</p>\n<hr>\n<h1 id=\"Ubuntu-16-、CentOS-7\"><a href=\"#Ubuntu-16-、CentOS-7\" class=\"headerlink\" title=\"Ubuntu 16 、CentOS 7\"></a>Ubuntu 16 、CentOS 7</h1><h2 id=\"法一：apt-get命令安装\"><a href=\"#法一：apt-get命令安装\" class=\"headerlink\" title=\"法一：apt-get命令安装\"></a>法一：apt-get命令安装</h2><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt <span class=\"keyword\">install</span> nodejs-legacy nodejs npm</div></pre></td></tr></table></figure>\n<h2 id=\"法二：源码安装-用root用户操作\"><a href=\"#法二：源码安装-用root用户操作\" class=\"headerlink\" title=\"法二：源码安装(用root用户操作)\"></a>法二：源码安装(用root用户操作)</h2><p><strong>（6版本以下要升级g++及其他库，去官网下载带linux字样的编译好的版本简单点）</strong></p>\n<p><strong>gcc版本要4.8以上</strong></p>\n<p>Centos: <strong>yum install g++ cmake gcc-c++ gmake -y</strong>           </p>\n<p>Ubuntu：<strong>apt-get install python build-essential gcc g++</strong>   </p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/nodejs/<span class=\"keyword\">node</span>.<span class=\"title\">git</span></div><div class=\"line\">chmod -R <span class=\"number\">755</span> <span class=\"keyword\">node</span></div><div class=\"line\"><span class=\"title\">cd</span> <span class=\"keyword\">node</span></div><div class=\"line\"><span class=\"title\">./configure</span>    <span class=\"comment\">#指定安装目录加上--prefix=/usr/local/node/版本号</span></div><div class=\"line\">make</div><div class=\"line\">make install</div></pre></td></tr></table></figure>\n<p>也可在<strong><a href=\"https://nodejs.org/en/download/\">https://nodejs.org/en/download/</a></strong>下载Nodejs带<strong>Source Code</strong>字样的源码，<code>tar -zxvf filename</code> 解压，之后的操作是一样的。</p>\n<p>查看 node 版本：<code>node --version</code></p>\n<p>命令无法运行的话,需要设置nodejs环境变量：<br><code>vim /etc/profile</code><br>在空行出添加以下内容：</p>\n<figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">#<span class=\"keyword\">set</span> for <span class=\"comment\">nodejs</span></div><div class=\"line\">#若./configure时指定了安装路径则改为安装路径：/usr/local/node/版本号</div><div class=\"line\">export NODE_HOME=/usr/bin/node  \t</div><div class=\"line\">export <span class=\"comment\">PATH=$NODE_HOME</span>/bin:$PATH</div></pre></td></tr></table></figure>\n<p>保存并退出，编译<strong>/etc/profile</strong> 使配置生效</p>\n<p><code>source /etc/profile</code></p>\n<p>现在就可以正常使用啦！</p>\n<p>npm模块安装路径<br>默认：<strong>/usr/local/lib/node_modules</strong></p>\n<p>指定路径：<strong>/usr/local/node/版本号/lib/node_modules</strong></p>\n<hr>\n<h1 id=\"淘宝-NPM-镜像源\"><a href=\"#淘宝-NPM-镜像源\" class=\"headerlink\" title=\"淘宝 NPM 镜像源\"></a>淘宝 NPM 镜像源</h1><p>国内直接使用 npm 的官方镜像可能非常慢的，可以使用淘宝 NPM 镜像。<br>淘宝 NPM 镜像是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。<br><strong><a href=\"http://npm.taobao.org/\">http://npm.taobao.org/</a></strong></p>\n<h2 id=\"方法一、通过config命令\"><a href=\"#方法一、通过config命令\" class=\"headerlink\" title=\"方法一、通过config命令\"></a>方法一、通过config命令</h2><figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">npm</span> config set registry https:<span class=\"regexp\">//</span>registry.<span class=\"built_in\">npm</span>.taobao.org</div><div class=\"line\"><span class=\"built_in\">npm</span> info underscore <span class=\"comment\">#（如果上面配置正确这个命令会有字符串response）</span></div></pre></td></tr></table></figure>\n<h2 id=\"方法二、命令行指定\"><a href=\"#方法二、命令行指定\" class=\"headerlink\" title=\"方法二、命令行指定\"></a>方法二、命令行指定</h2><p><code>npm --registry https://registry.npm.taobao.org info underscore</code> </p>\n<h2 id=\"方法三、编辑-npmrc-加入下面内容\"><a href=\"#方法三、编辑-npmrc-加入下面内容\" class=\"headerlink\" title=\"方法三、编辑 ~/.npmrc 加入下面内容\"></a>方法三、编辑 ~/.npmrc 加入下面内容</h2><p><code>registry = https://registry.npm.taobao.org</code></p>\n<p>你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:<br>(不推荐，这样自由手动安装是用cnpm,脚本安装还是用的默认npm)<br><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p>\n<p>这样就可以使用 cnpm 命令来安装模块了：</p>\n<p><code>cnpm install [name]</code></p>\n<p>Node.js教程:<br><a href=\"http://www.runoob.com/nodejs/nodejs-npm.html\">http://www.runoob.com/nodejs/nodejs-npm.html</a></p>\n<hr>\n"},{"title":"Zabbix监控","abbrlink":27796,"date":"2016-11-08T03:57:22.000Z","_content":"\n# Zabbix 基础部分\n## Zabbix 简介\n  Zabbix 是一个高度集成的网络监控解决方案，可以提供企业级的开源分布式监控解决方案，由一个国外的团队持续维护更新，软件可以自由下载使用，运作团队靠提供收费的技术支持赢利\n  zabbix是一个基于Web界面的，提供分布式系统监控以及网络监视功能的企业级的开源解决方案。\n  zabbix能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题\n  zabbix主要由2部分构成zabbix server和zabbix agent，可选组建zabbix proxy\n  zabbix server可以通过SNMP，zabbix agent，fping端口监视等方法对远程服务器或网络状态完成监视，数据收集等功能。同时支持Linux以及Unix平台，Windows平台只能安装客户端\n\n### Zabbix 功能\n* ①具备常见的商业监控软件所具备的功能（主机的性能监控、网络设备性能监控、数据库、性能监控、FTP 等通用协议监控、多种告警方式、详细的报表图表绘制） \n* ②支持自动发现网络设备和服务器（可以通过配置自动发现服务器规则来实现） \n* ③支持自动发现（low discovery）key 实现动态监控项的批量监控（需写脚本） \n* ④支持分布式，能集中展示、管理分布式的监控点 \n* ⑤扩展性强，server 提供通用接口（api 功能），可以自己开发完善各类监控（根据相关接口编写程序实现）编写插件容易，可以自定义监控项，报警级别的设置。 \n* ⑥数据收集 \n\n\t1.可用和性能检测 ;支持snmp(包括trapping and polling)，IPMI，JMX，SSH，TELNET\n\t2.自定义的检测,自定义收集数据的频率 \n\t3.服务器/代理和客户端模式 \n\t4.灵活的触发器 ;可以定义非常灵活的问题阈值，称为触发器，从后端数据库的参考值 \n\t5.高可定制的报警 ;发送通知，可定制的报警升级，收件人，媒体类型 ;通知可以使用宏变量有用的变量\n\t6.自动操作包括远程命令 \n\t7.实时的绘图功能 ;监控项实时的将数据绘制在图形上面 \n\t8.WEB 监控能力 ;ZABBIX 可以模拟鼠标点击了一个网站，并检查返回值和响应时间\n\t9.Api 功能 ;应用api功能，可以方便的和其他系统结合，包括手机客户端的使用。\n \n更多功能请查看官网文档：http://www.zabbix.com/documentation.php\n\n### Zabbix优缺点\n#### 优点 \n　1、开源，无软件成本投入 \n　2、Server 对设备性能要求低 \n　3、支持设备多，自带多种监控模板 \n　4、支持分布式集中管理，有自动发现功能，可以实现自动化监控 \n　5、开放式接口，扩展性强，插件编写容易 \n　6、当监控的item 比较多服务器队列比较大时可以采用被动状态，被监控客户端主动从 \n　7、server 端去下载需要监控的item 然后取数据上传到server 端。这种方式对服务器的负载比较小。 \n　8、Api 的支持，方便与其他系统结合 \n#### 缺点 \n　　需在被监控主机上安装**agent**，所有数据都存在数据库里，产生的数据很大,瓶颈主要在数据库。\n\n### Zabbix监控原理:\nZabbix 通过C/S 模式采集数据，通过B/S模式在web 端展示和配置。 \n\n**被监控端**：主机通过安装agent 方式采集数据，网络设备通过SNMP 方式采集数据 \n**Server 端**：通过收集SNMP 和agent 发送的数据，写入数据库（MySQL，ORACLE 等），再通过php+apache 在web 前端展示。\n\n### Zabbix 运行条件:\n**Server**：Zabbix Server 需运行在LAMP（Linux+Apache+Mysql+PHP）环境下（或者LNMP），对硬件要求低 \n**Agent**：目前已有的agent 基本支持市面常见的OS，包含Linux、HPUX、Solaris、Sun、 \nwindows \n**SNMP**：支持各类常见的网络设备 ;SNMP(Simple Network Management Protocol,简单网络管理协议\n\n**Zabbix监控过程逻辑图 **\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7001.png)\n\n### 监控类型\n**硬件监控:**适用于物理机、远程管理卡（iDRAC），IPMI（只能平台管理接口） \n**ipmitools:**，MegaCli（查看Raid磁盘） \n**系统监控:** 监控cpt：lscpu、uptime、top、vmstat 1 、mpstat 1、htop \n**监控内存：** free -m\n**监控硬盘：**df -h、iotop \n**监控网络：**iftop、netstat、ss \n**应用服务监控：**nfs、MySQL、nginx、apache、php、rsync \n更详细的监控类型可以参考：http://www.abcdocker.com/abcdocker/1376\n\n所有监控范畴，都可以整合到Zabbix中 \n　　　硬件监控：Zabbix、IPMI、lnterface \n　　　系统监控：Zabbix、Agent、Interface \n　　　Java监控：Zabbix、JMX、lnterface \n　　　网络设备监控：Zabbix、SNMP、lnterface \n　　　应用服务监控：Zabbix、Agent、UserParameter \n　　　MySQL数据库监控：percona-monitoring-plulgins \n　　　URL监控：Zabbix Web监控 \n\n---\n## Zabbix 环境配置\nCentos 7 yum安装\n1、环境信息\n```\n[root@localhost ~]# cat /etc/redhat-release \nCentOS Linux release 7.2.1511 (Core) \n[root@localhost ~]# uname -r\n3.10.0-327.28.3.el7.x86_64```\n\n2、yum安装 \n我们使用阿里云yum源,官方yum源下载会比较慢。\n```\nrpm -ivh http://mirrors.aliyun.com/zabbix/zabbix/3.0/rhel/7/x86_64/zabbix-release-3.0-1.el7.noarch.rpm```\n下载release版本，会在yum.repos.d下面生成一个zabbix.repo的文件\n\n3、服务端安装相关软件包\n```\nyum install zabbix-server zabbix-web zabbix-server-mysql zabbix-web-mysql mariadb-server mariadb -y```\n注：如果Server端也需要监控则需要安装**zabbix-agent**;在Centos7中，mysql改名为**mariadb**\n\n4、修改PHP时区设置\n```\nsed -i 's@# php_value date.timezone Europe/Riga@php_value date.timezone Asia/Shanghai@g' /etc/httpd/conf.d/zabbix.conf```\n注：要注意需要改的配置文件是**/etc/httpd/conf.d/zabbix.conf**而不是**/etc/php.ini**\n\n---\n## 数据库设置\n1.启动数据库\n`systemctl start mariadb`\n\n2.创建zabbix数据库及用户\n```\nmysql\ncreate database zabbix character set utf8 collate utf8_bin;\ngrant all on zabbix.* to zabbix@'localhost' identified by '123456';\nexit```\n\n3.导入数据\n```\ncd /usr/share/doc/zabbix-server-mysql-3.0.4/\nll          #可看到有create.sql.gz文件\nzcat create.sql.gz |mysql -uzabbix -p123456 zabbix```\n注：我们使用zcat，可以查看压缩包包，和cat基本相似；类似的还有：zgrep、zless、zdiff 等\n\n4.修改zabbix配置文件\n```\nvim /etc/zabbix/zabbix_server.conf \nDBHost=localhost    #数据库所在主机\nDBName=zabbix       #数据库名\nDBUser=zabbix       #数据库用户\nDBPassword=123456   #数据库密码 ```\n\n5.启动zabbix及apache\n```\nsystemctl start zabbix-server\nsystemctl start httpd```\n注：如果没有启动成功，要看一下是不是80端口被占用\n\n6.Web界面安装master \n访问地址：http://IP/zabbix/setup.php \n点击Next step进行安装 \n首先要确保没有no，如果时区没有改好会提示我们进行修改 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7002.png)\n\n账号密码都是我们刚刚在配置文件中设置的，端口默认就是3306 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7003.png)\n\n为我们的zabbix起个名字，一会在右上角会显示 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7004.png)\n最后是展示我们的配置信息，可以查看到哪里有错误 \n点击Finish \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7005.png)\n提示：登录之后请立即修改密码\n\n7.配置zabbix-agent端\n```\nvim /etc/zabbix/zabbix_agentd.conf \nServer=127.0.0.1           #修改Server端的IP地址（被动模式IP地址）\nServerActive=127.0.0.1     #主动模式，主动向server端报告\nsystemctl start zabbix-agent```\n\n查看端口号:` netstat -lntp `\n10051为server端口，10050为agent端口\n\n---\n## Web界面配置\n找到Configuration---->Hosts 添加一台监控主机 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7006.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7007.png)\n\n开启后，如果出现错误我们可以看一下zabbix的日志:`ls /var/log/zabbix/zabbix_`\n看这两个文件：**zabbix_agentd.log**  **zabbix_server.log ** \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7008.png)\n当ZBX变成绿色的时候，说明监控成功。因为我们没有配置SNMP、JMX、IPMI等。所以我发监控 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7009.png)\n\n因为我们现在只安装了一台服务器，所以只有一个主机。我们可以查看现在这台主机的CPU等及基本的信息 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7010.png)\n\n点击Monitoring-----Graphs，选择我们要监控的内容 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7011.png)\n\n我们选择可以随便选择一个进行查看信息 \n例如：我们查看CPU的负载 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7012.png)\n\n某一段时间内，CPU正在处理以及等待CPU处理的进程数的之和。Load Average是从另一个角度来体现CPU的使用状态的。 \n\n这些监控其实就是zabbix在数据库查找数据，然后使用jd进行画图，所以Zabbix性能依赖于mysql数据库\n\n---\n## Zabbix页面安全设置\n1、设置默认账号密码 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7013.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7014.png)\n\n设置完中文 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7015.png)\n\n---\n## Zabbix 菜单说明\nZabbix 上方的菜单简单介绍说明 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7016.png)\n\nDoshboard下面可以设置你想设置的图形，添加方法如下： \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7017.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7018.png)\n\n这时，就可以找到你喜爱的了，直接打开 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7019.png)\n\nscreens其实就是一个聚合图形，可以把多个图片合在一起。然后放在大屏幕上，供别人查看 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7020.png)\n\nmaps就是一个架构图 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7021.png)\n\nStatus of Zabbix就是一个状态栏 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7022.png)\n\n　第一行：Server是否运行[yes]和后面的运行地址 \n　第二行：监控的机器 （启用的/关闭的/模板） \n　第三行：监控项 （启用的/关闭的/不支持的） \n　第四行：触发器的状态 （启用的/关闭的/【故障/正常】） \n　第五行：当前用户数量 （在线数量） \n　第六行：zabbix每秒可以收到的一个新值\n\n告警的级别 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7023.png)\n\n我们可以设置报警响铃，让他在前端响 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7024.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7025.png)\n\n我们首页的监控列表是可以随意拖动的 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7026.png)\n\n我们还可以将它关闭，并且设置刷新时间 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7027.png)\nZabbix 基础完!\n\n本文参考了：http://www.abcdocker.com/abcdocker/1402\n\n\n---\n# Zabbix 进阶\n\n-未完-\n\n\n---","source":"_posts/环境搭建/2016-11-08-Zibbix监控.md","raw":"---\ntitle: Zabbix监控\ncategories:\n  - 环境搭建\ntags:\n  - Zabbix监控\n  - Zabbix Centos7\nabbrlink: 27796\ndate: 2016-11-08 11:57:22\n---\n\n# Zabbix 基础部分\n## Zabbix 简介\n  Zabbix 是一个高度集成的网络监控解决方案，可以提供企业级的开源分布式监控解决方案，由一个国外的团队持续维护更新，软件可以自由下载使用，运作团队靠提供收费的技术支持赢利\n  zabbix是一个基于Web界面的，提供分布式系统监控以及网络监视功能的企业级的开源解决方案。\n  zabbix能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题\n  zabbix主要由2部分构成zabbix server和zabbix agent，可选组建zabbix proxy\n  zabbix server可以通过SNMP，zabbix agent，fping端口监视等方法对远程服务器或网络状态完成监视，数据收集等功能。同时支持Linux以及Unix平台，Windows平台只能安装客户端\n\n### Zabbix 功能\n* ①具备常见的商业监控软件所具备的功能（主机的性能监控、网络设备性能监控、数据库、性能监控、FTP 等通用协议监控、多种告警方式、详细的报表图表绘制） \n* ②支持自动发现网络设备和服务器（可以通过配置自动发现服务器规则来实现） \n* ③支持自动发现（low discovery）key 实现动态监控项的批量监控（需写脚本） \n* ④支持分布式，能集中展示、管理分布式的监控点 \n* ⑤扩展性强，server 提供通用接口（api 功能），可以自己开发完善各类监控（根据相关接口编写程序实现）编写插件容易，可以自定义监控项，报警级别的设置。 \n* ⑥数据收集 \n\n\t1.可用和性能检测 ;支持snmp(包括trapping and polling)，IPMI，JMX，SSH，TELNET\n\t2.自定义的检测,自定义收集数据的频率 \n\t3.服务器/代理和客户端模式 \n\t4.灵活的触发器 ;可以定义非常灵活的问题阈值，称为触发器，从后端数据库的参考值 \n\t5.高可定制的报警 ;发送通知，可定制的报警升级，收件人，媒体类型 ;通知可以使用宏变量有用的变量\n\t6.自动操作包括远程命令 \n\t7.实时的绘图功能 ;监控项实时的将数据绘制在图形上面 \n\t8.WEB 监控能力 ;ZABBIX 可以模拟鼠标点击了一个网站，并检查返回值和响应时间\n\t9.Api 功能 ;应用api功能，可以方便的和其他系统结合，包括手机客户端的使用。\n \n更多功能请查看官网文档：http://www.zabbix.com/documentation.php\n\n### Zabbix优缺点\n#### 优点 \n　1、开源，无软件成本投入 \n　2、Server 对设备性能要求低 \n　3、支持设备多，自带多种监控模板 \n　4、支持分布式集中管理，有自动发现功能，可以实现自动化监控 \n　5、开放式接口，扩展性强，插件编写容易 \n　6、当监控的item 比较多服务器队列比较大时可以采用被动状态，被监控客户端主动从 \n　7、server 端去下载需要监控的item 然后取数据上传到server 端。这种方式对服务器的负载比较小。 \n　8、Api 的支持，方便与其他系统结合 \n#### 缺点 \n　　需在被监控主机上安装**agent**，所有数据都存在数据库里，产生的数据很大,瓶颈主要在数据库。\n\n### Zabbix监控原理:\nZabbix 通过C/S 模式采集数据，通过B/S模式在web 端展示和配置。 \n\n**被监控端**：主机通过安装agent 方式采集数据，网络设备通过SNMP 方式采集数据 \n**Server 端**：通过收集SNMP 和agent 发送的数据，写入数据库（MySQL，ORACLE 等），再通过php+apache 在web 前端展示。\n\n### Zabbix 运行条件:\n**Server**：Zabbix Server 需运行在LAMP（Linux+Apache+Mysql+PHP）环境下（或者LNMP），对硬件要求低 \n**Agent**：目前已有的agent 基本支持市面常见的OS，包含Linux、HPUX、Solaris、Sun、 \nwindows \n**SNMP**：支持各类常见的网络设备 ;SNMP(Simple Network Management Protocol,简单网络管理协议\n\n**Zabbix监控过程逻辑图 **\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7001.png)\n\n### 监控类型\n**硬件监控:**适用于物理机、远程管理卡（iDRAC），IPMI（只能平台管理接口） \n**ipmitools:**，MegaCli（查看Raid磁盘） \n**系统监控:** 监控cpt：lscpu、uptime、top、vmstat 1 、mpstat 1、htop \n**监控内存：** free -m\n**监控硬盘：**df -h、iotop \n**监控网络：**iftop、netstat、ss \n**应用服务监控：**nfs、MySQL、nginx、apache、php、rsync \n更详细的监控类型可以参考：http://www.abcdocker.com/abcdocker/1376\n\n所有监控范畴，都可以整合到Zabbix中 \n　　　硬件监控：Zabbix、IPMI、lnterface \n　　　系统监控：Zabbix、Agent、Interface \n　　　Java监控：Zabbix、JMX、lnterface \n　　　网络设备监控：Zabbix、SNMP、lnterface \n　　　应用服务监控：Zabbix、Agent、UserParameter \n　　　MySQL数据库监控：percona-monitoring-plulgins \n　　　URL监控：Zabbix Web监控 \n\n---\n## Zabbix 环境配置\nCentos 7 yum安装\n1、环境信息\n```\n[root@localhost ~]# cat /etc/redhat-release \nCentOS Linux release 7.2.1511 (Core) \n[root@localhost ~]# uname -r\n3.10.0-327.28.3.el7.x86_64```\n\n2、yum安装 \n我们使用阿里云yum源,官方yum源下载会比较慢。\n```\nrpm -ivh http://mirrors.aliyun.com/zabbix/zabbix/3.0/rhel/7/x86_64/zabbix-release-3.0-1.el7.noarch.rpm```\n下载release版本，会在yum.repos.d下面生成一个zabbix.repo的文件\n\n3、服务端安装相关软件包\n```\nyum install zabbix-server zabbix-web zabbix-server-mysql zabbix-web-mysql mariadb-server mariadb -y```\n注：如果Server端也需要监控则需要安装**zabbix-agent**;在Centos7中，mysql改名为**mariadb**\n\n4、修改PHP时区设置\n```\nsed -i 's@# php_value date.timezone Europe/Riga@php_value date.timezone Asia/Shanghai@g' /etc/httpd/conf.d/zabbix.conf```\n注：要注意需要改的配置文件是**/etc/httpd/conf.d/zabbix.conf**而不是**/etc/php.ini**\n\n---\n## 数据库设置\n1.启动数据库\n`systemctl start mariadb`\n\n2.创建zabbix数据库及用户\n```\nmysql\ncreate database zabbix character set utf8 collate utf8_bin;\ngrant all on zabbix.* to zabbix@'localhost' identified by '123456';\nexit```\n\n3.导入数据\n```\ncd /usr/share/doc/zabbix-server-mysql-3.0.4/\nll          #可看到有create.sql.gz文件\nzcat create.sql.gz |mysql -uzabbix -p123456 zabbix```\n注：我们使用zcat，可以查看压缩包包，和cat基本相似；类似的还有：zgrep、zless、zdiff 等\n\n4.修改zabbix配置文件\n```\nvim /etc/zabbix/zabbix_server.conf \nDBHost=localhost    #数据库所在主机\nDBName=zabbix       #数据库名\nDBUser=zabbix       #数据库用户\nDBPassword=123456   #数据库密码 ```\n\n5.启动zabbix及apache\n```\nsystemctl start zabbix-server\nsystemctl start httpd```\n注：如果没有启动成功，要看一下是不是80端口被占用\n\n6.Web界面安装master \n访问地址：http://IP/zabbix/setup.php \n点击Next step进行安装 \n首先要确保没有no，如果时区没有改好会提示我们进行修改 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7002.png)\n\n账号密码都是我们刚刚在配置文件中设置的，端口默认就是3306 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7003.png)\n\n为我们的zabbix起个名字，一会在右上角会显示 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7004.png)\n最后是展示我们的配置信息，可以查看到哪里有错误 \n点击Finish \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7005.png)\n提示：登录之后请立即修改密码\n\n7.配置zabbix-agent端\n```\nvim /etc/zabbix/zabbix_agentd.conf \nServer=127.0.0.1           #修改Server端的IP地址（被动模式IP地址）\nServerActive=127.0.0.1     #主动模式，主动向server端报告\nsystemctl start zabbix-agent```\n\n查看端口号:` netstat -lntp `\n10051为server端口，10050为agent端口\n\n---\n## Web界面配置\n找到Configuration---->Hosts 添加一台监控主机 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7006.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7007.png)\n\n开启后，如果出现错误我们可以看一下zabbix的日志:`ls /var/log/zabbix/zabbix_`\n看这两个文件：**zabbix_agentd.log**  **zabbix_server.log ** \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7008.png)\n当ZBX变成绿色的时候，说明监控成功。因为我们没有配置SNMP、JMX、IPMI等。所以我发监控 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7009.png)\n\n因为我们现在只安装了一台服务器，所以只有一个主机。我们可以查看现在这台主机的CPU等及基本的信息 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7010.png)\n\n点击Monitoring-----Graphs，选择我们要监控的内容 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7011.png)\n\n我们选择可以随便选择一个进行查看信息 \n例如：我们查看CPU的负载 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7012.png)\n\n某一段时间内，CPU正在处理以及等待CPU处理的进程数的之和。Load Average是从另一个角度来体现CPU的使用状态的。 \n\n这些监控其实就是zabbix在数据库查找数据，然后使用jd进行画图，所以Zabbix性能依赖于mysql数据库\n\n---\n## Zabbix页面安全设置\n1、设置默认账号密码 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7013.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7014.png)\n\n设置完中文 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7015.png)\n\n---\n## Zabbix 菜单说明\nZabbix 上方的菜单简单介绍说明 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7016.png)\n\nDoshboard下面可以设置你想设置的图形，添加方法如下： \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7017.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7018.png)\n\n这时，就可以找到你喜爱的了，直接打开 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7019.png)\n\nscreens其实就是一个聚合图形，可以把多个图片合在一起。然后放在大屏幕上，供别人查看 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7020.png)\n\nmaps就是一个架构图 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7021.png)\n\nStatus of Zabbix就是一个状态栏 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7022.png)\n\n　第一行：Server是否运行[yes]和后面的运行地址 \n　第二行：监控的机器 （启用的/关闭的/模板） \n　第三行：监控项 （启用的/关闭的/不支持的） \n　第四行：触发器的状态 （启用的/关闭的/【故障/正常】） \n　第五行：当前用户数量 （在线数量） \n　第六行：zabbix每秒可以收到的一个新值\n\n告警的级别 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7023.png)\n\n我们可以设置报警响铃，让他在前端响 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7024.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7025.png)\n\n我们首页的监控列表是可以随意拖动的 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7026.png)\n\n我们还可以将它关闭，并且设置刷新时间 \n![](http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7027.png)\nZabbix 基础完!\n\n本文参考了：http://www.abcdocker.com/abcdocker/1402\n\n\n---\n# Zabbix 进阶\n\n-未完-\n\n\n---","slug":"环境搭建-2016-11-08-Zibbix监控","published":1,"updated":"2016-11-21T02:17:09.018Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjnb002dd8pk1sk8eun9","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Zabbix-基础部分\"><a href=\"#Zabbix-基础部分\" class=\"headerlink\" title=\"Zabbix 基础部分\"></a>Zabbix 基础部分</h1><h2 id=\"Zabbix-简介\"><a href=\"#Zabbix-简介\" class=\"headerlink\" title=\"Zabbix 简介\"></a>Zabbix 简介</h2><p>  Zabbix 是一个高度集成的网络监控解决方案，可以提供企业级的开源分布式监控解决方案，由一个国外的团队持续维护更新，软件可以自由下载使用，运作团队靠提供收费的技术支持赢利<br>  zabbix是一个基于Web界面的，提供分布式系统监控以及网络监视功能的企业级的开源解决方案。<br>  zabbix能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题<br>  zabbix主要由2部分构成zabbix server和zabbix agent，可选组建zabbix proxy<br>  zabbix server可以通过SNMP，zabbix agent，fping端口监视等方法对远程服务器或网络状态完成监视，数据收集等功能。同时支持Linux以及Unix平台，Windows平台只能安装客户端</p>\n<h3 id=\"Zabbix-功能\"><a href=\"#Zabbix-功能\" class=\"headerlink\" title=\"Zabbix 功能\"></a>Zabbix 功能</h3><ul>\n<li>①具备常见的商业监控软件所具备的功能（主机的性能监控、网络设备性能监控、数据库、性能监控、FTP 等通用协议监控、多种告警方式、详细的报表图表绘制） </li>\n<li>②支持自动发现网络设备和服务器（可以通过配置自动发现服务器规则来实现） </li>\n<li>③支持自动发现（low discovery）key 实现动态监控项的批量监控（需写脚本） </li>\n<li>④支持分布式，能集中展示、管理分布式的监控点 </li>\n<li>⑤扩展性强，server 提供通用接口（api 功能），可以自己开发完善各类监控（根据相关接口编写程序实现）编写插件容易，可以自定义监控项，报警级别的设置。 </li>\n<li><p>⑥数据收集 </p>\n<p>  1.可用和性能检测 ;支持snmp(包括trapping and polling)，IPMI，JMX，SSH，TELNET<br>  2.自定义的检测,自定义收集数据的频率<br>  3.服务器/代理和客户端模式<br>  4.灵活的触发器 ;可以定义非常灵活的问题阈值，称为触发器，从后端数据库的参考值<br>  5.高可定制的报警 ;发送通知，可定制的报警升级，收件人，媒体类型 ;通知可以使用宏变量有用的变量<br>  6.自动操作包括远程命令<br>  7.实时的绘图功能 ;监控项实时的将数据绘制在图形上面<br>  8.WEB 监控能力 ;ZABBIX 可以模拟鼠标点击了一个网站，并检查返回值和响应时间<br>  9.Api 功能 ;应用api功能，可以方便的和其他系统结合，包括手机客户端的使用。</p>\n</li>\n</ul>\n<p>更多功能请查看官网文档：<a href=\"http://www.zabbix.com/documentation.php\" target=\"_blank\" rel=\"external\">http://www.zabbix.com/documentation.php</a></p>\n<h3 id=\"Zabbix优缺点\"><a href=\"#Zabbix优缺点\" class=\"headerlink\" title=\"Zabbix优缺点\"></a>Zabbix优缺点</h3><h4 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h4><p>　1、开源，无软件成本投入<br>　2、Server 对设备性能要求低<br>　3、支持设备多，自带多种监控模板<br>　4、支持分布式集中管理，有自动发现功能，可以实现自动化监控<br>　5、开放式接口，扩展性强，插件编写容易<br>　6、当监控的item 比较多服务器队列比较大时可以采用被动状态，被监控客户端主动从<br>　7、server 端去下载需要监控的item 然后取数据上传到server 端。这种方式对服务器的负载比较小。<br>　8、Api 的支持，方便与其他系统结合 </p>\n<h4 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><p>　　需在被监控主机上安装<strong>agent</strong>，所有数据都存在数据库里，产生的数据很大,瓶颈主要在数据库。</p>\n<h3 id=\"Zabbix监控原理\"><a href=\"#Zabbix监控原理\" class=\"headerlink\" title=\"Zabbix监控原理:\"></a>Zabbix监控原理:</h3><p>Zabbix 通过C/S 模式采集数据，通过B/S模式在web 端展示和配置。 </p>\n<p><strong>被监控端</strong>：主机通过安装agent 方式采集数据，网络设备通过SNMP 方式采集数据<br><strong>Server 端</strong>：通过收集SNMP 和agent 发送的数据，写入数据库（MySQL，ORACLE 等），再通过php+apache 在web 前端展示。</p>\n<h3 id=\"Zabbix-运行条件\"><a href=\"#Zabbix-运行条件\" class=\"headerlink\" title=\"Zabbix 运行条件:\"></a>Zabbix 运行条件:</h3><p><strong>Server</strong>：Zabbix Server 需运行在LAMP（Linux+Apache+Mysql+PHP）环境下（或者LNMP），对硬件要求低<br><strong>Agent</strong>：目前已有的agent 基本支持市面常见的OS，包含Linux、HPUX、Solaris、Sun、<br>windows<br><strong>SNMP</strong>：支持各类常见的网络设备 ;SNMP(Simple Network Management Protocol,简单网络管理协议</p>\n<p><strong>Zabbix监控过程逻辑图 </strong><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7001.png\" alt=\"\"></p>\n<h3 id=\"监控类型\"><a href=\"#监控类型\" class=\"headerlink\" title=\"监控类型\"></a>监控类型</h3><p><strong>硬件监控:</strong>适用于物理机、远程管理卡（iDRAC），IPMI（只能平台管理接口）<br><strong>ipmitools:</strong>，MegaCli（查看Raid磁盘）<br><strong>系统监控:</strong> 监控cpt：lscpu、uptime、top、vmstat 1 、mpstat 1、htop<br><strong>监控内存：</strong> free -m<br><strong>监控硬盘：</strong>df -h、iotop<br><strong>监控网络：</strong>iftop、netstat、ss<br><strong>应用服务监控：</strong>nfs、MySQL、nginx、apache、php、rsync<br>更详细的监控类型可以参考：<a href=\"http://www.abcdocker.com/abcdocker/1376\" target=\"_blank\" rel=\"external\">http://www.abcdocker.com/abcdocker/1376</a></p>\n<p>所有监控范畴，都可以整合到Zabbix中<br>　　　硬件监控：Zabbix、IPMI、lnterface<br>　　　系统监控：Zabbix、Agent、Interface<br>　　　Java监控：Zabbix、JMX、lnterface<br>　　　网络设备监控：Zabbix、SNMP、lnterface<br>　　　应用服务监控：Zabbix、Agent、UserParameter<br>　　　MySQL数据库监控：percona-monitoring-plulgins<br>　　　URL监控：Zabbix Web监控 </p>\n<hr>\n<h2 id=\"Zabbix-环境配置\"><a href=\"#Zabbix-环境配置\" class=\"headerlink\" title=\"Zabbix 环境配置\"></a>Zabbix 环境配置</h2><p>Centos 7 yum安装<br>1、环境信息<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@localhost ~]# cat /etc/redhat-release </div><div class=\"line\">CentOS Linux release <span class=\"number\">7.2</span><span class=\"number\">.1511</span> (Core) </div><div class=\"line\">[root@localhost ~]# uname -r</div><div class=\"line\"><span class=\"number\">3.10</span><span class=\"number\">.0</span><span class=\"number\">-327.28</span><span class=\"number\">.3</span>.el7.x86_64</div></pre></td></tr></table></figure></p>\n<p>2、yum安装<br>我们使用阿里云yum源,官方yum源下载会比较慢。<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -ivh http:<span class=\"regexp\">//mi</span>rrors.aliyun.com<span class=\"regexp\">/zabbix/</span>zabbix<span class=\"regexp\">/3.0/</span>rhel<span class=\"regexp\">/7/</span>x86_64<span class=\"regexp\">/zabbix-release-3.0-1.el7.noarch.rpm</span></div></pre></td></tr></table></figure></p>\n<p>下载release版本，会在yum.repos.d下面生成一个zabbix.repo的文件</p>\n<p>3、服务端安装相关软件包<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> zabbix-<span class=\"keyword\">server</span> zabbix-web zabbix-<span class=\"keyword\">server</span>-mysql zabbix-web-mysql mariadb-<span class=\"keyword\">server</span> mariadb -y</div></pre></td></tr></table></figure></p>\n<p>注：如果Server端也需要监控则需要安装<strong>zabbix-agent</strong>;在Centos7中，mysql改名为<strong>mariadb</strong></p>\n<p>4、修改PHP时区设置<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">sed</span> -i <span class=\"string\">'s@# php_value date.timezone Europe/Riga<span class=\"variable\">@php_value</span> date.timezone Asia/Shanghai<span class=\"variable\">@g</span>'</span> /etc/httpd/conf.d/zabbix.conf</div></pre></td></tr></table></figure></p>\n<p>注：要注意需要改的配置文件是<strong>/etc/httpd/conf.d/zabbix.conf</strong>而不是<strong>/etc/php.ini</strong></p>\n<hr>\n<h2 id=\"数据库设置\"><a href=\"#数据库设置\" class=\"headerlink\" title=\"数据库设置\"></a>数据库设置</h2><p>1.启动数据库<br><code>systemctl start mariadb</code></p>\n<p>2.创建zabbix数据库及用户<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> zabbix <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> utf8 <span class=\"keyword\">collate</span> utf8_bin;</div><div class=\"line\"><span class=\"keyword\">grant</span> all <span class=\"keyword\">on</span> zabbix.* <span class=\"keyword\">to</span> zabbix@<span class=\"string\">'localhost'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'123456'</span>;</div><div class=\"line\">exit</div></pre></td></tr></table></figure></p>\n<p>3.导入数据<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"meta-keyword\">/usr/</span>share<span class=\"meta-keyword\">/doc/</span>zabbix-server-mysql<span class=\"number\">-3.0</span><span class=\"number\">.4</span>/</div><div class=\"line\">ll          <span class=\"meta\">#可看到有create.sql.gz文件</span></div><div class=\"line\">zcat create.sql.gz |mysql -uzabbix -p123456 zabbix</div></pre></td></tr></table></figure></p>\n<p>注：我们使用zcat，可以查看压缩包包，和cat基本相似；类似的还有：zgrep、zless、zdiff 等</p>\n<p>4.修改zabbix配置文件<br><figure class=\"highlight nix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/zabbix/zabbix_server.conf </div><div class=\"line\"><span class=\"attr\">DBHost=localhost</span>    <span class=\"comment\">#数据库所在主机</span></div><div class=\"line\"><span class=\"attr\">DBName=zabbix</span>       <span class=\"comment\">#数据库名</span></div><div class=\"line\"><span class=\"attr\">DBUser=zabbix</span>       <span class=\"comment\">#数据库用户</span></div><div class=\"line\"><span class=\"attr\">DBPassword=123456</span>   <span class=\"comment\">#数据库密码</span></div></pre></td></tr></table></figure></p>\n<p>5.启动zabbix及apache<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl <span class=\"keyword\">start</span> zabbix-<span class=\"keyword\">server</span></div><div class=\"line\">systemctl <span class=\"keyword\">start</span> httpd</div></pre></td></tr></table></figure></p>\n<p>注：如果没有启动成功，要看一下是不是80端口被占用</p>\n<p>6.Web界面安装master<br>访问地址：<a href=\"http://IP/zabbix/setup.php\" target=\"_blank\" rel=\"external\">http://IP/zabbix/setup.php</a><br>点击Next step进行安装<br>首先要确保没有no，如果时区没有改好会提示我们进行修改<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7002.png\" alt=\"\"></p>\n<p>账号密码都是我们刚刚在配置文件中设置的，端口默认就是3306<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7003.png\" alt=\"\"></p>\n<p>为我们的zabbix起个名字，一会在右上角会显示<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7004.png\" alt=\"\"><br>最后是展示我们的配置信息，可以查看到哪里有错误<br>点击Finish<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7005.png\" alt=\"\"><br>提示：登录之后请立即修改密码</p>\n<p>7.配置zabbix-agent端<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/zabbix/zabbix_agentd.conf </div><div class=\"line\">Server=<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>           #修改Server端的IP地址（被动模式IP地址）</div><div class=\"line\">ServerActive=<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>     #主动模式，主动向server端报告</div><div class=\"line\">systemctl start zabbix-agent</div></pre></td></tr></table></figure></p>\n<p>查看端口号:<code>netstat -lntp</code><br>10051为server端口，10050为agent端口</p>\n<hr>\n<h2 id=\"Web界面配置\"><a href=\"#Web界面配置\" class=\"headerlink\" title=\"Web界面配置\"></a>Web界面配置</h2><p>找到Configuration—-&gt;Hosts 添加一台监控主机<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7006.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7007.png\" alt=\"\"></p>\n<p>开启后，如果出现错误我们可以看一下zabbix的日志:<code>ls /var/log/zabbix/zabbix_</code><br>看这两个文件：<strong>zabbix_agentd.log</strong>  <strong>zabbix_server.log </strong><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7008.png\" alt=\"\"><br>当ZBX变成绿色的时候，说明监控成功。因为我们没有配置SNMP、JMX、IPMI等。所以我发监控<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7009.png\" alt=\"\"></p>\n<p>因为我们现在只安装了一台服务器，所以只有一个主机。我们可以查看现在这台主机的CPU等及基本的信息<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7010.png\" alt=\"\"></p>\n<p>点击Monitoring—–Graphs，选择我们要监控的内容<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7011.png\" alt=\"\"></p>\n<p>我们选择可以随便选择一个进行查看信息<br>例如：我们查看CPU的负载<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7012.png\" alt=\"\"></p>\n<p>某一段时间内，CPU正在处理以及等待CPU处理的进程数的之和。Load Average是从另一个角度来体现CPU的使用状态的。 </p>\n<p>这些监控其实就是zabbix在数据库查找数据，然后使用jd进行画图，所以Zabbix性能依赖于mysql数据库</p>\n<hr>\n<h2 id=\"Zabbix页面安全设置\"><a href=\"#Zabbix页面安全设置\" class=\"headerlink\" title=\"Zabbix页面安全设置\"></a>Zabbix页面安全设置</h2><p>1、设置默认账号密码<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7013.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7014.png\" alt=\"\"></p>\n<p>设置完中文<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7015.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"Zabbix-菜单说明\"><a href=\"#Zabbix-菜单说明\" class=\"headerlink\" title=\"Zabbix 菜单说明\"></a>Zabbix 菜单说明</h2><p>Zabbix 上方的菜单简单介绍说明<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7016.png\" alt=\"\"></p>\n<p>Doshboard下面可以设置你想设置的图形，添加方法如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7017.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7018.png\" alt=\"\"></p>\n<p>这时，就可以找到你喜爱的了，直接打开<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7019.png\" alt=\"\"></p>\n<p>screens其实就是一个聚合图形，可以把多个图片合在一起。然后放在大屏幕上，供别人查看<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7020.png\" alt=\"\"></p>\n<p>maps就是一个架构图<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7021.png\" alt=\"\"></p>\n<p>Status of Zabbix就是一个状态栏<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7022.png\" alt=\"\"></p>\n<p>　第一行：Server是否运行[yes]和后面的运行地址<br>　第二行：监控的机器 （启用的/关闭的/模板）<br>　第三行：监控项 （启用的/关闭的/不支持的）<br>　第四行：触发器的状态 （启用的/关闭的/【故障/正常】）<br>　第五行：当前用户数量 （在线数量）<br>　第六行：zabbix每秒可以收到的一个新值</p>\n<p>告警的级别<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7023.png\" alt=\"\"></p>\n<p>我们可以设置报警响铃，让他在前端响<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7024.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7025.png\" alt=\"\"></p>\n<p>我们首页的监控列表是可以随意拖动的<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7026.png\" alt=\"\"></p>\n<p>我们还可以将它关闭，并且设置刷新时间<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7027.png\" alt=\"\"><br>Zabbix 基础完!</p>\n<p>本文参考了：<a href=\"http://www.abcdocker.com/abcdocker/1402\" target=\"_blank\" rel=\"external\">http://www.abcdocker.com/abcdocker/1402</a></p>\n<hr>\n<h1 id=\"Zabbix-进阶\"><a href=\"#Zabbix-进阶\" class=\"headerlink\" title=\"Zabbix 进阶\"></a>Zabbix 进阶</h1><p>-未完-</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"Zabbix-基础部分\"><a href=\"#Zabbix-基础部分\" class=\"headerlink\" title=\"Zabbix 基础部分\"></a>Zabbix 基础部分</h1><h2 id=\"Zabbix-简介\"><a href=\"#Zabbix-简介\" class=\"headerlink\" title=\"Zabbix 简介\"></a>Zabbix 简介</h2><p>  Zabbix 是一个高度集成的网络监控解决方案，可以提供企业级的开源分布式监控解决方案，由一个国外的团队持续维护更新，软件可以自由下载使用，运作团队靠提供收费的技术支持赢利<br>  zabbix是一个基于Web界面的，提供分布式系统监控以及网络监视功能的企业级的开源解决方案。<br>  zabbix能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题<br>  zabbix主要由2部分构成zabbix server和zabbix agent，可选组建zabbix proxy<br>  zabbix server可以通过SNMP，zabbix agent，fping端口监视等方法对远程服务器或网络状态完成监视，数据收集等功能。同时支持Linux以及Unix平台，Windows平台只能安装客户端</p>\n<h3 id=\"Zabbix-功能\"><a href=\"#Zabbix-功能\" class=\"headerlink\" title=\"Zabbix 功能\"></a>Zabbix 功能</h3><ul>\n<li>①具备常见的商业监控软件所具备的功能（主机的性能监控、网络设备性能监控、数据库、性能监控、FTP 等通用协议监控、多种告警方式、详细的报表图表绘制） </li>\n<li>②支持自动发现网络设备和服务器（可以通过配置自动发现服务器规则来实现） </li>\n<li>③支持自动发现（low discovery）key 实现动态监控项的批量监控（需写脚本） </li>\n<li>④支持分布式，能集中展示、管理分布式的监控点 </li>\n<li>⑤扩展性强，server 提供通用接口（api 功能），可以自己开发完善各类监控（根据相关接口编写程序实现）编写插件容易，可以自定义监控项，报警级别的设置。 </li>\n<li><p>⑥数据收集 </p>\n<p>  1.可用和性能检测 ;支持snmp(包括trapping and polling)，IPMI，JMX，SSH，TELNET<br>  2.自定义的检测,自定义收集数据的频率<br>  3.服务器/代理和客户端模式<br>  4.灵活的触发器 ;可以定义非常灵活的问题阈值，称为触发器，从后端数据库的参考值<br>  5.高可定制的报警 ;发送通知，可定制的报警升级，收件人，媒体类型 ;通知可以使用宏变量有用的变量<br>  6.自动操作包括远程命令<br>  7.实时的绘图功能 ;监控项实时的将数据绘制在图形上面<br>  8.WEB 监控能力 ;ZABBIX 可以模拟鼠标点击了一个网站，并检查返回值和响应时间<br>  9.Api 功能 ;应用api功能，可以方便的和其他系统结合，包括手机客户端的使用。</p>\n</li>\n</ul>\n<p>更多功能请查看官网文档：<a href=\"http://www.zabbix.com/documentation.php\">http://www.zabbix.com/documentation.php</a></p>\n<h3 id=\"Zabbix优缺点\"><a href=\"#Zabbix优缺点\" class=\"headerlink\" title=\"Zabbix优缺点\"></a>Zabbix优缺点</h3><h4 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h4><p>　1、开源，无软件成本投入<br>　2、Server 对设备性能要求低<br>　3、支持设备多，自带多种监控模板<br>　4、支持分布式集中管理，有自动发现功能，可以实现自动化监控<br>　5、开放式接口，扩展性强，插件编写容易<br>　6、当监控的item 比较多服务器队列比较大时可以采用被动状态，被监控客户端主动从<br>　7、server 端去下载需要监控的item 然后取数据上传到server 端。这种方式对服务器的负载比较小。<br>　8、Api 的支持，方便与其他系统结合 </p>\n<h4 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><p>　　需在被监控主机上安装<strong>agent</strong>，所有数据都存在数据库里，产生的数据很大,瓶颈主要在数据库。</p>\n<h3 id=\"Zabbix监控原理\"><a href=\"#Zabbix监控原理\" class=\"headerlink\" title=\"Zabbix监控原理:\"></a>Zabbix监控原理:</h3><p>Zabbix 通过C/S 模式采集数据，通过B/S模式在web 端展示和配置。 </p>\n<p><strong>被监控端</strong>：主机通过安装agent 方式采集数据，网络设备通过SNMP 方式采集数据<br><strong>Server 端</strong>：通过收集SNMP 和agent 发送的数据，写入数据库（MySQL，ORACLE 等），再通过php+apache 在web 前端展示。</p>\n<h3 id=\"Zabbix-运行条件\"><a href=\"#Zabbix-运行条件\" class=\"headerlink\" title=\"Zabbix 运行条件:\"></a>Zabbix 运行条件:</h3><p><strong>Server</strong>：Zabbix Server 需运行在LAMP（Linux+Apache+Mysql+PHP）环境下（或者LNMP），对硬件要求低<br><strong>Agent</strong>：目前已有的agent 基本支持市面常见的OS，包含Linux、HPUX、Solaris、Sun、<br>windows<br><strong>SNMP</strong>：支持各类常见的网络设备 ;SNMP(Simple Network Management Protocol,简单网络管理协议</p>\n<p><strong>Zabbix监控过程逻辑图 </strong><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7001.png\" alt=\"\"></p>\n<h3 id=\"监控类型\"><a href=\"#监控类型\" class=\"headerlink\" title=\"监控类型\"></a>监控类型</h3><p><strong>硬件监控:</strong>适用于物理机、远程管理卡（iDRAC），IPMI（只能平台管理接口）<br><strong>ipmitools:</strong>，MegaCli（查看Raid磁盘）<br><strong>系统监控:</strong> 监控cpt：lscpu、uptime、top、vmstat 1 、mpstat 1、htop<br><strong>监控内存：</strong> free -m<br><strong>监控硬盘：</strong>df -h、iotop<br><strong>监控网络：</strong>iftop、netstat、ss<br><strong>应用服务监控：</strong>nfs、MySQL、nginx、apache、php、rsync<br>更详细的监控类型可以参考：<a href=\"http://www.abcdocker.com/abcdocker/1376\">http://www.abcdocker.com/abcdocker/1376</a></p>\n<p>所有监控范畴，都可以整合到Zabbix中<br>　　　硬件监控：Zabbix、IPMI、lnterface<br>　　　系统监控：Zabbix、Agent、Interface<br>　　　Java监控：Zabbix、JMX、lnterface<br>　　　网络设备监控：Zabbix、SNMP、lnterface<br>　　　应用服务监控：Zabbix、Agent、UserParameter<br>　　　MySQL数据库监控：percona-monitoring-plulgins<br>　　　URL监控：Zabbix Web监控 </p>\n<hr>\n<h2 id=\"Zabbix-环境配置\"><a href=\"#Zabbix-环境配置\" class=\"headerlink\" title=\"Zabbix 环境配置\"></a>Zabbix 环境配置</h2><p>Centos 7 yum安装<br>1、环境信息<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@localhost ~]# cat /etc/redhat-release </div><div class=\"line\">CentOS Linux release <span class=\"number\">7.2</span><span class=\"number\">.1511</span> (Core) </div><div class=\"line\">[root@localhost ~]# uname -r</div><div class=\"line\"><span class=\"number\">3.10</span><span class=\"number\">.0</span><span class=\"number\">-327.28</span><span class=\"number\">.3</span>.el7.x86_64</div></pre></td></tr></table></figure></p>\n<p>2、yum安装<br>我们使用阿里云yum源,官方yum源下载会比较慢。<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -ivh http:<span class=\"regexp\">//mi</span>rrors.aliyun.com<span class=\"regexp\">/zabbix/</span>zabbix<span class=\"regexp\">/3.0/</span>rhel<span class=\"regexp\">/7/</span>x86_64<span class=\"regexp\">/zabbix-release-3.0-1.el7.noarch.rpm</span></div></pre></td></tr></table></figure></p>\n<p>下载release版本，会在yum.repos.d下面生成一个zabbix.repo的文件</p>\n<p>3、服务端安装相关软件包<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> zabbix-<span class=\"keyword\">server</span> zabbix-web zabbix-<span class=\"keyword\">server</span>-mysql zabbix-web-mysql mariadb-<span class=\"keyword\">server</span> mariadb -y</div></pre></td></tr></table></figure></p>\n<p>注：如果Server端也需要监控则需要安装<strong>zabbix-agent</strong>;在Centos7中，mysql改名为<strong>mariadb</strong></p>\n<p>4、修改PHP时区设置<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">sed</span> -i <span class=\"string\">'s@# php_value date.timezone Europe/Riga<span class=\"variable\">@php_value</span> date.timezone Asia/Shanghai<span class=\"variable\">@g</span>'</span> /etc/httpd/conf.d/zabbix.conf</div></pre></td></tr></table></figure></p>\n<p>注：要注意需要改的配置文件是<strong>/etc/httpd/conf.d/zabbix.conf</strong>而不是<strong>/etc/php.ini</strong></p>\n<hr>\n<h2 id=\"数据库设置\"><a href=\"#数据库设置\" class=\"headerlink\" title=\"数据库设置\"></a>数据库设置</h2><p>1.启动数据库<br><code>systemctl start mariadb</code></p>\n<p>2.创建zabbix数据库及用户<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> zabbix <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> utf8 <span class=\"keyword\">collate</span> utf8_bin;</div><div class=\"line\"><span class=\"keyword\">grant</span> all <span class=\"keyword\">on</span> zabbix.* <span class=\"keyword\">to</span> zabbix@<span class=\"string\">'localhost'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'123456'</span>;</div><div class=\"line\">exit</div></pre></td></tr></table></figure></p>\n<p>3.导入数据<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"meta-keyword\">/usr/</span>share<span class=\"meta-keyword\">/doc/</span>zabbix-server-mysql<span class=\"number\">-3.0</span><span class=\"number\">.4</span>/</div><div class=\"line\">ll          <span class=\"meta\">#可看到有create.sql.gz文件</span></div><div class=\"line\">zcat create.sql.gz |mysql -uzabbix -p123456 zabbix</div></pre></td></tr></table></figure></p>\n<p>注：我们使用zcat，可以查看压缩包包，和cat基本相似；类似的还有：zgrep、zless、zdiff 等</p>\n<p>4.修改zabbix配置文件<br><figure class=\"highlight nix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/zabbix/zabbix_server.conf </div><div class=\"line\"><span class=\"attr\">DBHost=localhost</span>    <span class=\"comment\">#数据库所在主机</span></div><div class=\"line\"><span class=\"attr\">DBName=zabbix</span>       <span class=\"comment\">#数据库名</span></div><div class=\"line\"><span class=\"attr\">DBUser=zabbix</span>       <span class=\"comment\">#数据库用户</span></div><div class=\"line\"><span class=\"attr\">DBPassword=123456</span>   <span class=\"comment\">#数据库密码</span></div></pre></td></tr></table></figure></p>\n<p>5.启动zabbix及apache<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">systemctl <span class=\"keyword\">start</span> zabbix-<span class=\"keyword\">server</span></div><div class=\"line\">systemctl <span class=\"keyword\">start</span> httpd</div></pre></td></tr></table></figure></p>\n<p>注：如果没有启动成功，要看一下是不是80端口被占用</p>\n<p>6.Web界面安装master<br>访问地址：<a href=\"http://IP/zabbix/setup.php\">http://IP/zabbix/setup.php</a><br>点击Next step进行安装<br>首先要确保没有no，如果时区没有改好会提示我们进行修改<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7002.png\" alt=\"\"></p>\n<p>账号密码都是我们刚刚在配置文件中设置的，端口默认就是3306<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7003.png\" alt=\"\"></p>\n<p>为我们的zabbix起个名字，一会在右上角会显示<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7004.png\" alt=\"\"><br>最后是展示我们的配置信息，可以查看到哪里有错误<br>点击Finish<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7005.png\" alt=\"\"><br>提示：登录之后请立即修改密码</p>\n<p>7.配置zabbix-agent端<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/zabbix/zabbix_agentd.conf </div><div class=\"line\">Server=<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>           #修改Server端的IP地址（被动模式IP地址）</div><div class=\"line\">ServerActive=<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>     #主动模式，主动向server端报告</div><div class=\"line\">systemctl start zabbix-agent</div></pre></td></tr></table></figure></p>\n<p>查看端口号:<code>netstat -lntp</code><br>10051为server端口，10050为agent端口</p>\n<hr>\n<h2 id=\"Web界面配置\"><a href=\"#Web界面配置\" class=\"headerlink\" title=\"Web界面配置\"></a>Web界面配置</h2><p>找到Configuration—-&gt;Hosts 添加一台监控主机<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7006.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7007.png\" alt=\"\"></p>\n<p>开启后，如果出现错误我们可以看一下zabbix的日志:<code>ls /var/log/zabbix/zabbix_</code><br>看这两个文件：<strong>zabbix_agentd.log</strong>  <strong>zabbix_server.log </strong><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7008.png\" alt=\"\"><br>当ZBX变成绿色的时候，说明监控成功。因为我们没有配置SNMP、JMX、IPMI等。所以我发监控<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7009.png\" alt=\"\"></p>\n<p>因为我们现在只安装了一台服务器，所以只有一个主机。我们可以查看现在这台主机的CPU等及基本的信息<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7010.png\" alt=\"\"></p>\n<p>点击Monitoring—–Graphs，选择我们要监控的内容<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7011.png\" alt=\"\"></p>\n<p>我们选择可以随便选择一个进行查看信息<br>例如：我们查看CPU的负载<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7012.png\" alt=\"\"></p>\n<p>某一段时间内，CPU正在处理以及等待CPU处理的进程数的之和。Load Average是从另一个角度来体现CPU的使用状态的。 </p>\n<p>这些监控其实就是zabbix在数据库查找数据，然后使用jd进行画图，所以Zabbix性能依赖于mysql数据库</p>\n<hr>\n<h2 id=\"Zabbix页面安全设置\"><a href=\"#Zabbix页面安全设置\" class=\"headerlink\" title=\"Zabbix页面安全设置\"></a>Zabbix页面安全设置</h2><p>1、设置默认账号密码<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7013.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7014.png\" alt=\"\"></p>\n<p>设置完中文<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7015.png\" alt=\"\"></p>\n<hr>\n<h2 id=\"Zabbix-菜单说明\"><a href=\"#Zabbix-菜单说明\" class=\"headerlink\" title=\"Zabbix 菜单说明\"></a>Zabbix 菜单说明</h2><p>Zabbix 上方的菜单简单介绍说明<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7016.png\" alt=\"\"></p>\n<p>Doshboard下面可以设置你想设置的图形，添加方法如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7017.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7018.png\" alt=\"\"></p>\n<p>这时，就可以找到你喜爱的了，直接打开<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7019.png\" alt=\"\"></p>\n<p>screens其实就是一个聚合图形，可以把多个图片合在一起。然后放在大屏幕上，供别人查看<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7020.png\" alt=\"\"></p>\n<p>maps就是一个架构图<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7021.png\" alt=\"\"></p>\n<p>Status of Zabbix就是一个状态栏<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7022.png\" alt=\"\"></p>\n<p>　第一行：Server是否运行[yes]和后面的运行地址<br>　第二行：监控的机器 （启用的/关闭的/模板）<br>　第三行：监控项 （启用的/关闭的/不支持的）<br>　第四行：触发器的状态 （启用的/关闭的/【故障/正常】）<br>　第五行：当前用户数量 （在线数量）<br>　第六行：zabbix每秒可以收到的一个新值</p>\n<p>告警的级别<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7023.png\" alt=\"\"></p>\n<p>我们可以设置报警响铃，让他在前端响<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7024.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7025.png\" alt=\"\"></p>\n<p>我们首页的监控列表是可以随意拖动的<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7026.png\" alt=\"\"></p>\n<p>我们还可以将它关闭，并且设置刷新时间<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Zabbix%E7%9B%91%E6%8E%A7027.png\" alt=\"\"><br>Zabbix 基础完!</p>\n<p>本文参考了：<a href=\"http://www.abcdocker.com/abcdocker/1402\">http://www.abcdocker.com/abcdocker/1402</a></p>\n<hr>\n<h1 id=\"Zabbix-进阶\"><a href=\"#Zabbix-进阶\" class=\"headerlink\" title=\"Zabbix 进阶\"></a>Zabbix 进阶</h1><p>-未完-</p>\n<hr>\n"},{"title":"检查Linux服务器性能","abbrlink":64139,"date":"2016-11-08T01:53:54.000Z","_content":"\n# 关于服务器负载\n\nload average值，参考：[理解Linux系统中的load average（图文版）](http://heipark.iteye.com/blog/1340384)\n\n>（1） uptime\n\n```\n23:51:26 up 21:31,  1 user,  load average: 30.02, 26.43, 19.02```\n\n这个命令可以快速查看机器的负载情况。在Linux系统中，这些数据表示等待CPU资源的进程和阻塞在不可中断IO进程（进程状态为D）的数量。这些数据可以让我们对系统资源使用有一个宏观的了解。\n\n命令的输出分别表示1分钟、5分钟、15分钟的平均负载情况。通过这三个数据，可以了解服务器负载是在趋于紧张还是区域缓解。如果1分钟平均负载很高，而15分钟平均负载很低，说明服务器正在命令高负载情况，需要进一步排查CPU资源都消耗在了哪里。反之，如果15分钟平均负载很高，1分钟平均负载较低，则有可能是CPU资源紧张时刻已经过去。\n\n上面例子中的输出，可以看见最近1分钟的平均负载非常高，且远高于最近15分钟负载，因此我们需要继续排查当前系统中有什么进程消耗了大量的资源。可以通过下文将会介绍的vmstat、mpstat等命令进一步排查。\n\n>（2） dmesg | tail\n\n```\n[1880957.563150] perl invoked oom-killer: gfp_mask=0x280da, order=0, oom_score_adj=0\n[...]\n[1880957.563400] Out of memory: Kill process 18694 (perl) score 246 or sacrifice child\n[1880957.563408] Killed process 18694 (perl) total-vm:1972392kB, anon-rss:1953348kB, file-rss:0kB\n[2320864.954447] TCP: Possible SYN flooding on port 7001. Dropping request.  Check SNMP counters.```\n该命令会输出系统日志的最后10行。示例中的输出，可以看见一次内核的oom kill和一次TCP丢包。这些日志可以帮助排查性能问题。千万不要忘了这一步。\n\n>（3） vmstat 1\n\n```\nprocs ---------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n34  0    0 200889792  73708 591828    0    0     0     5    6   10 96  1  3  0  0\n32  0    0 200889920  73708 591860    0    0     0   592 13284 4282 98  1  1  0  0\n32  0    0 200890112  73708 591860    0    0     0     0 9501 2154 99  1  0  0  0\n32  0    0 200889568  73712 591856    0    0     0    48 11900 2459 99  0  0  0  0\n32  0    0 200890208  73712 591860    0    0     0     0 15898 4840 98  1  1  0  0```\nvmstat 命令，每行会输出一些系统核心指标，这些指标可以让我们更详细的了解系统状态。后面跟的参数1，表示每秒输出一次统计信息，表头提示了每一列的含义，这几介绍一些和性能调优相关的列：\n  ● **r**：等待在CPU资源的进程数。这个数据比平均负载更加能够体现CPU负载情况，数据中不包含等待IO的进程。如果这个数值大于机器CPU核数，那么机器的CPU资源已经饱和。\n  ● **free**：系统可用内存数（以千字节为单位），如果剩余内存不足，也会导致系统性能问题。下文介绍到的free命令，可以更详细的了解系统内存的使用情况。\n  ● **si, so**：交换区写入和读取的数量。如果这个数据不为0，说明系统已经在使用交换区（swap），机器物理内存已经不足。\n  ● **us, sy, id, wa, st**：这些都代表了CPU时间的消耗，它们分别表示**用户时间（user）、系统（内核）时间（sys）、空闲时间（idle）、IO等待时间（wait）和被偷走的时间（stolen）**，一般被其他虚拟机消耗）。\n上述这些CPU时间，可以让我们很快了解CPU是否出于繁忙状态。一般情况下，如果用户时间和系统时间相加非常大，CPU出于忙于执行指令。如果IO等待时间很长，那么系统的瓶颈可能在磁盘IO。\n示例命令的输出可以看见，大量CPU时间消耗在用户态，也就是用户应用程序消耗了CPU时间。这不一定是性能问题，需要结合r队列，一起分析。\n\n>（4） mpstat -P ALL 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015  _x86_64_ (32 CPU)\n07:38:49 PM  CPU   %usr  %nice   %sys %iowait   %irq  %soft  %steal  %guest  %gnice  %idle\n07:38:50 PM  all  98.47   0.00   0.75    0.00   0.00   0.00    0.00    0.00    0.00   0.78\n07:38:50 PM    0  96.04   0.00   2.97    0.00   0.00   0.00    0.00    0.00    0.00   0.99\n07:38:50 PM    1  97.00   0.00   1.00    0.00   0.00   0.00    0.00    0.00    0.00   2.00\n07:38:50 PM    2  98.00   0.00   1.00    0.00   0.00   0.00    0.00    0.00    0.00   1.00\n07:38:50 PM    3  96.97   0.00   0.00    0.00   0.00   0.00    0.00    0.00    0.00   3.03```\n\n该命令可以显示每个CPU的占用情况，如果有一个CPU占用率特别高，那么有可能是一个单线程应用程序引起的。\n\n>（5） pidstat 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015    _x86_64_    (32 CPU)\n07:41:02 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command\n07:41:03 PM     0         9    0.00    0.94    0.00    0.94     1  rcuos/0\n07:41:03 PM     0      4214    5.66    5.66    0.00   11.32    15  mesos-slave\n07:41:03 PM     0      4354    0.94    0.94    0.00    1.89     8  java\n07:41:03 PM     0      6521 1596.23    1.89    0.00 1598.11    27  java\n07:41:03 PM     0      6564 1571.70    7.55    0.00 1579.25    28  java\n07:41:03 PM 60004     60154    0.94    4.72    0.00    5.66     9  pidstat\n07:41:03 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command\n07:41:04 PM     0      4214    6.00    2.00    0.00    8.00    15  mesos-slave\n07:41:04 PM     0      6521 1590.00    1.00    0.00 1591.00    27  java\n07:41:04 PM     0      6564 1573.00   10.00    0.00 1583.00    28  java\n07:41:04 PM   108      6718    1.00    0.00    0.00    1.00     0  snmp-pass\n07:41:04 PM 60004     60154    1.00    4.00    0.00    5.00     9  pidstat```\npidstat命令输出进程的CPU占用率，该命令会持续输出，并且不会覆盖之前的数据，可以方便观察系统动态。如上的输出，可以看见两个JAVA进程占用了将近1600%的CPU时间，既消耗了大约16个CPU核心的运算资源。\n\n>（6） iostat -xz 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015  _x86_64_ (32 CPU)\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          73.96    0.00    3.73    0.03    0.06   22.21\nDevice:   rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nxvda        0.00     0.23    0.21    0.18     4.52     2.08    34.37     0.00    9.98   13.80    5.42   2.44   0.09\nxvdb        0.01     0.00    1.02    8.94   127.97   598.53   145.79     0.00    0.43    1.78    0.28   0.25   0.25\nxvdc        0.01     0.00    1.02    8.86   127.79   595.94   146.50     0.00    0.45    1.82    0.30   0.27   0.26\ndm-0        0.00     0.00    0.69    2.32    10.47    31.69    28.01     0.01    3.23    0.71    3.98   0.13   0.04\ndm-1        0.00     0.00    0.00    0.94     0.01     3.78     8.00     0.33  345.84    0.04  346.81   0.01   0.00\ndm-2        0.00     0.00    0.09    0.07     1.35     0.36    22.50     0.00    2.55    0.23    5.62   1.78   0.03\n```\niostat命令主要用于查看机器磁盘IO情况。该命令输出的列，主要含义是：\n  ● **r/s, w/s, rkB/s, wkB/s**：分别表示每秒读写次数和每秒读写数据量（千字节）。读写量过大，可能会引起性能问题。\n  ● **await**：IO操作的平均等待时间，单位是毫秒。这是应用程序在和磁盘交互时，需要消耗的时间，包括IO等待和实际操作的耗时。如果这个数值过大，可能是硬件设备遇到了瓶颈或者出现故障。\n  ● **avgqu-sz**：向设备发出的请求平均数量。如果这个数值大于1，可能是硬件设备已经饱和（部分前端硬件设备支持并行写入）。\n  ●** %util**：设备利用率。这个数值表示设备的繁忙程度，经验值是如果超过60，可能会影响IO性能（可以参照IO操作平均等待时间）。如果到达100%，说明硬件设备已经饱和。\n如果显示的是逻辑设备的数据，那么设备利用率不代表后端实际的硬件设备已经饱和。值得注意的是，即使IO性能不理想，也不一定意味这应用程序性能会不好，可以利用诸如预读取、写缓存等策略提升应用性能。\n\n>（7） free –m\n\n```\n             total       used       free     shared    buffers     cached\nMem:        245998      24545     221453         83         59        541\n-/+ buffers/cache:      23944     222053\nSwap:            0          0          0```\nfree命令可以查看系统内存的使用情况，-m参数表示按照兆字节展示。最后两列分别表示用于IO缓存的内存数，和用于文件系统页缓存的内存数。需要注意的是，第二行-/+ buffers/cache，看上去缓存占用了大量内存空间。这是Linux系统的内存使用策略，尽可能的利用内存，如果应用程序需要内存，这部分内存会立即被回收并分配给应用程序。因此，这部分内存一般也被当成是可用内存。\n如果可用内存非常少，系统可能会动用交换区（如果配置了的话），这样会增加IO开销（可以在iostat命令中提现），降低系统性能。\n\n>（8） sar -n DEV 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015     _x86_64_    (32 CPU)\n12:16:48 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil\n12:16:49 AM      eth0  18763.00   5032.00  20686.42    478.30      0.00      0.00      0.00      0.00\n12:16:49 AM        lo     14.00     14.00      1.36      1.36      0.00      0.00      0.00      0.00\n12:16:49 AM   docker0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00\n12:16:49 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil\n12:16:50 AM      eth0  19763.00   5101.00  21999.10    482.56      0.00      0.00      0.00      0.00\n12:16:50 AM        lo     20.00     20.00      3.25      3.25      0.00      0.00      0.00      0.00\n12:16:50 AM   docker0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00```\nsar命令在这里可以查看网络设备的吞吐率。在排查性能问题时，可以通过网络设备的吞吐量，判断网络设备是否已经饱和。如示例输出中，eth0网卡设备，吞吐率大概在22 Mbytes/s，既176 Mbits/sec，没有达到1Gbit/sec的硬件上限。\n\n>（9） sar -n TCP,ETCP 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015    _x86_64_    (32 CPU)\n12:17:19 AM  active/s passive/s    iseg/s    oseg/s\n12:17:20 AM      1.00      0.00  10233.00  18846.00\n12:17:19 AM  atmptf/s  estres/s retrans/s isegerr/s   orsts/s\n12:17:20 AM      0.00      0.00      0.00      0.00      0.00\n12:17:20 AM  active/s passive/s    iseg/s    oseg/s\n12:17:21 AM      1.00      0.00   8359.00   6039.00\n12:17:20 AM  atmptf/s  estres/s retrans/s isegerr/s   orsts/s\n12:17:21 AM      0.00      0.00      0.00      0.00      0.00```\n\nsar命令在这里用于查看TCP连接状态，其中包括：\n  ● **active/s**：每秒本地发起的TCP连接数，既通过connect调用创建的TCP连接；\n  ● **passive/s**：每秒远程发起的TCP连接数，即通过accept调用创建的TCP连接；\n  ●** retrans/s**：每秒TCP重传数量；\nTCP连接数可以用来判断性能问题是否由于建立了过多的连接，进一步可以判断是主动发起的连接，还是被动接受的连接。TCP重传可能是因为网络环境恶劣，或者服务器压力过大导致丢包。\n\n>（10）top\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD1.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD2.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD3.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD4.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD5.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD6.png)\n\ntop命令包含了前面好几个命令的检查的内容。比如：\n\n* 系统负载情况（uptime）\n* 系统内存使用情况（free）\n* 系统CPU使用情况（vmstat）等。\n\n因此通过这个命令，可以相对全面的查看系统负载的来源。同时，top命令支持排序，可以按照不同的列排序，方便查找出诸如内存占用最多的进程、CPU占用率最高的进程等。\n但是，top命令相对于前面一些命令，输出是一个瞬间值，如果不持续盯着，可能会错过一些线索。这时可能需要暂停top命令刷新，来记录和比对数据。\n\n\n---","source":"_posts/环境搭建/2016-11-08-检查Linux服务器性能.md","raw":"---\ntitle: 检查Linux服务器性能\ncategories:\n  - 环境搭建\ntags:\n  - 检查Linux服务器性能\nabbrlink: 64139\ndate: 2016-11-08 09:53:54\n---\n\n# 关于服务器负载\n\nload average值，参考：[理解Linux系统中的load average（图文版）](http://heipark.iteye.com/blog/1340384)\n\n>（1） uptime\n\n```\n23:51:26 up 21:31,  1 user,  load average: 30.02, 26.43, 19.02```\n\n这个命令可以快速查看机器的负载情况。在Linux系统中，这些数据表示等待CPU资源的进程和阻塞在不可中断IO进程（进程状态为D）的数量。这些数据可以让我们对系统资源使用有一个宏观的了解。\n\n命令的输出分别表示1分钟、5分钟、15分钟的平均负载情况。通过这三个数据，可以了解服务器负载是在趋于紧张还是区域缓解。如果1分钟平均负载很高，而15分钟平均负载很低，说明服务器正在命令高负载情况，需要进一步排查CPU资源都消耗在了哪里。反之，如果15分钟平均负载很高，1分钟平均负载较低，则有可能是CPU资源紧张时刻已经过去。\n\n上面例子中的输出，可以看见最近1分钟的平均负载非常高，且远高于最近15分钟负载，因此我们需要继续排查当前系统中有什么进程消耗了大量的资源。可以通过下文将会介绍的vmstat、mpstat等命令进一步排查。\n\n>（2） dmesg | tail\n\n```\n[1880957.563150] perl invoked oom-killer: gfp_mask=0x280da, order=0, oom_score_adj=0\n[...]\n[1880957.563400] Out of memory: Kill process 18694 (perl) score 246 or sacrifice child\n[1880957.563408] Killed process 18694 (perl) total-vm:1972392kB, anon-rss:1953348kB, file-rss:0kB\n[2320864.954447] TCP: Possible SYN flooding on port 7001. Dropping request.  Check SNMP counters.```\n该命令会输出系统日志的最后10行。示例中的输出，可以看见一次内核的oom kill和一次TCP丢包。这些日志可以帮助排查性能问题。千万不要忘了这一步。\n\n>（3） vmstat 1\n\n```\nprocs ---------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n34  0    0 200889792  73708 591828    0    0     0     5    6   10 96  1  3  0  0\n32  0    0 200889920  73708 591860    0    0     0   592 13284 4282 98  1  1  0  0\n32  0    0 200890112  73708 591860    0    0     0     0 9501 2154 99  1  0  0  0\n32  0    0 200889568  73712 591856    0    0     0    48 11900 2459 99  0  0  0  0\n32  0    0 200890208  73712 591860    0    0     0     0 15898 4840 98  1  1  0  0```\nvmstat 命令，每行会输出一些系统核心指标，这些指标可以让我们更详细的了解系统状态。后面跟的参数1，表示每秒输出一次统计信息，表头提示了每一列的含义，这几介绍一些和性能调优相关的列：\n  ● **r**：等待在CPU资源的进程数。这个数据比平均负载更加能够体现CPU负载情况，数据中不包含等待IO的进程。如果这个数值大于机器CPU核数，那么机器的CPU资源已经饱和。\n  ● **free**：系统可用内存数（以千字节为单位），如果剩余内存不足，也会导致系统性能问题。下文介绍到的free命令，可以更详细的了解系统内存的使用情况。\n  ● **si, so**：交换区写入和读取的数量。如果这个数据不为0，说明系统已经在使用交换区（swap），机器物理内存已经不足。\n  ● **us, sy, id, wa, st**：这些都代表了CPU时间的消耗，它们分别表示**用户时间（user）、系统（内核）时间（sys）、空闲时间（idle）、IO等待时间（wait）和被偷走的时间（stolen）**，一般被其他虚拟机消耗）。\n上述这些CPU时间，可以让我们很快了解CPU是否出于繁忙状态。一般情况下，如果用户时间和系统时间相加非常大，CPU出于忙于执行指令。如果IO等待时间很长，那么系统的瓶颈可能在磁盘IO。\n示例命令的输出可以看见，大量CPU时间消耗在用户态，也就是用户应用程序消耗了CPU时间。这不一定是性能问题，需要结合r队列，一起分析。\n\n>（4） mpstat -P ALL 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015  _x86_64_ (32 CPU)\n07:38:49 PM  CPU   %usr  %nice   %sys %iowait   %irq  %soft  %steal  %guest  %gnice  %idle\n07:38:50 PM  all  98.47   0.00   0.75    0.00   0.00   0.00    0.00    0.00    0.00   0.78\n07:38:50 PM    0  96.04   0.00   2.97    0.00   0.00   0.00    0.00    0.00    0.00   0.99\n07:38:50 PM    1  97.00   0.00   1.00    0.00   0.00   0.00    0.00    0.00    0.00   2.00\n07:38:50 PM    2  98.00   0.00   1.00    0.00   0.00   0.00    0.00    0.00    0.00   1.00\n07:38:50 PM    3  96.97   0.00   0.00    0.00   0.00   0.00    0.00    0.00    0.00   3.03```\n\n该命令可以显示每个CPU的占用情况，如果有一个CPU占用率特别高，那么有可能是一个单线程应用程序引起的。\n\n>（5） pidstat 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015    _x86_64_    (32 CPU)\n07:41:02 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command\n07:41:03 PM     0         9    0.00    0.94    0.00    0.94     1  rcuos/0\n07:41:03 PM     0      4214    5.66    5.66    0.00   11.32    15  mesos-slave\n07:41:03 PM     0      4354    0.94    0.94    0.00    1.89     8  java\n07:41:03 PM     0      6521 1596.23    1.89    0.00 1598.11    27  java\n07:41:03 PM     0      6564 1571.70    7.55    0.00 1579.25    28  java\n07:41:03 PM 60004     60154    0.94    4.72    0.00    5.66     9  pidstat\n07:41:03 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command\n07:41:04 PM     0      4214    6.00    2.00    0.00    8.00    15  mesos-slave\n07:41:04 PM     0      6521 1590.00    1.00    0.00 1591.00    27  java\n07:41:04 PM     0      6564 1573.00   10.00    0.00 1583.00    28  java\n07:41:04 PM   108      6718    1.00    0.00    0.00    1.00     0  snmp-pass\n07:41:04 PM 60004     60154    1.00    4.00    0.00    5.00     9  pidstat```\npidstat命令输出进程的CPU占用率，该命令会持续输出，并且不会覆盖之前的数据，可以方便观察系统动态。如上的输出，可以看见两个JAVA进程占用了将近1600%的CPU时间，既消耗了大约16个CPU核心的运算资源。\n\n>（6） iostat -xz 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015  _x86_64_ (32 CPU)\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          73.96    0.00    3.73    0.03    0.06   22.21\nDevice:   rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nxvda        0.00     0.23    0.21    0.18     4.52     2.08    34.37     0.00    9.98   13.80    5.42   2.44   0.09\nxvdb        0.01     0.00    1.02    8.94   127.97   598.53   145.79     0.00    0.43    1.78    0.28   0.25   0.25\nxvdc        0.01     0.00    1.02    8.86   127.79   595.94   146.50     0.00    0.45    1.82    0.30   0.27   0.26\ndm-0        0.00     0.00    0.69    2.32    10.47    31.69    28.01     0.01    3.23    0.71    3.98   0.13   0.04\ndm-1        0.00     0.00    0.00    0.94     0.01     3.78     8.00     0.33  345.84    0.04  346.81   0.01   0.00\ndm-2        0.00     0.00    0.09    0.07     1.35     0.36    22.50     0.00    2.55    0.23    5.62   1.78   0.03\n```\niostat命令主要用于查看机器磁盘IO情况。该命令输出的列，主要含义是：\n  ● **r/s, w/s, rkB/s, wkB/s**：分别表示每秒读写次数和每秒读写数据量（千字节）。读写量过大，可能会引起性能问题。\n  ● **await**：IO操作的平均等待时间，单位是毫秒。这是应用程序在和磁盘交互时，需要消耗的时间，包括IO等待和实际操作的耗时。如果这个数值过大，可能是硬件设备遇到了瓶颈或者出现故障。\n  ● **avgqu-sz**：向设备发出的请求平均数量。如果这个数值大于1，可能是硬件设备已经饱和（部分前端硬件设备支持并行写入）。\n  ●** %util**：设备利用率。这个数值表示设备的繁忙程度，经验值是如果超过60，可能会影响IO性能（可以参照IO操作平均等待时间）。如果到达100%，说明硬件设备已经饱和。\n如果显示的是逻辑设备的数据，那么设备利用率不代表后端实际的硬件设备已经饱和。值得注意的是，即使IO性能不理想，也不一定意味这应用程序性能会不好，可以利用诸如预读取、写缓存等策略提升应用性能。\n\n>（7） free –m\n\n```\n             total       used       free     shared    buffers     cached\nMem:        245998      24545     221453         83         59        541\n-/+ buffers/cache:      23944     222053\nSwap:            0          0          0```\nfree命令可以查看系统内存的使用情况，-m参数表示按照兆字节展示。最后两列分别表示用于IO缓存的内存数，和用于文件系统页缓存的内存数。需要注意的是，第二行-/+ buffers/cache，看上去缓存占用了大量内存空间。这是Linux系统的内存使用策略，尽可能的利用内存，如果应用程序需要内存，这部分内存会立即被回收并分配给应用程序。因此，这部分内存一般也被当成是可用内存。\n如果可用内存非常少，系统可能会动用交换区（如果配置了的话），这样会增加IO开销（可以在iostat命令中提现），降低系统性能。\n\n>（8） sar -n DEV 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015     _x86_64_    (32 CPU)\n12:16:48 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil\n12:16:49 AM      eth0  18763.00   5032.00  20686.42    478.30      0.00      0.00      0.00      0.00\n12:16:49 AM        lo     14.00     14.00      1.36      1.36      0.00      0.00      0.00      0.00\n12:16:49 AM   docker0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00\n12:16:49 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s   %ifutil\n12:16:50 AM      eth0  19763.00   5101.00  21999.10    482.56      0.00      0.00      0.00      0.00\n12:16:50 AM        lo     20.00     20.00      3.25      3.25      0.00      0.00      0.00      0.00\n12:16:50 AM   docker0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00```\nsar命令在这里可以查看网络设备的吞吐率。在排查性能问题时，可以通过网络设备的吞吐量，判断网络设备是否已经饱和。如示例输出中，eth0网卡设备，吞吐率大概在22 Mbytes/s，既176 Mbits/sec，没有达到1Gbit/sec的硬件上限。\n\n>（9） sar -n TCP,ETCP 1\n\n```\nLinux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015    _x86_64_    (32 CPU)\n12:17:19 AM  active/s passive/s    iseg/s    oseg/s\n12:17:20 AM      1.00      0.00  10233.00  18846.00\n12:17:19 AM  atmptf/s  estres/s retrans/s isegerr/s   orsts/s\n12:17:20 AM      0.00      0.00      0.00      0.00      0.00\n12:17:20 AM  active/s passive/s    iseg/s    oseg/s\n12:17:21 AM      1.00      0.00   8359.00   6039.00\n12:17:20 AM  atmptf/s  estres/s retrans/s isegerr/s   orsts/s\n12:17:21 AM      0.00      0.00      0.00      0.00      0.00```\n\nsar命令在这里用于查看TCP连接状态，其中包括：\n  ● **active/s**：每秒本地发起的TCP连接数，既通过connect调用创建的TCP连接；\n  ● **passive/s**：每秒远程发起的TCP连接数，即通过accept调用创建的TCP连接；\n  ●** retrans/s**：每秒TCP重传数量；\nTCP连接数可以用来判断性能问题是否由于建立了过多的连接，进一步可以判断是主动发起的连接，还是被动接受的连接。TCP重传可能是因为网络环境恶劣，或者服务器压力过大导致丢包。\n\n>（10）top\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD1.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD2.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD3.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD4.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD5.png)\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD6.png)\n\ntop命令包含了前面好几个命令的检查的内容。比如：\n\n* 系统负载情况（uptime）\n* 系统内存使用情况（free）\n* 系统CPU使用情况（vmstat）等。\n\n因此通过这个命令，可以相对全面的查看系统负载的来源。同时，top命令支持排序，可以按照不同的列排序，方便查找出诸如内存占用最多的进程、CPU占用率最高的进程等。\n但是，top命令相对于前面一些命令，输出是一个瞬间值，如果不持续盯着，可能会错过一些线索。这时可能需要暂停top命令刷新，来记录和比对数据。\n\n\n---","slug":"环境搭建-2016-11-08-检查Linux服务器性能","published":1,"updated":"2016-11-21T02:17:09.046Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjnd002gd8pkdq6jn8ju","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"关于服务器负载\"><a href=\"#关于服务器负载\" class=\"headerlink\" title=\"关于服务器负载\"></a>关于服务器负载</h1><p>load average值，参考：<a href=\"http://heipark.iteye.com/blog/1340384\" target=\"_blank\" rel=\"external\">理解Linux系统中的load average（图文版）</a></p>\n<blockquote>\n<p>（1） uptime</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">23<span class=\"selector-pseudo\">:51</span><span class=\"selector-pseudo\">:26</span> <span class=\"selector-tag\">up</span> 21<span class=\"selector-pseudo\">:31</span>,  1 <span class=\"selector-tag\">user</span>,  <span class=\"selector-tag\">load</span> <span class=\"selector-tag\">average</span>: 30<span class=\"selector-class\">.02</span>, 26<span class=\"selector-class\">.43</span>, 19<span class=\"selector-class\">.02</span></div></pre></td></tr></table></figure>\n<p>这个命令可以快速查看机器的负载情况。在Linux系统中，这些数据表示等待CPU资源的进程和阻塞在不可中断IO进程（进程状态为D）的数量。这些数据可以让我们对系统资源使用有一个宏观的了解。</p>\n<p>命令的输出分别表示1分钟、5分钟、15分钟的平均负载情况。通过这三个数据，可以了解服务器负载是在趋于紧张还是区域缓解。如果1分钟平均负载很高，而15分钟平均负载很低，说明服务器正在命令高负载情况，需要进一步排查CPU资源都消耗在了哪里。反之，如果15分钟平均负载很高，1分钟平均负载较低，则有可能是CPU资源紧张时刻已经过去。</p>\n<p>上面例子中的输出，可以看见最近1分钟的平均负载非常高，且远高于最近15分钟负载，因此我们需要继续排查当前系统中有什么进程消耗了大量的资源。可以通过下文将会介绍的vmstat、mpstat等命令进一步排查。</p>\n<blockquote>\n<p>（2） dmesg | tail</p>\n</blockquote>\n<figure class=\"highlight scheme\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">[<span class=\"name\">1880957.563150</span>] perl invoked oom-killer: gfp_mask=0x280da, order=0, oom_score_adj=0</div><div class=\"line\">[<span class=\"name\"><span class=\"builtin-name\">...</span></span>]</div><div class=\"line\">[<span class=\"name\">1880957.563400</span>] Out of memory: Kill process <span class=\"number\">18694</span> (<span class=\"name\">perl</span>) score <span class=\"number\">246</span> or sacrifice child</div><div class=\"line\">[<span class=\"name\">1880957.563408</span>] Killed process <span class=\"number\">18694</span> (<span class=\"name\">perl</span>) total-vm:1972392kB, anon-rss:1953348kB, file-rss:0kB</div><div class=\"line\">[<span class=\"name\">2320864.954447</span>] TCP: Possible SYN flooding on port <span class=\"number\">7001</span>. Dropping request.  Check SNMP counters.</div></pre></td></tr></table></figure>\n<p>该命令会输出系统日志的最后10行。示例中的输出，可以看见一次内核的oom kill和一次TCP丢包。这些日志可以帮助排查性能问题。千万不要忘了这一步。</p>\n<blockquote>\n<p>（3） vmstat 1</p>\n</blockquote>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">procs ---------memory---------- ---swap-- -----io---- -system-- ------cpu-----</div><div class=\"line\"> r  b swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</div><div class=\"line\"><span class=\"number\">34</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200889792</span>  <span class=\"number\">73708</span> <span class=\"number\">591828</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>     <span class=\"number\">5</span>    <span class=\"number\">6</span>   <span class=\"number\">10</span> <span class=\"number\">96</span>  <span class=\"number\">1</span>  <span class=\"number\">3</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200889920</span>  <span class=\"number\">73708</span> <span class=\"number\">591860</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>   <span class=\"number\">592</span> <span class=\"number\">13284</span> <span class=\"number\">4282</span> <span class=\"number\">98</span>  <span class=\"number\">1</span>  <span class=\"number\">1</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200890112</span>  <span class=\"number\">73708</span> <span class=\"number\">591860</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>     <span class=\"number\">0</span> <span class=\"number\">9501</span> <span class=\"number\">2154</span> <span class=\"number\">99</span>  <span class=\"number\">1</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200889568</span>  <span class=\"number\">73712</span> <span class=\"number\">591856</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>    <span class=\"number\">48</span> <span class=\"number\">11900</span> <span class=\"number\">2459</span> <span class=\"number\">99</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200890208</span>  <span class=\"number\">73712</span> <span class=\"number\">591860</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>     <span class=\"number\">0</span> <span class=\"number\">15898</span> <span class=\"number\">4840</span> <span class=\"number\">98</span>  <span class=\"number\">1</span>  <span class=\"number\">1</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div></pre></td></tr></table></figure>\n<p>vmstat 命令，每行会输出一些系统核心指标，这些指标可以让我们更详细的了解系统状态。后面跟的参数1，表示每秒输出一次统计信息，表头提示了每一列的含义，这几介绍一些和性能调优相关的列：<br>  ● <strong>r</strong>：等待在CPU资源的进程数。这个数据比平均负载更加能够体现CPU负载情况，数据中不包含等待IO的进程。如果这个数值大于机器CPU核数，那么机器的CPU资源已经饱和。<br>  ● <strong>free</strong>：系统可用内存数（以千字节为单位），如果剩余内存不足，也会导致系统性能问题。下文介绍到的free命令，可以更详细的了解系统内存的使用情况。<br>  ● <strong>si, so</strong>：交换区写入和读取的数量。如果这个数据不为0，说明系统已经在使用交换区（swap），机器物理内存已经不足。<br>  ● <strong>us, sy, id, wa, st</strong>：这些都代表了CPU时间的消耗，它们分别表示<strong>用户时间（user）、系统（内核）时间（sys）、空闲时间（idle）、IO等待时间（wait）和被偷走的时间（stolen）</strong>，一般被其他虚拟机消耗）。<br>上述这些CPU时间，可以让我们很快了解CPU是否出于繁忙状态。一般情况下，如果用户时间和系统时间相加非常大，CPU出于忙于执行指令。如果IO等待时间很长，那么系统的瓶颈可能在磁盘IO。<br>示例命令的输出可以看见，大量CPU时间消耗在用户态，也就是用户应用程序消耗了CPU时间。这不一定是性能问题，需要结合r队列，一起分析。</p>\n<blockquote>\n<p>（4） mpstat -P ALL 1</p>\n</blockquote>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">Linux</span> <span class=\"selector-tag\">3</span><span class=\"selector-class\">.13</span><span class=\"selector-class\">.0-49-generic</span> (titanclusters-xxxxx)  <span class=\"selector-tag\">07</span>/<span class=\"selector-tag\">14</span>/<span class=\"selector-tag\">2015</span>  <span class=\"selector-tag\">_x86_64_</span> (<span class=\"number\">32</span> CPU)</div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">PM</span>  <span class=\"selector-tag\">CPU</span>   %<span class=\"selector-tag\">usr</span>  %<span class=\"selector-tag\">nice</span>   %<span class=\"selector-tag\">sys</span> %<span class=\"selector-tag\">iowait</span>   %<span class=\"selector-tag\">irq</span>  %<span class=\"selector-tag\">soft</span>  %<span class=\"selector-tag\">steal</span>  %<span class=\"selector-tag\">guest</span>  %<span class=\"selector-tag\">gnice</span>  %<span class=\"selector-tag\">idle</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>  <span class=\"keyword\">all</span>  <span class=\"selector-tag\">98</span><span class=\"selector-class\">.47</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.75</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.78</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">0</span>  <span class=\"selector-tag\">96</span><span class=\"selector-class\">.04</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">2</span><span class=\"selector-class\">.97</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.99</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">1</span>  <span class=\"selector-tag\">97</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">2</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">2</span>  <span class=\"selector-tag\">98</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">3</span>  <span class=\"selector-tag\">96</span><span class=\"selector-class\">.97</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">3</span><span class=\"selector-class\">.03</span></div></pre></td></tr></table></figure>\n<p>该命令可以显示每个CPU的占用情况，如果有一个CPU占用率特别高，那么有可能是一个单线程应用程序引起的。</p>\n<blockquote>\n<p>（5） pidstat 1</p>\n</blockquote>\n<figure class=\"highlight tap\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">Linux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015    _x86_64_    (32 CPU)</div><div class=\"line\">07:41:02 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>       <span class=\"number\"> 9 </span>   0.00    0.94    0.00    0.94    <span class=\"number\"> 1 </span> rcuos/0</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 4214 </span>   5.66    5.66    0.00   11.32   <span class=\"number\"> 15 </span> mesos-slave</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 4354 </span>   0.94    0.94    0.00    1.89    <span class=\"number\"> 8 </span> java</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6521 </span>1596.23    1.89    0.00 1598.11   <span class=\"number\"> 27 </span> java</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6564 </span>1571.70    7.55    0.00 1579.25   <span class=\"number\"> 28 </span> java</div><div class=\"line\">07:41:03 PM<span class=\"number\"> 60004 </span>   <span class=\"number\"> 60154 </span>   0.94    4.72    0.00    5.66    <span class=\"number\"> 9 </span> pidstat</div><div class=\"line\">07:41:03 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command</div><div class=\"line\">07:41:04 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 4214 </span>   6.00    2.00    0.00    8.00   <span class=\"number\"> 15 </span> mesos-slave</div><div class=\"line\">07:41:04 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6521 </span>1590.00    1.00    0.00 1591.00   <span class=\"number\"> 27 </span> java</div><div class=\"line\">07:41:04 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6564 </span>1573.00   10.00    0.00 1583.00   <span class=\"number\"> 28 </span> java</div><div class=\"line\">07:41:04 PM  <span class=\"number\"> 108 </span>    <span class=\"number\"> 6718 </span>   1.00    0.00    0.00    1.00    <span class=\"number\"> 0 </span> snmp-pass</div><div class=\"line\">07:41:04 PM<span class=\"number\"> 60004 </span>   <span class=\"number\"> 60154 </span>   1.00    4.00    0.00    5.00    <span class=\"number\"> 9 </span> pidstat</div></pre></td></tr></table></figure>\n<p>pidstat命令输出进程的CPU占用率，该命令会持续输出，并且不会覆盖之前的数据，可以方便观察系统动态。如上的输出，可以看见两个JAVA进程占用了将近1600%的CPU时间，既消耗了大约16个CPU核心的运算资源。</p>\n<blockquote>\n<p>（6） iostat -xz 1</p>\n</blockquote>\n<figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Linux <span class=\"number\">3.13</span>.0-<span class=\"number\">49</span>-generic (titanclusters-xxxxx)  <span class=\"number\">07</span>/<span class=\"number\">14</span>/<span class=\"number\">2015</span>  _x86_64_ (<span class=\"number\">32</span> CPU)</div><div class=\"line\">avg-cpu:  <span class=\"built_in\">%user</span>   <span class=\"built_in\">%nice</span> <span class=\"built_in\">%system</span> <span class=\"built_in\">%iowait</span>  <span class=\"built_in\">%steal</span>   <span class=\"built_in\">%idle</span></div><div class=\"line\">          <span class=\"number\">73.96</span>    <span class=\"number\">0.00</span>    <span class=\"number\">3.73</span>    <span class=\"number\">0.03</span>    <span class=\"number\">0.06</span>   <span class=\"number\">22.21</span></div><div class=\"line\">Device:   rrqm/<span class=\"keyword\">s</span>   wrqm/<span class=\"keyword\">s</span>     <span class=\"keyword\">r</span>/<span class=\"keyword\">s</span>     <span class=\"keyword\">w</span>/<span class=\"keyword\">s</span>    rkB/<span class=\"keyword\">s</span>    wkB/<span class=\"keyword\">s</span> avgrq-sz avgqu-sz   await r_await w_await  svctm  <span class=\"built_in\">%util</span></div><div class=\"line\">xvda        <span class=\"number\">0.00</span>     <span class=\"number\">0.23</span>    <span class=\"number\">0.21</span>    <span class=\"number\">0.18</span>     <span class=\"number\">4.52</span>     <span class=\"number\">2.08</span>    <span class=\"number\">34.37</span>     <span class=\"number\">0.00</span>    <span class=\"number\">9.98</span>   <span class=\"number\">13.80</span>    <span class=\"number\">5.42</span>   <span class=\"number\">2.44</span>   <span class=\"number\">0.09</span></div><div class=\"line\">xvdb        <span class=\"number\">0.01</span>     <span class=\"number\">0.00</span>    <span class=\"number\">1.02</span>    <span class=\"number\">8.94</span>   <span class=\"number\">127.97</span>   <span class=\"number\">598.53</span>   <span class=\"number\">145.79</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.43</span>    <span class=\"number\">1.78</span>    <span class=\"number\">0.28</span>   <span class=\"number\">0.25</span>   <span class=\"number\">0.25</span></div><div class=\"line\">xvdc        <span class=\"number\">0.01</span>     <span class=\"number\">0.00</span>    <span class=\"number\">1.02</span>    <span class=\"number\">8.86</span>   <span class=\"number\">127.79</span>   <span class=\"number\">595.94</span>   <span class=\"number\">146.50</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.45</span>    <span class=\"number\">1.82</span>    <span class=\"number\">0.30</span>   <span class=\"number\">0.27</span>   <span class=\"number\">0.26</span></div><div class=\"line\">dm-<span class=\"number\">0</span>        <span class=\"number\">0.00</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.69</span>    <span class=\"number\">2.32</span>    <span class=\"number\">10.47</span>    <span class=\"number\">31.69</span>    <span class=\"number\">28.01</span>     <span class=\"number\">0.01</span>    <span class=\"number\">3.23</span>    <span class=\"number\">0.71</span>    <span class=\"number\">3.98</span>   <span class=\"number\">0.13</span>   <span class=\"number\">0.04</span></div><div class=\"line\">dm-<span class=\"number\">1</span>        <span class=\"number\">0.00</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.00</span>    <span class=\"number\">0.94</span>     <span class=\"number\">0.01</span>     <span class=\"number\">3.78</span>     <span class=\"number\">8.00</span>     <span class=\"number\">0.33</span>  <span class=\"number\">345.84</span>    <span class=\"number\">0.04</span>  <span class=\"number\">346.81</span>   <span class=\"number\">0.01</span>   <span class=\"number\">0.00</span></div><div class=\"line\">dm-<span class=\"number\">2</span>        <span class=\"number\">0.00</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.09</span>    <span class=\"number\">0.07</span>     <span class=\"number\">1.35</span>     <span class=\"number\">0.36</span>    <span class=\"number\">22.50</span>     <span class=\"number\">0.00</span>    <span class=\"number\">2.55</span>    <span class=\"number\">0.23</span>    <span class=\"number\">5.62</span>   <span class=\"number\">1.78</span>   <span class=\"number\">0.03</span></div></pre></td></tr></table></figure>\n<p>iostat命令主要用于查看机器磁盘IO情况。该命令输出的列，主要含义是：<br>  ● <strong>r/s, w/s, rkB/s, wkB/s</strong>：分别表示每秒读写次数和每秒读写数据量（千字节）。读写量过大，可能会引起性能问题。<br>  ● <strong>await</strong>：IO操作的平均等待时间，单位是毫秒。这是应用程序在和磁盘交互时，需要消耗的时间，包括IO等待和实际操作的耗时。如果这个数值过大，可能是硬件设备遇到了瓶颈或者出现故障。<br>  ● <strong>avgqu-sz</strong>：向设备发出的请求平均数量。如果这个数值大于1，可能是硬件设备已经饱和（部分前端硬件设备支持并行写入）。<br>  ●<strong> %util</strong>：设备利用率。这个数值表示设备的繁忙程度，经验值是如果超过60，可能会影响IO性能（可以参照IO操作平均等待时间）。如果到达100%，说明硬件设备已经饱和。<br>如果显示的是逻辑设备的数据，那么设备利用率不代表后端实际的硬件设备已经饱和。值得注意的是，即使IO性能不理想，也不一定意味这应用程序性能会不好，可以利用诸如预读取、写缓存等策略提升应用性能。</p>\n<blockquote>\n<p>（7） free –m</p>\n</blockquote>\n<figure class=\"highlight tap\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">             total       used       free     shared    buffers     cached</div><div class=\"line\">Mem:       <span class=\"number\"> 245998 </span>    <span class=\"number\"> 24545 </span>   <span class=\"number\"> 221453 </span>       <span class=\"number\"> 83 </span>       <span class=\"number\"> 59 </span>       541</div><div class=\"line\">-/+ buffers/cache:     <span class=\"number\"> 23944 </span>    222053</div><div class=\"line\">Swap:           <span class=\"number\"> 0 </span>        <span class=\"number\"> 0 </span>         0</div></pre></td></tr></table></figure>\n<p>free命令可以查看系统内存的使用情况，-m参数表示按照兆字节展示。最后两列分别表示用于IO缓存的内存数，和用于文件系统页缓存的内存数。需要注意的是，第二行-/+ buffers/cache，看上去缓存占用了大量内存空间。这是Linux系统的内存使用策略，尽可能的利用内存，如果应用程序需要内存，这部分内存会立即被回收并分配给应用程序。因此，这部分内存一般也被当成是可用内存。<br>如果可用内存非常少，系统可能会动用交换区（如果配置了的话），这样会增加IO开销（可以在iostat命令中提现），降低系统性能。</p>\n<blockquote>\n<p>（8） sar -n DEV 1</p>\n</blockquote>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">Linux</span> <span class=\"selector-tag\">3</span><span class=\"selector-class\">.13</span><span class=\"selector-class\">.0-49-generic</span> (titanclusters-xxxxx)  <span class=\"selector-tag\">07</span>/<span class=\"selector-tag\">14</span>/<span class=\"selector-tag\">2015</span>     <span class=\"selector-tag\">_x86_64_</span>    (<span class=\"number\">32</span> CPU)</div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:48</span> <span class=\"selector-tag\">AM</span>     <span class=\"selector-tag\">IFACE</span>   <span class=\"selector-tag\">rxpck</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txpck</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">rxkB</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">txkB</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">rxcmp</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txcmp</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">rxmcst</span>/<span class=\"selector-tag\">s</span>   %<span class=\"selector-tag\">ifutil</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">eth0</span>  <span class=\"selector-tag\">18763</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">5032</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">20686</span><span class=\"selector-class\">.42</span>    <span class=\"selector-tag\">478</span><span class=\"selector-class\">.30</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>        <span class=\"selector-tag\">lo</span>     <span class=\"selector-tag\">14</span><span class=\"selector-class\">.00</span>     <span class=\"selector-tag\">14</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.36</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.36</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>   <span class=\"selector-tag\">docker0</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>     <span class=\"selector-tag\">IFACE</span>   <span class=\"selector-tag\">rxpck</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txpck</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">rxkB</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">txkB</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">rxcmp</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txcmp</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">rxmcst</span>/<span class=\"selector-tag\">s</span>   %<span class=\"selector-tag\">ifutil</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">eth0</span>  <span class=\"selector-tag\">19763</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">5101</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">21999</span><span class=\"selector-class\">.10</span>    <span class=\"selector-tag\">482</span><span class=\"selector-class\">.56</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">AM</span>        <span class=\"selector-tag\">lo</span>     <span class=\"selector-tag\">20</span><span class=\"selector-class\">.00</span>     <span class=\"selector-tag\">20</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">3</span><span class=\"selector-class\">.25</span>      <span class=\"selector-tag\">3</span><span class=\"selector-class\">.25</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">AM</span>   <span class=\"selector-tag\">docker0</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div></pre></td></tr></table></figure>\n<p>sar命令在这里可以查看网络设备的吞吐率。在排查性能问题时，可以通过网络设备的吞吐量，判断网络设备是否已经饱和。如示例输出中，eth0网卡设备，吞吐率大概在22 Mbytes/s，既176 Mbits/sec，没有达到1Gbit/sec的硬件上限。</p>\n<blockquote>\n<p>（9） sar -n TCP,ETCP 1</p>\n</blockquote>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">Linux</span> <span class=\"selector-tag\">3</span><span class=\"selector-class\">.13</span><span class=\"selector-class\">.0-49-generic</span> (titanclusters-xxxxx)  <span class=\"selector-tag\">07</span>/<span class=\"selector-tag\">14</span>/<span class=\"selector-tag\">2015</span>    <span class=\"selector-tag\">_x86_64_</span>    (<span class=\"number\">32</span> CPU)</div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:19</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">active</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">passive</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">iseg</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">oseg</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">10233</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">18846</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:19</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">atmptf</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">estres</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">retrans</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">isegerr</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">orsts</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">active</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">passive</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">iseg</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">oseg</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:21</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">8359</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">6039</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">atmptf</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">estres</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">retrans</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">isegerr</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">orsts</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:21</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div></pre></td></tr></table></figure>\n<p>sar命令在这里用于查看TCP连接状态，其中包括：<br>  ● <strong>active/s</strong>：每秒本地发起的TCP连接数，既通过connect调用创建的TCP连接；<br>  ● <strong>passive/s</strong>：每秒远程发起的TCP连接数，即通过accept调用创建的TCP连接；<br>  ●<strong> retrans/s</strong>：每秒TCP重传数量；<br>TCP连接数可以用来判断性能问题是否由于建立了过多的连接，进一步可以判断是主动发起的连接，还是被动接受的连接。TCP重传可能是因为网络环境恶劣，或者服务器压力过大导致丢包。</p>\n<blockquote>\n<p>（10）top<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD1.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD2.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD3.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD4.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD5.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD6.png\" alt=\"\"></p>\n</blockquote>\n<p>top命令包含了前面好几个命令的检查的内容。比如：</p>\n<ul>\n<li>系统负载情况（uptime）</li>\n<li>系统内存使用情况（free）</li>\n<li>系统CPU使用情况（vmstat）等。</li>\n</ul>\n<p>因此通过这个命令，可以相对全面的查看系统负载的来源。同时，top命令支持排序，可以按照不同的列排序，方便查找出诸如内存占用最多的进程、CPU占用率最高的进程等。<br>但是，top命令相对于前面一些命令，输出是一个瞬间值，如果不持续盯着，可能会错过一些线索。这时可能需要暂停top命令刷新，来记录和比对数据。</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"关于服务器负载\"><a href=\"#关于服务器负载\" class=\"headerlink\" title=\"关于服务器负载\"></a>关于服务器负载</h1><p>load average值，参考：<a href=\"http://heipark.iteye.com/blog/1340384\">理解Linux系统中的load average（图文版）</a></p>\n<blockquote>\n<p>（1） uptime</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">23<span class=\"selector-pseudo\">:51</span><span class=\"selector-pseudo\">:26</span> <span class=\"selector-tag\">up</span> 21<span class=\"selector-pseudo\">:31</span>,  1 <span class=\"selector-tag\">user</span>,  <span class=\"selector-tag\">load</span> <span class=\"selector-tag\">average</span>: 30<span class=\"selector-class\">.02</span>, 26<span class=\"selector-class\">.43</span>, 19<span class=\"selector-class\">.02</span></div></pre></td></tr></table></figure>\n<p>这个命令可以快速查看机器的负载情况。在Linux系统中，这些数据表示等待CPU资源的进程和阻塞在不可中断IO进程（进程状态为D）的数量。这些数据可以让我们对系统资源使用有一个宏观的了解。</p>\n<p>命令的输出分别表示1分钟、5分钟、15分钟的平均负载情况。通过这三个数据，可以了解服务器负载是在趋于紧张还是区域缓解。如果1分钟平均负载很高，而15分钟平均负载很低，说明服务器正在命令高负载情况，需要进一步排查CPU资源都消耗在了哪里。反之，如果15分钟平均负载很高，1分钟平均负载较低，则有可能是CPU资源紧张时刻已经过去。</p>\n<p>上面例子中的输出，可以看见最近1分钟的平均负载非常高，且远高于最近15分钟负载，因此我们需要继续排查当前系统中有什么进程消耗了大量的资源。可以通过下文将会介绍的vmstat、mpstat等命令进一步排查。</p>\n<blockquote>\n<p>（2） dmesg | tail</p>\n</blockquote>\n<figure class=\"highlight scheme\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">[<span class=\"name\">1880957.563150</span>] perl invoked oom-killer: gfp_mask=0x280da, order=0, oom_score_adj=0</div><div class=\"line\">[<span class=\"name\"><span class=\"builtin-name\">...</span></span>]</div><div class=\"line\">[<span class=\"name\">1880957.563400</span>] Out of memory: Kill process <span class=\"number\">18694</span> (<span class=\"name\">perl</span>) score <span class=\"number\">246</span> or sacrifice child</div><div class=\"line\">[<span class=\"name\">1880957.563408</span>] Killed process <span class=\"number\">18694</span> (<span class=\"name\">perl</span>) total-vm:1972392kB, anon-rss:1953348kB, file-rss:0kB</div><div class=\"line\">[<span class=\"name\">2320864.954447</span>] TCP: Possible SYN flooding on port <span class=\"number\">7001</span>. Dropping request.  Check SNMP counters.</div></pre></td></tr></table></figure>\n<p>该命令会输出系统日志的最后10行。示例中的输出，可以看见一次内核的oom kill和一次TCP丢包。这些日志可以帮助排查性能问题。千万不要忘了这一步。</p>\n<blockquote>\n<p>（3） vmstat 1</p>\n</blockquote>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">procs ---------memory---------- ---swap-- -----io---- -system-- ------cpu-----</div><div class=\"line\"> r  b swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</div><div class=\"line\"><span class=\"number\">34</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200889792</span>  <span class=\"number\">73708</span> <span class=\"number\">591828</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>     <span class=\"number\">5</span>    <span class=\"number\">6</span>   <span class=\"number\">10</span> <span class=\"number\">96</span>  <span class=\"number\">1</span>  <span class=\"number\">3</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200889920</span>  <span class=\"number\">73708</span> <span class=\"number\">591860</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>   <span class=\"number\">592</span> <span class=\"number\">13284</span> <span class=\"number\">4282</span> <span class=\"number\">98</span>  <span class=\"number\">1</span>  <span class=\"number\">1</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200890112</span>  <span class=\"number\">73708</span> <span class=\"number\">591860</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>     <span class=\"number\">0</span> <span class=\"number\">9501</span> <span class=\"number\">2154</span> <span class=\"number\">99</span>  <span class=\"number\">1</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200889568</span>  <span class=\"number\">73712</span> <span class=\"number\">591856</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>    <span class=\"number\">48</span> <span class=\"number\">11900</span> <span class=\"number\">2459</span> <span class=\"number\">99</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div><div class=\"line\"><span class=\"number\">32</span>  <span class=\"number\">0</span>    <span class=\"number\">0</span> <span class=\"number\">200890208</span>  <span class=\"number\">73712</span> <span class=\"number\">591860</span>    <span class=\"number\">0</span>    <span class=\"number\">0</span>     <span class=\"number\">0</span>     <span class=\"number\">0</span> <span class=\"number\">15898</span> <span class=\"number\">4840</span> <span class=\"number\">98</span>  <span class=\"number\">1</span>  <span class=\"number\">1</span>  <span class=\"number\">0</span>  <span class=\"number\">0</span></div></pre></td></tr></table></figure>\n<p>vmstat 命令，每行会输出一些系统核心指标，这些指标可以让我们更详细的了解系统状态。后面跟的参数1，表示每秒输出一次统计信息，表头提示了每一列的含义，这几介绍一些和性能调优相关的列：<br>  ● <strong>r</strong>：等待在CPU资源的进程数。这个数据比平均负载更加能够体现CPU负载情况，数据中不包含等待IO的进程。如果这个数值大于机器CPU核数，那么机器的CPU资源已经饱和。<br>  ● <strong>free</strong>：系统可用内存数（以千字节为单位），如果剩余内存不足，也会导致系统性能问题。下文介绍到的free命令，可以更详细的了解系统内存的使用情况。<br>  ● <strong>si, so</strong>：交换区写入和读取的数量。如果这个数据不为0，说明系统已经在使用交换区（swap），机器物理内存已经不足。<br>  ● <strong>us, sy, id, wa, st</strong>：这些都代表了CPU时间的消耗，它们分别表示<strong>用户时间（user）、系统（内核）时间（sys）、空闲时间（idle）、IO等待时间（wait）和被偷走的时间（stolen）</strong>，一般被其他虚拟机消耗）。<br>上述这些CPU时间，可以让我们很快了解CPU是否出于繁忙状态。一般情况下，如果用户时间和系统时间相加非常大，CPU出于忙于执行指令。如果IO等待时间很长，那么系统的瓶颈可能在磁盘IO。<br>示例命令的输出可以看见，大量CPU时间消耗在用户态，也就是用户应用程序消耗了CPU时间。这不一定是性能问题，需要结合r队列，一起分析。</p>\n<blockquote>\n<p>（4） mpstat -P ALL 1</p>\n</blockquote>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">Linux</span> <span class=\"selector-tag\">3</span><span class=\"selector-class\">.13</span><span class=\"selector-class\">.0-49-generic</span> (titanclusters-xxxxx)  <span class=\"selector-tag\">07</span>/<span class=\"selector-tag\">14</span>/<span class=\"selector-tag\">2015</span>  <span class=\"selector-tag\">_x86_64_</span> (<span class=\"number\">32</span> CPU)</div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">PM</span>  <span class=\"selector-tag\">CPU</span>   %<span class=\"selector-tag\">usr</span>  %<span class=\"selector-tag\">nice</span>   %<span class=\"selector-tag\">sys</span> %<span class=\"selector-tag\">iowait</span>   %<span class=\"selector-tag\">irq</span>  %<span class=\"selector-tag\">soft</span>  %<span class=\"selector-tag\">steal</span>  %<span class=\"selector-tag\">guest</span>  %<span class=\"selector-tag\">gnice</span>  %<span class=\"selector-tag\">idle</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>  <span class=\"keyword\">all</span>  <span class=\"selector-tag\">98</span><span class=\"selector-class\">.47</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.75</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.78</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">0</span>  <span class=\"selector-tag\">96</span><span class=\"selector-class\">.04</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">2</span><span class=\"selector-class\">.97</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.99</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">1</span>  <span class=\"selector-tag\">97</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">2</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">2</span>  <span class=\"selector-tag\">98</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">07</span><span class=\"selector-pseudo\">:38</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">PM</span>    <span class=\"selector-tag\">3</span>  <span class=\"selector-tag\">96</span><span class=\"selector-class\">.97</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>    <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">3</span><span class=\"selector-class\">.03</span></div></pre></td></tr></table></figure>\n<p>该命令可以显示每个CPU的占用情况，如果有一个CPU占用率特别高，那么有可能是一个单线程应用程序引起的。</p>\n<blockquote>\n<p>（5） pidstat 1</p>\n</blockquote>\n<figure class=\"highlight tap\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">Linux 3.13.0-49-generic (titanclusters-xxxxx)  07/14/2015    _x86_64_    (32 CPU)</div><div class=\"line\">07:41:02 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>       <span class=\"number\"> 9 </span>   0.00    0.94    0.00    0.94    <span class=\"number\"> 1 </span> rcuos/0</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 4214 </span>   5.66    5.66    0.00   11.32   <span class=\"number\"> 15 </span> mesos-slave</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 4354 </span>   0.94    0.94    0.00    1.89    <span class=\"number\"> 8 </span> java</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6521 </span>1596.23    1.89    0.00 1598.11   <span class=\"number\"> 27 </span> java</div><div class=\"line\">07:41:03 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6564 </span>1571.70    7.55    0.00 1579.25   <span class=\"number\"> 28 </span> java</div><div class=\"line\">07:41:03 PM<span class=\"number\"> 60004 </span>   <span class=\"number\"> 60154 </span>   0.94    4.72    0.00    5.66    <span class=\"number\"> 9 </span> pidstat</div><div class=\"line\">07:41:03 PM   UID       PID    %usr %system  %guest    %CPU   CPU  Command</div><div class=\"line\">07:41:04 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 4214 </span>   6.00    2.00    0.00    8.00   <span class=\"number\"> 15 </span> mesos-slave</div><div class=\"line\">07:41:04 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6521 </span>1590.00    1.00    0.00 1591.00   <span class=\"number\"> 27 </span> java</div><div class=\"line\">07:41:04 PM    <span class=\"number\"> 0 </span>    <span class=\"number\"> 6564 </span>1573.00   10.00    0.00 1583.00   <span class=\"number\"> 28 </span> java</div><div class=\"line\">07:41:04 PM  <span class=\"number\"> 108 </span>    <span class=\"number\"> 6718 </span>   1.00    0.00    0.00    1.00    <span class=\"number\"> 0 </span> snmp-pass</div><div class=\"line\">07:41:04 PM<span class=\"number\"> 60004 </span>   <span class=\"number\"> 60154 </span>   1.00    4.00    0.00    5.00    <span class=\"number\"> 9 </span> pidstat</div></pre></td></tr></table></figure>\n<p>pidstat命令输出进程的CPU占用率，该命令会持续输出，并且不会覆盖之前的数据，可以方便观察系统动态。如上的输出，可以看见两个JAVA进程占用了将近1600%的CPU时间，既消耗了大约16个CPU核心的运算资源。</p>\n<blockquote>\n<p>（6） iostat -xz 1</p>\n</blockquote>\n<figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Linux <span class=\"number\">3.13</span>.0-<span class=\"number\">49</span>-generic (titanclusters-xxxxx)  <span class=\"number\">07</span>/<span class=\"number\">14</span>/<span class=\"number\">2015</span>  _x86_64_ (<span class=\"number\">32</span> CPU)</div><div class=\"line\">avg-cpu:  <span class=\"built_in\">%user</span>   <span class=\"built_in\">%nice</span> <span class=\"built_in\">%system</span> <span class=\"built_in\">%iowait</span>  <span class=\"built_in\">%steal</span>   <span class=\"built_in\">%idle</span></div><div class=\"line\">          <span class=\"number\">73.96</span>    <span class=\"number\">0.00</span>    <span class=\"number\">3.73</span>    <span class=\"number\">0.03</span>    <span class=\"number\">0.06</span>   <span class=\"number\">22.21</span></div><div class=\"line\">Device:   rrqm/<span class=\"keyword\">s</span>   wrqm/<span class=\"keyword\">s</span>     <span class=\"keyword\">r</span>/<span class=\"keyword\">s</span>     <span class=\"keyword\">w</span>/<span class=\"keyword\">s</span>    rkB/<span class=\"keyword\">s</span>    wkB/<span class=\"keyword\">s</span> avgrq-sz avgqu-sz   await r_await w_await  svctm  <span class=\"built_in\">%util</span></div><div class=\"line\">xvda        <span class=\"number\">0.00</span>     <span class=\"number\">0.23</span>    <span class=\"number\">0.21</span>    <span class=\"number\">0.18</span>     <span class=\"number\">4.52</span>     <span class=\"number\">2.08</span>    <span class=\"number\">34.37</span>     <span class=\"number\">0.00</span>    <span class=\"number\">9.98</span>   <span class=\"number\">13.80</span>    <span class=\"number\">5.42</span>   <span class=\"number\">2.44</span>   <span class=\"number\">0.09</span></div><div class=\"line\">xvdb        <span class=\"number\">0.01</span>     <span class=\"number\">0.00</span>    <span class=\"number\">1.02</span>    <span class=\"number\">8.94</span>   <span class=\"number\">127.97</span>   <span class=\"number\">598.53</span>   <span class=\"number\">145.79</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.43</span>    <span class=\"number\">1.78</span>    <span class=\"number\">0.28</span>   <span class=\"number\">0.25</span>   <span class=\"number\">0.25</span></div><div class=\"line\">xvdc        <span class=\"number\">0.01</span>     <span class=\"number\">0.00</span>    <span class=\"number\">1.02</span>    <span class=\"number\">8.86</span>   <span class=\"number\">127.79</span>   <span class=\"number\">595.94</span>   <span class=\"number\">146.50</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.45</span>    <span class=\"number\">1.82</span>    <span class=\"number\">0.30</span>   <span class=\"number\">0.27</span>   <span class=\"number\">0.26</span></div><div class=\"line\">dm-<span class=\"number\">0</span>        <span class=\"number\">0.00</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.69</span>    <span class=\"number\">2.32</span>    <span class=\"number\">10.47</span>    <span class=\"number\">31.69</span>    <span class=\"number\">28.01</span>     <span class=\"number\">0.01</span>    <span class=\"number\">3.23</span>    <span class=\"number\">0.71</span>    <span class=\"number\">3.98</span>   <span class=\"number\">0.13</span>   <span class=\"number\">0.04</span></div><div class=\"line\">dm-<span class=\"number\">1</span>        <span class=\"number\">0.00</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.00</span>    <span class=\"number\">0.94</span>     <span class=\"number\">0.01</span>     <span class=\"number\">3.78</span>     <span class=\"number\">8.00</span>     <span class=\"number\">0.33</span>  <span class=\"number\">345.84</span>    <span class=\"number\">0.04</span>  <span class=\"number\">346.81</span>   <span class=\"number\">0.01</span>   <span class=\"number\">0.00</span></div><div class=\"line\">dm-<span class=\"number\">2</span>        <span class=\"number\">0.00</span>     <span class=\"number\">0.00</span>    <span class=\"number\">0.09</span>    <span class=\"number\">0.07</span>     <span class=\"number\">1.35</span>     <span class=\"number\">0.36</span>    <span class=\"number\">22.50</span>     <span class=\"number\">0.00</span>    <span class=\"number\">2.55</span>    <span class=\"number\">0.23</span>    <span class=\"number\">5.62</span>   <span class=\"number\">1.78</span>   <span class=\"number\">0.03</span></div></pre></td></tr></table></figure>\n<p>iostat命令主要用于查看机器磁盘IO情况。该命令输出的列，主要含义是：<br>  ● <strong>r/s, w/s, rkB/s, wkB/s</strong>：分别表示每秒读写次数和每秒读写数据量（千字节）。读写量过大，可能会引起性能问题。<br>  ● <strong>await</strong>：IO操作的平均等待时间，单位是毫秒。这是应用程序在和磁盘交互时，需要消耗的时间，包括IO等待和实际操作的耗时。如果这个数值过大，可能是硬件设备遇到了瓶颈或者出现故障。<br>  ● <strong>avgqu-sz</strong>：向设备发出的请求平均数量。如果这个数值大于1，可能是硬件设备已经饱和（部分前端硬件设备支持并行写入）。<br>  ●<strong> %util</strong>：设备利用率。这个数值表示设备的繁忙程度，经验值是如果超过60，可能会影响IO性能（可以参照IO操作平均等待时间）。如果到达100%，说明硬件设备已经饱和。<br>如果显示的是逻辑设备的数据，那么设备利用率不代表后端实际的硬件设备已经饱和。值得注意的是，即使IO性能不理想，也不一定意味这应用程序性能会不好，可以利用诸如预读取、写缓存等策略提升应用性能。</p>\n<blockquote>\n<p>（7） free –m</p>\n</blockquote>\n<figure class=\"highlight tap\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">             total       used       free     shared    buffers     cached</div><div class=\"line\">Mem:       <span class=\"number\"> 245998 </span>    <span class=\"number\"> 24545 </span>   <span class=\"number\"> 221453 </span>       <span class=\"number\"> 83 </span>       <span class=\"number\"> 59 </span>       541</div><div class=\"line\">-/+ buffers/cache:     <span class=\"number\"> 23944 </span>    222053</div><div class=\"line\">Swap:           <span class=\"number\"> 0 </span>        <span class=\"number\"> 0 </span>         0</div></pre></td></tr></table></figure>\n<p>free命令可以查看系统内存的使用情况，-m参数表示按照兆字节展示。最后两列分别表示用于IO缓存的内存数，和用于文件系统页缓存的内存数。需要注意的是，第二行-/+ buffers/cache，看上去缓存占用了大量内存空间。这是Linux系统的内存使用策略，尽可能的利用内存，如果应用程序需要内存，这部分内存会立即被回收并分配给应用程序。因此，这部分内存一般也被当成是可用内存。<br>如果可用内存非常少，系统可能会动用交换区（如果配置了的话），这样会增加IO开销（可以在iostat命令中提现），降低系统性能。</p>\n<blockquote>\n<p>（8） sar -n DEV 1</p>\n</blockquote>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">Linux</span> <span class=\"selector-tag\">3</span><span class=\"selector-class\">.13</span><span class=\"selector-class\">.0-49-generic</span> (titanclusters-xxxxx)  <span class=\"selector-tag\">07</span>/<span class=\"selector-tag\">14</span>/<span class=\"selector-tag\">2015</span>     <span class=\"selector-tag\">_x86_64_</span>    (<span class=\"number\">32</span> CPU)</div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:48</span> <span class=\"selector-tag\">AM</span>     <span class=\"selector-tag\">IFACE</span>   <span class=\"selector-tag\">rxpck</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txpck</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">rxkB</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">txkB</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">rxcmp</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txcmp</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">rxmcst</span>/<span class=\"selector-tag\">s</span>   %<span class=\"selector-tag\">ifutil</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">eth0</span>  <span class=\"selector-tag\">18763</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">5032</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">20686</span><span class=\"selector-class\">.42</span>    <span class=\"selector-tag\">478</span><span class=\"selector-class\">.30</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>        <span class=\"selector-tag\">lo</span>     <span class=\"selector-tag\">14</span><span class=\"selector-class\">.00</span>     <span class=\"selector-tag\">14</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.36</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.36</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>   <span class=\"selector-tag\">docker0</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:49</span> <span class=\"selector-tag\">AM</span>     <span class=\"selector-tag\">IFACE</span>   <span class=\"selector-tag\">rxpck</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txpck</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">rxkB</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">txkB</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">rxcmp</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">txcmp</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">rxmcst</span>/<span class=\"selector-tag\">s</span>   %<span class=\"selector-tag\">ifutil</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">eth0</span>  <span class=\"selector-tag\">19763</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">5101</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">21999</span><span class=\"selector-class\">.10</span>    <span class=\"selector-tag\">482</span><span class=\"selector-class\">.56</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">AM</span>        <span class=\"selector-tag\">lo</span>     <span class=\"selector-tag\">20</span><span class=\"selector-class\">.00</span>     <span class=\"selector-tag\">20</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">3</span><span class=\"selector-class\">.25</span>      <span class=\"selector-tag\">3</span><span class=\"selector-class\">.25</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:16</span><span class=\"selector-pseudo\">:50</span> <span class=\"selector-tag\">AM</span>   <span class=\"selector-tag\">docker0</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div></pre></td></tr></table></figure>\n<p>sar命令在这里可以查看网络设备的吞吐率。在排查性能问题时，可以通过网络设备的吞吐量，判断网络设备是否已经饱和。如示例输出中，eth0网卡设备，吞吐率大概在22 Mbytes/s，既176 Mbits/sec，没有达到1Gbit/sec的硬件上限。</p>\n<blockquote>\n<p>（9） sar -n TCP,ETCP 1</p>\n</blockquote>\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">Linux</span> <span class=\"selector-tag\">3</span><span class=\"selector-class\">.13</span><span class=\"selector-class\">.0-49-generic</span> (titanclusters-xxxxx)  <span class=\"selector-tag\">07</span>/<span class=\"selector-tag\">14</span>/<span class=\"selector-tag\">2015</span>    <span class=\"selector-tag\">_x86_64_</span>    (<span class=\"number\">32</span> CPU)</div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:19</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">active</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">passive</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">iseg</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">oseg</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">10233</span><span class=\"selector-class\">.00</span>  <span class=\"selector-tag\">18846</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:19</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">atmptf</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">estres</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">retrans</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">isegerr</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">orsts</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">active</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">passive</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">iseg</span>/<span class=\"selector-tag\">s</span>    <span class=\"selector-tag\">oseg</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:21</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">1</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">8359</span><span class=\"selector-class\">.00</span>   <span class=\"selector-tag\">6039</span><span class=\"selector-class\">.00</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:20</span> <span class=\"selector-tag\">AM</span>  <span class=\"selector-tag\">atmptf</span>/<span class=\"selector-tag\">s</span>  <span class=\"selector-tag\">estres</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">retrans</span>/<span class=\"selector-tag\">s</span> <span class=\"selector-tag\">isegerr</span>/<span class=\"selector-tag\">s</span>   <span class=\"selector-tag\">orsts</span>/<span class=\"selector-tag\">s</span></div><div class=\"line\"><span class=\"selector-tag\">12</span><span class=\"selector-pseudo\">:17</span><span class=\"selector-pseudo\">:21</span> <span class=\"selector-tag\">AM</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span>      <span class=\"selector-tag\">0</span><span class=\"selector-class\">.00</span></div></pre></td></tr></table></figure>\n<p>sar命令在这里用于查看TCP连接状态，其中包括：<br>  ● <strong>active/s</strong>：每秒本地发起的TCP连接数，既通过connect调用创建的TCP连接；<br>  ● <strong>passive/s</strong>：每秒远程发起的TCP连接数，即通过accept调用创建的TCP连接；<br>  ●<strong> retrans/s</strong>：每秒TCP重传数量；<br>TCP连接数可以用来判断性能问题是否由于建立了过多的连接，进一步可以判断是主动发起的连接，还是被动接受的连接。TCP重传可能是因为网络环境恶劣，或者服务器压力过大导致丢包。</p>\n<blockquote>\n<p>（10）top<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD1.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD2.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD3.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD4.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD5.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E6%A3%80%E6%9F%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD6.png\" alt=\"\"></p>\n</blockquote>\n<p>top命令包含了前面好几个命令的检查的内容。比如：</p>\n<ul>\n<li>系统负载情况（uptime）</li>\n<li>系统内存使用情况（free）</li>\n<li>系统CPU使用情况（vmstat）等。</li>\n</ul>\n<p>因此通过这个命令，可以相对全面的查看系统负载的来源。同时，top命令支持排序，可以按照不同的列排序，方便查找出诸如内存占用最多的进程、CPU占用率最高的进程等。<br>但是，top命令相对于前面一些命令，输出是一个瞬间值，如果不持续盯着，可能会错过一些线索。这时可能需要暂停top命令刷新，来记录和比对数据。</p>\n<hr>\n"},{"title":"用Jekyll搭建博客","abbrlink":56436,"date":"2016-11-08T07:13:11.000Z","_content":"\n# 安装Jekyll\nJekyll用Ruby写的，jekyll是把原文上传github，可以直接生成博客，也可以用在线编辑器处理。\n  1. 搭建ruby环境（ruby版本最好大于2.2.2），详见：[Ruby开发环境搭建](http://leolan.top/2016/10/31/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-10-21-Ruby%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)  \n  2. 安装kramdown（Markdown文档处理器）\ngem install kramdown\n  3. 安装rouge（语法高亮）\ngem install rouge\n  4. 动态处理插件exec\ngem install execjs\n  5. 安装ruby工具集管理工具Bundler\ngem install bundler\n  6. 安装rails WEB框架（可选，不安装运行jekyll时可能报错）\ngem install rails\n  7.安装Jekyll（“Mac的安装见错误解决”）\ngem install jekyll\n\n之后需要添加功能，要安装其他gems插件时，进入该项目目录再安装，不然不会被包含，就不会生效。\n错误解决：\n**Mac**：\n\n```\nmkdir -p /usr/local/Cellar/ruby/bin\nsudo gem install jekyll -n /usr/local/Cellar/ruby/bin```\n\n关闭终端窗口再打开，输入**jekyll**看这个指令是否存在，如果提示不存在，那就再修改\n`/Users/用户名/.bash_profile`文件，把Jekyll的路径写进去。\n`export PATH=/usr/local/Cellar/ruby/bin:$PATH`再重新打开终端，这时候Jekyll指令应该ok了。\n注：`whereis gem`可以看到路径是**/usr/bin/gem**,当前的gem路径是**系统默认的gem版本**，这个版本用了是会报错的，用这个版本安装Jekyll默认安装Jekyll到相同目录下，所以同样会出现permission denied的报错信息。有人说可以用symlink，但即使用了sudo也会是permission denied的报错。所以直接安装Jekyll并同时指定安装路径了。\n\n**Windows**：\n如果安装jekyll或bundle报错，则需要安装编译工具。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A201.png)\n打开：http://rubyinstaller.org/downloads/  下载对应的**DevKit-mingw**，解压到没有中文、空格、特殊符号的文件夹，\n  1. cmd进入该目录\n  2. 命令行下运行`ruby dk.rb init`\n  3. 编辑目录下的**config.yml**文件 最尾加上`- C:\\Ruby23-x64  #即ruby安装目录`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A202.png)\n  4. 运行`ruby dk.rb review   #（可选，一般不用运行）`\n  5. 运行`ruby dk.rb install`\n  6. 如果上述步骤**只有info输出**而**没有warning输出**，则应该安装成功了\n  7. 测试`gem install json --platform=ruby`如果安装成功，则表示devkit安装成功。\n  8. 如果失败，可以重装ruby和ruby-devkit，或者选择2.0.0以上版本的ruby版本，或https://rubygems.org/pages/download 按提示更新gem版本。\n\nok,安装完成啦！\n\n---\n\n# 建立站点\n```\njekyll new new-site   #创建新站点\ncd new-site           #进入站点目录下一步才能开启服务\njekyll serve --watch  #加--watch参数修改后会自动刷新页面，而不用手动重启jekyll\njekyll build          #写了新文章后，编译文档```\n然后访问localhost:4000就能看到blog的页面了。\n\n注：运行报**Could not find a JavaScript runtime.**错误\n答：在**gemfile**中加入\n```\ngem 'execjs'  \ngem 'therubyracer'  ```\n然后安装`gem install therubyracer ` 再运行就好了。\n\n一个基本的 Jekyll 网站的目录结构一般是像这样的：\n\n```\n├── _config.yml  #配置文件 \n├── _drafts      #草稿目录\n| ├── begin-with-the-crazy-ideas.textile\n| └── on-simplicity-in-technology.markdown\n├── _includes    #你可以加载这些包含部分到你的布局或者文章中以方便重用。可以用这个标签 {\\% include file.ext \\%} 来把文件 _includes/file.ext 包含进来。\n| ├── footer.html  #HTML尾\n| └── header.html  #HTML头\n├── _layouts\n| ├── default.html #默认模板\n| └── post.html    #文章模板\n├── _posts         #文章目录\n| ├── XXXX.md\n| └── XXXXXX.md\n├── _data\n| └── members.yml\n├── _site         #生成的站点文件存放目录\n└── index.html    #入口index文件\n└──Other Files/Folders   #其他一些未被提及的目录和文件如 css 还有 images 文件夹， favicon.ico 等文件都将被完全拷贝到生成的 site 中。\n```\n安装完成后，如果你要配置你自己的站点信息，那么你就要修改**_config.yml**这个文件。里面可以配置站点名称，描述，多说，统计，友链等等。\n参考：\nhttp://jekyll.com.cn/   中文官网\nhttp://pwnny.cn/original/2016/06/26/MakeBlog.html\n\n写文章在_posts里，文件名按**YEAR-MONTH-DAY-title.md**创建文件，\n在文章头部添加YAML头信息（YAML front- matter）：\n\n```\n---\nlayout: post\ntitle:  \"第一篇博客\"\ndate:   2016/10/26 13:03:42\ncategories: 文章阅读\ntag: 第一篇博客,jekyll搭建博客\n---\n\n这里开始用Markdown的语法编写文章。\n\n```\n每次都自己写yml文件头太麻烦，配置中会说到用Rakefile脚本自动生成文件。**注意：yml文件头不要有中文，.md文件名也不要有中文，**否则网页会显示404错误（原因未知）\n\n---\n\n# 配置优化、美化站点\n## 主题部分\n可以在http://jekyllthemes.org/这个上面找找，Hux这个主题还是不错的，喜欢的直接下载，重新修改里面配置就行了。可以fork或下载回来，整个替换，把文章拷过去就行。一个很好的Hux模板：https://github.com/huxpro/huxpro.github.io/\n\n## 配置文件设置\n我用到的参数：\n```\n#不要在配置文件中使用 tab 制表符,用空格代替。\n#配置请参考：http://jekyllcn.com/docs/configuration/#front-matter-defaults\n\n\n# Site settings\ntitle: LeoLan的博客\nauthor: Leo Lan\nemail: 842632422@qq.com\ndescription: > # this means to ignore newlines until \"baseurl:\"\n  Write an awesome description for your new site here. You can edit this\n  line in _config.yml. It will appear in your document head meta (for\n  Google search results) and in your feed.xml site description.\n\n#自定义站点标题\n#webrick:\n#  headers:\n#    My-Header: My-Value\n#    My-Other-Header: My-Other-Value\n\n\n# Site URL NOTE: if your site is base on subdir /blog you should change base to \"/blog\"\ndomain: \"http://myleolan.github.io\" #你的github网址  the domain URL for your site\nbase: \"\"  # the relative path that different with domain so you can test locally\n\n# Source URL NOTE: end with / cause it's [URL + FILE]\nw3c_url: \"/w3c/\"  # the base url of css js and images\npostImage_url: \"/w3c/images/\" # the base url of post images\npostfile: \"/db/Postfile\" # the Database\nsitefile: \"/db/Sitefile\" # the Database\n\n# 3rd URL\nduoshuo_short_name: \"leolan\" # 注册多说是填写的网址前缀 the user of user.domain.com \nduoshuo_user_uid: \"a61c3f290749b621688a3f42c7e8e31c\" #多说的uid   the admin user uid  \nduoshuo_user_name: \"leolan\" #多说的用户名 the admin user names   \nduoshuo_max_depth: \"2\"  # the max_depth setting in duoshuo comments\nduoshuo_url: \"/w3c/duoshuo/embed.min.js\" # the local duoshuo comment plugin, you can change it to remote \"http://static.duoshuo.com/\"\njquery_url: \"http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js\" # use cdn\nbaiduTemplate_url: \"/w3c/js/baiduTemplate.js\" #use local\ngoogle_analytics_id: \"UA-86334360-1\"  #Google分析\n\n# Build Settings\nexcerpt_separator: \"\\n\\n\" # you can specify your own separator here, default is \"\\n\\n\" String\npermalink: /:year/:month/:day/:title.html   #生成html文件的命名方式\nhighlighter: rouge   #代码高亮\nmarkdown: kramdown   #markdown文档处理器\nkramdown:\n  input: GFM\n  hard_wrap: true # a newline in markdown text would be changed to <br>\n\n#插件（需要包含的插件）\ngems:\n  - jemoji\n\nlsi: BOOL   #建立文件索引\n\n####---------------------------------------------------------------------\n#以下为github的默认设置\n\n# Following is got in Github Help With Configuring Jekyll\n# Github Page Default Settings which you can override:\n\n# kramdown:\n#   input: GFM\n#   hard_wrap: false\n# gems:\n#   - jekyll-coffeescript\n#   - jekyll-paginate\n\n# Github Page override the following settings which you cannot change:\n# lsi: false\n# safe: true    #安全方式，禁用所有插件\n# source: [your repo's top level directory]\n# incremental: false\n# highlighter: rouge\n# gist:\n#  noscript: false\n# kramdown:\n#  math_engine: mathjax\n\n```\n\n## 自动生成文件模板\n前面说到的带yml信息的文件头\n```\n---\nlayout: post\ntitle:  \"第一篇博客\"\ndate:   2016/10/26 13:03:42\ncategories: 文章阅读\ntag: 第一篇博客,jekyll搭建博客\n---```\n文件头可以自动生成，而不用每次都手工码字，在网站根目录下创建Rakefile文件（ruby的一中脚本配置文件）\n里面填入代码：\n\n```\ntask :default => :new\n\nrequire 'fileutils'\n\ndesc \"创建新 post\"\ntask :new do\n  puts \"请输入要创建的.md文件名：\"\n  @url = STDIN.gets.chomp\n  puts \"请输入 文章 标题：\"\n  @name = STDIN.gets.chomp\n  puts \"请输入 文章 子标题：\"\n  @subtitle = STDIN.gets.chomp\n  puts \"请输入 文章 分类，以空格分隔：\"\n  @categories = STDIN.gets.chomp\n  puts \"请输入 博客分类 标签，以空格分隔：\"\n  @tag = STDIN.gets.chomp\n  @slug = \"#{@url}\"\n  @slug = @slug.downcase.strip.gsub(' ', '-')\n  @date = Time.now.strftime(\"%F\")\n  @post_name = \"_posts/#{@date}-#{@slug}.md\"\n  if File.exist?(@post_name)\n      abort(\"文件名已经存在！创建失败\")\n  end\n  FileUtils.touch(@post_name)\n  open(@post_name, 'a') do |file|\n      file.puts \"---\"\n      file.puts \"layout: post\"\n      file.puts \"title: #{@name}\"\n      file.puts \"subtitle: #{@subtitle}\"\n      file.puts \"author: Leo Lan\"\n      file.puts \"date: #{Time.now}\"\n      file.puts \"categories: #{@categories}\"\n      file.puts \"tag: #{@tag}\"\n      file.puts \"published: true\"\n      file.puts \"---\"\n  end\n  exec \"vim #{@post_name}\"\nend```\n**layout**表示使用的是post布局，title是文章标题，\n**date**是自动生成的日期，\n**subtitle**是副标题\n**categories**是该文章生成html文件后存放的目录（分类），可以去_site/jekyll/update下找到对应日期下面的html文档。当然你也可以只设置jekyll单一的目录，甚至是更多级别的目录，用空格分开即可。**tag**是文章的标签。\n**published**表示是否发布文章\n下次在命令行输入`rake new`按提示一步一步就能创建一个很好的文件啦，剩下的只需要专心写作就好了。\n\n\n参考：http://www.liubaicai.net/articles/733/\n\n\n---\n\n# 用Github Pages生成个人博客\nGithub Pages生成网站的两种方式的基本原理\n\n## 法一：\n在Github上有一个账号，名为 username （任意），有一个项目，名为 username.github.io （固定格式，username与账号名一致），项目分支名为 **master** （默认固定），这个分支有类似下面的目录结构：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A203.png)\n当你访问 http://username.github.io/ 时，Github会使用Jekyll解析用户 username 名下的 username.github.io 项目中，分支为 master 的源代码，为你构建一个静态网站，并将生成的 index.html 展示给你。\n\n## 法二：\n在Github上有一个账号，名为 username （任意），有一个项目，名为 blog （任意），项目分支名为 **gh-pages **（固定），这个分支也有上面那种结构。\n那么当你访问 http://username.github.io/blog 时，Github会去解析 username 用户下，project 项目的 gh-pages 分支下的源代码，为你构建网站。\n\n所以要搭建自己的博客你有两种选择：\n* 建立名为 username.github.io 的项目，在 master 分支下存放网站源代码\n* 建立名为 blog 的项目，在 gh-pages 分支下存放网站源代码\n考虑到第一种项目名复杂不方便同步等，这里用第二种方法，方便管理。\n新建一个仓库，名称随意，ReadMe.md文件随意，不懂的查看教程第4节“创建远程仓库”：[git教程](https://www.leolan.top/posts/41310/)\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A204.png)\n翻到下面，选择**Launch automatic page generator**\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A205.png)\n再接着编译一下内容，点**Continue to layouts**\n选好模板，点击**Publish page**，就生成了Github Pages，并且，分支自动设置为了gh-pages。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A206.png)\n\n打开网站看看效果：https://myleolan.github.io/blog/\n以后本地写好的文章，jekyll bundle之后就可以推送到gh-pages分支即可。推送博客到github推荐用命令行，Windows版的客户端不熟悉容易误操作。 博客源码和发布的博客网页在同一个仓库中，可以共同存放。（Hexo是生成的网站和博客原文分开存放的）\n\n# Github Pages环境本地化\n上面搭建的只是Jekyll的本地环境，当push到Github Pages后环境会有所变化，为了本地看到的效果和托管在Github Pages看到的效果一致，我们最好搭建本地的Github Pages环境。\nruby要2.0.0以上版本，如果`ruby --version`查看版本低于2.0.0，那么需要升级ruby。\n安装ruby工具集管理工具Bundler （前面安装过了就不用安装了）\n```\ngem install bundler\nbundler -v```\n\n进入jekyll创建的网站目录\n```\ngit init                      #把当前目录加入版本库中\ngit checkout -b gh-pages      #创建gh-pages分支，用于推送到github上的gh-pages分支上。```\n\n创建**Gemfile**文件 如果本生有Gemfile和Gemfile.lock那就删除掉，内容如下：\n```\nsource 'https://ruby.taobao.org'  #(淘宝源，国内比较快)\ngem 'github-pages', group: :jekyll_plugins\n或\nsource 'https://rubygems.org'   #(官方源)\ngem 'github-pages', group: :jekyll_plugins```\n\n执行下面的命令安装Github Pages的工具集**（在网站根目录，就是Gemfile文件的路径）**\n`bundle install`\n运行起来（一开始创建了网站就可以直接跑起来啦，如果没有创建网站，创建或fork别人的。）\n`bundle exec jekyll serve`\n\n如果出现**bundle exec jekyll serve**能启动，而**jekyll serve**不能启动，则删除Gemfile和Gemfile.lock重新运行jekyll serve即可。\n更多Github Pages本地化环境搭建，可参考官方文档:https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/\n\n注意：如果是是下载了别人的模板进行修改，只把文件拷到自己项目中进行添加就可以了，不要全选把**.git**文件夹也拷过了，别人的分支和自己的不同时会出现各种问题。\n\n调试好各种东西后就可以推送到Github了。\n  1. 用markdown写文章，并按规定名称格式保存在_posts里。\n  2. 用`jekyll serve –watch`或`bundle exec jekyll server`启动服务器，在浏览器里查看。(指定端口在**_config.yml**文件中增加`port: xxxx`)\n  1. 用git客户端推送到远程仓库里。\n  2. 通过域名访问。\n\n---\n\n# 绑定域名\n原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。\n\n* 1· 在你的项目下新建一个**CNAME**文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是** www.leolan.top**和** leolan.top**（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送**CNAME文件**到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在**CNAME文件**里绑定两个，在Pages页面也绑定两个。\n* 2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 `username.github.io. `，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png)\n过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的**CNAME**文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。\n\n---\n\n","source":"_posts/环境搭建/2016-11-08-用Jekyll搭建博客.md","raw":"---\ntitle: 用Jekyll搭建博客\ncategories:\n  - 环境搭建\ntags:\n  - 用Jekyll搭建博客\n  - jekyll github\n  - jekyll Coding\nabbrlink: 56436\ndate: 2016-11-08 15:13:11\n---\n\n# 安装Jekyll\nJekyll用Ruby写的，jekyll是把原文上传github，可以直接生成博客，也可以用在线编辑器处理。\n  1. 搭建ruby环境（ruby版本最好大于2.2.2），详见：[Ruby开发环境搭建](http://leolan.top/2016/10/31/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-10-21-Ruby%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)  \n  2. 安装kramdown（Markdown文档处理器）\ngem install kramdown\n  3. 安装rouge（语法高亮）\ngem install rouge\n  4. 动态处理插件exec\ngem install execjs\n  5. 安装ruby工具集管理工具Bundler\ngem install bundler\n  6. 安装rails WEB框架（可选，不安装运行jekyll时可能报错）\ngem install rails\n  7.安装Jekyll（“Mac的安装见错误解决”）\ngem install jekyll\n\n之后需要添加功能，要安装其他gems插件时，进入该项目目录再安装，不然不会被包含，就不会生效。\n错误解决：\n**Mac**：\n\n```\nmkdir -p /usr/local/Cellar/ruby/bin\nsudo gem install jekyll -n /usr/local/Cellar/ruby/bin```\n\n关闭终端窗口再打开，输入**jekyll**看这个指令是否存在，如果提示不存在，那就再修改\n`/Users/用户名/.bash_profile`文件，把Jekyll的路径写进去。\n`export PATH=/usr/local/Cellar/ruby/bin:$PATH`再重新打开终端，这时候Jekyll指令应该ok了。\n注：`whereis gem`可以看到路径是**/usr/bin/gem**,当前的gem路径是**系统默认的gem版本**，这个版本用了是会报错的，用这个版本安装Jekyll默认安装Jekyll到相同目录下，所以同样会出现permission denied的报错信息。有人说可以用symlink，但即使用了sudo也会是permission denied的报错。所以直接安装Jekyll并同时指定安装路径了。\n\n**Windows**：\n如果安装jekyll或bundle报错，则需要安装编译工具。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A201.png)\n打开：http://rubyinstaller.org/downloads/  下载对应的**DevKit-mingw**，解压到没有中文、空格、特殊符号的文件夹，\n  1. cmd进入该目录\n  2. 命令行下运行`ruby dk.rb init`\n  3. 编辑目录下的**config.yml**文件 最尾加上`- C:\\Ruby23-x64  #即ruby安装目录`\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A202.png)\n  4. 运行`ruby dk.rb review   #（可选，一般不用运行）`\n  5. 运行`ruby dk.rb install`\n  6. 如果上述步骤**只有info输出**而**没有warning输出**，则应该安装成功了\n  7. 测试`gem install json --platform=ruby`如果安装成功，则表示devkit安装成功。\n  8. 如果失败，可以重装ruby和ruby-devkit，或者选择2.0.0以上版本的ruby版本，或https://rubygems.org/pages/download 按提示更新gem版本。\n\nok,安装完成啦！\n\n---\n\n# 建立站点\n```\njekyll new new-site   #创建新站点\ncd new-site           #进入站点目录下一步才能开启服务\njekyll serve --watch  #加--watch参数修改后会自动刷新页面，而不用手动重启jekyll\njekyll build          #写了新文章后，编译文档```\n然后访问localhost:4000就能看到blog的页面了。\n\n注：运行报**Could not find a JavaScript runtime.**错误\n答：在**gemfile**中加入\n```\ngem 'execjs'  \ngem 'therubyracer'  ```\n然后安装`gem install therubyracer ` 再运行就好了。\n\n一个基本的 Jekyll 网站的目录结构一般是像这样的：\n\n```\n├── _config.yml  #配置文件 \n├── _drafts      #草稿目录\n| ├── begin-with-the-crazy-ideas.textile\n| └── on-simplicity-in-technology.markdown\n├── _includes    #你可以加载这些包含部分到你的布局或者文章中以方便重用。可以用这个标签 {\\% include file.ext \\%} 来把文件 _includes/file.ext 包含进来。\n| ├── footer.html  #HTML尾\n| └── header.html  #HTML头\n├── _layouts\n| ├── default.html #默认模板\n| └── post.html    #文章模板\n├── _posts         #文章目录\n| ├── XXXX.md\n| └── XXXXXX.md\n├── _data\n| └── members.yml\n├── _site         #生成的站点文件存放目录\n└── index.html    #入口index文件\n└──Other Files/Folders   #其他一些未被提及的目录和文件如 css 还有 images 文件夹， favicon.ico 等文件都将被完全拷贝到生成的 site 中。\n```\n安装完成后，如果你要配置你自己的站点信息，那么你就要修改**_config.yml**这个文件。里面可以配置站点名称，描述，多说，统计，友链等等。\n参考：\nhttp://jekyll.com.cn/   中文官网\nhttp://pwnny.cn/original/2016/06/26/MakeBlog.html\n\n写文章在_posts里，文件名按**YEAR-MONTH-DAY-title.md**创建文件，\n在文章头部添加YAML头信息（YAML front- matter）：\n\n```\n---\nlayout: post\ntitle:  \"第一篇博客\"\ndate:   2016/10/26 13:03:42\ncategories: 文章阅读\ntag: 第一篇博客,jekyll搭建博客\n---\n\n这里开始用Markdown的语法编写文章。\n\n```\n每次都自己写yml文件头太麻烦，配置中会说到用Rakefile脚本自动生成文件。**注意：yml文件头不要有中文，.md文件名也不要有中文，**否则网页会显示404错误（原因未知）\n\n---\n\n# 配置优化、美化站点\n## 主题部分\n可以在http://jekyllthemes.org/这个上面找找，Hux这个主题还是不错的，喜欢的直接下载，重新修改里面配置就行了。可以fork或下载回来，整个替换，把文章拷过去就行。一个很好的Hux模板：https://github.com/huxpro/huxpro.github.io/\n\n## 配置文件设置\n我用到的参数：\n```\n#不要在配置文件中使用 tab 制表符,用空格代替。\n#配置请参考：http://jekyllcn.com/docs/configuration/#front-matter-defaults\n\n\n# Site settings\ntitle: LeoLan的博客\nauthor: Leo Lan\nemail: 842632422@qq.com\ndescription: > # this means to ignore newlines until \"baseurl:\"\n  Write an awesome description for your new site here. You can edit this\n  line in _config.yml. It will appear in your document head meta (for\n  Google search results) and in your feed.xml site description.\n\n#自定义站点标题\n#webrick:\n#  headers:\n#    My-Header: My-Value\n#    My-Other-Header: My-Other-Value\n\n\n# Site URL NOTE: if your site is base on subdir /blog you should change base to \"/blog\"\ndomain: \"http://myleolan.github.io\" #你的github网址  the domain URL for your site\nbase: \"\"  # the relative path that different with domain so you can test locally\n\n# Source URL NOTE: end with / cause it's [URL + FILE]\nw3c_url: \"/w3c/\"  # the base url of css js and images\npostImage_url: \"/w3c/images/\" # the base url of post images\npostfile: \"/db/Postfile\" # the Database\nsitefile: \"/db/Sitefile\" # the Database\n\n# 3rd URL\nduoshuo_short_name: \"leolan\" # 注册多说是填写的网址前缀 the user of user.domain.com \nduoshuo_user_uid: \"a61c3f290749b621688a3f42c7e8e31c\" #多说的uid   the admin user uid  \nduoshuo_user_name: \"leolan\" #多说的用户名 the admin user names   \nduoshuo_max_depth: \"2\"  # the max_depth setting in duoshuo comments\nduoshuo_url: \"/w3c/duoshuo/embed.min.js\" # the local duoshuo comment plugin, you can change it to remote \"http://static.duoshuo.com/\"\njquery_url: \"http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js\" # use cdn\nbaiduTemplate_url: \"/w3c/js/baiduTemplate.js\" #use local\ngoogle_analytics_id: \"UA-86334360-1\"  #Google分析\n\n# Build Settings\nexcerpt_separator: \"\\n\\n\" # you can specify your own separator here, default is \"\\n\\n\" String\npermalink: /:year/:month/:day/:title.html   #生成html文件的命名方式\nhighlighter: rouge   #代码高亮\nmarkdown: kramdown   #markdown文档处理器\nkramdown:\n  input: GFM\n  hard_wrap: true # a newline in markdown text would be changed to <br>\n\n#插件（需要包含的插件）\ngems:\n  - jemoji\n\nlsi: BOOL   #建立文件索引\n\n####---------------------------------------------------------------------\n#以下为github的默认设置\n\n# Following is got in Github Help With Configuring Jekyll\n# Github Page Default Settings which you can override:\n\n# kramdown:\n#   input: GFM\n#   hard_wrap: false\n# gems:\n#   - jekyll-coffeescript\n#   - jekyll-paginate\n\n# Github Page override the following settings which you cannot change:\n# lsi: false\n# safe: true    #安全方式，禁用所有插件\n# source: [your repo's top level directory]\n# incremental: false\n# highlighter: rouge\n# gist:\n#  noscript: false\n# kramdown:\n#  math_engine: mathjax\n\n```\n\n## 自动生成文件模板\n前面说到的带yml信息的文件头\n```\n---\nlayout: post\ntitle:  \"第一篇博客\"\ndate:   2016/10/26 13:03:42\ncategories: 文章阅读\ntag: 第一篇博客,jekyll搭建博客\n---```\n文件头可以自动生成，而不用每次都手工码字，在网站根目录下创建Rakefile文件（ruby的一中脚本配置文件）\n里面填入代码：\n\n```\ntask :default => :new\n\nrequire 'fileutils'\n\ndesc \"创建新 post\"\ntask :new do\n  puts \"请输入要创建的.md文件名：\"\n  @url = STDIN.gets.chomp\n  puts \"请输入 文章 标题：\"\n  @name = STDIN.gets.chomp\n  puts \"请输入 文章 子标题：\"\n  @subtitle = STDIN.gets.chomp\n  puts \"请输入 文章 分类，以空格分隔：\"\n  @categories = STDIN.gets.chomp\n  puts \"请输入 博客分类 标签，以空格分隔：\"\n  @tag = STDIN.gets.chomp\n  @slug = \"#{@url}\"\n  @slug = @slug.downcase.strip.gsub(' ', '-')\n  @date = Time.now.strftime(\"%F\")\n  @post_name = \"_posts/#{@date}-#{@slug}.md\"\n  if File.exist?(@post_name)\n      abort(\"文件名已经存在！创建失败\")\n  end\n  FileUtils.touch(@post_name)\n  open(@post_name, 'a') do |file|\n      file.puts \"---\"\n      file.puts \"layout: post\"\n      file.puts \"title: #{@name}\"\n      file.puts \"subtitle: #{@subtitle}\"\n      file.puts \"author: Leo Lan\"\n      file.puts \"date: #{Time.now}\"\n      file.puts \"categories: #{@categories}\"\n      file.puts \"tag: #{@tag}\"\n      file.puts \"published: true\"\n      file.puts \"---\"\n  end\n  exec \"vim #{@post_name}\"\nend```\n**layout**表示使用的是post布局，title是文章标题，\n**date**是自动生成的日期，\n**subtitle**是副标题\n**categories**是该文章生成html文件后存放的目录（分类），可以去_site/jekyll/update下找到对应日期下面的html文档。当然你也可以只设置jekyll单一的目录，甚至是更多级别的目录，用空格分开即可。**tag**是文章的标签。\n**published**表示是否发布文章\n下次在命令行输入`rake new`按提示一步一步就能创建一个很好的文件啦，剩下的只需要专心写作就好了。\n\n\n参考：http://www.liubaicai.net/articles/733/\n\n\n---\n\n# 用Github Pages生成个人博客\nGithub Pages生成网站的两种方式的基本原理\n\n## 法一：\n在Github上有一个账号，名为 username （任意），有一个项目，名为 username.github.io （固定格式，username与账号名一致），项目分支名为 **master** （默认固定），这个分支有类似下面的目录结构：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A203.png)\n当你访问 http://username.github.io/ 时，Github会使用Jekyll解析用户 username 名下的 username.github.io 项目中，分支为 master 的源代码，为你构建一个静态网站，并将生成的 index.html 展示给你。\n\n## 法二：\n在Github上有一个账号，名为 username （任意），有一个项目，名为 blog （任意），项目分支名为 **gh-pages **（固定），这个分支也有上面那种结构。\n那么当你访问 http://username.github.io/blog 时，Github会去解析 username 用户下，project 项目的 gh-pages 分支下的源代码，为你构建网站。\n\n所以要搭建自己的博客你有两种选择：\n* 建立名为 username.github.io 的项目，在 master 分支下存放网站源代码\n* 建立名为 blog 的项目，在 gh-pages 分支下存放网站源代码\n考虑到第一种项目名复杂不方便同步等，这里用第二种方法，方便管理。\n新建一个仓库，名称随意，ReadMe.md文件随意，不懂的查看教程第4节“创建远程仓库”：[git教程](https://www.leolan.top/posts/41310/)\n\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A204.png)\n翻到下面，选择**Launch automatic page generator**\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A205.png)\n再接着编译一下内容，点**Continue to layouts**\n选好模板，点击**Publish page**，就生成了Github Pages，并且，分支自动设置为了gh-pages。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A206.png)\n\n打开网站看看效果：https://myleolan.github.io/blog/\n以后本地写好的文章，jekyll bundle之后就可以推送到gh-pages分支即可。推送博客到github推荐用命令行，Windows版的客户端不熟悉容易误操作。 博客源码和发布的博客网页在同一个仓库中，可以共同存放。（Hexo是生成的网站和博客原文分开存放的）\n\n# Github Pages环境本地化\n上面搭建的只是Jekyll的本地环境，当push到Github Pages后环境会有所变化，为了本地看到的效果和托管在Github Pages看到的效果一致，我们最好搭建本地的Github Pages环境。\nruby要2.0.0以上版本，如果`ruby --version`查看版本低于2.0.0，那么需要升级ruby。\n安装ruby工具集管理工具Bundler （前面安装过了就不用安装了）\n```\ngem install bundler\nbundler -v```\n\n进入jekyll创建的网站目录\n```\ngit init                      #把当前目录加入版本库中\ngit checkout -b gh-pages      #创建gh-pages分支，用于推送到github上的gh-pages分支上。```\n\n创建**Gemfile**文件 如果本生有Gemfile和Gemfile.lock那就删除掉，内容如下：\n```\nsource 'https://ruby.taobao.org'  #(淘宝源，国内比较快)\ngem 'github-pages', group: :jekyll_plugins\n或\nsource 'https://rubygems.org'   #(官方源)\ngem 'github-pages', group: :jekyll_plugins```\n\n执行下面的命令安装Github Pages的工具集**（在网站根目录，就是Gemfile文件的路径）**\n`bundle install`\n运行起来（一开始创建了网站就可以直接跑起来啦，如果没有创建网站，创建或fork别人的。）\n`bundle exec jekyll serve`\n\n如果出现**bundle exec jekyll serve**能启动，而**jekyll serve**不能启动，则删除Gemfile和Gemfile.lock重新运行jekyll serve即可。\n更多Github Pages本地化环境搭建，可参考官方文档:https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/\n\n注意：如果是是下载了别人的模板进行修改，只把文件拷到自己项目中进行添加就可以了，不要全选把**.git**文件夹也拷过了，别人的分支和自己的不同时会出现各种问题。\n\n调试好各种东西后就可以推送到Github了。\n  1. 用markdown写文章，并按规定名称格式保存在_posts里。\n  2. 用`jekyll serve –watch`或`bundle exec jekyll server`启动服务器，在浏览器里查看。(指定端口在**_config.yml**文件中增加`port: xxxx`)\n  1. 用git客户端推送到远程仓库里。\n  2. 通过域名访问。\n\n---\n\n# 绑定域名\n原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。\n\n* 1· 在你的项目下新建一个**CNAME**文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是** www.leolan.top**和** leolan.top**（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送**CNAME文件**到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在**CNAME文件**里绑定两个，在Pages页面也绑定两个。\n* 2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 `username.github.io. `，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png)\n过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的**CNAME**文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。\n\n---\n\n","slug":"环境搭建-2016-11-08-用Jekyll搭建博客","published":1,"updated":"2016-12-07T06:52:02.325Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjnf002kd8pku3abhlx6","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"安装Jekyll\"><a href=\"#安装Jekyll\" class=\"headerlink\" title=\"安装Jekyll\"></a>安装Jekyll</h1><p>Jekyll用Ruby写的，jekyll是把原文上传github，可以直接生成博客，也可以用在线编辑器处理。</p>\n<ol>\n<li>搭建ruby环境（ruby版本最好大于2.2.2），详见：<a href=\"http://leolan.top/2016/10/31/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-10-21-Ruby%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/\" target=\"_blank\" rel=\"external\">Ruby开发环境搭建</a>  </li>\n<li>安装kramdown（Markdown文档处理器）<br>gem install kramdown</li>\n<li>安装rouge（语法高亮）<br>gem install rouge</li>\n<li>动态处理插件exec<br>gem install execjs</li>\n<li>安装ruby工具集管理工具Bundler<br>gem install bundler</li>\n<li>安装rails WEB框架（可选，不安装运行jekyll时可能报错）<br>gem install rails<br>7.安装Jekyll（“Mac的安装见错误解决”）<br>gem install jekyll</li>\n</ol>\n<p>之后需要添加功能，要安装其他gems插件时，进入该项目目录再安装，不然不会被包含，就不会生效。<br>错误解决：<br><strong>Mac</strong>：</p>\n<figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir -p <span class=\"meta-keyword\">/usr/</span>local/Cellar<span class=\"meta-keyword\">/ruby/</span>bin</div><div class=\"line\">sudo gem install jekyll -n <span class=\"meta-keyword\">/usr/</span>local/Cellar<span class=\"meta-keyword\">/ruby/</span>bin</div></pre></td></tr></table></figure>\n<p>关闭终端窗口再打开，输入<strong>jekyll</strong>看这个指令是否存在，如果提示不存在，那就再修改<br><code>/Users/用户名/.bash_profile</code>文件，把Jekyll的路径写进去。<br><code>export PATH=/usr/local/Cellar/ruby/bin:$PATH</code>再重新打开终端，这时候Jekyll指令应该ok了。<br>注：<code>whereis gem</code>可以看到路径是<strong>/usr/bin/gem</strong>,当前的gem路径是<strong>系统默认的gem版本</strong>，这个版本用了是会报错的，用这个版本安装Jekyll默认安装Jekyll到相同目录下，所以同样会出现permission denied的报错信息。有人说可以用symlink，但即使用了sudo也会是permission denied的报错。所以直接安装Jekyll并同时指定安装路径了。</p>\n<p><strong>Windows</strong>：<br>如果安装jekyll或bundle报错，则需要安装编译工具。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A201.png\" alt=\"\"><br>打开：<a href=\"http://rubyinstaller.org/downloads/\" target=\"_blank\" rel=\"external\">http://rubyinstaller.org/downloads/</a>  下载对应的<strong>DevKit-mingw</strong>，解压到没有中文、空格、特殊符号的文件夹，</p>\n<ol>\n<li>cmd进入该目录</li>\n<li>命令行下运行<code>ruby dk.rb init</code></li>\n<li>编辑目录下的<strong>config.yml</strong>文件 最尾加上<code>- C:\\Ruby23-x64  #即ruby安装目录</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A202.png\" alt=\"\"></li>\n<li>运行<code>ruby dk.rb review   #（可选，一般不用运行）</code></li>\n<li>运行<code>ruby dk.rb install</code></li>\n<li>如果上述步骤<strong>只有info输出</strong>而<strong>没有warning输出</strong>，则应该安装成功了</li>\n<li>测试<code>gem install json --platform=ruby</code>如果安装成功，则表示devkit安装成功。</li>\n<li>如果失败，可以重装ruby和ruby-devkit，或者选择2.0.0以上版本的ruby版本，或<a href=\"https://rubygems.org/pages/download\" target=\"_blank\" rel=\"external\">https://rubygems.org/pages/download</a> 按提示更新gem版本。</li>\n</ol>\n<p>ok,安装完成啦！</p>\n<hr>\n<h1 id=\"建立站点\"><a href=\"#建立站点\" class=\"headerlink\" title=\"建立站点\"></a>建立站点</h1><figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">jekyll<span class=\"built_in\"> new </span>new-site   <span class=\"comment\">#创建新站点</span></div><div class=\"line\">cd<span class=\"built_in\"> new-site </span>          <span class=\"comment\">#进入站点目录下一步才能开启服务</span></div><div class=\"line\">jekyll serve --watch  <span class=\"comment\">#加--watch参数修改后会自动刷新页面，而不用手动重启jekyll</span></div><div class=\"line\">jekyll build          <span class=\"comment\">#写了新文章后，编译文档</span></div></pre></td></tr></table></figure>\n<p>然后访问localhost:4000就能看到blog的页面了。</p>\n<p>注：运行报<strong>Could not find a JavaScript runtime.</strong>错误<br>答：在<strong>gemfile</strong>中加入<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">gem</span> <span class=\"string\">'execjs'</span>  </div><div class=\"line\">gem <span class=\"string\">'therubyracer'</span></div></pre></td></tr></table></figure></p>\n<p>然后安装<code>gem install therubyracer</code> 再运行就好了。</p>\n<p>一个基本的 Jekyll 网站的目录结构一般是像这样的：</p>\n<figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">├── _config.yml  <span class=\"meta\">#配置文件 </span></div><div class=\"line\">├── _drafts      <span class=\"meta\">#草稿目录</span></div><div class=\"line\"><span class=\"string\">| ├── begin-with-the-crazy-ideas.textile</span></div><div class=\"line\"><span class=\"string\">| └── on-simplicity-in-technology.markdown</span></div><div class=\"line\">├── _includes    <span class=\"meta\">#你可以加载这些包含部分到你的布局或者文章中以方便重用。可以用这个标签 &#123;\\% include file.ext \\%&#125; 来把文件 _includes/file.ext 包含进来。</span></div><div class=\"line\"><span class=\"string\">| ├── footer.html  #HTML尾</span></div><div class=\"line\"><span class=\"string\">| └── header.html  #HTML头</span></div><div class=\"line\">├── _layouts</div><div class=\"line\"><span class=\"string\">| ├── default.html #默认模板</span></div><div class=\"line\"><span class=\"string\">| └── post.html    #文章模板</span></div><div class=\"line\">├── _posts         <span class=\"meta\">#文章目录</span></div><div class=\"line\"><span class=\"string\">| ├── XXXX.md</span></div><div class=\"line\"><span class=\"string\">| └── XXXXXX.md</span></div><div class=\"line\">├── _data</div><div class=\"line\"><span class=\"string\">| └── members.yml</span></div><div class=\"line\">├── _site         <span class=\"meta\">#生成的站点文件存放目录</span></div><div class=\"line\">└── index.html    <span class=\"meta\">#入口index文件</span></div><div class=\"line\">└──Other Files/Folders   <span class=\"meta\">#其他一些未被提及的目录和文件如 css 还有 images 文件夹， favicon.ico 等文件都将被完全拷贝到生成的 site 中。</span></div></pre></td></tr></table></figure>\n<p>安装完成后，如果你要配置你自己的站点信息，那么你就要修改<strong>_config.yml</strong>这个文件。里面可以配置站点名称，描述，多说，统计，友链等等。<br>参考：<br><a href=\"http://jekyll.com.cn/\" target=\"_blank\" rel=\"external\">http://jekyll.com.cn/</a>   中文官网<br><a href=\"http://pwnny.cn/original/2016/06/26/MakeBlog.html\" target=\"_blank\" rel=\"external\">http://pwnny.cn/original/2016/06/26/MakeBlog.html</a></p>\n<p>写文章在_posts里，文件名按<strong>YEAR-MONTH-DAY-title.md</strong>创建文件，<br>在文章头部添加YAML头信息（YAML front- matter）：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"attr\">layout:</span> post</div><div class=\"line\"><span class=\"attr\">title:</span>  <span class=\"string\">\"第一篇博客\"</span></div><div class=\"line\"><span class=\"attr\">date:</span>   <span class=\"number\">2016</span>/<span class=\"number\">10</span>/<span class=\"number\">26</span> <span class=\"number\">13</span>:<span class=\"number\">03</span>:<span class=\"number\">42</span></div><div class=\"line\"><span class=\"attr\">categories:</span> 文章阅读</div><div class=\"line\"><span class=\"attr\">tag:</span> 第一篇博客,jekyll搭建博客</div><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"></div><div class=\"line\">这里开始用Markdown的语法编写文章。</div></pre></td></tr></table></figure>\n<p>每次都自己写yml文件头太麻烦，配置中会说到用Rakefile脚本自动生成文件。<strong>注意：yml文件头不要有中文，.md文件名也不要有中文，</strong>否则网页会显示404错误（原因未知）</p>\n<hr>\n<h1 id=\"配置优化、美化站点\"><a href=\"#配置优化、美化站点\" class=\"headerlink\" title=\"配置优化、美化站点\"></a>配置优化、美化站点</h1><h2 id=\"主题部分\"><a href=\"#主题部分\" class=\"headerlink\" title=\"主题部分\"></a>主题部分</h2><p>可以在<a href=\"http://jekyllthemes.org/这个上面找找，Hux这个主题还是不错的，喜欢的直接下载，重新修改里面配置就行了。可以fork或下载回来，整个替换，把文章拷过去就行。一个很好的Hux模板：https://github.com/huxpro/huxpro.github.io/\" target=\"_blank\" rel=\"external\">http://jekyllthemes.org/这个上面找找，Hux这个主题还是不错的，喜欢的直接下载，重新修改里面配置就行了。可以fork或下载回来，整个替换，把文章拷过去就行。一个很好的Hux模板：https://github.com/huxpro/huxpro.github.io/</a></p>\n<h2 id=\"配置文件设置\"><a href=\"#配置文件设置\" class=\"headerlink\" title=\"配置文件设置\"></a>配置文件设置</h2><p>我用到的参数：<br><figure class=\"highlight elixir\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#不要在配置文件中使用 tab 制表符,用空格代替。</span></div><div class=\"line\"><span class=\"comment\">#配置请参考：http://jekyllcn.com/docs/configuration/#front-matter-defaults</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Site settings</span></div><div class=\"line\"><span class=\"symbol\">title:</span> LeoLan的博客</div><div class=\"line\"><span class=\"symbol\">author:</span> Leo Lan</div><div class=\"line\"><span class=\"symbol\">email:</span> <span class=\"number\">842632422</span><span class=\"variable\">@qq</span>.com</div><div class=\"line\"><span class=\"symbol\">description:</span> &gt; <span class=\"comment\"># this means to ignore newlines until \"baseurl:\"</span></div><div class=\"line\">  Write an awesome description <span class=\"keyword\">for</span> your new site here. You can edit this</div><div class=\"line\">  line <span class=\"keyword\">in</span> _config.yml. It will appear <span class=\"keyword\">in</span> your document head meta (<span class=\"keyword\">for</span></div><div class=\"line\">  Google search results) <span class=\"keyword\">and</span> <span class=\"keyword\">in</span> your feed.xml site description.</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#自定义站点标题</span></div><div class=\"line\"><span class=\"comment\">#webrick:</span></div><div class=\"line\"><span class=\"comment\">#  headers:</span></div><div class=\"line\"><span class=\"comment\">#    My-Header: My-Value</span></div><div class=\"line\"><span class=\"comment\">#    My-Other-Header: My-Other-Value</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Site URL <span class=\"doctag\">NOTE:</span> if your site is base on subdir /blog you should change base to \"/blog\"</span></div><div class=\"line\"><span class=\"symbol\">domain:</span> <span class=\"string\">\"http://myleolan.github.io\"</span> <span class=\"comment\">#你的github网址  the domain URL for your site</span></div><div class=\"line\"><span class=\"symbol\">base:</span> <span class=\"string\">\"\"</span>  <span class=\"comment\"># the relative path that different with domain so you can test locally</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Source URL <span class=\"doctag\">NOTE:</span> end with / cause it's [URL + FILE]</span></div><div class=\"line\"><span class=\"symbol\">w3c_url:</span> <span class=\"string\">\"/w3c/\"</span>  <span class=\"comment\"># the base url of css js and images</span></div><div class=\"line\"><span class=\"symbol\">postImage_url:</span> <span class=\"string\">\"/w3c/images/\"</span> <span class=\"comment\"># the base url of post images</span></div><div class=\"line\"><span class=\"symbol\">postfile:</span> <span class=\"string\">\"/db/Postfile\"</span> <span class=\"comment\"># the Database</span></div><div class=\"line\"><span class=\"symbol\">sitefile:</span> <span class=\"string\">\"/db/Sitefile\"</span> <span class=\"comment\"># the Database</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 3rd URL</span></div><div class=\"line\"><span class=\"symbol\">duoshuo_short_name:</span> <span class=\"string\">\"leolan\"</span> <span class=\"comment\"># 注册多说是填写的网址前缀 the user of user.domain.com </span></div><div class=\"line\"><span class=\"symbol\">duoshuo_user_uid:</span> <span class=\"string\">\"a61c3f290749b621688a3f42c7e8e31c\"</span> <span class=\"comment\">#多说的uid   the admin user uid  </span></div><div class=\"line\"><span class=\"symbol\">duoshuo_user_name:</span> <span class=\"string\">\"leolan\"</span> <span class=\"comment\">#多说的用户名 the admin user names   </span></div><div class=\"line\"><span class=\"symbol\">duoshuo_max_depth:</span> <span class=\"string\">\"2\"</span>  <span class=\"comment\"># the max_depth setting in duoshuo comments</span></div><div class=\"line\"><span class=\"symbol\">duoshuo_url:</span> <span class=\"string\">\"/w3c/duoshuo/embed.min.js\"</span> <span class=\"comment\"># the local duoshuo comment plugin, you can change it to remote \"http://static.duoshuo.com/\"</span></div><div class=\"line\"><span class=\"symbol\">jquery_url:</span> <span class=\"string\">\"http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js\"</span> <span class=\"comment\"># use cdn</span></div><div class=\"line\"><span class=\"symbol\">baiduTemplate_url:</span> <span class=\"string\">\"/w3c/js/baiduTemplate.js\"</span> <span class=\"comment\">#use local</span></div><div class=\"line\"><span class=\"symbol\">google_analytics_id:</span> <span class=\"string\">\"UA-86334360-1\"</span>  <span class=\"comment\">#Google分析</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Build Settings</span></div><div class=\"line\"><span class=\"symbol\">excerpt_separator:</span> <span class=\"string\">\"\\n\\n\"</span> <span class=\"comment\"># you can specify your own separator here, default is \"\\n\\n\" String</span></div><div class=\"line\"><span class=\"symbol\">permalink:</span> /<span class=\"symbol\">:year/</span><span class=\"symbol\">:month/</span><span class=\"symbol\">:day/</span><span class=\"symbol\">:title</span>.html   <span class=\"comment\">#生成html文件的命名方式</span></div><div class=\"line\"><span class=\"symbol\">highlighter:</span> rouge   <span class=\"comment\">#代码高亮</span></div><div class=\"line\"><span class=\"symbol\">markdown:</span> kramdown   <span class=\"comment\">#markdown文档处理器</span></div><div class=\"line\"><span class=\"symbol\">kramdown:</span></div><div class=\"line\">  <span class=\"symbol\">input:</span> GFM</div><div class=\"line\">  <span class=\"symbol\">hard_wrap:</span> <span class=\"keyword\">true</span> <span class=\"comment\"># a newline in markdown text would be changed to &lt;br&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#插件（需要包含的插件）</span></div><div class=\"line\"><span class=\"symbol\">gems:</span></div><div class=\"line\">  - jemoji</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">lsi:</span> BOOL   <span class=\"comment\">#建立文件索引</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">####---------------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\">#以下为github的默认设置</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Following is got in Github Help With Configuring Jekyll</span></div><div class=\"line\"><span class=\"comment\"># Github Page Default Settings which you can override:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># kramdown:</span></div><div class=\"line\"><span class=\"comment\">#   input: GFM</span></div><div class=\"line\"><span class=\"comment\">#   hard_wrap: false</span></div><div class=\"line\"><span class=\"comment\"># gems:</span></div><div class=\"line\"><span class=\"comment\">#   - jekyll-coffeescript</span></div><div class=\"line\"><span class=\"comment\">#   - jekyll-paginate</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Github Page override the following settings which you cannot change:</span></div><div class=\"line\"><span class=\"comment\"># lsi: false</span></div><div class=\"line\"><span class=\"comment\"># safe: true    #安全方式，禁用所有插件</span></div><div class=\"line\"><span class=\"comment\"># source: [your repo's top level directory]</span></div><div class=\"line\"><span class=\"comment\"># incremental: false</span></div><div class=\"line\"><span class=\"comment\"># highlighter: rouge</span></div><div class=\"line\"><span class=\"comment\"># gist:</span></div><div class=\"line\"><span class=\"comment\">#  noscript: false</span></div><div class=\"line\"><span class=\"comment\"># kramdown:</span></div><div class=\"line\"><span class=\"comment\">#  math_engine: mathjax</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"自动生成文件模板\"><a href=\"#自动生成文件模板\" class=\"headerlink\" title=\"自动生成文件模板\"></a>自动生成文件模板</h2><p>前面说到的带yml信息的文件头<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"attr\">layout:</span> post</div><div class=\"line\"><span class=\"attr\">title:</span>  <span class=\"string\">\"第一篇博客\"</span></div><div class=\"line\"><span class=\"attr\">date:</span>   <span class=\"number\">2016</span>/<span class=\"number\">10</span>/<span class=\"number\">26</span> <span class=\"number\">13</span>:<span class=\"number\">03</span>:<span class=\"number\">42</span></div><div class=\"line\"><span class=\"attr\">categories:</span> 文章阅读</div><div class=\"line\"><span class=\"attr\">tag:</span> 第一篇博客,jekyll搭建博客</div><div class=\"line\"><span class=\"meta\">---</span></div></pre></td></tr></table></figure></p>\n<p>文件头可以自动生成，而不用每次都手工码字，在网站根目录下创建Rakefile文件（ruby的一中脚本配置文件）<br>里面填入代码：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\">task <span class=\"symbol\">:default</span> =&gt; <span class=\"symbol\">:new</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'fileutils'</span></div><div class=\"line\"></div><div class=\"line\">desc <span class=\"string\">\"创建新 post\"</span></div><div class=\"line\">task <span class=\"symbol\">:new</span> <span class=\"keyword\">do</span></div><div class=\"line\">  puts <span class=\"string\">\"请输入要创建的.md文件名：\"</span></div><div class=\"line\">  @url = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 文章 标题：\"</span></div><div class=\"line\">  @name = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 文章 子标题：\"</span></div><div class=\"line\">  @subtitle = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 文章 分类，以空格分隔：\"</span></div><div class=\"line\">  @categories = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 博客分类 标签，以空格分隔：\"</span></div><div class=\"line\">  @tag = STDIN.gets.chomp</div><div class=\"line\">  @slug = <span class=\"string\">\"<span class=\"subst\">#&#123;@url&#125;</span>\"</span></div><div class=\"line\">  @slug = @slug.downcase.strip.gsub(<span class=\"string\">' '</span>, <span class=\"string\">'-'</span>)</div><div class=\"line\">  @date = Time.now.strftime(<span class=\"string\">\"%F\"</span>)</div><div class=\"line\">  @post_name = <span class=\"string\">\"_posts/<span class=\"subst\">#&#123;@date&#125;</span>-<span class=\"subst\">#&#123;@slug&#125;</span>.md\"</span></div><div class=\"line\">  <span class=\"keyword\">if</span> File.exist?(@post_name)</div><div class=\"line\">      abort(<span class=\"string\">\"文件名已经存在！创建失败\"</span>)</div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  FileUtils.touch(@post_name)</div><div class=\"line\">  open(@post_name, <span class=\"string\">'a'</span>) <span class=\"keyword\">do</span> <span class=\"params\">|file|</span></div><div class=\"line\">      file.puts <span class=\"string\">\"---\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"layout: post\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"title: <span class=\"subst\">#&#123;@name&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"subtitle: <span class=\"subst\">#&#123;@subtitle&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"author: Leo Lan\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"date: <span class=\"subst\">#&#123;Time.now&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"categories: <span class=\"subst\">#&#123;@categories&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"tag: <span class=\"subst\">#&#123;@tag&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"published: true\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"---\"</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  exec <span class=\"string\">\"vim <span class=\"subst\">#&#123;@post_name&#125;</span>\"</span></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p><strong>layout</strong>表示使用的是post布局，title是文章标题，<br><strong>date</strong>是自动生成的日期，<br><strong>subtitle</strong>是副标题<br><strong>categories</strong>是该文章生成html文件后存放的目录（分类），可以去_site/jekyll/update下找到对应日期下面的html文档。当然你也可以只设置jekyll单一的目录，甚至是更多级别的目录，用空格分开即可。<strong>tag</strong>是文章的标签。<br><strong>published</strong>表示是否发布文章<br>下次在命令行输入<code>rake new</code>按提示一步一步就能创建一个很好的文件啦，剩下的只需要专心写作就好了。</p>\n<p>参考：<a href=\"http://www.liubaicai.net/articles/733/\" target=\"_blank\" rel=\"external\">http://www.liubaicai.net/articles/733/</a></p>\n<hr>\n<h1 id=\"用Github-Pages生成个人博客\"><a href=\"#用Github-Pages生成个人博客\" class=\"headerlink\" title=\"用Github Pages生成个人博客\"></a>用Github Pages生成个人博客</h1><p>Github Pages生成网站的两种方式的基本原理</p>\n<h2 id=\"法一：\"><a href=\"#法一：\" class=\"headerlink\" title=\"法一：\"></a>法一：</h2><p>在Github上有一个账号，名为 username （任意），有一个项目，名为 username.github.io （固定格式，username与账号名一致），项目分支名为 <strong>master</strong> （默认固定），这个分支有类似下面的目录结构：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A203.png\" alt=\"\"><br>当你访问 <a href=\"http://username.github.io/\" target=\"_blank\" rel=\"external\">http://username.github.io/</a> 时，Github会使用Jekyll解析用户 username 名下的 username.github.io 项目中，分支为 master 的源代码，为你构建一个静态网站，并将生成的 index.html 展示给你。</p>\n<h2 id=\"法二：\"><a href=\"#法二：\" class=\"headerlink\" title=\"法二：\"></a>法二：</h2><p>在Github上有一个账号，名为 username （任意），有一个项目，名为 blog （任意），项目分支名为 <strong>gh-pages </strong>（固定），这个分支也有上面那种结构。<br>那么当你访问 <a href=\"http://username.github.io/blog\" target=\"_blank\" rel=\"external\">http://username.github.io/blog</a> 时，Github会去解析 username 用户下，project 项目的 gh-pages 分支下的源代码，为你构建网站。</p>\n<p>所以要搭建自己的博客你有两种选择：</p>\n<ul>\n<li>建立名为 username.github.io 的项目，在 master 分支下存放网站源代码</li>\n<li>建立名为 blog 的项目，在 gh-pages 分支下存放网站源代码<br>考虑到第一种项目名复杂不方便同步等，这里用第二种方法，方便管理。<br>新建一个仓库，名称随意，ReadMe.md文件随意，不懂的查看教程第4节“创建远程仓库”：<a href=\"https://www.leolan.top/posts/41310/\">git教程</a></li>\n</ul>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A204.png\" alt=\"\"><br>翻到下面，选择<strong>Launch automatic page generator</strong><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A205.png\" alt=\"\"><br>再接着编译一下内容，点<strong>Continue to layouts</strong><br>选好模板，点击<strong>Publish page</strong>，就生成了Github Pages，并且，分支自动设置为了gh-pages。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A206.png\" alt=\"\"></p>\n<p>打开网站看看效果：<a href=\"https://myleolan.github.io/blog/\" target=\"_blank\" rel=\"external\">https://myleolan.github.io/blog/</a><br>以后本地写好的文章，jekyll bundle之后就可以推送到gh-pages分支即可。推送博客到github推荐用命令行，Windows版的客户端不熟悉容易误操作。 博客源码和发布的博客网页在同一个仓库中，可以共同存放。（Hexo是生成的网站和博客原文分开存放的）</p>\n<h1 id=\"Github-Pages环境本地化\"><a href=\"#Github-Pages环境本地化\" class=\"headerlink\" title=\"Github Pages环境本地化\"></a>Github Pages环境本地化</h1><p>上面搭建的只是Jekyll的本地环境，当push到Github Pages后环境会有所变化，为了本地看到的效果和托管在Github Pages看到的效果一致，我们最好搭建本地的Github Pages环境。<br>ruby要2.0.0以上版本，如果<code>ruby --version</code>查看版本低于2.0.0，那么需要升级ruby。<br>安装ruby工具集管理工具Bundler （前面安装过了就不用安装了）<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem <span class=\"keyword\">install </span><span class=\"keyword\">bundler</span></div><div class=\"line\"><span class=\"keyword\">bundler </span>-v</div></pre></td></tr></table></figure></p>\n<p>进入jekyll创建的网站目录<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git init                      <span class=\"comment\">#把当前目录加入版本库中</span></div><div class=\"line\">git checkout -<span class=\"keyword\">b </span>gh-pages      <span class=\"comment\">#创建gh-pages分支，用于推送到github上的gh-pages分支上。</span></div></pre></td></tr></table></figure></p>\n<p>创建<strong>Gemfile</strong>文件 如果本生有Gemfile和Gemfile.lock那就删除掉，内容如下：<br><figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">source <span class=\"string\">'https://ruby.taobao.org'</span>  <span class=\"meta\">#(淘宝源，国内比较快)</span></div><div class=\"line\">gem <span class=\"string\">'github-pages'</span>, <span class=\"keyword\">group</span>: :jekyll_plugins</div><div class=\"line\">或</div><div class=\"line\">source <span class=\"string\">'https://rubygems.org'</span>   <span class=\"meta\">#(官方源)</span></div><div class=\"line\">gem <span class=\"string\">'github-pages'</span>, <span class=\"keyword\">group</span>: :jekyll_plugins</div></pre></td></tr></table></figure></p>\n<p>执行下面的命令安装Github Pages的工具集<strong>（在网站根目录，就是Gemfile文件的路径）</strong><br><code>bundle install</code><br>运行起来（一开始创建了网站就可以直接跑起来啦，如果没有创建网站，创建或fork别人的。）<br><code>bundle exec jekyll serve</code></p>\n<p>如果出现<strong>bundle exec jekyll serve</strong>能启动，而<strong>jekyll serve</strong>不能启动，则删除Gemfile和Gemfile.lock重新运行jekyll serve即可。<br>更多Github Pages本地化环境搭建，可参考官方文档:<a href=\"https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/\" target=\"_blank\" rel=\"external\">https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/</a></p>\n<p>注意：如果是是下载了别人的模板进行修改，只把文件拷到自己项目中进行添加就可以了，不要全选把<strong>.git</strong>文件夹也拷过了，别人的分支和自己的不同时会出现各种问题。</p>\n<p>调试好各种东西后就可以推送到Github了。</p>\n<ol>\n<li>用markdown写文章，并按规定名称格式保存在_posts里。</li>\n<li>用<code>jekyll serve –watch</code>或<code>bundle exec jekyll server</code>启动服务器，在浏览器里查看。(指定端口在<strong>_config.yml</strong>文件中增加<code>port: xxxx</code>)</li>\n<li>用git客户端推送到远程仓库里。</li>\n<li>通过域名访问。</li>\n</ol>\n<hr>\n<h1 id=\"绑定域名\"><a href=\"#绑定域名\" class=\"headerlink\" title=\"绑定域名\"></a>绑定域名</h1><p>原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。</p>\n<ul>\n<li>1· 在你的项目下新建一个<strong>CNAME</strong>文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是<strong> www.leolan.top</strong>和<strong> leolan.top</strong>（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送<strong>CNAME文件</strong>到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在<strong>CNAME文件</strong>里绑定两个，在Pages页面也绑定两个。</li>\n<li>2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 <code>username.github.io.</code>，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png\" alt=\"\"><br>过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的<strong>CNAME</strong>文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。</li>\n</ul>\n<hr>\n","excerpt":"","more":"<h1 id=\"安装Jekyll\"><a href=\"#安装Jekyll\" class=\"headerlink\" title=\"安装Jekyll\"></a>安装Jekyll</h1><p>Jekyll用Ruby写的，jekyll是把原文上传github，可以直接生成博客，也可以用在线编辑器处理。</p>\n<ol>\n<li>搭建ruby环境（ruby版本最好大于2.2.2），详见：<a href=\"http://leolan.top/2016/10/31/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-10-21-Ruby%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/\">Ruby开发环境搭建</a>  </li>\n<li>安装kramdown（Markdown文档处理器）<br>gem install kramdown</li>\n<li>安装rouge（语法高亮）<br>gem install rouge</li>\n<li>动态处理插件exec<br>gem install execjs</li>\n<li>安装ruby工具集管理工具Bundler<br>gem install bundler</li>\n<li>安装rails WEB框架（可选，不安装运行jekyll时可能报错）<br>gem install rails<br>7.安装Jekyll（“Mac的安装见错误解决”）<br>gem install jekyll</li>\n</ol>\n<p>之后需要添加功能，要安装其他gems插件时，进入该项目目录再安装，不然不会被包含，就不会生效。<br>错误解决：<br><strong>Mac</strong>：</p>\n<figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir -p <span class=\"meta-keyword\">/usr/</span>local/Cellar<span class=\"meta-keyword\">/ruby/</span>bin</div><div class=\"line\">sudo gem install jekyll -n <span class=\"meta-keyword\">/usr/</span>local/Cellar<span class=\"meta-keyword\">/ruby/</span>bin</div></pre></td></tr></table></figure>\n<p>关闭终端窗口再打开，输入<strong>jekyll</strong>看这个指令是否存在，如果提示不存在，那就再修改<br><code>/Users/用户名/.bash_profile</code>文件，把Jekyll的路径写进去。<br><code>export PATH=/usr/local/Cellar/ruby/bin:$PATH</code>再重新打开终端，这时候Jekyll指令应该ok了。<br>注：<code>whereis gem</code>可以看到路径是<strong>/usr/bin/gem</strong>,当前的gem路径是<strong>系统默认的gem版本</strong>，这个版本用了是会报错的，用这个版本安装Jekyll默认安装Jekyll到相同目录下，所以同样会出现permission denied的报错信息。有人说可以用symlink，但即使用了sudo也会是permission denied的报错。所以直接安装Jekyll并同时指定安装路径了。</p>\n<p><strong>Windows</strong>：<br>如果安装jekyll或bundle报错，则需要安装编译工具。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A201.png\" alt=\"\"><br>打开：<a href=\"http://rubyinstaller.org/downloads/\">http://rubyinstaller.org/downloads/</a>  下载对应的<strong>DevKit-mingw</strong>，解压到没有中文、空格、特殊符号的文件夹，</p>\n<ol>\n<li>cmd进入该目录</li>\n<li>命令行下运行<code>ruby dk.rb init</code></li>\n<li>编辑目录下的<strong>config.yml</strong>文件 最尾加上<code>- C:\\Ruby23-x64  #即ruby安装目录</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A202.png\" alt=\"\"></li>\n<li>运行<code>ruby dk.rb review   #（可选，一般不用运行）</code></li>\n<li>运行<code>ruby dk.rb install</code></li>\n<li>如果上述步骤<strong>只有info输出</strong>而<strong>没有warning输出</strong>，则应该安装成功了</li>\n<li>测试<code>gem install json --platform=ruby</code>如果安装成功，则表示devkit安装成功。</li>\n<li>如果失败，可以重装ruby和ruby-devkit，或者选择2.0.0以上版本的ruby版本，或<a href=\"https://rubygems.org/pages/download\">https://rubygems.org/pages/download</a> 按提示更新gem版本。</li>\n</ol>\n<p>ok,安装完成啦！</p>\n<hr>\n<h1 id=\"建立站点\"><a href=\"#建立站点\" class=\"headerlink\" title=\"建立站点\"></a>建立站点</h1><figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">jekyll<span class=\"built_in\"> new </span>new-site   <span class=\"comment\">#创建新站点</span></div><div class=\"line\">cd<span class=\"built_in\"> new-site </span>          <span class=\"comment\">#进入站点目录下一步才能开启服务</span></div><div class=\"line\">jekyll serve --watch  <span class=\"comment\">#加--watch参数修改后会自动刷新页面，而不用手动重启jekyll</span></div><div class=\"line\">jekyll build          <span class=\"comment\">#写了新文章后，编译文档</span></div></pre></td></tr></table></figure>\n<p>然后访问localhost:4000就能看到blog的页面了。</p>\n<p>注：运行报<strong>Could not find a JavaScript runtime.</strong>错误<br>答：在<strong>gemfile</strong>中加入<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">gem</span> <span class=\"string\">'execjs'</span>  </div><div class=\"line\">gem <span class=\"string\">'therubyracer'</span></div></pre></td></tr></table></figure></p>\n<p>然后安装<code>gem install therubyracer</code> 再运行就好了。</p>\n<p>一个基本的 Jekyll 网站的目录结构一般是像这样的：</p>\n<figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">├── _config.yml  <span class=\"meta\">#配置文件 </span></div><div class=\"line\">├── _drafts      <span class=\"meta\">#草稿目录</span></div><div class=\"line\"><span class=\"string\">| ├── begin-with-the-crazy-ideas.textile</span></div><div class=\"line\"><span class=\"string\">| └── on-simplicity-in-technology.markdown</span></div><div class=\"line\">├── _includes    <span class=\"meta\">#你可以加载这些包含部分到你的布局或者文章中以方便重用。可以用这个标签 &#123;\\% include file.ext \\%&#125; 来把文件 _includes/file.ext 包含进来。</span></div><div class=\"line\"><span class=\"string\">| ├── footer.html  #HTML尾</span></div><div class=\"line\"><span class=\"string\">| └── header.html  #HTML头</span></div><div class=\"line\">├── _layouts</div><div class=\"line\"><span class=\"string\">| ├── default.html #默认模板</span></div><div class=\"line\"><span class=\"string\">| └── post.html    #文章模板</span></div><div class=\"line\">├── _posts         <span class=\"meta\">#文章目录</span></div><div class=\"line\"><span class=\"string\">| ├── XXXX.md</span></div><div class=\"line\"><span class=\"string\">| └── XXXXXX.md</span></div><div class=\"line\">├── _data</div><div class=\"line\"><span class=\"string\">| └── members.yml</span></div><div class=\"line\">├── _site         <span class=\"meta\">#生成的站点文件存放目录</span></div><div class=\"line\">└── index.html    <span class=\"meta\">#入口index文件</span></div><div class=\"line\">└──Other Files/Folders   <span class=\"meta\">#其他一些未被提及的目录和文件如 css 还有 images 文件夹， favicon.ico 等文件都将被完全拷贝到生成的 site 中。</span></div></pre></td></tr></table></figure>\n<p>安装完成后，如果你要配置你自己的站点信息，那么你就要修改<strong>_config.yml</strong>这个文件。里面可以配置站点名称，描述，多说，统计，友链等等。<br>参考：<br><a href=\"http://jekyll.com.cn/\">http://jekyll.com.cn/</a>   中文官网<br><a href=\"http://pwnny.cn/original/2016/06/26/MakeBlog.html\">http://pwnny.cn/original/2016/06/26/MakeBlog.html</a></p>\n<p>写文章在_posts里，文件名按<strong>YEAR-MONTH-DAY-title.md</strong>创建文件，<br>在文章头部添加YAML头信息（YAML front- matter）：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"attr\">layout:</span> post</div><div class=\"line\"><span class=\"attr\">title:</span>  <span class=\"string\">\"第一篇博客\"</span></div><div class=\"line\"><span class=\"attr\">date:</span>   <span class=\"number\">2016</span>/<span class=\"number\">10</span>/<span class=\"number\">26</span> <span class=\"number\">13</span>:<span class=\"number\">03</span>:<span class=\"number\">42</span></div><div class=\"line\"><span class=\"attr\">categories:</span> 文章阅读</div><div class=\"line\"><span class=\"attr\">tag:</span> 第一篇博客,jekyll搭建博客</div><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"></div><div class=\"line\">这里开始用Markdown的语法编写文章。</div></pre></td></tr></table></figure>\n<p>每次都自己写yml文件头太麻烦，配置中会说到用Rakefile脚本自动生成文件。<strong>注意：yml文件头不要有中文，.md文件名也不要有中文，</strong>否则网页会显示404错误（原因未知）</p>\n<hr>\n<h1 id=\"配置优化、美化站点\"><a href=\"#配置优化、美化站点\" class=\"headerlink\" title=\"配置优化、美化站点\"></a>配置优化、美化站点</h1><h2 id=\"主题部分\"><a href=\"#主题部分\" class=\"headerlink\" title=\"主题部分\"></a>主题部分</h2><p>可以在<a href=\"http://jekyllthemes.org/这个上面找找，Hux这个主题还是不错的，喜欢的直接下载，重新修改里面配置就行了。可以fork或下载回来，整个替换，把文章拷过去就行。一个很好的Hux模板：https://github.com/huxpro/huxpro.github.io/\">http://jekyllthemes.org/这个上面找找，Hux这个主题还是不错的，喜欢的直接下载，重新修改里面配置就行了。可以fork或下载回来，整个替换，把文章拷过去就行。一个很好的Hux模板：https://github.com/huxpro/huxpro.github.io/</a></p>\n<h2 id=\"配置文件设置\"><a href=\"#配置文件设置\" class=\"headerlink\" title=\"配置文件设置\"></a>配置文件设置</h2><p>我用到的参数：<br><figure class=\"highlight elixir\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#不要在配置文件中使用 tab 制表符,用空格代替。</span></div><div class=\"line\"><span class=\"comment\">#配置请参考：http://jekyllcn.com/docs/configuration/#front-matter-defaults</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Site settings</span></div><div class=\"line\"><span class=\"symbol\">title:</span> LeoLan的博客</div><div class=\"line\"><span class=\"symbol\">author:</span> Leo Lan</div><div class=\"line\"><span class=\"symbol\">email:</span> <span class=\"number\">842632422</span><span class=\"variable\">@qq</span>.com</div><div class=\"line\"><span class=\"symbol\">description:</span> &gt; <span class=\"comment\"># this means to ignore newlines until \"baseurl:\"</span></div><div class=\"line\">  Write an awesome description <span class=\"keyword\">for</span> your new site here. You can edit this</div><div class=\"line\">  line <span class=\"keyword\">in</span> _config.yml. It will appear <span class=\"keyword\">in</span> your document head meta (<span class=\"keyword\">for</span></div><div class=\"line\">  Google search results) <span class=\"keyword\">and</span> <span class=\"keyword\">in</span> your feed.xml site description.</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#自定义站点标题</span></div><div class=\"line\"><span class=\"comment\">#webrick:</span></div><div class=\"line\"><span class=\"comment\">#  headers:</span></div><div class=\"line\"><span class=\"comment\">#    My-Header: My-Value</span></div><div class=\"line\"><span class=\"comment\">#    My-Other-Header: My-Other-Value</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Site URL <span class=\"doctag\">NOTE:</span> if your site is base on subdir /blog you should change base to \"/blog\"</span></div><div class=\"line\"><span class=\"symbol\">domain:</span> <span class=\"string\">\"http://myleolan.github.io\"</span> <span class=\"comment\">#你的github网址  the domain URL for your site</span></div><div class=\"line\"><span class=\"symbol\">base:</span> <span class=\"string\">\"\"</span>  <span class=\"comment\"># the relative path that different with domain so you can test locally</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Source URL <span class=\"doctag\">NOTE:</span> end with / cause it's [URL + FILE]</span></div><div class=\"line\"><span class=\"symbol\">w3c_url:</span> <span class=\"string\">\"/w3c/\"</span>  <span class=\"comment\"># the base url of css js and images</span></div><div class=\"line\"><span class=\"symbol\">postImage_url:</span> <span class=\"string\">\"/w3c/images/\"</span> <span class=\"comment\"># the base url of post images</span></div><div class=\"line\"><span class=\"symbol\">postfile:</span> <span class=\"string\">\"/db/Postfile\"</span> <span class=\"comment\"># the Database</span></div><div class=\"line\"><span class=\"symbol\">sitefile:</span> <span class=\"string\">\"/db/Sitefile\"</span> <span class=\"comment\"># the Database</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 3rd URL</span></div><div class=\"line\"><span class=\"symbol\">duoshuo_short_name:</span> <span class=\"string\">\"leolan\"</span> <span class=\"comment\"># 注册多说是填写的网址前缀 the user of user.domain.com </span></div><div class=\"line\"><span class=\"symbol\">duoshuo_user_uid:</span> <span class=\"string\">\"a61c3f290749b621688a3f42c7e8e31c\"</span> <span class=\"comment\">#多说的uid   the admin user uid  </span></div><div class=\"line\"><span class=\"symbol\">duoshuo_user_name:</span> <span class=\"string\">\"leolan\"</span> <span class=\"comment\">#多说的用户名 the admin user names   </span></div><div class=\"line\"><span class=\"symbol\">duoshuo_max_depth:</span> <span class=\"string\">\"2\"</span>  <span class=\"comment\"># the max_depth setting in duoshuo comments</span></div><div class=\"line\"><span class=\"symbol\">duoshuo_url:</span> <span class=\"string\">\"/w3c/duoshuo/embed.min.js\"</span> <span class=\"comment\"># the local duoshuo comment plugin, you can change it to remote \"http://static.duoshuo.com/\"</span></div><div class=\"line\"><span class=\"symbol\">jquery_url:</span> <span class=\"string\">\"http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js\"</span> <span class=\"comment\"># use cdn</span></div><div class=\"line\"><span class=\"symbol\">baiduTemplate_url:</span> <span class=\"string\">\"/w3c/js/baiduTemplate.js\"</span> <span class=\"comment\">#use local</span></div><div class=\"line\"><span class=\"symbol\">google_analytics_id:</span> <span class=\"string\">\"UA-86334360-1\"</span>  <span class=\"comment\">#Google分析</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Build Settings</span></div><div class=\"line\"><span class=\"symbol\">excerpt_separator:</span> <span class=\"string\">\"\\n\\n\"</span> <span class=\"comment\"># you can specify your own separator here, default is \"\\n\\n\" String</span></div><div class=\"line\"><span class=\"symbol\">permalink:</span> /<span class=\"symbol\">:year/</span><span class=\"symbol\">:month/</span><span class=\"symbol\">:day/</span><span class=\"symbol\">:title</span>.html   <span class=\"comment\">#生成html文件的命名方式</span></div><div class=\"line\"><span class=\"symbol\">highlighter:</span> rouge   <span class=\"comment\">#代码高亮</span></div><div class=\"line\"><span class=\"symbol\">markdown:</span> kramdown   <span class=\"comment\">#markdown文档处理器</span></div><div class=\"line\"><span class=\"symbol\">kramdown:</span></div><div class=\"line\">  <span class=\"symbol\">input:</span> GFM</div><div class=\"line\">  <span class=\"symbol\">hard_wrap:</span> <span class=\"keyword\">true</span> <span class=\"comment\"># a newline in markdown text would be changed to &lt;br&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#插件（需要包含的插件）</span></div><div class=\"line\"><span class=\"symbol\">gems:</span></div><div class=\"line\">  - jemoji</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">lsi:</span> BOOL   <span class=\"comment\">#建立文件索引</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">####---------------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\">#以下为github的默认设置</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Following is got in Github Help With Configuring Jekyll</span></div><div class=\"line\"><span class=\"comment\"># Github Page Default Settings which you can override:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># kramdown:</span></div><div class=\"line\"><span class=\"comment\">#   input: GFM</span></div><div class=\"line\"><span class=\"comment\">#   hard_wrap: false</span></div><div class=\"line\"><span class=\"comment\"># gems:</span></div><div class=\"line\"><span class=\"comment\">#   - jekyll-coffeescript</span></div><div class=\"line\"><span class=\"comment\">#   - jekyll-paginate</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Github Page override the following settings which you cannot change:</span></div><div class=\"line\"><span class=\"comment\"># lsi: false</span></div><div class=\"line\"><span class=\"comment\"># safe: true    #安全方式，禁用所有插件</span></div><div class=\"line\"><span class=\"comment\"># source: [your repo's top level directory]</span></div><div class=\"line\"><span class=\"comment\"># incremental: false</span></div><div class=\"line\"><span class=\"comment\"># highlighter: rouge</span></div><div class=\"line\"><span class=\"comment\"># gist:</span></div><div class=\"line\"><span class=\"comment\">#  noscript: false</span></div><div class=\"line\"><span class=\"comment\"># kramdown:</span></div><div class=\"line\"><span class=\"comment\">#  math_engine: mathjax</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"自动生成文件模板\"><a href=\"#自动生成文件模板\" class=\"headerlink\" title=\"自动生成文件模板\"></a>自动生成文件模板</h2><p>前面说到的带yml信息的文件头<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"attr\">layout:</span> post</div><div class=\"line\"><span class=\"attr\">title:</span>  <span class=\"string\">\"第一篇博客\"</span></div><div class=\"line\"><span class=\"attr\">date:</span>   <span class=\"number\">2016</span>/<span class=\"number\">10</span>/<span class=\"number\">26</span> <span class=\"number\">13</span>:<span class=\"number\">03</span>:<span class=\"number\">42</span></div><div class=\"line\"><span class=\"attr\">categories:</span> 文章阅读</div><div class=\"line\"><span class=\"attr\">tag:</span> 第一篇博客,jekyll搭建博客</div><div class=\"line\"><span class=\"meta\">---</span></div></pre></td></tr></table></figure></p>\n<p>文件头可以自动生成，而不用每次都手工码字，在网站根目录下创建Rakefile文件（ruby的一中脚本配置文件）<br>里面填入代码：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\">task <span class=\"symbol\">:default</span> =&gt; <span class=\"symbol\">:new</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">require</span> <span class=\"string\">'fileutils'</span></div><div class=\"line\"></div><div class=\"line\">desc <span class=\"string\">\"创建新 post\"</span></div><div class=\"line\">task <span class=\"symbol\">:new</span> <span class=\"keyword\">do</span></div><div class=\"line\">  puts <span class=\"string\">\"请输入要创建的.md文件名：\"</span></div><div class=\"line\">  @url = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 文章 标题：\"</span></div><div class=\"line\">  @name = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 文章 子标题：\"</span></div><div class=\"line\">  @subtitle = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 文章 分类，以空格分隔：\"</span></div><div class=\"line\">  @categories = STDIN.gets.chomp</div><div class=\"line\">  puts <span class=\"string\">\"请输入 博客分类 标签，以空格分隔：\"</span></div><div class=\"line\">  @tag = STDIN.gets.chomp</div><div class=\"line\">  @slug = <span class=\"string\">\"<span class=\"subst\">#&#123;@url&#125;</span>\"</span></div><div class=\"line\">  @slug = @slug.downcase.strip.gsub(<span class=\"string\">' '</span>, <span class=\"string\">'-'</span>)</div><div class=\"line\">  @date = Time.now.strftime(<span class=\"string\">\"%F\"</span>)</div><div class=\"line\">  @post_name = <span class=\"string\">\"_posts/<span class=\"subst\">#&#123;@date&#125;</span>-<span class=\"subst\">#&#123;@slug&#125;</span>.md\"</span></div><div class=\"line\">  <span class=\"keyword\">if</span> File.exist?(@post_name)</div><div class=\"line\">      abort(<span class=\"string\">\"文件名已经存在！创建失败\"</span>)</div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  FileUtils.touch(@post_name)</div><div class=\"line\">  open(@post_name, <span class=\"string\">'a'</span>) <span class=\"keyword\">do</span> <span class=\"params\">|file|</span></div><div class=\"line\">      file.puts <span class=\"string\">\"---\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"layout: post\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"title: <span class=\"subst\">#&#123;@name&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"subtitle: <span class=\"subst\">#&#123;@subtitle&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"author: Leo Lan\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"date: <span class=\"subst\">#&#123;Time.now&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"categories: <span class=\"subst\">#&#123;@categories&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"tag: <span class=\"subst\">#&#123;@tag&#125;</span>\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"published: true\"</span></div><div class=\"line\">      file.puts <span class=\"string\">\"---\"</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\">  exec <span class=\"string\">\"vim <span class=\"subst\">#&#123;@post_name&#125;</span>\"</span></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p><strong>layout</strong>表示使用的是post布局，title是文章标题，<br><strong>date</strong>是自动生成的日期，<br><strong>subtitle</strong>是副标题<br><strong>categories</strong>是该文章生成html文件后存放的目录（分类），可以去_site/jekyll/update下找到对应日期下面的html文档。当然你也可以只设置jekyll单一的目录，甚至是更多级别的目录，用空格分开即可。<strong>tag</strong>是文章的标签。<br><strong>published</strong>表示是否发布文章<br>下次在命令行输入<code>rake new</code>按提示一步一步就能创建一个很好的文件啦，剩下的只需要专心写作就好了。</p>\n<p>参考：<a href=\"http://www.liubaicai.net/articles/733/\">http://www.liubaicai.net/articles/733/</a></p>\n<hr>\n<h1 id=\"用Github-Pages生成个人博客\"><a href=\"#用Github-Pages生成个人博客\" class=\"headerlink\" title=\"用Github Pages生成个人博客\"></a>用Github Pages生成个人博客</h1><p>Github Pages生成网站的两种方式的基本原理</p>\n<h2 id=\"法一：\"><a href=\"#法一：\" class=\"headerlink\" title=\"法一：\"></a>法一：</h2><p>在Github上有一个账号，名为 username （任意），有一个项目，名为 username.github.io （固定格式，username与账号名一致），项目分支名为 <strong>master</strong> （默认固定），这个分支有类似下面的目录结构：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A203.png\" alt=\"\"><br>当你访问 <a href=\"http://username.github.io/\">http://username.github.io/</a> 时，Github会使用Jekyll解析用户 username 名下的 username.github.io 项目中，分支为 master 的源代码，为你构建一个静态网站，并将生成的 index.html 展示给你。</p>\n<h2 id=\"法二：\"><a href=\"#法二：\" class=\"headerlink\" title=\"法二：\"></a>法二：</h2><p>在Github上有一个账号，名为 username （任意），有一个项目，名为 blog （任意），项目分支名为 <strong>gh-pages </strong>（固定），这个分支也有上面那种结构。<br>那么当你访问 <a href=\"http://username.github.io/blog\">http://username.github.io/blog</a> 时，Github会去解析 username 用户下，project 项目的 gh-pages 分支下的源代码，为你构建网站。</p>\n<p>所以要搭建自己的博客你有两种选择：</p>\n<ul>\n<li>建立名为 username.github.io 的项目，在 master 分支下存放网站源代码</li>\n<li>建立名为 blog 的项目，在 gh-pages 分支下存放网站源代码<br>考虑到第一种项目名复杂不方便同步等，这里用第二种方法，方便管理。<br>新建一个仓库，名称随意，ReadMe.md文件随意，不懂的查看教程第4节“创建远程仓库”：<a href=\"https://www.leolan.top/posts/41310/\">git教程</a></li>\n</ul>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A204.png\" alt=\"\"><br>翻到下面，选择<strong>Launch automatic page generator</strong><br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A205.png\" alt=\"\"><br>再接着编译一下内容，点<strong>Continue to layouts</strong><br>选好模板，点击<strong>Publish page</strong>，就生成了Github Pages，并且，分支自动设置为了gh-pages。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E7%94%A8Jekyll%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A206.png\" alt=\"\"></p>\n<p>打开网站看看效果：<a href=\"https://myleolan.github.io/blog/\">https://myleolan.github.io/blog/</a><br>以后本地写好的文章，jekyll bundle之后就可以推送到gh-pages分支即可。推送博客到github推荐用命令行，Windows版的客户端不熟悉容易误操作。 博客源码和发布的博客网页在同一个仓库中，可以共同存放。（Hexo是生成的网站和博客原文分开存放的）</p>\n<h1 id=\"Github-Pages环境本地化\"><a href=\"#Github-Pages环境本地化\" class=\"headerlink\" title=\"Github Pages环境本地化\"></a>Github Pages环境本地化</h1><p>上面搭建的只是Jekyll的本地环境，当push到Github Pages后环境会有所变化，为了本地看到的效果和托管在Github Pages看到的效果一致，我们最好搭建本地的Github Pages环境。<br>ruby要2.0.0以上版本，如果<code>ruby --version</code>查看版本低于2.0.0，那么需要升级ruby。<br>安装ruby工具集管理工具Bundler （前面安装过了就不用安装了）<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem <span class=\"keyword\">install </span><span class=\"keyword\">bundler</div><div class=\"line\"></span><span class=\"keyword\">bundler </span>-v</div></pre></td></tr></table></figure></p>\n<p>进入jekyll创建的网站目录<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git init                      <span class=\"comment\">#把当前目录加入版本库中</span></div><div class=\"line\">git checkout -<span class=\"keyword\">b </span>gh-pages      <span class=\"comment\">#创建gh-pages分支，用于推送到github上的gh-pages分支上。</span></div></pre></td></tr></table></figure></p>\n<p>创建<strong>Gemfile</strong>文件 如果本生有Gemfile和Gemfile.lock那就删除掉，内容如下：<br><figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">source <span class=\"string\">'https://ruby.taobao.org'</span>  <span class=\"meta\">#(淘宝源，国内比较快)</span></div><div class=\"line\">gem <span class=\"string\">'github-pages'</span>, <span class=\"keyword\">group</span>: :jekyll_plugins</div><div class=\"line\">或</div><div class=\"line\">source <span class=\"string\">'https://rubygems.org'</span>   <span class=\"meta\">#(官方源)</span></div><div class=\"line\">gem <span class=\"string\">'github-pages'</span>, <span class=\"keyword\">group</span>: :jekyll_plugins</div></pre></td></tr></table></figure></p>\n<p>执行下面的命令安装Github Pages的工具集<strong>（在网站根目录，就是Gemfile文件的路径）</strong><br><code>bundle install</code><br>运行起来（一开始创建了网站就可以直接跑起来啦，如果没有创建网站，创建或fork别人的。）<br><code>bundle exec jekyll serve</code></p>\n<p>如果出现<strong>bundle exec jekyll serve</strong>能启动，而<strong>jekyll serve</strong>不能启动，则删除Gemfile和Gemfile.lock重新运行jekyll serve即可。<br>更多Github Pages本地化环境搭建，可参考官方文档:<a href=\"https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/\">https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/</a></p>\n<p>注意：如果是是下载了别人的模板进行修改，只把文件拷到自己项目中进行添加就可以了，不要全选把<strong>.git</strong>文件夹也拷过了，别人的分支和自己的不同时会出现各种问题。</p>\n<p>调试好各种东西后就可以推送到Github了。</p>\n<ol>\n<li>用markdown写文章，并按规定名称格式保存在_posts里。</li>\n<li>用<code>jekyll serve –watch</code>或<code>bundle exec jekyll server</code>启动服务器，在浏览器里查看。(指定端口在<strong>_config.yml</strong>文件中增加<code>port: xxxx</code>)</li>\n<li>用git客户端推送到远程仓库里。</li>\n<li>通过域名访问。</li>\n</ol>\n<hr>\n<h1 id=\"绑定域名\"><a href=\"#绑定域名\" class=\"headerlink\" title=\"绑定域名\"></a>绑定域名</h1><p>原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。</p>\n<ul>\n<li>1· 在你的项目下新建一个<strong>CNAME</strong>文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是<strong> www.leolan.top</strong>和<strong> leolan.top</strong>（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送<strong>CNAME文件</strong>到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在<strong>CNAME文件</strong>里绑定两个，在Pages页面也绑定两个。</li>\n<li>2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 <code>username.github.io.</code>，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png\" alt=\"\"><br>过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的<strong>CNAME</strong>文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。</li>\n</ul>\n<hr>\n"},{"title":"GitLab服务器搭建","abbrlink":22149,"date":"2016-11-10T07:57:58.000Z","_content":"\n---\n**[一键安装 gitlab并设置邮件发送](http://lib.csdn.net/article/git/47824)**(简单教程)\n\n\n\n---\n本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！\n\n# 安装 GitLab\nGitLab   下载：http://www.gitlab.cc/downloads/\nGitLab 中文文档：http://doc.gitlab.cc\n安装方式官方有详细说明，这里使用Centos 6安装，其他系统参考官方文档。\n\n```\n#切换到root用户登录\nyum -y install curl openssh-server openssh-clients postfix cronie\nservice postfix start\nchkconfig postfix on\n\n#这句是用来做防火墙的。避免用户通过ssh方式和http来访问\nsudo lokkit -s http -s ssh```\n\n## 添加GitLab仓库,并安装到服务器上\n```\n第一步：\ncurl -sS http://packages.gitlab.cc/install/gitlab-ce/script.rpm.sh | sudo bash\nyum -y install gitlab-ce\n\n或者使用国内的镜像源：\nvim /etc/yum.repos.d/gitlab-ce.repo\n[gitlab-ce]\nname=gitlab-ce\nbaseurl=http://mirrors.lifetoy.org/gitlab-ce/yum/el6\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key\n\nyum -y install gitlab-ce\n\n或者使用\nvim /etc/yum.repos.d/gitlab-ce.repo\n[gitlab-ce]\nname=gitlab-ce\nbaseurl=http://mirrors.lifetoy.org/gitlab-ce/yum/el6/\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key\n\nyum -y install gitlab-ce\n\n-----------------------------------------------------------------------------------------\n\n第二步：\nrpm -ivh https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6/gitlab-ce-8.9.6-ce.0.el6.x86_64.rpm\n#截至到7.16为止，8.9.6版本还没有中文汉化版\n\n或者\nrpm -ivh http://mirrors.lifetoy.org/gitlab-ce/yum/el6/gitlab-ce-8.8.7-ce.1.el6.x86_64.rpm\n```\n查看gitlab-ce安装的软件包：`rpm -ql gitlab-ce |more`\n\n## 启动gitLab\n`sudo gitlab-ctl reconfigure`\n\n\n---\n\n# 使用mysql数据库代替gitlab-ce\n## 添加yum仓库源\n```\nwget -P /etc/yum.repos.d  http://mirrors.aliyun.com/repo/Centos-6.repo  #Centos7 源不一样，官网找。\nyum -y install mysql mysql-server mysql-devel gcc```\n\n## 初始化mysql\n设定root用户密码为：12345gitlab\n```\n/etc/init.d/mysqld start\n/usr/bin/mysqladmin -u root password '12345gitlab'```\n\n## 创建gitlab相关的数据库\n创建gitlab用户，并设定密码为：gitlab12345aa\n```\nmysql -uroot -p'12345gitlab'\ncreate user 'gitlab'@'%' identified by 'gitlab12345aa';\nset storage_engine=innodb;\ncreate database if not exists `gitlabhq_production` default character set `utf8` collate `utf8_unicode_ci`;\ngrant select,insert,update,delete,create,create temporary tables,drop,index,alter,lock tables on `gitlabhq_production`.* to 'gitlab'@'%';```\n\n## 删除用户名为空的主机，并刷新mysql权限\n```\nmysql -uroot -p'12345gitlab' mysql -e \"delete from user where user='';flush privileges;\"```\n\n## 测试gitlab用户连接数据库\n```\nmysql -h127.0.0.1 -ugitlab -p'gitlab12345aa'```\n\ngitlab配置文件：`vim /etc/gitlab/gitlab.rb`\ngitlab_rails['db_adapter'] = \"mysql2\"\ngitlab_rails['db_encoding'] = \"utf8\"\ngitlab_rails['db_database'] = \"gitlabhq_production\"\ngitlab_rails['db_pool'] = 10\ngitlab_rails['db_username'] = \"gitlab\"\ngitlab_rails['db_password'] = \"**gitlab12345aa**\"\ngitlab_rails['db_host'] = \"127.0.0.1\"\ngitlab_rails['db_port'] = 3306\npostgresql['enable'] = false\n\n```\nvim /opt/gitlab/embedded/service/gitlab-rails/.bundle/config```\n---\nBUNDLE_RETRY: 5\nBUNDLE_PATH: \"/opt/gitlab/embedded/service/gem\"\nBUNDLE_JOBS: 9\n`BUNDLE_WITHOUT: development:test:postgres`\nBUNDLE_DISABLE_SHARED_GEMS: '1'\n\n```\ncd /opt/gitlab/embedded/service/gitlab-rails\n/opt/gitlab/embedded/bin/bundle install\ngitlab-ctl reconfigure\ngitlab-ctl restart\ngitlab-rake gitlab:setup```\n到此gitlab-ce更换成mysql完成。\n\n打开http://IP/ 即可访问，首次访问GitLab,系统会让你重新设置管理员的密码,设置成功后会返回登录界面.\n默认的管理员账号是root,如果你想更改默认管理员账号,请输入上面设置的新密码登录系统后修改帐号名\n\n---\n\n# 修改gitlab通过域名访问：\n```\nvim /etc/gitlab/gitlab.rb\nexternal_url 'http://your.domain'```\n\n重启配置\n`sudo gitlab-ctl reconfigure`\n\n实时查看所有执行日志\n`gitlab-ctl tail`\n\n查看版本：`cat /opt/gitlab/embedded/service/gitlab-rails/VERSION`\n\n/var/opt/gitlab/gitlab-workhorse\n/opt/gitlab/embedded/service/gitlab-rails/public\n/opt/gitlab/etc/gitlab-workhorse\n\n/var/log/gitlab/gitlab-workhorse\n\n配置文件路径：\n/var/opt/gitlab/nginx\n/var/opt/gitlab/nginx/conf/nginx.conf\n/var/opt/gitlab/nginx/conf/gitlab-http.conf\n\n\n---\n# 汉化\n## 法一\n中文社区：https://gitlab.com/larryli/gitlab\n确认gitlab版本与当前汉化版本的 VERSION 是否相同，当前最新的汉化版本为 8.13.5 。\n如果安装版本小于当前汉化版本，请先升级。如果安装版本大于当前汉化版本，请在[项目](https://gitlab.com/larryli/gitlab/issues)中提交新的 issue。\n如果版本相同，首先在本地clone仓库。\n\n### 下载汉化补丁包\n* 1.先停止gitlab\n`gitlab-ctl stop`\n* 2.克隆gitLab.com仓库，有中文补丁\n`git clone https://gitlab.com/xhang/gitlab.git   #注意对应的版本地址不同`\n\n或gitcafe.com镜像，速度更快，暂时不支持中文补丁\n`git clone https://git.oschina.net/qiai365/gitlab-ce.git`\n或者\n`git clone https://git.oschina.net/johnwu/gitlab-zh.git`\n\n```\ncd gitlab\ngit branch -a |tac```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/gitlab%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA1.png)\n8.8版本的汉化补丁（8-8-stable是英文稳定版，8-8-zh是中文版，两个diff结果便是汉化补丁）\ngit diff origin/8-8-stable origin/8-8-zh > /tmp/8.8.diff\n\n### 应用汉化补丁\n```\ncd /opt/gitlab/embedded/service/gitlab-rails\ngit apply /tmp/8.8.diff```\n\n启动gitlab：`gitlab-ctl start`\n\n## 法二\n```\nwget https://gitlab.com/larryli/gitlab/repository/archive.zip?ref=8-7-zh\nunzip gitlab-8-7-zh-faeea0c584b042eaa433ed6c82335fe0c124af97.zip\ncd gitlab-8-7-zh-faeea0c584b042eaa433ed6c82335fe0c124af97\nsudo gitlab-ctl reconfigure\nsudo gitlab-ctl restart```\n\n---\n# 最后配置\n```\nvim  /etc/gitlab/gitlab.rb\nvim /opt/gitlab/embedded/service/gitlab-rails/config/environments/production.rb\nvim /var/opt/gitlab/gitlab-rails/etc/smtp_settings.rb\nvim /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml\ntime_zone: Asia/Shanghai\nvim /opt/gitlab/embedded/service/gitlab-rails/config/environments/development.rb```\n\n* 1.设置存放代码库的主目录：`vim /etc/gitlab/gitlab.rb`\n默认是在**/var/opt/gitlab/git-data**下\n`git_data_dir \"/var/opt/gitlab/git-data\"`\n\n* 2.访问刚搭建的GitLab站点，创建一个**group**，比如**devusers**。\n这时会在**/var/opt/gitlab/git-data**下创建**/var/opt/gitlab/git-data/devusers**文件夹。\n然后在**/var/opt/gitlab/git-data/repositories/**创建一个文件夹，比如**devusers**\n\n* 3.将现有的所有git项目文件复制到这个文件夹\n`cp -r /data/git/*  /var/opt/gitlab/git-data/devusers`\n\n* 4.修改一下复制过来的文件夹的所有者：\n`chown -R git:git /var/opt/gitlab/git-data/devusers`\n\n```\ncd /var/opt/gitlab\ngitlab-rake gitlab:import:repos```\n\ngitlab仓库地址\n```\n/var/opt/gitlab/git-data/repositories\nsudo vi /etc/gitlab/gitlab.rb\ngit_data_dir```\n\n\n---\n\n\n\n\n\n\n","source":"_posts/环境搭建/2016-11-10-GitLab服务器搭建.md","raw":"---\ntitle: GitLab服务器搭建\ncategories:\n  - 环境搭建\ntags:\n  - GitLab\n  - 版本控制\nabbrlink: 22149\ndate: 2016-11-10 15:57:58\n---\n\n---\n**[一键安装 gitlab并设置邮件发送](http://lib.csdn.net/article/git/47824)**(简单教程)\n\n\n\n---\n本节是根据[烂泥大神](http://www.ilanni.com/)分享的笔记摘录的！\n\n# 安装 GitLab\nGitLab   下载：http://www.gitlab.cc/downloads/\nGitLab 中文文档：http://doc.gitlab.cc\n安装方式官方有详细说明，这里使用Centos 6安装，其他系统参考官方文档。\n\n```\n#切换到root用户登录\nyum -y install curl openssh-server openssh-clients postfix cronie\nservice postfix start\nchkconfig postfix on\n\n#这句是用来做防火墙的。避免用户通过ssh方式和http来访问\nsudo lokkit -s http -s ssh```\n\n## 添加GitLab仓库,并安装到服务器上\n```\n第一步：\ncurl -sS http://packages.gitlab.cc/install/gitlab-ce/script.rpm.sh | sudo bash\nyum -y install gitlab-ce\n\n或者使用国内的镜像源：\nvim /etc/yum.repos.d/gitlab-ce.repo\n[gitlab-ce]\nname=gitlab-ce\nbaseurl=http://mirrors.lifetoy.org/gitlab-ce/yum/el6\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key\n\nyum -y install gitlab-ce\n\n或者使用\nvim /etc/yum.repos.d/gitlab-ce.repo\n[gitlab-ce]\nname=gitlab-ce\nbaseurl=http://mirrors.lifetoy.org/gitlab-ce/yum/el6/\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key\n\nyum -y install gitlab-ce\n\n-----------------------------------------------------------------------------------------\n\n第二步：\nrpm -ivh https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6/gitlab-ce-8.9.6-ce.0.el6.x86_64.rpm\n#截至到7.16为止，8.9.6版本还没有中文汉化版\n\n或者\nrpm -ivh http://mirrors.lifetoy.org/gitlab-ce/yum/el6/gitlab-ce-8.8.7-ce.1.el6.x86_64.rpm\n```\n查看gitlab-ce安装的软件包：`rpm -ql gitlab-ce |more`\n\n## 启动gitLab\n`sudo gitlab-ctl reconfigure`\n\n\n---\n\n# 使用mysql数据库代替gitlab-ce\n## 添加yum仓库源\n```\nwget -P /etc/yum.repos.d  http://mirrors.aliyun.com/repo/Centos-6.repo  #Centos7 源不一样，官网找。\nyum -y install mysql mysql-server mysql-devel gcc```\n\n## 初始化mysql\n设定root用户密码为：12345gitlab\n```\n/etc/init.d/mysqld start\n/usr/bin/mysqladmin -u root password '12345gitlab'```\n\n## 创建gitlab相关的数据库\n创建gitlab用户，并设定密码为：gitlab12345aa\n```\nmysql -uroot -p'12345gitlab'\ncreate user 'gitlab'@'%' identified by 'gitlab12345aa';\nset storage_engine=innodb;\ncreate database if not exists `gitlabhq_production` default character set `utf8` collate `utf8_unicode_ci`;\ngrant select,insert,update,delete,create,create temporary tables,drop,index,alter,lock tables on `gitlabhq_production`.* to 'gitlab'@'%';```\n\n## 删除用户名为空的主机，并刷新mysql权限\n```\nmysql -uroot -p'12345gitlab' mysql -e \"delete from user where user='';flush privileges;\"```\n\n## 测试gitlab用户连接数据库\n```\nmysql -h127.0.0.1 -ugitlab -p'gitlab12345aa'```\n\ngitlab配置文件：`vim /etc/gitlab/gitlab.rb`\ngitlab_rails['db_adapter'] = \"mysql2\"\ngitlab_rails['db_encoding'] = \"utf8\"\ngitlab_rails['db_database'] = \"gitlabhq_production\"\ngitlab_rails['db_pool'] = 10\ngitlab_rails['db_username'] = \"gitlab\"\ngitlab_rails['db_password'] = \"**gitlab12345aa**\"\ngitlab_rails['db_host'] = \"127.0.0.1\"\ngitlab_rails['db_port'] = 3306\npostgresql['enable'] = false\n\n```\nvim /opt/gitlab/embedded/service/gitlab-rails/.bundle/config```\n---\nBUNDLE_RETRY: 5\nBUNDLE_PATH: \"/opt/gitlab/embedded/service/gem\"\nBUNDLE_JOBS: 9\n`BUNDLE_WITHOUT: development:test:postgres`\nBUNDLE_DISABLE_SHARED_GEMS: '1'\n\n```\ncd /opt/gitlab/embedded/service/gitlab-rails\n/opt/gitlab/embedded/bin/bundle install\ngitlab-ctl reconfigure\ngitlab-ctl restart\ngitlab-rake gitlab:setup```\n到此gitlab-ce更换成mysql完成。\n\n打开http://IP/ 即可访问，首次访问GitLab,系统会让你重新设置管理员的密码,设置成功后会返回登录界面.\n默认的管理员账号是root,如果你想更改默认管理员账号,请输入上面设置的新密码登录系统后修改帐号名\n\n---\n\n# 修改gitlab通过域名访问：\n```\nvim /etc/gitlab/gitlab.rb\nexternal_url 'http://your.domain'```\n\n重启配置\n`sudo gitlab-ctl reconfigure`\n\n实时查看所有执行日志\n`gitlab-ctl tail`\n\n查看版本：`cat /opt/gitlab/embedded/service/gitlab-rails/VERSION`\n\n/var/opt/gitlab/gitlab-workhorse\n/opt/gitlab/embedded/service/gitlab-rails/public\n/opt/gitlab/etc/gitlab-workhorse\n\n/var/log/gitlab/gitlab-workhorse\n\n配置文件路径：\n/var/opt/gitlab/nginx\n/var/opt/gitlab/nginx/conf/nginx.conf\n/var/opt/gitlab/nginx/conf/gitlab-http.conf\n\n\n---\n# 汉化\n## 法一\n中文社区：https://gitlab.com/larryli/gitlab\n确认gitlab版本与当前汉化版本的 VERSION 是否相同，当前最新的汉化版本为 8.13.5 。\n如果安装版本小于当前汉化版本，请先升级。如果安装版本大于当前汉化版本，请在[项目](https://gitlab.com/larryli/gitlab/issues)中提交新的 issue。\n如果版本相同，首先在本地clone仓库。\n\n### 下载汉化补丁包\n* 1.先停止gitlab\n`gitlab-ctl stop`\n* 2.克隆gitLab.com仓库，有中文补丁\n`git clone https://gitlab.com/xhang/gitlab.git   #注意对应的版本地址不同`\n\n或gitcafe.com镜像，速度更快，暂时不支持中文补丁\n`git clone https://git.oschina.net/qiai365/gitlab-ce.git`\n或者\n`git clone https://git.oschina.net/johnwu/gitlab-zh.git`\n\n```\ncd gitlab\ngit branch -a |tac```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/gitlab%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA1.png)\n8.8版本的汉化补丁（8-8-stable是英文稳定版，8-8-zh是中文版，两个diff结果便是汉化补丁）\ngit diff origin/8-8-stable origin/8-8-zh > /tmp/8.8.diff\n\n### 应用汉化补丁\n```\ncd /opt/gitlab/embedded/service/gitlab-rails\ngit apply /tmp/8.8.diff```\n\n启动gitlab：`gitlab-ctl start`\n\n## 法二\n```\nwget https://gitlab.com/larryli/gitlab/repository/archive.zip?ref=8-7-zh\nunzip gitlab-8-7-zh-faeea0c584b042eaa433ed6c82335fe0c124af97.zip\ncd gitlab-8-7-zh-faeea0c584b042eaa433ed6c82335fe0c124af97\nsudo gitlab-ctl reconfigure\nsudo gitlab-ctl restart```\n\n---\n# 最后配置\n```\nvim  /etc/gitlab/gitlab.rb\nvim /opt/gitlab/embedded/service/gitlab-rails/config/environments/production.rb\nvim /var/opt/gitlab/gitlab-rails/etc/smtp_settings.rb\nvim /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml\ntime_zone: Asia/Shanghai\nvim /opt/gitlab/embedded/service/gitlab-rails/config/environments/development.rb```\n\n* 1.设置存放代码库的主目录：`vim /etc/gitlab/gitlab.rb`\n默认是在**/var/opt/gitlab/git-data**下\n`git_data_dir \"/var/opt/gitlab/git-data\"`\n\n* 2.访问刚搭建的GitLab站点，创建一个**group**，比如**devusers**。\n这时会在**/var/opt/gitlab/git-data**下创建**/var/opt/gitlab/git-data/devusers**文件夹。\n然后在**/var/opt/gitlab/git-data/repositories/**创建一个文件夹，比如**devusers**\n\n* 3.将现有的所有git项目文件复制到这个文件夹\n`cp -r /data/git/*  /var/opt/gitlab/git-data/devusers`\n\n* 4.修改一下复制过来的文件夹的所有者：\n`chown -R git:git /var/opt/gitlab/git-data/devusers`\n\n```\ncd /var/opt/gitlab\ngitlab-rake gitlab:import:repos```\n\ngitlab仓库地址\n```\n/var/opt/gitlab/git-data/repositories\nsudo vi /etc/gitlab/gitlab.rb\ngit_data_dir```\n\n\n---\n\n\n\n\n\n\n","slug":"环境搭建-2016-11-10-GitLab服务器搭建","published":1,"updated":"2016-11-21T02:17:09.067Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjni002nd8pkhfaobzxm","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><hr>\n<p><strong><a href=\"http://lib.csdn.net/article/git/47824\" target=\"_blank\" rel=\"external\">一键安装 gitlab并设置邮件发送</a></strong>(简单教程)</p>\n<hr>\n<p>本节是根据<a href=\"http://www.ilanni.com/\" target=\"_blank\" rel=\"external\">烂泥大神</a>分享的笔记摘录的！</p>\n<h1 id=\"安装-GitLab\"><a href=\"#安装-GitLab\" class=\"headerlink\" title=\"安装 GitLab\"></a>安装 GitLab</h1><p>GitLab   下载：<a href=\"http://www.gitlab.cc/downloads/\" target=\"_blank\" rel=\"external\">http://www.gitlab.cc/downloads/</a><br>GitLab 中文文档：<a href=\"http://doc.gitlab.cc\" target=\"_blank\" rel=\"external\">http://doc.gitlab.cc</a><br>安装方式官方有详细说明，这里使用Centos 6安装，其他系统参考官方文档。</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#切换到root用户登录</span></div><div class=\"line\">yum -y install curl openssh-server openssh-clients postfix cronie</div><div class=\"line\">service postfix <span class=\"built_in\">start</span></div><div class=\"line\">chkconfig postfix <span class=\"keyword\">on</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#这句是用来做防火墙的。避免用户通过ssh方式和http来访问</span></div><div class=\"line\">sudo lokkit -s <span class=\"keyword\">http</span> -s ssh</div></pre></td></tr></table></figure>\n<h2 id=\"添加GitLab仓库-并安装到服务器上\"><a href=\"#添加GitLab仓库-并安装到服务器上\" class=\"headerlink\" title=\"添加GitLab仓库,并安装到服务器上\"></a>添加GitLab仓库,并安装到服务器上</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">第一步：</div><div class=\"line\">curl -sS http://packages.gitlab.<span class=\"keyword\">cc</span>/install/gitlab-<span class=\"keyword\">ce</span>/script.rpm.<span class=\"keyword\">sh</span> | sudo bash</div><div class=\"line\">yum -<span class=\"keyword\">y</span> install gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\"></div><div class=\"line\">或者使用国内的镜像源：</div><div class=\"line\"><span class=\"keyword\">vim</span> /etc/yum.repos.d/gitlab-<span class=\"keyword\">ce</span>.repo</div><div class=\"line\">[gitlab-<span class=\"keyword\">ce</span>]</div><div class=\"line\">name=gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\">baseurl=http://mirrors.lifetoy.org/gitlab-<span class=\"keyword\">ce</span>/yum/el6</div><div class=\"line\">repo_gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\">gpgkey=http<span class=\"variable\">s:</span>//packages.gitlab.<span class=\"keyword\">com</span>/gpg.key</div><div class=\"line\"></div><div class=\"line\">yum -<span class=\"keyword\">y</span> install gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\"></div><div class=\"line\">或者使用</div><div class=\"line\"><span class=\"keyword\">vim</span> /etc/yum.repos.d/gitlab-<span class=\"keyword\">ce</span>.repo</div><div class=\"line\">[gitlab-<span class=\"keyword\">ce</span>]</div><div class=\"line\">name=gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\">baseurl=http://mirrors.lifetoy.org/gitlab-<span class=\"keyword\">ce</span>/yum/el6/</div><div class=\"line\">repo_gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\">gpgkey=http<span class=\"variable\">s:</span>//packages.gitlab.<span class=\"keyword\">com</span>/gpg.key</div><div class=\"line\"></div><div class=\"line\">yum -<span class=\"keyword\">y</span> install gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\"></div><div class=\"line\">-----------------------------------------------------------------------------------------</div><div class=\"line\"></div><div class=\"line\">第二步：</div><div class=\"line\">rpm -ivh http<span class=\"variable\">s:</span>//mirrors.tuna.tsinghua.edu.<span class=\"keyword\">cn</span>/gitlab-<span class=\"keyword\">ce</span>/yum/el6/gitlab-<span class=\"keyword\">ce</span>-<span class=\"number\">8.9</span>.<span class=\"number\">6</span>-<span class=\"keyword\">ce</span>.<span class=\"number\">0</span>.el6.x86_64.rpm</div><div class=\"line\">#截至到<span class=\"number\">7.16</span>为止，<span class=\"number\">8.9</span>.<span class=\"number\">6</span>版本还没有中文汉化版</div><div class=\"line\"></div><div class=\"line\">或者</div><div class=\"line\">rpm -ivh http://mirrors.lifetoy.org/gitlab-<span class=\"keyword\">ce</span>/yum/el6/gitlab-<span class=\"keyword\">ce</span>-<span class=\"number\">8.8</span>.<span class=\"number\">7</span>-<span class=\"keyword\">ce</span>.<span class=\"number\">1</span>.el6.x86_64.rpm</div></pre></td></tr></table></figure>\n<p>查看gitlab-ce安装的软件包：<code>rpm -ql gitlab-ce |more</code></p>\n<h2 id=\"启动gitLab\"><a href=\"#启动gitLab\" class=\"headerlink\" title=\"启动gitLab\"></a>启动gitLab</h2><p><code>sudo gitlab-ctl reconfigure</code></p>\n<hr>\n<h1 id=\"使用mysql数据库代替gitlab-ce\"><a href=\"#使用mysql数据库代替gitlab-ce\" class=\"headerlink\" title=\"使用mysql数据库代替gitlab-ce\"></a>使用mysql数据库代替gitlab-ce</h1><h2 id=\"添加yum仓库源\"><a href=\"#添加yum仓库源\" class=\"headerlink\" title=\"添加yum仓库源\"></a>添加yum仓库源</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -P <span class=\"regexp\">/etc/yum</span>.repos.d  http:<span class=\"regexp\">//mi</span>rrors.aliyun.com<span class=\"regexp\">/repo/</span>Centos-<span class=\"number\">6</span>.repo  <span class=\"comment\">#Centos7 源不一样，官网找。</span></div><div class=\"line\">yum -y install mysql mysql-server mysql-devel gcc</div></pre></td></tr></table></figure>\n<h2 id=\"初始化mysql\"><a href=\"#初始化mysql\" class=\"headerlink\" title=\"初始化mysql\"></a>初始化mysql</h2><p>设定root用户密码为：12345gitlab<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/mysqld <span class=\"keyword\">start</span></div><div class=\"line\">/usr/<span class=\"keyword\">bin</span>/mysqladmin -u root <span class=\"keyword\">password</span> <span class=\"string\">'12345gitlab'</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"创建gitlab相关的数据库\"><a href=\"#创建gitlab相关的数据库\" class=\"headerlink\" title=\"创建gitlab相关的数据库\"></a>创建gitlab相关的数据库</h2><p>创建gitlab用户，并设定密码为：gitlab12345aa<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -uroot -p'12345gitlab'</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">user</span> <span class=\"string\">'gitlab'</span>@<span class=\"string\">'%'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'gitlab12345aa'</span>;</div><div class=\"line\"><span class=\"keyword\">set</span> storage_engine=<span class=\"keyword\">innodb</span>;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"keyword\">exists</span> <span class=\"string\">`gitlabhq_production`</span> <span class=\"keyword\">default</span> <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> <span class=\"string\">`utf8`</span> <span class=\"keyword\">collate</span> <span class=\"string\">`utf8_unicode_ci`</span>;</div><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">select</span>,<span class=\"keyword\">insert</span>,<span class=\"keyword\">update</span>,<span class=\"keyword\">delete</span>,<span class=\"keyword\">create</span>,<span class=\"keyword\">create</span> <span class=\"keyword\">temporary</span> <span class=\"keyword\">tables</span>,<span class=\"keyword\">drop</span>,<span class=\"keyword\">index</span>,<span class=\"keyword\">alter</span>,<span class=\"keyword\">lock</span> <span class=\"keyword\">tables</span> <span class=\"keyword\">on</span> <span class=\"string\">`gitlabhq_production`</span>.* <span class=\"keyword\">to</span> <span class=\"string\">'gitlab'</span>@<span class=\"string\">'%'</span>;</div></pre></td></tr></table></figure></p>\n<h2 id=\"删除用户名为空的主机，并刷新mysql权限\"><a href=\"#删除用户名为空的主机，并刷新mysql权限\" class=\"headerlink\" title=\"删除用户名为空的主机，并刷新mysql权限\"></a>删除用户名为空的主机，并刷新mysql权限</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -uroot -p'12345gitlab' mysql -e \"<span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span>=<span class=\"string\">''</span>;<span class=\"keyword\">flush</span> <span class=\"keyword\">privileges</span>;\"</div></pre></td></tr></table></figure>\n<h2 id=\"测试gitlab用户连接数据库\"><a href=\"#测试gitlab用户连接数据库\" class=\"headerlink\" title=\"测试gitlab用户连接数据库\"></a>测试gitlab用户连接数据库</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -h127<span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span> -ugitlab -p'gitlab12345aa'</div></pre></td></tr></table></figure>\n<p>gitlab配置文件：<code>vim /etc/gitlab/gitlab.rb</code><br>gitlab_rails[‘db_adapter’] = “mysql2”<br>gitlab_rails[‘db_encoding’] = “utf8”<br>gitlab_rails[‘db_database’] = “gitlabhq_production”<br>gitlab_rails[‘db_pool’] = 10<br>gitlab_rails[‘db_username’] = “gitlab”<br>gitlab_rails[‘db_password’] = “<strong>gitlab12345aa</strong>“<br>gitlab_rails[‘db_host’] = “127.0.0.1”<br>gitlab_rails[‘db_port’] = 3306<br>postgresql[‘enable’] = false</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim <span class=\"regexp\">/opt/gi</span>tlab<span class=\"regexp\">/embedded/</span>service<span class=\"regexp\">/gitlab-rails/</span>.bundle<span class=\"regexp\">/config</span></div></pre></td></tr></table></figure>\n<hr>\n<p>BUNDLE_RETRY: 5<br>BUNDLE_PATH: “/opt/gitlab/embedded/service/gem”<br>BUNDLE_JOBS: 9<br><code>BUNDLE_WITHOUT: development:test:postgres</code><br>BUNDLE_DISABLE_SHARED_GEMS: ‘1’</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"regexp\">/opt/</span>gitlab<span class=\"regexp\">/embedded/</span>service/gitlab-rails</div><div class=\"line\"><span class=\"regexp\">/opt/</span>gitlab<span class=\"regexp\">/embedded/</span>bin/bundle install</div><div class=\"line\">gitlab-ctl reconfigure</div><div class=\"line\">gitlab-ctl restart</div><div class=\"line\">gitlab-rake <span class=\"string\">gitlab:</span>setup</div></pre></td></tr></table></figure>\n<p>到此gitlab-ce更换成mysql完成。</p>\n<p>打开<a href=\"http://IP/\" target=\"_blank\" rel=\"external\">http://IP/</a> 即可访问，首次访问GitLab,系统会让你重新设置管理员的密码,设置成功后会返回登录界面.<br>默认的管理员账号是root,如果你想更改默认管理员账号,请输入上面设置的新密码登录系统后修改帐号名</p>\n<hr>\n<h1 id=\"修改gitlab通过域名访问：\"><a href=\"#修改gitlab通过域名访问：\" class=\"headerlink\" title=\"修改gitlab通过域名访问：\"></a>修改gitlab通过域名访问：</h1><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/gitlab/gitlab.rb</div><div class=\"line\">external_url <span class=\"symbol\">'http</span>:<span class=\"comment\">//your.domain'</span></div></pre></td></tr></table></figure>\n<p>重启配置<br><code>sudo gitlab-ctl reconfigure</code></p>\n<p>实时查看所有执行日志<br><code>gitlab-ctl tail</code></p>\n<p>查看版本：<code>cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</code></p>\n<p>/var/opt/gitlab/gitlab-workhorse<br>/opt/gitlab/embedded/service/gitlab-rails/public<br>/opt/gitlab/etc/gitlab-workhorse</p>\n<p>/var/log/gitlab/gitlab-workhorse</p>\n<p>配置文件路径：<br>/var/opt/gitlab/nginx<br>/var/opt/gitlab/nginx/conf/nginx.conf<br>/var/opt/gitlab/nginx/conf/gitlab-http.conf</p>\n<hr>\n<h1 id=\"汉化\"><a href=\"#汉化\" class=\"headerlink\" title=\"汉化\"></a>汉化</h1><h2 id=\"法一\"><a href=\"#法一\" class=\"headerlink\" title=\"法一\"></a>法一</h2><p>中文社区：<a href=\"https://gitlab.com/larryli/gitlab\" target=\"_blank\" rel=\"external\">https://gitlab.com/larryli/gitlab</a><br>确认gitlab版本与当前汉化版本的 VERSION 是否相同，当前最新的汉化版本为 8.13.5 。<br>如果安装版本小于当前汉化版本，请先升级。如果安装版本大于当前汉化版本，请在<a href=\"https://gitlab.com/larryli/gitlab/issues\" target=\"_blank\" rel=\"external\">项目</a>中提交新的 issue。<br>如果版本相同，首先在本地clone仓库。</p>\n<h3 id=\"下载汉化补丁包\"><a href=\"#下载汉化补丁包\" class=\"headerlink\" title=\"下载汉化补丁包\"></a>下载汉化补丁包</h3><ul>\n<li>1.先停止gitlab<br><code>gitlab-ctl stop</code></li>\n<li>2.克隆gitLab.com仓库，有中文补丁<br><code>git clone https://gitlab.com/xhang/gitlab.git   #注意对应的版本地址不同</code></li>\n</ul>\n<p>或gitcafe.com镜像，速度更快，暂时不支持中文补丁<br><code>git clone https://git.oschina.net/qiai365/gitlab-ce.git</code><br>或者<br><code>git clone https://git.oschina.net/johnwu/gitlab-zh.git</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> gitlab</div><div class=\"line\">git branch <span class=\"_\">-a</span> |tac</div></pre></td></tr></table></figure>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/gitlab%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA1.png\" alt=\"\"><br>8.8版本的汉化补丁（8-8-stable是英文稳定版，8-8-zh是中文版，两个diff结果便是汉化补丁）<br>git diff origin/8-8-stable origin/8-8-zh &gt; /tmp/8.8.diff</p>\n<h3 id=\"应用汉化补丁\"><a href=\"#应用汉化补丁\" class=\"headerlink\" title=\"应用汉化补丁\"></a>应用汉化补丁</h3><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service/gitlab-rails</div><div class=\"line\">git apply <span class=\"meta-keyword\">/tmp/</span><span class=\"number\">8.8</span>.diff</div></pre></td></tr></table></figure>\n<p>启动gitlab：<code>gitlab-ctl start</code></p>\n<h2 id=\"法二\"><a href=\"#法二\" class=\"headerlink\" title=\"法二\"></a>法二</h2><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget https://gitlab.com/larryli/gitlab/repository/archive.zip?ref=8<span class=\"string\">-7</span>-zh</div><div class=\"line\">unzip gitlab<span class=\"string\">-8</span><span class=\"string\">-7</span>-zh-faeea0c584b042eaa433ed6c82335fe0c124af97.zip</div><div class=\"line\">cd gitlab<span class=\"string\">-8</span><span class=\"string\">-7</span>-zh-faeea0c584b042eaa433ed6c82335fe0c124af97</div><div class=\"line\">sudo gitlab-ctl reconfigure</div><div class=\"line\">sudo gitlab-ctl restart</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"最后配置\"><a href=\"#最后配置\" class=\"headerlink\" title=\"最后配置\"></a>最后配置</h1><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim  <span class=\"meta-keyword\">/etc/</span>gitlab/gitlab.rb</div><div class=\"line\">vim <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service<span class=\"meta-keyword\">/gitlab-rails/</span>config<span class=\"meta-keyword\">/environments/</span>production.rb</div><div class=\"line\">vim <span class=\"meta-keyword\">/var/</span>opt<span class=\"meta-keyword\">/gitlab/</span>gitlab-rails<span class=\"meta-keyword\">/etc/</span>smtp_settings.rb</div><div class=\"line\">vim <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service<span class=\"meta-keyword\">/gitlab-rails/</span>config/gitlab.yml</div><div class=\"line\"><span class=\"symbol\">time_zone:</span> Asia/Shanghai</div><div class=\"line\">vim <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service<span class=\"meta-keyword\">/gitlab-rails/</span>config<span class=\"meta-keyword\">/environments/</span>development.rb</div></pre></td></tr></table></figure>\n<ul>\n<li><p>1.设置存放代码库的主目录：<code>vim /etc/gitlab/gitlab.rb</code><br>默认是在<strong>/var/opt/gitlab/git-data</strong>下<br><code>git_data_dir &quot;/var/opt/gitlab/git-data&quot;</code></p>\n</li>\n<li><p>2.访问刚搭建的GitLab站点，创建一个<strong>group</strong>，比如<strong>devusers</strong>。<br>这时会在<strong>/var/opt/gitlab/git-data</strong>下创建<strong>/var/opt/gitlab/git-data/devusers</strong>文件夹。<br>然后在<strong>/var/opt/gitlab/git-data/repositories/</strong>创建一个文件夹，比如<strong>devusers</strong></p>\n</li>\n<li><p>3.将现有的所有git项目文件复制到这个文件夹<br><code>cp -r /data/git/*  /var/opt/gitlab/git-data/devusers</code></p>\n</li>\n<li><p>4.修改一下复制过来的文件夹的所有者：<br><code>chown -R git:git /var/opt/gitlab/git-data/devusers</code></p>\n</li>\n</ul>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"regexp\">/var/</span>opt/gitlab</div><div class=\"line\">gitlab-rake <span class=\"string\">gitlab:</span><span class=\"string\">import:</span>repos</div></pre></td></tr></table></figure>\n<p>gitlab仓库地址<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/var/</span>opt<span class=\"meta-keyword\">/gitlab/</span>git-data/repositories</div><div class=\"line\">sudo vi <span class=\"meta-keyword\">/etc/</span>gitlab/gitlab.rb</div><div class=\"line\">git_data_dir</div></pre></td></tr></table></figure></p>\n<hr>\n","excerpt":"","more":"<hr>\n<p><strong><a href=\"http://lib.csdn.net/article/git/47824\">一键安装 gitlab并设置邮件发送</a></strong>(简单教程)</p>\n<hr>\n<p>本节是根据<a href=\"http://www.ilanni.com/\">烂泥大神</a>分享的笔记摘录的！</p>\n<h1 id=\"安装-GitLab\"><a href=\"#安装-GitLab\" class=\"headerlink\" title=\"安装 GitLab\"></a>安装 GitLab</h1><p>GitLab   下载：<a href=\"http://www.gitlab.cc/downloads/\">http://www.gitlab.cc/downloads/</a><br>GitLab 中文文档：<a href=\"http://doc.gitlab.cc\">http://doc.gitlab.cc</a><br>安装方式官方有详细说明，这里使用Centos 6安装，其他系统参考官方文档。</p>\n<figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#切换到root用户登录</span></div><div class=\"line\">yum -y install curl openssh-server openssh-clients postfix cronie</div><div class=\"line\">service postfix <span class=\"built_in\">start</span></div><div class=\"line\">chkconfig postfix <span class=\"keyword\">on</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#这句是用来做防火墙的。避免用户通过ssh方式和http来访问</span></div><div class=\"line\">sudo lokkit -s <span class=\"keyword\">http</span> -s ssh</div></pre></td></tr></table></figure>\n<h2 id=\"添加GitLab仓库-并安装到服务器上\"><a href=\"#添加GitLab仓库-并安装到服务器上\" class=\"headerlink\" title=\"添加GitLab仓库,并安装到服务器上\"></a>添加GitLab仓库,并安装到服务器上</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">第一步：</div><div class=\"line\">curl -sS http://packages.gitlab.<span class=\"keyword\">cc</span>/install/gitlab-<span class=\"keyword\">ce</span>/script.rpm.<span class=\"keyword\">sh</span> | sudo bash</div><div class=\"line\">yum -<span class=\"keyword\">y</span> install gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\"></div><div class=\"line\">或者使用国内的镜像源：</div><div class=\"line\"><span class=\"keyword\">vim</span> /etc/yum.repos.d/gitlab-<span class=\"keyword\">ce</span>.repo</div><div class=\"line\">[gitlab-<span class=\"keyword\">ce</span>]</div><div class=\"line\">name=gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\">baseurl=http://mirrors.lifetoy.org/gitlab-<span class=\"keyword\">ce</span>/yum/el6</div><div class=\"line\">repo_gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\">gpgkey=http<span class=\"variable\">s:</span>//packages.gitlab.<span class=\"keyword\">com</span>/gpg.key</div><div class=\"line\"></div><div class=\"line\">yum -<span class=\"keyword\">y</span> install gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\"></div><div class=\"line\">或者使用</div><div class=\"line\"><span class=\"keyword\">vim</span> /etc/yum.repos.d/gitlab-<span class=\"keyword\">ce</span>.repo</div><div class=\"line\">[gitlab-<span class=\"keyword\">ce</span>]</div><div class=\"line\">name=gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\">baseurl=http://mirrors.lifetoy.org/gitlab-<span class=\"keyword\">ce</span>/yum/el6/</div><div class=\"line\">repo_gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">gpgcheck=<span class=\"number\">0</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\">gpgkey=http<span class=\"variable\">s:</span>//packages.gitlab.<span class=\"keyword\">com</span>/gpg.key</div><div class=\"line\"></div><div class=\"line\">yum -<span class=\"keyword\">y</span> install gitlab-<span class=\"keyword\">ce</span></div><div class=\"line\"></div><div class=\"line\">-----------------------------------------------------------------------------------------</div><div class=\"line\"></div><div class=\"line\">第二步：</div><div class=\"line\">rpm -ivh http<span class=\"variable\">s:</span>//mirrors.tuna.tsinghua.edu.<span class=\"keyword\">cn</span>/gitlab-<span class=\"keyword\">ce</span>/yum/el6/gitlab-<span class=\"keyword\">ce</span>-<span class=\"number\">8.9</span>.<span class=\"number\">6</span>-<span class=\"keyword\">ce</span>.<span class=\"number\">0</span>.el6.x86_64.rpm</div><div class=\"line\">#截至到<span class=\"number\">7.16</span>为止，<span class=\"number\">8.9</span>.<span class=\"number\">6</span>版本还没有中文汉化版</div><div class=\"line\"></div><div class=\"line\">或者</div><div class=\"line\">rpm -ivh http://mirrors.lifetoy.org/gitlab-<span class=\"keyword\">ce</span>/yum/el6/gitlab-<span class=\"keyword\">ce</span>-<span class=\"number\">8.8</span>.<span class=\"number\">7</span>-<span class=\"keyword\">ce</span>.<span class=\"number\">1</span>.el6.x86_64.rpm</div></pre></td></tr></table></figure>\n<p>查看gitlab-ce安装的软件包：<code>rpm -ql gitlab-ce |more</code></p>\n<h2 id=\"启动gitLab\"><a href=\"#启动gitLab\" class=\"headerlink\" title=\"启动gitLab\"></a>启动gitLab</h2><p><code>sudo gitlab-ctl reconfigure</code></p>\n<hr>\n<h1 id=\"使用mysql数据库代替gitlab-ce\"><a href=\"#使用mysql数据库代替gitlab-ce\" class=\"headerlink\" title=\"使用mysql数据库代替gitlab-ce\"></a>使用mysql数据库代替gitlab-ce</h1><h2 id=\"添加yum仓库源\"><a href=\"#添加yum仓库源\" class=\"headerlink\" title=\"添加yum仓库源\"></a>添加yum仓库源</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -P <span class=\"regexp\">/etc/yum</span>.repos.d  http:<span class=\"regexp\">//mi</span>rrors.aliyun.com<span class=\"regexp\">/repo/</span>Centos-<span class=\"number\">6</span>.repo  <span class=\"comment\">#Centos7 源不一样，官网找。</span></div><div class=\"line\">yum -y install mysql mysql-server mysql-devel gcc</div></pre></td></tr></table></figure>\n<h2 id=\"初始化mysql\"><a href=\"#初始化mysql\" class=\"headerlink\" title=\"初始化mysql\"></a>初始化mysql</h2><p>设定root用户密码为：12345gitlab<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/mysqld <span class=\"keyword\">start</span></div><div class=\"line\">/usr/<span class=\"keyword\">bin</span>/mysqladmin -u root <span class=\"keyword\">password</span> <span class=\"string\">'12345gitlab'</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"创建gitlab相关的数据库\"><a href=\"#创建gitlab相关的数据库\" class=\"headerlink\" title=\"创建gitlab相关的数据库\"></a>创建gitlab相关的数据库</h2><p>创建gitlab用户，并设定密码为：gitlab12345aa<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -uroot -p'12345gitlab'</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">user</span> <span class=\"string\">'gitlab'</span>@<span class=\"string\">'%'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'gitlab12345aa'</span>;</div><div class=\"line\"><span class=\"keyword\">set</span> storage_engine=<span class=\"keyword\">innodb</span>;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"keyword\">exists</span> <span class=\"string\">`gitlabhq_production`</span> <span class=\"keyword\">default</span> <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> <span class=\"string\">`utf8`</span> <span class=\"keyword\">collate</span> <span class=\"string\">`utf8_unicode_ci`</span>;</div><div class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">select</span>,<span class=\"keyword\">insert</span>,<span class=\"keyword\">update</span>,<span class=\"keyword\">delete</span>,<span class=\"keyword\">create</span>,<span class=\"keyword\">create</span> <span class=\"keyword\">temporary</span> <span class=\"keyword\">tables</span>,<span class=\"keyword\">drop</span>,<span class=\"keyword\">index</span>,<span class=\"keyword\">alter</span>,<span class=\"keyword\">lock</span> <span class=\"keyword\">tables</span> <span class=\"keyword\">on</span> <span class=\"string\">`gitlabhq_production`</span>.* <span class=\"keyword\">to</span> <span class=\"string\">'gitlab'</span>@<span class=\"string\">'%'</span>;</div></pre></td></tr></table></figure></p>\n<h2 id=\"删除用户名为空的主机，并刷新mysql权限\"><a href=\"#删除用户名为空的主机，并刷新mysql权限\" class=\"headerlink\" title=\"删除用户名为空的主机，并刷新mysql权限\"></a>删除用户名为空的主机，并刷新mysql权限</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -uroot -p'12345gitlab' mysql -e \"<span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> <span class=\"keyword\">user</span> <span class=\"keyword\">where</span> <span class=\"keyword\">user</span>=<span class=\"string\">''</span>;<span class=\"keyword\">flush</span> <span class=\"keyword\">privileges</span>;\"</div></pre></td></tr></table></figure>\n<h2 id=\"测试gitlab用户连接数据库\"><a href=\"#测试gitlab用户连接数据库\" class=\"headerlink\" title=\"测试gitlab用户连接数据库\"></a>测试gitlab用户连接数据库</h2><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql -h127<span class=\"number\">.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span> -ugitlab -p'gitlab12345aa'</div></pre></td></tr></table></figure>\n<p>gitlab配置文件：<code>vim /etc/gitlab/gitlab.rb</code><br>gitlab_rails[‘db_adapter’] = “mysql2”<br>gitlab_rails[‘db_encoding’] = “utf8”<br>gitlab_rails[‘db_database’] = “gitlabhq_production”<br>gitlab_rails[‘db_pool’] = 10<br>gitlab_rails[‘db_username’] = “gitlab”<br>gitlab_rails[‘db_password’] = “<strong>gitlab12345aa</strong>“<br>gitlab_rails[‘db_host’] = “127.0.0.1”<br>gitlab_rails[‘db_port’] = 3306<br>postgresql[‘enable’] = false</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim <span class=\"regexp\">/opt/gi</span>tlab<span class=\"regexp\">/embedded/</span>service<span class=\"regexp\">/gitlab-rails/</span>.bundle<span class=\"regexp\">/config</span></div></pre></td></tr></table></figure>\n<hr>\n<p>BUNDLE_RETRY: 5<br>BUNDLE_PATH: “/opt/gitlab/embedded/service/gem”<br>BUNDLE_JOBS: 9<br><code>BUNDLE_WITHOUT: development:test:postgres</code><br>BUNDLE_DISABLE_SHARED_GEMS: ‘1’</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"regexp\">/opt/</span>gitlab<span class=\"regexp\">/embedded/</span>service/gitlab-rails</div><div class=\"line\"><span class=\"regexp\">/opt/</span>gitlab<span class=\"regexp\">/embedded/</span>bin/bundle install</div><div class=\"line\">gitlab-ctl reconfigure</div><div class=\"line\">gitlab-ctl restart</div><div class=\"line\">gitlab-rake <span class=\"string\">gitlab:</span>setup</div></pre></td></tr></table></figure>\n<p>到此gitlab-ce更换成mysql完成。</p>\n<p>打开<a href=\"http://IP/\">http://IP/</a> 即可访问，首次访问GitLab,系统会让你重新设置管理员的密码,设置成功后会返回登录界面.<br>默认的管理员账号是root,如果你想更改默认管理员账号,请输入上面设置的新密码登录系统后修改帐号名</p>\n<hr>\n<h1 id=\"修改gitlab通过域名访问：\"><a href=\"#修改gitlab通过域名访问：\" class=\"headerlink\" title=\"修改gitlab通过域名访问：\"></a>修改gitlab通过域名访问：</h1><figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/gitlab/gitlab.rb</div><div class=\"line\">external_url <span class=\"symbol\">'http</span>:<span class=\"comment\">//your.domain'</span></div></pre></td></tr></table></figure>\n<p>重启配置<br><code>sudo gitlab-ctl reconfigure</code></p>\n<p>实时查看所有执行日志<br><code>gitlab-ctl tail</code></p>\n<p>查看版本：<code>cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</code></p>\n<p>/var/opt/gitlab/gitlab-workhorse<br>/opt/gitlab/embedded/service/gitlab-rails/public<br>/opt/gitlab/etc/gitlab-workhorse</p>\n<p>/var/log/gitlab/gitlab-workhorse</p>\n<p>配置文件路径：<br>/var/opt/gitlab/nginx<br>/var/opt/gitlab/nginx/conf/nginx.conf<br>/var/opt/gitlab/nginx/conf/gitlab-http.conf</p>\n<hr>\n<h1 id=\"汉化\"><a href=\"#汉化\" class=\"headerlink\" title=\"汉化\"></a>汉化</h1><h2 id=\"法一\"><a href=\"#法一\" class=\"headerlink\" title=\"法一\"></a>法一</h2><p>中文社区：<a href=\"https://gitlab.com/larryli/gitlab\">https://gitlab.com/larryli/gitlab</a><br>确认gitlab版本与当前汉化版本的 VERSION 是否相同，当前最新的汉化版本为 8.13.5 。<br>如果安装版本小于当前汉化版本，请先升级。如果安装版本大于当前汉化版本，请在<a href=\"https://gitlab.com/larryli/gitlab/issues\">项目</a>中提交新的 issue。<br>如果版本相同，首先在本地clone仓库。</p>\n<h3 id=\"下载汉化补丁包\"><a href=\"#下载汉化补丁包\" class=\"headerlink\" title=\"下载汉化补丁包\"></a>下载汉化补丁包</h3><ul>\n<li>1.先停止gitlab<br><code>gitlab-ctl stop</code></li>\n<li>2.克隆gitLab.com仓库，有中文补丁<br><code>git clone https://gitlab.com/xhang/gitlab.git   #注意对应的版本地址不同</code></li>\n</ul>\n<p>或gitcafe.com镜像，速度更快，暂时不支持中文补丁<br><code>git clone https://git.oschina.net/qiai365/gitlab-ce.git</code><br>或者<br><code>git clone https://git.oschina.net/johnwu/gitlab-zh.git</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> gitlab</div><div class=\"line\">git branch <span class=\"_\">-a</span> |tac</div></pre></td></tr></table></figure>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/gitlab%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA1.png\" alt=\"\"><br>8.8版本的汉化补丁（8-8-stable是英文稳定版，8-8-zh是中文版，两个diff结果便是汉化补丁）<br>git diff origin/8-8-stable origin/8-8-zh &gt; /tmp/8.8.diff</p>\n<h3 id=\"应用汉化补丁\"><a href=\"#应用汉化补丁\" class=\"headerlink\" title=\"应用汉化补丁\"></a>应用汉化补丁</h3><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service/gitlab-rails</div><div class=\"line\">git apply <span class=\"meta-keyword\">/tmp/</span><span class=\"number\">8.8</span>.diff</div></pre></td></tr></table></figure>\n<p>启动gitlab：<code>gitlab-ctl start</code></p>\n<h2 id=\"法二\"><a href=\"#法二\" class=\"headerlink\" title=\"法二\"></a>法二</h2><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget https://gitlab.com/larryli/gitlab/repository/archive.zip?ref=8<span class=\"string\">-7</span>-zh</div><div class=\"line\">unzip gitlab<span class=\"string\">-8</span><span class=\"string\">-7</span>-zh-faeea0c584b042eaa433ed6c82335fe0c124af97.zip</div><div class=\"line\">cd gitlab<span class=\"string\">-8</span><span class=\"string\">-7</span>-zh-faeea0c584b042eaa433ed6c82335fe0c124af97</div><div class=\"line\">sudo gitlab-ctl reconfigure</div><div class=\"line\">sudo gitlab-ctl restart</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"最后配置\"><a href=\"#最后配置\" class=\"headerlink\" title=\"最后配置\"></a>最后配置</h1><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim  <span class=\"meta-keyword\">/etc/</span>gitlab/gitlab.rb</div><div class=\"line\">vim <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service<span class=\"meta-keyword\">/gitlab-rails/</span>config<span class=\"meta-keyword\">/environments/</span>production.rb</div><div class=\"line\">vim <span class=\"meta-keyword\">/var/</span>opt<span class=\"meta-keyword\">/gitlab/</span>gitlab-rails<span class=\"meta-keyword\">/etc/</span>smtp_settings.rb</div><div class=\"line\">vim <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service<span class=\"meta-keyword\">/gitlab-rails/</span>config/gitlab.yml</div><div class=\"line\"><span class=\"symbol\">time_zone:</span> Asia/Shanghai</div><div class=\"line\">vim <span class=\"meta-keyword\">/opt/</span>gitlab<span class=\"meta-keyword\">/embedded/</span>service<span class=\"meta-keyword\">/gitlab-rails/</span>config<span class=\"meta-keyword\">/environments/</span>development.rb</div></pre></td></tr></table></figure>\n<ul>\n<li><p>1.设置存放代码库的主目录：<code>vim /etc/gitlab/gitlab.rb</code><br>默认是在<strong>/var/opt/gitlab/git-data</strong>下<br><code>git_data_dir &quot;/var/opt/gitlab/git-data&quot;</code></p>\n</li>\n<li><p>2.访问刚搭建的GitLab站点，创建一个<strong>group</strong>，比如<strong>devusers</strong>。<br>这时会在<strong>/var/opt/gitlab/git-data</strong>下创建<strong>/var/opt/gitlab/git-data/devusers</strong>文件夹。<br>然后在<strong>/var/opt/gitlab/git-data/repositories/</strong>创建一个文件夹，比如<strong>devusers</strong></p>\n</li>\n<li><p>3.将现有的所有git项目文件复制到这个文件夹<br><code>cp -r /data/git/*  /var/opt/gitlab/git-data/devusers</code></p>\n</li>\n<li><p>4.修改一下复制过来的文件夹的所有者：<br><code>chown -R git:git /var/opt/gitlab/git-data/devusers</code></p>\n</li>\n</ul>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"regexp\">/var/</span>opt/gitlab</div><div class=\"line\">gitlab-rake <span class=\"string\">gitlab:</span><span class=\"string\">import:</span>repos</div></pre></td></tr></table></figure>\n<p>gitlab仓库地址<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/var/</span>opt<span class=\"meta-keyword\">/gitlab/</span>git-data/repositories</div><div class=\"line\">sudo vi <span class=\"meta-keyword\">/etc/</span>gitlab/gitlab.rb</div><div class=\"line\">git_data_dir</div></pre></td></tr></table></figure></p>\n<hr>\n"},{"title":"Tomcat","abbrlink":55324,"date":"2016-11-19T13:33:42.000Z","_content":"\n# 安装tomcat\n需要有JDK环境。系统中已安装gcc、automake等编译工具。\n参考：[java jdk环境搭建](http://www.leolan.top/posts/59/)\n\ntomcat官网下载：http://tomcat.apache.org/download-90.cgi\n\n---\n## 下载解压\n这里就指定了安装目录是**/usr/local/tomcat**，后面都要用这个目录，也可以是/opt等其他目录。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/tomcat001.png)\n```\ncd /usr/local\nwget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-9/v9.0.0.M13/bin/apache-tomcat-9.0.0.M13.tar.gz\ntar zxvf apache-tomcat-9.0.0.M13.tar.gz\nmv apache-tomcat-9.0.0.M13 tomcat\n```\n\n---\n## 编译守护程序\n```\ncd /tomcat/bin/\ntar zxvf commons-daemon-native.tar.gz\n#进入解压出来的目录，一般是commons-daemon-X.X.XX-native-src这个文件夹\ncd commons-daemon-1.0.10-native-src/unix\n./configure\nmake     #生成jsvc守护程序\ncp jsvc /usr/local/tomcat/bin\n```\n这里如果**./configure**失败(提示找不到jdk路径，是因为jdk环境变量没有配置好)可以用**./configure \\--with-java=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64**(JAVA_HOME)临时代替（这是我的JDK安装目录）。\n\n---\n## 设置环境变量\n这里注意不要写错了，一旦写错，大多数命令基本都会失效，必须手工指定路径运行命令修改\n`/usr/bin/vim /etc/profile`然后注销或重启生效。\n\n编辑文件：`vim /etc/profile`加入**tomcat**路径；和**/tomcat/bin**路径。\n注意格式，一般有两种，一种是每引用一个变量就**export**一下，像这种：\n```\nexport CATALINA_HOME=/usr/local/tomcat/\nexport PATH=$CATALINA_HOME/bin  #这里注意PATH,变量不能重复出现，相同的路径要合并，前面加\":\"```\n还有一种是合并起来写，像这样：\n```\nCATALINA_HOME=/usr/local/tomcat/   #这一句新加的\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin:$CATALINA_HOME/bin   #这里增加了（:$CATALINA_HOME/bin）\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH CATALINA_HOME      #这里增加了（CATALINA_HOME）\n```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/tomcat002.png)\n使配置立刻生效：`source /etc/profile`或`. /etc/profile`\n\n---\n## 修改守护程序\n在tomcat/bin目录里面有一个daemon.sh 这个文件就是**启动和关闭tomcat的服务守候程序**。\n\n注意：之前的一些tomcat版本,例如tomcat 6.0.x, 可能没有这个文件, 其实这个文件就是放在**commons-daemon-x.x.x-native-src/unix/samples/Tomcat7.sh**这儿的（此目录还有一个Tomcat5.sh），只不过新版本的tomcat把它移动到了bin目录下，并取名为**daemon.sh**了。所以，如果您使用的是tomcat 6，那就把这个Tomcat7.sh文件复制到bin目录下，并取名为daemon.sh即可。\n\n修改daemon环境变量：`cd /usr/local/tomcat/bin && vim ./daemon.sh`\n修改**TOMCAT_USER=tomcat**为您要指定身份运行的linux账号用户名,此处指定用户名为tomcat(一般不改或新建其他用户，不用现成的用户，要禁止登陆)。并把**JAVA_HOME=...**前面的注释（即“#”号）去掉，并设置为jdk的安装目录路径。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/tomcat003.png)\n修改好保存退出。创建用户、修改权限。\n```\nuseradd -M tomcat                   #创建没有主目录的tomcat用户\nchsh tomcat -s /sbin/nologin        #禁止tomcat登陆操作，类似于windows的系统账户\nchown -R tomcat /usr/local/tomcat   #将/usr/local/tomcat下的所有档案与子目录进行相同的拥有者变更为tomcat\nchmod +x /usr/local/tomcat/bin/*.sh #为tomcat/bin/目录下的*.sh添加相应的x权限\n```\n\n---\n## 防火墙、开机自启\n\n```\nvim /etc/sysconfig/iptables\n#加入下面这句，注意加到22端口下，不要加在-A INPUT -j REJECT语句之后，会失效。\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT   #tomcat默认端口是8080\nservice iptables restart   #重启防火墙\ncd /usr/local/tomcat/bin\n./startup.sh                 #启动tomcat\n./daemon.sh  start           #启动守护程序\ncurl http://localhost:8080   #测试一下是否启动\n```\n如果daemon.sh启动不了，重点查验tomcat的bin目录下的*.sh是否有x可执行权限、linux帐号是否有tomcat目录的读写权限，是否有tomcat/logs日志目录的写权限等等。\n\n\n**添加tomcat为Linux的服务**，需要创建一个软链到/etc/init.d/目录中\n```\nln -s /usr/local/tomcat/bin/daemon.sh /etc/init.d/tomcat\n#现在就可以用系统服务来启动停止tomcat服务啦。\n/etc/init.d/tomcat  start #启动tomcat\nservice tomcat start      #启动tomcat\n/etc/init.d/tomcat  stop  #关闭tomcat\nservice tomcat stop       #关闭tomcat```\n\n---\n设置**tomcat服务开机启动**，\n法1.在**daemon.sh**中增加以下的语句：\n```\n#!/bin/sh      #这句是原文件里有的，下面的2句是要添加的,是有#号的。\n# chkconfig: 2345 90 15\n# description: Tomcat-en Manager```\n再运行 chkconfig命令增加tomcat服务，而达到自启动(只有上一步“**添加tomcat为Linux的服务**”生效了这一步才能执行，否则报错)\n```\nchkconfig --add tomcat```\n\n\n法2.**修改/etc/rc.d/rc.local**\n在/etc/rc.d/rc.local文件最后添加下面两句\n```\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\n/usr/local/tomcat/bin/startup.sh start\n或\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\n/usr/local/tomcat/bin/catalina.sh start\n```\n增加可执行权限：`chmod +x /etc/rc.d/rc.local`\n\n关于catalina.sh启动文件，参考：[catalina.sh详解](http://www.cnblogs.com/huzhiwei/archive/2012/03/13/2393393.html)\n\n---\n如果想再创建一个tomcat服务，只需要将/usr/local/tomcat这个目录复制一份，例如：\n```\ncp /usr/local/tomcat /usr/local/tomcat1```\n\n再修改一下tomcat1的端口号(**/usr/local/tomcat/opt/tomcat1/conf/server.xml**中的端口号不能与其它的服务重复)。最后从上面所述\"**设置环境变量**\"开始，一直往下，设置新用户，创建用户，修改权限，设置防火墙，新建服务tomcat1，设置开机自启，就OK啦。\n通过这种方式，您就可以为一台Linux服务器创建任意多个tomcat服务了。最后只需要安装一个前端服务器（例如Nginx或Apache），将不同域名的请求转发到不同的tomcat服务程序就可以了。\n\n参考：\n\n[Linux下Apache与多个Tomcat 集群负载均衡](http://www.linuxidc.com/Linux/2012-01/51731.htm)\n\n[Nginx Tomcat 集群负载均衡解决笔记](http://www.linuxidc.com/Linux/2013-07/86827.htm)\n\n[Tomcat组件安装+Nginx反向代理Tomcat+Apache使用mod_jk和mod_proxy反向代理和负载均衡](http://www.linuxidc.com/Linux/2013-06/85290.htm)\n\n---\n\n\n\n\n\n\n","source":"_posts/环境搭建/2016-11-19-Tomcat.md","raw":"---\ntitle: Tomcat\ncategories:\n  - 环境搭建\ntags:\n  - Tomcat\nabbrlink: 55324\ndate: 2016-11-19 21:33:42\n---\n\n# 安装tomcat\n需要有JDK环境。系统中已安装gcc、automake等编译工具。\n参考：[java jdk环境搭建](http://www.leolan.top/posts/59/)\n\ntomcat官网下载：http://tomcat.apache.org/download-90.cgi\n\n---\n## 下载解压\n这里就指定了安装目录是**/usr/local/tomcat**，后面都要用这个目录，也可以是/opt等其他目录。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/tomcat001.png)\n```\ncd /usr/local\nwget http://mirrors.hust.edu.cn/apache/tomcat/tomcat-9/v9.0.0.M13/bin/apache-tomcat-9.0.0.M13.tar.gz\ntar zxvf apache-tomcat-9.0.0.M13.tar.gz\nmv apache-tomcat-9.0.0.M13 tomcat\n```\n\n---\n## 编译守护程序\n```\ncd /tomcat/bin/\ntar zxvf commons-daemon-native.tar.gz\n#进入解压出来的目录，一般是commons-daemon-X.X.XX-native-src这个文件夹\ncd commons-daemon-1.0.10-native-src/unix\n./configure\nmake     #生成jsvc守护程序\ncp jsvc /usr/local/tomcat/bin\n```\n这里如果**./configure**失败(提示找不到jdk路径，是因为jdk环境变量没有配置好)可以用**./configure \\--with-java=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64**(JAVA_HOME)临时代替（这是我的JDK安装目录）。\n\n---\n## 设置环境变量\n这里注意不要写错了，一旦写错，大多数命令基本都会失效，必须手工指定路径运行命令修改\n`/usr/bin/vim /etc/profile`然后注销或重启生效。\n\n编辑文件：`vim /etc/profile`加入**tomcat**路径；和**/tomcat/bin**路径。\n注意格式，一般有两种，一种是每引用一个变量就**export**一下，像这种：\n```\nexport CATALINA_HOME=/usr/local/tomcat/\nexport PATH=$CATALINA_HOME/bin  #这里注意PATH,变量不能重复出现，相同的路径要合并，前面加\":\"```\n还有一种是合并起来写，像这样：\n```\nCATALINA_HOME=/usr/local/tomcat/   #这一句新加的\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin:$CATALINA_HOME/bin   #这里增加了（:$CATALINA_HOME/bin）\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH CATALINA_HOME      #这里增加了（CATALINA_HOME）\n```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/tomcat002.png)\n使配置立刻生效：`source /etc/profile`或`. /etc/profile`\n\n---\n## 修改守护程序\n在tomcat/bin目录里面有一个daemon.sh 这个文件就是**启动和关闭tomcat的服务守候程序**。\n\n注意：之前的一些tomcat版本,例如tomcat 6.0.x, 可能没有这个文件, 其实这个文件就是放在**commons-daemon-x.x.x-native-src/unix/samples/Tomcat7.sh**这儿的（此目录还有一个Tomcat5.sh），只不过新版本的tomcat把它移动到了bin目录下，并取名为**daemon.sh**了。所以，如果您使用的是tomcat 6，那就把这个Tomcat7.sh文件复制到bin目录下，并取名为daemon.sh即可。\n\n修改daemon环境变量：`cd /usr/local/tomcat/bin && vim ./daemon.sh`\n修改**TOMCAT_USER=tomcat**为您要指定身份运行的linux账号用户名,此处指定用户名为tomcat(一般不改或新建其他用户，不用现成的用户，要禁止登陆)。并把**JAVA_HOME=...**前面的注释（即“#”号）去掉，并设置为jdk的安装目录路径。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/tomcat003.png)\n修改好保存退出。创建用户、修改权限。\n```\nuseradd -M tomcat                   #创建没有主目录的tomcat用户\nchsh tomcat -s /sbin/nologin        #禁止tomcat登陆操作，类似于windows的系统账户\nchown -R tomcat /usr/local/tomcat   #将/usr/local/tomcat下的所有档案与子目录进行相同的拥有者变更为tomcat\nchmod +x /usr/local/tomcat/bin/*.sh #为tomcat/bin/目录下的*.sh添加相应的x权限\n```\n\n---\n## 防火墙、开机自启\n\n```\nvim /etc/sysconfig/iptables\n#加入下面这句，注意加到22端口下，不要加在-A INPUT -j REJECT语句之后，会失效。\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT   #tomcat默认端口是8080\nservice iptables restart   #重启防火墙\ncd /usr/local/tomcat/bin\n./startup.sh                 #启动tomcat\n./daemon.sh  start           #启动守护程序\ncurl http://localhost:8080   #测试一下是否启动\n```\n如果daemon.sh启动不了，重点查验tomcat的bin目录下的*.sh是否有x可执行权限、linux帐号是否有tomcat目录的读写权限，是否有tomcat/logs日志目录的写权限等等。\n\n\n**添加tomcat为Linux的服务**，需要创建一个软链到/etc/init.d/目录中\n```\nln -s /usr/local/tomcat/bin/daemon.sh /etc/init.d/tomcat\n#现在就可以用系统服务来启动停止tomcat服务啦。\n/etc/init.d/tomcat  start #启动tomcat\nservice tomcat start      #启动tomcat\n/etc/init.d/tomcat  stop  #关闭tomcat\nservice tomcat stop       #关闭tomcat```\n\n---\n设置**tomcat服务开机启动**，\n法1.在**daemon.sh**中增加以下的语句：\n```\n#!/bin/sh      #这句是原文件里有的，下面的2句是要添加的,是有#号的。\n# chkconfig: 2345 90 15\n# description: Tomcat-en Manager```\n再运行 chkconfig命令增加tomcat服务，而达到自启动(只有上一步“**添加tomcat为Linux的服务**”生效了这一步才能执行，否则报错)\n```\nchkconfig --add tomcat```\n\n\n法2.**修改/etc/rc.d/rc.local**\n在/etc/rc.d/rc.local文件最后添加下面两句\n```\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\n/usr/local/tomcat/bin/startup.sh start\n或\nexport JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\n/usr/local/tomcat/bin/catalina.sh start\n```\n增加可执行权限：`chmod +x /etc/rc.d/rc.local`\n\n关于catalina.sh启动文件，参考：[catalina.sh详解](http://www.cnblogs.com/huzhiwei/archive/2012/03/13/2393393.html)\n\n---\n如果想再创建一个tomcat服务，只需要将/usr/local/tomcat这个目录复制一份，例如：\n```\ncp /usr/local/tomcat /usr/local/tomcat1```\n\n再修改一下tomcat1的端口号(**/usr/local/tomcat/opt/tomcat1/conf/server.xml**中的端口号不能与其它的服务重复)。最后从上面所述\"**设置环境变量**\"开始，一直往下，设置新用户，创建用户，修改权限，设置防火墙，新建服务tomcat1，设置开机自启，就OK啦。\n通过这种方式，您就可以为一台Linux服务器创建任意多个tomcat服务了。最后只需要安装一个前端服务器（例如Nginx或Apache），将不同域名的请求转发到不同的tomcat服务程序就可以了。\n\n参考：\n\n[Linux下Apache与多个Tomcat 集群负载均衡](http://www.linuxidc.com/Linux/2012-01/51731.htm)\n\n[Nginx Tomcat 集群负载均衡解决笔记](http://www.linuxidc.com/Linux/2013-07/86827.htm)\n\n[Tomcat组件安装+Nginx反向代理Tomcat+Apache使用mod_jk和mod_proxy反向代理和负载均衡](http://www.linuxidc.com/Linux/2013-06/85290.htm)\n\n---\n\n\n\n\n\n\n","slug":"环境搭建-2016-11-19-Tomcat","published":1,"updated":"2016-11-21T02:17:09.075Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjnn002qd8pkqmwuus5z","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"安装tomcat\"><a href=\"#安装tomcat\" class=\"headerlink\" title=\"安装tomcat\"></a>安装tomcat</h1><p>需要有JDK环境。系统中已安装gcc、automake等编译工具。<br>参考：<a href=\"http://www.leolan.top/posts/59/\">java jdk环境搭建</a></p>\n<p>tomcat官网下载：<a href=\"http://tomcat.apache.org/download-90.cgi\" target=\"_blank\" rel=\"external\">http://tomcat.apache.org/download-90.cgi</a></p>\n<hr>\n<h2 id=\"下载解压\"><a href=\"#下载解压\" class=\"headerlink\" title=\"下载解压\"></a>下载解压</h2><p>这里就指定了安装目录是<strong>/usr/local/tomcat</strong>，后面都要用这个目录，也可以是/opt等其他目录。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/tomcat001.png\" alt=\"\"><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /usr/local</div><div class=\"line\">wget http:<span class=\"comment\">//mirrors.hust.edu.cn/apache/tomcat/tomcat-9/v9.0.0.M13/bin/apache-tomcat-9.0.0.M13.tar.gz</span></div><div class=\"line\">tar zxvf apache-tomcat-<span class=\"number\">9.0</span>.<span class=\"number\">0</span><span class=\"selector-class\">.M13</span><span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span></div><div class=\"line\">mv apache-tomcat-<span class=\"number\">9.0</span>.<span class=\"number\">0</span><span class=\"selector-class\">.M13</span> tomcat</div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"编译守护程序\"><a href=\"#编译守护程序\" class=\"headerlink\" title=\"编译守护程序\"></a>编译守护程序</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /tomcat/bin/</div><div class=\"line\">tar zxvf commons-daemon-native<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span></div><div class=\"line\">#进入解压出来的目录，一般是commons-daemon-X<span class=\"selector-class\">.X</span><span class=\"selector-class\">.XX-native-src</span>这个文件夹</div><div class=\"line\">cd commons-daemon-<span class=\"number\">1.0</span>.<span class=\"number\">10</span>-native-src/unix</div><div class=\"line\">./configure</div><div class=\"line\">make     #生成jsvc守护程序</div><div class=\"line\">cp jsvc /usr/local/tomcat/bin</div></pre></td></tr></table></figure>\n<p>这里如果<strong>./configure</strong>失败(提示找不到jdk路径，是因为jdk环境变量没有配置好)可以用<strong>./configure --with-java=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64</strong>(JAVA_HOME)临时代替（这是我的JDK安装目录）。</p>\n<hr>\n<h2 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h2><p>这里注意不要写错了，一旦写错，大多数命令基本都会失效，必须手工指定路径运行命令修改<br><code>/usr/bin/vim /etc/profile</code>然后注销或重启生效。</p>\n<p>编辑文件：<code>vim /etc/profile</code>加入<strong>tomcat</strong>路径；和<strong>/tomcat/bin</strong>路径。<br>注意格式，一般有两种，一种是每引用一个变量就<strong>export</strong>一下，像这种：<br><figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"built_in\">CATALINA_HOME</span>=/usr/local/tomcat/</div><div class=\"line\"><span class=\"keyword\">export</span> PATH=$<span class=\"built_in\">CATALINA_HOME</span>/bin  <span class=\"meta\">#这里注意PATH,变量不能重复出现，相同的路径要合并，前面加<span class=\"meta-string\">\":\"</span></span></div></pre></td></tr></table></figure></p>\n<p>还有一种是合并起来写，像这样：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">CATALINA_HOME=<span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat/</span>   <span class=\"comment\">#这一句新加的</span></div><div class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span><span class=\"regexp\">/bin:$JRE_HOME/</span>bin:<span class=\"variable\">$CATALINA_HOME</span><span class=\"regexp\">/bin   #这里增加了（:$CATALINA_HOME/</span>bin）</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH CATALINA_HOME      <span class=\"comment\">#这里增加了（CATALINA_HOME）</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/tomcat002.png\" alt=\"\"><br>使配置立刻生效：<code>source /etc/profile</code>或<code>. /etc/profile</code></p>\n<hr>\n<h2 id=\"修改守护程序\"><a href=\"#修改守护程序\" class=\"headerlink\" title=\"修改守护程序\"></a>修改守护程序</h2><p>在tomcat/bin目录里面有一个daemon.sh 这个文件就是<strong>启动和关闭tomcat的服务守候程序</strong>。</p>\n<p>注意：之前的一些tomcat版本,例如tomcat 6.0.x, 可能没有这个文件, 其实这个文件就是放在<strong>commons-daemon-x.x.x-native-src/unix/samples/Tomcat7.sh</strong>这儿的（此目录还有一个Tomcat5.sh），只不过新版本的tomcat把它移动到了bin目录下，并取名为<strong>daemon.sh</strong>了。所以，如果您使用的是tomcat 6，那就把这个Tomcat7.sh文件复制到bin目录下，并取名为daemon.sh即可。</p>\n<p>修改daemon环境变量：<code>cd /usr/local/tomcat/bin &amp;&amp; vim ./daemon.sh</code><br>修改<strong>TOMCAT_USER=tomcat</strong>为您要指定身份运行的linux账号用户名,此处指定用户名为tomcat(一般不改或新建其他用户，不用现成的用户，要禁止登陆)。并把<strong>JAVA_HOME=…</strong>前面的注释（即“#”号）去掉，并设置为jdk的安装目录路径。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/tomcat003.png\" alt=\"\"><br>修改好保存退出。创建用户、修改权限。<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">useradd -M tomcat                   <span class=\"comment\">#创建没有主目录的tomcat用户</span></div><div class=\"line\">chsh tomcat -s <span class=\"regexp\">/sbin/</span>nologin        <span class=\"comment\">#禁止tomcat登陆操作，类似于windows的系统账户</span></div><div class=\"line\">chown -R tomcat <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat   #将/u</span>sr<span class=\"regexp\">/local/</span>tomcat下的所有档案与子目录进行相同的拥有者变更为tomcat</div><div class=\"line\">chmod +x <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat/</span>bin<span class=\"regexp\">/*.sh #为tomcat/</span>bin<span class=\"regexp\">/目录下的*.sh添加相应的x权限</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"防火墙、开机自启\"><a href=\"#防火墙、开机自启\" class=\"headerlink\" title=\"防火墙、开机自启\"></a>防火墙、开机自启</h2><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/sysconfig/iptables</div><div class=\"line\"><span class=\"comment\">#加入下面这句，注意加到22端口下，不要加在-A INPUT -j REJECT语句之后，会失效。</span></div><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">8080</span> -j ACCEPT   <span class=\"comment\">#tomcat默认端口是8080</span></div><div class=\"line\">service iptables restart   <span class=\"comment\">#重启防火墙</span></div><div class=\"line\">cd /usr/local/tomcat/bin</div><div class=\"line\">./startup.sh                 <span class=\"comment\">#启动tomcat</span></div><div class=\"line\">./daemon.sh  start           <span class=\"comment\">#启动守护程序</span></div><div class=\"line\">curl http://localhost:<span class=\"number\">8080</span>   <span class=\"comment\">#测试一下是否启动</span></div></pre></td></tr></table></figure>\n<p>如果daemon.sh启动不了，重点查验tomcat的bin目录下的*.sh是否有x可执行权限、linux帐号是否有tomcat目录的读写权限，是否有tomcat/logs日志目录的写权限等等。</p>\n<p><strong>添加tomcat为Linux的服务</strong>，需要创建一个软链到/etc/init.d/目录中<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">ln</span> -s /usr/<span class=\"built_in\">local</span>/tomcat/bin/daemon.sh /etc/init.d/tomcat</div><div class=\"line\"><span class=\"comment\">#现在就可以用系统服务来启动停止tomcat服务啦。</span></div><div class=\"line\">/etc/init.d/tomcat  <span class=\"built_in\">start</span> <span class=\"comment\">#启动tomcat</span></div><div class=\"line\">service tomcat <span class=\"built_in\">start</span>      <span class=\"comment\">#启动tomcat</span></div><div class=\"line\">/etc/init.d/tomcat  <span class=\"built_in\">stop</span>  <span class=\"comment\">#关闭tomcat</span></div><div class=\"line\">service tomcat <span class=\"built_in\">stop</span>       <span class=\"comment\">#关闭tomcat</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p>设置<strong>tomcat服务开机启动</strong>，<br>法1.在<strong>daemon.sh</strong>中增加以下的语句：<br><figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/sh      #这句是原文件里有的，下面的2句是要添加的,是有#号的。</span></div><div class=\"line\"><span class=\"meta\"># chkconfig: 2345 90 15</span></div><div class=\"line\"><span class=\"meta\"># description: Tomcat-en Manager</span></div></pre></td></tr></table></figure></p>\n<p>再运行 chkconfig命令增加tomcat服务，而达到自启动(只有上一步“<strong>添加tomcat为Linux的服务</strong>”生效了这一步才能执行，否则报错)<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">chkconfig --<span class=\"keyword\">add</span><span class=\"bash\"> tomcat</span></div></pre></td></tr></table></figure></p>\n<p>法2.<strong>修改/etc/rc.d/rc.local</strong><br>在/etc/rc.d/rc.local文件最后添加下面两句<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">export JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.0-openjdk-<span class=\"number\">1.8</span>.0.111-<span class=\"number\">0.b15</span>.el6_8.x86_64</div><div class=\"line\">/usr/<span class=\"built_in\">local</span>/tomcat/bin/startup.sh start</div><div class=\"line\">或</div><div class=\"line\">export JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.0-openjdk-<span class=\"number\">1.8</span>.0.111-<span class=\"number\">0.b15</span>.el6_8.x86_64</div><div class=\"line\">/usr/<span class=\"built_in\">local</span>/tomcat/bin/catalina.sh start</div></pre></td></tr></table></figure></p>\n<p>增加可执行权限：<code>chmod +x /etc/rc.d/rc.local</code></p>\n<p>关于catalina.sh启动文件，参考：<a href=\"http://www.cnblogs.com/huzhiwei/archive/2012/03/13/2393393.html\" target=\"_blank\" rel=\"external\">catalina.sh详解</a></p>\n<hr>\n<p>如果想再创建一个tomcat服务，只需要将/usr/local/tomcat这个目录复制一份，例如：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat /u</span>sr<span class=\"regexp\">/local/</span>tomcat1</div></pre></td></tr></table></figure></p>\n<p>再修改一下tomcat1的端口号(<strong>/usr/local/tomcat/opt/tomcat1/conf/server.xml</strong>中的端口号不能与其它的服务重复)。最后从上面所述”<strong>设置环境变量</strong>“开始，一直往下，设置新用户，创建用户，修改权限，设置防火墙，新建服务tomcat1，设置开机自启，就OK啦。<br>通过这种方式，您就可以为一台Linux服务器创建任意多个tomcat服务了。最后只需要安装一个前端服务器（例如Nginx或Apache），将不同域名的请求转发到不同的tomcat服务程序就可以了。</p>\n<p>参考：</p>\n<p><a href=\"http://www.linuxidc.com/Linux/2012-01/51731.htm\" target=\"_blank\" rel=\"external\">Linux下Apache与多个Tomcat 集群负载均衡</a></p>\n<p><a href=\"http://www.linuxidc.com/Linux/2013-07/86827.htm\" target=\"_blank\" rel=\"external\">Nginx Tomcat 集群负载均衡解决笔记</a></p>\n<p><a href=\"http://www.linuxidc.com/Linux/2013-06/85290.htm\" target=\"_blank\" rel=\"external\">Tomcat组件安装+Nginx反向代理Tomcat+Apache使用mod_jk和mod_proxy反向代理和负载均衡</a></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"安装tomcat\"><a href=\"#安装tomcat\" class=\"headerlink\" title=\"安装tomcat\"></a>安装tomcat</h1><p>需要有JDK环境。系统中已安装gcc、automake等编译工具。<br>参考：<a href=\"http://www.leolan.top/posts/59/\">java jdk环境搭建</a></p>\n<p>tomcat官网下载：<a href=\"http://tomcat.apache.org/download-90.cgi\">http://tomcat.apache.org/download-90.cgi</a></p>\n<hr>\n<h2 id=\"下载解压\"><a href=\"#下载解压\" class=\"headerlink\" title=\"下载解压\"></a>下载解压</h2><p>这里就指定了安装目录是<strong>/usr/local/tomcat</strong>，后面都要用这个目录，也可以是/opt等其他目录。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/tomcat001.png\" alt=\"\"><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /usr/local</div><div class=\"line\">wget http:<span class=\"comment\">//mirrors.hust.edu.cn/apache/tomcat/tomcat-9/v9.0.0.M13/bin/apache-tomcat-9.0.0.M13.tar.gz</span></div><div class=\"line\">tar zxvf apache-tomcat-<span class=\"number\">9.0</span>.<span class=\"number\">0</span><span class=\"selector-class\">.M13</span><span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span></div><div class=\"line\">mv apache-tomcat-<span class=\"number\">9.0</span>.<span class=\"number\">0</span><span class=\"selector-class\">.M13</span> tomcat</div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"编译守护程序\"><a href=\"#编译守护程序\" class=\"headerlink\" title=\"编译守护程序\"></a>编译守护程序</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /tomcat/bin/</div><div class=\"line\">tar zxvf commons-daemon-native<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span></div><div class=\"line\">#进入解压出来的目录，一般是commons-daemon-X<span class=\"selector-class\">.X</span><span class=\"selector-class\">.XX-native-src</span>这个文件夹</div><div class=\"line\">cd commons-daemon-<span class=\"number\">1.0</span>.<span class=\"number\">10</span>-native-src/unix</div><div class=\"line\">./configure</div><div class=\"line\">make     #生成jsvc守护程序</div><div class=\"line\">cp jsvc /usr/local/tomcat/bin</div></pre></td></tr></table></figure>\n<p>这里如果<strong>./configure</strong>失败(提示找不到jdk路径，是因为jdk环境变量没有配置好)可以用<strong>./configure --with-java=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64</strong>(JAVA_HOME)临时代替（这是我的JDK安装目录）。</p>\n<hr>\n<h2 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h2><p>这里注意不要写错了，一旦写错，大多数命令基本都会失效，必须手工指定路径运行命令修改<br><code>/usr/bin/vim /etc/profile</code>然后注销或重启生效。</p>\n<p>编辑文件：<code>vim /etc/profile</code>加入<strong>tomcat</strong>路径；和<strong>/tomcat/bin</strong>路径。<br>注意格式，一般有两种，一种是每引用一个变量就<strong>export</strong>一下，像这种：<br><figure class=\"highlight objectivec\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"built_in\">CATALINA_HOME</span>=/usr/local/tomcat/</div><div class=\"line\"><span class=\"keyword\">export</span> PATH=$<span class=\"built_in\">CATALINA_HOME</span>/bin  <span class=\"meta\">#这里注意PATH,变量不能重复出现，相同的路径要合并，前面加<span class=\"meta-string\">\":\"</span></span></div></pre></td></tr></table></figure></p>\n<p>还有一种是合并起来写，像这样：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">CATALINA_HOME=<span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat/</span>   <span class=\"comment\">#这一句新加的</span></div><div class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span><span class=\"regexp\">/bin:$JRE_HOME/</span>bin:<span class=\"variable\">$CATALINA_HOME</span><span class=\"regexp\">/bin   #这里增加了（:$CATALINA_HOME/</span>bin）</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH CATALINA_HOME      <span class=\"comment\">#这里增加了（CATALINA_HOME）</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/tomcat002.png\" alt=\"\"><br>使配置立刻生效：<code>source /etc/profile</code>或<code>. /etc/profile</code></p>\n<hr>\n<h2 id=\"修改守护程序\"><a href=\"#修改守护程序\" class=\"headerlink\" title=\"修改守护程序\"></a>修改守护程序</h2><p>在tomcat/bin目录里面有一个daemon.sh 这个文件就是<strong>启动和关闭tomcat的服务守候程序</strong>。</p>\n<p>注意：之前的一些tomcat版本,例如tomcat 6.0.x, 可能没有这个文件, 其实这个文件就是放在<strong>commons-daemon-x.x.x-native-src/unix/samples/Tomcat7.sh</strong>这儿的（此目录还有一个Tomcat5.sh），只不过新版本的tomcat把它移动到了bin目录下，并取名为<strong>daemon.sh</strong>了。所以，如果您使用的是tomcat 6，那就把这个Tomcat7.sh文件复制到bin目录下，并取名为daemon.sh即可。</p>\n<p>修改daemon环境变量：<code>cd /usr/local/tomcat/bin &amp;&amp; vim ./daemon.sh</code><br>修改<strong>TOMCAT_USER=tomcat</strong>为您要指定身份运行的linux账号用户名,此处指定用户名为tomcat(一般不改或新建其他用户，不用现成的用户，要禁止登陆)。并把<strong>JAVA_HOME=…</strong>前面的注释（即“#”号）去掉，并设置为jdk的安装目录路径。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/tomcat003.png\" alt=\"\"><br>修改好保存退出。创建用户、修改权限。<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">useradd -M tomcat                   <span class=\"comment\">#创建没有主目录的tomcat用户</span></div><div class=\"line\">chsh tomcat -s <span class=\"regexp\">/sbin/</span>nologin        <span class=\"comment\">#禁止tomcat登陆操作，类似于windows的系统账户</span></div><div class=\"line\">chown -R tomcat <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat   #将/u</span>sr<span class=\"regexp\">/local/</span>tomcat下的所有档案与子目录进行相同的拥有者变更为tomcat</div><div class=\"line\">chmod +x <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat/</span>bin<span class=\"regexp\">/*.sh #为tomcat/</span>bin<span class=\"regexp\">/目录下的*.sh添加相应的x权限</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"防火墙、开机自启\"><a href=\"#防火墙、开机自启\" class=\"headerlink\" title=\"防火墙、开机自启\"></a>防火墙、开机自启</h2><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">vim /etc/sysconfig/iptables</div><div class=\"line\"><span class=\"comment\">#加入下面这句，注意加到22端口下，不要加在-A INPUT -j REJECT语句之后，会失效。</span></div><div class=\"line\">-A INPUT -m <span class=\"keyword\">state</span> --state NEW -m tcp -p tcp --dport <span class=\"number\">8080</span> -j ACCEPT   <span class=\"comment\">#tomcat默认端口是8080</span></div><div class=\"line\">service iptables restart   <span class=\"comment\">#重启防火墙</span></div><div class=\"line\">cd /usr/local/tomcat/bin</div><div class=\"line\">./startup.sh                 <span class=\"comment\">#启动tomcat</span></div><div class=\"line\">./daemon.sh  start           <span class=\"comment\">#启动守护程序</span></div><div class=\"line\">curl http://localhost:<span class=\"number\">8080</span>   <span class=\"comment\">#测试一下是否启动</span></div></pre></td></tr></table></figure>\n<p>如果daemon.sh启动不了，重点查验tomcat的bin目录下的*.sh是否有x可执行权限、linux帐号是否有tomcat目录的读写权限，是否有tomcat/logs日志目录的写权限等等。</p>\n<p><strong>添加tomcat为Linux的服务</strong>，需要创建一个软链到/etc/init.d/目录中<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">ln</span> -s /usr/<span class=\"built_in\">local</span>/tomcat/bin/daemon.sh /etc/init.d/tomcat</div><div class=\"line\"><span class=\"comment\">#现在就可以用系统服务来启动停止tomcat服务啦。</span></div><div class=\"line\">/etc/init.d/tomcat  <span class=\"built_in\">start</span> <span class=\"comment\">#启动tomcat</span></div><div class=\"line\">service tomcat <span class=\"built_in\">start</span>      <span class=\"comment\">#启动tomcat</span></div><div class=\"line\">/etc/init.d/tomcat  <span class=\"built_in\">stop</span>  <span class=\"comment\">#关闭tomcat</span></div><div class=\"line\">service tomcat <span class=\"built_in\">stop</span>       <span class=\"comment\">#关闭tomcat</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p>设置<strong>tomcat服务开机启动</strong>，<br>法1.在<strong>daemon.sh</strong>中增加以下的语句：<br><figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/sh      #这句是原文件里有的，下面的2句是要添加的,是有#号的。</span></div><div class=\"line\"><span class=\"meta\"># chkconfig: 2345 90 15</span></div><div class=\"line\"><span class=\"meta\"># description: Tomcat-en Manager</span></div></pre></td></tr></table></figure></p>\n<p>再运行 chkconfig命令增加tomcat服务，而达到自启动(只有上一步“<strong>添加tomcat为Linux的服务</strong>”生效了这一步才能执行，否则报错)<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">chkconfig --<span class=\"keyword\">add</span><span class=\"bash\"> tomcat</span></div></pre></td></tr></table></figure></p>\n<p>法2.<strong>修改/etc/rc.d/rc.local</strong><br>在/etc/rc.d/rc.local文件最后添加下面两句<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">export JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.0-openjdk-<span class=\"number\">1.8</span>.0.111-<span class=\"number\">0.b15</span>.el6_8.x86_64</div><div class=\"line\">/usr/<span class=\"built_in\">local</span>/tomcat/bin/startup.sh start</div><div class=\"line\">或</div><div class=\"line\">export JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.0-openjdk-<span class=\"number\">1.8</span>.0.111-<span class=\"number\">0.b15</span>.el6_8.x86_64</div><div class=\"line\">/usr/<span class=\"built_in\">local</span>/tomcat/bin/catalina.sh start</div></pre></td></tr></table></figure></p>\n<p>增加可执行权限：<code>chmod +x /etc/rc.d/rc.local</code></p>\n<p>关于catalina.sh启动文件，参考：<a href=\"http://www.cnblogs.com/huzhiwei/archive/2012/03/13/2393393.html\">catalina.sh详解</a></p>\n<hr>\n<p>如果想再创建一个tomcat服务，只需要将/usr/local/tomcat这个目录复制一份，例如：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">cp <span class=\"regexp\">/usr/</span>local<span class=\"regexp\">/tomcat /u</span>sr<span class=\"regexp\">/local/</span>tomcat1</div></pre></td></tr></table></figure></p>\n<p>再修改一下tomcat1的端口号(<strong>/usr/local/tomcat/opt/tomcat1/conf/server.xml</strong>中的端口号不能与其它的服务重复)。最后从上面所述”<strong>设置环境变量</strong>“开始，一直往下，设置新用户，创建用户，修改权限，设置防火墙，新建服务tomcat1，设置开机自启，就OK啦。<br>通过这种方式，您就可以为一台Linux服务器创建任意多个tomcat服务了。最后只需要安装一个前端服务器（例如Nginx或Apache），将不同域名的请求转发到不同的tomcat服务程序就可以了。</p>\n<p>参考：</p>\n<p><a href=\"http://www.linuxidc.com/Linux/2012-01/51731.htm\">Linux下Apache与多个Tomcat 集群负载均衡</a></p>\n<p><a href=\"http://www.linuxidc.com/Linux/2013-07/86827.htm\">Nginx Tomcat 集群负载均衡解决笔记</a></p>\n<p><a href=\"http://www.linuxidc.com/Linux/2013-06/85290.htm\">Tomcat组件安装+Nginx反向代理Tomcat+Apache使用mod_jk和mod_proxy反向代理和负载均衡</a></p>\n<hr>\n"},{"title":"Mac常用工具","abbrlink":2336,"date":"2016-11-17T07:17:05.000Z","_content":"\n# 工具\n\n\n**Git-osx-install**：https://sourceforge.net/projects/git-osx-installer/\n\n---\n**Homebrew - Mac OSX 的包管理**\n```\nruby -e \"$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)\"```\n\n---\n**XCode **\n官方开发工具，同时也能解决很多环境问题\n\n---\n**wget**\n```\nbrew install wget```\n有时遇到默认的下载链接速度十分坑爹，就 brew edit wget 修改下链接再装\n\n---\n**[Oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)**\n```\nwget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh```\n重新打开终端就好了。\n卸载：`uninstall_oh_my_zsh`\n\n[终极 Shell——ZSH](https://zhuanlan.zhihu.com/p/19556676?columnSlug=mactalk)\n\n**autojump插件**\nzsh 和 autojump 的组合形成了 zsh 下最强悍的插件\nMac：`brew install autojump`\nLinux：\n```\nwget https://github.com/downloads/joelthelion/autojump/autojump_v21.1.2.tar.gz\ntar zxvf autojump_v21.1.2.tar.gz\ncd autojump_v21.1.2\n./install.sh```\n\n修改配置文件\n`vim ~/.zshrc`加入以下这句\n```\n[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] && . ~/.autojump/etc/profile.d/autojump.sh```\n\n\n---\n# 技巧\n\n## ssh远程连接突然连接不了\n在重装了远程主机（云主机）系统之后，即使有免密钥登录也会失败。出现类似如下的提示：\n```\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  \n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @  \n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  \nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!  \nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!  \nIt is also possible that a host key has just been changed.  \nThe fingerprint for the RSA key sent by the remote host is  \n07:36:8e:d0:72:88:38:f7:21:10:c3:12:d6:35:ad:55.  \nPlease contact your system administrator.  \nAdd correct host key in /Users/watsy/.ssh/known_hosts to get rid of this message.  \nOffending RSA key in /Users/watsy/.ssh/known_hosts:1  \nRSA host key for 192.168.2.108 has changed and you have requested strict checking.  \nHost key verification failed.  ```\n这时只要执行`rm -rf ~/.ssh/known_hosts`删除记录主机信息的文件就可以重新连接了。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/环境搭建/2016-11-17-Mac常用工具-技巧.md","raw":"---\ntitle: Mac常用工具\ncategories:\n  - 环境搭建\ntags:\n  - Mac常用工具\n  - Homebrew\n  - wget\n  - zsh\n  - xcode\nabbrlink: 2336\ndate: 2016-11-17 15:17:05\n---\n\n# 工具\n\n\n**Git-osx-install**：https://sourceforge.net/projects/git-osx-installer/\n\n---\n**Homebrew - Mac OSX 的包管理**\n```\nruby -e \"$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)\"```\n\n---\n**XCode **\n官方开发工具，同时也能解决很多环境问题\n\n---\n**wget**\n```\nbrew install wget```\n有时遇到默认的下载链接速度十分坑爹，就 brew edit wget 修改下链接再装\n\n---\n**[Oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)**\n```\nwget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh```\n重新打开终端就好了。\n卸载：`uninstall_oh_my_zsh`\n\n[终极 Shell——ZSH](https://zhuanlan.zhihu.com/p/19556676?columnSlug=mactalk)\n\n**autojump插件**\nzsh 和 autojump 的组合形成了 zsh 下最强悍的插件\nMac：`brew install autojump`\nLinux：\n```\nwget https://github.com/downloads/joelthelion/autojump/autojump_v21.1.2.tar.gz\ntar zxvf autojump_v21.1.2.tar.gz\ncd autojump_v21.1.2\n./install.sh```\n\n修改配置文件\n`vim ~/.zshrc`加入以下这句\n```\n[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] && . ~/.autojump/etc/profile.d/autojump.sh```\n\n\n---\n# 技巧\n\n## ssh远程连接突然连接不了\n在重装了远程主机（云主机）系统之后，即使有免密钥登录也会失败。出现类似如下的提示：\n```\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  \n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @  \n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  \nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!  \nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!  \nIt is also possible that a host key has just been changed.  \nThe fingerprint for the RSA key sent by the remote host is  \n07:36:8e:d0:72:88:38:f7:21:10:c3:12:d6:35:ad:55.  \nPlease contact your system administrator.  \nAdd correct host key in /Users/watsy/.ssh/known_hosts to get rid of this message.  \nOffending RSA key in /Users/watsy/.ssh/known_hosts:1  \nRSA host key for 192.168.2.108 has changed and you have requested strict checking.  \nHost key verification failed.  ```\n这时只要执行`rm -rf ~/.ssh/known_hosts`删除记录主机信息的文件就可以重新连接了。\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"环境搭建-2016-11-17-Mac常用工具-技巧","published":1,"updated":"2016-11-25T03:15:36.930Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjns002td8pkxnqwtv6h","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h1><p><strong>Git-osx-install</strong>：<a href=\"https://sourceforge.net/projects/git-osx-installer/\" target=\"_blank\" rel=\"external\">https://sourceforge.net/projects/git-osx-installer/</a></p>\n<hr>\n<p><strong>Homebrew - Mac OSX 的包管理</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ruby <span class=\"_\">-e</span> <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)</span>\"</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>XCode </strong><br>官方开发工具，同时也能解决很多环境问题</p>\n<hr>\n<p><strong>wget</strong><br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>wget</div></pre></td></tr></table></figure></p>\n<p>有时遇到默认的下载链接速度十分坑爹，就 brew edit wget 修改下链接再装</p>\n<hr>\n<p><strong><a href=\"https://github.com/robbyrussell/oh-my-zsh\" target=\"_blank\" rel=\"external\">Oh-my-zsh</a></strong><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget --<span class=\"keyword\">no</span>-check-certificate http<span class=\"variable\">s:</span>//github.<span class=\"keyword\">com</span>/robbyrussell/oh-my-zsh/raw/master/tools/install.<span class=\"keyword\">sh</span> -O - | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure></p>\n<p>重新打开终端就好了。<br>卸载：<code>uninstall_oh_my_zsh</code></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/19556676?columnSlug=mactalk\" target=\"_blank\" rel=\"external\">终极 Shell——ZSH</a></p>\n<p><strong>autojump插件</strong><br>zsh 和 autojump 的组合形成了 zsh 下最强悍的插件<br>Mac：<code>brew install autojump</code><br>Linux：<br><figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget https://github.com/downloads/joelthelion/autojump/autojump_v21<span class=\"meta\">.1</span><span class=\"meta\">.2</span>.tar.gz</div><div class=\"line\">tar zxvf autojump_v21<span class=\"meta\">.1</span><span class=\"meta\">.2</span>.tar.gz</div><div class=\"line\">cd autojump_v21<span class=\"meta\">.1</span><span class=\"meta\">.2</span></div><div class=\"line\">./install.sh</div></pre></td></tr></table></figure></p>\n<p>修改配置文件<br><code>vim ~/.zshrc</code>加入以下这句<br><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">[[ -s ~/.autojump/etc/profile.d/autojump.sh ]]</span> &amp;&amp; . ~/.autojump/etc/profile.d/autojump.sh</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"技巧\"><a href=\"#技巧\" class=\"headerlink\" title=\"技巧\"></a>技巧</h1><h2 id=\"ssh远程连接突然连接不了\"><a href=\"#ssh远程连接突然连接不了\" class=\"headerlink\" title=\"ssh远程连接突然连接不了\"></a>ssh远程连接突然连接不了</h2><p>在重装了远程主机（云主机）系统之后，即使有免密钥登录也会失败。出现类似如下的提示：<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@  </span></div><div class=\"line\">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     <span class=\"comment\">@  </span></div><div class=\"line\">@<span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span>  </div><div class=\"line\">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!  </div><div class=\"line\">Someone could be eavesdropping on you right now (man-in-the-middle attack)!  </div><div class=\"line\">It is also possible that a host <span class=\"built_in\">key</span> has just been changed.  </div><div class=\"line\">The fingerprint <span class=\"keyword\">for</span> the RSA <span class=\"built_in\">key</span> sent by the remote host is  </div><div class=\"line\"><span class=\"number\">07</span>:<span class=\"number\">36</span>:<span class=\"number\">8</span>e:d0:<span class=\"number\">72</span>:<span class=\"number\">88</span>:<span class=\"number\">38</span>:f7:<span class=\"number\">21</span>:<span class=\"number\">10</span>:c3:<span class=\"number\">12</span>:d6:<span class=\"number\">35</span>:ad:<span class=\"number\">55.</span>  </div><div class=\"line\">Please contact your <span class=\"keyword\">system</span> administrator.  </div><div class=\"line\">Add correct host <span class=\"built_in\">key</span> in /Users/watsy/.ssh/known_hosts to get rid of this message.  </div><div class=\"line\">Offending RSA <span class=\"built_in\">key</span> in /Users/watsy/.ssh/known_hosts:<span class=\"number\">1</span>  </div><div class=\"line\">RSA host <span class=\"built_in\">key</span> <span class=\"keyword\">for</span> <span class=\"number\">192.168</span><span class=\"number\">.2</span><span class=\"number\">.108</span> has changed <span class=\"keyword\">and</span> you have requested strict checking.  </div><div class=\"line\">Host <span class=\"built_in\">key</span> verification failed.</div></pre></td></tr></table></figure></p>\n<p>这时只要执行<code>rm -rf ~/.ssh/known_hosts</code>删除记录主机信息的文件就可以重新连接了。</p>\n","excerpt":"","more":"<h1 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h1><p><strong>Git-osx-install</strong>：<a href=\"https://sourceforge.net/projects/git-osx-installer/\">https://sourceforge.net/projects/git-osx-installer/</a></p>\n<hr>\n<p><strong>Homebrew - Mac OSX 的包管理</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ruby <span class=\"_\">-e</span> <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)</span>\"</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>XCode </strong><br>官方开发工具，同时也能解决很多环境问题</p>\n<hr>\n<p><strong>wget</strong><br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>wget</div></pre></td></tr></table></figure></p>\n<p>有时遇到默认的下载链接速度十分坑爹，就 brew edit wget 修改下链接再装</p>\n<hr>\n<p><strong><a href=\"https://github.com/robbyrussell/oh-my-zsh\">Oh-my-zsh</a></strong><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget --<span class=\"keyword\">no</span>-check-certificate http<span class=\"variable\">s:</span>//github.<span class=\"keyword\">com</span>/robbyrussell/oh-my-zsh/raw/master/tools/install.<span class=\"keyword\">sh</span> -O - | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure></p>\n<p>重新打开终端就好了。<br>卸载：<code>uninstall_oh_my_zsh</code></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/19556676?columnSlug=mactalk\">终极 Shell——ZSH</a></p>\n<p><strong>autojump插件</strong><br>zsh 和 autojump 的组合形成了 zsh 下最强悍的插件<br>Mac：<code>brew install autojump</code><br>Linux：<br><figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget https://github.com/downloads/joelthelion/autojump/autojump_v21<span class=\"meta\">.1</span><span class=\"meta\">.2</span>.tar.gz</div><div class=\"line\">tar zxvf autojump_v21<span class=\"meta\">.1</span><span class=\"meta\">.2</span>.tar.gz</div><div class=\"line\">cd autojump_v21<span class=\"meta\">.1</span><span class=\"meta\">.2</span></div><div class=\"line\">./install.sh</div></pre></td></tr></table></figure></p>\n<p>修改配置文件<br><code>vim ~/.zshrc</code>加入以下这句<br><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">[[ -s ~/.autojump/etc/profile.d/autojump.sh ]]</span> &amp;&amp; . ~/.autojump/etc/profile.d/autojump.sh</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"技巧\"><a href=\"#技巧\" class=\"headerlink\" title=\"技巧\"></a>技巧</h1><h2 id=\"ssh远程连接突然连接不了\"><a href=\"#ssh远程连接突然连接不了\" class=\"headerlink\" title=\"ssh远程连接突然连接不了\"></a>ssh远程连接突然连接不了</h2><p>在重装了远程主机（云主机）系统之后，即使有免密钥登录也会失败。出现类似如下的提示：<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@  </div><div class=\"line\">@</span>    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     <span class=\"comment\">@  </div><div class=\"line\">@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span><span class=\"comment\">@@</span>  </div><div class=\"line\">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!  </div><div class=\"line\">Someone could be eavesdropping on you right now (man-in-the-middle attack)!  </div><div class=\"line\">It is also possible that a host <span class=\"built_in\">key</span> has just been changed.  </div><div class=\"line\">The fingerprint <span class=\"keyword\">for</span> the RSA <span class=\"built_in\">key</span> sent by the remote host is  </div><div class=\"line\"><span class=\"number\">07</span>:<span class=\"number\">36</span>:<span class=\"number\">8</span>e:d0:<span class=\"number\">72</span>:<span class=\"number\">88</span>:<span class=\"number\">38</span>:f7:<span class=\"number\">21</span>:<span class=\"number\">10</span>:c3:<span class=\"number\">12</span>:d6:<span class=\"number\">35</span>:ad:<span class=\"number\">55.</span>  </div><div class=\"line\">Please contact your <span class=\"keyword\">system</span> administrator.  </div><div class=\"line\">Add correct host <span class=\"built_in\">key</span> in /Users/watsy/.ssh/known_hosts to get rid of this message.  </div><div class=\"line\">Offending RSA <span class=\"built_in\">key</span> in /Users/watsy/.ssh/known_hosts:<span class=\"number\">1</span>  </div><div class=\"line\">RSA host <span class=\"built_in\">key</span> <span class=\"keyword\">for</span> <span class=\"number\">192.168</span><span class=\"number\">.2</span><span class=\"number\">.108</span> has changed <span class=\"keyword\">and</span> you have requested strict checking.  </div><div class=\"line\">Host <span class=\"built_in\">key</span> verification failed.</div></pre></td></tr></table></figure></p>\n<p>这时只要执行<code>rm -rf ~/.ssh/known_hosts</code>删除记录主机信息的文件就可以重新连接了。</p>\n"},{"title":"java jdk环境搭建","abbrlink":59,"date":"2016-11-19T13:05:01.000Z","_content":"\n# Java(jre) 运行环境\n只提供Java程序基本的运行环境。\n\n\n## 安装\n### Ubuntu\n默认已经安装好了，可以运行命令升级。\n```\napt-get update\napt-get upgrate```\n或运行命令安装：\n```\napt list *openjdk*   #查看当前apt源有那些版本\napt-get install openjdk-7-jre```\n\n安装完后检查一下版本：`java -version`\n\n---\n### Centos\n```\nyum list *openjdk*   #查看当前yum源有那些版本\nyum install java-1.8.0-openjdk   #安装Java运行环境```\n\n安装完后检查一下版本：`java -version`\n\n\n---\n# JDK(jdk) 开发环境\n除了开发，任何涉及Java编译的情况都需要依赖jdk开发环境。安装JDK环境强烈建议先安装好JRE环境。\n**[JDK官网下载](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)**\n\n## 注意：环境变量设置错误\n**如果环境变量没有配置成功，可能是JAVA_HOME的路径不对,可以手动找到位置并替换掉(`find / -name dt.jar`即可定位，找不到文件证明JDK没有安装)，一般JAVA_HOME目录下的结构是这样的**\n```\n├── jre\n│   ├── bin\n│   ├── lib  \n│    \n├── bin\n├── lib\n│    ├── bin\n│    ├── lib\n│    │     ├── dt.jar\n│    │     ├── tools.jar```\n\n---\n## 安装\n### Ubuntu\n#### 法1：apt安装\n```\napt list *openjdk*    \n或：apt-cache search java|grep jdk #列出版本，注意是apt不是apt-get\napt-get install openjdk-7-jdk```\n\n**设置环境变量**\n安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。\n编辑文件：`vi /etc/profile`\n在最后结尾处加入以下代码：\n```\n#set java environment\nJAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\nJRE_HOME=$JAVA_HOME/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n使修改立刻生效：`source /etc/profile`\n再次检查，看看配置文件是否修改正确。\n```\njava -version\njavac -version```\n\n\n---\n#### 法2：压缩包安装\n```\nmkdir /usr/java && cd /usr/java  #创建并进入目录\ncurl -O http://download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz\ntar -zxvf jdk-8u112-linux-x64.tar.gz\nmv jdk-8u112-linux-x64 jdk1.8.0_112  #如果名称本身为jdk1.8.0_112就不用执行这一步了```\n\n**设置环境变量**\n编辑文件：`vi /etc/profile`\n添加如下内容：\n```\n#set java environment\nJAVA_HOME=/usr/java/jdk1.8.0_112\nJRE_HOME=/usr/java/jdk1.8.0_112/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n\n让修改生效：`source /etc/profile`\n验证：`java -version`\n\n\n---\n### Centos\n#### 法1：yum安装\n```\nyum search java|grep jdk    #列出有哪些版本\nyum install java-1.8.0-openjdk-devel*```\n\n**设置环境变量**\n安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。\n编辑文件：`vi /etc/profile`\n在最后结尾处加入以下代码：\n```\n#set java environment\nJAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\nJRE_HOME=$JAVA_HOME/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n使修改立刻生效：`source /etc/profile`\n再次检查，看看配置文件是否修改正确。\n```\njava -version\njavac -version```\n\n---\n\n#### 法2：rpm包\n```\ncurl -O http://download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.rpm\nrpm -ivh jdk-8u112-linux-x64.rpm```\n\n**设置环境变量**\n编辑文件：`vi /etc/profile`\n添加如下内容：\n```\n#set java environment\nJAVA_HOME=/usr/java/jdk1.8.0_112\nJRE_HOME=/usr/java/jdk1.8.0_112/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n\n让修改生效：`source /etc/profile`\n验证：`java -version`\n\n---\n#### 法3：压缩包安装\n```\nmkdir /usr/java && cd /usr/java  #创建并进入目录\ncurl -O http://download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz\ntar -zxvf jdk-8u112-linux-x64.tar.gz\nmv jdk-8u112-linux-x64 jdk1.8.0_112  #如果名称本身为jdk1.8.0_112就不用执行这一步了```\n\n**设置环境变量**\n编辑文件：`vi /etc/profile`\n添加如下内容：\n```\n#set java environment\nJAVA_HOME=/usr/java/jdk1.8.0_112\nJRE_HOME=/usr/java/jdk1.8.0_112/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n\n让修改生效：`source /etc/profile`\n验证：`java -version`\n\n---\n\n### Mac、Windows\n官网下载安装包安装，Mac的一般是自动设置（没有设置的参考上文），Windows还要在高级设置中设置环境变量。\n\n\n\n---\n# 环境变量说明\n## yum、apt在线管理安装\nJava用alternatives进行版本控制，相应版本安装在**/usr/lib/jvm/**之后，会在alternatives中注册，在**/etc/alternatives**目录下会产生一些链接到**/usr/lib/jvm/**中刚安装好的jdk版本。\n\n在**/usr/bin**下面会有链接到**/etc/alternatives**的相应的文件。比如，/usr/bin下面会有一个链接文件java的映射关系如下：\n\n**/usr/bin/java**\\-->**/etc/alternatives/java**\n**/etc/alternatives/java**\\-->**/usr/lib/jvm/jre-1.7.0-openjdk.x86_64/bin/java**\n这样，java命令不用设置环境变量，就可以正常运行了。但如果对于tomcat或其他软件来说还是要设置环境变量。同样，如果安装新的版本jre/jdk，就会重新链接到最新安装的jre/jdk版本。当然，也可以使用**alternatives**修改所要使用的版本。\n\n**可以用验证一下**\n```\nwhich java   #得到Java的运行路径\nll /usr/bin/java |grep java  #得到Java指向alternatives的路径\nll /etc/alternatives/java |grep java   #得到Java的home路径如下\n/usr/lib/jvm/jre-1.8.0-openjdk.x86_64/bin/java```\n\n## rpm、deb包、压缩包安装\n默认会把jdk安装到**/usr/java/jdk1.8.0_112**，然后通过三层链接，链接到**/usr/bin/**具体链接如下：\n/usr/bin/java\\-->/usr/java/default/bin/java\\-->/usr/java/jdk1.8.0_112\n\n---\n\n","source":"_posts/环境搭建/2016-11-19-java-jdk环境搭建.md","raw":"---\ntitle: java jdk环境搭建\ncategories:\n  - 环境搭建\ntags:\n  - java jdk环境搭建\nabbrlink: 59\ndate: 2016-11-19 21:05:01\n---\n\n# Java(jre) 运行环境\n只提供Java程序基本的运行环境。\n\n\n## 安装\n### Ubuntu\n默认已经安装好了，可以运行命令升级。\n```\napt-get update\napt-get upgrate```\n或运行命令安装：\n```\napt list *openjdk*   #查看当前apt源有那些版本\napt-get install openjdk-7-jre```\n\n安装完后检查一下版本：`java -version`\n\n---\n### Centos\n```\nyum list *openjdk*   #查看当前yum源有那些版本\nyum install java-1.8.0-openjdk   #安装Java运行环境```\n\n安装完后检查一下版本：`java -version`\n\n\n---\n# JDK(jdk) 开发环境\n除了开发，任何涉及Java编译的情况都需要依赖jdk开发环境。安装JDK环境强烈建议先安装好JRE环境。\n**[JDK官网下载](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)**\n\n## 注意：环境变量设置错误\n**如果环境变量没有配置成功，可能是JAVA_HOME的路径不对,可以手动找到位置并替换掉(`find / -name dt.jar`即可定位，找不到文件证明JDK没有安装)，一般JAVA_HOME目录下的结构是这样的**\n```\n├── jre\n│   ├── bin\n│   ├── lib  \n│    \n├── bin\n├── lib\n│    ├── bin\n│    ├── lib\n│    │     ├── dt.jar\n│    │     ├── tools.jar```\n\n---\n## 安装\n### Ubuntu\n#### 法1：apt安装\n```\napt list *openjdk*    \n或：apt-cache search java|grep jdk #列出版本，注意是apt不是apt-get\napt-get install openjdk-7-jdk```\n\n**设置环境变量**\n安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。\n编辑文件：`vi /etc/profile`\n在最后结尾处加入以下代码：\n```\n#set java environment\nJAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\nJRE_HOME=$JAVA_HOME/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n使修改立刻生效：`source /etc/profile`\n再次检查，看看配置文件是否修改正确。\n```\njava -version\njavac -version```\n\n\n---\n#### 法2：压缩包安装\n```\nmkdir /usr/java && cd /usr/java  #创建并进入目录\ncurl -O http://download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz\ntar -zxvf jdk-8u112-linux-x64.tar.gz\nmv jdk-8u112-linux-x64 jdk1.8.0_112  #如果名称本身为jdk1.8.0_112就不用执行这一步了```\n\n**设置环境变量**\n编辑文件：`vi /etc/profile`\n添加如下内容：\n```\n#set java environment\nJAVA_HOME=/usr/java/jdk1.8.0_112\nJRE_HOME=/usr/java/jdk1.8.0_112/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n\n让修改生效：`source /etc/profile`\n验证：`java -version`\n\n\n---\n### Centos\n#### 法1：yum安装\n```\nyum search java|grep jdk    #列出有哪些版本\nyum install java-1.8.0-openjdk-devel*```\n\n**设置环境变量**\n安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。\n编辑文件：`vi /etc/profile`\n在最后结尾处加入以下代码：\n```\n#set java environment\nJAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-0.b15.el6_8.x86_64\nJRE_HOME=$JAVA_HOME/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n使修改立刻生效：`source /etc/profile`\n再次检查，看看配置文件是否修改正确。\n```\njava -version\njavac -version```\n\n---\n\n#### 法2：rpm包\n```\ncurl -O http://download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.rpm\nrpm -ivh jdk-8u112-linux-x64.rpm```\n\n**设置环境变量**\n编辑文件：`vi /etc/profile`\n添加如下内容：\n```\n#set java environment\nJAVA_HOME=/usr/java/jdk1.8.0_112\nJRE_HOME=/usr/java/jdk1.8.0_112/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n\n让修改生效：`source /etc/profile`\n验证：`java -version`\n\n---\n#### 法3：压缩包安装\n```\nmkdir /usr/java && cd /usr/java  #创建并进入目录\ncurl -O http://download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz\ntar -zxvf jdk-8u112-linux-x64.tar.gz\nmv jdk-8u112-linux-x64 jdk1.8.0_112  #如果名称本身为jdk1.8.0_112就不用执行这一步了```\n\n**设置环境变量**\n编辑文件：`vi /etc/profile`\n添加如下内容：\n```\n#set java environment\nJAVA_HOME=/usr/java/jdk1.8.0_112\nJRE_HOME=/usr/java/jdk1.8.0_112/jre\nCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\nPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\nexport JAVA_HOME JRE_HOME CLASS_PATH PATH```\n\n让修改生效：`source /etc/profile`\n验证：`java -version`\n\n---\n\n### Mac、Windows\n官网下载安装包安装，Mac的一般是自动设置（没有设置的参考上文），Windows还要在高级设置中设置环境变量。\n\n\n\n---\n# 环境变量说明\n## yum、apt在线管理安装\nJava用alternatives进行版本控制，相应版本安装在**/usr/lib/jvm/**之后，会在alternatives中注册，在**/etc/alternatives**目录下会产生一些链接到**/usr/lib/jvm/**中刚安装好的jdk版本。\n\n在**/usr/bin**下面会有链接到**/etc/alternatives**的相应的文件。比如，/usr/bin下面会有一个链接文件java的映射关系如下：\n\n**/usr/bin/java**\\-->**/etc/alternatives/java**\n**/etc/alternatives/java**\\-->**/usr/lib/jvm/jre-1.7.0-openjdk.x86_64/bin/java**\n这样，java命令不用设置环境变量，就可以正常运行了。但如果对于tomcat或其他软件来说还是要设置环境变量。同样，如果安装新的版本jre/jdk，就会重新链接到最新安装的jre/jdk版本。当然，也可以使用**alternatives**修改所要使用的版本。\n\n**可以用验证一下**\n```\nwhich java   #得到Java的运行路径\nll /usr/bin/java |grep java  #得到Java指向alternatives的路径\nll /etc/alternatives/java |grep java   #得到Java的home路径如下\n/usr/lib/jvm/jre-1.8.0-openjdk.x86_64/bin/java```\n\n## rpm、deb包、压缩包安装\n默认会把jdk安装到**/usr/java/jdk1.8.0_112**，然后通过三层链接，链接到**/usr/bin/**具体链接如下：\n/usr/bin/java\\-->/usr/java/default/bin/java\\-->/usr/java/jdk1.8.0_112\n\n---\n\n","slug":"环境搭建-2016-11-19-java-jdk环境搭建","published":1,"updated":"2016-11-21T02:17:09.080Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjnv002wd8pko1fqkl7t","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Java-jre-运行环境\"><a href=\"#Java-jre-运行环境\" class=\"headerlink\" title=\"Java(jre) 运行环境\"></a>Java(jre) 运行环境</h1><p>只提供Java程序基本的运行环境。</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h3><p>默认已经安装好了，可以运行命令升级。<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">apt-<span class=\"built_in\">get</span> upgrate</div></pre></td></tr></table></figure></p>\n<p>或运行命令安装：<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt <span class=\"built_in\">list</span> *openjdk*   <span class=\"comment\">#查看当前apt源有那些版本</span></div><div class=\"line\">apt-<span class=\"keyword\">get</span> install openjdk<span class=\"number\">-7</span>-jre</div></pre></td></tr></table></figure></p>\n<p>安装完后检查一下版本：<code>java -version</code></p>\n<hr>\n<h3 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h3><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum list *openjdk*   <span class=\"comment\">#查看当前yum源有那些版本</span></div><div class=\"line\">yum <span class=\"keyword\">install </span><span class=\"keyword\">java-1.8.0-openjdk </span>  <span class=\"comment\">#安装Java运行环境</span></div></pre></td></tr></table></figure>\n<p>安装完后检查一下版本：<code>java -version</code></p>\n<hr>\n<h1 id=\"JDK-jdk-开发环境\"><a href=\"#JDK-jdk-开发环境\" class=\"headerlink\" title=\"JDK(jdk) 开发环境\"></a>JDK(jdk) 开发环境</h1><p>除了开发，任何涉及Java编译的情况都需要依赖jdk开发环境。安装JDK环境强烈建议先安装好JRE环境。<br><strong><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"external\">JDK官网下载</a></strong></p>\n<h2 id=\"注意：环境变量设置错误\"><a href=\"#注意：环境变量设置错误\" class=\"headerlink\" title=\"注意：环境变量设置错误\"></a>注意：环境变量设置错误</h2><p><strong>如果环境变量没有配置成功，可能是JAVA_HOME的路径不对,可以手动找到位置并替换掉(<code>find / -name dt.jar</code>即可定位，找不到文件证明JDK没有安装)，一般JAVA_HOME目录下的结构是这样的</strong><br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">├── jre</div><div class=\"line\">│   ├── bin</div><div class=\"line\">│   ├── <span class=\"class\"><span class=\"keyword\">lib</span>  </span></div><div class=\"line\">│    </div><div class=\"line\">├── bin</div><div class=\"line\">├── <span class=\"class\"><span class=\"keyword\">lib</span></span></div><div class=\"line\">│    ├── bin</div><div class=\"line\">│    ├── <span class=\"class\"><span class=\"keyword\">lib</span></span></div><div class=\"line\">│    │     ├── dt.jar</div><div class=\"line\">│    │     ├── tools.jar</div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Ubuntu-1\"><a href=\"#Ubuntu-1\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h3><h4 id=\"法1：apt安装\"><a href=\"#法1：apt安装\" class=\"headerlink\" title=\"法1：apt安装\"></a>法1：apt安装</h4><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt list *openjdk*    </div><div class=\"line\">或：apt-<span class=\"keyword\">cache </span>search <span class=\"keyword\">java|grep </span><span class=\"keyword\">jdk </span><span class=\"comment\">#列出版本，注意是apt不是apt-get</span></div><div class=\"line\">apt-get <span class=\"keyword\">install </span>openjdk-7-<span class=\"keyword\">jdk</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。<br>编辑文件：<code>vi /etc/profile</code><br>在最后结尾处加入以下代码：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#set</span> java environment</div><div class=\"line\">JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.<span class=\"number\">0</span>-openjdk-<span class=\"number\">1.8</span>.<span class=\"number\">0.111</span>-<span class=\"number\">0</span><span class=\"selector-class\">.b15</span><span class=\"selector-class\">.el6_8</span><span class=\"selector-class\">.x86_64</span></div><div class=\"line\">JRE_HOME=<span class=\"variable\">$JAVA_HOME</span>/jre</div><div class=\"line\">CLASS_PATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/<span class=\"selector-tag\">dt</span><span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JAVA_HOME</span>/lib/tools<span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JRE_HOME</span>/lib</div><div class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$JRE_HOME</span>/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>使修改立刻生效：<code>source /etc/profile</code><br>再次检查，看看配置文件是否修改正确。<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">java -<span class=\"built_in\">version</span></div><div class=\"line\">javac -<span class=\"built_in\">version</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"法2：压缩包安装\"><a href=\"#法2：压缩包安装\" class=\"headerlink\" title=\"法2：压缩包安装\"></a>法2：压缩包安装</h4><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir <span class=\"meta-keyword\">/usr/</span>java &amp;&amp; cd <span class=\"meta-keyword\">/usr/</span>java  <span class=\"meta\">#创建并进入目录</span></div><div class=\"line\">curl -O http:<span class=\"comment\">//download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz</span></div><div class=\"line\">tar -zxvf jdk<span class=\"number\">-8</span>u112-linux-x64.tar.gz</div><div class=\"line\">mv jdk<span class=\"number\">-8</span>u112-linux-x64 jdk1<span class=\"number\">.8</span><span class=\"number\">.0</span>_112  <span class=\"meta\">#如果名称本身为jdk1.8.0_112就不用执行这一步了</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>编辑文件：<code>vi /etc/profile</code><br>添加如下内容：<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#set java environment</span></div><div class=\"line\">JAVA_HOME=<span class=\"regexp\">/usr/java</span><span class=\"regexp\">/jdk1.8.0_112</span></div><div class=\"line\">JRE_HOME=/usr<span class=\"regexp\">/java/jdk</span>1.<span class=\"number\">8.0_112</span>/jre</div><div class=\"line\">CLASS_PATH=.:$JAVA_HOME/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">dt</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JAVA_HOME</span>/<span class=\"title\">lib</span>/<span class=\"title\">tools</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JRE_HOME</span>/<span class=\"title\">lib</span></span></div><div class=\"line\">PATH=$<span class=\"symbol\">PATH:</span>$JAVA_HOME/<span class=\"symbol\">bin:</span>$JRE_HOME/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>让修改生效：<code>source /etc/profile</code><br>验证：<code>java -version</code></p>\n<hr>\n<h3 id=\"Centos-1\"><a href=\"#Centos-1\" class=\"headerlink\" title=\"Centos\"></a>Centos</h3><h4 id=\"法1：yum安装\"><a href=\"#法1：yum安装\" class=\"headerlink\" title=\"法1：yum安装\"></a>法1：yum安装</h4><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum search <span class=\"keyword\">java|grep </span><span class=\"keyword\">jdk </span>   <span class=\"comment\">#列出有哪些版本</span></div><div class=\"line\">yum <span class=\"keyword\">install </span><span class=\"keyword\">java-1.8.0-openjdk-devel*</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。<br>编辑文件：<code>vi /etc/profile</code><br>在最后结尾处加入以下代码：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#set</span> java environment</div><div class=\"line\">JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.<span class=\"number\">0</span>-openjdk-<span class=\"number\">1.8</span>.<span class=\"number\">0.111</span>-<span class=\"number\">0</span><span class=\"selector-class\">.b15</span><span class=\"selector-class\">.el6_8</span><span class=\"selector-class\">.x86_64</span></div><div class=\"line\">JRE_HOME=<span class=\"variable\">$JAVA_HOME</span>/jre</div><div class=\"line\">CLASS_PATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/<span class=\"selector-tag\">dt</span><span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JAVA_HOME</span>/lib/tools<span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JRE_HOME</span>/lib</div><div class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$JRE_HOME</span>/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>使修改立刻生效：<code>source /etc/profile</code><br>再次检查，看看配置文件是否修改正确。<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">java -<span class=\"built_in\">version</span></div><div class=\"line\">javac -<span class=\"built_in\">version</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"法2：rpm包\"><a href=\"#法2：rpm包\" class=\"headerlink\" title=\"法2：rpm包\"></a>法2：rpm包</h4><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -O <span class=\"string\">http:</span><span class=\"comment\">//download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.rpm</span></div><div class=\"line\">rpm -ivh jdk<span class=\"number\">-8</span>u112-linux-x64.rpm</div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>编辑文件：<code>vi /etc/profile</code><br>添加如下内容：<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#set java environment</span></div><div class=\"line\">JAVA_HOME=<span class=\"regexp\">/usr/java</span><span class=\"regexp\">/jdk1.8.0_112</span></div><div class=\"line\">JRE_HOME=/usr<span class=\"regexp\">/java/jdk</span>1.<span class=\"number\">8.0_112</span>/jre</div><div class=\"line\">CLASS_PATH=.:$JAVA_HOME/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">dt</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JAVA_HOME</span>/<span class=\"title\">lib</span>/<span class=\"title\">tools</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JRE_HOME</span>/<span class=\"title\">lib</span></span></div><div class=\"line\">PATH=$<span class=\"symbol\">PATH:</span>$JAVA_HOME/<span class=\"symbol\">bin:</span>$JRE_HOME/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>让修改生效：<code>source /etc/profile</code><br>验证：<code>java -version</code></p>\n<hr>\n<h4 id=\"法3：压缩包安装\"><a href=\"#法3：压缩包安装\" class=\"headerlink\" title=\"法3：压缩包安装\"></a>法3：压缩包安装</h4><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir <span class=\"meta-keyword\">/usr/</span>java &amp;&amp; cd <span class=\"meta-keyword\">/usr/</span>java  <span class=\"meta\">#创建并进入目录</span></div><div class=\"line\">curl -O http:<span class=\"comment\">//download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz</span></div><div class=\"line\">tar -zxvf jdk<span class=\"number\">-8</span>u112-linux-x64.tar.gz</div><div class=\"line\">mv jdk<span class=\"number\">-8</span>u112-linux-x64 jdk1<span class=\"number\">.8</span><span class=\"number\">.0</span>_112  <span class=\"meta\">#如果名称本身为jdk1.8.0_112就不用执行这一步了</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>编辑文件：<code>vi /etc/profile</code><br>添加如下内容：<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#set java environment</span></div><div class=\"line\">JAVA_HOME=<span class=\"regexp\">/usr/java</span><span class=\"regexp\">/jdk1.8.0_112</span></div><div class=\"line\">JRE_HOME=/usr<span class=\"regexp\">/java/jdk</span>1.<span class=\"number\">8.0_112</span>/jre</div><div class=\"line\">CLASS_PATH=.:$JAVA_HOME/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">dt</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JAVA_HOME</span>/<span class=\"title\">lib</span>/<span class=\"title\">tools</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JRE_HOME</span>/<span class=\"title\">lib</span></span></div><div class=\"line\">PATH=$<span class=\"symbol\">PATH:</span>$JAVA_HOME/<span class=\"symbol\">bin:</span>$JRE_HOME/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>让修改生效：<code>source /etc/profile</code><br>验证：<code>java -version</code></p>\n<hr>\n<h3 id=\"Mac、Windows\"><a href=\"#Mac、Windows\" class=\"headerlink\" title=\"Mac、Windows\"></a>Mac、Windows</h3><p>官网下载安装包安装，Mac的一般是自动设置（没有设置的参考上文），Windows还要在高级设置中设置环境变量。</p>\n<hr>\n<h1 id=\"环境变量说明\"><a href=\"#环境变量说明\" class=\"headerlink\" title=\"环境变量说明\"></a>环境变量说明</h1><h2 id=\"yum、apt在线管理安装\"><a href=\"#yum、apt在线管理安装\" class=\"headerlink\" title=\"yum、apt在线管理安装\"></a>yum、apt在线管理安装</h2><p>Java用alternatives进行版本控制，相应版本安装在<strong>/usr/lib/jvm/</strong>之后，会在alternatives中注册，在<strong>/etc/alternatives</strong>目录下会产生一些链接到<strong>/usr/lib/jvm/</strong>中刚安装好的jdk版本。</p>\n<p>在<strong>/usr/bin</strong>下面会有链接到<strong>/etc/alternatives</strong>的相应的文件。比如，/usr/bin下面会有一个链接文件java的映射关系如下：</p>\n<p><strong>/usr/bin/java</strong>--&gt;<strong>/etc/alternatives/java</strong><br><strong>/etc/alternatives/java</strong>--&gt;<strong>/usr/lib/jvm/jre-1.7.0-openjdk.x86_64/bin/java</strong><br>这样，java命令不用设置环境变量，就可以正常运行了。但如果对于tomcat或其他软件来说还是要设置环境变量。同样，如果安装新的版本jre/jdk，就会重新链接到最新安装的jre/jdk版本。当然，也可以使用<strong>alternatives</strong>修改所要使用的版本。</p>\n<p><strong>可以用验证一下</strong><br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">which java   <span class=\"comment\">#得到Java的运行路径</span></div><div class=\"line\">ll /usr/bin/java |grep java  <span class=\"comment\">#得到Java指向alternatives的路径</span></div><div class=\"line\">ll /etc/alternatives/java |grep java   <span class=\"comment\">#得到Java的home路径如下</span></div><div class=\"line\">/usr/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">jvm</span>/<span class=\"title\">jre</span>-1.8.0-<span class=\"title\">openjdk</span>.<span class=\"title\">x86_64</span>/<span class=\"title\">bin</span>/<span class=\"title\">java</span></span></div></pre></td></tr></table></figure></p>\n<h2 id=\"rpm、deb包、压缩包安装\"><a href=\"#rpm、deb包、压缩包安装\" class=\"headerlink\" title=\"rpm、deb包、压缩包安装\"></a>rpm、deb包、压缩包安装</h2><p>默认会把jdk安装到<strong>/usr/java/jdk1.8.0_112</strong>，然后通过三层链接，链接到<strong>/usr/bin/</strong>具体链接如下：<br>/usr/bin/java--&gt;/usr/java/default/bin/java--&gt;/usr/java/jdk1.8.0_112</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"Java-jre-运行环境\"><a href=\"#Java-jre-运行环境\" class=\"headerlink\" title=\"Java(jre) 运行环境\"></a>Java(jre) 运行环境</h1><p>只提供Java程序基本的运行环境。</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h3><p>默认已经安装好了，可以运行命令升级。<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">apt-<span class=\"built_in\">get</span> upgrate</div></pre></td></tr></table></figure></p>\n<p>或运行命令安装：<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt <span class=\"built_in\">list</span> *openjdk*   <span class=\"comment\">#查看当前apt源有那些版本</span></div><div class=\"line\">apt-<span class=\"keyword\">get</span> install openjdk<span class=\"number\">-7</span>-jre</div></pre></td></tr></table></figure></p>\n<p>安装完后检查一下版本：<code>java -version</code></p>\n<hr>\n<h3 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h3><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum list *openjdk*   <span class=\"comment\">#查看当前yum源有那些版本</span></div><div class=\"line\">yum <span class=\"keyword\">install </span><span class=\"keyword\">java-1.8.0-openjdk </span>  <span class=\"comment\">#安装Java运行环境</span></div></pre></td></tr></table></figure>\n<p>安装完后检查一下版本：<code>java -version</code></p>\n<hr>\n<h1 id=\"JDK-jdk-开发环境\"><a href=\"#JDK-jdk-开发环境\" class=\"headerlink\" title=\"JDK(jdk) 开发环境\"></a>JDK(jdk) 开发环境</h1><p>除了开发，任何涉及Java编译的情况都需要依赖jdk开发环境。安装JDK环境强烈建议先安装好JRE环境。<br><strong><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">JDK官网下载</a></strong></p>\n<h2 id=\"注意：环境变量设置错误\"><a href=\"#注意：环境变量设置错误\" class=\"headerlink\" title=\"注意：环境变量设置错误\"></a>注意：环境变量设置错误</h2><p><strong>如果环境变量没有配置成功，可能是JAVA_HOME的路径不对,可以手动找到位置并替换掉(<code>find / -name dt.jar</code>即可定位，找不到文件证明JDK没有安装)，一般JAVA_HOME目录下的结构是这样的</strong><br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">├── jre</div><div class=\"line\">│   ├── bin</div><div class=\"line\">│   ├── <span class=\"class\"><span class=\"keyword\">lib</span>  </span></div><div class=\"line\">│    </div><div class=\"line\">├── bin</div><div class=\"line\">├── <span class=\"class\"><span class=\"keyword\">lib</span></span></div><div class=\"line\">│    ├── bin</div><div class=\"line\">│    ├── <span class=\"class\"><span class=\"keyword\">lib</span></span></div><div class=\"line\">│    │     ├── dt.jar</div><div class=\"line\">│    │     ├── tools.jar</div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Ubuntu-1\"><a href=\"#Ubuntu-1\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h3><h4 id=\"法1：apt安装\"><a href=\"#法1：apt安装\" class=\"headerlink\" title=\"法1：apt安装\"></a>法1：apt安装</h4><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt list *openjdk*    </div><div class=\"line\">或：apt-<span class=\"keyword\">cache </span>search <span class=\"keyword\">java|grep </span><span class=\"keyword\">jdk </span><span class=\"comment\">#列出版本，注意是apt不是apt-get</span></div><div class=\"line\">apt-get <span class=\"keyword\">install </span>openjdk-7-<span class=\"keyword\">jdk</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。<br>编辑文件：<code>vi /etc/profile</code><br>在最后结尾处加入以下代码：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#set</span> java environment</div><div class=\"line\">JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.<span class=\"number\">0</span>-openjdk-<span class=\"number\">1.8</span>.<span class=\"number\">0.111</span>-<span class=\"number\">0</span><span class=\"selector-class\">.b15</span><span class=\"selector-class\">.el6_8</span><span class=\"selector-class\">.x86_64</span></div><div class=\"line\">JRE_HOME=<span class=\"variable\">$JAVA_HOME</span>/jre</div><div class=\"line\">CLASS_PATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/<span class=\"selector-tag\">dt</span><span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JAVA_HOME</span>/lib/tools<span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JRE_HOME</span>/lib</div><div class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$JRE_HOME</span>/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>使修改立刻生效：<code>source /etc/profile</code><br>再次检查，看看配置文件是否修改正确。<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">java -<span class=\"built_in\">version</span></div><div class=\"line\">javac -<span class=\"built_in\">version</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"法2：压缩包安装\"><a href=\"#法2：压缩包安装\" class=\"headerlink\" title=\"法2：压缩包安装\"></a>法2：压缩包安装</h4><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir <span class=\"meta-keyword\">/usr/</span>java &amp;&amp; cd <span class=\"meta-keyword\">/usr/</span>java  <span class=\"meta\">#创建并进入目录</span></div><div class=\"line\">curl -O http:<span class=\"comment\">//download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz</span></div><div class=\"line\">tar -zxvf jdk<span class=\"number\">-8</span>u112-linux-x64.tar.gz</div><div class=\"line\">mv jdk<span class=\"number\">-8</span>u112-linux-x64 jdk1<span class=\"number\">.8</span><span class=\"number\">.0</span>_112  <span class=\"meta\">#如果名称本身为jdk1.8.0_112就不用执行这一步了</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>编辑文件：<code>vi /etc/profile</code><br>添加如下内容：<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#set java environment</span></div><div class=\"line\">JAVA_HOME=<span class=\"regexp\">/usr/java</span><span class=\"regexp\">/jdk1.8.0_112</div><div class=\"line\">JRE_HOME=/usr</span><span class=\"regexp\">/java/jdk</span>1.<span class=\"number\">8.0_112</span>/jre</div><div class=\"line\">CLASS_PATH=.:$JAVA_HOME/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">dt</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JAVA_HOME</span>/<span class=\"title\">lib</span>/<span class=\"title\">tools</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JRE_HOME</span>/<span class=\"title\">lib</span></span></div><div class=\"line\">PATH=$<span class=\"symbol\">PATH:</span>$JAVA_HOME/<span class=\"symbol\">bin:</span>$JRE_HOME/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>让修改生效：<code>source /etc/profile</code><br>验证：<code>java -version</code></p>\n<hr>\n<h3 id=\"Centos-1\"><a href=\"#Centos-1\" class=\"headerlink\" title=\"Centos\"></a>Centos</h3><h4 id=\"法1：yum安装\"><a href=\"#法1：yum安装\" class=\"headerlink\" title=\"法1：yum安装\"></a>法1：yum安装</h4><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum search <span class=\"keyword\">java|grep </span><span class=\"keyword\">jdk </span>   <span class=\"comment\">#列出有哪些版本</span></div><div class=\"line\">yum <span class=\"keyword\">install </span><span class=\"keyword\">java-1.8.0-openjdk-devel*</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>安装好后默认可以运行程序，一些程序找不到jdk工作目录时就要手动设置。<br>编辑文件：<code>vi /etc/profile</code><br>在最后结尾处加入以下代码：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#set</span> java environment</div><div class=\"line\">JAVA_HOME=/usr/lib/jvm/java-<span class=\"number\">1.8</span>.<span class=\"number\">0</span>-openjdk-<span class=\"number\">1.8</span>.<span class=\"number\">0.111</span>-<span class=\"number\">0</span><span class=\"selector-class\">.b15</span><span class=\"selector-class\">.el6_8</span><span class=\"selector-class\">.x86_64</span></div><div class=\"line\">JRE_HOME=<span class=\"variable\">$JAVA_HOME</span>/jre</div><div class=\"line\">CLASS_PATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/<span class=\"selector-tag\">dt</span><span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JAVA_HOME</span>/lib/tools<span class=\"selector-class\">.jar</span>:<span class=\"variable\">$JRE_HOME</span>/lib</div><div class=\"line\">PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$JRE_HOME</span>/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>使修改立刻生效：<code>source /etc/profile</code><br>再次检查，看看配置文件是否修改正确。<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">java -<span class=\"built_in\">version</span></div><div class=\"line\">javac -<span class=\"built_in\">version</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"法2：rpm包\"><a href=\"#法2：rpm包\" class=\"headerlink\" title=\"法2：rpm包\"></a>法2：rpm包</h4><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -O <span class=\"string\">http:</span><span class=\"comment\">//download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.rpm</span></div><div class=\"line\">rpm -ivh jdk<span class=\"number\">-8</span>u112-linux-x64.rpm</div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>编辑文件：<code>vi /etc/profile</code><br>添加如下内容：<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#set java environment</span></div><div class=\"line\">JAVA_HOME=<span class=\"regexp\">/usr/java</span><span class=\"regexp\">/jdk1.8.0_112</div><div class=\"line\">JRE_HOME=/usr</span><span class=\"regexp\">/java/jdk</span>1.<span class=\"number\">8.0_112</span>/jre</div><div class=\"line\">CLASS_PATH=.:$JAVA_HOME/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">dt</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JAVA_HOME</span>/<span class=\"title\">lib</span>/<span class=\"title\">tools</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JRE_HOME</span>/<span class=\"title\">lib</span></span></div><div class=\"line\">PATH=$<span class=\"symbol\">PATH:</span>$JAVA_HOME/<span class=\"symbol\">bin:</span>$JRE_HOME/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>让修改生效：<code>source /etc/profile</code><br>验证：<code>java -version</code></p>\n<hr>\n<h4 id=\"法3：压缩包安装\"><a href=\"#法3：压缩包安装\" class=\"headerlink\" title=\"法3：压缩包安装\"></a>法3：压缩包安装</h4><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir <span class=\"meta-keyword\">/usr/</span>java &amp;&amp; cd <span class=\"meta-keyword\">/usr/</span>java  <span class=\"meta\">#创建并进入目录</span></div><div class=\"line\">curl -O http:<span class=\"comment\">//download.oracle.com/otn-pub/java/jdk/8u112-b15/jdk-8u112-linux-x64.tar.gz</span></div><div class=\"line\">tar -zxvf jdk<span class=\"number\">-8</span>u112-linux-x64.tar.gz</div><div class=\"line\">mv jdk<span class=\"number\">-8</span>u112-linux-x64 jdk1<span class=\"number\">.8</span><span class=\"number\">.0</span>_112  <span class=\"meta\">#如果名称本身为jdk1.8.0_112就不用执行这一步了</span></div></pre></td></tr></table></figure>\n<p><strong>设置环境变量</strong><br>编辑文件：<code>vi /etc/profile</code><br>添加如下内容：<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#set java environment</span></div><div class=\"line\">JAVA_HOME=<span class=\"regexp\">/usr/java</span><span class=\"regexp\">/jdk1.8.0_112</div><div class=\"line\">JRE_HOME=/usr</span><span class=\"regexp\">/java/jdk</span>1.<span class=\"number\">8.0_112</span>/jre</div><div class=\"line\">CLASS_PATH=.:$JAVA_HOME/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">dt</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JAVA_HOME</span>/<span class=\"title\">lib</span>/<span class=\"title\">tools</span>.<span class=\"title\">jar</span>:$<span class=\"title\">JRE_HOME</span>/<span class=\"title\">lib</span></span></div><div class=\"line\">PATH=$<span class=\"symbol\">PATH:</span>$JAVA_HOME/<span class=\"symbol\">bin:</span>$JRE_HOME/bin</div><div class=\"line\">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure></p>\n<p>让修改生效：<code>source /etc/profile</code><br>验证：<code>java -version</code></p>\n<hr>\n<h3 id=\"Mac、Windows\"><a href=\"#Mac、Windows\" class=\"headerlink\" title=\"Mac、Windows\"></a>Mac、Windows</h3><p>官网下载安装包安装，Mac的一般是自动设置（没有设置的参考上文），Windows还要在高级设置中设置环境变量。</p>\n<hr>\n<h1 id=\"环境变量说明\"><a href=\"#环境变量说明\" class=\"headerlink\" title=\"环境变量说明\"></a>环境变量说明</h1><h2 id=\"yum、apt在线管理安装\"><a href=\"#yum、apt在线管理安装\" class=\"headerlink\" title=\"yum、apt在线管理安装\"></a>yum、apt在线管理安装</h2><p>Java用alternatives进行版本控制，相应版本安装在<strong>/usr/lib/jvm/</strong>之后，会在alternatives中注册，在<strong>/etc/alternatives</strong>目录下会产生一些链接到<strong>/usr/lib/jvm/</strong>中刚安装好的jdk版本。</p>\n<p>在<strong>/usr/bin</strong>下面会有链接到<strong>/etc/alternatives</strong>的相应的文件。比如，/usr/bin下面会有一个链接文件java的映射关系如下：</p>\n<p><strong>/usr/bin/java</strong>--&gt;<strong>/etc/alternatives/java</strong><br><strong>/etc/alternatives/java</strong>--&gt;<strong>/usr/lib/jvm/jre-1.7.0-openjdk.x86_64/bin/java</strong><br>这样，java命令不用设置环境变量，就可以正常运行了。但如果对于tomcat或其他软件来说还是要设置环境变量。同样，如果安装新的版本jre/jdk，就会重新链接到最新安装的jre/jdk版本。当然，也可以使用<strong>alternatives</strong>修改所要使用的版本。</p>\n<p><strong>可以用验证一下</strong><br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">which java   <span class=\"comment\">#得到Java的运行路径</span></div><div class=\"line\">ll /usr/bin/java |grep java  <span class=\"comment\">#得到Java指向alternatives的路径</span></div><div class=\"line\">ll /etc/alternatives/java |grep java   <span class=\"comment\">#得到Java的home路径如下</span></div><div class=\"line\">/usr/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">jvm</span>/<span class=\"title\">jre</span>-1.8.0-<span class=\"title\">openjdk</span>.<span class=\"title\">x86_64</span>/<span class=\"title\">bin</span>/<span class=\"title\">java</span></span></div></pre></td></tr></table></figure></p>\n<h2 id=\"rpm、deb包、压缩包安装\"><a href=\"#rpm、deb包、压缩包安装\" class=\"headerlink\" title=\"rpm、deb包、压缩包安装\"></a>rpm、deb包、压缩包安装</h2><p>默认会把jdk安装到<strong>/usr/java/jdk1.8.0_112</strong>，然后通过三层链接，链接到<strong>/usr/bin/</strong>具体链接如下：<br>/usr/bin/java--&gt;/usr/java/default/bin/java--&gt;/usr/java/jdk1.8.0_112</p>\n<hr>\n"},{"title":"搭建shadowsocks服务器","abbrlink":13905,"date":"2016-11-21T08:50:39.000Z","_content":"\n\n目前 shadowsocks 服务已经受到了影响，不过部署在 25 端口目前还可用。\n\nshadowsocks 客户端会在本地开启一个 socks5 代理，通过此代理的网络访问请求由客户端发送至服务端，服务端发出请求，收到响应数据后再发回客户端。\n因此使用 shadowsocks 需要一台墙外的服务器来部署 shadowsocks 服务端。\n\n主流的 VPS（虚拟主机）服务器提供商有三家：\n\nlinode\ndigital ocean\nbandwagon（搬瓦工）\n下面的比上面的便宜。如果只是自用，bandwagon 足够。\n\n一般使用 paypal 绑定一个 visa 或 mastercard 信用卡来付款。注意要用国际 paypal 帐号，国内的是不能用外币付款的。\n\n# 服务端\n## 安装 shadowsocks\n\n### Debian/Ubuntu:\n```\napt-get install python-pip\npip install shadowsocks ```\n如果遇到第一个命令安装 python-pip 时找不到包的情况。pip 官方给出了一个安装脚本，可以自动安装 pip。先下载脚本，然后执行即可：\n```\nwget https://bootstrap.pypa.io/get-pip.py python get-pip.py ```\n\n### CentOS\n```\nyum install python-setuptools && easy_install pip\npip install shadowsocks ```\n\n### 源码编译\n```\ngit clone https://github.com/madeye/shadowsocks-libev.git```\n\n进入目录编译安装\n```\ncd shadowsocks-libev\n./configure --prefix=/usr\nmake && make install```\n\n配置服务及配置文件\n```\nmkdir -p /etc/shadowsocks-libev\ncp ./debian/shadowsocks-libev.init /etc/init.d/shadowsocks-libev\ncp ./debian/shadowsocks-libev.default /etc/default/shadowsocks-libev\ncp ./debian/config.json /etc/shadowsocks-libev/config.json\nchmod +x /etc/init.d/shadowsocks-libev```\n\n配置shadowsocks配置文件\n`vi /etc/shadowsocks-libev/config.json`\n```\n{\n          \"server\":\"vps的ip\",\n          \"server_port\":8388,   #服务器端口，与SSH端口不一样\n          \"local_port\":1080,\n          \"password\":\"barfoo!\", #认证密码\n          \"timeout\":60,\n          \"method\":\"aes-256-cfb\" #加密方式，推荐使用aes-256-cfb\n}```\n\n重启shadowsocks服务。\n```\n/etc/init.d/shadowsocks-libev stop\n/etc/init.d/shadowsocks-libev start```\n\n\n\n---\n## 编写配置文件\n\nshadowsocks 启动时的参数，如服务器端口，代理端口，登录密码等，可以通过启动时的**命令行参数**来设定，也可以通过** json 格式的配置文件设定**。推荐使用配置文件，方便查看和修改。\n\n用 **vi 新建**一个配置文件：`vi /etc/shadowsocks.json `\n然后输入如下内容：\n```\n{ \n   \"server\":\"my_server_ip\",       #服务器ip地址\n   \"server_port\":25,              #绑定的端口，端口最好小于1024，注意不要设置已经使用了的端口\n   \"local_address\": \"127.0.0.1\",  \n   \"local_port\":1080, \n   \"password\":\"mypassword\",       #连接密码\n    \"timeout\":300,                #超时时间（秒）\n   \"method\":\"aes-256-cfb\",        #加密方法\n   \"fast_open\": false }           #Linux 内核版本大于3.7，设置为true可降低延迟```\n\n如果需要配置多个SS账号，可以按照如下案例进行配置：\n```\n{\n\"server\":\"your_server_ip\",\n\"port_password\":{\n     \"8381\":\"password1\",\n     \"8382\":\"password2\",\n     \"8383\":\"password3\",\n     \"8384\":\"password4\"\n     },\n\"timeout\":300,\n\"method\":\"rc4-md5\",\n\"fast_open\":false,\n\"workers\":1\n}```\n\n## 启动 shadowsocks\n启动 shadowsocks 服务器的命令如下：\n```\nssserver -c /etc/shadowsocks.json           #启动服务\nssserver -c /etc/shadowsocks.json -d start  #后台启动服务\nssserver -c /etc/shadowsocks.json -d stop   #停止服务```\n\nshadowsocks 的日志保存在:** /var/log/shadowsocks.log**\n---\n# 一键安装脚本\n这里提供一键安装脚本\n**Ubuntu、Debian**\n[点我直接下载脚本文件](http://ofyfogrgx.bkt.clouddn.com/blog/20161121/172019083.sh)\n\n安装中出现的选择界面，请一律选择YES，然后回车。\n安装过程中脚本会提示输入server_port及password\nserver_port建议取小一些，如443,80等。\npassword自定\n安装完成后有提示。\n卸载：`name.sh uninstall`\n更新：`name.sh update`更新其实是卸载了重装，配置不会丢失。\nshadowsocks的配置文件位于：**/etc/shadowsocks-libev/config.json**可以编辑该文件从而修改密码、服务器端口及加密方式，修改之后记得保存重启。\n```\n/etc/init.d/shadowsocks-libev stop\n/etc/init.d/shadowsocks-libev start```\n脚本已加入开机自启。\n```\n#! /bin/bash\n#===============================================================================================\n#   System Required:  Debian or Ubuntu (32bit/64bit)\n#   Description:  Install Shadowsocks(libev) for Debian or Ubuntu\n#   Author: tennfy <admin@tennfy.com>\n#   Intro:  http://www.tennfy.com\n#===============================================================================================\n\nclear\necho \"#############################################################\"\necho \"# Install Shadowsocks(libev) for Debian or Ubuntu (32bit/64bit)\"\necho \"# Intro: http://www.tennfy.com\"\necho \"#\"\necho \"# Author: tennfy <admin@tennfy.com>\"\necho \"#\"\necho \"#############################################################\"\necho \"\"\n\nfunction check_sanity {\n\t# Do some sanity checking.\n\tif [ $(/usr/bin/id -u) != \"0\" ]\n\tthen\n\t\tdie 'Must be run by root user'\n\tfi\n\n\tif [ ! -f /etc/debian_version ]\n\tthen\n\t\tdie \"Distribution is not supported\"\n\tfi\n}\n\nfunction die {\n\techo \"ERROR: $1\" > /dev/null 1>&2\n\texit 1\n}\n\n############################### install function##################################\nfunction install_shadowsocks_tennfy(){\ncd $HOME\n\n# install\napt-get update\napt-get install -y --force-yes build-essential autoconf libtool libssl-dev git curl asciidoc xmlto libpcre3 libpcre3-dev\n\n#download source code\ngit clone https://github.com/madeye/shadowsocks-libev.git\n\n#compile install\ncd shadowsocks-libev\n./configure --prefix=/usr\nmake && make install\nmkdir -p /etc/shadowsocks-libev\ncp ./debian/shadowsocks-libev.init /etc/init.d/shadowsocks-libev\ncp ./debian/shadowsocks-libev.default /etc/default/shadowsocks-libev\nchmod +x /etc/init.d/shadowsocks-libev\n\n# Get IP address(Default No.1)\nIP=`curl -s checkip.dyndns.com | cut -d' ' -f 6  | cut -d'<' -f 1`\nif [ -z $IP ]; then\n   IP=`curl -s ifconfig.me/ip`\nfi\n\n#config setting\necho \"#############################################################\"\necho \"#\"\necho \"# Please input your shadowsocks server_port and password\"\necho \"#\"\necho \"#############################################################\"\necho \"\"\necho \"input server_port(443 is suggested):\"\nread serverport\necho \"input password:\"\nread shadowsockspwd\n\n# Config shadowsocks\ncat > /etc/shadowsocks-libev/config.json<<-EOF\n{\n    \"server\":\"${IP}\",\n    \"server_port\":${serverport},\n    \"local_port\":1080,\n    \"password\":\"${shadowsockspwd}\",\n    \"timeout\":60,\n    \"method\":\"rc4-md5\"\n}\nEOF\n\n#restart\n/etc/init.d/shadowsocks-libev start\n\n#start with boot\nupdate-rc.d shadowsocks-libev defaults\n\n#install successfully\n    echo \"\"\n    echo \"Congratulations, shadowsocks-libev install completed!\"\n    echo -e \"Your Server IP: ${IP}\"\n    echo -e \"Your Server Port: ${serverport}\"\n    echo -e \"Your Password: ${shadowsockspwd}\"\n    echo -e \"Your Local Port: 1080\"\n    echo -e \"Your Encryption Method:rc4-md5\"\n}\n############################### uninstall function##################################\nfunction uninstall_shadowsocks_tennfy(){\n#change the dir to shadowsocks-libev\ncd $HOME\ncd shadowsocks-libev\n\n#stop shadowsocks-libev process\n/etc/init.d/shadowsocks-libev stop\n\n#uninstall shadowsocks-libev\nmake uninstall\nmake clean\ncd ..\nrm -rf shadowsocks-libev\n\n# delete config file\nrm -rf /etc/shadowsocks-libev\n\n# delete shadowsocks-libev init file\nrm -f /etc/init.d/shadowsocks-libev\nrm -f /etc/default/shadowsocks-libev\n\n#delete start with boot\nupdate-rc.d -f shadowsocks-libev remove\n\necho \"Shadowsocks-libev uninstall success!\"\n\n}\n\n############################### update function##################################\nfunction update_shadowsocks_tennfy(){\n     uninstall_shadowsocks_tennfy\n     install_shadowsocks_tennfy\n\t echo \"Shadowsocks-libev update success!\"\n}\n############################### Initialization##################################\n# Make sure only root can run our script\ncheck_sanity\n\naction=$1\n[  -z $1 ] && action=install\ncase \"$action\" in\ninstall)\n    install_shadowsocks_tennfy\n    ;;\nuninstall)\n    uninstall_shadowsocks_tennfy\n    ;;\nupdate)\n    update_shadowsocks_tennfy\n    ;;\t\n*)\n    echo \"Arguments error! [${action} ]\"\n    echo \"Usage: `basename $0` {install|uninstall|update}\"\n    ;;\nesac```\n\n---\n# 客户端\n## 安装并启动 shadowsocks 客户端\n\nshadowsocks 支持 windows、Mac OS X、Linux、Android、iOS 等多个平台。不过 iOS 由于系统对应用后台运行的限制，推荐使用客户端内嵌的浏览器科学上网，给其他应用代理时需要每过几分钟重新启动一下 app。\n\nshadowsocks 项目 Github 主页在[这里](https://github.com/shadowsocks)。\n\n里面可以找到客户端下载地址。\n\n下载安装客户端以后，只需按服务器的配置填写 IP 地址、服务器端口、本地端口（如果没有本地端口选项，就是默认的 1080）、密码、加密方式等参数，启动就可以了。\n\n客户端支持全局代理和 PAC 代理两种方式，后者会使用一个脚本来自动检查一个网站是否在需要代理的网站列表中，自动选择直接连接或代理连接。\n\nPAC 列表可以在线更新，但是难免有收录不全的情况。这时可以选择关闭 shadowsocks 代理（实际上是取消对系统代理的配置，shadowsocks 客户端仍然保持工作），然后使用支持自定义规则的代理管理插件来实现自动切换代理，比如 switchyOmega。\n\n## 使用 switchyOmega 实现自动切换代理\n\nswitchyOmega 是 chrome 浏览器上一个很好用的代理管理插件。它的前身 switchySharp 更有名。\n\nchrome 应用商店本身需要翻墙才能访问，因此需要先在 shadowsocks 启动代理模式下下载安装，再关闭 shadowsocks 代理。\n\n安装完毕后，右击 switchyOmega 图标，选择选项，进入 switchOmega 配置界面。\n\n创建 shadowsocks 情景模式\n\n新建一个情景模式，比如叫 SS，代理协议选择 socks5，代理地址为 127.0.0.1，端口 1080。\n\n现在切换到 SS 情景模式就可以通过 shadowsocks 科学上网了。后面获取自动切换规则列表\n\n设置自动切换模式\n\n在设置界面选择自动切换模式，在 “切换规则” 中勾选“规则列表规则”，对应的情景模式选择刚刚新建的 SS。\n\n然后在下面的规则列表地址中填写\n\nhttps://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt\n\n规则列表格式选择 AutoProxy。\n\n然后点击立即更新情景模式， 更新完成后会有提示。\n\n点击左侧的 “应用选项”。然后单击 switchyOmega 图标，选择自动切换，就可以在访问“不存在的网站” 时自动切换到 shadowsocks 代理了。\n\n## 添加自定义规则\n\n如果遇到某个国外网站无法直接连接或速度太慢时，可以单击 switchyOmega 图标，选择 “添加条件”，情景模式选择 SS，就可以了。\n\n这时打开 switchyOmega 选项，在自动切换模式的切换规则中就可以看到刚刚添加的规则。可以在这里管理自定义的规则。\n\n导入和导出 switchyOmega 设置\n\n如果换了一台电脑，重新设置一遍 switchyOmega 就太麻烦了。可以在设置好的 switchyOmega 中导出设置文件，在另一个 chrome 浏览器中导入，就可以直接复制原来的设置了。\n\n在 switchyOmega 选项的左侧点击 “导入 / 导出”，点击“生成备份文件” 即可生成 switchyOmega 设置备份。点击 “从备份文件恢复” 可以导入备份\n\n---\n","source":"_posts/环境搭建/2016-11-21-搭建shadowsocks服务器.md","raw":"---\ntitle: 搭建shadowsocks服务器\ncategories:\n  - 环境搭建\ntags:\n  - 搭建shadowsocks服务器\n  - 搭梯子\nabbrlink: 13905\ndate: 2016-11-21 16:50:39\n---\n\n\n目前 shadowsocks 服务已经受到了影响，不过部署在 25 端口目前还可用。\n\nshadowsocks 客户端会在本地开启一个 socks5 代理，通过此代理的网络访问请求由客户端发送至服务端，服务端发出请求，收到响应数据后再发回客户端。\n因此使用 shadowsocks 需要一台墙外的服务器来部署 shadowsocks 服务端。\n\n主流的 VPS（虚拟主机）服务器提供商有三家：\n\nlinode\ndigital ocean\nbandwagon（搬瓦工）\n下面的比上面的便宜。如果只是自用，bandwagon 足够。\n\n一般使用 paypal 绑定一个 visa 或 mastercard 信用卡来付款。注意要用国际 paypal 帐号，国内的是不能用外币付款的。\n\n# 服务端\n## 安装 shadowsocks\n\n### Debian/Ubuntu:\n```\napt-get install python-pip\npip install shadowsocks ```\n如果遇到第一个命令安装 python-pip 时找不到包的情况。pip 官方给出了一个安装脚本，可以自动安装 pip。先下载脚本，然后执行即可：\n```\nwget https://bootstrap.pypa.io/get-pip.py python get-pip.py ```\n\n### CentOS\n```\nyum install python-setuptools && easy_install pip\npip install shadowsocks ```\n\n### 源码编译\n```\ngit clone https://github.com/madeye/shadowsocks-libev.git```\n\n进入目录编译安装\n```\ncd shadowsocks-libev\n./configure --prefix=/usr\nmake && make install```\n\n配置服务及配置文件\n```\nmkdir -p /etc/shadowsocks-libev\ncp ./debian/shadowsocks-libev.init /etc/init.d/shadowsocks-libev\ncp ./debian/shadowsocks-libev.default /etc/default/shadowsocks-libev\ncp ./debian/config.json /etc/shadowsocks-libev/config.json\nchmod +x /etc/init.d/shadowsocks-libev```\n\n配置shadowsocks配置文件\n`vi /etc/shadowsocks-libev/config.json`\n```\n{\n          \"server\":\"vps的ip\",\n          \"server_port\":8388,   #服务器端口，与SSH端口不一样\n          \"local_port\":1080,\n          \"password\":\"barfoo!\", #认证密码\n          \"timeout\":60,\n          \"method\":\"aes-256-cfb\" #加密方式，推荐使用aes-256-cfb\n}```\n\n重启shadowsocks服务。\n```\n/etc/init.d/shadowsocks-libev stop\n/etc/init.d/shadowsocks-libev start```\n\n\n\n---\n## 编写配置文件\n\nshadowsocks 启动时的参数，如服务器端口，代理端口，登录密码等，可以通过启动时的**命令行参数**来设定，也可以通过** json 格式的配置文件设定**。推荐使用配置文件，方便查看和修改。\n\n用 **vi 新建**一个配置文件：`vi /etc/shadowsocks.json `\n然后输入如下内容：\n```\n{ \n   \"server\":\"my_server_ip\",       #服务器ip地址\n   \"server_port\":25,              #绑定的端口，端口最好小于1024，注意不要设置已经使用了的端口\n   \"local_address\": \"127.0.0.1\",  \n   \"local_port\":1080, \n   \"password\":\"mypassword\",       #连接密码\n    \"timeout\":300,                #超时时间（秒）\n   \"method\":\"aes-256-cfb\",        #加密方法\n   \"fast_open\": false }           #Linux 内核版本大于3.7，设置为true可降低延迟```\n\n如果需要配置多个SS账号，可以按照如下案例进行配置：\n```\n{\n\"server\":\"your_server_ip\",\n\"port_password\":{\n     \"8381\":\"password1\",\n     \"8382\":\"password2\",\n     \"8383\":\"password3\",\n     \"8384\":\"password4\"\n     },\n\"timeout\":300,\n\"method\":\"rc4-md5\",\n\"fast_open\":false,\n\"workers\":1\n}```\n\n## 启动 shadowsocks\n启动 shadowsocks 服务器的命令如下：\n```\nssserver -c /etc/shadowsocks.json           #启动服务\nssserver -c /etc/shadowsocks.json -d start  #后台启动服务\nssserver -c /etc/shadowsocks.json -d stop   #停止服务```\n\nshadowsocks 的日志保存在:** /var/log/shadowsocks.log**\n---\n# 一键安装脚本\n这里提供一键安装脚本\n**Ubuntu、Debian**\n[点我直接下载脚本文件](http://ofyfogrgx.bkt.clouddn.com/blog/20161121/172019083.sh)\n\n安装中出现的选择界面，请一律选择YES，然后回车。\n安装过程中脚本会提示输入server_port及password\nserver_port建议取小一些，如443,80等。\npassword自定\n安装完成后有提示。\n卸载：`name.sh uninstall`\n更新：`name.sh update`更新其实是卸载了重装，配置不会丢失。\nshadowsocks的配置文件位于：**/etc/shadowsocks-libev/config.json**可以编辑该文件从而修改密码、服务器端口及加密方式，修改之后记得保存重启。\n```\n/etc/init.d/shadowsocks-libev stop\n/etc/init.d/shadowsocks-libev start```\n脚本已加入开机自启。\n```\n#! /bin/bash\n#===============================================================================================\n#   System Required:  Debian or Ubuntu (32bit/64bit)\n#   Description:  Install Shadowsocks(libev) for Debian or Ubuntu\n#   Author: tennfy <admin@tennfy.com>\n#   Intro:  http://www.tennfy.com\n#===============================================================================================\n\nclear\necho \"#############################################################\"\necho \"# Install Shadowsocks(libev) for Debian or Ubuntu (32bit/64bit)\"\necho \"# Intro: http://www.tennfy.com\"\necho \"#\"\necho \"# Author: tennfy <admin@tennfy.com>\"\necho \"#\"\necho \"#############################################################\"\necho \"\"\n\nfunction check_sanity {\n\t# Do some sanity checking.\n\tif [ $(/usr/bin/id -u) != \"0\" ]\n\tthen\n\t\tdie 'Must be run by root user'\n\tfi\n\n\tif [ ! -f /etc/debian_version ]\n\tthen\n\t\tdie \"Distribution is not supported\"\n\tfi\n}\n\nfunction die {\n\techo \"ERROR: $1\" > /dev/null 1>&2\n\texit 1\n}\n\n############################### install function##################################\nfunction install_shadowsocks_tennfy(){\ncd $HOME\n\n# install\napt-get update\napt-get install -y --force-yes build-essential autoconf libtool libssl-dev git curl asciidoc xmlto libpcre3 libpcre3-dev\n\n#download source code\ngit clone https://github.com/madeye/shadowsocks-libev.git\n\n#compile install\ncd shadowsocks-libev\n./configure --prefix=/usr\nmake && make install\nmkdir -p /etc/shadowsocks-libev\ncp ./debian/shadowsocks-libev.init /etc/init.d/shadowsocks-libev\ncp ./debian/shadowsocks-libev.default /etc/default/shadowsocks-libev\nchmod +x /etc/init.d/shadowsocks-libev\n\n# Get IP address(Default No.1)\nIP=`curl -s checkip.dyndns.com | cut -d' ' -f 6  | cut -d'<' -f 1`\nif [ -z $IP ]; then\n   IP=`curl -s ifconfig.me/ip`\nfi\n\n#config setting\necho \"#############################################################\"\necho \"#\"\necho \"# Please input your shadowsocks server_port and password\"\necho \"#\"\necho \"#############################################################\"\necho \"\"\necho \"input server_port(443 is suggested):\"\nread serverport\necho \"input password:\"\nread shadowsockspwd\n\n# Config shadowsocks\ncat > /etc/shadowsocks-libev/config.json<<-EOF\n{\n    \"server\":\"${IP}\",\n    \"server_port\":${serverport},\n    \"local_port\":1080,\n    \"password\":\"${shadowsockspwd}\",\n    \"timeout\":60,\n    \"method\":\"rc4-md5\"\n}\nEOF\n\n#restart\n/etc/init.d/shadowsocks-libev start\n\n#start with boot\nupdate-rc.d shadowsocks-libev defaults\n\n#install successfully\n    echo \"\"\n    echo \"Congratulations, shadowsocks-libev install completed!\"\n    echo -e \"Your Server IP: ${IP}\"\n    echo -e \"Your Server Port: ${serverport}\"\n    echo -e \"Your Password: ${shadowsockspwd}\"\n    echo -e \"Your Local Port: 1080\"\n    echo -e \"Your Encryption Method:rc4-md5\"\n}\n############################### uninstall function##################################\nfunction uninstall_shadowsocks_tennfy(){\n#change the dir to shadowsocks-libev\ncd $HOME\ncd shadowsocks-libev\n\n#stop shadowsocks-libev process\n/etc/init.d/shadowsocks-libev stop\n\n#uninstall shadowsocks-libev\nmake uninstall\nmake clean\ncd ..\nrm -rf shadowsocks-libev\n\n# delete config file\nrm -rf /etc/shadowsocks-libev\n\n# delete shadowsocks-libev init file\nrm -f /etc/init.d/shadowsocks-libev\nrm -f /etc/default/shadowsocks-libev\n\n#delete start with boot\nupdate-rc.d -f shadowsocks-libev remove\n\necho \"Shadowsocks-libev uninstall success!\"\n\n}\n\n############################### update function##################################\nfunction update_shadowsocks_tennfy(){\n     uninstall_shadowsocks_tennfy\n     install_shadowsocks_tennfy\n\t echo \"Shadowsocks-libev update success!\"\n}\n############################### Initialization##################################\n# Make sure only root can run our script\ncheck_sanity\n\naction=$1\n[  -z $1 ] && action=install\ncase \"$action\" in\ninstall)\n    install_shadowsocks_tennfy\n    ;;\nuninstall)\n    uninstall_shadowsocks_tennfy\n    ;;\nupdate)\n    update_shadowsocks_tennfy\n    ;;\t\n*)\n    echo \"Arguments error! [${action} ]\"\n    echo \"Usage: `basename $0` {install|uninstall|update}\"\n    ;;\nesac```\n\n---\n# 客户端\n## 安装并启动 shadowsocks 客户端\n\nshadowsocks 支持 windows、Mac OS X、Linux、Android、iOS 等多个平台。不过 iOS 由于系统对应用后台运行的限制，推荐使用客户端内嵌的浏览器科学上网，给其他应用代理时需要每过几分钟重新启动一下 app。\n\nshadowsocks 项目 Github 主页在[这里](https://github.com/shadowsocks)。\n\n里面可以找到客户端下载地址。\n\n下载安装客户端以后，只需按服务器的配置填写 IP 地址、服务器端口、本地端口（如果没有本地端口选项，就是默认的 1080）、密码、加密方式等参数，启动就可以了。\n\n客户端支持全局代理和 PAC 代理两种方式，后者会使用一个脚本来自动检查一个网站是否在需要代理的网站列表中，自动选择直接连接或代理连接。\n\nPAC 列表可以在线更新，但是难免有收录不全的情况。这时可以选择关闭 shadowsocks 代理（实际上是取消对系统代理的配置，shadowsocks 客户端仍然保持工作），然后使用支持自定义规则的代理管理插件来实现自动切换代理，比如 switchyOmega。\n\n## 使用 switchyOmega 实现自动切换代理\n\nswitchyOmega 是 chrome 浏览器上一个很好用的代理管理插件。它的前身 switchySharp 更有名。\n\nchrome 应用商店本身需要翻墙才能访问，因此需要先在 shadowsocks 启动代理模式下下载安装，再关闭 shadowsocks 代理。\n\n安装完毕后，右击 switchyOmega 图标，选择选项，进入 switchOmega 配置界面。\n\n创建 shadowsocks 情景模式\n\n新建一个情景模式，比如叫 SS，代理协议选择 socks5，代理地址为 127.0.0.1，端口 1080。\n\n现在切换到 SS 情景模式就可以通过 shadowsocks 科学上网了。后面获取自动切换规则列表\n\n设置自动切换模式\n\n在设置界面选择自动切换模式，在 “切换规则” 中勾选“规则列表规则”，对应的情景模式选择刚刚新建的 SS。\n\n然后在下面的规则列表地址中填写\n\nhttps://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt\n\n规则列表格式选择 AutoProxy。\n\n然后点击立即更新情景模式， 更新完成后会有提示。\n\n点击左侧的 “应用选项”。然后单击 switchyOmega 图标，选择自动切换，就可以在访问“不存在的网站” 时自动切换到 shadowsocks 代理了。\n\n## 添加自定义规则\n\n如果遇到某个国外网站无法直接连接或速度太慢时，可以单击 switchyOmega 图标，选择 “添加条件”，情景模式选择 SS，就可以了。\n\n这时打开 switchyOmega 选项，在自动切换模式的切换规则中就可以看到刚刚添加的规则。可以在这里管理自定义的规则。\n\n导入和导出 switchyOmega 设置\n\n如果换了一台电脑，重新设置一遍 switchyOmega 就太麻烦了。可以在设置好的 switchyOmega 中导出设置文件，在另一个 chrome 浏览器中导入，就可以直接复制原来的设置了。\n\n在 switchyOmega 选项的左侧点击 “导入 / 导出”，点击“生成备份文件” 即可生成 switchyOmega 设置备份。点击 “从备份文件恢复” 可以导入备份\n\n---\n","slug":"环境搭建-2016-11-21-搭建shadowsocks服务器","published":1,"updated":"2016-11-21T09:31:56.916Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjny002yd8pkwnkn2xco","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>目前 shadowsocks 服务已经受到了影响，不过部署在 25 端口目前还可用。</p>\n<p>shadowsocks 客户端会在本地开启一个 socks5 代理，通过此代理的网络访问请求由客户端发送至服务端，服务端发出请求，收到响应数据后再发回客户端。<br>因此使用 shadowsocks 需要一台墙外的服务器来部署 shadowsocks 服务端。</p>\n<p>主流的 VPS（虚拟主机）服务器提供商有三家：</p>\n<p>linode<br>digital ocean<br>bandwagon（搬瓦工）<br>下面的比上面的便宜。如果只是自用，bandwagon 足够。</p>\n<p>一般使用 paypal 绑定一个 visa 或 mastercard 信用卡来付款。注意要用国际 paypal 帐号，国内的是不能用外币付款的。</p>\n<h1 id=\"服务端\"><a href=\"#服务端\" class=\"headerlink\" title=\"服务端\"></a>服务端</h1><h2 id=\"安装-shadowsocks\"><a href=\"#安装-shadowsocks\" class=\"headerlink\" title=\"安装 shadowsocks\"></a>安装 shadowsocks</h2><h3 id=\"Debian-Ubuntu\"><a href=\"#Debian-Ubuntu\" class=\"headerlink\" title=\"Debian/Ubuntu:\"></a>Debian/Ubuntu:</h3><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-get <span class=\"keyword\">install</span> python-pip</div><div class=\"line\">pip <span class=\"keyword\">install</span> shadowsocks</div></pre></td></tr></table></figure>\n<p>如果遇到第一个命令安装 python-pip 时找不到包的情况。pip 官方给出了一个安装脚本，可以自动安装 pip。先下载脚本，然后执行即可：<br><figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">wget </span><span class=\"string\">https:</span>//<span class=\"string\">bootstrap.</span><span class=\"string\">pypa.</span><span class=\"string\">io/</span><span class=\"built_in\">get-pip.py</span> <span class=\"string\">python </span><span class=\"built_in\">get-pip.py</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"CentOS\"><a href=\"#CentOS\" class=\"headerlink\" title=\"CentOS\"></a>CentOS</h3><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> python-setuptools &amp;&amp; easy_install pip</div><div class=\"line\">pip <span class=\"keyword\">install</span> shadowsocks</div></pre></td></tr></table></figure>\n<h3 id=\"源码编译\"><a href=\"#源码编译\" class=\"headerlink\" title=\"源码编译\"></a>源码编译</h3><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/madeye/shadowsocks-libev.git</div></pre></td></tr></table></figure>\n<p>进入目录编译安装<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> shadowsocks-libev</div><div class=\"line\">./configure --prefix=/usr</div><div class=\"line\"><span class=\"keyword\">make</span> &amp;&amp; <span class=\"keyword\">make</span> install</div></pre></td></tr></table></figure></p>\n<p>配置服务及配置文件<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir -p <span class=\"regexp\">/etc/</span>shadowsocks-libev</div><div class=\"line\">cp .<span class=\"regexp\">/debian/</span>shadowsocks-libev.init <span class=\"regexp\">/etc/</span>init.d/shadowsocks-libev</div><div class=\"line\">cp .<span class=\"regexp\">/debian/</span>shadowsocks-libev.<span class=\"keyword\">default</span> <span class=\"regexp\">/etc/</span><span class=\"keyword\">default</span>/shadowsocks-libev</div><div class=\"line\">cp .<span class=\"regexp\">/debian/</span>config.json <span class=\"regexp\">/etc/</span>shadowsocks-libev/config.json</div><div class=\"line\">chmod +x <span class=\"regexp\">/etc/</span>init.d/shadowsocks-libev</div></pre></td></tr></table></figure></p>\n<p>配置shadowsocks配置文件<br><code>vi /etc/shadowsocks-libev/config.json</code><br><figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">          <span class=\"string\">\"server\"</span>:<span class=\"string\">\"vps的ip\"</span>,</div><div class=\"line\">          <span class=\"string\">\"server_port\"</span>:<span class=\"number\">8388</span>,   <span class=\"meta\">#服务器端口，与SSH端口不一样</span></div><div class=\"line\">          <span class=\"string\">\"local_port\"</span>:<span class=\"number\">1080</span>,</div><div class=\"line\">          <span class=\"string\">\"password\"</span>:<span class=\"string\">\"barfoo!\"</span>, <span class=\"meta\">#认证密码</span></div><div class=\"line\">          <span class=\"string\">\"timeout\"</span>:<span class=\"number\">60</span>,</div><div class=\"line\">          <span class=\"string\">\"method\"</span>:<span class=\"string\">\"aes-256-cfb\"</span> <span class=\"meta\">#加密方式，推荐使用aes-256-cfb</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>重启shadowsocks服务。<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">stop</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">start</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"编写配置文件\"><a href=\"#编写配置文件\" class=\"headerlink\" title=\"编写配置文件\"></a>编写配置文件</h2><p>shadowsocks 启动时的参数，如服务器端口，代理端口，登录密码等，可以通过启动时的<strong>命令行参数</strong>来设定，也可以通过<strong> json 格式的配置文件设定</strong>。推荐使用配置文件，方便查看和修改。</p>\n<p>用 <strong>vi 新建</strong>一个配置文件：<code>vi /etc/shadowsocks.json</code><br>然后输入如下内容：<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123; </div><div class=\"line\">   <span class=\"string\">\"server\"</span>:<span class=\"string\">\"my_server_ip\"</span>,       <span class=\"comment\">#服务器ip地址</span></div><div class=\"line\">   <span class=\"string\">\"server_port\"</span>:<span class=\"number\">25</span>,              <span class=\"comment\">#绑定的端口，端口最好小于1024，注意不要设置已经使用了的端口</span></div><div class=\"line\">   <span class=\"string\">\"local_address\"</span>: <span class=\"string\">\"127.0.0.1\"</span>,  </div><div class=\"line\">   <span class=\"string\">\"local_port\"</span>:<span class=\"number\">1080</span>, </div><div class=\"line\">   <span class=\"string\">\"password\"</span>:<span class=\"string\">\"mypassword\"</span>,       <span class=\"comment\">#连接密码</span></div><div class=\"line\">    <span class=\"string\">\"timeout\"</span>:<span class=\"number\">300</span>,                <span class=\"comment\">#超时时间（秒）</span></div><div class=\"line\">   <span class=\"string\">\"method\"</span>:<span class=\"string\">\"aes-256-cfb\"</span>,        <span class=\"comment\">#加密方法</span></div><div class=\"line\">   <span class=\"string\">\"fast_open\"</span>: <span class=\"literal\">false</span> &#125;           <span class=\"comment\">#Linux 内核版本大于3.7，设置为true可降低延迟</span></div></pre></td></tr></table></figure></p>\n<p>如果需要配置多个SS账号，可以按照如下案例进行配置：<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\"><span class=\"attr\">\"server\"</span>:<span class=\"string\">\"your_server_ip\"</span>,</div><div class=\"line\"><span class=\"attr\">\"port_password\"</span>:&#123;</div><div class=\"line\">     <span class=\"attr\">\"8381\"</span>:<span class=\"string\">\"password1\"</span>,</div><div class=\"line\">     <span class=\"attr\">\"8382\"</span>:<span class=\"string\">\"password2\"</span>,</div><div class=\"line\">     <span class=\"attr\">\"8383\"</span>:<span class=\"string\">\"password3\"</span>,</div><div class=\"line\">     <span class=\"attr\">\"8384\"</span>:<span class=\"string\">\"password4\"</span></div><div class=\"line\">     &#125;,</div><div class=\"line\"><span class=\"attr\">\"timeout\"</span>:<span class=\"number\">300</span>,</div><div class=\"line\"><span class=\"attr\">\"method\"</span>:<span class=\"string\">\"rc4-md5\"</span>,</div><div class=\"line\"><span class=\"attr\">\"fast_open\"</span>:<span class=\"literal\">false</span>,</div><div class=\"line\"><span class=\"attr\">\"workers\"</span>:<span class=\"number\">1</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"启动-shadowsocks\"><a href=\"#启动-shadowsocks\" class=\"headerlink\" title=\"启动 shadowsocks\"></a>启动 shadowsocks</h2><p>启动 shadowsocks 服务器的命令如下：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssserver -c <span class=\"regexp\">/etc/</span>shadowsocks.json           <span class=\"comment\">#启动服务</span></div><div class=\"line\">ssserver -c <span class=\"regexp\">/etc/</span>shadowsocks.json -d start  <span class=\"comment\">#后台启动服务</span></div><div class=\"line\">ssserver -c <span class=\"regexp\">/etc/</span>shadowsocks.json -d stop   <span class=\"comment\">#停止服务</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"shadowsocks-的日志保存在-var-log-shadowsocks-log\"><a href=\"#shadowsocks-的日志保存在-var-log-shadowsocks-log\" class=\"headerlink\" title=\"shadowsocks 的日志保存在: /var/log/shadowsocks.log\"></a>shadowsocks 的日志保存在:<strong> /var/log/shadowsocks.log</strong></h2><h1 id=\"一键安装脚本\"><a href=\"#一键安装脚本\" class=\"headerlink\" title=\"一键安装脚本\"></a>一键安装脚本</h1><p>这里提供一键安装脚本<br><strong>Ubuntu、Debian</strong><br><a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161121/172019083.sh\" target=\"_blank\" rel=\"external\">点我直接下载脚本文件</a></p>\n<p>安装中出现的选择界面，请一律选择YES，然后回车。<br>安装过程中脚本会提示输入server_port及password<br>server_port建议取小一些，如443,80等。<br>password自定<br>安装完成后有提示。<br>卸载：<code>name.sh uninstall</code><br>更新：<code>name.sh update</code>更新其实是卸载了重装，配置不会丢失。<br>shadowsocks的配置文件位于：<strong>/etc/shadowsocks-libev/config.json</strong>可以编辑该文件从而修改密码、服务器端口及加密方式，修改之后记得保存重启。<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">stop</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">start</span></div></pre></td></tr></table></figure></p>\n<p>脚本已加入开机自启。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#! /bin/bash</span></div><div class=\"line\"><span class=\"comment\">#===============================================================================================</span></div><div class=\"line\"><span class=\"comment\">#   System Required:  Debian or Ubuntu (32bit/64bit)</span></div><div class=\"line\"><span class=\"comment\">#   Description:  Install Shadowsocks(libev) for Debian or Ubuntu</span></div><div class=\"line\"><span class=\"comment\">#   Author: tennfy &lt;admin@tennfy.com&gt;</span></div><div class=\"line\"><span class=\"comment\">#   Intro:  http://www.tennfy.com</span></div><div class=\"line\"><span class=\"comment\">#===============================================================================================</span></div><div class=\"line\"></div><div class=\"line\">clear</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Install Shadowsocks(libev) for Debian or Ubuntu (32bit/64bit)\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Intro: http://www.tennfy.com\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Author: tennfy &lt;admin@tennfy.com&gt;\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">function</span> check_sanity &#123;</div><div class=\"line\">\t<span class=\"comment\"># Do some sanity checking.</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> [ $(/usr/bin/id -u) != <span class=\"string\">\"0\"</span> ]</div><div class=\"line\">\t<span class=\"keyword\">then</span></div><div class=\"line\">\t\tdie <span class=\"string\">'Must be run by root user'</span></div><div class=\"line\">\t<span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span> [ ! <span class=\"_\">-f</span> /etc/debian_version ]</div><div class=\"line\">\t<span class=\"keyword\">then</span></div><div class=\"line\">\t\tdie <span class=\"string\">\"Distribution is not supported\"</span></div><div class=\"line\">\t<span class=\"keyword\">fi</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">function</span> die &#123;</div><div class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"ERROR: <span class=\"variable\">$1</span>\"</span> &gt; /dev/null 1&gt;&amp;2</div><div class=\"line\">\t<span class=\"built_in\">exit</span> 1</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">############################### install function##################################</span></div><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">install_shadowsocks_tennfy</span></span>()&#123;</div><div class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$HOME</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># install</span></div><div class=\"line\">apt-get update</div><div class=\"line\">apt-get install -y --force-yes build-essential autoconf libtool libssl-dev git curl asciidoc xmlto libpcre3 libpcre3-dev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#download source code</span></div><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/madeye/shadowsocks-libev.git</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#compile install</span></div><div class=\"line\"><span class=\"built_in\">cd</span> shadowsocks-libev</div><div class=\"line\">./configure --prefix=/usr</div><div class=\"line\">make &amp;&amp; make install</div><div class=\"line\">mkdir -p /etc/shadowsocks-libev</div><div class=\"line\">cp ./debian/shadowsocks-libev.init /etc/init.d/shadowsocks-libev</div><div class=\"line\">cp ./debian/shadowsocks-libev.default /etc/default/shadowsocks-libev</div><div class=\"line\">chmod +x /etc/init.d/shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Get IP address(Default No.1)</span></div><div class=\"line\">IP=`curl <span class=\"_\">-s</span> checkip.dyndns.com | cut <span class=\"_\">-d</span><span class=\"string\">' '</span> <span class=\"_\">-f</span> 6  | cut <span class=\"_\">-d</span><span class=\"string\">'&lt;'</span> <span class=\"_\">-f</span> 1`</div><div class=\"line\"><span class=\"keyword\">if</span> [ -z <span class=\"variable\">$IP</span> ]; <span class=\"keyword\">then</span></div><div class=\"line\">   IP=`curl <span class=\"_\">-s</span> ifconfig.me/ip`</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#config setting</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Please input your shadowsocks server_port and password\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"input server_port(443 is suggested):\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> serverport</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"input password:\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> shadowsockspwd</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Config shadowsocks</span></div><div class=\"line\">cat &gt; /etc/shadowsocks-libev/config.json&lt;&lt;-EOF</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"server\"</span>:<span class=\"string\">\"<span class=\"variable\">$&#123;IP&#125;</span>\"</span>,</div><div class=\"line\">    <span class=\"string\">\"server_port\"</span>:<span class=\"variable\">$&#123;serverport&#125;</span>,</div><div class=\"line\">    <span class=\"string\">\"local_port\"</span>:1080,</div><div class=\"line\">    <span class=\"string\">\"password\"</span>:<span class=\"string\">\"<span class=\"variable\">$&#123;shadowsockspwd&#125;</span>\"</span>,</div><div class=\"line\">    <span class=\"string\">\"timeout\"</span>:60,</div><div class=\"line\">    <span class=\"string\">\"method\"</span>:<span class=\"string\">\"rc4-md5\"</span></div><div class=\"line\">&#125;</div><div class=\"line\">EOF</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#restart</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev start</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#start with boot</span></div><div class=\"line\">update-rc.d shadowsocks-libev defaults</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#install successfully</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Congratulations, shadowsocks-libev install completed!\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Server IP: <span class=\"variable\">$&#123;IP&#125;</span>\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Server Port: <span class=\"variable\">$&#123;serverport&#125;</span>\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Password: <span class=\"variable\">$&#123;shadowsockspwd&#125;</span>\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Local Port: 1080\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Encryption Method:rc4-md5\"</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">############################### uninstall function##################################</span></div><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">uninstall_shadowsocks_tennfy</span></span>()&#123;</div><div class=\"line\"><span class=\"comment\">#change the dir to shadowsocks-libev</span></div><div class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$HOME</span></div><div class=\"line\"><span class=\"built_in\">cd</span> shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#stop shadowsocks-libev process</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev stop</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#uninstall shadowsocks-libev</span></div><div class=\"line\">make uninstall</div><div class=\"line\">make clean</div><div class=\"line\"><span class=\"built_in\">cd</span> ..</div><div class=\"line\">rm -rf shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># delete config file</span></div><div class=\"line\">rm -rf /etc/shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># delete shadowsocks-libev init file</span></div><div class=\"line\">rm <span class=\"_\">-f</span> /etc/init.d/shadowsocks-libev</div><div class=\"line\">rm <span class=\"_\">-f</span> /etc/default/shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#delete start with boot</span></div><div class=\"line\">update-rc.d <span class=\"_\">-f</span> shadowsocks-libev remove</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Shadowsocks-libev uninstall success!\"</span></div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">############################### update function##################################</span></div><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">update_shadowsocks_tennfy</span></span>()&#123;</div><div class=\"line\">     uninstall_shadowsocks_tennfy</div><div class=\"line\">     install_shadowsocks_tennfy</div><div class=\"line\">\t <span class=\"built_in\">echo</span> <span class=\"string\">\"Shadowsocks-libev update success!\"</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">############################### Initialization##################################</span></div><div class=\"line\"><span class=\"comment\"># Make sure only root can run our script</span></div><div class=\"line\">check_sanity</div><div class=\"line\"></div><div class=\"line\">action=<span class=\"variable\">$1</span></div><div class=\"line\">[  -z <span class=\"variable\">$1</span> ] &amp;&amp; action=install</div><div class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$action</span>\"</span> <span class=\"keyword\">in</span></div><div class=\"line\">install)</div><div class=\"line\">    install_shadowsocks_tennfy</div><div class=\"line\">    ;;</div><div class=\"line\">uninstall)</div><div class=\"line\">    uninstall_shadowsocks_tennfy</div><div class=\"line\">    ;;</div><div class=\"line\">update)</div><div class=\"line\">    update_shadowsocks_tennfy</div><div class=\"line\">    ;;\t</div><div class=\"line\">*)</div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Arguments error! [<span class=\"variable\">$&#123;action&#125;</span> ]\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Usage: `basename <span class=\"variable\">$0</span>` &#123;install|uninstall|update&#125;\"</span></div><div class=\"line\">    ;;</div><div class=\"line\"><span class=\"keyword\">esac</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h1><h2 id=\"安装并启动-shadowsocks-客户端\"><a href=\"#安装并启动-shadowsocks-客户端\" class=\"headerlink\" title=\"安装并启动 shadowsocks 客户端\"></a>安装并启动 shadowsocks 客户端</h2><p>shadowsocks 支持 windows、Mac OS X、Linux、Android、iOS 等多个平台。不过 iOS 由于系统对应用后台运行的限制，推荐使用客户端内嵌的浏览器科学上网，给其他应用代理时需要每过几分钟重新启动一下 app。</p>\n<p>shadowsocks 项目 Github 主页在<a href=\"https://github.com/shadowsocks\" target=\"_blank\" rel=\"external\">这里</a>。</p>\n<p>里面可以找到客户端下载地址。</p>\n<p>下载安装客户端以后，只需按服务器的配置填写 IP 地址、服务器端口、本地端口（如果没有本地端口选项，就是默认的 1080）、密码、加密方式等参数，启动就可以了。</p>\n<p>客户端支持全局代理和 PAC 代理两种方式，后者会使用一个脚本来自动检查一个网站是否在需要代理的网站列表中，自动选择直接连接或代理连接。</p>\n<p>PAC 列表可以在线更新，但是难免有收录不全的情况。这时可以选择关闭 shadowsocks 代理（实际上是取消对系统代理的配置，shadowsocks 客户端仍然保持工作），然后使用支持自定义规则的代理管理插件来实现自动切换代理，比如 switchyOmega。</p>\n<h2 id=\"使用-switchyOmega-实现自动切换代理\"><a href=\"#使用-switchyOmega-实现自动切换代理\" class=\"headerlink\" title=\"使用 switchyOmega 实现自动切换代理\"></a>使用 switchyOmega 实现自动切换代理</h2><p>switchyOmega 是 chrome 浏览器上一个很好用的代理管理插件。它的前身 switchySharp 更有名。</p>\n<p>chrome 应用商店本身需要翻墙才能访问，因此需要先在 shadowsocks 启动代理模式下下载安装，再关闭 shadowsocks 代理。</p>\n<p>安装完毕后，右击 switchyOmega 图标，选择选项，进入 switchOmega 配置界面。</p>\n<p>创建 shadowsocks 情景模式</p>\n<p>新建一个情景模式，比如叫 SS，代理协议选择 socks5，代理地址为 127.0.0.1，端口 1080。</p>\n<p>现在切换到 SS 情景模式就可以通过 shadowsocks 科学上网了。后面获取自动切换规则列表</p>\n<p>设置自动切换模式</p>\n<p>在设置界面选择自动切换模式，在 “切换规则” 中勾选“规则列表规则”，对应的情景模式选择刚刚新建的 SS。</p>\n<p>然后在下面的规则列表地址中填写</p>\n<p><a href=\"https://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt\" target=\"_blank\" rel=\"external\">https://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt</a></p>\n<p>规则列表格式选择 AutoProxy。</p>\n<p>然后点击立即更新情景模式， 更新完成后会有提示。</p>\n<p>点击左侧的 “应用选项”。然后单击 switchyOmega 图标，选择自动切换，就可以在访问“不存在的网站” 时自动切换到 shadowsocks 代理了。</p>\n<h2 id=\"添加自定义规则\"><a href=\"#添加自定义规则\" class=\"headerlink\" title=\"添加自定义规则\"></a>添加自定义规则</h2><p>如果遇到某个国外网站无法直接连接或速度太慢时，可以单击 switchyOmega 图标，选择 “添加条件”，情景模式选择 SS，就可以了。</p>\n<p>这时打开 switchyOmega 选项，在自动切换模式的切换规则中就可以看到刚刚添加的规则。可以在这里管理自定义的规则。</p>\n<p>导入和导出 switchyOmega 设置</p>\n<p>如果换了一台电脑，重新设置一遍 switchyOmega 就太麻烦了。可以在设置好的 switchyOmega 中导出设置文件，在另一个 chrome 浏览器中导入，就可以直接复制原来的设置了。</p>\n<p>在 switchyOmega 选项的左侧点击 “导入 / 导出”，点击“生成备份文件” 即可生成 switchyOmega 设置备份。点击 “从备份文件恢复” 可以导入备份</p>\n<hr>\n","excerpt":"","more":"<p>目前 shadowsocks 服务已经受到了影响，不过部署在 25 端口目前还可用。</p>\n<p>shadowsocks 客户端会在本地开启一个 socks5 代理，通过此代理的网络访问请求由客户端发送至服务端，服务端发出请求，收到响应数据后再发回客户端。<br>因此使用 shadowsocks 需要一台墙外的服务器来部署 shadowsocks 服务端。</p>\n<p>主流的 VPS（虚拟主机）服务器提供商有三家：</p>\n<p>linode<br>digital ocean<br>bandwagon（搬瓦工）<br>下面的比上面的便宜。如果只是自用，bandwagon 足够。</p>\n<p>一般使用 paypal 绑定一个 visa 或 mastercard 信用卡来付款。注意要用国际 paypal 帐号，国内的是不能用外币付款的。</p>\n<h1 id=\"服务端\"><a href=\"#服务端\" class=\"headerlink\" title=\"服务端\"></a>服务端</h1><h2 id=\"安装-shadowsocks\"><a href=\"#安装-shadowsocks\" class=\"headerlink\" title=\"安装 shadowsocks\"></a>安装 shadowsocks</h2><h3 id=\"Debian-Ubuntu\"><a href=\"#Debian-Ubuntu\" class=\"headerlink\" title=\"Debian/Ubuntu:\"></a>Debian/Ubuntu:</h3><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-get <span class=\"keyword\">install</span> python-pip</div><div class=\"line\">pip <span class=\"keyword\">install</span> shadowsocks</div></pre></td></tr></table></figure>\n<p>如果遇到第一个命令安装 python-pip 时找不到包的情况。pip 官方给出了一个安装脚本，可以自动安装 pip。先下载脚本，然后执行即可：<br><figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">wget </span><span class=\"string\">https:</span>//<span class=\"string\">bootstrap.</span><span class=\"string\">pypa.</span><span class=\"string\">io/</span><span class=\"built_in\">get-pip.py</span> <span class=\"string\">python </span><span class=\"built_in\">get-pip.py</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"CentOS\"><a href=\"#CentOS\" class=\"headerlink\" title=\"CentOS\"></a>CentOS</h3><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> python-setuptools &amp;&amp; easy_install pip</div><div class=\"line\">pip <span class=\"keyword\">install</span> shadowsocks</div></pre></td></tr></table></figure>\n<h3 id=\"源码编译\"><a href=\"#源码编译\" class=\"headerlink\" title=\"源码编译\"></a>源码编译</h3><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">clone</span> <span class=\"title\">https</span>://github.com/madeye/shadowsocks-libev.git</div></pre></td></tr></table></figure>\n<p>进入目录编译安装<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> shadowsocks-libev</div><div class=\"line\">./configure --prefix=/usr</div><div class=\"line\"><span class=\"keyword\">make</span> &amp;&amp; <span class=\"keyword\">make</span> install</div></pre></td></tr></table></figure></p>\n<p>配置服务及配置文件<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir -p <span class=\"regexp\">/etc/</span>shadowsocks-libev</div><div class=\"line\">cp .<span class=\"regexp\">/debian/</span>shadowsocks-libev.init <span class=\"regexp\">/etc/</span>init.d/shadowsocks-libev</div><div class=\"line\">cp .<span class=\"regexp\">/debian/</span>shadowsocks-libev.<span class=\"keyword\">default</span> <span class=\"regexp\">/etc/</span><span class=\"keyword\">default</span>/shadowsocks-libev</div><div class=\"line\">cp .<span class=\"regexp\">/debian/</span>config.json <span class=\"regexp\">/etc/</span>shadowsocks-libev/config.json</div><div class=\"line\">chmod +x <span class=\"regexp\">/etc/</span>init.d/shadowsocks-libev</div></pre></td></tr></table></figure></p>\n<p>配置shadowsocks配置文件<br><code>vi /etc/shadowsocks-libev/config.json</code><br><figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">          <span class=\"string\">\"server\"</span>:<span class=\"string\">\"vps的ip\"</span>,</div><div class=\"line\">          <span class=\"string\">\"server_port\"</span>:<span class=\"number\">8388</span>,   <span class=\"meta\">#服务器端口，与SSH端口不一样</span></div><div class=\"line\">          <span class=\"string\">\"local_port\"</span>:<span class=\"number\">1080</span>,</div><div class=\"line\">          <span class=\"string\">\"password\"</span>:<span class=\"string\">\"barfoo!\"</span>, <span class=\"meta\">#认证密码</span></div><div class=\"line\">          <span class=\"string\">\"timeout\"</span>:<span class=\"number\">60</span>,</div><div class=\"line\">          <span class=\"string\">\"method\"</span>:<span class=\"string\">\"aes-256-cfb\"</span> <span class=\"meta\">#加密方式，推荐使用aes-256-cfb</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>重启shadowsocks服务。<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">stop</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">start</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"编写配置文件\"><a href=\"#编写配置文件\" class=\"headerlink\" title=\"编写配置文件\"></a>编写配置文件</h2><p>shadowsocks 启动时的参数，如服务器端口，代理端口，登录密码等，可以通过启动时的<strong>命令行参数</strong>来设定，也可以通过<strong> json 格式的配置文件设定</strong>。推荐使用配置文件，方便查看和修改。</p>\n<p>用 <strong>vi 新建</strong>一个配置文件：<code>vi /etc/shadowsocks.json</code><br>然后输入如下内容：<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123; </div><div class=\"line\">   <span class=\"string\">\"server\"</span>:<span class=\"string\">\"my_server_ip\"</span>,       <span class=\"comment\">#服务器ip地址</span></div><div class=\"line\">   <span class=\"string\">\"server_port\"</span>:<span class=\"number\">25</span>,              <span class=\"comment\">#绑定的端口，端口最好小于1024，注意不要设置已经使用了的端口</span></div><div class=\"line\">   <span class=\"string\">\"local_address\"</span>: <span class=\"string\">\"127.0.0.1\"</span>,  </div><div class=\"line\">   <span class=\"string\">\"local_port\"</span>:<span class=\"number\">1080</span>, </div><div class=\"line\">   <span class=\"string\">\"password\"</span>:<span class=\"string\">\"mypassword\"</span>,       <span class=\"comment\">#连接密码</span></div><div class=\"line\">    <span class=\"string\">\"timeout\"</span>:<span class=\"number\">300</span>,                <span class=\"comment\">#超时时间（秒）</span></div><div class=\"line\">   <span class=\"string\">\"method\"</span>:<span class=\"string\">\"aes-256-cfb\"</span>,        <span class=\"comment\">#加密方法</span></div><div class=\"line\">   <span class=\"string\">\"fast_open\"</span>: <span class=\"literal\">false</span> &#125;           <span class=\"comment\">#Linux 内核版本大于3.7，设置为true可降低延迟</span></div></pre></td></tr></table></figure></p>\n<p>如果需要配置多个SS账号，可以按照如下案例进行配置：<br><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\"><span class=\"attr\">\"server\"</span>:<span class=\"string\">\"your_server_ip\"</span>,</div><div class=\"line\"><span class=\"attr\">\"port_password\"</span>:&#123;</div><div class=\"line\">     <span class=\"attr\">\"8381\"</span>:<span class=\"string\">\"password1\"</span>,</div><div class=\"line\">     <span class=\"attr\">\"8382\"</span>:<span class=\"string\">\"password2\"</span>,</div><div class=\"line\">     <span class=\"attr\">\"8383\"</span>:<span class=\"string\">\"password3\"</span>,</div><div class=\"line\">     <span class=\"attr\">\"8384\"</span>:<span class=\"string\">\"password4\"</span></div><div class=\"line\">     &#125;,</div><div class=\"line\"><span class=\"attr\">\"timeout\"</span>:<span class=\"number\">300</span>,</div><div class=\"line\"><span class=\"attr\">\"method\"</span>:<span class=\"string\">\"rc4-md5\"</span>,</div><div class=\"line\"><span class=\"attr\">\"fast_open\"</span>:<span class=\"literal\">false</span>,</div><div class=\"line\"><span class=\"attr\">\"workers\"</span>:<span class=\"number\">1</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"启动-shadowsocks\"><a href=\"#启动-shadowsocks\" class=\"headerlink\" title=\"启动 shadowsocks\"></a>启动 shadowsocks</h2><p>启动 shadowsocks 服务器的命令如下：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ssserver -c <span class=\"regexp\">/etc/</span>shadowsocks.json           <span class=\"comment\">#启动服务</span></div><div class=\"line\">ssserver -c <span class=\"regexp\">/etc/</span>shadowsocks.json -d start  <span class=\"comment\">#后台启动服务</span></div><div class=\"line\">ssserver -c <span class=\"regexp\">/etc/</span>shadowsocks.json -d stop   <span class=\"comment\">#停止服务</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"shadowsocks-的日志保存在-var-log-shadowsocks-log\"><a href=\"#shadowsocks-的日志保存在-var-log-shadowsocks-log\" class=\"headerlink\" title=\"shadowsocks 的日志保存在: /var/log/shadowsocks.log\"></a>shadowsocks 的日志保存在:<strong> /var/log/shadowsocks.log</strong></h2><h1 id=\"一键安装脚本\"><a href=\"#一键安装脚本\" class=\"headerlink\" title=\"一键安装脚本\"></a>一键安装脚本</h1><p>这里提供一键安装脚本<br><strong>Ubuntu、Debian</strong><br><a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161121/172019083.sh\">点我直接下载脚本文件</a></p>\n<p>安装中出现的选择界面，请一律选择YES，然后回车。<br>安装过程中脚本会提示输入server_port及password<br>server_port建议取小一些，如443,80等。<br>password自定<br>安装完成后有提示。<br>卸载：<code>name.sh uninstall</code><br>更新：<code>name.sh update</code>更新其实是卸载了重装，配置不会丢失。<br>shadowsocks的配置文件位于：<strong>/etc/shadowsocks-libev/config.json</strong>可以编辑该文件从而修改密码、服务器端口及加密方式，修改之后记得保存重启。<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">stop</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev <span class=\"literal\">start</span></div></pre></td></tr></table></figure></p>\n<p>脚本已加入开机自启。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#! /bin/bash</span></div><div class=\"line\"><span class=\"comment\">#===============================================================================================</span></div><div class=\"line\"><span class=\"comment\">#   System Required:  Debian or Ubuntu (32bit/64bit)</span></div><div class=\"line\"><span class=\"comment\">#   Description:  Install Shadowsocks(libev) for Debian or Ubuntu</span></div><div class=\"line\"><span class=\"comment\">#   Author: tennfy &lt;admin@tennfy.com&gt;</span></div><div class=\"line\"><span class=\"comment\">#   Intro:  http://www.tennfy.com</span></div><div class=\"line\"><span class=\"comment\">#===============================================================================================</span></div><div class=\"line\"></div><div class=\"line\">clear</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Install Shadowsocks(libev) for Debian or Ubuntu (32bit/64bit)\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Intro: http://www.tennfy.com\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Author: tennfy &lt;admin@tennfy.com&gt;\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">function</span> check_sanity &#123;</div><div class=\"line\">\t<span class=\"comment\"># Do some sanity checking.</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> [ $(/usr/bin/id -u) != <span class=\"string\">\"0\"</span> ]</div><div class=\"line\">\t<span class=\"keyword\">then</span></div><div class=\"line\">\t\tdie <span class=\"string\">'Must be run by root user'</span></div><div class=\"line\">\t<span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span> [ ! <span class=\"_\">-f</span> /etc/debian_version ]</div><div class=\"line\">\t<span class=\"keyword\">then</span></div><div class=\"line\">\t\tdie <span class=\"string\">\"Distribution is not supported\"</span></div><div class=\"line\">\t<span class=\"keyword\">fi</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">function</span> die &#123;</div><div class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"ERROR: <span class=\"variable\">$1</span>\"</span> &gt; /dev/null 1&gt;&amp;2</div><div class=\"line\">\t<span class=\"built_in\">exit</span> 1</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">############################### install function##################################</span></div><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">install_shadowsocks_tennfy</span></span>()&#123;</div><div class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$HOME</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># install</span></div><div class=\"line\">apt-get update</div><div class=\"line\">apt-get install -y --force-yes build-essential autoconf libtool libssl-dev git curl asciidoc xmlto libpcre3 libpcre3-dev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#download source code</span></div><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/madeye/shadowsocks-libev.git</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#compile install</span></div><div class=\"line\"><span class=\"built_in\">cd</span> shadowsocks-libev</div><div class=\"line\">./configure --prefix=/usr</div><div class=\"line\">make &amp;&amp; make install</div><div class=\"line\">mkdir -p /etc/shadowsocks-libev</div><div class=\"line\">cp ./debian/shadowsocks-libev.init /etc/init.d/shadowsocks-libev</div><div class=\"line\">cp ./debian/shadowsocks-libev.default /etc/default/shadowsocks-libev</div><div class=\"line\">chmod +x /etc/init.d/shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Get IP address(Default No.1)</span></div><div class=\"line\">IP=`curl <span class=\"_\">-s</span> checkip.dyndns.com | cut <span class=\"_\">-d</span><span class=\"string\">' '</span> <span class=\"_\">-f</span> 6  | cut <span class=\"_\">-d</span><span class=\"string\">'&lt;'</span> <span class=\"_\">-f</span> 1`</div><div class=\"line\"><span class=\"keyword\">if</span> [ -z <span class=\"variable\">$IP</span> ]; <span class=\"keyword\">then</span></div><div class=\"line\">   IP=`curl <span class=\"_\">-s</span> ifconfig.me/ip`</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#config setting</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"# Please input your shadowsocks server_port and password\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"#############################################################\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"input server_port(443 is suggested):\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> serverport</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"input password:\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> shadowsockspwd</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Config shadowsocks</span></div><div class=\"line\">cat &gt; /etc/shadowsocks-libev/config.json&lt;&lt;-EOF</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"server\"</span>:<span class=\"string\">\"<span class=\"variable\">$&#123;IP&#125;</span>\"</span>,</div><div class=\"line\">    <span class=\"string\">\"server_port\"</span>:<span class=\"variable\">$&#123;serverport&#125;</span>,</div><div class=\"line\">    <span class=\"string\">\"local_port\"</span>:1080,</div><div class=\"line\">    <span class=\"string\">\"password\"</span>:<span class=\"string\">\"<span class=\"variable\">$&#123;shadowsockspwd&#125;</span>\"</span>,</div><div class=\"line\">    <span class=\"string\">\"timeout\"</span>:60,</div><div class=\"line\">    <span class=\"string\">\"method\"</span>:<span class=\"string\">\"rc4-md5\"</span></div><div class=\"line\">&#125;</div><div class=\"line\">EOF</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#restart</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev start</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#start with boot</span></div><div class=\"line\">update-rc.d shadowsocks-libev defaults</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#install successfully</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Congratulations, shadowsocks-libev install completed!\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Server IP: <span class=\"variable\">$&#123;IP&#125;</span>\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Server Port: <span class=\"variable\">$&#123;serverport&#125;</span>\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Password: <span class=\"variable\">$&#123;shadowsockspwd&#125;</span>\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Local Port: 1080\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"Your Encryption Method:rc4-md5\"</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">############################### uninstall function##################################</span></div><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">uninstall_shadowsocks_tennfy</span></span>()&#123;</div><div class=\"line\"><span class=\"comment\">#change the dir to shadowsocks-libev</span></div><div class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$HOME</span></div><div class=\"line\"><span class=\"built_in\">cd</span> shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#stop shadowsocks-libev process</span></div><div class=\"line\">/etc/init.d/shadowsocks-libev stop</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#uninstall shadowsocks-libev</span></div><div class=\"line\">make uninstall</div><div class=\"line\">make clean</div><div class=\"line\"><span class=\"built_in\">cd</span> ..</div><div class=\"line\">rm -rf shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># delete config file</span></div><div class=\"line\">rm -rf /etc/shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># delete shadowsocks-libev init file</span></div><div class=\"line\">rm <span class=\"_\">-f</span> /etc/init.d/shadowsocks-libev</div><div class=\"line\">rm <span class=\"_\">-f</span> /etc/default/shadowsocks-libev</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#delete start with boot</span></div><div class=\"line\">update-rc.d <span class=\"_\">-f</span> shadowsocks-libev remove</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Shadowsocks-libev uninstall success!\"</span></div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">############################### update function##################################</span></div><div class=\"line\"><span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">update_shadowsocks_tennfy</span></span>()&#123;</div><div class=\"line\">     uninstall_shadowsocks_tennfy</div><div class=\"line\">     install_shadowsocks_tennfy</div><div class=\"line\">\t <span class=\"built_in\">echo</span> <span class=\"string\">\"Shadowsocks-libev update success!\"</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">############################### Initialization##################################</span></div><div class=\"line\"><span class=\"comment\"># Make sure only root can run our script</span></div><div class=\"line\">check_sanity</div><div class=\"line\"></div><div class=\"line\">action=<span class=\"variable\">$1</span></div><div class=\"line\">[  -z <span class=\"variable\">$1</span> ] &amp;&amp; action=install</div><div class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\"<span class=\"variable\">$action</span>\"</span> <span class=\"keyword\">in</span></div><div class=\"line\">install)</div><div class=\"line\">    install_shadowsocks_tennfy</div><div class=\"line\">    ;;</div><div class=\"line\">uninstall)</div><div class=\"line\">    uninstall_shadowsocks_tennfy</div><div class=\"line\">    ;;</div><div class=\"line\">update)</div><div class=\"line\">    update_shadowsocks_tennfy</div><div class=\"line\">    ;;\t</div><div class=\"line\">*)</div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Arguments error! [<span class=\"variable\">$&#123;action&#125;</span> ]\"</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"Usage: `basename <span class=\"variable\">$0</span>` &#123;install|uninstall|update&#125;\"</span></div><div class=\"line\">    ;;</div><div class=\"line\"><span class=\"keyword\">esac</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"客户端\"><a href=\"#客户端\" class=\"headerlink\" title=\"客户端\"></a>客户端</h1><h2 id=\"安装并启动-shadowsocks-客户端\"><a href=\"#安装并启动-shadowsocks-客户端\" class=\"headerlink\" title=\"安装并启动 shadowsocks 客户端\"></a>安装并启动 shadowsocks 客户端</h2><p>shadowsocks 支持 windows、Mac OS X、Linux、Android、iOS 等多个平台。不过 iOS 由于系统对应用后台运行的限制，推荐使用客户端内嵌的浏览器科学上网，给其他应用代理时需要每过几分钟重新启动一下 app。</p>\n<p>shadowsocks 项目 Github 主页在<a href=\"https://github.com/shadowsocks\">这里</a>。</p>\n<p>里面可以找到客户端下载地址。</p>\n<p>下载安装客户端以后，只需按服务器的配置填写 IP 地址、服务器端口、本地端口（如果没有本地端口选项，就是默认的 1080）、密码、加密方式等参数，启动就可以了。</p>\n<p>客户端支持全局代理和 PAC 代理两种方式，后者会使用一个脚本来自动检查一个网站是否在需要代理的网站列表中，自动选择直接连接或代理连接。</p>\n<p>PAC 列表可以在线更新，但是难免有收录不全的情况。这时可以选择关闭 shadowsocks 代理（实际上是取消对系统代理的配置，shadowsocks 客户端仍然保持工作），然后使用支持自定义规则的代理管理插件来实现自动切换代理，比如 switchyOmega。</p>\n<h2 id=\"使用-switchyOmega-实现自动切换代理\"><a href=\"#使用-switchyOmega-实现自动切换代理\" class=\"headerlink\" title=\"使用 switchyOmega 实现自动切换代理\"></a>使用 switchyOmega 实现自动切换代理</h2><p>switchyOmega 是 chrome 浏览器上一个很好用的代理管理插件。它的前身 switchySharp 更有名。</p>\n<p>chrome 应用商店本身需要翻墙才能访问，因此需要先在 shadowsocks 启动代理模式下下载安装，再关闭 shadowsocks 代理。</p>\n<p>安装完毕后，右击 switchyOmega 图标，选择选项，进入 switchOmega 配置界面。</p>\n<p>创建 shadowsocks 情景模式</p>\n<p>新建一个情景模式，比如叫 SS，代理协议选择 socks5，代理地址为 127.0.0.1，端口 1080。</p>\n<p>现在切换到 SS 情景模式就可以通过 shadowsocks 科学上网了。后面获取自动切换规则列表</p>\n<p>设置自动切换模式</p>\n<p>在设置界面选择自动切换模式，在 “切换规则” 中勾选“规则列表规则”，对应的情景模式选择刚刚新建的 SS。</p>\n<p>然后在下面的规则列表地址中填写</p>\n<p><a href=\"https://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt\">https://autoproxy-gfwlist.googlecode.com/svn/trunk/gfwlist.txt</a></p>\n<p>规则列表格式选择 AutoProxy。</p>\n<p>然后点击立即更新情景模式， 更新完成后会有提示。</p>\n<p>点击左侧的 “应用选项”。然后单击 switchyOmega 图标，选择自动切换，就可以在访问“不存在的网站” 时自动切换到 shadowsocks 代理了。</p>\n<h2 id=\"添加自定义规则\"><a href=\"#添加自定义规则\" class=\"headerlink\" title=\"添加自定义规则\"></a>添加自定义规则</h2><p>如果遇到某个国外网站无法直接连接或速度太慢时，可以单击 switchyOmega 图标，选择 “添加条件”，情景模式选择 SS，就可以了。</p>\n<p>这时打开 switchyOmega 选项，在自动切换模式的切换规则中就可以看到刚刚添加的规则。可以在这里管理自定义的规则。</p>\n<p>导入和导出 switchyOmega 设置</p>\n<p>如果换了一台电脑，重新设置一遍 switchyOmega 就太麻烦了。可以在设置好的 switchyOmega 中导出设置文件，在另一个 chrome 浏览器中导入，就可以直接复制原来的设置了。</p>\n<p>在 switchyOmega 选项的左侧点击 “导入 / 导出”，点击“生成备份文件” 即可生成 switchyOmega 设置备份。点击 “从备份文件恢复” 可以导入备份</p>\n<hr>\n"},{"title":"Linux内核升级","abbrlink":27726,"date":"2016-11-02T13:58:39.000Z","_content":"\n# yum方式升级内核\n官网：http://elrepo.org/tiki/tiki-index.php\n\n1.查看系统情况\n`cat /etc/issue`  查看系统版本\n`uname -r `       查看内核版本\n\n2.安装key\n```\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7111.png)\n\n3.安装yum源（根据你的系统版本选择）\n\n* 7系列\n```\nrpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm```\n\n\n* 6系列\n```\nrpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm```\n\n* 5系列\n```\nrpm -Uvh http://www.elrepo.org/elrepo-release-5-5.el5.elrepo.noarch.rpm```\n\n4.安装内核\n\n* ml内核（mainline，安装的是最新版的内核）\n如果要安装ml内核，使用如下命令：\n```\nyum --enablerepo=elrepo-kernel install kernel-ml -y```\n\n* lt内核（long-term，长期支持版，不是最新版）\n如果要安装lt内核，使用如下命令：\n```\nyum --enablerepo=elrepo-kernel install kernel-lt -y```\n\n我安装的是ml内核，如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7112.png)\n\n5.修改grub\n```\nvim /etc/grub.conf```\n新安装的内核排在了第一项，所以改为**default=0**，若排在第二个title下则为1，以此类推。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7113.png)\n\n注：一般centos6以下都是用grub引导的，如果有需求的话可以升级到gurb2\n进入/boot删除老的内核(对应的**initramfs\\*.img**，**initrd\\*.img**，**vmlinuz**文件)，删除**/etc/grub.conf**文件对应的段落，并重新生成grub文件。\n```\ngrub2-mkconfig -o /boot/grub2/grub.cfg #生成grub2的配置文件```\n如果没有**grub2-mkconfig**命令时,先安装`yum install grub2-tools`\n\n之后重启验证即可。\n\n\n---\n# 源码编译升级（适合所有Linux）\n内核版本 **https://www.kernel.org**\n参考：http://blog.csdn.net/taiyang1987912/article/details/42744019\n```\nyum install ncurses-devel -y\nyum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel -y\nwget https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.28.tar.xz     \ntar -xf linux-3.10.28.tar.xz\nmv linux-3.10.28 /usr/src/\ncd /usr/src/linux-3.10.28/\ncp /boot/config-2.6.32-573.el6.x86_64 .config\n#把旧内核(uname -r)的config复制到当前目录备用\nsh -c 'yes \"\" | make oldconfig'\nmake oldconfig```\n\ncpu核数 `cat /proc/cpuinfo| grep \"processor\"| wc -l `  下面**-j**后面的48是cpu核数（指定编译核数）\n```\nmake -j48 bzImage\nmake -j48 modules\nmake -j48 modules_install\nmake install```\n\n安装完成后\n`vi /etc/grub.conf`\n 看新安装的内核在第几段，一般是在第一段，从0开始数看title CentOS (3.10.28) 在第一段为**default=0**，第二段为**default=1**\n\n例如:\n```\n#boot=/dev/sdb\ndefault=0\ntimeout=5\nsplashimage=(hd0,0)/grub/splash.xpm.gz\nhiddenmenu\ntitle CentOS (3.10.28)\n        root (hd0,0)\n        kernel /vmlinuz-3.10.28 ro root=UUID=28fbaad8-35a6-4348-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet\n        initrd /initramfs-3.10.28.img\ntitle CentOS (2.6.32-642.3.1.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-642.3.1.el6.x86_64 ro root=UUID=28fbaad8-35a6-4348-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-642.3.1.el6.x86_64.img\ntitle CentOS 6 (2.6.32-573.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-573.el6.x86_64 ro root=UUID=28fbaad8-35a6-4348-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-573.el6.x86_64.img\n```\n`reboot`\n`uname -r `   查看内核版本\n\n\n\n---","source":"_posts/系统管理/2016-11-02-Linux内核升级.md","raw":"---\ntitle: Linux内核升级\ncategories:\n  - 系统管理\ntags:\n  - Linux内核升级\nabbrlink: 27726\ndate: 2016-11-02 21:58:39\n---\n\n# yum方式升级内核\n官网：http://elrepo.org/tiki/tiki-index.php\n\n1.查看系统情况\n`cat /etc/issue`  查看系统版本\n`uname -r `       查看内核版本\n\n2.安装key\n```\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org```\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7111.png)\n\n3.安装yum源（根据你的系统版本选择）\n\n* 7系列\n```\nrpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm```\n\n\n* 6系列\n```\nrpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm```\n\n* 5系列\n```\nrpm -Uvh http://www.elrepo.org/elrepo-release-5-5.el5.elrepo.noarch.rpm```\n\n4.安装内核\n\n* ml内核（mainline，安装的是最新版的内核）\n如果要安装ml内核，使用如下命令：\n```\nyum --enablerepo=elrepo-kernel install kernel-ml -y```\n\n* lt内核（long-term，长期支持版，不是最新版）\n如果要安装lt内核，使用如下命令：\n```\nyum --enablerepo=elrepo-kernel install kernel-lt -y```\n\n我安装的是ml内核，如下：\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7112.png)\n\n5.修改grub\n```\nvim /etc/grub.conf```\n新安装的内核排在了第一项，所以改为**default=0**，若排在第二个title下则为1，以此类推。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7113.png)\n\n注：一般centos6以下都是用grub引导的，如果有需求的话可以升级到gurb2\n进入/boot删除老的内核(对应的**initramfs\\*.img**，**initrd\\*.img**，**vmlinuz**文件)，删除**/etc/grub.conf**文件对应的段落，并重新生成grub文件。\n```\ngrub2-mkconfig -o /boot/grub2/grub.cfg #生成grub2的配置文件```\n如果没有**grub2-mkconfig**命令时,先安装`yum install grub2-tools`\n\n之后重启验证即可。\n\n\n---\n# 源码编译升级（适合所有Linux）\n内核版本 **https://www.kernel.org**\n参考：http://blog.csdn.net/taiyang1987912/article/details/42744019\n```\nyum install ncurses-devel -y\nyum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel -y\nwget https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.28.tar.xz     \ntar -xf linux-3.10.28.tar.xz\nmv linux-3.10.28 /usr/src/\ncd /usr/src/linux-3.10.28/\ncp /boot/config-2.6.32-573.el6.x86_64 .config\n#把旧内核(uname -r)的config复制到当前目录备用\nsh -c 'yes \"\" | make oldconfig'\nmake oldconfig```\n\ncpu核数 `cat /proc/cpuinfo| grep \"processor\"| wc -l `  下面**-j**后面的48是cpu核数（指定编译核数）\n```\nmake -j48 bzImage\nmake -j48 modules\nmake -j48 modules_install\nmake install```\n\n安装完成后\n`vi /etc/grub.conf`\n 看新安装的内核在第几段，一般是在第一段，从0开始数看title CentOS (3.10.28) 在第一段为**default=0**，第二段为**default=1**\n\n例如:\n```\n#boot=/dev/sdb\ndefault=0\ntimeout=5\nsplashimage=(hd0,0)/grub/splash.xpm.gz\nhiddenmenu\ntitle CentOS (3.10.28)\n        root (hd0,0)\n        kernel /vmlinuz-3.10.28 ro root=UUID=28fbaad8-35a6-4348-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet\n        initrd /initramfs-3.10.28.img\ntitle CentOS (2.6.32-642.3.1.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-642.3.1.el6.x86_64 ro root=UUID=28fbaad8-35a6-4348-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-642.3.1.el6.x86_64.img\ntitle CentOS 6 (2.6.32-573.el6.x86_64)\n        root (hd0,0)\n        kernel /vmlinuz-2.6.32-573.el6.x86_64 ro root=UUID=28fbaad8-35a6-4348-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet\n        initrd /initramfs-2.6.32-573.el6.x86_64.img\n```\n`reboot`\n`uname -r `   查看内核版本\n\n\n\n---","slug":"系统管理-2016-11-02-Linux内核升级","published":1,"updated":"2016-11-21T02:17:09.104Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjo00031d8pkmw40h9g7","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"yum方式升级内核\"><a href=\"#yum方式升级内核\" class=\"headerlink\" title=\"yum方式升级内核\"></a>yum方式升级内核</h1><p>官网：<a href=\"http://elrepo.org/tiki/tiki-index.php\" target=\"_blank\" rel=\"external\">http://elrepo.org/tiki/tiki-index.php</a></p>\n<p>1.查看系统情况<br><code>cat /etc/issue</code>  查看系统版本<br><code>uname -r</code>       查看内核版本</p>\n<p>2.安装key<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm --<span class=\"keyword\">import</span> <span class=\"string\">https:</span><span class=\"comment\">//www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7111.png\" alt=\"\"></p>\n<p>3.安装yum源（根据你的系统版本选择）</p>\n<ul>\n<li><p>7系列</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -Uvh <span class=\"string\">http:</span><span class=\"comment\">//www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>6系列</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -Uvh <span class=\"string\">http:</span><span class=\"comment\">//www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>5系列</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -Uvh <span class=\"string\">http:</span><span class=\"comment\">//www.elrepo.org/elrepo-release-5-5.el5.elrepo.noarch.rpm</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>4.安装内核</p>\n<ul>\n<li><p>ml内核（mainline，安装的是最新版的内核）<br>如果要安装ml内核，使用如下命令：</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --enablerepo=elrepo-kernel install kernel-<span class=\"keyword\">ml</span> -<span class=\"built_in\">y</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>lt内核（long-term，长期支持版，不是最新版）<br>如果要安装lt内核，使用如下命令：</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"comment\">--enablerepo=elrepo-kernel install kernel-lt -y</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>我安装的是ml内核，如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7112.png\" alt=\"\"></p>\n<p>5.修改grub<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">vim</span> /etc/grub.<span class=\"keyword\">conf</span></div></pre></td></tr></table></figure></p>\n<p>新安装的内核排在了第一项，所以改为<strong>default=0</strong>，若排在第二个title下则为1，以此类推。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7113.png\" alt=\"\"></p>\n<p>注：一般centos6以下都是用grub引导的，如果有需求的话可以升级到gurb2<br>进入/boot删除老的内核(对应的<strong>initramfs*.img</strong>，<strong>initrd*.img</strong>，<strong>vmlinuz</strong>文件)，删除<strong>/etc/grub.conf</strong>文件对应的段落，并重新生成grub文件。<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">grub2-mkconfig -o <span class=\"meta-keyword\">/boot/</span>grub2/grub.cfg <span class=\"meta\">#生成grub2的配置文件</span></div></pre></td></tr></table></figure></p>\n<p>如果没有<strong>grub2-mkconfig</strong>命令时,先安装<code>yum install grub2-tools</code></p>\n<p>之后重启验证即可。</p>\n<hr>\n<h1 id=\"源码编译升级（适合所有Linux）\"><a href=\"#源码编译升级（适合所有Linux）\" class=\"headerlink\" title=\"源码编译升级（适合所有Linux）\"></a>源码编译升级（适合所有Linux）</h1><p>内核版本 <strong><a href=\"https://www.kernel.org\" target=\"_blank\" rel=\"external\">https://www.kernel.org</a></strong><br>参考：<a href=\"http://blog.csdn.net/taiyang1987912/article/details/42744019\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/taiyang1987912/article/details/42744019</a><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install ncurses-devel -y</div><div class=\"line\">yum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel -y</div><div class=\"line\">wget https:<span class=\"comment\">//www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.28.tar.xz     </span></div><div class=\"line\">tar -xf linux-<span class=\"number\">3.10</span>.<span class=\"number\">28</span><span class=\"selector-class\">.tar</span><span class=\"selector-class\">.xz</span></div><div class=\"line\">mv linux-<span class=\"number\">3.10</span>.<span class=\"number\">28</span> /usr/src/</div><div class=\"line\">cd /usr/src/linux-<span class=\"number\">3.10</span>.<span class=\"number\">28</span>/</div><div class=\"line\">cp /boot/config-<span class=\"number\">2.6</span>.<span class=\"number\">32</span>-<span class=\"number\">573</span><span class=\"selector-class\">.el6</span><span class=\"selector-class\">.x86_64</span> <span class=\"selector-class\">.config</span></div><div class=\"line\">#把旧内核(uname -r)的config复制到当前目录备用</div><div class=\"line\">sh -c <span class=\"string\">'yes \"\" | make oldconfig'</span></div><div class=\"line\">make oldconfig</div></pre></td></tr></table></figure></p>\n<p>cpu核数 <code>cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</code>  下面<strong>-j</strong>后面的48是cpu核数（指定编译核数）<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">make</span> -j48 bzImage</div><div class=\"line\"><span class=\"built_in\">make</span> -j48 modules</div><div class=\"line\"><span class=\"built_in\">make</span> -j48 modules_install</div><div class=\"line\"><span class=\"built_in\">make</span> install</div></pre></td></tr></table></figure></p>\n<p>安装完成后<br><code>vi /etc/grub.conf</code><br> 看新安装的内核在第几段，一般是在第一段，从0开始数看title CentOS (3.10.28) 在第一段为<strong>default=0</strong>，第二段为<strong>default=1</strong></p>\n<p>例如:<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#boot=/dev/sdb</div><div class=\"line\"><span class=\"section\">default</span>=<span class=\"number\">0</span></div><div class=\"line\">timeout=<span class=\"number\">5</span></div><div class=\"line\">splashimage=(hd0,<span class=\"number\">0</span>)/grub/splash.xpm.gz</div><div class=\"line\">hiddenmenu</div><div class=\"line\">title CentOS (<span class=\"number\">3.10</span><span class=\"number\">.28</span>)</div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz<span class=\"number\">-3.10</span><span class=\"number\">.28</span> ro root=UUID=<span class=\"number\">28</span>fbaad8<span class=\"number\">-35</span>a6<span class=\"number\">-4348</span>-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF<span class=\"number\">-8</span> rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</div><div class=\"line\">        initrd /initramfs<span class=\"number\">-3.10</span><span class=\"number\">.28</span>.img</div><div class=\"line\">title CentOS (<span class=\"number\">2.6</span><span class=\"number\">.32</span><span class=\"number\">-642.3</span><span class=\"number\">.1</span>.el6.x86_64)</div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-642.3</span><span class=\"number\">.1</span>.el6.x86_64 ro root=UUID=<span class=\"number\">28</span>fbaad8<span class=\"number\">-35</span>a6<span class=\"number\">-4348</span>-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF<span class=\"number\">-8</span> rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</div><div class=\"line\">        initrd /initramfs<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-642.3</span><span class=\"number\">.1</span>.el6.x86_64.img</div><div class=\"line\">title CentOS <span class=\"number\">6</span> (<span class=\"number\">2.6</span><span class=\"number\">.32</span><span class=\"number\">-573.</span>el6.x86_64)</div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-573.</span>el6.x86_64 ro root=UUID=<span class=\"number\">28</span>fbaad8<span class=\"number\">-35</span>a6<span class=\"number\">-4348</span>-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF<span class=\"number\">-8</span> rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</div><div class=\"line\">        initrd /initramfs<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-573.</span>el6.x86_64.img</div></pre></td></tr></table></figure></p>\n<p><code>reboot</code><br><code>uname -r</code>   查看内核版本</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"yum方式升级内核\"><a href=\"#yum方式升级内核\" class=\"headerlink\" title=\"yum方式升级内核\"></a>yum方式升级内核</h1><p>官网：<a href=\"http://elrepo.org/tiki/tiki-index.php\">http://elrepo.org/tiki/tiki-index.php</a></p>\n<p>1.查看系统情况<br><code>cat /etc/issue</code>  查看系统版本<br><code>uname -r</code>       查看内核版本</p>\n<p>2.安装key<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm --<span class=\"keyword\">import</span> <span class=\"string\">https:</span><span class=\"comment\">//www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7111.png\" alt=\"\"></p>\n<p>3.安装yum源（根据你的系统版本选择）</p>\n<ul>\n<li><p>7系列</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -Uvh <span class=\"string\">http:</span><span class=\"comment\">//www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>6系列</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -Uvh <span class=\"string\">http:</span><span class=\"comment\">//www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>5系列</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">rpm -Uvh <span class=\"string\">http:</span><span class=\"comment\">//www.elrepo.org/elrepo-release-5-5.el5.elrepo.noarch.rpm</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>4.安装内核</p>\n<ul>\n<li><p>ml内核（mainline，安装的是最新版的内核）<br>如果要安装ml内核，使用如下命令：</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum --enablerepo=elrepo-kernel install kernel-<span class=\"keyword\">ml</span> -<span class=\"built_in\">y</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>lt内核（long-term，长期支持版，不是最新版）<br>如果要安装lt内核，使用如下命令：</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"comment\">--enablerepo=elrepo-kernel install kernel-lt -y</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>我安装的是ml内核，如下：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7112.png\" alt=\"\"></p>\n<p>5.修改grub<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">vim</span> /etc/grub.<span class=\"keyword\">conf</span></div></pre></td></tr></table></figure></p>\n<p>新安装的内核排在了第一项，所以改为<strong>default=0</strong>，若排在第二个title下则为1，以此类推。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7113.png\" alt=\"\"></p>\n<p>注：一般centos6以下都是用grub引导的，如果有需求的话可以升级到gurb2<br>进入/boot删除老的内核(对应的<strong>initramfs*.img</strong>，<strong>initrd*.img</strong>，<strong>vmlinuz</strong>文件)，删除<strong>/etc/grub.conf</strong>文件对应的段落，并重新生成grub文件。<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">grub2-mkconfig -o <span class=\"meta-keyword\">/boot/</span>grub2/grub.cfg <span class=\"meta\">#生成grub2的配置文件</span></div></pre></td></tr></table></figure></p>\n<p>如果没有<strong>grub2-mkconfig</strong>命令时,先安装<code>yum install grub2-tools</code></p>\n<p>之后重启验证即可。</p>\n<hr>\n<h1 id=\"源码编译升级（适合所有Linux）\"><a href=\"#源码编译升级（适合所有Linux）\" class=\"headerlink\" title=\"源码编译升级（适合所有Linux）\"></a>源码编译升级（适合所有Linux）</h1><p>内核版本 <strong><a href=\"https://www.kernel.org\">https://www.kernel.org</a></strong><br>参考：<a href=\"http://blog.csdn.net/taiyang1987912/article/details/42744019\">http://blog.csdn.net/taiyang1987912/article/details/42744019</a><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install ncurses-devel -y</div><div class=\"line\">yum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel -y</div><div class=\"line\">wget https:<span class=\"comment\">//www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.28.tar.xz     </span></div><div class=\"line\">tar -xf linux-<span class=\"number\">3.10</span>.<span class=\"number\">28</span><span class=\"selector-class\">.tar</span><span class=\"selector-class\">.xz</span></div><div class=\"line\">mv linux-<span class=\"number\">3.10</span>.<span class=\"number\">28</span> /usr/src/</div><div class=\"line\">cd /usr/src/linux-<span class=\"number\">3.10</span>.<span class=\"number\">28</span>/</div><div class=\"line\">cp /boot/config-<span class=\"number\">2.6</span>.<span class=\"number\">32</span>-<span class=\"number\">573</span><span class=\"selector-class\">.el6</span><span class=\"selector-class\">.x86_64</span> <span class=\"selector-class\">.config</span></div><div class=\"line\">#把旧内核(uname -r)的config复制到当前目录备用</div><div class=\"line\">sh -c <span class=\"string\">'yes \"\" | make oldconfig'</span></div><div class=\"line\">make oldconfig</div></pre></td></tr></table></figure></p>\n<p>cpu核数 <code>cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</code>  下面<strong>-j</strong>后面的48是cpu核数（指定编译核数）<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">make</span> -j48 bzImage</div><div class=\"line\"><span class=\"built_in\">make</span> -j48 modules</div><div class=\"line\"><span class=\"built_in\">make</span> -j48 modules_install</div><div class=\"line\"><span class=\"built_in\">make</span> install</div></pre></td></tr></table></figure></p>\n<p>安装完成后<br><code>vi /etc/grub.conf</code><br> 看新安装的内核在第几段，一般是在第一段，从0开始数看title CentOS (3.10.28) 在第一段为<strong>default=0</strong>，第二段为<strong>default=1</strong></p>\n<p>例如:<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#boot=/dev/sdb</div><div class=\"line\"><span class=\"section\">default</span>=<span class=\"number\">0</span></div><div class=\"line\">timeout=<span class=\"number\">5</span></div><div class=\"line\">splashimage=(hd0,<span class=\"number\">0</span>)/grub/splash.xpm.gz</div><div class=\"line\">hiddenmenu</div><div class=\"line\">title CentOS (<span class=\"number\">3.10</span><span class=\"number\">.28</span>)</div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz<span class=\"number\">-3.10</span><span class=\"number\">.28</span> ro root=UUID=<span class=\"number\">28</span>fbaad8<span class=\"number\">-35</span>a6<span class=\"number\">-4348</span>-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF<span class=\"number\">-8</span> rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</div><div class=\"line\">        initrd /initramfs<span class=\"number\">-3.10</span><span class=\"number\">.28</span>.img</div><div class=\"line\">title CentOS (<span class=\"number\">2.6</span><span class=\"number\">.32</span><span class=\"number\">-642.3</span><span class=\"number\">.1</span>.el6.x86_64)</div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-642.3</span><span class=\"number\">.1</span>.el6.x86_64 ro root=UUID=<span class=\"number\">28</span>fbaad8<span class=\"number\">-35</span>a6<span class=\"number\">-4348</span>-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF<span class=\"number\">-8</span> rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</div><div class=\"line\">        initrd /initramfs<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-642.3</span><span class=\"number\">.1</span>.el6.x86_64.img</div><div class=\"line\">title CentOS <span class=\"number\">6</span> (<span class=\"number\">2.6</span><span class=\"number\">.32</span><span class=\"number\">-573.</span>el6.x86_64)</div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-573.</span>el6.x86_64 ro root=UUID=<span class=\"number\">28</span>fbaad8<span class=\"number\">-35</span>a6<span class=\"number\">-4348</span>-b1e0-bf204537f8b0 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF<span class=\"number\">-8</span> rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet</div><div class=\"line\">        initrd /initramfs<span class=\"number\">-2.6</span><span class=\"number\">.32</span><span class=\"number\">-573.</span>el6.x86_64.img</div></pre></td></tr></table></figure></p>\n<p><code>reboot</code><br><code>uname -r</code>   查看内核版本</p>\n<hr>\n"},{"title":"grub引导修复","abbrlink":34771,"date":"2016-11-02T08:52:46.000Z","_content":"\n## 法一：\n特别是在linux调整分区后，开机重启时会出现\nerror : unknow filesystem\ngrub rescue>\n的字样，系统就是进不去。这表示你的grub2的配置文件坏了……由于分区调整或分区UUID改变造成grub2不能正常启动，从而进入修复模式了（grub rescue)，也称救援模式。\n        \n在救援模式下只有很少的命令可以用：set  ,  ls , insmod , root , prefix\n\n\t(1)set  查看环境变量，这里可以查看启动路径和分区。\n\t(2)ls   查看设备\n\t(3)insmod  加载模块\n\t(4)root  指定用于启动系统的分区,在救援模式下设置grub启动分区\n\t(5)prefix 设定grub启动路径\n\n具体修复步骤如下：\n\n* 1、查看分区：grub rescue> `ls`   回车\n会出现如下字样：\n\n(hd0) (hd0,msdos9) (hd0,msdos8) (hd0,msdos7) (hd0,msdos6) (hd0,msdos5) (hd0,msdos2) (hd0,msdos1)\n\n注：上面是我的分区设备，每个人可能不一样，但原理都是一样的。grub> `find /boot/grub/grub.conf`   也行\n\n* 2、寻找ubuntu所在分区：\n（就是寻找你的Linux系统是装在以上哪个分区里）\n\ngrub rescue> `ls (hd0,msdos1)/`\n\n若出现unknown filesystem字样，则尝试下一个……若出现的是你的ubuntu主文件夹下的文件夹和文件的名字，那就是的要找的分区了。\n\n* 3、修改启动分区：（假如你找到的启动分区是hd0,msdos8）\ngrub rescue>`root=(hd0,msdos8)`\ngrub rescue>`prefix=/boot/grub`     //grub路径设置\ngrub rescue>`set root=(hd0,msdos8)`\ngrub rescue>`set prefix=(hd0,msdos8)/boot/grub`\ngrub rescue>`insmod normal`    //启动normal启动\ngrub rescue>`normal`\n之后你就会看到熟悉的启动菜单栏了\n\n* 4、进入命令行启动ubuntu\n\n进入系统启动选项界面后还是进不去，因为你还没有真正的修改grub,这个要到ubuntu里修改,进入系统启动项界面后，按C进入命令行模式。\ngrub >`set root=hd0,msdos8`\ngrub >`set prefix=(hd0,msdos8)/boot/grub`\ngrub >`linux /vmlinuz-xxx-xxx root=/dev/sda8` //里边的xxxx可以按Tab键，如果有acpi问题,在最后加一句acpi=off\ngrub >`initrd /initrd.img-xxx-xxx`\ngrub >`boot`\n这样就可以进入了\n\n* 5、进入ubuntu修复grub\n\n在终端里运行\n```\nsudo update-grub`\nsudo grub-install /dev/sda```\n\n* 6、重启，搞定！！\n\n 注：有时只修改1～3步骤，然后在菜单栏就可以进入系统了，且一切正常。\n在重启时，系统就只有一个光标在左上角不停的闪，咋也进不了系统。可能是启动项的问题，开机启动项改为硬盘启动就好了。\n\n---\n\n## 法二：\n首先制作 Ubuntu 启动 USB\n\n复制代码代码如下：\n```\nsudo dd if=ubuntu-13.10-desktop-amd64.iso of=/dev/sdb1 #/dev/sdb1 为 USB 盘符```\n\n* 1.使用启动 USB 进入 Ubuntu 试用环境\n\n* 2.查看硬盘分区状况，获取 Linux 系统安装分区编号\n`sudo fdisk -l`\n查看输出结果，然后根据文件类型和分区大小来判定 Linux 系统安装在哪块硬盘和安装的分区。我的电脑是在**/dev/sda3**安装了 **Ubuntu**。\n或者，打开 **Gparted** 图形化工具来查看分区信息也可以。\n挂载Ubuntu分区\n\n* 3.已知**Ubuntu**安装在了**/dev/sda3**上，所以我们可以用下面命令来挂载**Ubuntu**安装分区。你需要将**/dev/sda3**换成自己的 Linux 安装分区。\n`sudo mount /dev/sda3 /mnt`\n\n* 4.挂载其他所需的目录（使用 --bind）\n```\nsudo mount --bind /dev /mnt/dev\nsudo mount --bind /proc /mnt/proc\nsudo mount --bind /sys /mnt/sys```\n\n* 5.Chroot 到硬盘上的 Linux 系统\n代码如下：\n`sudo chroot /mnt ` chroot命令把根目录切换到指定目录下\n\n* 6.安装&更新 Grub\n```\ngrub2-install /dev/sda\ngrub2-mkconfig -o /boot/grub2/grub.cfg```\n\n* 7.Grub 已经修复成功，我们还需要退出 chroot 环境、卸载已经挂载的设备与目录：\n```\nexit #退出 chroot 环境\nsudo umount /mnt/dev\nsudo umount /mnt/proc\nsudo umount /mnt/sys\nsudo umount /mnt```\n\n* 8.重启。\n\n---\n\n可以进grub 这就好办了 >**root (hd0,x)** 提示： 输入（后 ，按 TAB键 自动补全 很好用的 。x表示你的linux根分区\n```\n>linux /vmlinuz ro quiet \n>initrd /initrd.lz\n>boot\n```\n\n先找到menu.lst菜单文件：\n`find --set-root /boot/grub/menu.lst`\n然后加载：\nGrub 命令索引`configfile /boot/grub/menu.lst`\n菜单文件可以换成grub.conf试试。\n\n\n\n参考：\n1、http://www.xitongzhijia.net/xtjc/20141208/32106.html （推荐）\n2、http://blog.chinaunix.net/uid-27037833-id-3235145.html\n\n\n---\n\n","source":"_posts/系统管理/2016-11-02-grub引导修复.md","raw":"---\ntitle: grub引导修复\ncategories:\n  - 系统管理\ntags:\n  - grub引导修复\nabbrlink: 34771\ndate: 2016-11-02 16:52:46\n---\n\n## 法一：\n特别是在linux调整分区后，开机重启时会出现\nerror : unknow filesystem\ngrub rescue>\n的字样，系统就是进不去。这表示你的grub2的配置文件坏了……由于分区调整或分区UUID改变造成grub2不能正常启动，从而进入修复模式了（grub rescue)，也称救援模式。\n        \n在救援模式下只有很少的命令可以用：set  ,  ls , insmod , root , prefix\n\n\t(1)set  查看环境变量，这里可以查看启动路径和分区。\n\t(2)ls   查看设备\n\t(3)insmod  加载模块\n\t(4)root  指定用于启动系统的分区,在救援模式下设置grub启动分区\n\t(5)prefix 设定grub启动路径\n\n具体修复步骤如下：\n\n* 1、查看分区：grub rescue> `ls`   回车\n会出现如下字样：\n\n(hd0) (hd0,msdos9) (hd0,msdos8) (hd0,msdos7) (hd0,msdos6) (hd0,msdos5) (hd0,msdos2) (hd0,msdos1)\n\n注：上面是我的分区设备，每个人可能不一样，但原理都是一样的。grub> `find /boot/grub/grub.conf`   也行\n\n* 2、寻找ubuntu所在分区：\n（就是寻找你的Linux系统是装在以上哪个分区里）\n\ngrub rescue> `ls (hd0,msdos1)/`\n\n若出现unknown filesystem字样，则尝试下一个……若出现的是你的ubuntu主文件夹下的文件夹和文件的名字，那就是的要找的分区了。\n\n* 3、修改启动分区：（假如你找到的启动分区是hd0,msdos8）\ngrub rescue>`root=(hd0,msdos8)`\ngrub rescue>`prefix=/boot/grub`     //grub路径设置\ngrub rescue>`set root=(hd0,msdos8)`\ngrub rescue>`set prefix=(hd0,msdos8)/boot/grub`\ngrub rescue>`insmod normal`    //启动normal启动\ngrub rescue>`normal`\n之后你就会看到熟悉的启动菜单栏了\n\n* 4、进入命令行启动ubuntu\n\n进入系统启动选项界面后还是进不去，因为你还没有真正的修改grub,这个要到ubuntu里修改,进入系统启动项界面后，按C进入命令行模式。\ngrub >`set root=hd0,msdos8`\ngrub >`set prefix=(hd0,msdos8)/boot/grub`\ngrub >`linux /vmlinuz-xxx-xxx root=/dev/sda8` //里边的xxxx可以按Tab键，如果有acpi问题,在最后加一句acpi=off\ngrub >`initrd /initrd.img-xxx-xxx`\ngrub >`boot`\n这样就可以进入了\n\n* 5、进入ubuntu修复grub\n\n在终端里运行\n```\nsudo update-grub`\nsudo grub-install /dev/sda```\n\n* 6、重启，搞定！！\n\n 注：有时只修改1～3步骤，然后在菜单栏就可以进入系统了，且一切正常。\n在重启时，系统就只有一个光标在左上角不停的闪，咋也进不了系统。可能是启动项的问题，开机启动项改为硬盘启动就好了。\n\n---\n\n## 法二：\n首先制作 Ubuntu 启动 USB\n\n复制代码代码如下：\n```\nsudo dd if=ubuntu-13.10-desktop-amd64.iso of=/dev/sdb1 #/dev/sdb1 为 USB 盘符```\n\n* 1.使用启动 USB 进入 Ubuntu 试用环境\n\n* 2.查看硬盘分区状况，获取 Linux 系统安装分区编号\n`sudo fdisk -l`\n查看输出结果，然后根据文件类型和分区大小来判定 Linux 系统安装在哪块硬盘和安装的分区。我的电脑是在**/dev/sda3**安装了 **Ubuntu**。\n或者，打开 **Gparted** 图形化工具来查看分区信息也可以。\n挂载Ubuntu分区\n\n* 3.已知**Ubuntu**安装在了**/dev/sda3**上，所以我们可以用下面命令来挂载**Ubuntu**安装分区。你需要将**/dev/sda3**换成自己的 Linux 安装分区。\n`sudo mount /dev/sda3 /mnt`\n\n* 4.挂载其他所需的目录（使用 --bind）\n```\nsudo mount --bind /dev /mnt/dev\nsudo mount --bind /proc /mnt/proc\nsudo mount --bind /sys /mnt/sys```\n\n* 5.Chroot 到硬盘上的 Linux 系统\n代码如下：\n`sudo chroot /mnt ` chroot命令把根目录切换到指定目录下\n\n* 6.安装&更新 Grub\n```\ngrub2-install /dev/sda\ngrub2-mkconfig -o /boot/grub2/grub.cfg```\n\n* 7.Grub 已经修复成功，我们还需要退出 chroot 环境、卸载已经挂载的设备与目录：\n```\nexit #退出 chroot 环境\nsudo umount /mnt/dev\nsudo umount /mnt/proc\nsudo umount /mnt/sys\nsudo umount /mnt```\n\n* 8.重启。\n\n---\n\n可以进grub 这就好办了 >**root (hd0,x)** 提示： 输入（后 ，按 TAB键 自动补全 很好用的 。x表示你的linux根分区\n```\n>linux /vmlinuz ro quiet \n>initrd /initrd.lz\n>boot\n```\n\n先找到menu.lst菜单文件：\n`find --set-root /boot/grub/menu.lst`\n然后加载：\nGrub 命令索引`configfile /boot/grub/menu.lst`\n菜单文件可以换成grub.conf试试。\n\n\n\n参考：\n1、http://www.xitongzhijia.net/xtjc/20141208/32106.html （推荐）\n2、http://blog.chinaunix.net/uid-27037833-id-3235145.html\n\n\n---\n\n","slug":"系统管理-2016-11-02-grub引导修复","published":1,"updated":"2016-11-21T02:17:09.119Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjo10034d8pk76jpljdk","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h2 id=\"法一：\"><a href=\"#法一：\" class=\"headerlink\" title=\"法一：\"></a>法一：</h2><p>特别是在linux调整分区后，开机重启时会出现<br>error : unknow filesystem<br>grub rescue&gt;<br>的字样，系统就是进不去。这表示你的grub2的配置文件坏了……由于分区调整或分区UUID改变造成grub2不能正常启动，从而进入修复模式了（grub rescue)，也称救援模式。</p>\n<p>在救援模式下只有很少的命令可以用：set  ,  ls , insmod , root , prefix</p>\n<pre><code>(1)set  查看环境变量，这里可以查看启动路径和分区。\n(2)ls   查看设备\n(3)insmod  加载模块\n(4)root  指定用于启动系统的分区,在救援模式下设置grub启动分区\n(5)prefix 设定grub启动路径\n</code></pre><p>具体修复步骤如下：</p>\n<ul>\n<li>1、查看分区：grub rescue&gt; <code>ls</code>   回车<br>会出现如下字样：</li>\n</ul>\n<p>(hd0) (hd0,msdos9) (hd0,msdos8) (hd0,msdos7) (hd0,msdos6) (hd0,msdos5) (hd0,msdos2) (hd0,msdos1)</p>\n<p>注：上面是我的分区设备，每个人可能不一样，但原理都是一样的。grub&gt; <code>find /boot/grub/grub.conf</code>   也行</p>\n<ul>\n<li>2、寻找ubuntu所在分区：<br>（就是寻找你的Linux系统是装在以上哪个分区里）</li>\n</ul>\n<p>grub rescue&gt; <code>ls (hd0,msdos1)/</code></p>\n<p>若出现unknown filesystem字样，则尝试下一个……若出现的是你的ubuntu主文件夹下的文件夹和文件的名字，那就是的要找的分区了。</p>\n<ul>\n<li><p>3、修改启动分区：（假如你找到的启动分区是hd0,msdos8）<br>grub rescue&gt;<code>root=(hd0,msdos8)</code><br>grub rescue&gt;<code>prefix=/boot/grub</code>     //grub路径设置<br>grub rescue&gt;<code>set root=(hd0,msdos8)</code><br>grub rescue&gt;<code>set prefix=(hd0,msdos8)/boot/grub</code><br>grub rescue&gt;<code>insmod normal</code>    //启动normal启动<br>grub rescue&gt;<code>normal</code><br>之后你就会看到熟悉的启动菜单栏了</p>\n</li>\n<li><p>4、进入命令行启动ubuntu</p>\n</li>\n</ul>\n<p>进入系统启动选项界面后还是进不去，因为你还没有真正的修改grub,这个要到ubuntu里修改,进入系统启动项界面后，按C进入命令行模式。<br>grub &gt;<code>set root=hd0,msdos8</code><br>grub &gt;<code>set prefix=(hd0,msdos8)/boot/grub</code><br>grub &gt;<code>linux /vmlinuz-xxx-xxx root=/dev/sda8</code> //里边的xxxx可以按Tab键，如果有acpi问题,在最后加一句acpi=off<br>grub &gt;<code>initrd /initrd.img-xxx-xxx</code><br>grub &gt;<code>boot</code><br>这样就可以进入了</p>\n<ul>\n<li>5、进入ubuntu修复grub</li>\n</ul>\n<p>在终端里运行<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo <span class=\"keyword\">update</span>-grub`</div><div class=\"line\">sudo grub-install /<span class=\"built_in\">dev</span>/sda</div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>6、重启，搞定！！</p>\n<p>注：有时只修改1～3步骤，然后在菜单栏就可以进入系统了，且一切正常。<br>在重启时，系统就只有一个光标在左上角不停的闪，咋也进不了系统。可能是启动项的问题，开机启动项改为硬盘启动就好了。</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"法二：\"><a href=\"#法二：\" class=\"headerlink\" title=\"法二：\"></a>法二：</h2><p>首先制作 Ubuntu 启动 USB</p>\n<p>复制代码代码如下：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo <span class=\"selector-tag\">dd</span> <span class=\"keyword\">if</span>=ubuntu-<span class=\"number\">13.10</span>-desktop-amd64<span class=\"selector-class\">.iso</span> of=/dev/sdb1 #/dev/sdb1 为 USB 盘符</div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>1.使用启动 USB 进入 Ubuntu 试用环境</p>\n</li>\n<li><p>2.查看硬盘分区状况，获取 Linux 系统安装分区编号<br><code>sudo fdisk -l</code><br>查看输出结果，然后根据文件类型和分区大小来判定 Linux 系统安装在哪块硬盘和安装的分区。我的电脑是在<strong>/dev/sda3</strong>安装了 <strong>Ubuntu</strong>。<br>或者，打开 <strong>Gparted</strong> 图形化工具来查看分区信息也可以。<br>挂载Ubuntu分区</p>\n</li>\n<li><p>3.已知<strong>Ubuntu</strong>安装在了<strong>/dev/sda3</strong>上，所以我们可以用下面命令来挂载<strong>Ubuntu</strong>安装分区。你需要将<strong>/dev/sda3</strong>换成自己的 Linux 安装分区。<br><code>sudo mount /dev/sda3 /mnt</code></p>\n</li>\n<li><p>4.挂载其他所需的目录（使用 –bind）</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> mount --<span class=\"keyword\">bind </span>/dev /mnt/dev</div><div class=\"line\"><span class=\"symbol\">sudo</span> mount --<span class=\"keyword\">bind </span>/<span class=\"meta\">proc</span> /mnt/<span class=\"meta\">proc</span></div><div class=\"line\"><span class=\"symbol\">sudo</span> mount --<span class=\"keyword\">bind </span>/sys /mnt/sys</div></pre></td></tr></table></figure>\n</li>\n<li><p>5.Chroot 到硬盘上的 Linux 系统<br>代码如下：<br><code>sudo chroot /mnt</code> chroot命令把根目录切换到指定目录下</p>\n</li>\n<li><p>6.安装&amp;更新 Grub</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">grub2-install <span class=\"regexp\">/dev/</span>sda</div><div class=\"line\">grub2-mkconfig -o <span class=\"regexp\">/boot/g</span>rub2<span class=\"regexp\">/grub.cfg</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>7.Grub 已经修复成功，我们还需要退出 chroot 环境、卸载已经挂载的设备与目录：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">exit</span> <span class=\"comment\">#退出 chroot 环境</span></div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt/</span>dev</div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt/</span>proc</div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt/</span>sys</div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>8.重启。</p>\n</li>\n</ul>\n<hr>\n<p>可以进grub 这就好办了 &gt;<strong>root (hd0,x)</strong> 提示： 输入（后 ，按 TAB键 自动补全 很好用的 。x表示你的linux根分区<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;linux /vmlinuz ro quiet </div><div class=\"line\">&gt;initrd /initrd<span class=\"selector-class\">.lz</span></div><div class=\"line\">&gt;boot</div></pre></td></tr></table></figure></p>\n<p>先找到menu.lst菜单文件：<br><code>find --set-root /boot/grub/menu.lst</code><br>然后加载：<br>Grub 命令索引<code>configfile /boot/grub/menu.lst</code><br>菜单文件可以换成grub.conf试试。</p>\n<p>参考：<br>1、<a href=\"http://www.xitongzhijia.net/xtjc/20141208/32106.html\" target=\"_blank\" rel=\"external\">http://www.xitongzhijia.net/xtjc/20141208/32106.html</a> （推荐）<br>2、<a href=\"http://blog.chinaunix.net/uid-27037833-id-3235145.html\" target=\"_blank\" rel=\"external\">http://blog.chinaunix.net/uid-27037833-id-3235145.html</a></p>\n<hr>\n","excerpt":"","more":"<h2 id=\"法一：\"><a href=\"#法一：\" class=\"headerlink\" title=\"法一：\"></a>法一：</h2><p>特别是在linux调整分区后，开机重启时会出现<br>error : unknow filesystem<br>grub rescue&gt;<br>的字样，系统就是进不去。这表示你的grub2的配置文件坏了……由于分区调整或分区UUID改变造成grub2不能正常启动，从而进入修复模式了（grub rescue)，也称救援模式。</p>\n<p>在救援模式下只有很少的命令可以用：set  ,  ls , insmod , root , prefix</p>\n<pre><code>(1)set  查看环境变量，这里可以查看启动路径和分区。\n(2)ls   查看设备\n(3)insmod  加载模块\n(4)root  指定用于启动系统的分区,在救援模式下设置grub启动分区\n(5)prefix 设定grub启动路径\n</code></pre><p>具体修复步骤如下：</p>\n<ul>\n<li>1、查看分区：grub rescue&gt; <code>ls</code>   回车<br>会出现如下字样：</li>\n</ul>\n<p>(hd0) (hd0,msdos9) (hd0,msdos8) (hd0,msdos7) (hd0,msdos6) (hd0,msdos5) (hd0,msdos2) (hd0,msdos1)</p>\n<p>注：上面是我的分区设备，每个人可能不一样，但原理都是一样的。grub&gt; <code>find /boot/grub/grub.conf</code>   也行</p>\n<ul>\n<li>2、寻找ubuntu所在分区：<br>（就是寻找你的Linux系统是装在以上哪个分区里）</li>\n</ul>\n<p>grub rescue&gt; <code>ls (hd0,msdos1)/</code></p>\n<p>若出现unknown filesystem字样，则尝试下一个……若出现的是你的ubuntu主文件夹下的文件夹和文件的名字，那就是的要找的分区了。</p>\n<ul>\n<li><p>3、修改启动分区：（假如你找到的启动分区是hd0,msdos8）<br>grub rescue&gt;<code>root=(hd0,msdos8)</code><br>grub rescue&gt;<code>prefix=/boot/grub</code>     //grub路径设置<br>grub rescue&gt;<code>set root=(hd0,msdos8)</code><br>grub rescue&gt;<code>set prefix=(hd0,msdos8)/boot/grub</code><br>grub rescue&gt;<code>insmod normal</code>    //启动normal启动<br>grub rescue&gt;<code>normal</code><br>之后你就会看到熟悉的启动菜单栏了</p>\n</li>\n<li><p>4、进入命令行启动ubuntu</p>\n</li>\n</ul>\n<p>进入系统启动选项界面后还是进不去，因为你还没有真正的修改grub,这个要到ubuntu里修改,进入系统启动项界面后，按C进入命令行模式。<br>grub &gt;<code>set root=hd0,msdos8</code><br>grub &gt;<code>set prefix=(hd0,msdos8)/boot/grub</code><br>grub &gt;<code>linux /vmlinuz-xxx-xxx root=/dev/sda8</code> //里边的xxxx可以按Tab键，如果有acpi问题,在最后加一句acpi=off<br>grub &gt;<code>initrd /initrd.img-xxx-xxx</code><br>grub &gt;<code>boot</code><br>这样就可以进入了</p>\n<ul>\n<li>5、进入ubuntu修复grub</li>\n</ul>\n<p>在终端里运行<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo <span class=\"keyword\">update</span>-grub`</div><div class=\"line\">sudo grub-install /<span class=\"built_in\">dev</span>/sda</div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>6、重启，搞定！！</p>\n<p>注：有时只修改1～3步骤，然后在菜单栏就可以进入系统了，且一切正常。<br>在重启时，系统就只有一个光标在左上角不停的闪，咋也进不了系统。可能是启动项的问题，开机启动项改为硬盘启动就好了。</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"法二：\"><a href=\"#法二：\" class=\"headerlink\" title=\"法二：\"></a>法二：</h2><p>首先制作 Ubuntu 启动 USB</p>\n<p>复制代码代码如下：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo <span class=\"selector-tag\">dd</span> <span class=\"keyword\">if</span>=ubuntu-<span class=\"number\">13.10</span>-desktop-amd64<span class=\"selector-class\">.iso</span> of=/dev/sdb1 #/dev/sdb1 为 USB 盘符</div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>1.使用启动 USB 进入 Ubuntu 试用环境</p>\n</li>\n<li><p>2.查看硬盘分区状况，获取 Linux 系统安装分区编号<br><code>sudo fdisk -l</code><br>查看输出结果，然后根据文件类型和分区大小来判定 Linux 系统安装在哪块硬盘和安装的分区。我的电脑是在<strong>/dev/sda3</strong>安装了 <strong>Ubuntu</strong>。<br>或者，打开 <strong>Gparted</strong> 图形化工具来查看分区信息也可以。<br>挂载Ubuntu分区</p>\n</li>\n<li><p>3.已知<strong>Ubuntu</strong>安装在了<strong>/dev/sda3</strong>上，所以我们可以用下面命令来挂载<strong>Ubuntu</strong>安装分区。你需要将<strong>/dev/sda3</strong>换成自己的 Linux 安装分区。<br><code>sudo mount /dev/sda3 /mnt</code></p>\n</li>\n<li><p>4.挂载其他所需的目录（使用 –bind）</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> mount --<span class=\"keyword\">bind </span>/dev /mnt/dev</div><div class=\"line\"><span class=\"symbol\">sudo</span> mount --<span class=\"keyword\">bind </span>/<span class=\"meta\">proc</span> /mnt/<span class=\"meta\">proc</span></div><div class=\"line\"><span class=\"symbol\">sudo</span> mount --<span class=\"keyword\">bind </span>/sys /mnt/sys</div></pre></td></tr></table></figure>\n</li>\n<li><p>5.Chroot 到硬盘上的 Linux 系统<br>代码如下：<br><code>sudo chroot /mnt</code> chroot命令把根目录切换到指定目录下</p>\n</li>\n<li><p>6.安装&amp;更新 Grub</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">grub2-install <span class=\"regexp\">/dev/</span>sda</div><div class=\"line\">grub2-mkconfig -o <span class=\"regexp\">/boot/g</span>rub2<span class=\"regexp\">/grub.cfg</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>7.Grub 已经修复成功，我们还需要退出 chroot 环境、卸载已经挂载的设备与目录：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">exit</span> <span class=\"comment\">#退出 chroot 环境</span></div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt/</span>dev</div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt/</span>proc</div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt/</span>sys</div><div class=\"line\">sudo umount <span class=\"regexp\">/mnt</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>8.重启。</p>\n</li>\n</ul>\n<hr>\n<p>可以进grub 这就好办了 &gt;<strong>root (hd0,x)</strong> 提示： 输入（后 ，按 TAB键 自动补全 很好用的 。x表示你的linux根分区<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;linux /vmlinuz ro quiet </div><div class=\"line\">&gt;initrd /initrd<span class=\"selector-class\">.lz</span></div><div class=\"line\">&gt;boot</div></pre></td></tr></table></figure></p>\n<p>先找到menu.lst菜单文件：<br><code>find --set-root /boot/grub/menu.lst</code><br>然后加载：<br>Grub 命令索引<code>configfile /boot/grub/menu.lst</code><br>菜单文件可以换成grub.conf试试。</p>\n<p>参考：<br>1、<a href=\"http://www.xitongzhijia.net/xtjc/20141208/32106.html\">http://www.xitongzhijia.net/xtjc/20141208/32106.html</a> （推荐）<br>2、<a href=\"http://blog.chinaunix.net/uid-27037833-id-3235145.html\">http://blog.chinaunix.net/uid-27037833-id-3235145.html</a></p>\n<hr>\n"},{"title":"Centos网络端口","abbrlink":21569,"date":"2016-11-02T09:40:11.000Z","_content":"\nCentos查看端口占用情况命令，比如查看80端口占用情况使用如下命令：\n`lsof -i tcp:80`\n \n列出所有端口 \n`netstat -ntlp`\n \n### 1、开启端口（以80端口为例） \n* 方法一：\n`/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT `写入修改\n\n\t`/etc/init.d/iptables save`   保存修改\n\n\t`service iptables restart`    重启防火墙，修改生效\n \n* 方法二：\n`vim /etc/sysconfig/iptables`  修改配置文件加入如下语句:\n\n`-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT` 重启防火墙，修改完成\n \n\n### 2、关闭端口\n* 方法一：\n\n`/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP `  写入修改\n\n`/etc/init.d/iptables save `  保存修改\n\n`service iptables restart `   重启防火墙，修改生效\n \n* 方法二： \n`vi /etc/sysconfig/iptables`  修改配置文件加入如下语句: \n\n`-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP`  重启防火墙，修改完成\n \n\n### 3、查看端口状态\n Centos 6.x 、Centos 7\n`/etc/init.d/iptables status`\n\n`netstat -lntp `    查看监听(Listen)的端口\n\n`netstat -antp `   查看所有建立的TCP连接\n\n\n\n---\n\n","source":"_posts/系统管理/2016-11-02-Centos网络端口.md","raw":"---\ntitle: Centos网络端口\ncategories:\n  - 系统管理\ntags:\n  - Centos网络端口\nabbrlink: 21569\ndate: 2016-11-02 17:40:11\n---\n\nCentos查看端口占用情况命令，比如查看80端口占用情况使用如下命令：\n`lsof -i tcp:80`\n \n列出所有端口 \n`netstat -ntlp`\n \n### 1、开启端口（以80端口为例） \n* 方法一：\n`/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT `写入修改\n\n\t`/etc/init.d/iptables save`   保存修改\n\n\t`service iptables restart`    重启防火墙，修改生效\n \n* 方法二：\n`vim /etc/sysconfig/iptables`  修改配置文件加入如下语句:\n\n`-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT` 重启防火墙，修改完成\n \n\n### 2、关闭端口\n* 方法一：\n\n`/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP `  写入修改\n\n`/etc/init.d/iptables save `  保存修改\n\n`service iptables restart `   重启防火墙，修改生效\n \n* 方法二： \n`vi /etc/sysconfig/iptables`  修改配置文件加入如下语句: \n\n`-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP`  重启防火墙，修改完成\n \n\n### 3、查看端口状态\n Centos 6.x 、Centos 7\n`/etc/init.d/iptables status`\n\n`netstat -lntp `    查看监听(Listen)的端口\n\n`netstat -antp `   查看所有建立的TCP连接\n\n\n\n---\n\n","slug":"系统管理-2016-11-02-Centos网络端口","published":1,"updated":"2016-11-21T02:17:09.099Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjo30037d8pk7qmj2xc7","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>Centos查看端口占用情况命令，比如查看80端口占用情况使用如下命令：<br><code>lsof -i tcp:80</code></p>\n<p>列出所有端口<br><code>netstat -ntlp</code></p>\n<h3 id=\"1、开启端口（以80端口为例）\"><a href=\"#1、开启端口（以80端口为例）\" class=\"headerlink\" title=\"1、开启端口（以80端口为例）\"></a>1、开启端口（以80端口为例）</h3><ul>\n<li><p>方法一：<br><code>/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT</code>写入修改</p>\n<p>  <code>/etc/init.d/iptables save</code>   保存修改</p>\n<p>  <code>service iptables restart</code>    重启防火墙，修改生效</p>\n</li>\n<li><p>方法二：<br><code>vim /etc/sysconfig/iptables</code>  修改配置文件加入如下语句:</p>\n</li>\n</ul>\n<p><code>-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT</code> 重启防火墙，修改完成</p>\n<h3 id=\"2、关闭端口\"><a href=\"#2、关闭端口\" class=\"headerlink\" title=\"2、关闭端口\"></a>2、关闭端口</h3><ul>\n<li>方法一：</li>\n</ul>\n<p><code>/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP</code>  写入修改</p>\n<p><code>/etc/init.d/iptables save</code>  保存修改</p>\n<p><code>service iptables restart</code>   重启防火墙，修改生效</p>\n<ul>\n<li>方法二：<br><code>vi /etc/sysconfig/iptables</code>  修改配置文件加入如下语句: </li>\n</ul>\n<p><code>-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP</code>  重启防火墙，修改完成</p>\n<h3 id=\"3、查看端口状态\"><a href=\"#3、查看端口状态\" class=\"headerlink\" title=\"3、查看端口状态\"></a>3、查看端口状态</h3><p> Centos 6.x 、Centos 7<br><code>/etc/init.d/iptables status</code></p>\n<p><code>netstat -lntp</code>    查看监听(Listen)的端口</p>\n<p><code>netstat -antp</code>   查看所有建立的TCP连接</p>\n<hr>\n","excerpt":"","more":"<p>Centos查看端口占用情况命令，比如查看80端口占用情况使用如下命令：<br><code>lsof -i tcp:80</code></p>\n<p>列出所有端口<br><code>netstat -ntlp</code></p>\n<h3 id=\"1、开启端口（以80端口为例）\"><a href=\"#1、开启端口（以80端口为例）\" class=\"headerlink\" title=\"1、开启端口（以80端口为例）\"></a>1、开启端口（以80端口为例）</h3><ul>\n<li><p>方法一：<br><code>/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT</code>写入修改</p>\n<p>  <code>/etc/init.d/iptables save</code>   保存修改</p>\n<p>  <code>service iptables restart</code>    重启防火墙，修改生效</p>\n</li>\n<li><p>方法二：<br><code>vim /etc/sysconfig/iptables</code>  修改配置文件加入如下语句:</p>\n</li>\n</ul>\n<p><code>-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT</code> 重启防火墙，修改完成</p>\n<h3 id=\"2、关闭端口\"><a href=\"#2、关闭端口\" class=\"headerlink\" title=\"2、关闭端口\"></a>2、关闭端口</h3><ul>\n<li>方法一：</li>\n</ul>\n<p><code>/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP</code>  写入修改</p>\n<p><code>/etc/init.d/iptables save</code>  保存修改</p>\n<p><code>service iptables restart</code>   重启防火墙，修改生效</p>\n<ul>\n<li>方法二：<br><code>vi /etc/sysconfig/iptables</code>  修改配置文件加入如下语句: </li>\n</ul>\n<p><code>-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP</code>  重启防火墙，修改完成</p>\n<h3 id=\"3、查看端口状态\"><a href=\"#3、查看端口状态\" class=\"headerlink\" title=\"3、查看端口状态\"></a>3、查看端口状态</h3><p> Centos 6.x 、Centos 7<br><code>/etc/init.d/iptables status</code></p>\n<p><code>netstat -lntp</code>    查看监听(Listen)的端口</p>\n<p><code>netstat -antp</code>   查看所有建立的TCP连接</p>\n<hr>\n"},{"title":"重装服务器系统基本配置","abbrlink":29609,"date":"2016-11-25T03:22:28.000Z","_content":"\n# Centos Mini\nCentos mini版镜像缺少很多常用工具\n\n更新系统 \n`yum update `\n\n开发环境 \n```\nyum install gcc gcc-c++ make automake cmake libtool bison flex perl git subversion mercurial -y ```\n\n常用开发库 \n```\nyum install readline-devel bzip2-devel zlib-devel libxml2-devel libxslt-devel openssl-devel kernel-devel pcre-devel boost-devel python-devel python-setuptools libpcap-devel -y ```\n\n常用软件 \n```\nyum install wget vim lsof lrzsz tcpdump -y ```\n\n防火墙打开需要的端口 \n```\niptables -A INPUT -p tcp –dport 80 -j ACCEPT\niptables -A INPUT -p tcp –dport 8080 -j ACCEPT \niptables -A INPUT -p tcp –dport 3306 -j ACCEPT  #激活用ACCEPT ，关闭用DROP```\n保存配置\n`/etc/init.d/iptables save`\n重启\n`service iptables restart`\n\n---\n# centos（6.X及以下版本）\n## 网卡配置\n`vi /etc/sysconfig/network-scripts/ifcfg-eth0` 编辑配置文件,添加修改以下内容\n**双网不要配内网网关**\n例：\n```\n#联通公网：\nDEVICE=eth0\nBOOTPROTO=static\nONBOOT=yes\nIPADDR=221.4.223.114\nNETMASK=255.255.255.224  \nGATEWAY=221.4.xxx.xxx\nDNS1=221.5.88.88\nDNS2=8.8.8.8\n#内网：\nvi /etc/sysconfig/network-scripts/ifcfg-eth1\nDEVICE=eth1\nBOOTPROTO=static\nONBOOT=yes\nIPADDR=192.168.0.114\nNETMASK=255.255.252.0  \nGATEWAY=192.168.0.1\n#DNS1=221.5.88.88\n#DNS2=8.8.8.8   （公网配了DNS和网关了）\n\n#修改DNS也可以\nvim /etc/resolv.conf\nnameserver 221.5.88.88\nnameserver 8.8.8.8\nIPV6INIT=no                 #禁止IPV6\n\nservice ip6tables stop      #停止IPV6服务\nchkconfig ip6tables off     #禁止IPV6开机启动\nservice yum-updatesd stop   #关闭系统自动更新\nchkconfig yum-updatesd off  #禁止开启启动\nservice network restart     #重启网络连接\nifconfig                    #查看IP地址```\n\n## 防火墙\n```\niptables -A INPUT -p tcp –dport 80 -j ACCEPT\niptables -A INPUT -p tcp –dport 8080 -j ACCEPT \niptables -A INPUT -p tcp –dport 3306 -j ACCEPT  #激活用ACCEPT ，关闭用DROP```\n保存配置\n`/etc/init.d/iptables save`\n重启\n`service iptables restart`\n\n## 设置主机名\n```\nvi /etc/sysconfig/network\nvi /etc/hosts\nhostname newname   #newname就是你要改的主机名\n\nservice network restart  或  /etc/network restart\nyum install wget lrzsz -y\nservice sshd start\nchkconfig sshd on\nshutdown -r now #重启系统```\n\n---\n# Ubuntu（14.04及以上版本）\n## 安装常用软件\n新安装的Ubuntu如果没有root用户密码，用`sudo passwd root`设置root密码。\n```\napt-get install wget lrzsz openssh-server vim -y\n/etc/init.d/ssh start```\n\n## 允许root登录shell\nUbuntu超级用户root用户是默认被禁用的，这就是为什么我们登陆时只能以普通用户登陆，而且switch user时没有root选项。\n必须使用命令启动root。即输入：`sudo passwd root`。然后输入密码即可启动root。\n```\nvim etc/ssh/sshd_config\n将PermitRootLogin 的值改为yes\nsudo service sshd restart```\n\n## 网卡地址配置\n\n配置静态IP地址`sudo vi /etc/network/interfaces`\n```shell\n#双网不要配内网网关\nauto lo\niface lo inet loopback\n\nifconfig   #可以看到eth0用作公网\nauto eth0   （有的可能是eno0或eno1）\niface eth0 inet static\naddress 221.4.xxx.xxx\ngateway 221.4.xxx.xxx\nnetmask 255.255.255.xxx\ndns-nameservers 221.5.88.88\ndns-nameservers 8.8.8.8\nauto eth1\niface eth1 inet static\naddress 192.168.0.254\nnetmask 255.255.252.0\n#gateway 192.168.0.1```\n保存退出,重启服务\n```\n/etc/init.d/networking restart```\n\n## 以DHCP 方式配置网卡\n```\nsudo vi /etc/network/interfaces\n   auto eth0\n   iface eth0 inet dhcp```\n用`/etc/init.d/networking restart`命令使网络设置生效\n\n## 修改DNS服务器\n法一\n```\nvi /etc/network/interfaces\n增加\ndns-nameservers 221.5.88.88\ndns-nameservers 8.8.8.8```\n\n法二\n```\nvi /etc/resolvconf/resolv.conf.d/head\n增加\ndns-nameservers 221.5.88.88\ndns-nameservers 8.8.8.8```\n重启后生效，重启不失效\n\n## 防火墙\n```\nresolvconf -u\niptables -A INPUT -p tcp -i eth0 --dport 22 -j ACCEPT\niptables -A INPUT -p tcp –dport 80 -j ACCEPT\niptables -A INPUT -p tcp –dport 8080 -j ACCEPT \niptables -A INPUT -p tcp –dport 3306 -j ACCEPT  #激活用ACCEPT ，关闭用DROP```\n保存配置\n`/etc/init.d/iptables save`\n重启\n`service iptables restart`\n\n## 修改主机名\n```\nvi /etc/hostname\nvi /etc/hosts\nhostname newname  #newname就是你要改的主机名\n\n/etc/init.d/networking restart\nshutdown -r now   #重启系统```\n\n\n---\n# Ubuntu 系统版本升级（如从16.04升到16.10）\n**Canonical** 已经提供了一个直接升级的方法，非常快捷容易。适用于：Kubuntu、 Xubuntu、 Lubuntu、 Ubuntu GNOME、 Ubuntu Mate。\n首先更新一下系统\n```\nsudo apt-get update\nsudo apt-get dist-upgrade```\n接下来，需要安装更新管理器的核心\n```\nsudo apt-get install update-manager-core  \nsudo do-release-upgrade -d  或  sudo update-manager -d```\n注：**d-release-upgrade** 命令是帮助我们寻找最新的稳定版本，而 -d 参数意思是包括非稳定版本。\n\n---","source":"_posts/环境搭建/2016-11-25-重装服务器系统基本配置.md","raw":"---\ntitle: 重装服务器系统基本配置\ncategories:\n  - 环境搭建\ntags:\n  - 重装服务器系统基本配置\nabbrlink: 29609\ndate: 2016-11-25 11:22:28\n---\n\n# Centos Mini\nCentos mini版镜像缺少很多常用工具\n\n更新系统 \n`yum update `\n\n开发环境 \n```\nyum install gcc gcc-c++ make automake cmake libtool bison flex perl git subversion mercurial -y ```\n\n常用开发库 \n```\nyum install readline-devel bzip2-devel zlib-devel libxml2-devel libxslt-devel openssl-devel kernel-devel pcre-devel boost-devel python-devel python-setuptools libpcap-devel -y ```\n\n常用软件 \n```\nyum install wget vim lsof lrzsz tcpdump -y ```\n\n防火墙打开需要的端口 \n```\niptables -A INPUT -p tcp –dport 80 -j ACCEPT\niptables -A INPUT -p tcp –dport 8080 -j ACCEPT \niptables -A INPUT -p tcp –dport 3306 -j ACCEPT  #激活用ACCEPT ，关闭用DROP```\n保存配置\n`/etc/init.d/iptables save`\n重启\n`service iptables restart`\n\n---\n# centos（6.X及以下版本）\n## 网卡配置\n`vi /etc/sysconfig/network-scripts/ifcfg-eth0` 编辑配置文件,添加修改以下内容\n**双网不要配内网网关**\n例：\n```\n#联通公网：\nDEVICE=eth0\nBOOTPROTO=static\nONBOOT=yes\nIPADDR=221.4.223.114\nNETMASK=255.255.255.224  \nGATEWAY=221.4.xxx.xxx\nDNS1=221.5.88.88\nDNS2=8.8.8.8\n#内网：\nvi /etc/sysconfig/network-scripts/ifcfg-eth1\nDEVICE=eth1\nBOOTPROTO=static\nONBOOT=yes\nIPADDR=192.168.0.114\nNETMASK=255.255.252.0  \nGATEWAY=192.168.0.1\n#DNS1=221.5.88.88\n#DNS2=8.8.8.8   （公网配了DNS和网关了）\n\n#修改DNS也可以\nvim /etc/resolv.conf\nnameserver 221.5.88.88\nnameserver 8.8.8.8\nIPV6INIT=no                 #禁止IPV6\n\nservice ip6tables stop      #停止IPV6服务\nchkconfig ip6tables off     #禁止IPV6开机启动\nservice yum-updatesd stop   #关闭系统自动更新\nchkconfig yum-updatesd off  #禁止开启启动\nservice network restart     #重启网络连接\nifconfig                    #查看IP地址```\n\n## 防火墙\n```\niptables -A INPUT -p tcp –dport 80 -j ACCEPT\niptables -A INPUT -p tcp –dport 8080 -j ACCEPT \niptables -A INPUT -p tcp –dport 3306 -j ACCEPT  #激活用ACCEPT ，关闭用DROP```\n保存配置\n`/etc/init.d/iptables save`\n重启\n`service iptables restart`\n\n## 设置主机名\n```\nvi /etc/sysconfig/network\nvi /etc/hosts\nhostname newname   #newname就是你要改的主机名\n\nservice network restart  或  /etc/network restart\nyum install wget lrzsz -y\nservice sshd start\nchkconfig sshd on\nshutdown -r now #重启系统```\n\n---\n# Ubuntu（14.04及以上版本）\n## 安装常用软件\n新安装的Ubuntu如果没有root用户密码，用`sudo passwd root`设置root密码。\n```\napt-get install wget lrzsz openssh-server vim -y\n/etc/init.d/ssh start```\n\n## 允许root登录shell\nUbuntu超级用户root用户是默认被禁用的，这就是为什么我们登陆时只能以普通用户登陆，而且switch user时没有root选项。\n必须使用命令启动root。即输入：`sudo passwd root`。然后输入密码即可启动root。\n```\nvim etc/ssh/sshd_config\n将PermitRootLogin 的值改为yes\nsudo service sshd restart```\n\n## 网卡地址配置\n\n配置静态IP地址`sudo vi /etc/network/interfaces`\n```shell\n#双网不要配内网网关\nauto lo\niface lo inet loopback\n\nifconfig   #可以看到eth0用作公网\nauto eth0   （有的可能是eno0或eno1）\niface eth0 inet static\naddress 221.4.xxx.xxx\ngateway 221.4.xxx.xxx\nnetmask 255.255.255.xxx\ndns-nameservers 221.5.88.88\ndns-nameservers 8.8.8.8\nauto eth1\niface eth1 inet static\naddress 192.168.0.254\nnetmask 255.255.252.0\n#gateway 192.168.0.1```\n保存退出,重启服务\n```\n/etc/init.d/networking restart```\n\n## 以DHCP 方式配置网卡\n```\nsudo vi /etc/network/interfaces\n   auto eth0\n   iface eth0 inet dhcp```\n用`/etc/init.d/networking restart`命令使网络设置生效\n\n## 修改DNS服务器\n法一\n```\nvi /etc/network/interfaces\n增加\ndns-nameservers 221.5.88.88\ndns-nameservers 8.8.8.8```\n\n法二\n```\nvi /etc/resolvconf/resolv.conf.d/head\n增加\ndns-nameservers 221.5.88.88\ndns-nameservers 8.8.8.8```\n重启后生效，重启不失效\n\n## 防火墙\n```\nresolvconf -u\niptables -A INPUT -p tcp -i eth0 --dport 22 -j ACCEPT\niptables -A INPUT -p tcp –dport 80 -j ACCEPT\niptables -A INPUT -p tcp –dport 8080 -j ACCEPT \niptables -A INPUT -p tcp –dport 3306 -j ACCEPT  #激活用ACCEPT ，关闭用DROP```\n保存配置\n`/etc/init.d/iptables save`\n重启\n`service iptables restart`\n\n## 修改主机名\n```\nvi /etc/hostname\nvi /etc/hosts\nhostname newname  #newname就是你要改的主机名\n\n/etc/init.d/networking restart\nshutdown -r now   #重启系统```\n\n\n---\n# Ubuntu 系统版本升级（如从16.04升到16.10）\n**Canonical** 已经提供了一个直接升级的方法，非常快捷容易。适用于：Kubuntu、 Xubuntu、 Lubuntu、 Ubuntu GNOME、 Ubuntu Mate。\n首先更新一下系统\n```\nsudo apt-get update\nsudo apt-get dist-upgrade```\n接下来，需要安装更新管理器的核心\n```\nsudo apt-get install update-manager-core  \nsudo do-release-upgrade -d  或  sudo update-manager -d```\n注：**d-release-upgrade** 命令是帮助我们寻找最新的稳定版本，而 -d 参数意思是包括非稳定版本。\n\n---","slug":"环境搭建-2016-11-25-重装服务器系统基本配置","published":1,"updated":"2016-11-25T06:30:20.064Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjo5003ad8pktsr1zsss","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Centos-Mini\"><a href=\"#Centos-Mini\" class=\"headerlink\" title=\"Centos Mini\"></a>Centos Mini</h1><p>Centos mini版镜像缺少很多常用工具</p>\n<p>更新系统<br><code>yum update</code></p>\n<p>开发环境<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install </span>gcc gcc-c++ make automake cmake libtool <span class=\"keyword\">bison </span>flex perl git <span class=\"keyword\">subversion </span>mercurial -y</div></pre></td></tr></table></figure></p>\n<p>常用开发库<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install </span>readline-devel <span class=\"keyword\">bzip2-devel </span>zlib-devel libxml2-devel libxslt-devel openssl-devel kernel-devel pcre-devel <span class=\"keyword\">boost-devel </span>python-devel python-setuptools libpcap-devel -y</div></pre></td></tr></table></figure></p>\n<p>常用软件<br><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> wget vim lsof lrzsz tcpdump -y</div></pre></td></tr></table></figure></p>\n<p>防火墙打开需要的端口<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">8080</span> -j ACCEPT </div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">3306</span> -j ACCEPT  #激活用ACCEPT ，关闭用DROP</div></pre></td></tr></table></figure></p>\n<p>保存配置<br><code>/etc/init.d/iptables save</code><br>重启<br><code>service iptables restart</code></p>\n<hr>\n<h1 id=\"centos（6-X及以下版本）\"><a href=\"#centos（6-X及以下版本）\" class=\"headerlink\" title=\"centos（6.X及以下版本）\"></a>centos（6.X及以下版本）</h1><h2 id=\"网卡配置\"><a href=\"#网卡配置\" class=\"headerlink\" title=\"网卡配置\"></a>网卡配置</h2><p><code>vi /etc/sysconfig/network-scripts/ifcfg-eth0</code> 编辑配置文件,添加修改以下内容<br><strong>双网不要配内网网关</strong><br>例：<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">#联通公网：</div><div class=\"line\">DEVICE=eth0</div><div class=\"line\">BOOTPROTO=static</div><div class=\"line\">ONBOOT=yes</div><div class=\"line\">IPADDR=<span class=\"number\">221.4</span><span class=\"number\">.223</span><span class=\"number\">.114</span></div><div class=\"line\">NETMASK=<span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.224</span>  </div><div class=\"line\">GATEWAY=<span class=\"number\">221.4</span>.xxx.xxx</div><div class=\"line\">DNS1=<span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">DNS2=<span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div><div class=\"line\">#内网：</div><div class=\"line\">vi /etc/sysconfig/network-scripts/ifcfg-eth1</div><div class=\"line\">DEVICE=eth1</div><div class=\"line\">BOOTPROTO=static</div><div class=\"line\">ONBOOT=yes</div><div class=\"line\">IPADDR=<span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.114</span></div><div class=\"line\">NETMASK=<span class=\"number\">255.255</span><span class=\"number\">.252</span><span class=\"number\">.0</span>  </div><div class=\"line\">GATEWAY=<span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\">#DNS1=<span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">#DNS2=<span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span>   （公网配了DNS和网关了）</div><div class=\"line\"></div><div class=\"line\">#修改DNS也可以</div><div class=\"line\">vim /etc/resolv.conf</div><div class=\"line\">nameserver <span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">nameserver <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div><div class=\"line\">IPV6INIT=no                 #禁止IPV6</div><div class=\"line\"></div><div class=\"line\">service ip6tables stop      #停止IPV6服务</div><div class=\"line\">chkconfig ip6tables off     #禁止IPV6开机启动</div><div class=\"line\">service yum-updatesd stop   #关闭系统自动更新</div><div class=\"line\">chkconfig yum-updatesd off  #禁止开启启动</div><div class=\"line\">service network restart     #重启网络连接</div><div class=\"line\">ifconfig                    #查看IP地址</div></pre></td></tr></table></figure></p>\n<h2 id=\"防火墙\"><a href=\"#防火墙\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">8080</span> -j ACCEPT </div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">3306</span> -j ACCEPT  #激活用ACCEPT ，关闭用DROP</div></pre></td></tr></table></figure>\n<p>保存配置<br><code>/etc/init.d/iptables save</code><br>重启<br><code>service iptables restart</code></p>\n<h2 id=\"设置主机名\"><a href=\"#设置主机名\" class=\"headerlink\" title=\"设置主机名\"></a>设置主机名</h2><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>sysconfig/network</div><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>hosts</div><div class=\"line\">hostname newname   <span class=\"meta\">#newname就是你要改的主机名</span></div><div class=\"line\"></div><div class=\"line\">service network restart  或  <span class=\"meta-keyword\">/etc/</span>network restart</div><div class=\"line\">yum install wget lrzsz -y</div><div class=\"line\">service sshd start</div><div class=\"line\">chkconfig sshd on</div><div class=\"line\">shutdown -r now <span class=\"meta\">#重启系统</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Ubuntu（14-04及以上版本）\"><a href=\"#Ubuntu（14-04及以上版本）\" class=\"headerlink\" title=\"Ubuntu（14.04及以上版本）\"></a>Ubuntu（14.04及以上版本）</h1><h2 id=\"安装常用软件\"><a href=\"#安装常用软件\" class=\"headerlink\" title=\"安装常用软件\"></a>安装常用软件</h2><p>新安装的Ubuntu如果没有root用户密码，用<code>sudo passwd root</code>设置root密码。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-get <span class=\"keyword\">install</span> wget lrzsz openssh-<span class=\"keyword\">server</span> vim -y</div><div class=\"line\">/etc/init.d/ssh <span class=\"keyword\">start</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"允许root登录shell\"><a href=\"#允许root登录shell\" class=\"headerlink\" title=\"允许root登录shell\"></a>允许root登录shell</h2><p>Ubuntu超级用户root用户是默认被禁用的，这就是为什么我们登陆时只能以普通用户登陆，而且switch user时没有root选项。<br>必须使用命令启动root。即输入：<code>sudo passwd root</code>。然后输入密码即可启动root。<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vim</span> etc/ssh/sshd_config</div><div class=\"line\">将PermitRootLogin 的值改为<span class=\"literal\">yes</span></div><div class=\"line\">sudo service sshd restart</div></pre></td></tr></table></figure></p>\n<h2 id=\"网卡地址配置\"><a href=\"#网卡地址配置\" class=\"headerlink\" title=\"网卡地址配置\"></a>网卡地址配置</h2><p>配置静态IP地址<code>sudo vi /etc/network/interfaces</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#双网不要配内网网关</div><div class=\"line\">auto lo</div><div class=\"line\">iface lo inet loopback</div><div class=\"line\"></div><div class=\"line\">ifconfig   #可以看到eth0用作公网</div><div class=\"line\">auto eth0   （有的可能是eno0或eno1）</div><div class=\"line\">iface eth0 inet static</div><div class=\"line\">address 221.4.xxx.xxx</div><div class=\"line\">gateway 221.4.xxx.xxx</div><div class=\"line\">netmask 255.255.255.xxx</div><div class=\"line\">dns-nameservers 221.5.88.88</div><div class=\"line\">dns-nameservers 8.8.8.8</div><div class=\"line\">auto eth1</div><div class=\"line\">iface eth1 inet static</div><div class=\"line\">address 192.168.0.254</div><div class=\"line\">netmask 255.255.252.0</div><div class=\"line\">#gateway 192.168.0.1</div></pre></td></tr></table></figure></p>\n<p>保存退出,重启服务<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"regexp\">/etc/i</span>nit.d<span class=\"regexp\">/networking restart</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"以DHCP-方式配置网卡\"><a href=\"#以DHCP-方式配置网卡\" class=\"headerlink\" title=\"以DHCP 方式配置网卡\"></a>以DHCP 方式配置网卡</h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo vi /etc/network/interfaces</div><div class=\"line\">   <span class=\"keyword\">auto</span> eth0</div><div class=\"line\">   iface eth0 inet dhcp</div></pre></td></tr></table></figure>\n<p>用<code>/etc/init.d/networking restart</code>命令使网络设置生效</p>\n<h2 id=\"修改DNS服务器\"><a href=\"#修改DNS服务器\" class=\"headerlink\" title=\"修改DNS服务器\"></a>修改DNS服务器</h2><p>法一<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/network/interfaces</div><div class=\"line\">增加</div><div class=\"line\">dns-nameservers <span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">dns-nameservers <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div></pre></td></tr></table></figure></p>\n<p>法二<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/resolvconf/resolv.conf.d/head</div><div class=\"line\">增加</div><div class=\"line\">dns-nameservers <span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">dns-nameservers <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div></pre></td></tr></table></figure></p>\n<p>重启后生效，重启不失效</p>\n<h2 id=\"防火墙-1\"><a href=\"#防火墙-1\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">resolvconf -u</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp -<span class=\"selector-tag\">i</span> eth0 --dport <span class=\"number\">22</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">8080</span> -j ACCEPT </div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">3306</span> -j ACCEPT  #激活用ACCEPT ，关闭用DROP</div></pre></td></tr></table></figure>\n<p>保存配置<br><code>/etc/init.d/iptables save</code><br>重启<br><code>service iptables restart</code></p>\n<h2 id=\"修改主机名\"><a href=\"#修改主机名\" class=\"headerlink\" title=\"修改主机名\"></a>修改主机名</h2><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>hostname</div><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>hosts</div><div class=\"line\">hostname newname  <span class=\"meta\">#newname就是你要改的主机名</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/networking restart</div><div class=\"line\">shutdown -r now   <span class=\"meta\">#重启系统</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Ubuntu-系统版本升级（如从16-04升到16-10）\"><a href=\"#Ubuntu-系统版本升级（如从16-04升到16-10）\" class=\"headerlink\" title=\"Ubuntu 系统版本升级（如从16.04升到16.10）\"></a>Ubuntu 系统版本升级（如从16.04升到16.10）</h1><p><strong>Canonical</strong> 已经提供了一个直接升级的方法，非常快捷容易。适用于：Kubuntu、 Xubuntu、 Lubuntu、 Ubuntu GNOME、 Ubuntu Mate。<br>首先更新一下系统<br><figure class=\"highlight processing\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> update</div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"built_in\">dist</span>-upgrade</div></pre></td></tr></table></figure></p>\n<p>接下来，需要安装更新管理器的核心<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get <span class=\"keyword\">install</span> <span class=\"keyword\">update</span>-manager-core  </div><div class=\"line\">sudo <span class=\"keyword\">do</span>-<span class=\"keyword\">release</span>-<span class=\"keyword\">upgrade</span> -d  或  sudo <span class=\"keyword\">update</span>-manager -d</div></pre></td></tr></table></figure></p>\n<p>注：<strong>d-release-upgrade</strong> 命令是帮助我们寻找最新的稳定版本，而 -d 参数意思是包括非稳定版本。</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"Centos-Mini\"><a href=\"#Centos-Mini\" class=\"headerlink\" title=\"Centos Mini\"></a>Centos Mini</h1><p>Centos mini版镜像缺少很多常用工具</p>\n<p>更新系统<br><code>yum update</code></p>\n<p>开发环境<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install </span>gcc gcc-c++ make automake cmake libtool <span class=\"keyword\">bison </span>flex perl git <span class=\"keyword\">subversion </span>mercurial -y</div></pre></td></tr></table></figure></p>\n<p>常用开发库<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install </span>readline-devel <span class=\"keyword\">bzip2-devel </span>zlib-devel libxml2-devel libxslt-devel openssl-devel kernel-devel pcre-devel <span class=\"keyword\">boost-devel </span>python-devel python-setuptools libpcap-devel -y</div></pre></td></tr></table></figure></p>\n<p>常用软件<br><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> wget vim lsof lrzsz tcpdump -y</div></pre></td></tr></table></figure></p>\n<p>防火墙打开需要的端口<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">8080</span> -j ACCEPT </div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">3306</span> -j ACCEPT  #激活用ACCEPT ，关闭用DROP</div></pre></td></tr></table></figure></p>\n<p>保存配置<br><code>/etc/init.d/iptables save</code><br>重启<br><code>service iptables restart</code></p>\n<hr>\n<h1 id=\"centos（6-X及以下版本）\"><a href=\"#centos（6-X及以下版本）\" class=\"headerlink\" title=\"centos（6.X及以下版本）\"></a>centos（6.X及以下版本）</h1><h2 id=\"网卡配置\"><a href=\"#网卡配置\" class=\"headerlink\" title=\"网卡配置\"></a>网卡配置</h2><p><code>vi /etc/sysconfig/network-scripts/ifcfg-eth0</code> 编辑配置文件,添加修改以下内容<br><strong>双网不要配内网网关</strong><br>例：<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">#联通公网：</div><div class=\"line\">DEVICE=eth0</div><div class=\"line\">BOOTPROTO=static</div><div class=\"line\">ONBOOT=yes</div><div class=\"line\">IPADDR=<span class=\"number\">221.4</span><span class=\"number\">.223</span><span class=\"number\">.114</span></div><div class=\"line\">NETMASK=<span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.224</span>  </div><div class=\"line\">GATEWAY=<span class=\"number\">221.4</span>.xxx.xxx</div><div class=\"line\">DNS1=<span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">DNS2=<span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div><div class=\"line\">#内网：</div><div class=\"line\">vi /etc/sysconfig/network-scripts/ifcfg-eth1</div><div class=\"line\">DEVICE=eth1</div><div class=\"line\">BOOTPROTO=static</div><div class=\"line\">ONBOOT=yes</div><div class=\"line\">IPADDR=<span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.114</span></div><div class=\"line\">NETMASK=<span class=\"number\">255.255</span><span class=\"number\">.252</span><span class=\"number\">.0</span>  </div><div class=\"line\">GATEWAY=<span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\">#DNS1=<span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">#DNS2=<span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span>   （公网配了DNS和网关了）</div><div class=\"line\"></div><div class=\"line\">#修改DNS也可以</div><div class=\"line\">vim /etc/resolv.conf</div><div class=\"line\">nameserver <span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">nameserver <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div><div class=\"line\">IPV6INIT=no                 #禁止IPV6</div><div class=\"line\"></div><div class=\"line\">service ip6tables stop      #停止IPV6服务</div><div class=\"line\">chkconfig ip6tables off     #禁止IPV6开机启动</div><div class=\"line\">service yum-updatesd stop   #关闭系统自动更新</div><div class=\"line\">chkconfig yum-updatesd off  #禁止开启启动</div><div class=\"line\">service network restart     #重启网络连接</div><div class=\"line\">ifconfig                    #查看IP地址</div></pre></td></tr></table></figure></p>\n<h2 id=\"防火墙\"><a href=\"#防火墙\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">8080</span> -j ACCEPT </div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">3306</span> -j ACCEPT  #激活用ACCEPT ，关闭用DROP</div></pre></td></tr></table></figure>\n<p>保存配置<br><code>/etc/init.d/iptables save</code><br>重启<br><code>service iptables restart</code></p>\n<h2 id=\"设置主机名\"><a href=\"#设置主机名\" class=\"headerlink\" title=\"设置主机名\"></a>设置主机名</h2><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>sysconfig/network</div><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>hosts</div><div class=\"line\">hostname newname   <span class=\"meta\">#newname就是你要改的主机名</span></div><div class=\"line\"></div><div class=\"line\">service network restart  或  <span class=\"meta-keyword\">/etc/</span>network restart</div><div class=\"line\">yum install wget lrzsz -y</div><div class=\"line\">service sshd start</div><div class=\"line\">chkconfig sshd on</div><div class=\"line\">shutdown -r now <span class=\"meta\">#重启系统</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Ubuntu（14-04及以上版本）\"><a href=\"#Ubuntu（14-04及以上版本）\" class=\"headerlink\" title=\"Ubuntu（14.04及以上版本）\"></a>Ubuntu（14.04及以上版本）</h1><h2 id=\"安装常用软件\"><a href=\"#安装常用软件\" class=\"headerlink\" title=\"安装常用软件\"></a>安装常用软件</h2><p>新安装的Ubuntu如果没有root用户密码，用<code>sudo passwd root</code>设置root密码。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-get <span class=\"keyword\">install</span> wget lrzsz openssh-<span class=\"keyword\">server</span> vim -y</div><div class=\"line\">/etc/init.d/ssh <span class=\"keyword\">start</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"允许root登录shell\"><a href=\"#允许root登录shell\" class=\"headerlink\" title=\"允许root登录shell\"></a>允许root登录shell</h2><p>Ubuntu超级用户root用户是默认被禁用的，这就是为什么我们登陆时只能以普通用户登陆，而且switch user时没有root选项。<br>必须使用命令启动root。即输入：<code>sudo passwd root</code>。然后输入密码即可启动root。<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">vim</span> etc/ssh/sshd_config</div><div class=\"line\">将PermitRootLogin 的值改为<span class=\"literal\">yes</span></div><div class=\"line\">sudo service sshd restart</div></pre></td></tr></table></figure></p>\n<h2 id=\"网卡地址配置\"><a href=\"#网卡地址配置\" class=\"headerlink\" title=\"网卡地址配置\"></a>网卡地址配置</h2><p>配置静态IP地址<code>sudo vi /etc/network/interfaces</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#双网不要配内网网关</div><div class=\"line\">auto lo</div><div class=\"line\">iface lo inet loopback</div><div class=\"line\"></div><div class=\"line\">ifconfig   #可以看到eth0用作公网</div><div class=\"line\">auto eth0   （有的可能是eno0或eno1）</div><div class=\"line\">iface eth0 inet static</div><div class=\"line\">address 221.4.xxx.xxx</div><div class=\"line\">gateway 221.4.xxx.xxx</div><div class=\"line\">netmask 255.255.255.xxx</div><div class=\"line\">dns-nameservers 221.5.88.88</div><div class=\"line\">dns-nameservers 8.8.8.8</div><div class=\"line\">auto eth1</div><div class=\"line\">iface eth1 inet static</div><div class=\"line\">address 192.168.0.254</div><div class=\"line\">netmask 255.255.252.0</div><div class=\"line\">#gateway 192.168.0.1</div></pre></td></tr></table></figure></p>\n<p>保存退出,重启服务<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"regexp\">/etc/i</span>nit.d<span class=\"regexp\">/networking restart</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"以DHCP-方式配置网卡\"><a href=\"#以DHCP-方式配置网卡\" class=\"headerlink\" title=\"以DHCP 方式配置网卡\"></a>以DHCP 方式配置网卡</h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo vi /etc/network/interfaces</div><div class=\"line\">   <span class=\"keyword\">auto</span> eth0</div><div class=\"line\">   iface eth0 inet dhcp</div></pre></td></tr></table></figure>\n<p>用<code>/etc/init.d/networking restart</code>命令使网络设置生效</p>\n<h2 id=\"修改DNS服务器\"><a href=\"#修改DNS服务器\" class=\"headerlink\" title=\"修改DNS服务器\"></a>修改DNS服务器</h2><p>法一<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/network/interfaces</div><div class=\"line\">增加</div><div class=\"line\">dns-nameservers <span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">dns-nameservers <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div></pre></td></tr></table></figure></p>\n<p>法二<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/resolvconf/resolv.conf.d/head</div><div class=\"line\">增加</div><div class=\"line\">dns-nameservers <span class=\"number\">221.5</span><span class=\"number\">.88</span><span class=\"number\">.88</span></div><div class=\"line\">dns-nameservers <span class=\"number\">8.8</span><span class=\"number\">.8</span><span class=\"number\">.8</span></div></pre></td></tr></table></figure></p>\n<p>重启后生效，重启不失效</p>\n<h2 id=\"防火墙-1\"><a href=\"#防火墙-1\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">resolvconf -u</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp -<span class=\"selector-tag\">i</span> eth0 --dport <span class=\"number\">22</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">80</span> -j ACCEPT</div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">8080</span> -j ACCEPT </div><div class=\"line\">iptables -A INPUT -<span class=\"selector-tag\">p</span> tcp –dport <span class=\"number\">3306</span> -j ACCEPT  #激活用ACCEPT ，关闭用DROP</div></pre></td></tr></table></figure>\n<p>保存配置<br><code>/etc/init.d/iptables save</code><br>重启<br><code>service iptables restart</code></p>\n<h2 id=\"修改主机名\"><a href=\"#修改主机名\" class=\"headerlink\" title=\"修改主机名\"></a>修改主机名</h2><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>hostname</div><div class=\"line\">vi <span class=\"meta-keyword\">/etc/</span>hosts</div><div class=\"line\">hostname newname  <span class=\"meta\">#newname就是你要改的主机名</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/networking restart</div><div class=\"line\">shutdown -r now   <span class=\"meta\">#重启系统</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Ubuntu-系统版本升级（如从16-04升到16-10）\"><a href=\"#Ubuntu-系统版本升级（如从16-04升到16-10）\" class=\"headerlink\" title=\"Ubuntu 系统版本升级（如从16.04升到16.10）\"></a>Ubuntu 系统版本升级（如从16.04升到16.10）</h1><p><strong>Canonical</strong> 已经提供了一个直接升级的方法，非常快捷容易。适用于：Kubuntu、 Xubuntu、 Lubuntu、 Ubuntu GNOME、 Ubuntu Mate。<br>首先更新一下系统<br><figure class=\"highlight processing\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> update</div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"built_in\">dist</span>-upgrade</div></pre></td></tr></table></figure></p>\n<p>接下来，需要安装更新管理器的核心<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get <span class=\"keyword\">install</span> <span class=\"keyword\">update</span>-manager-core  </div><div class=\"line\">sudo <span class=\"keyword\">do</span>-<span class=\"keyword\">release</span>-<span class=\"keyword\">upgrade</span> -d  或  sudo <span class=\"keyword\">update</span>-manager -d</div></pre></td></tr></table></figure></p>\n<p>注：<strong>d-release-upgrade</strong> 命令是帮助我们寻找最新的稳定版本，而 -d 参数意思是包括非稳定版本。</p>\n<hr>\n"},{"title":"iptables防火墙","abbrlink":61534,"date":"2016-11-02T08:08:29.000Z","_content":"\n# iptables\n\n## 简版\nCentos 查看端口占用情况命令，比如查看 80 端口占用情况使用如下命令：\n`lsof -i tcp:80`\n \n列出所有端口 ：`netstat -ntlp`\n \n### 开启端口（以 80 端口为例）  \n方法一：\n```\n/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT    #写入修改\n/etc/init.d/iptables save                              #保存修改\nservice iptables restart                               #重启防火墙，修改生效```\n \n方法二：\n```\nvi /etc/sysconfig/iptables     \n打开配置文件加入如下语句 : \n-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT    #重启防火墙，修改完成```\n \n### 关闭端口\n方法一：\n```\n/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP   #写入修改\n/etc/init.d/iptables save                           #保存修改\nservice iptables restart                            #重启防火墙，修改生效```\n \n方法二：  \n```\nvi /etc/sysconfig/iptables    \n打开配置文件加入如下语句 : \n-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP   \n重启防火墙，修改完成```\n \n### 查看端口状态\n```\n/etc/init.d/iptables status\nnetstat -lntp        #查看监听 (Listen) 的端口\nnetstat -antp        #查看所有建立的 TCP 连接```\n\n---\n## 详细版\n网上看到一篇博客，讲的很详细，摘录分享。\n\niptables 是一个安装在Ubuntu Server上的默认防火墙。在正常的ubuntu安装过程中，iptables是被安装上了的，但是它默认允许所有的流量(不管防火墙是否是无效的)\n关于iptables有价值的信息很多，但是大多都描述的很复杂。如果你想做些基本的配置，下面的 How To 很适合你。 \n◆ 基本命令 \n键入： \n\n`iptables -L `\n\n列出您当前iptables中在规则。如果您是刚刚建立您的服务器，那么可能此时还没有任何规则，而且您应该看到如下： \n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \n\nChain FORWARD (policy ACCEPT) \ntarget prot opt source destination \n\nChain OUTPUT (policy ACCEPT) \ntarget prot opt source destination \n\n◆ 允许建立会话 \n\n我们可以允许建立会话来接受流量： \n\n`iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT `\n\n◆ 在指定端口上允许入站流量 \n\n阻断所有流量您也可以启动系统，但是您可能正在通过SSH工作，所有在您阻断其他流量前有必要允许SSH流量。 \n\n为了在22端口号(默认的SSH端口)上的允许流量入站，您可以告诉iptables允许您的网卡接受所有的目的端口为22的TCP流量。 \n\n`iptables -A INPUT -p tcp -i eth0 --dport ssh -j ACCEPT `\n\n特别的，这将向表中追加(-A)INPUT规则，允许目的端口号为SSH的所有流量进入接口(-i) eth0，以便iptables完成跳转(-j)或动作：ACCEPT \n\n让我们核对下这些规则：(这里仅显示了少数行，您应该看到更多) \n\n`iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \n\n现在，让我们允许所有的web流量 \n\n`iptables -A INPUT -p tcp -i eth0 --dport 80 -j ACCEPT `\n\n检查我们现有的规则 \n\n`iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \nACCEPT tcp -- anywhere anywhere tcp dpt:www \n\n我们已经指定SSH和web端口为允许通过的TCP流量，但是因为我们还没阻断任何流量，所以到目前为止所有的流量仍然可以进入。 \n\n◆ 阻断流量 \n\n一旦一条规则对一个包进行了匹配，其他规则不再对这个包有效。因为我们的规则首先允许SSH和WEB流量，所以只要我们阻断所有流量的规则紧跟其後，我们依然能接受我们感兴趣的流量。我们要做的仅仅是把阻断所有流量的规则放在最後，所以我们需要再次用到它。 \n\n`iptables -A INPUT -j DROP `\n\n` iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \nACCEPT tcp -- anywhere anywhere tcp dpt:www \nDROP all -- anywhere anywhere \n\n因为我们刚才没有指定一个接口或一个协议，所以除了web和ssh流量外其他任何流量都会被阻断。 \n\n◆ 编辑 iptables \n\n到目前为止我们设置过程中唯一的问题是回环端口(loopbakc)也被阻断了。我们本可以通过指定 -i eth0 来仅仅丢弃eth0上的数据包，但我们也可以为回环端口(loopback)添加一条规则。如果我们追加这条规则，这将太晚了----因为所有的流量已经 被丢弃。我们必须插入这条跪着到第4行。 \n\n`iptables -I INPUT 4 -i lo -j ACCEPT `\n\n` iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \nACCEPT tcp -- anywhere anywhere tcp dpt:www \nACCEPT all -- anywhere anywhere \nDROP all -- anywhere anywhere \n\n最後2行看起来几乎一样，因此我们可以让iptables列的更详细些。 \n\n` iptables -L -v `\n\n◆ 日志记录 \n\n在上面的例子中，所有的流量都不会被记录。如果您愿意在syslog中记录被丢弃的包, 下面将是最快捷的方式: \n```\niptables -I INPUT 5 -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7 ```\n\n看 提示 段获得更多关于logging的ideas. \n\n◆ 保存 iptables \n\n如果您现在要重新启动机器的话，您的iptables配置将会消失。为了不用每次重新启动时敲入这些命令，您可以保存你的配置，让它在系统启动时自动启动。你可以通过iptables-save 和iptables-restore命令来保存配置。 \n\n\n◆ 配置启动时自动加载规则 \n\n保存您的防火墙股则到一个文件 \n\n`iptables-save > /etc/iptables.up.rules `\n\n接着修改**/etc/network/interfaces** 脚本自动应用这些规则(末行是添加的) \n```\nauto eth0 \niface eth0 inet dhcp \npre-up iptables-restore < /etc/iptables.up.rules ```\n\n你也可以准备一组规则并自动应用它 \n```\nauto eth0 \niface eth0 inet dhcp \npre-up iptables-restore < /etc/iptables.up.rules \npost-down iptables-restore < /etc/iptables.down.rules ```\n\n◆ 提示 \n◆ 如果你要在一个规则基础上手动编辑iptables \n\n下面的步骤复习了怎样建立你的防火墙规则，并假定它们相对固定(而且对于大多数人来说它们也应该是)。但是如果你要做许多研究工作，你也许想要你的 iptables在你每次重启时保存一次。你可以在**/etc/network/interfaces ** 里添加像下面的一行: \n```\npre-up iptables-restore < /etc/iptables.up.rules \npost-down iptables-save > /etc/iptables.up.rules #此行将保存规则用于下次启动时使用。```\n\n\n◆ 用iptables-save/restore来测试规则 \n\n如果你超出了这个指南来编辑iptables，你可能想利用iptables-save和iptables-restore来编辑和测试你的规则。你可以通过使用你喜爱的文本编辑器(此处为gedit)来打开这些规则文件来完成编辑。 \n\n```\niptables-save > /etc/iptables.test.rules \ngedit /etc/iptables.test.rules ```\n\n你会得到一个如下类似的文件(下面是紧接上的例子文件)： \n\nGenerated by iptables-save v1.3.1 on Sun Apr 23 06:19:53 2006 \n*filter \n:INPUT ACCEPT [368:102354] \n:FORWARD ACCEPT [0:0] \n:OUTPUT ACCEPT [92952:20764374] \n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 22 -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 80 -j ACCEPT \n-A INPUT -i lo -j ACCEPT \n-A INPUT -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7 \n-A INPUT -j DROP \nCOMMIT \n Completed on Sun Apr 23 06:19:53 2006 \n\n注意到这些都是减去iptables命令的iptables语句。随意编辑这些命令、完成後保存它们。然後简单的测试下： \n\n` iptables-restore < /etc/iptables.test.rules `\n\n测试完毕後，如果你还没添加iptables-save命令 到**/etc/network/interfaces** 里面，记得不要丢失了你的更改： \n\n`iptables-save > /etc/iptables.up.rules `\n\n◆ 更详细的日志 \n为了在你的syslog中获得更多细节，你可能想创建一个额外的链。下面是个很简短的例子---我的**/etc/iptables.up.rules** ,它将展示我是如何设置iptables记录到syslog中的： \n\nGenerated by iptables-save v1.3.1 on Sun Apr 23 05:32:09 2006 \n*filter \n:INPUT ACCEPT [273:55355] \n:FORWARD ACCEPT [0:0] \n:LOGNDROP - [0:0] \n:OUTPUT ACCEPT [92376:20668252] \n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 22 -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 80 -j ACCEPT \n-A INPUT -i lo -j ACCEPT \n-A INPUT -j LOGNDROP \n-A LOGNDROP -p tcp -m limit --limit 5/min -j LOG --log-prefix \"Denied TCP: \" --log-level 7 \n-A LOGNDROP -p udp -m limit --limit 5/min -j LOG --log-prefix \"Denied UDP: \" --log-level 7 \n-A LOGNDROP -p icmp -m limit --limit 5/min -j LOG --log-prefix \"Denied ICMP: \" --log-level 7 \n-A LOGNDROP -j DROP \nCOMMIT \nCompleted on Sun Apr 23 05:32:09 2006 \n\n请注意 一个名为 LOGNDROP的链在文件顶部。而且，INPUT链底部标准的DROP被替换成了LOGNDROP，同时添加了协议描述so it makes sense looking at the log。最後我们在LOGNDROP链尾部丢弃了这些流量。下面的行告诉我们发生了什么： \n\n* --limit 设置记录相同规则到syslog中的次数 \n* --log-prefix \"Denied...\" 添加一个前缀使得在syslog中查找更easy \n* --log-level 7 设置syslog的消息级别 (see man syslog for more detail, but you can probably leave this) \n\n◆ 禁用防火墙 \n\n如果您要临时禁用防火墙，您可以通过下面的命令清空所偶的规则： \n\n` iptables -F `\n\n◆ 轻松配置通过 GUI \n\n新手可以利用 Firetarter(一个gui工具)---仓库中的可用软件(新立德或apt-get 获得)来配置她或他的iptables规则，而需要命令行知识。请查看指南，尽管...... 配置很简单，但是对于高级用户来说可能远远不能满足。然而它对于大多数的家庭用户来说是足够的...... 。(我)建议您使用firestarter在策略表中将出站配置为 “限制”，而将您需要的连接类型(如用于http的80、https的443，msn chat的1683等等)加入白名单。您也可以通过它查看进出您计算机的活动连接...... 。防火墙会一直保持下去一旦通过向导配置完毕。拨号用户必须在向导中指定它在拨号时自动启动。 \n\nfirestarter主页： http://www.fs-security.com/ (仓库源中可用, 不需要编译) \n指南: http://www.fs-security.com/docs/tutorial.php \n\n个人笔记：不幸运的是，它没有阻断(或询问用户)特定应用/程序的选项......。因此，我的理解是一旦启用了80端口(例如，用于访问网页)，那么任何程序都可以通过80端口连接任何服务器、做任何它想做的事......\n\n\n\n---\n","source":"_posts/系统管理/2016-11-02-iptables防火墙.md","raw":"---\ntitle: iptables防火墙\ncategories:\n  - 系统管理\ntags:\n  - iptables防火墙\nabbrlink: 61534\ndate: 2016-11-02 16:08:29\n---\n\n# iptables\n\n## 简版\nCentos 查看端口占用情况命令，比如查看 80 端口占用情况使用如下命令：\n`lsof -i tcp:80`\n \n列出所有端口 ：`netstat -ntlp`\n \n### 开启端口（以 80 端口为例）  \n方法一：\n```\n/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT    #写入修改\n/etc/init.d/iptables save                              #保存修改\nservice iptables restart                               #重启防火墙，修改生效```\n \n方法二：\n```\nvi /etc/sysconfig/iptables     \n打开配置文件加入如下语句 : \n-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT    #重启防火墙，修改完成```\n \n### 关闭端口\n方法一：\n```\n/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP   #写入修改\n/etc/init.d/iptables save                           #保存修改\nservice iptables restart                            #重启防火墙，修改生效```\n \n方法二：  \n```\nvi /etc/sysconfig/iptables    \n打开配置文件加入如下语句 : \n-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP   \n重启防火墙，修改完成```\n \n### 查看端口状态\n```\n/etc/init.d/iptables status\nnetstat -lntp        #查看监听 (Listen) 的端口\nnetstat -antp        #查看所有建立的 TCP 连接```\n\n---\n## 详细版\n网上看到一篇博客，讲的很详细，摘录分享。\n\niptables 是一个安装在Ubuntu Server上的默认防火墙。在正常的ubuntu安装过程中，iptables是被安装上了的，但是它默认允许所有的流量(不管防火墙是否是无效的)\n关于iptables有价值的信息很多，但是大多都描述的很复杂。如果你想做些基本的配置，下面的 How To 很适合你。 \n◆ 基本命令 \n键入： \n\n`iptables -L `\n\n列出您当前iptables中在规则。如果您是刚刚建立您的服务器，那么可能此时还没有任何规则，而且您应该看到如下： \n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \n\nChain FORWARD (policy ACCEPT) \ntarget prot opt source destination \n\nChain OUTPUT (policy ACCEPT) \ntarget prot opt source destination \n\n◆ 允许建立会话 \n\n我们可以允许建立会话来接受流量： \n\n`iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT `\n\n◆ 在指定端口上允许入站流量 \n\n阻断所有流量您也可以启动系统，但是您可能正在通过SSH工作，所有在您阻断其他流量前有必要允许SSH流量。 \n\n为了在22端口号(默认的SSH端口)上的允许流量入站，您可以告诉iptables允许您的网卡接受所有的目的端口为22的TCP流量。 \n\n`iptables -A INPUT -p tcp -i eth0 --dport ssh -j ACCEPT `\n\n特别的，这将向表中追加(-A)INPUT规则，允许目的端口号为SSH的所有流量进入接口(-i) eth0，以便iptables完成跳转(-j)或动作：ACCEPT \n\n让我们核对下这些规则：(这里仅显示了少数行，您应该看到更多) \n\n`iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \n\n现在，让我们允许所有的web流量 \n\n`iptables -A INPUT -p tcp -i eth0 --dport 80 -j ACCEPT `\n\n检查我们现有的规则 \n\n`iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \nACCEPT tcp -- anywhere anywhere tcp dpt:www \n\n我们已经指定SSH和web端口为允许通过的TCP流量，但是因为我们还没阻断任何流量，所以到目前为止所有的流量仍然可以进入。 \n\n◆ 阻断流量 \n\n一旦一条规则对一个包进行了匹配，其他规则不再对这个包有效。因为我们的规则首先允许SSH和WEB流量，所以只要我们阻断所有流量的规则紧跟其後，我们依然能接受我们感兴趣的流量。我们要做的仅仅是把阻断所有流量的规则放在最後，所以我们需要再次用到它。 \n\n`iptables -A INPUT -j DROP `\n\n` iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \nACCEPT tcp -- anywhere anywhere tcp dpt:www \nDROP all -- anywhere anywhere \n\n因为我们刚才没有指定一个接口或一个协议，所以除了web和ssh流量外其他任何流量都会被阻断。 \n\n◆ 编辑 iptables \n\n到目前为止我们设置过程中唯一的问题是回环端口(loopbakc)也被阻断了。我们本可以通过指定 -i eth0 来仅仅丢弃eth0上的数据包，但我们也可以为回环端口(loopback)添加一条规则。如果我们追加这条规则，这将太晚了----因为所有的流量已经 被丢弃。我们必须插入这条跪着到第4行。 \n\n`iptables -I INPUT 4 -i lo -j ACCEPT `\n\n` iptables -L `\n\nChain INPUT (policy ACCEPT) \ntarget prot opt source destination \nACCEPT all -- anywhere anywhere state RELATED,ESTABLISHED \nACCEPT tcp -- anywhere anywhere tcp dpt:ssh \nACCEPT tcp -- anywhere anywhere tcp dpt:www \nACCEPT all -- anywhere anywhere \nDROP all -- anywhere anywhere \n\n最後2行看起来几乎一样，因此我们可以让iptables列的更详细些。 \n\n` iptables -L -v `\n\n◆ 日志记录 \n\n在上面的例子中，所有的流量都不会被记录。如果您愿意在syslog中记录被丢弃的包, 下面将是最快捷的方式: \n```\niptables -I INPUT 5 -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7 ```\n\n看 提示 段获得更多关于logging的ideas. \n\n◆ 保存 iptables \n\n如果您现在要重新启动机器的话，您的iptables配置将会消失。为了不用每次重新启动时敲入这些命令，您可以保存你的配置，让它在系统启动时自动启动。你可以通过iptables-save 和iptables-restore命令来保存配置。 \n\n\n◆ 配置启动时自动加载规则 \n\n保存您的防火墙股则到一个文件 \n\n`iptables-save > /etc/iptables.up.rules `\n\n接着修改**/etc/network/interfaces** 脚本自动应用这些规则(末行是添加的) \n```\nauto eth0 \niface eth0 inet dhcp \npre-up iptables-restore < /etc/iptables.up.rules ```\n\n你也可以准备一组规则并自动应用它 \n```\nauto eth0 \niface eth0 inet dhcp \npre-up iptables-restore < /etc/iptables.up.rules \npost-down iptables-restore < /etc/iptables.down.rules ```\n\n◆ 提示 \n◆ 如果你要在一个规则基础上手动编辑iptables \n\n下面的步骤复习了怎样建立你的防火墙规则，并假定它们相对固定(而且对于大多数人来说它们也应该是)。但是如果你要做许多研究工作，你也许想要你的 iptables在你每次重启时保存一次。你可以在**/etc/network/interfaces ** 里添加像下面的一行: \n```\npre-up iptables-restore < /etc/iptables.up.rules \npost-down iptables-save > /etc/iptables.up.rules #此行将保存规则用于下次启动时使用。```\n\n\n◆ 用iptables-save/restore来测试规则 \n\n如果你超出了这个指南来编辑iptables，你可能想利用iptables-save和iptables-restore来编辑和测试你的规则。你可以通过使用你喜爱的文本编辑器(此处为gedit)来打开这些规则文件来完成编辑。 \n\n```\niptables-save > /etc/iptables.test.rules \ngedit /etc/iptables.test.rules ```\n\n你会得到一个如下类似的文件(下面是紧接上的例子文件)： \n\nGenerated by iptables-save v1.3.1 on Sun Apr 23 06:19:53 2006 \n*filter \n:INPUT ACCEPT [368:102354] \n:FORWARD ACCEPT [0:0] \n:OUTPUT ACCEPT [92952:20764374] \n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 22 -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 80 -j ACCEPT \n-A INPUT -i lo -j ACCEPT \n-A INPUT -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7 \n-A INPUT -j DROP \nCOMMIT \n Completed on Sun Apr 23 06:19:53 2006 \n\n注意到这些都是减去iptables命令的iptables语句。随意编辑这些命令、完成後保存它们。然後简单的测试下： \n\n` iptables-restore < /etc/iptables.test.rules `\n\n测试完毕後，如果你还没添加iptables-save命令 到**/etc/network/interfaces** 里面，记得不要丢失了你的更改： \n\n`iptables-save > /etc/iptables.up.rules `\n\n◆ 更详细的日志 \n为了在你的syslog中获得更多细节，你可能想创建一个额外的链。下面是个很简短的例子---我的**/etc/iptables.up.rules** ,它将展示我是如何设置iptables记录到syslog中的： \n\nGenerated by iptables-save v1.3.1 on Sun Apr 23 05:32:09 2006 \n*filter \n:INPUT ACCEPT [273:55355] \n:FORWARD ACCEPT [0:0] \n:LOGNDROP - [0:0] \n:OUTPUT ACCEPT [92376:20668252] \n-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 22 -j ACCEPT \n-A INPUT -i eth0 -p tcp -m tcp --dport 80 -j ACCEPT \n-A INPUT -i lo -j ACCEPT \n-A INPUT -j LOGNDROP \n-A LOGNDROP -p tcp -m limit --limit 5/min -j LOG --log-prefix \"Denied TCP: \" --log-level 7 \n-A LOGNDROP -p udp -m limit --limit 5/min -j LOG --log-prefix \"Denied UDP: \" --log-level 7 \n-A LOGNDROP -p icmp -m limit --limit 5/min -j LOG --log-prefix \"Denied ICMP: \" --log-level 7 \n-A LOGNDROP -j DROP \nCOMMIT \nCompleted on Sun Apr 23 05:32:09 2006 \n\n请注意 一个名为 LOGNDROP的链在文件顶部。而且，INPUT链底部标准的DROP被替换成了LOGNDROP，同时添加了协议描述so it makes sense looking at the log。最後我们在LOGNDROP链尾部丢弃了这些流量。下面的行告诉我们发生了什么： \n\n* --limit 设置记录相同规则到syslog中的次数 \n* --log-prefix \"Denied...\" 添加一个前缀使得在syslog中查找更easy \n* --log-level 7 设置syslog的消息级别 (see man syslog for more detail, but you can probably leave this) \n\n◆ 禁用防火墙 \n\n如果您要临时禁用防火墙，您可以通过下面的命令清空所偶的规则： \n\n` iptables -F `\n\n◆ 轻松配置通过 GUI \n\n新手可以利用 Firetarter(一个gui工具)---仓库中的可用软件(新立德或apt-get 获得)来配置她或他的iptables规则，而需要命令行知识。请查看指南，尽管...... 配置很简单，但是对于高级用户来说可能远远不能满足。然而它对于大多数的家庭用户来说是足够的...... 。(我)建议您使用firestarter在策略表中将出站配置为 “限制”，而将您需要的连接类型(如用于http的80、https的443，msn chat的1683等等)加入白名单。您也可以通过它查看进出您计算机的活动连接...... 。防火墙会一直保持下去一旦通过向导配置完毕。拨号用户必须在向导中指定它在拨号时自动启动。 \n\nfirestarter主页： http://www.fs-security.com/ (仓库源中可用, 不需要编译) \n指南: http://www.fs-security.com/docs/tutorial.php \n\n个人笔记：不幸运的是，它没有阻断(或询问用户)特定应用/程序的选项......。因此，我的理解是一旦启用了80端口(例如，用于访问网页)，那么任何程序都可以通过80端口连接任何服务器、做任何它想做的事......\n\n\n\n---\n","slug":"系统管理-2016-11-02-iptables防火墙","published":1,"updated":"2016-12-12T08:52:16.638Z","_id":"ciwlrsjo6003cd8pk3lhuitns","comments":1,"layout":"post","photos":[],"link":"","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"iptables\"><a href=\"#iptables\" class=\"headerlink\" title=\"iptables\"></a>iptables</h1><h2 id=\"简版\"><a href=\"#简版\" class=\"headerlink\" title=\"简版\"></a>简版</h2><p>Centos 查看端口占用情况命令，比如查看 80 端口占用情况使用如下命令：<br><code>lsof -i tcp:80</code></p>\n<p>列出所有端口 ：<code>netstat -ntlp</code></p>\n<h3 id=\"开启端口（以-80-端口为例）\"><a href=\"#开启端口（以-80-端口为例）\" class=\"headerlink\" title=\"开启端口（以 80 端口为例）\"></a>开启端口（以 80 端口为例）</h3><p>方法一：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/sbin/</span>iptables -I INPUT -p tcp --dport <span class=\"number\">80</span> -j ACCEPT    <span class=\"meta\">#写入修改</span></div><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/iptables save                              <span class=\"meta\">#保存修改</span></div><div class=\"line\">service iptables restart                               <span class=\"meta\">#重启防火墙，修改生效</span></div></pre></td></tr></table></figure></p>\n<p>方法二：<br><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/sysconfig/iptables     </div><div class=\"line\">打开配置文件加入如下语句 : </div><div class=\"line\">-A INPUT -p tcp -m <span class=\"keyword\">state</span> --state NEW -m tcp --dport <span class=\"number\">80</span> -j ACCEPT    <span class=\"comment\">#重启防火墙，修改完成</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"关闭端口\"><a href=\"#关闭端口\" class=\"headerlink\" title=\"关闭端口\"></a>关闭端口</h3><p>方法一：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/sbin/</span>iptables -I INPUT -p tcp --dport <span class=\"number\">80</span> -j DROP   <span class=\"meta\">#写入修改</span></div><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/iptables save                           <span class=\"meta\">#保存修改</span></div><div class=\"line\">service iptables restart                            <span class=\"meta\">#重启防火墙，修改生效</span></div></pre></td></tr></table></figure></p>\n<p>方法二：<br><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/sysconfig/iptables    </div><div class=\"line\">打开配置文件加入如下语句 : </div><div class=\"line\">-A INPUT -p tcp -m <span class=\"keyword\">state</span> --state NEW -m tcp --dport <span class=\"number\">80</span> -j DROP   </div><div class=\"line\">重启防火墙，修改完成</div></pre></td></tr></table></figure></p>\n<h3 id=\"查看端口状态\"><a href=\"#查看端口状态\" class=\"headerlink\" title=\"查看端口状态\"></a>查看端口状态</h3><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/iptables status</div><div class=\"line\">netstat -lntp        <span class=\"meta\">#查看监听 (Listen) 的端口</span></div><div class=\"line\">netstat -antp        <span class=\"meta\">#查看所有建立的 TCP 连接</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"详细版\"><a href=\"#详细版\" class=\"headerlink\" title=\"详细版\"></a>详细版</h2><p>网上看到一篇博客，讲的很详细，摘录分享。</p>\n<p>iptables 是一个安装在Ubuntu Server上的默认防火墙。在正常的ubuntu安装过程中，iptables是被安装上了的，但是它默认允许所有的流量(不管防火墙是否是无效的)<br>关于iptables有价值的信息很多，但是大多都描述的很复杂。如果你想做些基本的配置，下面的 How To 很适合你。<br>◆ 基本命令<br>键入： </p>\n<p><code>iptables -L</code></p>\n<p>列出您当前iptables中在规则。如果您是刚刚建立您的服务器，那么可能此时还没有任何规则，而且您应该看到如下： </p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination </p>\n<p>Chain FORWARD (policy ACCEPT)<br>target prot opt source destination </p>\n<p>Chain OUTPUT (policy ACCEPT)<br>target prot opt source destination </p>\n<p>◆ 允许建立会话 </p>\n<p>我们可以允许建立会话来接受流量： </p>\n<p><code>iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</code></p>\n<p>◆ 在指定端口上允许入站流量 </p>\n<p>阻断所有流量您也可以启动系统，但是您可能正在通过SSH工作，所有在您阻断其他流量前有必要允许SSH流量。 </p>\n<p>为了在22端口号(默认的SSH端口)上的允许流量入站，您可以告诉iptables允许您的网卡接受所有的目的端口为22的TCP流量。 </p>\n<p><code>iptables -A INPUT -p tcp -i eth0 --dport ssh -j ACCEPT</code></p>\n<p>特别的，这将向表中追加(-A)INPUT规则，允许目的端口号为SSH的所有流量进入接口(-i) eth0，以便iptables完成跳转(-j)或动作：ACCEPT </p>\n<p>让我们核对下这些规则：(这里仅显示了少数行，您应该看到更多) </p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh </p>\n<p>现在，让我们允许所有的web流量 </p>\n<p><code>iptables -A INPUT -p tcp -i eth0 --dport 80 -j ACCEPT</code></p>\n<p>检查我们现有的规则 </p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh<br>ACCEPT tcp – anywhere anywhere tcp dpt:www </p>\n<p>我们已经指定SSH和web端口为允许通过的TCP流量，但是因为我们还没阻断任何流量，所以到目前为止所有的流量仍然可以进入。 </p>\n<p>◆ 阻断流量 </p>\n<p>一旦一条规则对一个包进行了匹配，其他规则不再对这个包有效。因为我们的规则首先允许SSH和WEB流量，所以只要我们阻断所有流量的规则紧跟其後，我们依然能接受我们感兴趣的流量。我们要做的仅仅是把阻断所有流量的规则放在最後，所以我们需要再次用到它。 </p>\n<p><code>iptables -A INPUT -j DROP</code></p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh<br>ACCEPT tcp – anywhere anywhere tcp dpt:www<br>DROP all – anywhere anywhere </p>\n<p>因为我们刚才没有指定一个接口或一个协议，所以除了web和ssh流量外其他任何流量都会被阻断。 </p>\n<p>◆ 编辑 iptables </p>\n<p>到目前为止我们设置过程中唯一的问题是回环端口(loopbakc)也被阻断了。我们本可以通过指定 -i eth0 来仅仅丢弃eth0上的数据包，但我们也可以为回环端口(loopback)添加一条规则。如果我们追加这条规则，这将太晚了—-因为所有的流量已经 被丢弃。我们必须插入这条跪着到第4行。 </p>\n<p><code>iptables -I INPUT 4 -i lo -j ACCEPT</code></p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh<br>ACCEPT tcp – anywhere anywhere tcp dpt:www<br>ACCEPT all – anywhere anywhere<br>DROP all – anywhere anywhere </p>\n<p>最後2行看起来几乎一样，因此我们可以让iptables列的更详细些。 </p>\n<p><code>iptables -L -v</code></p>\n<p>◆ 日志记录 </p>\n<p>在上面的例子中，所有的流量都不会被记录。如果您愿意在syslog中记录被丢弃的包, 下面将是最快捷的方式:<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables -I INPUT <span class=\"number\">5</span> -m <span class=\"built_in\">limit</span> --<span class=\"built_in\">limit</span> <span class=\"number\">5</span>/<span class=\"built_in\">min</span> -j LOG --<span class=\"built_in\">log</span>-<span class=\"built_in\">prefix</span> <span class=\"string\">\"iptables denied: \"</span> --<span class=\"built_in\">log</span>-level <span class=\"number\">7</span></div></pre></td></tr></table></figure></p>\n<p>看 提示 段获得更多关于logging的ideas. </p>\n<p>◆ 保存 iptables </p>\n<p>如果您现在要重新启动机器的话，您的iptables配置将会消失。为了不用每次重新启动时敲入这些命令，您可以保存你的配置，让它在系统启动时自动启动。你可以通过iptables-save 和iptables-restore命令来保存配置。 </p>\n<p>◆ 配置启动时自动加载规则 </p>\n<p>保存您的防火墙股则到一个文件 </p>\n<p><code>iptables-save &gt; /etc/iptables.up.rules</code></p>\n<p>接着修改<strong>/etc/network/interfaces</strong> 脚本自动应用这些规则(末行是添加的)<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">auto</span> eth0 </div><div class=\"line\">iface eth0 inet dhcp </div><div class=\"line\">pre-up iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span></div></pre></td></tr></table></figure></p>\n<p>你也可以准备一组规则并自动应用它<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">auto</span> eth0 </div><div class=\"line\">iface eth0 inet dhcp </div><div class=\"line\">pre-up iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span> </div><div class=\"line\">post-down iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.down</span><span class=\"selector-class\">.rules</span></div></pre></td></tr></table></figure></p>\n<p>◆ 提示<br>◆ 如果你要在一个规则基础上手动编辑iptables </p>\n<p>下面的步骤复习了怎样建立你的防火墙规则，并假定它们相对固定(而且对于大多数人来说它们也应该是)。但是如果你要做许多研究工作，你也许想要你的 iptables在你每次重启时保存一次。你可以在<strong>/etc/network/interfaces </strong> 里添加像下面的一行:<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">pre-up iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span> </div><div class=\"line\">post-down iptables-save &gt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span> #此行将保存规则用于下次启动时使用。</div></pre></td></tr></table></figure></p>\n<p>◆ 用iptables-save/restore来测试规则 </p>\n<p>如果你超出了这个指南来编辑iptables，你可能想利用iptables-save和iptables-restore来编辑和测试你的规则。你可以通过使用你喜爱的文本编辑器(此处为gedit)来打开这些规则文件来完成编辑。 </p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables-save &gt; /etc/iptables<span class=\"selector-class\">.test</span><span class=\"selector-class\">.rules</span> </div><div class=\"line\">gedit /etc/iptables<span class=\"selector-class\">.test</span><span class=\"selector-class\">.rules</span></div></pre></td></tr></table></figure>\n<p>你会得到一个如下类似的文件(下面是紧接上的例子文件)： </p>\n<p>Generated by iptables-save v1.3.1 on Sun Apr 23 06:19:53 2006<br>*filter<br>:INPUT ACCEPT [368:102354]<br>:FORWARD ACCEPT [0:0]<br>:OUTPUT ACCEPT [92952:20764374]<br>-A INPUT -m state –state RELATED,ESTABLISHED -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 22 -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 80 -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br>-A INPUT -m limit –limit 5/min -j LOG –log-prefix “iptables denied: “ –log-level 7<br>-A INPUT -j DROP<br>COMMIT<br> Completed on Sun Apr 23 06:19:53 2006 </p>\n<p>注意到这些都是减去iptables命令的iptables语句。随意编辑这些命令、完成後保存它们。然後简单的测试下： </p>\n<p><code>iptables-restore &lt; /etc/iptables.test.rules</code></p>\n<p>测试完毕後，如果你还没添加iptables-save命令 到<strong>/etc/network/interfaces</strong> 里面，记得不要丢失了你的更改： </p>\n<p><code>iptables-save &gt; /etc/iptables.up.rules</code></p>\n<p>◆ 更详细的日志<br>为了在你的syslog中获得更多细节，你可能想创建一个额外的链。下面是个很简短的例子—我的<strong>/etc/iptables.up.rules</strong> ,它将展示我是如何设置iptables记录到syslog中的： </p>\n<p>Generated by iptables-save v1.3.1 on Sun Apr 23 05:32:09 2006<br>*filter<br>:INPUT ACCEPT [273:55355]<br>:FORWARD ACCEPT [0:0]<br>:LOGNDROP - [0:0]<br>:OUTPUT ACCEPT [92376:20668252]<br>-A INPUT -m state –state RELATED,ESTABLISHED -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 22 -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 80 -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br>-A INPUT -j LOGNDROP<br>-A LOGNDROP -p tcp -m limit –limit 5/min -j LOG –log-prefix “Denied TCP: “ –log-level 7<br>-A LOGNDROP -p udp -m limit –limit 5/min -j LOG –log-prefix “Denied UDP: “ –log-level 7<br>-A LOGNDROP -p icmp -m limit –limit 5/min -j LOG –log-prefix “Denied ICMP: “ –log-level 7<br>-A LOGNDROP -j DROP<br>COMMIT<br>Completed on Sun Apr 23 05:32:09 2006 </p>\n<p>请注意 一个名为 LOGNDROP的链在文件顶部。而且，INPUT链底部标准的DROP被替换成了LOGNDROP，同时添加了协议描述so it makes sense looking at the log。最後我们在LOGNDROP链尾部丢弃了这些流量。下面的行告诉我们发生了什么： </p>\n<ul>\n<li>–limit 设置记录相同规则到syslog中的次数 </li>\n<li>–log-prefix “Denied…” 添加一个前缀使得在syslog中查找更easy </li>\n<li>–log-level 7 设置syslog的消息级别 (see man syslog for more detail, but you can probably leave this) </li>\n</ul>\n<p>◆ 禁用防火墙 </p>\n<p>如果您要临时禁用防火墙，您可以通过下面的命令清空所偶的规则： </p>\n<p><code>iptables -F</code></p>\n<p>◆ 轻松配置通过 GUI </p>\n<p>新手可以利用 Firetarter(一个gui工具)—仓库中的可用软件(新立德或apt-get 获得)来配置她或他的iptables规则，而需要命令行知识。请查看指南，尽管…… 配置很简单，但是对于高级用户来说可能远远不能满足。然而它对于大多数的家庭用户来说是足够的…… 。(我)建议您使用firestarter在策略表中将出站配置为 “限制”，而将您需要的连接类型(如用于http的80、https的443，msn chat的1683等等)加入白名单。您也可以通过它查看进出您计算机的活动连接…… 。防火墙会一直保持下去一旦通过向导配置完毕。拨号用户必须在向导中指定它在拨号时自动启动。 </p>\n<p>firestarter主页： <a href=\"http://www.fs-security.com/\" target=\"_blank\" rel=\"external\">http://www.fs-security.com/</a> (仓库源中可用, 不需要编译)<br>指南: <a href=\"http://www.fs-security.com/docs/tutorial.php\" target=\"_blank\" rel=\"external\">http://www.fs-security.com/docs/tutorial.php</a> </p>\n<p>个人笔记：不幸运的是，它没有阻断(或询问用户)特定应用/程序的选项……。因此，我的理解是一旦启用了80端口(例如，用于访问网页)，那么任何程序都可以通过80端口连接任何服务器、做任何它想做的事……</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"iptables\"><a href=\"#iptables\" class=\"headerlink\" title=\"iptables\"></a>iptables</h1><h2 id=\"简版\"><a href=\"#简版\" class=\"headerlink\" title=\"简版\"></a>简版</h2><p>Centos 查看端口占用情况命令，比如查看 80 端口占用情况使用如下命令：<br><code>lsof -i tcp:80</code></p>\n<p>列出所有端口 ：<code>netstat -ntlp</code></p>\n<h3 id=\"开启端口（以-80-端口为例）\"><a href=\"#开启端口（以-80-端口为例）\" class=\"headerlink\" title=\"开启端口（以 80 端口为例）\"></a>开启端口（以 80 端口为例）</h3><p>方法一：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/sbin/</span>iptables -I INPUT -p tcp --dport <span class=\"number\">80</span> -j ACCEPT    <span class=\"meta\">#写入修改</span></div><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/iptables save                              <span class=\"meta\">#保存修改</span></div><div class=\"line\">service iptables restart                               <span class=\"meta\">#重启防火墙，修改生效</span></div></pre></td></tr></table></figure></p>\n<p>方法二：<br><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/sysconfig/iptables     </div><div class=\"line\">打开配置文件加入如下语句 : </div><div class=\"line\">-A INPUT -p tcp -m <span class=\"keyword\">state</span> --state NEW -m tcp --dport <span class=\"number\">80</span> -j ACCEPT    <span class=\"comment\">#重启防火墙，修改完成</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"关闭端口\"><a href=\"#关闭端口\" class=\"headerlink\" title=\"关闭端口\"></a>关闭端口</h3><p>方法一：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/sbin/</span>iptables -I INPUT -p tcp --dport <span class=\"number\">80</span> -j DROP   <span class=\"meta\">#写入修改</span></div><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/iptables save                           <span class=\"meta\">#保存修改</span></div><div class=\"line\">service iptables restart                            <span class=\"meta\">#重启防火墙，修改生效</span></div></pre></td></tr></table></figure></p>\n<p>方法二：<br><figure class=\"highlight pf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">vi /etc/sysconfig/iptables    </div><div class=\"line\">打开配置文件加入如下语句 : </div><div class=\"line\">-A INPUT -p tcp -m <span class=\"keyword\">state</span> --state NEW -m tcp --dport <span class=\"number\">80</span> -j DROP   </div><div class=\"line\">重启防火墙，修改完成</div></pre></td></tr></table></figure></p>\n<h3 id=\"查看端口状态\"><a href=\"#查看端口状态\" class=\"headerlink\" title=\"查看端口状态\"></a>查看端口状态</h3><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta-keyword\">/etc/</span>init.d/iptables status</div><div class=\"line\">netstat -lntp        <span class=\"meta\">#查看监听 (Listen) 的端口</span></div><div class=\"line\">netstat -antp        <span class=\"meta\">#查看所有建立的 TCP 连接</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"详细版\"><a href=\"#详细版\" class=\"headerlink\" title=\"详细版\"></a>详细版</h2><p>网上看到一篇博客，讲的很详细，摘录分享。</p>\n<p>iptables 是一个安装在Ubuntu Server上的默认防火墙。在正常的ubuntu安装过程中，iptables是被安装上了的，但是它默认允许所有的流量(不管防火墙是否是无效的)<br>关于iptables有价值的信息很多，但是大多都描述的很复杂。如果你想做些基本的配置，下面的 How To 很适合你。<br>◆ 基本命令<br>键入： </p>\n<p><code>iptables -L</code></p>\n<p>列出您当前iptables中在规则。如果您是刚刚建立您的服务器，那么可能此时还没有任何规则，而且您应该看到如下： </p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination </p>\n<p>Chain FORWARD (policy ACCEPT)<br>target prot opt source destination </p>\n<p>Chain OUTPUT (policy ACCEPT)<br>target prot opt source destination </p>\n<p>◆ 允许建立会话 </p>\n<p>我们可以允许建立会话来接受流量： </p>\n<p><code>iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</code></p>\n<p>◆ 在指定端口上允许入站流量 </p>\n<p>阻断所有流量您也可以启动系统，但是您可能正在通过SSH工作，所有在您阻断其他流量前有必要允许SSH流量。 </p>\n<p>为了在22端口号(默认的SSH端口)上的允许流量入站，您可以告诉iptables允许您的网卡接受所有的目的端口为22的TCP流量。 </p>\n<p><code>iptables -A INPUT -p tcp -i eth0 --dport ssh -j ACCEPT</code></p>\n<p>特别的，这将向表中追加(-A)INPUT规则，允许目的端口号为SSH的所有流量进入接口(-i) eth0，以便iptables完成跳转(-j)或动作：ACCEPT </p>\n<p>让我们核对下这些规则：(这里仅显示了少数行，您应该看到更多) </p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh </p>\n<p>现在，让我们允许所有的web流量 </p>\n<p><code>iptables -A INPUT -p tcp -i eth0 --dport 80 -j ACCEPT</code></p>\n<p>检查我们现有的规则 </p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh<br>ACCEPT tcp – anywhere anywhere tcp dpt:www </p>\n<p>我们已经指定SSH和web端口为允许通过的TCP流量，但是因为我们还没阻断任何流量，所以到目前为止所有的流量仍然可以进入。 </p>\n<p>◆ 阻断流量 </p>\n<p>一旦一条规则对一个包进行了匹配，其他规则不再对这个包有效。因为我们的规则首先允许SSH和WEB流量，所以只要我们阻断所有流量的规则紧跟其後，我们依然能接受我们感兴趣的流量。我们要做的仅仅是把阻断所有流量的规则放在最後，所以我们需要再次用到它。 </p>\n<p><code>iptables -A INPUT -j DROP</code></p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh<br>ACCEPT tcp – anywhere anywhere tcp dpt:www<br>DROP all – anywhere anywhere </p>\n<p>因为我们刚才没有指定一个接口或一个协议，所以除了web和ssh流量外其他任何流量都会被阻断。 </p>\n<p>◆ 编辑 iptables </p>\n<p>到目前为止我们设置过程中唯一的问题是回环端口(loopbakc)也被阻断了。我们本可以通过指定 -i eth0 来仅仅丢弃eth0上的数据包，但我们也可以为回环端口(loopback)添加一条规则。如果我们追加这条规则，这将太晚了—-因为所有的流量已经 被丢弃。我们必须插入这条跪着到第4行。 </p>\n<p><code>iptables -I INPUT 4 -i lo -j ACCEPT</code></p>\n<p><code>iptables -L</code></p>\n<p>Chain INPUT (policy ACCEPT)<br>target prot opt source destination<br>ACCEPT all – anywhere anywhere state RELATED,ESTABLISHED<br>ACCEPT tcp – anywhere anywhere tcp dpt:ssh<br>ACCEPT tcp – anywhere anywhere tcp dpt:www<br>ACCEPT all – anywhere anywhere<br>DROP all – anywhere anywhere </p>\n<p>最後2行看起来几乎一样，因此我们可以让iptables列的更详细些。 </p>\n<p><code>iptables -L -v</code></p>\n<p>◆ 日志记录 </p>\n<p>在上面的例子中，所有的流量都不会被记录。如果您愿意在syslog中记录被丢弃的包, 下面将是最快捷的方式:<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables -I INPUT <span class=\"number\">5</span> -m <span class=\"built_in\">limit</span> --<span class=\"built_in\">limit</span> <span class=\"number\">5</span>/<span class=\"built_in\">min</span> -j LOG --<span class=\"built_in\">log</span>-<span class=\"built_in\">prefix</span> <span class=\"string\">\"iptables denied: \"</span> --<span class=\"built_in\">log</span>-level <span class=\"number\">7</span></div></pre></td></tr></table></figure></p>\n<p>看 提示 段获得更多关于logging的ideas. </p>\n<p>◆ 保存 iptables </p>\n<p>如果您现在要重新启动机器的话，您的iptables配置将会消失。为了不用每次重新启动时敲入这些命令，您可以保存你的配置，让它在系统启动时自动启动。你可以通过iptables-save 和iptables-restore命令来保存配置。 </p>\n<p>◆ 配置启动时自动加载规则 </p>\n<p>保存您的防火墙股则到一个文件 </p>\n<p><code>iptables-save &gt; /etc/iptables.up.rules</code></p>\n<p>接着修改<strong>/etc/network/interfaces</strong> 脚本自动应用这些规则(末行是添加的)<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">auto</span> eth0 </div><div class=\"line\">iface eth0 inet dhcp </div><div class=\"line\">pre-up iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span></div></pre></td></tr></table></figure></p>\n<p>你也可以准备一组规则并自动应用它<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">auto</span> eth0 </div><div class=\"line\">iface eth0 inet dhcp </div><div class=\"line\">pre-up iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span> </div><div class=\"line\">post-down iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.down</span><span class=\"selector-class\">.rules</span></div></pre></td></tr></table></figure></p>\n<p>◆ 提示<br>◆ 如果你要在一个规则基础上手动编辑iptables </p>\n<p>下面的步骤复习了怎样建立你的防火墙规则，并假定它们相对固定(而且对于大多数人来说它们也应该是)。但是如果你要做许多研究工作，你也许想要你的 iptables在你每次重启时保存一次。你可以在<strong>/etc/network/interfaces </strong> 里添加像下面的一行:<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">pre-up iptables-restore &lt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span> </div><div class=\"line\">post-down iptables-save &gt; /etc/iptables<span class=\"selector-class\">.up</span><span class=\"selector-class\">.rules</span> #此行将保存规则用于下次启动时使用。</div></pre></td></tr></table></figure></p>\n<p>◆ 用iptables-save/restore来测试规则 </p>\n<p>如果你超出了这个指南来编辑iptables，你可能想利用iptables-save和iptables-restore来编辑和测试你的规则。你可以通过使用你喜爱的文本编辑器(此处为gedit)来打开这些规则文件来完成编辑。 </p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">iptables-save &gt; /etc/iptables<span class=\"selector-class\">.test</span><span class=\"selector-class\">.rules</span> </div><div class=\"line\">gedit /etc/iptables<span class=\"selector-class\">.test</span><span class=\"selector-class\">.rules</span></div></pre></td></tr></table></figure>\n<p>你会得到一个如下类似的文件(下面是紧接上的例子文件)： </p>\n<p>Generated by iptables-save v1.3.1 on Sun Apr 23 06:19:53 2006<br>*filter<br>:INPUT ACCEPT [368:102354]<br>:FORWARD ACCEPT [0:0]<br>:OUTPUT ACCEPT [92952:20764374]<br>-A INPUT -m state –state RELATED,ESTABLISHED -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 22 -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 80 -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br>-A INPUT -m limit –limit 5/min -j LOG –log-prefix “iptables denied: “ –log-level 7<br>-A INPUT -j DROP<br>COMMIT<br> Completed on Sun Apr 23 06:19:53 2006 </p>\n<p>注意到这些都是减去iptables命令的iptables语句。随意编辑这些命令、完成後保存它们。然後简单的测试下： </p>\n<p><code>iptables-restore &lt; /etc/iptables.test.rules</code></p>\n<p>测试完毕後，如果你还没添加iptables-save命令 到<strong>/etc/network/interfaces</strong> 里面，记得不要丢失了你的更改： </p>\n<p><code>iptables-save &gt; /etc/iptables.up.rules</code></p>\n<p>◆ 更详细的日志<br>为了在你的syslog中获得更多细节，你可能想创建一个额外的链。下面是个很简短的例子—我的<strong>/etc/iptables.up.rules</strong> ,它将展示我是如何设置iptables记录到syslog中的： </p>\n<p>Generated by iptables-save v1.3.1 on Sun Apr 23 05:32:09 2006<br>*filter<br>:INPUT ACCEPT [273:55355]<br>:FORWARD ACCEPT [0:0]<br>:LOGNDROP - [0:0]<br>:OUTPUT ACCEPT [92376:20668252]<br>-A INPUT -m state –state RELATED,ESTABLISHED -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 22 -j ACCEPT<br>-A INPUT -i eth0 -p tcp -m tcp –dport 80 -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br>-A INPUT -j LOGNDROP<br>-A LOGNDROP -p tcp -m limit –limit 5/min -j LOG –log-prefix “Denied TCP: “ –log-level 7<br>-A LOGNDROP -p udp -m limit –limit 5/min -j LOG –log-prefix “Denied UDP: “ –log-level 7<br>-A LOGNDROP -p icmp -m limit –limit 5/min -j LOG –log-prefix “Denied ICMP: “ –log-level 7<br>-A LOGNDROP -j DROP<br>COMMIT<br>Completed on Sun Apr 23 05:32:09 2006 </p>\n<p>请注意 一个名为 LOGNDROP的链在文件顶部。而且，INPUT链底部标准的DROP被替换成了LOGNDROP，同时添加了协议描述so it makes sense looking at the log。最後我们在LOGNDROP链尾部丢弃了这些流量。下面的行告诉我们发生了什么： </p>\n<ul>\n<li>–limit 设置记录相同规则到syslog中的次数 </li>\n<li>–log-prefix “Denied…” 添加一个前缀使得在syslog中查找更easy </li>\n<li>–log-level 7 设置syslog的消息级别 (see man syslog for more detail, but you can probably leave this) </li>\n</ul>\n<p>◆ 禁用防火墙 </p>\n<p>如果您要临时禁用防火墙，您可以通过下面的命令清空所偶的规则： </p>\n<p><code>iptables -F</code></p>\n<p>◆ 轻松配置通过 GUI </p>\n<p>新手可以利用 Firetarter(一个gui工具)—仓库中的可用软件(新立德或apt-get 获得)来配置她或他的iptables规则，而需要命令行知识。请查看指南，尽管…… 配置很简单，但是对于高级用户来说可能远远不能满足。然而它对于大多数的家庭用户来说是足够的…… 。(我)建议您使用firestarter在策略表中将出站配置为 “限制”，而将您需要的连接类型(如用于http的80、https的443，msn chat的1683等等)加入白名单。您也可以通过它查看进出您计算机的活动连接…… 。防火墙会一直保持下去一旦通过向导配置完毕。拨号用户必须在向导中指定它在拨号时自动启动。 </p>\n<p>firestarter主页： <a href=\"http://www.fs-security.com/\">http://www.fs-security.com/</a> (仓库源中可用, 不需要编译)<br>指南: <a href=\"http://www.fs-security.com/docs/tutorial.php\">http://www.fs-security.com/docs/tutorial.php</a> </p>\n<p>个人笔记：不幸运的是，它没有阻断(或询问用户)特定应用/程序的选项……。因此，我的理解是一旦启用了80端口(例如，用于访问网页)，那么任何程序都可以通过80端口连接任何服务器、做任何它想做的事……</p>\n<hr>\n"},{"title":"LVM磁盘管理","abbrlink":13541,"date":"2016-11-03T00:57:16.000Z","_content":"\n## 动态扩容\nLVM是在磁盘分区和文件系统之间添加的一个逻辑层，来为文件系统屏蔽下层磁盘分区布局，提供一个抽象的盘卷，在盘卷上建立文件系统。首先我们讨论以下几个LVM术语：\n\n* 物理存储介质（The physical media）：这里指系统的存储设备：硬盘，如：/dev/hda1、/dev/sda等等，是存储系统最低层的存储单元。\n* 物理卷（physical volume）：物理卷就是指硬盘分区或从逻辑上与磁盘分区具有同样功能的设备(如RAID)，是LVM的基本存储逻辑块，但和基本的物理存储介质（如分区、磁盘等）比较，却包含有与LVM相关的管理参数。\n* 卷组（Volume Group）：LVM卷组类似于非LVM系统中的物理硬盘，其由物理卷组成。可以在卷组上创建一个或多个“LVM分区”（逻辑卷），LVM卷组由一个或多个物理卷组成。\n* 逻辑卷（logical volume）：LVM的逻辑卷类似于非LVM系统中的硬盘分区，在逻辑卷之上可以建立文件系统(比如/home或者/usr等)。\n* PE（physical extent）：每一个物理卷被划分为称为PE(Physical Extents)的基本单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。\n* LE（logical extent）：逻辑卷也被划分为被称为LE(Logical Extents) 的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。\n\n简单来说就是：\n\n* PV:是物理的磁盘分区\n* VG:LVM中的物理的磁盘分区，也就是PV，必须加入VG，可以将VG理解为一个仓库或者是几个大的硬盘。\n* LV：也就是从VG中划分的逻辑分区\n如下图所示PV、VG、LV三者关系：\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86001.png)\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86002.png)\n\n\n## 扩容原理：\n#### 用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\n貌似全程都不用格式化新建分区\n\n安装LVM\n首先确定系统中是否安装了lvm工具：\n\n* Centos:`yum install lvm2`              \n* Ubuntu:`apt-get install lvm2`\n\n`df -h` 和 `fdisk -l`  查看分区情况\n#### 开始分区：\n```\nfdisk /dev/sdb\nn          #新建\np          #设定为主分区\n回车       #设定起始扇区\n回车       #设定结束扇区（直接回车默认用全部空间创建，也可以输入+500M设定为500M）\n\nt         #此时输入L能看到所有格式的代码，指定分区格式，8e为LVM\nPartition number（1-4）：1     #指定分区，即为之后创建的sdb1-4(主分区只能4个)\n8e          # 设定为LVM\np           # 查看当前分区情况\nw           # 写入硬盘\n\npartprobe   # 重读分区表，可能会提示无法只读。。。。不用理会\n```\n查看当前PV:\n`pvdisplay` 或 `pvscan`\n\n创建PV（物理卷）\n`pvcreate /dev/sdb1`  使用之前创建的sdb1的全部空间创建PV，不想使用全部空间，之前分区时就要注意了。\n\n查看当前VG（卷组）\n`vgdisplay` 或 `vgscan`\n\n用/dev/sdb1创建VG并加到已存在的vg_bogon中\n`vgextend vg_bogon /dev/sdb1`  **vg_bogon是本机正在使用的vg_name**\n\n查看当前VG`vgdisplay`\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86003.png)\n发现有9.99G的空间\n\n#### 扩容/分区所在的LV（逻辑卷）\n**/dev/vg_bogon/LogVol01为正在使用的/分区**\n`lvextend -l +100%FREE /dev/vg_bogon/LogVol01`   **路径用/dev/vg_bogon/LogVol01**或**/dev/mapper/vg_bogon-LogVol01**都是可以的,**df -h**就能查看,或 `lvextend -L +10G  /dev/vg_bogon/LogVol01`   来增加10G空间。\n\n查看当前VG:\n`vgdisplay`已经扩容了，但**df -h** 显示没有扩容\n\n重设逻辑卷大小，对于当前正在使用的LogVol01有效\n`resize2fs /dev/vg_bogon/LogVol01`\n\n---\n\n#### 缩小其他分区扩容根分区\n* 1.首先查看磁盘使用情况:`df -h`\n文件系统 容量  已用 可用  已用% 挂载点\nFilesystem              Size  Used Avail Use% Mounted on  \n/dev/mapper/VolGroup-lv_root 154G  7.9G  139G   6% /\ntmpfs                  1.9G  100K  1.9G   1% /dev/shm\n/dev/sda1              485M   69M  391M  15% /boot\n/dev/mapper/VolGroup-lv_home 299G  984M  283G   1% /home\n\n* 2、卸载/home **这里缩小home，把扩容/分区**\n`umount /home`\n**umount /home** 如果提示无法卸载，则是有进程占用/home，使用如下命令来终止占用进程：`fuser -m /home`\n\n* 3、调整分区大小\n`resize2fs -p /dev/mapper/VolGroup-lv_home 20G`  **此处缩小home分区到20G**\n如果提示运行“e2fsck -f /dev/mapper/VolGroup-lv_home”，则执行相关命令： \n`e2fsck -f /dev/mapper/VolGroup-lv_home` \n然后重新执行命令:`resize2fs -p /dev/mapper/VolGroup-lv_home 20G`\n注：**resize2fs** 为重新设定磁盘大小，只是重新指定一下大小，并不对结果有影响，需要下面lvreduce的配合\n* 4、挂载上/home，查看磁盘使用情况\n```\nmount /home\ndf -h```\n 此时看/home分区只有20G了。\n\n* 5、设置空闲空间\n使用**lvreduce**指令用于减少LVM逻辑卷占用的空间大小。可能会删除逻辑卷上已有的数据，所以在操作前必须进行确认。记得输入 “y”\n`lvreduce -L 20G /dev/mapper/VolGroup-lv_home` **刚才只是把/home多余的空间标记为不使用，这一步开始真正分割lv，把/home的lv分割为刚刚设定的大小，只能比20G大，比20G小，多分割出来的地方数据会丢失（上面已经设定了为20G了）**\n\n注：**lvreduce -L 20G**的意思为设置当前文件系统为20G，如果lvreduce -l 20G是指从当前文件系统上减少20G **(-L设定为指定大小，-l减小指定大小),使用lvreduce减小逻辑卷的大小。注意：减小后的大小不能小于文件的大小，否则会丢失数据。 **\n \n可以使用**vgdisplay**命令等查看一下可以操作的大小。也可以是用fdisk -l命令查看详细信息。\n`vgdisplay` 注：vgdisplay为显示LVM卷组的元数据信息,此时可以看到有free空间。\n\n* 6.把闲置空间挂在到根目录下\n`lvextend -l +100%FREE  /dev/mapper/VolGroup-lv_root`  **把free空间全部分给/分区**\n注：如果使用**lvextend -L +283G**则为在文件系统上增加283G\n\n`resize2fs -p /dev/mapper/VolGroup-lv_root`   **重设磁盘大小**\n\n* 7、检查调整结果\n`df -h`\nOK扩容完成\n\n---\n\n#### 其他命令：\n* 移除lv逻辑卷：\n```\nlvdisplay\nlvremove -f /dev/vg_bogon/LogVol02  **移除该lv逻辑卷**```\n\n* lv逻辑卷重命名：\n`lvrename /dev/vg_bogon/LogVol02 /dev/vg_bogon/lv_root  `  \n如果无法修改可能是因为激活原因，激活VG就可以修改LV名了\n`lvchange -an /dev/vg_bogon/LogVol02`\n\n* VG重命名\n`vgrename vg_bogon vg_new `\n\n\n若不是用于扩容，只是用来做磁盘存储文件，则要挂载分区，开机自动挂载修改**/etc/fastab**文件。\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86004.png)\n如果改名的lv卷是启动分区的话，再修改**/etc/grub.conf**文件\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86005.png)\n   \n\n\n---\n","source":"_posts/系统管理/2016-11-03-LVM磁盘管理.md","raw":"---\ntitle: LVM磁盘管理\ncategories:\n  - 系统管理\ntags:\n  - LVM磁盘管理\n  - LVM扩容\nabbrlink: 13541\ndate: 2016-11-03 08:57:16\n---\n\n## 动态扩容\nLVM是在磁盘分区和文件系统之间添加的一个逻辑层，来为文件系统屏蔽下层磁盘分区布局，提供一个抽象的盘卷，在盘卷上建立文件系统。首先我们讨论以下几个LVM术语：\n\n* 物理存储介质（The physical media）：这里指系统的存储设备：硬盘，如：/dev/hda1、/dev/sda等等，是存储系统最低层的存储单元。\n* 物理卷（physical volume）：物理卷就是指硬盘分区或从逻辑上与磁盘分区具有同样功能的设备(如RAID)，是LVM的基本存储逻辑块，但和基本的物理存储介质（如分区、磁盘等）比较，却包含有与LVM相关的管理参数。\n* 卷组（Volume Group）：LVM卷组类似于非LVM系统中的物理硬盘，其由物理卷组成。可以在卷组上创建一个或多个“LVM分区”（逻辑卷），LVM卷组由一个或多个物理卷组成。\n* 逻辑卷（logical volume）：LVM的逻辑卷类似于非LVM系统中的硬盘分区，在逻辑卷之上可以建立文件系统(比如/home或者/usr等)。\n* PE（physical extent）：每一个物理卷被划分为称为PE(Physical Extents)的基本单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。\n* LE（logical extent）：逻辑卷也被划分为被称为LE(Logical Extents) 的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。\n\n简单来说就是：\n\n* PV:是物理的磁盘分区\n* VG:LVM中的物理的磁盘分区，也就是PV，必须加入VG，可以将VG理解为一个仓库或者是几个大的硬盘。\n* LV：也就是从VG中划分的逻辑分区\n如下图所示PV、VG、LV三者关系：\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86001.png)\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86002.png)\n\n\n## 扩容原理：\n#### 用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\n貌似全程都不用格式化新建分区\n\n安装LVM\n首先确定系统中是否安装了lvm工具：\n\n* Centos:`yum install lvm2`              \n* Ubuntu:`apt-get install lvm2`\n\n`df -h` 和 `fdisk -l`  查看分区情况\n#### 开始分区：\n```\nfdisk /dev/sdb\nn          #新建\np          #设定为主分区\n回车       #设定起始扇区\n回车       #设定结束扇区（直接回车默认用全部空间创建，也可以输入+500M设定为500M）\n\nt         #此时输入L能看到所有格式的代码，指定分区格式，8e为LVM\nPartition number（1-4）：1     #指定分区，即为之后创建的sdb1-4(主分区只能4个)\n8e          # 设定为LVM\np           # 查看当前分区情况\nw           # 写入硬盘\n\npartprobe   # 重读分区表，可能会提示无法只读。。。。不用理会\n```\n查看当前PV:\n`pvdisplay` 或 `pvscan`\n\n创建PV（物理卷）\n`pvcreate /dev/sdb1`  使用之前创建的sdb1的全部空间创建PV，不想使用全部空间，之前分区时就要注意了。\n\n查看当前VG（卷组）\n`vgdisplay` 或 `vgscan`\n\n用/dev/sdb1创建VG并加到已存在的vg_bogon中\n`vgextend vg_bogon /dev/sdb1`  **vg_bogon是本机正在使用的vg_name**\n\n查看当前VG`vgdisplay`\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86003.png)\n发现有9.99G的空间\n\n#### 扩容/分区所在的LV（逻辑卷）\n**/dev/vg_bogon/LogVol01为正在使用的/分区**\n`lvextend -l +100%FREE /dev/vg_bogon/LogVol01`   **路径用/dev/vg_bogon/LogVol01**或**/dev/mapper/vg_bogon-LogVol01**都是可以的,**df -h**就能查看,或 `lvextend -L +10G  /dev/vg_bogon/LogVol01`   来增加10G空间。\n\n查看当前VG:\n`vgdisplay`已经扩容了，但**df -h** 显示没有扩容\n\n重设逻辑卷大小，对于当前正在使用的LogVol01有效\n`resize2fs /dev/vg_bogon/LogVol01`\n\n---\n\n#### 缩小其他分区扩容根分区\n* 1.首先查看磁盘使用情况:`df -h`\n文件系统 容量  已用 可用  已用% 挂载点\nFilesystem              Size  Used Avail Use% Mounted on  \n/dev/mapper/VolGroup-lv_root 154G  7.9G  139G   6% /\ntmpfs                  1.9G  100K  1.9G   1% /dev/shm\n/dev/sda1              485M   69M  391M  15% /boot\n/dev/mapper/VolGroup-lv_home 299G  984M  283G   1% /home\n\n* 2、卸载/home **这里缩小home，把扩容/分区**\n`umount /home`\n**umount /home** 如果提示无法卸载，则是有进程占用/home，使用如下命令来终止占用进程：`fuser -m /home`\n\n* 3、调整分区大小\n`resize2fs -p /dev/mapper/VolGroup-lv_home 20G`  **此处缩小home分区到20G**\n如果提示运行“e2fsck -f /dev/mapper/VolGroup-lv_home”，则执行相关命令： \n`e2fsck -f /dev/mapper/VolGroup-lv_home` \n然后重新执行命令:`resize2fs -p /dev/mapper/VolGroup-lv_home 20G`\n注：**resize2fs** 为重新设定磁盘大小，只是重新指定一下大小，并不对结果有影响，需要下面lvreduce的配合\n* 4、挂载上/home，查看磁盘使用情况\n```\nmount /home\ndf -h```\n 此时看/home分区只有20G了。\n\n* 5、设置空闲空间\n使用**lvreduce**指令用于减少LVM逻辑卷占用的空间大小。可能会删除逻辑卷上已有的数据，所以在操作前必须进行确认。记得输入 “y”\n`lvreduce -L 20G /dev/mapper/VolGroup-lv_home` **刚才只是把/home多余的空间标记为不使用，这一步开始真正分割lv，把/home的lv分割为刚刚设定的大小，只能比20G大，比20G小，多分割出来的地方数据会丢失（上面已经设定了为20G了）**\n\n注：**lvreduce -L 20G**的意思为设置当前文件系统为20G，如果lvreduce -l 20G是指从当前文件系统上减少20G **(-L设定为指定大小，-l减小指定大小),使用lvreduce减小逻辑卷的大小。注意：减小后的大小不能小于文件的大小，否则会丢失数据。 **\n \n可以使用**vgdisplay**命令等查看一下可以操作的大小。也可以是用fdisk -l命令查看详细信息。\n`vgdisplay` 注：vgdisplay为显示LVM卷组的元数据信息,此时可以看到有free空间。\n\n* 6.把闲置空间挂在到根目录下\n`lvextend -l +100%FREE  /dev/mapper/VolGroup-lv_root`  **把free空间全部分给/分区**\n注：如果使用**lvextend -L +283G**则为在文件系统上增加283G\n\n`resize2fs -p /dev/mapper/VolGroup-lv_root`   **重设磁盘大小**\n\n* 7、检查调整结果\n`df -h`\nOK扩容完成\n\n---\n\n#### 其他命令：\n* 移除lv逻辑卷：\n```\nlvdisplay\nlvremove -f /dev/vg_bogon/LogVol02  **移除该lv逻辑卷**```\n\n* lv逻辑卷重命名：\n`lvrename /dev/vg_bogon/LogVol02 /dev/vg_bogon/lv_root  `  \n如果无法修改可能是因为激活原因，激活VG就可以修改LV名了\n`lvchange -an /dev/vg_bogon/LogVol02`\n\n* VG重命名\n`vgrename vg_bogon vg_new `\n\n\n若不是用于扩容，只是用来做磁盘存储文件，则要挂载分区，开机自动挂载修改**/etc/fastab**文件。\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86004.png)\n如果改名的lv卷是启动分区的话，再修改**/etc/grub.conf**文件\n![](http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86005.png)\n   \n\n\n---\n","slug":"系统管理-2016-11-03-LVM磁盘管理","published":1,"updated":"2016-11-21T02:17:09.127Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjo8003fd8pk9odpvetq","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h2 id=\"动态扩容\"><a href=\"#动态扩容\" class=\"headerlink\" title=\"动态扩容\"></a>动态扩容</h2><p>LVM是在磁盘分区和文件系统之间添加的一个逻辑层，来为文件系统屏蔽下层磁盘分区布局，提供一个抽象的盘卷，在盘卷上建立文件系统。首先我们讨论以下几个LVM术语：</p>\n<ul>\n<li>物理存储介质（The physical media）：这里指系统的存储设备：硬盘，如：/dev/hda1、/dev/sda等等，是存储系统最低层的存储单元。</li>\n<li>物理卷（physical volume）：物理卷就是指硬盘分区或从逻辑上与磁盘分区具有同样功能的设备(如RAID)，是LVM的基本存储逻辑块，但和基本的物理存储介质（如分区、磁盘等）比较，却包含有与LVM相关的管理参数。</li>\n<li>卷组（Volume Group）：LVM卷组类似于非LVM系统中的物理硬盘，其由物理卷组成。可以在卷组上创建一个或多个“LVM分区”（逻辑卷），LVM卷组由一个或多个物理卷组成。</li>\n<li>逻辑卷（logical volume）：LVM的逻辑卷类似于非LVM系统中的硬盘分区，在逻辑卷之上可以建立文件系统(比如/home或者/usr等)。</li>\n<li>PE（physical extent）：每一个物理卷被划分为称为PE(Physical Extents)的基本单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。</li>\n<li>LE（logical extent）：逻辑卷也被划分为被称为LE(Logical Extents) 的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。</li>\n</ul>\n<p>简单来说就是：</p>\n<ul>\n<li>PV:是物理的磁盘分区</li>\n<li>VG:LVM中的物理的磁盘分区，也就是PV，必须加入VG，可以将VG理解为一个仓库或者是几个大的硬盘。</li>\n<li>LV：也就是从VG中划分的逻辑分区<br>如下图所示PV、VG、LV三者关系：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86001.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86002.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"扩容原理：\"><a href=\"#扩容原理：\" class=\"headerlink\" title=\"扩容原理：\"></a>扩容原理：</h2><h4 id=\"用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\"><a href=\"#用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\" class=\"headerlink\" title=\"用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\"></a>用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。</h4><p>貌似全程都不用格式化新建分区</p>\n<p>安装LVM<br>首先确定系统中是否安装了lvm工具：</p>\n<ul>\n<li>Centos:<code>yum install lvm2</code>              </li>\n<li>Ubuntu:<code>apt-get install lvm2</code></li>\n</ul>\n<p><code>df -h</code> 和 <code>fdisk -l</code>  查看分区情况</p>\n<h4 id=\"开始分区：\"><a href=\"#开始分区：\" class=\"headerlink\" title=\"开始分区：\"></a>开始分区：</h4><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">fdisk /dev/sdb</div><div class=\"line\">n          <span class=\"comment\">#新建</span></div><div class=\"line\">p          <span class=\"comment\">#设定为主分区</span></div><div class=\"line\">回车       <span class=\"comment\">#设定起始扇区</span></div><div class=\"line\">回车       <span class=\"comment\">#设定结束扇区（直接回车默认用全部空间创建，也可以输入+500M设定为500M）</span></div><div class=\"line\"></div><div class=\"line\">t         <span class=\"comment\">#此时输入L能看到所有格式的代码，指定分区格式，8e为LVM</span></div><div class=\"line\">Partition <span class=\"built_in\">number</span>（<span class=\"number\">1</span><span class=\"number\">-4</span>）：<span class=\"number\">1</span>     <span class=\"comment\">#指定分区，即为之后创建的sdb1-4(主分区只能4个)</span></div><div class=\"line\"><span class=\"number\">8</span>e          <span class=\"comment\"># 设定为LVM</span></div><div class=\"line\">p           <span class=\"comment\"># 查看当前分区情况</span></div><div class=\"line\">w           <span class=\"comment\"># 写入硬盘</span></div><div class=\"line\"></div><div class=\"line\">partprobe   <span class=\"comment\"># 重读分区表，可能会提示无法只读。。。。不用理会</span></div></pre></td></tr></table></figure>\n<p>查看当前PV:<br><code>pvdisplay</code> 或 <code>pvscan</code></p>\n<p>创建PV（物理卷）<br><code>pvcreate /dev/sdb1</code>  使用之前创建的sdb1的全部空间创建PV，不想使用全部空间，之前分区时就要注意了。</p>\n<p>查看当前VG（卷组）<br><code>vgdisplay</code> 或 <code>vgscan</code></p>\n<p>用/dev/sdb1创建VG并加到已存在的vg_bogon中<br><code>vgextend vg_bogon /dev/sdb1</code>  <strong>vg_bogon是本机正在使用的vg_name</strong></p>\n<p>查看当前VG<code>vgdisplay</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86003.png\" alt=\"\"><br>发现有9.99G的空间</p>\n<h4 id=\"扩容-分区所在的LV（逻辑卷）\"><a href=\"#扩容-分区所在的LV（逻辑卷）\" class=\"headerlink\" title=\"扩容/分区所在的LV（逻辑卷）\"></a>扩容/分区所在的LV（逻辑卷）</h4><p><strong>/dev/vg_bogon/LogVol01为正在使用的/分区</strong><br><code>lvextend -l +100%FREE /dev/vg_bogon/LogVol01</code>   <strong>路径用/dev/vg_bogon/LogVol01</strong>或<strong>/dev/mapper/vg_bogon-LogVol01</strong>都是可以的,<strong>df -h</strong>就能查看,或 <code>lvextend -L +10G  /dev/vg_bogon/LogVol01</code>   来增加10G空间。</p>\n<p>查看当前VG:<br><code>vgdisplay</code>已经扩容了，但<strong>df -h</strong> 显示没有扩容</p>\n<p>重设逻辑卷大小，对于当前正在使用的LogVol01有效<br><code>resize2fs /dev/vg_bogon/LogVol01</code></p>\n<hr>\n<h4 id=\"缩小其他分区扩容根分区\"><a href=\"#缩小其他分区扩容根分区\" class=\"headerlink\" title=\"缩小其他分区扩容根分区\"></a>缩小其他分区扩容根分区</h4><ul>\n<li><p>1.首先查看磁盘使用情况:<code>df -h</code><br>文件系统 容量  已用 可用  已用% 挂载点<br>Filesystem              Size  Used Avail Use% Mounted on<br>/dev/mapper/VolGroup-lv_root 154G  7.9G  139G   6% /<br>tmpfs                  1.9G  100K  1.9G   1% /dev/shm<br>/dev/sda1              485M   69M  391M  15% /boot<br>/dev/mapper/VolGroup-lv_home 299G  984M  283G   1% /home</p>\n</li>\n<li><p>2、卸载/home <strong>这里缩小home，把扩容/分区</strong><br><code>umount /home</code><br><strong>umount /home</strong> 如果提示无法卸载，则是有进程占用/home，使用如下命令来终止占用进程：<code>fuser -m /home</code></p>\n</li>\n<li><p>3、调整分区大小<br><code>resize2fs -p /dev/mapper/VolGroup-lv_home 20G</code>  <strong>此处缩小home分区到20G</strong><br>如果提示运行“e2fsck -f /dev/mapper/VolGroup-lv_home”，则执行相关命令：<br><code>e2fsck -f /dev/mapper/VolGroup-lv_home</code><br>然后重新执行命令:<code>resize2fs -p /dev/mapper/VolGroup-lv_home 20G</code><br>注：<strong>resize2fs</strong> 为重新设定磁盘大小，只是重新指定一下大小，并不对结果有影响，需要下面lvreduce的配合</p>\n</li>\n<li><p>4、挂载上/home，查看磁盘使用情况</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount /<span class=\"built_in\">home</span></div><div class=\"line\">df -h</div></pre></td></tr></table></figure>\n<p>此时看/home分区只有20G了。</p>\n</li>\n<li><p>5、设置空闲空间<br>使用<strong>lvreduce</strong>指令用于减少LVM逻辑卷占用的空间大小。可能会删除逻辑卷上已有的数据，所以在操作前必须进行确认。记得输入 “y”<br><code>lvreduce -L 20G /dev/mapper/VolGroup-lv_home</code> <strong>刚才只是把/home多余的空间标记为不使用，这一步开始真正分割lv，把/home的lv分割为刚刚设定的大小，只能比20G大，比20G小，多分割出来的地方数据会丢失（上面已经设定了为20G了）</strong></p>\n</li>\n</ul>\n<p>注：<strong>lvreduce -L 20G</strong>的意思为设置当前文件系统为20G，如果lvreduce -l 20G是指从当前文件系统上减少20G <strong>(-L设定为指定大小，-l减小指定大小),使用lvreduce减小逻辑卷的大小。注意：减小后的大小不能小于文件的大小，否则会丢失数据。 </strong></p>\n<p>可以使用<strong>vgdisplay</strong>命令等查看一下可以操作的大小。也可以是用fdisk -l命令查看详细信息。<br><code>vgdisplay</code> 注：vgdisplay为显示LVM卷组的元数据信息,此时可以看到有free空间。</p>\n<ul>\n<li>6.把闲置空间挂在到根目录下<br><code>lvextend -l +100%FREE  /dev/mapper/VolGroup-lv_root</code>  <strong>把free空间全部分给/分区</strong><br>注：如果使用<strong>lvextend -L +283G</strong>则为在文件系统上增加283G</li>\n</ul>\n<p><code>resize2fs -p /dev/mapper/VolGroup-lv_root</code>   <strong>重设磁盘大小</strong></p>\n<ul>\n<li>7、检查调整结果<br><code>df -h</code><br>OK扩容完成</li>\n</ul>\n<hr>\n<h4 id=\"其他命令：\"><a href=\"#其他命令：\" class=\"headerlink\" title=\"其他命令：\"></a>其他命令：</h4><ul>\n<li><p>移除lv逻辑卷：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">lvdisplay</div><div class=\"line\">lvremove -f <span class=\"regexp\">/dev/</span>vg_bogon<span class=\"regexp\">/LogVol02  **移除该lv逻辑卷**</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>lv逻辑卷重命名：<br><code>lvrename /dev/vg_bogon/LogVol02 /dev/vg_bogon/lv_root</code><br>如果无法修改可能是因为激活原因，激活VG就可以修改LV名了<br><code>lvchange -an /dev/vg_bogon/LogVol02</code></p>\n</li>\n<li><p>VG重命名<br><code>vgrename vg_bogon vg_new</code></p>\n</li>\n</ul>\n<p>若不是用于扩容，只是用来做磁盘存储文件，则要挂载分区，开机自动挂载修改<strong>/etc/fastab</strong>文件。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86004.png\" alt=\"\"><br>如果改名的lv卷是启动分区的话，再修改<strong>/etc/grub.conf</strong>文件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86005.png\" alt=\"\"></p>\n<hr>\n","excerpt":"","more":"<h2 id=\"动态扩容\"><a href=\"#动态扩容\" class=\"headerlink\" title=\"动态扩容\"></a>动态扩容</h2><p>LVM是在磁盘分区和文件系统之间添加的一个逻辑层，来为文件系统屏蔽下层磁盘分区布局，提供一个抽象的盘卷，在盘卷上建立文件系统。首先我们讨论以下几个LVM术语：</p>\n<ul>\n<li>物理存储介质（The physical media）：这里指系统的存储设备：硬盘，如：/dev/hda1、/dev/sda等等，是存储系统最低层的存储单元。</li>\n<li>物理卷（physical volume）：物理卷就是指硬盘分区或从逻辑上与磁盘分区具有同样功能的设备(如RAID)，是LVM的基本存储逻辑块，但和基本的物理存储介质（如分区、磁盘等）比较，却包含有与LVM相关的管理参数。</li>\n<li>卷组（Volume Group）：LVM卷组类似于非LVM系统中的物理硬盘，其由物理卷组成。可以在卷组上创建一个或多个“LVM分区”（逻辑卷），LVM卷组由一个或多个物理卷组成。</li>\n<li>逻辑卷（logical volume）：LVM的逻辑卷类似于非LVM系统中的硬盘分区，在逻辑卷之上可以建立文件系统(比如/home或者/usr等)。</li>\n<li>PE（physical extent）：每一个物理卷被划分为称为PE(Physical Extents)的基本单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。</li>\n<li>LE（logical extent）：逻辑卷也被划分为被称为LE(Logical Extents) 的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。</li>\n</ul>\n<p>简单来说就是：</p>\n<ul>\n<li>PV:是物理的磁盘分区</li>\n<li>VG:LVM中的物理的磁盘分区，也就是PV，必须加入VG，可以将VG理解为一个仓库或者是几个大的硬盘。</li>\n<li>LV：也就是从VG中划分的逻辑分区<br>如下图所示PV、VG、LV三者关系：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86001.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86002.png\" alt=\"\"></li>\n</ul>\n<h2 id=\"扩容原理：\"><a href=\"#扩容原理：\" class=\"headerlink\" title=\"扩容原理：\"></a>扩容原理：</h2><h4 id=\"用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\"><a href=\"#用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\" class=\"headerlink\" title=\"用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。\"></a>用新磁盘创建PV，然后合并到现有的VG中，然后再扩容某个LV。</h4><p>貌似全程都不用格式化新建分区</p>\n<p>安装LVM<br>首先确定系统中是否安装了lvm工具：</p>\n<ul>\n<li>Centos:<code>yum install lvm2</code>              </li>\n<li>Ubuntu:<code>apt-get install lvm2</code></li>\n</ul>\n<p><code>df -h</code> 和 <code>fdisk -l</code>  查看分区情况</p>\n<h4 id=\"开始分区：\"><a href=\"#开始分区：\" class=\"headerlink\" title=\"开始分区：\"></a>开始分区：</h4><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">fdisk /dev/sdb</div><div class=\"line\">n          <span class=\"comment\">#新建</span></div><div class=\"line\">p          <span class=\"comment\">#设定为主分区</span></div><div class=\"line\">回车       <span class=\"comment\">#设定起始扇区</span></div><div class=\"line\">回车       <span class=\"comment\">#设定结束扇区（直接回车默认用全部空间创建，也可以输入+500M设定为500M）</span></div><div class=\"line\"></div><div class=\"line\">t         <span class=\"comment\">#此时输入L能看到所有格式的代码，指定分区格式，8e为LVM</span></div><div class=\"line\">Partition <span class=\"built_in\">number</span>（<span class=\"number\">1</span><span class=\"number\">-4</span>）：<span class=\"number\">1</span>     <span class=\"comment\">#指定分区，即为之后创建的sdb1-4(主分区只能4个)</span></div><div class=\"line\"><span class=\"number\">8</span>e          <span class=\"comment\"># 设定为LVM</span></div><div class=\"line\">p           <span class=\"comment\"># 查看当前分区情况</span></div><div class=\"line\">w           <span class=\"comment\"># 写入硬盘</span></div><div class=\"line\"></div><div class=\"line\">partprobe   <span class=\"comment\"># 重读分区表，可能会提示无法只读。。。。不用理会</span></div></pre></td></tr></table></figure>\n<p>查看当前PV:<br><code>pvdisplay</code> 或 <code>pvscan</code></p>\n<p>创建PV（物理卷）<br><code>pvcreate /dev/sdb1</code>  使用之前创建的sdb1的全部空间创建PV，不想使用全部空间，之前分区时就要注意了。</p>\n<p>查看当前VG（卷组）<br><code>vgdisplay</code> 或 <code>vgscan</code></p>\n<p>用/dev/sdb1创建VG并加到已存在的vg_bogon中<br><code>vgextend vg_bogon /dev/sdb1</code>  <strong>vg_bogon是本机正在使用的vg_name</strong></p>\n<p>查看当前VG<code>vgdisplay</code><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86003.png\" alt=\"\"><br>发现有9.99G的空间</p>\n<h4 id=\"扩容-分区所在的LV（逻辑卷）\"><a href=\"#扩容-分区所在的LV（逻辑卷）\" class=\"headerlink\" title=\"扩容/分区所在的LV（逻辑卷）\"></a>扩容/分区所在的LV（逻辑卷）</h4><p><strong>/dev/vg_bogon/LogVol01为正在使用的/分区</strong><br><code>lvextend -l +100%FREE /dev/vg_bogon/LogVol01</code>   <strong>路径用/dev/vg_bogon/LogVol01</strong>或<strong>/dev/mapper/vg_bogon-LogVol01</strong>都是可以的,<strong>df -h</strong>就能查看,或 <code>lvextend -L +10G  /dev/vg_bogon/LogVol01</code>   来增加10G空间。</p>\n<p>查看当前VG:<br><code>vgdisplay</code>已经扩容了，但<strong>df -h</strong> 显示没有扩容</p>\n<p>重设逻辑卷大小，对于当前正在使用的LogVol01有效<br><code>resize2fs /dev/vg_bogon/LogVol01</code></p>\n<hr>\n<h4 id=\"缩小其他分区扩容根分区\"><a href=\"#缩小其他分区扩容根分区\" class=\"headerlink\" title=\"缩小其他分区扩容根分区\"></a>缩小其他分区扩容根分区</h4><ul>\n<li><p>1.首先查看磁盘使用情况:<code>df -h</code><br>文件系统 容量  已用 可用  已用% 挂载点<br>Filesystem              Size  Used Avail Use% Mounted on<br>/dev/mapper/VolGroup-lv_root 154G  7.9G  139G   6% /<br>tmpfs                  1.9G  100K  1.9G   1% /dev/shm<br>/dev/sda1              485M   69M  391M  15% /boot<br>/dev/mapper/VolGroup-lv_home 299G  984M  283G   1% /home</p>\n</li>\n<li><p>2、卸载/home <strong>这里缩小home，把扩容/分区</strong><br><code>umount /home</code><br><strong>umount /home</strong> 如果提示无法卸载，则是有进程占用/home，使用如下命令来终止占用进程：<code>fuser -m /home</code></p>\n</li>\n<li><p>3、调整分区大小<br><code>resize2fs -p /dev/mapper/VolGroup-lv_home 20G</code>  <strong>此处缩小home分区到20G</strong><br>如果提示运行“e2fsck -f /dev/mapper/VolGroup-lv_home”，则执行相关命令：<br><code>e2fsck -f /dev/mapper/VolGroup-lv_home</code><br>然后重新执行命令:<code>resize2fs -p /dev/mapper/VolGroup-lv_home 20G</code><br>注：<strong>resize2fs</strong> 为重新设定磁盘大小，只是重新指定一下大小，并不对结果有影响，需要下面lvreduce的配合</p>\n</li>\n<li><p>4、挂载上/home，查看磁盘使用情况</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount /<span class=\"built_in\">home</span></div><div class=\"line\">df -h</div></pre></td></tr></table></figure>\n<p>此时看/home分区只有20G了。</p>\n</li>\n<li><p>5、设置空闲空间<br>使用<strong>lvreduce</strong>指令用于减少LVM逻辑卷占用的空间大小。可能会删除逻辑卷上已有的数据，所以在操作前必须进行确认。记得输入 “y”<br><code>lvreduce -L 20G /dev/mapper/VolGroup-lv_home</code> <strong>刚才只是把/home多余的空间标记为不使用，这一步开始真正分割lv，把/home的lv分割为刚刚设定的大小，只能比20G大，比20G小，多分割出来的地方数据会丢失（上面已经设定了为20G了）</strong></p>\n</li>\n</ul>\n<p>注：<strong>lvreduce -L 20G</strong>的意思为设置当前文件系统为20G，如果lvreduce -l 20G是指从当前文件系统上减少20G <strong>(-L设定为指定大小，-l减小指定大小),使用lvreduce减小逻辑卷的大小。注意：减小后的大小不能小于文件的大小，否则会丢失数据。 </strong></p>\n<p>可以使用<strong>vgdisplay</strong>命令等查看一下可以操作的大小。也可以是用fdisk -l命令查看详细信息。<br><code>vgdisplay</code> 注：vgdisplay为显示LVM卷组的元数据信息,此时可以看到有free空间。</p>\n<ul>\n<li>6.把闲置空间挂在到根目录下<br><code>lvextend -l +100%FREE  /dev/mapper/VolGroup-lv_root</code>  <strong>把free空间全部分给/分区</strong><br>注：如果使用<strong>lvextend -L +283G</strong>则为在文件系统上增加283G</li>\n</ul>\n<p><code>resize2fs -p /dev/mapper/VolGroup-lv_root</code>   <strong>重设磁盘大小</strong></p>\n<ul>\n<li>7、检查调整结果<br><code>df -h</code><br>OK扩容完成</li>\n</ul>\n<hr>\n<h4 id=\"其他命令：\"><a href=\"#其他命令：\" class=\"headerlink\" title=\"其他命令：\"></a>其他命令：</h4><ul>\n<li><p>移除lv逻辑卷：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">lvdisplay</div><div class=\"line\">lvremove -f <span class=\"regexp\">/dev/</span>vg_bogon<span class=\"regexp\">/LogVol02  **移除该lv逻辑卷**</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>lv逻辑卷重命名：<br><code>lvrename /dev/vg_bogon/LogVol02 /dev/vg_bogon/lv_root</code><br>如果无法修改可能是因为激活原因，激活VG就可以修改LV名了<br><code>lvchange -an /dev/vg_bogon/LogVol02</code></p>\n</li>\n<li><p>VG重命名<br><code>vgrename vg_bogon vg_new</code></p>\n</li>\n</ul>\n<p>若不是用于扩容，只是用来做磁盘存储文件，则要挂载分区，开机自动挂载修改<strong>/etc/fastab</strong>文件。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86004.png\" alt=\"\"><br>如果改名的lv卷是启动分区的话，再修改<strong>/etc/grub.conf</strong>文件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86005.png\" alt=\"\"></p>\n<hr>\n"},{"title":"swap分区转换","abbrlink":4829,"date":"2016-11-11T07:09:02.000Z","_content":"\n# 建立Swap分区（普通分区转Swap分区）\n增加Swap分区，适用于系统没有Swap分区，或者有Swap分区但空间很小的情况。\n\n查看有哪些分区：`fdisk -l`\n查看已挂载的分区：`df -h`\n这两条命令可以看出系统有没有多余的没有使用的分区。\n\n查看内存和Swap空间：`free -m` 　-m是以MB为单位显示\n　　　　　　　　　　　total　　　　used　　　　free　　　　shared　　buffers　　cached\nMem:　　　　　　　　996　　　　　928　　　　　67　　　　　　0　　　　215　　　　482\n-/+ buffers/cache:　　　　　　　　　231　　　　765\nSwap:　　　　　　　　　0　　　　　　0　　　　　　0\n\n上表中Swap分区大小是0（有Swap分区没有激活，或者根本没有Swap分区），这时我们需要增加Swap空间，有2种方式，都要用root用户操作。\n\n\n## 压缩正常的分区，分出小部分转换为Swap分区。\n如果是LVM分区，参考：[LVM磁盘管理](http://leolan.top/2016/11/03/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86-2016-11-03-LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/)\n\n1. 找到要要缩小的磁盘，比如**/home**，先备份**/home**下的文件\n```\ncd /tmp\ntar -zcpv -f home.tar.gz /home/```\n2. 然后卸载**/home**下的分区，先在终端`df -h`一下，记下挂载在/home下的设备名，假设是**/dev/sda5**。执行命令\n`umount /home`或`umount /dev/sda5`就卸载了。\n3. 重新分区，执行命令`fdisk /dev/sda`\n输入p,查看一下当前的分区表\n输入d，删除分区，输入5，删除**/dev/sda5**\n输入n，新建分区，输入+8G，建立一个8G分区\n输入n，新建分区，输入起始磁道号，然后输入结束磁道号，把剩余空间再新建一个分区\n这时候，会提示要reboot才能读取磁盘分区表，我们不reboot，输入命令`partprobe`就可以了！\n4. 挂载磁盘，恢复**/home**\n```\ncd /tmp\ntar -zxvf home.tar.gz -C /home```\n5. 把8G空间转换为Swap分区，和下面的内容是一样的。\n\n\n## 有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\n这里假设**/dev/sda5**是空闲空间。\n1. 格式化分区：`mkfs.ext3 /dev/sda5`会有**UUID**号，记录下来备用。\n2. 将分区转换成交换分区，格式化交换分区（mkswap）：`mkswap /dev/sda5 `\n3. 激活交换分区：`swapon /dev/sda5`\n4. 现在再`free -m`看看，Swap分区已经不为0了。\n5. 最后添加开机挂载就行，按格式写好,注意**UUID**是刚刚记录下来的。\n```\nUUID=aa65f414-312f-4ec8-aed6-9e0423e87938 none            swap    sw              0       0```\n\n---\n# Swap分区转普通分区\n1. 关闭交换分区（swapoff）：`swapoff /dev/sda5`  \n2. 重新格式化分区：`mkfs.ext3 /dev/sda5`会有**UUID**号，记录下来备用。\n3. 设置磁盘巻标：`e2label /dev/sda5 sky`  \n4. 查看巻标：\n```\ne2label /dev/sda5  \nsky  ```\n5. 根据巻标查看硬盘：`findfs LABEL=sky ` \n6. 最后添加开机挂载就行，按格式写好,注意**UUID**是刚刚记录下来的。\n```\nUUID=aa65f414-312f-4ec8-aed6-9e0423e87938 none            swap    sw              0       0```\n\n---","source":"_posts/系统管理/2016-11-11-swap分区转换.md","raw":"---\ntitle: swap分区转换\ncategories:\n  - 系统管理\ntags:\n  - swap分区转换\nabbrlink: 4829\ndate: 2016-11-11 15:09:02\n---\n\n# 建立Swap分区（普通分区转Swap分区）\n增加Swap分区，适用于系统没有Swap分区，或者有Swap分区但空间很小的情况。\n\n查看有哪些分区：`fdisk -l`\n查看已挂载的分区：`df -h`\n这两条命令可以看出系统有没有多余的没有使用的分区。\n\n查看内存和Swap空间：`free -m` 　-m是以MB为单位显示\n　　　　　　　　　　　total　　　　used　　　　free　　　　shared　　buffers　　cached\nMem:　　　　　　　　996　　　　　928　　　　　67　　　　　　0　　　　215　　　　482\n-/+ buffers/cache:　　　　　　　　　231　　　　765\nSwap:　　　　　　　　　0　　　　　　0　　　　　　0\n\n上表中Swap分区大小是0（有Swap分区没有激活，或者根本没有Swap分区），这时我们需要增加Swap空间，有2种方式，都要用root用户操作。\n\n\n## 压缩正常的分区，分出小部分转换为Swap分区。\n如果是LVM分区，参考：[LVM磁盘管理](http://leolan.top/2016/11/03/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86-2016-11-03-LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/)\n\n1. 找到要要缩小的磁盘，比如**/home**，先备份**/home**下的文件\n```\ncd /tmp\ntar -zcpv -f home.tar.gz /home/```\n2. 然后卸载**/home**下的分区，先在终端`df -h`一下，记下挂载在/home下的设备名，假设是**/dev/sda5**。执行命令\n`umount /home`或`umount /dev/sda5`就卸载了。\n3. 重新分区，执行命令`fdisk /dev/sda`\n输入p,查看一下当前的分区表\n输入d，删除分区，输入5，删除**/dev/sda5**\n输入n，新建分区，输入+8G，建立一个8G分区\n输入n，新建分区，输入起始磁道号，然后输入结束磁道号，把剩余空间再新建一个分区\n这时候，会提示要reboot才能读取磁盘分区表，我们不reboot，输入命令`partprobe`就可以了！\n4. 挂载磁盘，恢复**/home**\n```\ncd /tmp\ntar -zxvf home.tar.gz -C /home```\n5. 把8G空间转换为Swap分区，和下面的内容是一样的。\n\n\n## 有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\n这里假设**/dev/sda5**是空闲空间。\n1. 格式化分区：`mkfs.ext3 /dev/sda5`会有**UUID**号，记录下来备用。\n2. 将分区转换成交换分区，格式化交换分区（mkswap）：`mkswap /dev/sda5 `\n3. 激活交换分区：`swapon /dev/sda5`\n4. 现在再`free -m`看看，Swap分区已经不为0了。\n5. 最后添加开机挂载就行，按格式写好,注意**UUID**是刚刚记录下来的。\n```\nUUID=aa65f414-312f-4ec8-aed6-9e0423e87938 none            swap    sw              0       0```\n\n---\n# Swap分区转普通分区\n1. 关闭交换分区（swapoff）：`swapoff /dev/sda5`  \n2. 重新格式化分区：`mkfs.ext3 /dev/sda5`会有**UUID**号，记录下来备用。\n3. 设置磁盘巻标：`e2label /dev/sda5 sky`  \n4. 查看巻标：\n```\ne2label /dev/sda5  \nsky  ```\n5. 根据巻标查看硬盘：`findfs LABEL=sky ` \n6. 最后添加开机挂载就行，按格式写好,注意**UUID**是刚刚记录下来的。\n```\nUUID=aa65f414-312f-4ec8-aed6-9e0423e87938 none            swap    sw              0       0```\n\n---","slug":"系统管理-2016-11-11-swap分区转换","published":1,"updated":"2016-11-21T02:17:09.136Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjob003hd8pk75tyv9xn","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"建立Swap分区（普通分区转Swap分区）\"><a href=\"#建立Swap分区（普通分区转Swap分区）\" class=\"headerlink\" title=\"建立Swap分区（普通分区转Swap分区）\"></a>建立Swap分区（普通分区转Swap分区）</h1><p>增加Swap分区，适用于系统没有Swap分区，或者有Swap分区但空间很小的情况。</p>\n<p>查看有哪些分区：<code>fdisk -l</code><br>查看已挂载的分区：<code>df -h</code><br>这两条命令可以看出系统有没有多余的没有使用的分区。</p>\n<p>查看内存和Swap空间：<code>free -m</code> 　-m是以MB为单位显示<br>　　　　　　　　　　　total　　　　used　　　　free　　　　shared　　buffers　　cached<br>Mem:　　　　　　　　996　　　　　928　　　　　67　　　　　　0　　　　215　　　　482<br>-/+ buffers/cache:　　　　　　　　　231　　　　765<br>Swap:　　　　　　　　　0　　　　　　0　　　　　　0</p>\n<p>上表中Swap分区大小是0（有Swap分区没有激活，或者根本没有Swap分区），这时我们需要增加Swap空间，有2种方式，都要用root用户操作。</p>\n<h2 id=\"压缩正常的分区，分出小部分转换为Swap分区。\"><a href=\"#压缩正常的分区，分出小部分转换为Swap分区。\" class=\"headerlink\" title=\"压缩正常的分区，分出小部分转换为Swap分区。\"></a>压缩正常的分区，分出小部分转换为Swap分区。</h2><p>如果是LVM分区，参考：<a href=\"http://leolan.top/2016/11/03/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86-2016-11-03-LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/\" target=\"_blank\" rel=\"external\">LVM磁盘管理</a></p>\n<ol>\n<li><p>找到要要缩小的磁盘，比如<strong>/home</strong>，先备份<strong>/home</strong>下的文件</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /tmp</div><div class=\"line\">tar -zcpv -f home<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span> /home/</div></pre></td></tr></table></figure>\n</li>\n<li><p>然后卸载<strong>/home</strong>下的分区，先在终端<code>df -h</code>一下，记下挂载在/home下的设备名，假设是<strong>/dev/sda5</strong>。执行命令<br><code>umount /home</code>或<code>umount /dev/sda5</code>就卸载了。</p>\n</li>\n<li>重新分区，执行命令<code>fdisk /dev/sda</code><br>输入p,查看一下当前的分区表<br>输入d，删除分区，输入5，删除<strong>/dev/sda5</strong><br>输入n，新建分区，输入+8G，建立一个8G分区<br>输入n，新建分区，输入起始磁道号，然后输入结束磁道号，把剩余空间再新建一个分区<br>这时候，会提示要reboot才能读取磁盘分区表，我们不reboot，输入命令<code>partprobe</code>就可以了！</li>\n<li><p>挂载磁盘，恢复<strong>/home</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /tmp</div><div class=\"line\">tar -zxvf home<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span> -C /home</div></pre></td></tr></table></figure>\n</li>\n<li><p>把8G空间转换为Swap分区，和下面的内容是一样的。</p>\n</li>\n</ol>\n<h2 id=\"有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\"><a href=\"#有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\" class=\"headerlink\" title=\"有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\"></a>有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。</h2><p>这里假设<strong>/dev/sda5</strong>是空闲空间。</p>\n<ol>\n<li>格式化分区：<code>mkfs.ext3 /dev/sda5</code>会有<strong>UUID</strong>号，记录下来备用。</li>\n<li>将分区转换成交换分区，格式化交换分区（mkswap）：<code>mkswap /dev/sda5</code></li>\n<li>激活交换分区：<code>swapon /dev/sda5</code></li>\n<li>现在再<code>free -m</code>看看，Swap分区已经不为0了。</li>\n<li>最后添加开机挂载就行，按格式写好,注意<strong>UUID</strong>是刚刚记录下来的。<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">UUID=aa65f414<span class=\"number\">-312</span>f<span class=\"number\">-4</span>ec8-aed6<span class=\"number\">-9e0423</span>e87938 none            swap    sw              <span class=\"number\">0</span>       <span class=\"number\">0</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<hr>\n<h1 id=\"Swap分区转普通分区\"><a href=\"#Swap分区转普通分区\" class=\"headerlink\" title=\"Swap分区转普通分区\"></a>Swap分区转普通分区</h1><ol>\n<li>关闭交换分区（swapoff）：<code>swapoff /dev/sda5</code>  </li>\n<li>重新格式化分区：<code>mkfs.ext3 /dev/sda5</code>会有<strong>UUID</strong>号，记录下来备用。</li>\n<li>设置磁盘巻标：<code>e2label /dev/sda5 sky</code>  </li>\n<li><p>查看巻标：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">e2label <span class=\"regexp\">/dev/</span>sda5  </div><div class=\"line\">sky</div></pre></td></tr></table></figure>\n</li>\n<li><p>根据巻标查看硬盘：<code>findfs LABEL=sky</code> </p>\n</li>\n<li>最后添加开机挂载就行，按格式写好,注意<strong>UUID</strong>是刚刚记录下来的。<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">UUID=aa65f414<span class=\"number\">-312</span>f<span class=\"number\">-4</span>ec8-aed6<span class=\"number\">-9e0423</span>e87938 none            swap    sw              <span class=\"number\">0</span>       <span class=\"number\">0</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<hr>\n","excerpt":"","more":"<h1 id=\"建立Swap分区（普通分区转Swap分区）\"><a href=\"#建立Swap分区（普通分区转Swap分区）\" class=\"headerlink\" title=\"建立Swap分区（普通分区转Swap分区）\"></a>建立Swap分区（普通分区转Swap分区）</h1><p>增加Swap分区，适用于系统没有Swap分区，或者有Swap分区但空间很小的情况。</p>\n<p>查看有哪些分区：<code>fdisk -l</code><br>查看已挂载的分区：<code>df -h</code><br>这两条命令可以看出系统有没有多余的没有使用的分区。</p>\n<p>查看内存和Swap空间：<code>free -m</code> 　-m是以MB为单位显示<br>　　　　　　　　　　　total　　　　used　　　　free　　　　shared　　buffers　　cached<br>Mem:　　　　　　　　996　　　　　928　　　　　67　　　　　　0　　　　215　　　　482<br>-/+ buffers/cache:　　　　　　　　　231　　　　765<br>Swap:　　　　　　　　　0　　　　　　0　　　　　　0</p>\n<p>上表中Swap分区大小是0（有Swap分区没有激活，或者根本没有Swap分区），这时我们需要增加Swap空间，有2种方式，都要用root用户操作。</p>\n<h2 id=\"压缩正常的分区，分出小部分转换为Swap分区。\"><a href=\"#压缩正常的分区，分出小部分转换为Swap分区。\" class=\"headerlink\" title=\"压缩正常的分区，分出小部分转换为Swap分区。\"></a>压缩正常的分区，分出小部分转换为Swap分区。</h2><p>如果是LVM分区，参考：<a href=\"http://leolan.top/2016/11/03/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86-2016-11-03-LVM%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/\">LVM磁盘管理</a></p>\n<ol>\n<li><p>找到要要缩小的磁盘，比如<strong>/home</strong>，先备份<strong>/home</strong>下的文件</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /tmp</div><div class=\"line\">tar -zcpv -f home<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span> /home/</div></pre></td></tr></table></figure>\n</li>\n<li><p>然后卸载<strong>/home</strong>下的分区，先在终端<code>df -h</code>一下，记下挂载在/home下的设备名，假设是<strong>/dev/sda5</strong>。执行命令<br><code>umount /home</code>或<code>umount /dev/sda5</code>就卸载了。</p>\n</li>\n<li>重新分区，执行命令<code>fdisk /dev/sda</code><br>输入p,查看一下当前的分区表<br>输入d，删除分区，输入5，删除<strong>/dev/sda5</strong><br>输入n，新建分区，输入+8G，建立一个8G分区<br>输入n，新建分区，输入起始磁道号，然后输入结束磁道号，把剩余空间再新建一个分区<br>这时候，会提示要reboot才能读取磁盘分区表，我们不reboot，输入命令<code>partprobe</code>就可以了！</li>\n<li><p>挂载磁盘，恢复<strong>/home</strong></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /tmp</div><div class=\"line\">tar -zxvf home<span class=\"selector-class\">.tar</span><span class=\"selector-class\">.gz</span> -C /home</div></pre></td></tr></table></figure>\n</li>\n<li><p>把8G空间转换为Swap分区，和下面的内容是一样的。</p>\n</li>\n</ol>\n<h2 id=\"有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\"><a href=\"#有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\" class=\"headerlink\" title=\"有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。\"></a>有未使用的分区或为激活的Swap分区，直接转换为Swap分区激活即可。</h2><p>这里假设<strong>/dev/sda5</strong>是空闲空间。</p>\n<ol>\n<li>格式化分区：<code>mkfs.ext3 /dev/sda5</code>会有<strong>UUID</strong>号，记录下来备用。</li>\n<li>将分区转换成交换分区，格式化交换分区（mkswap）：<code>mkswap /dev/sda5</code></li>\n<li>激活交换分区：<code>swapon /dev/sda5</code></li>\n<li>现在再<code>free -m</code>看看，Swap分区已经不为0了。</li>\n<li>最后添加开机挂载就行，按格式写好,注意<strong>UUID</strong>是刚刚记录下来的。<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">UUID=aa65f414<span class=\"number\">-312</span>f<span class=\"number\">-4</span>ec8-aed6<span class=\"number\">-9e0423</span>e87938 none            swap    sw              <span class=\"number\">0</span>       <span class=\"number\">0</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<hr>\n<h1 id=\"Swap分区转普通分区\"><a href=\"#Swap分区转普通分区\" class=\"headerlink\" title=\"Swap分区转普通分区\"></a>Swap分区转普通分区</h1><ol>\n<li>关闭交换分区（swapoff）：<code>swapoff /dev/sda5</code>  </li>\n<li>重新格式化分区：<code>mkfs.ext3 /dev/sda5</code>会有<strong>UUID</strong>号，记录下来备用。</li>\n<li>设置磁盘巻标：<code>e2label /dev/sda5 sky</code>  </li>\n<li><p>查看巻标：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">e2label <span class=\"regexp\">/dev/</span>sda5  </div><div class=\"line\">sky</div></pre></td></tr></table></figure>\n</li>\n<li><p>根据巻标查看硬盘：<code>findfs LABEL=sky</code> </p>\n</li>\n<li>最后添加开机挂载就行，按格式写好,注意<strong>UUID</strong>是刚刚记录下来的。<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">UUID=aa65f414<span class=\"number\">-312</span>f<span class=\"number\">-4</span>ec8-aed6<span class=\"number\">-9e0423</span>e87938 none            swap    sw              <span class=\"number\">0</span>       <span class=\"number\">0</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<hr>\n"},{"title":"VNC服务","abbrlink":33402,"date":"2016-11-02T08:23:15.000Z","_content":"\n# Centos\n\n## 安装vnc \n\n`yum -y install vnc-server tigervnc tigervnc-server`\n\n`vim /root/.vnc/xstartup`\n把最后一行 **twm &**  注释掉，然后添加一行内容**gnome-session &**\n然后保存退出\n\n`vim /etc/sysconfig/vncservers`\n修改一下最后两行如下\n```\nVNCSERVERS=\"1:root 2:root\"\nVNCSERVERARGS[2]=\"-geometry 800x600 -nolisten tcp -localhost\"\n```\n然后保存退出\n\nvncserver 设置密码\n\n最后启动vncserver 并设置为开机启动，【如果系统防火墙不会用，就关闭吧】\n```\nservice vncserver start\nchkconfig vncserver on\nservice iptables stop\nchkconfig iptables on```\n\n现在vncserver服务器端已经配置好了，使用客户端进行图形界面远程即可。注意vnc远程的时候，默认第一个端口是**5901**，第二个界面是 **5902**依次类推。所以在使用vnc客户端远程的时候，要注意。否则连接不上的。\n\n\n\n---","source":"_posts/系统管理/2016-11-02-VNC服务.md","raw":"---\ntitle: VNC服务\ncategories:\n  - 系统管理\ntags:\n  - VNC服务\nabbrlink: 33402\ndate: 2016-11-02 16:23:15\n---\n\n# Centos\n\n## 安装vnc \n\n`yum -y install vnc-server tigervnc tigervnc-server`\n\n`vim /root/.vnc/xstartup`\n把最后一行 **twm &**  注释掉，然后添加一行内容**gnome-session &**\n然后保存退出\n\n`vim /etc/sysconfig/vncservers`\n修改一下最后两行如下\n```\nVNCSERVERS=\"1:root 2:root\"\nVNCSERVERARGS[2]=\"-geometry 800x600 -nolisten tcp -localhost\"\n```\n然后保存退出\n\nvncserver 设置密码\n\n最后启动vncserver 并设置为开机启动，【如果系统防火墙不会用，就关闭吧】\n```\nservice vncserver start\nchkconfig vncserver on\nservice iptables stop\nchkconfig iptables on```\n\n现在vncserver服务器端已经配置好了，使用客户端进行图形界面远程即可。注意vnc远程的时候，默认第一个端口是**5901**，第二个界面是 **5902**依次类推。所以在使用vnc客户端远程的时候，要注意。否则连接不上的。\n\n\n\n---","slug":"系统管理-2016-11-02-VNC服务","published":1,"updated":"2016-11-21T02:17:09.115Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjoe003md8pk82y5viof","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><h2 id=\"安装vnc\"><a href=\"#安装vnc\" class=\"headerlink\" title=\"安装vnc\"></a>安装vnc</h2><p><code>yum -y install vnc-server tigervnc tigervnc-server</code></p>\n<p><code>vim /root/.vnc/xstartup</code><br>把最后一行 <strong>twm &amp;</strong>  注释掉，然后添加一行内容<strong>gnome-session &amp;</strong><br>然后保存退出</p>\n<p><code>vim /etc/sysconfig/vncservers</code><br>修改一下最后两行如下<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">VNCSERVERS</span>=<span class=\"string\">\"1:root 2:root\"</span></div><div class=\"line\"><span class=\"attr\">VNCSERVERARGS[2]</span>=<span class=\"string\">\"-geometry 800x600 -nolisten tcp -localhost\"</span></div></pre></td></tr></table></figure></p>\n<p>然后保存退出</p>\n<p>vncserver 设置密码</p>\n<p>最后启动vncserver 并设置为开机启动，【如果系统防火墙不会用，就关闭吧】<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">service vncserver <span class=\"built_in\">start</span></div><div class=\"line\">chkconfig vncserver <span class=\"keyword\">on</span></div><div class=\"line\">service iptables <span class=\"built_in\">stop</span></div><div class=\"line\">chkconfig iptables <span class=\"keyword\">on</span></div></pre></td></tr></table></figure></p>\n<p>现在vncserver服务器端已经配置好了，使用客户端进行图形界面远程即可。注意vnc远程的时候，默认第一个端口是<strong>5901</strong>，第二个界面是 <strong>5902</strong>依次类推。所以在使用vnc客户端远程的时候，要注意。否则连接不上的。</p>\n<hr>\n","excerpt":"","more":"<h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><h2 id=\"安装vnc\"><a href=\"#安装vnc\" class=\"headerlink\" title=\"安装vnc\"></a>安装vnc</h2><p><code>yum -y install vnc-server tigervnc tigervnc-server</code></p>\n<p><code>vim /root/.vnc/xstartup</code><br>把最后一行 <strong>twm &amp;</strong>  注释掉，然后添加一行内容<strong>gnome-session &amp;</strong><br>然后保存退出</p>\n<p><code>vim /etc/sysconfig/vncservers</code><br>修改一下最后两行如下<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">VNCSERVERS</span>=<span class=\"string\">\"1:root 2:root\"</span></div><div class=\"line\"><span class=\"attr\">VNCSERVERARGS[2]</span>=<span class=\"string\">\"-geometry 800x600 -nolisten tcp -localhost\"</span></div></pre></td></tr></table></figure></p>\n<p>然后保存退出</p>\n<p>vncserver 设置密码</p>\n<p>最后启动vncserver 并设置为开机启动，【如果系统防火墙不会用，就关闭吧】<br><figure class=\"highlight livecodeserver\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">service vncserver <span class=\"built_in\">start</span></div><div class=\"line\">chkconfig vncserver <span class=\"keyword\">on</span></div><div class=\"line\">service iptables <span class=\"built_in\">stop</span></div><div class=\"line\">chkconfig iptables <span class=\"keyword\">on</span></div></pre></td></tr></table></figure></p>\n<p>现在vncserver服务器端已经配置好了，使用客户端进行图形界面远程即可。注意vnc远程的时候，默认第一个端口是<strong>5901</strong>，第二个界面是 <strong>5902</strong>依次类推。所以在使用vnc客户端远程的时候，要注意。否则连接不上的。</p>\n<hr>\n"},{"title":"Linux检测硬件信息脚本","abbrlink":49171,"date":"2016-11-18T09:51:42.000Z","_content":"\n常常要了解一台服务器的基本硬件情况，以便更好的安排。写了一个脚本能大概了解服务器的硬件配置情况，方便安排。\n直接把代码保存为**.sh**文件，加权限即可运行。现成文件[下载](http://ofyfogrgx.bkt.clouddn.com/blog/20161118/175652134.sh)\n\n```shell\n#!/bin/bash\nPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin\nexport PATH\n\nif [ $(cat /etc/issue |grep -v Kernel |awk '{print $1}') != \"CentOS\" ]; then\n    apt-get install smartmontools -y\nfi\n\necho \"\"\necho \"---------------------服务器信息------------------------\"\necho \"服务器品牌：\"`dmidecode|grep \"System Information\" -A9 | grep Manufacturer |awk '{print $2}'`\necho \"服务器型号：\"`dmidecode|grep \"System Information\" -A9 | grep Product |awk '{print $3}'`\necho \"序列号：\"`dmidecode|grep \"System Information\" -A9 | grep Serial |awk '{print $3}'`\necho \"\"\necho \"\"\necho \"---------------------主板信息--------------------------\"\nb=`dmidecode|grep \"System Information\" -A9|egrep Manufacturer: |awk '{print $2}'`\necho \"主板品牌：\" $b\nc=`dmidecode |grep \"System Information\" -A9 |grep \"Product Name:\" |awk '{print $3}'`\necho \"主板型号：\" $c\necho \"\"\necho \"\"\necho \"--------------------操作系统信息------------------------\"\necho \"系统：\" `cat /etc/issue |grep -v Kernel`\necho \"主机名：\" `uname -n`\necho \"内核版本：\" `uname -r`\necho \"\" \necho \"----------------------CPU信息--------------------------\"\necho \"CPU个数：\" `cat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l`\necho \"CPU型号：\" `cat /proc/cpuinfo | grep 'model name' |uniq |awk -F : '{print $2}'`\necho \"每个CPU核数：\" `cat /proc/cpuinfo| grep \"cpu cores\"| uniq |awk '{print $4}'`\necho \"CPU总个数：\" `cat /proc/cpuinfo | grep \"physical id\" | uniq | wc -l`\necho \"逻辑CPU个数（总核数）：\" `cat /proc/cpuinfo| grep \"processor\"| wc -l`\necho \"\"\necho \"\"\necho \"---------------------内存信息--------------------------\"\necho \"内存插槽总数：\" `dmidecode |grep -A16 \"Memory Device$\" |grep Manufacturer: | wc -l`\necho \"未使用插槽数：\" `dmidecode |grep -A16 \"Memory Device$\" |grep 'Manufacturer: NO DIMM' | wc -l`\necho \"厂商如下：\"\n\tdmidecode -t memory |grep Manufacturer\necho \"内存型号：\"\n\tdmidecode -t memory |grep 'Part Number'\necho \"每条内存大小：\"\n\tdmidecode|grep -A5 \"Memory Device\"|grep Size|grep -v Range\necho \"每条内存频率：\"\n\tdmidecode|grep -A16 \"Memory Device\"|grep Speed\necho \"总内存（GB）：\" `free -g |grep Mem |awk '{print $2}'`\necho \"\"\necho \"\"\necho \"---------------------硬盘信息--------------------------\"\necho \"硬盘厂商、型号、序列号：\" `smartctl -a /dev/sda |egrep \"Device Model:|Serial Number:\"`\necho \"硬盘数量、容量：\" `fdisk -l |grep \"Disk /dev/sd\"`\necho \"\"\necho \"\"\necho \"---------------------网卡信息--------------------------\"\necho \"网卡设备：\"\nlspci | grep Ethernet\necho \"\"\necho \"\"\n\n```","source":"_posts/系统管理/2016-11-18-Linux检测硬件信息脚本.md","raw":"---\ntitle: Linux检测硬件信息脚本\ncategories:\n  - 系统管理\ntags:\n  - Linux检测硬件信息脚本\nabbrlink: 49171\ndate: 2016-11-18 17:51:42\n---\n\n常常要了解一台服务器的基本硬件情况，以便更好的安排。写了一个脚本能大概了解服务器的硬件配置情况，方便安排。\n直接把代码保存为**.sh**文件，加权限即可运行。现成文件[下载](http://ofyfogrgx.bkt.clouddn.com/blog/20161118/175652134.sh)\n\n```shell\n#!/bin/bash\nPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin\nexport PATH\n\nif [ $(cat /etc/issue |grep -v Kernel |awk '{print $1}') != \"CentOS\" ]; then\n    apt-get install smartmontools -y\nfi\n\necho \"\"\necho \"---------------------服务器信息------------------------\"\necho \"服务器品牌：\"`dmidecode|grep \"System Information\" -A9 | grep Manufacturer |awk '{print $2}'`\necho \"服务器型号：\"`dmidecode|grep \"System Information\" -A9 | grep Product |awk '{print $3}'`\necho \"序列号：\"`dmidecode|grep \"System Information\" -A9 | grep Serial |awk '{print $3}'`\necho \"\"\necho \"\"\necho \"---------------------主板信息--------------------------\"\nb=`dmidecode|grep \"System Information\" -A9|egrep Manufacturer: |awk '{print $2}'`\necho \"主板品牌：\" $b\nc=`dmidecode |grep \"System Information\" -A9 |grep \"Product Name:\" |awk '{print $3}'`\necho \"主板型号：\" $c\necho \"\"\necho \"\"\necho \"--------------------操作系统信息------------------------\"\necho \"系统：\" `cat /etc/issue |grep -v Kernel`\necho \"主机名：\" `uname -n`\necho \"内核版本：\" `uname -r`\necho \"\" \necho \"----------------------CPU信息--------------------------\"\necho \"CPU个数：\" `cat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l`\necho \"CPU型号：\" `cat /proc/cpuinfo | grep 'model name' |uniq |awk -F : '{print $2}'`\necho \"每个CPU核数：\" `cat /proc/cpuinfo| grep \"cpu cores\"| uniq |awk '{print $4}'`\necho \"CPU总个数：\" `cat /proc/cpuinfo | grep \"physical id\" | uniq | wc -l`\necho \"逻辑CPU个数（总核数）：\" `cat /proc/cpuinfo| grep \"processor\"| wc -l`\necho \"\"\necho \"\"\necho \"---------------------内存信息--------------------------\"\necho \"内存插槽总数：\" `dmidecode |grep -A16 \"Memory Device$\" |grep Manufacturer: | wc -l`\necho \"未使用插槽数：\" `dmidecode |grep -A16 \"Memory Device$\" |grep 'Manufacturer: NO DIMM' | wc -l`\necho \"厂商如下：\"\n\tdmidecode -t memory |grep Manufacturer\necho \"内存型号：\"\n\tdmidecode -t memory |grep 'Part Number'\necho \"每条内存大小：\"\n\tdmidecode|grep -A5 \"Memory Device\"|grep Size|grep -v Range\necho \"每条内存频率：\"\n\tdmidecode|grep -A16 \"Memory Device\"|grep Speed\necho \"总内存（GB）：\" `free -g |grep Mem |awk '{print $2}'`\necho \"\"\necho \"\"\necho \"---------------------硬盘信息--------------------------\"\necho \"硬盘厂商、型号、序列号：\" `smartctl -a /dev/sda |egrep \"Device Model:|Serial Number:\"`\necho \"硬盘数量、容量：\" `fdisk -l |grep \"Disk /dev/sd\"`\necho \"\"\necho \"\"\necho \"---------------------网卡信息--------------------------\"\necho \"网卡设备：\"\nlspci | grep Ethernet\necho \"\"\necho \"\"\n\n```","slug":"系统管理-2016-11-18-Linux检测硬件信息脚本","published":1,"updated":"2016-11-21T02:17:09.146Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjoi003od8pkiwwjpx4p","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>常常要了解一台服务器的基本硬件情况，以便更好的安排。写了一个脚本能大概了解服务器的硬件配置情况，方便安排。<br>直接把代码保存为<strong>.sh</strong>文件，加权限即可运行。现成文件<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161118/175652134.sh\" target=\"_blank\" rel=\"external\">下载</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/bin/bash</div><div class=\"line\">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</div><div class=\"line\">export PATH</div><div class=\"line\"></div><div class=\"line\">if [ $(cat /etc/issue |grep -v Kernel |awk &apos;&#123;print $1&#125;&apos;) != &quot;CentOS&quot; ]; then</div><div class=\"line\">    apt-get install smartmontools -y</div><div class=\"line\">fi</div><div class=\"line\"></div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------服务器信息------------------------&quot;</div><div class=\"line\">echo &quot;服务器品牌：&quot;`dmidecode|grep &quot;System Information&quot; -A9 | grep Manufacturer |awk &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;服务器型号：&quot;`dmidecode|grep &quot;System Information&quot; -A9 | grep Product |awk &apos;&#123;print $3&#125;&apos;`</div><div class=\"line\">echo &quot;序列号：&quot;`dmidecode|grep &quot;System Information&quot; -A9 | grep Serial |awk &apos;&#123;print $3&#125;&apos;`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------主板信息--------------------------&quot;</div><div class=\"line\">b=`dmidecode|grep &quot;System Information&quot; -A9|egrep Manufacturer: |awk &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;主板品牌：&quot; $b</div><div class=\"line\">c=`dmidecode |grep &quot;System Information&quot; -A9 |grep &quot;Product Name:&quot; |awk &apos;&#123;print $3&#125;&apos;`</div><div class=\"line\">echo &quot;主板型号：&quot; $c</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;--------------------操作系统信息------------------------&quot;</div><div class=\"line\">echo &quot;系统：&quot; `cat /etc/issue |grep -v Kernel`</div><div class=\"line\">echo &quot;主机名：&quot; `uname -n`</div><div class=\"line\">echo &quot;内核版本：&quot; `uname -r`</div><div class=\"line\">echo &quot;&quot; </div><div class=\"line\">echo &quot;----------------------CPU信息--------------------------&quot;</div><div class=\"line\">echo &quot;CPU个数：&quot; `cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l`</div><div class=\"line\">echo &quot;CPU型号：&quot; `cat /proc/cpuinfo | grep &apos;model name&apos; |uniq |awk -F : &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;每个CPU核数：&quot; `cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq |awk &apos;&#123;print $4&#125;&apos;`</div><div class=\"line\">echo &quot;CPU总个数：&quot; `cat /proc/cpuinfo | grep &quot;physical id&quot; | uniq | wc -l`</div><div class=\"line\">echo &quot;逻辑CPU个数（总核数）：&quot; `cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------内存信息--------------------------&quot;</div><div class=\"line\">echo &quot;内存插槽总数：&quot; `dmidecode |grep -A16 &quot;Memory Device$&quot; |grep Manufacturer: | wc -l`</div><div class=\"line\">echo &quot;未使用插槽数：&quot; `dmidecode |grep -A16 &quot;Memory Device$&quot; |grep &apos;Manufacturer: NO DIMM&apos; | wc -l`</div><div class=\"line\">echo &quot;厂商如下：&quot;</div><div class=\"line\">\tdmidecode -t memory |grep Manufacturer</div><div class=\"line\">echo &quot;内存型号：&quot;</div><div class=\"line\">\tdmidecode -t memory |grep &apos;Part Number&apos;</div><div class=\"line\">echo &quot;每条内存大小：&quot;</div><div class=\"line\">\tdmidecode|grep -A5 &quot;Memory Device&quot;|grep Size|grep -v Range</div><div class=\"line\">echo &quot;每条内存频率：&quot;</div><div class=\"line\">\tdmidecode|grep -A16 &quot;Memory Device&quot;|grep Speed</div><div class=\"line\">echo &quot;总内存（GB）：&quot; `free -g |grep Mem |awk &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------硬盘信息--------------------------&quot;</div><div class=\"line\">echo &quot;硬盘厂商、型号、序列号：&quot; `smartctl -a /dev/sda |egrep &quot;Device Model:|Serial Number:&quot;`</div><div class=\"line\">echo &quot;硬盘数量、容量：&quot; `fdisk -l |grep &quot;Disk /dev/sd&quot;`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------网卡信息--------------------------&quot;</div><div class=\"line\">echo &quot;网卡设备：&quot;</div><div class=\"line\">lspci | grep Ethernet</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div></pre></td></tr></table></figure>","excerpt":"","more":"<p>常常要了解一台服务器的基本硬件情况，以便更好的安排。写了一个脚本能大概了解服务器的硬件配置情况，方便安排。<br>直接把代码保存为<strong>.sh</strong>文件，加权限即可运行。现成文件<a href=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161118/175652134.sh\">下载</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/bin/bash</div><div class=\"line\">PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</div><div class=\"line\">export PATH</div><div class=\"line\"></div><div class=\"line\">if [ $(cat /etc/issue |grep -v Kernel |awk &apos;&#123;print $1&#125;&apos;) != &quot;CentOS&quot; ]; then</div><div class=\"line\">    apt-get install smartmontools -y</div><div class=\"line\">fi</div><div class=\"line\"></div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------服务器信息------------------------&quot;</div><div class=\"line\">echo &quot;服务器品牌：&quot;`dmidecode|grep &quot;System Information&quot; -A9 | grep Manufacturer |awk &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;服务器型号：&quot;`dmidecode|grep &quot;System Information&quot; -A9 | grep Product |awk &apos;&#123;print $3&#125;&apos;`</div><div class=\"line\">echo &quot;序列号：&quot;`dmidecode|grep &quot;System Information&quot; -A9 | grep Serial |awk &apos;&#123;print $3&#125;&apos;`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------主板信息--------------------------&quot;</div><div class=\"line\">b=`dmidecode|grep &quot;System Information&quot; -A9|egrep Manufacturer: |awk &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;主板品牌：&quot; $b</div><div class=\"line\">c=`dmidecode |grep &quot;System Information&quot; -A9 |grep &quot;Product Name:&quot; |awk &apos;&#123;print $3&#125;&apos;`</div><div class=\"line\">echo &quot;主板型号：&quot; $c</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;--------------------操作系统信息------------------------&quot;</div><div class=\"line\">echo &quot;系统：&quot; `cat /etc/issue |grep -v Kernel`</div><div class=\"line\">echo &quot;主机名：&quot; `uname -n`</div><div class=\"line\">echo &quot;内核版本：&quot; `uname -r`</div><div class=\"line\">echo &quot;&quot; </div><div class=\"line\">echo &quot;----------------------CPU信息--------------------------&quot;</div><div class=\"line\">echo &quot;CPU个数：&quot; `cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l`</div><div class=\"line\">echo &quot;CPU型号：&quot; `cat /proc/cpuinfo | grep &apos;model name&apos; |uniq |awk -F : &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;每个CPU核数：&quot; `cat /proc/cpuinfo| grep &quot;cpu cores&quot;| uniq |awk &apos;&#123;print $4&#125;&apos;`</div><div class=\"line\">echo &quot;CPU总个数：&quot; `cat /proc/cpuinfo | grep &quot;physical id&quot; | uniq | wc -l`</div><div class=\"line\">echo &quot;逻辑CPU个数（总核数）：&quot; `cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------内存信息--------------------------&quot;</div><div class=\"line\">echo &quot;内存插槽总数：&quot; `dmidecode |grep -A16 &quot;Memory Device$&quot; |grep Manufacturer: | wc -l`</div><div class=\"line\">echo &quot;未使用插槽数：&quot; `dmidecode |grep -A16 &quot;Memory Device$&quot; |grep &apos;Manufacturer: NO DIMM&apos; | wc -l`</div><div class=\"line\">echo &quot;厂商如下：&quot;</div><div class=\"line\">\tdmidecode -t memory |grep Manufacturer</div><div class=\"line\">echo &quot;内存型号：&quot;</div><div class=\"line\">\tdmidecode -t memory |grep &apos;Part Number&apos;</div><div class=\"line\">echo &quot;每条内存大小：&quot;</div><div class=\"line\">\tdmidecode|grep -A5 &quot;Memory Device&quot;|grep Size|grep -v Range</div><div class=\"line\">echo &quot;每条内存频率：&quot;</div><div class=\"line\">\tdmidecode|grep -A16 &quot;Memory Device&quot;|grep Speed</div><div class=\"line\">echo &quot;总内存（GB）：&quot; `free -g |grep Mem |awk &apos;&#123;print $2&#125;&apos;`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------硬盘信息--------------------------&quot;</div><div class=\"line\">echo &quot;硬盘厂商、型号、序列号：&quot; `smartctl -a /dev/sda |egrep &quot;Device Model:|Serial Number:&quot;`</div><div class=\"line\">echo &quot;硬盘数量、容量：&quot; `fdisk -l |grep &quot;Disk /dev/sd&quot;`</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;---------------------网卡信息--------------------------&quot;</div><div class=\"line\">echo &quot;网卡设备：&quot;</div><div class=\"line\">lspci | grep Ethernet</div><div class=\"line\">echo &quot;&quot;</div><div class=\"line\">echo &quot;&quot;</div></pre></td></tr></table></figure>"},{"title":"Pytnon版本升级","abbrlink":40882,"date":"2016-11-17T07:15:59.000Z","_content":"\n# Centos\n一般情况下yum源有更新都是可以直接升级到新版的，在yum源无新版时一般采用源码编译。\n\n更新python千万不要把老版本的删除！新老版本是可以共存的，很多基本的命令、软件包都要依赖预装的老版本python的，比如yum。 \n\n源码包下载：http://python.org/ftp/python/\n```\nyum -y install gcc\nwget http://python.org/ftp/python/3.3.0/Python-3.3.0.tar.bz2 \ntar -jxvf Python-3.3.0.tar.bz2 \ncd Python-3.3.0 \n./configure \nmake all \nmake install \nmake clean \nmake distclean \n/usr/local/bin/python3 -V```\n\n这时python3安装好了，但需要输入`python3`才能运行。\n替换旧版本（这里的旧版本是2.4的）\n```\nmv /usr/bin/python /usr/bin/python2.4\n#当前python的版本为2.4所以是python2.4 ,看/usr/bin/下版本是多少。\nln -s /usr/local/bin/python3.3 /usr/bin/python  \n#这里python3.3也一样，安装多少版就写多少\npython -V   #查看当前默认python版本 ```\n\n默认的python成功指向3.3.0但此时yum不能用了，还要修改一下文件`vi /usr/bin/yum`\n把文件头部的**#!/usr/bin/python**改成**#!/usr/bin/python2.4** (改为之前的老版本号)\n保存退出，yum即可正常使用。如若有其他命令、软件不能正常使用，仿照yum配置文件的修改方法，修改其配置文件即可。 \n\n---\n\n","source":"_posts/系统管理/2016-11-17-Pytnon版本升级.md","raw":"---\ntitle: Pytnon版本升级\ncategories:\n  - 系统管理\ntags:\n  - Pytnon版本升级\nabbrlink: 40882\ndate: 2016-11-17 15:15:59\n---\n\n# Centos\n一般情况下yum源有更新都是可以直接升级到新版的，在yum源无新版时一般采用源码编译。\n\n更新python千万不要把老版本的删除！新老版本是可以共存的，很多基本的命令、软件包都要依赖预装的老版本python的，比如yum。 \n\n源码包下载：http://python.org/ftp/python/\n```\nyum -y install gcc\nwget http://python.org/ftp/python/3.3.0/Python-3.3.0.tar.bz2 \ntar -jxvf Python-3.3.0.tar.bz2 \ncd Python-3.3.0 \n./configure \nmake all \nmake install \nmake clean \nmake distclean \n/usr/local/bin/python3 -V```\n\n这时python3安装好了，但需要输入`python3`才能运行。\n替换旧版本（这里的旧版本是2.4的）\n```\nmv /usr/bin/python /usr/bin/python2.4\n#当前python的版本为2.4所以是python2.4 ,看/usr/bin/下版本是多少。\nln -s /usr/local/bin/python3.3 /usr/bin/python  \n#这里python3.3也一样，安装多少版就写多少\npython -V   #查看当前默认python版本 ```\n\n默认的python成功指向3.3.0但此时yum不能用了，还要修改一下文件`vi /usr/bin/yum`\n把文件头部的**#!/usr/bin/python**改成**#!/usr/bin/python2.4** (改为之前的老版本号)\n保存退出，yum即可正常使用。如若有其他命令、软件不能正常使用，仿照yum配置文件的修改方法，修改其配置文件即可。 \n\n---\n\n","slug":"系统管理-2016-11-17-Pytnon版本升级","published":1,"updated":"2016-11-21T02:17:09.141Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjol003sd8pkom4qfobz","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><p>一般情况下yum源有更新都是可以直接升级到新版的，在yum源无新版时一般采用源码编译。</p>\n<p>更新python千万不要把老版本的删除！新老版本是可以共存的，很多基本的命令、软件包都要依赖预装的老版本python的，比如yum。 </p>\n<p>源码包下载：<a href=\"http://python.org/ftp/python/\" target=\"_blank\" rel=\"external\">http://python.org/ftp/python/</a><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum -<span class=\"keyword\">y</span> install gcc</div><div class=\"line\">wget http://<span class=\"keyword\">python</span>.org/ftp/<span class=\"keyword\">python</span>/<span class=\"number\">3.3</span>.<span class=\"number\">0</span>/Python-<span class=\"number\">3.3</span>.<span class=\"number\">0</span>.tar.bz2 </div><div class=\"line\">tar -jxvf Python-<span class=\"number\">3.3</span>.<span class=\"number\">0</span>.tar.bz2 </div><div class=\"line\"><span class=\"keyword\">cd</span> Python-<span class=\"number\">3.3</span>.<span class=\"number\">0</span> </div><div class=\"line\">./configure </div><div class=\"line\"><span class=\"keyword\">make</span> <span class=\"keyword\">all</span> </div><div class=\"line\"><span class=\"keyword\">make</span> install </div><div class=\"line\"><span class=\"keyword\">make</span> clean </div><div class=\"line\"><span class=\"keyword\">make</span> distclean </div><div class=\"line\">/usr/local/bin/<span class=\"keyword\">python3</span> -V</div></pre></td></tr></table></figure></p>\n<p>这时python3安装好了，但需要输入<code>python3</code>才能运行。<br>替换旧版本（这里的旧版本是2.4的）<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mv <span class=\"meta-keyword\">/usr/</span>bin/python <span class=\"meta-keyword\">/usr/</span>bin/python2<span class=\"number\">.4</span></div><div class=\"line\"><span class=\"meta\">#当前python的版本为2.4所以是python2.4 ,看/usr/bin/下版本是多少。</span></div><div class=\"line\">ln -s <span class=\"meta-keyword\">/usr/</span>local<span class=\"meta-keyword\">/bin/</span>python3<span class=\"number\">.3</span> <span class=\"meta-keyword\">/usr/</span>bin/python  </div><div class=\"line\"><span class=\"meta\">#这里python3.3也一样，安装多少版就写多少</span></div><div class=\"line\">python -V   <span class=\"meta\">#查看当前默认python版本</span></div></pre></td></tr></table></figure></p>\n<p>默认的python成功指向3.3.0但此时yum不能用了，还要修改一下文件<code>vi /usr/bin/yum</code><br>把文件头部的<strong>#!/usr/bin/python</strong>改成<strong>#!/usr/bin/python2.4</strong> (改为之前的老版本号)<br>保存退出，yum即可正常使用。如若有其他命令、软件不能正常使用，仿照yum配置文件的修改方法，修改其配置文件即可。 </p>\n<hr>\n","excerpt":"","more":"<h1 id=\"Centos\"><a href=\"#Centos\" class=\"headerlink\" title=\"Centos\"></a>Centos</h1><p>一般情况下yum源有更新都是可以直接升级到新版的，在yum源无新版时一般采用源码编译。</p>\n<p>更新python千万不要把老版本的删除！新老版本是可以共存的，很多基本的命令、软件包都要依赖预装的老版本python的，比如yum。 </p>\n<p>源码包下载：<a href=\"http://python.org/ftp/python/\">http://python.org/ftp/python/</a><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum -<span class=\"keyword\">y</span> install gcc</div><div class=\"line\">wget http://<span class=\"keyword\">python</span>.org/ftp/<span class=\"keyword\">python</span>/<span class=\"number\">3.3</span>.<span class=\"number\">0</span>/Python-<span class=\"number\">3.3</span>.<span class=\"number\">0</span>.tar.bz2 </div><div class=\"line\">tar -jxvf Python-<span class=\"number\">3.3</span>.<span class=\"number\">0</span>.tar.bz2 </div><div class=\"line\"><span class=\"keyword\">cd</span> Python-<span class=\"number\">3.3</span>.<span class=\"number\">0</span> </div><div class=\"line\">./configure </div><div class=\"line\"><span class=\"keyword\">make</span> <span class=\"keyword\">all</span> </div><div class=\"line\"><span class=\"keyword\">make</span> install </div><div class=\"line\"><span class=\"keyword\">make</span> clean </div><div class=\"line\"><span class=\"keyword\">make</span> distclean </div><div class=\"line\">/usr/local/bin/<span class=\"keyword\">python3</span> -V</div></pre></td></tr></table></figure></p>\n<p>这时python3安装好了，但需要输入<code>python3</code>才能运行。<br>替换旧版本（这里的旧版本是2.4的）<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mv <span class=\"meta-keyword\">/usr/</span>bin/python <span class=\"meta-keyword\">/usr/</span>bin/python2<span class=\"number\">.4</span></div><div class=\"line\"><span class=\"meta\">#当前python的版本为2.4所以是python2.4 ,看/usr/bin/下版本是多少。</span></div><div class=\"line\">ln -s <span class=\"meta-keyword\">/usr/</span>local<span class=\"meta-keyword\">/bin/</span>python3<span class=\"number\">.3</span> <span class=\"meta-keyword\">/usr/</span>bin/python  </div><div class=\"line\"><span class=\"meta\">#这里python3.3也一样，安装多少版就写多少</span></div><div class=\"line\">python -V   <span class=\"meta\">#查看当前默认python版本</span></div></pre></td></tr></table></figure></p>\n<p>默认的python成功指向3.3.0但此时yum不能用了，还要修改一下文件<code>vi /usr/bin/yum</code><br>把文件头部的<strong>#!/usr/bin/python</strong>改成<strong>#!/usr/bin/python2.4</strong> (改为之前的老版本号)<br>保存退出，yum即可正常使用。如若有其他命令、软件不能正常使用，仿照yum配置文件的修改方法，修改其配置文件即可。 </p>\n<hr>\n"},{"title":"Linux常用命令","abbrlink":48230,"date":"2016-11-25T03:23:02.000Z","_content":"\n# 系统管理类\n\n## 分析空间大小\n分析空间大小（根目录下个文件夹大小）:`du -sh /*`\n\n---\n## 定时任务\n```\ncrontab status                #crontab 状态 \ncrontab -e                    #编辑配置文件\n/sbin/service crond start     #启动服务 \n/sbin/service crond stop      #关闭服务 \n/sbin/service crond restart   #重启服务 \n/sbin/service crond reload    #重新载入配置```\n\n格式：\n```\n*/25 * * * * /opt/xxx/xxx/restart.sh```\n\n**crontab文件的含义**：用户所建立的crontab文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，\n格式如下： **minute hour day month week command** 顺序：**分 时 日 月 周 **\n\n* **minute**： 表示分钟，可以是从0到59之间的任何整数。\n* **hour**：表示小时，可以是从0到23之间的任何整数。 \n* **day**：表示日期，可以是从1到31之间的任何整数。 \n* **month**：表示月份，可以是从1到12之间的任何整数。 \n* **week**：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。 \n* **command**：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。 \n\n可以使用以下特殊字符： \n**星号（*）**：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。 \n**逗号（,）**：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9” \n**中杠（-）**：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6” \n**正斜线（/）**：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。\n\n---\n## 命令执行\n顺序执行多条命令可以用`;`来隔开**（即使前面一条命令没有正确执行，后面的命令也会执行）**\n\n`&&`实现选择性执行的，它**表示如果前面的命令执行结果返回0(前一条命令正确执行)，才执行后面的，否则不执行**（不是表示终端输出的内容，而是表示命令执行状态的结果），用`echo $?`环境变量可以查看上一次命令的执行结果。\n\nshell中的`||`除了用于表示逻辑与和或之外，还可以实现命令执行顺序的简单控制。`||`是与`&&`相反的控制效果，当上一条命令执行结果为**≠0($?≠0)**时(上一条命令执行失败)，则执行它后面的命令。\n\n---\n## 后台运行命令\n\n* 1.`screen [command]`\n* 2.`[command] &`\n* 3.`nohup [command] &`\n* \n**nohup命令**：如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不会结束，那么可以使用nohup命令。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂起的意思( no hang up)。 　　\n该命令的一般形式为：`nohup command &` 　　使用nohup命令提交作业\n如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件： 　　\n`nohup command > myout.file 2>&1 &`\n在上面的例子中，输出被重定向到myout.file文件中。 　　\n使用 `jobs` 查看任务。 　　\n使用 `fg %n`　关闭。 　　\n\n---\n## 开机启动项\n交互界面的开机启动项：`ntsysv`(centos)\n**\\--back**：在互动式界面里，显示Back钮，而非cancel钮。\n使用空格键选择或者取消选项！\n\n---\n## 包管理\n### 二进制包\n\n二进制包的安装比较简单，我们需要做的只是将从网络上下载的二进制包解压后放到合适的目录，然后将包含可执行的主程序文件的目录添加进**PATH环境变量**即可。\n\n### Debian/Ubuntu(apt)\n搜索软件包：`apt-cache search softname`\n\n|选项|说明|\n|-|:-----|\n|install|其后加上软件包名，用于安装一个软件包|\n|update|从软件源镜像服务器上下载/更新用于更新本地软件源的软件包列表|\n|upgrade|升级本地可更新的全部软件包，但存在依赖问题时将不会升级，通常会在更新之前执行一次update|\n|dist-upgrade|解决依赖关系并升级(存在一定危险性)|\n|remove|移除已安装的软件包，包括与被移除软件包有依赖关系的软件包，但不包含软件包的配置文件|\n|autoremove|移除之前被其他软件包依赖，但现在不再被使用的软件包|\n|purge|与remove相同，但会完全移除软件包，包含其配置文件|\n|clean|移除下载到本地的已经安装的软件包，默认保存在/var/cache/apt/archives/|\n|autoclean|移除已安装的软件的旧版本软件包|\n\n|参数|说明|\n|--|--|\n|-y|自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用|\n|-s|模拟安装|\n|-q|静默安装方式，指定多个q或者-q=#,#表示数字，用于设定静默级别，这在你不想要在安装软件包时屏幕输出过多时很有用|\n|-f|修复损坏的(已安装的所有软件包)依赖关系|\n|-d|只下载不安装|\n|--reinstall|重新安装已经安装但可能存在问题的软件包|\n|--install-suggests|同时安装APT给出的建议安装的软件包|\n\n---\n\n**dpkg常用参数介绍**：\n\n|参数|说明|\n|--|--|\n|-i|安装指定deb包|\n|-R|后面加上目录名，用于安装该目录下的所有deb安装包|\n|-r|remove，移除某个已安装的软件包|\n|-I|显示deb包文件的信息|\n|-s|显示已安装软件的信息|\n|-S|搜索已安装的软件包|\n|-L|显示已安装软件包的目录信息|\n\n---\n### Centos\\Redhat(yum)\n\n|选项|说明|\n|--|--|\n|install|安装rpm软件包； |\n|update|更新rpm软件包； |\n|check-update|检查是否有可用的更新rpm软件包； |\n|remove|删除指定的rpm软件包； |\n|list|显示软件包的信息； |\n|search|检查软件包的信息； |\n|info|显示指定的rpm软件包的描述信息和概要信息； |\n|clean|清理yum过期的缓存； |\n|shell|进入yum的shell提示符； |\n|resolvedep|显示rpm软件包的依赖关系； |\n|localinstall|安装本地的rpm软件包； |\n|localupdate|显示本地rpm软件包进行更新； |\n|deplist|显示rpm软件包的所有依赖关系。|\n\n|参数|说明|\n|--|--|\n|-h|显示帮助信息； |\n|-y|对所有的提问都回答“yes”； |\n|-c|指定配置文件； |\n|-q|安静模式； |\n|-v|详细模式； |\n|-d|设置调试等级（0-10）； |\n|-e|设置错误等级（0-10）； |\n|-R|设置yum处理一个命令的最大等待时间； |\n|-C|完全从缓存中运行，而不去下载或者更新任何头文件。|\n\n自动搜索最快镜像插件：`yum install yum-fastestmirror `\n安装yum图形窗口插件：`yum install yumex `\n查看可能批量安装的列表：`yum grouplist`\n\n**安装 **\n```\nyum install #全部安装 \nyum install package1 #安装指定的安装包package1 \nyum groupinsall group1 #安装程序组group1 ```\n\n**更新和升级 **\n```\nyum update #全部更新 \nyum update package1 #更新指定程序包package1 \nyum check-update #检查可更新的程序 \nyum upgrade package1 #升级指定程序包package1 \nyum groupupdate group1 #升级程序组group1 ```\n\n**查找和显示 **\n```\nyum info package1 #显示安装包信息package1 \nyum list #显示所有已经安装和可以安装的程序包 \nyum list package1 #显示指定程序包安装情况package1 \nyum groupinfo group1 #显示程序组group1信息\nyum search string 根据关键字string查找安装包 删除程序 \nyum remove | erase package1 #删除程序包package1 \nyum groupremove group1 #删除程序组group1 \nyum deplist package1 #查看程序package1依赖情况 ```\n\n**清除缓存 **\n```\nyum clean packages #清除缓存目录下的软件包 \nyum clean headers #清除缓存目录下的 headers \nyum clean oldheaders #清除缓存目录下旧的 headers```\n\n---\n**yum 软件组**\n列出软件组`yum grouplist` 已安装的软件组 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165538270.png)\n未安装的软件组 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165623242.png)\n**软件组信息yum groupinfo \"软件组名（英文双引号）\"**\n\n主要被安装的软件 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165714876.png)\n额外可选的软件 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165747860.png)\n**安装某个软件组yum groupinstall \"软件组名（英文双引号）\"**\n\n---\n\n**RPM常用参数介绍**：\n|参数|说明|\n|--|--|\n|-a|查询所有套件； |\n|-b<完成阶段><套件档>+或-t <完成阶段><套件档>+|设置包装套件的完成阶段，并指定套件档的文件名称； |\n|-c|只列出组态配置文件，本参数需配合\"-l\"参数使用； |\n|-d|只列出文本文件，本参数需配合\"-l\"参数使用； |\n|-e<套件档>或--erase<套件档>|删除指定的套件； |\n|-f<文件>+|查询拥有指定文件的套件； |\n|-h或--hash|套件安装时列出标记； |\n|-i|显示套件的相关信息； |\n|-i<套件档>或--install<套件档>|安装指定的套件档； |\n|-l|显示套件的文件列表； |\n|-p<套件档>+|查询指定的RPM套件档； |\n|-q|使用询问模式，当遇到任何问题时，rpm指令会先询问用户； |\n|-R|显示套件的关联性信息； |\n|-s|显示文件状态，本参数需配合\"-l\"参数使用； |\n|-U<套件档>或--upgrade<套件档>|升级指定的套件档； |\n|-v|显示指令执行过程； |\n|-vv|详细显示指令执行过程，便于排错。|\n\n\n---\n## dd命令\n`dd --help`或是`info dd `\n\n输入或输出 \n`dd if=[STDIN] of=[STDOUT] `\n例：\n`dd if=ubuntu-13.10-desktop-amd64.iso of=/dev/sdb2`**把光盘写进磁盘**\n当然你可以拿这个来方便的拷贝光碟(注意，你的光碟是标准的 iso9660格式才可以这么做！)\n \n`dd if=/dev/cdrom of=cdrom.iso `**把光驱内容保存为iso镜像文件**\n\n同理，要把一张磁盘的内容拷贝到另一张磁盘上，利用/tmp作为临时存储区。把源盘插入驱动器中，输入下述命令： \n`dd if =/dev/xxx of = /tmp/tmpfile `\n拷贝完成后，将源盘从驱动器中取出，把目标盘插入，输入命令： \n`dd if = /tmp/tmpfile of =/dev/xxx` \n软盘拷贝完成后，应该将临时文件删除： \n`rm /tmp/tmpfile `\n\n如果两个设备能同时工作：`dd if =/dev/xxx of = /dev/xxx `\n\n* **/dev/null** 它是空设备，也称为位桶（bit bucket）。任何写入它的输出都会被抛弃。如果不想让消息以标准输出显示或写入文件，那么可以将消息重定向到位桶。\n* **/dev/zero**该设备无穷尽地提供0，可以使用任何你需要的数目——设备提供的要多的多。他可以用于向设备或文件写入字符串0。\n`dd if=/dev/zero of=./test.txt bs=1k count=1`\n**/dev/zero**还可用于擦除磁盘数据\n\n---\n## 时区时间\n**时区修改**\n`cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime` 提示覆盖的就覆盖掉\n`date`  看到有CST字样为中国标准时间; `date -R`  看到+0800  是东八区\n\n**修改硬件时钟**（每次开机都是从硬件读取时间的，首先硬件时间要正确）\n`hwclock --show`   显示当前硬件时间\n`hwclock --set --date=\"10/28/16 10:04:00\"`   （月/日/年 时:分:秒）\n\n* 1.**硬件时钟**与**系统时钟**同步\n**hc**代表硬件时间，**sys**代表系统时间，即用硬件时钟同步到系统时钟\n`hwclock --hctosys` 或者`clock --hctosys`\n`date`    #查看当前系统时间\n\n* 2.**系统时钟**和**硬件时钟**同步（一般是系统自动同步Internet时间后才把最新时间同步到硬件中）\n`hwclock --systohc`或者`clock --systohc`  即用系统时钟同步到硬件时钟\n\n注：**tzselect** 命令也可以交互界面选择修改，但最后还要执行一个提示设置时区的命令，并写入环境变量中，重启才能生效。\n\n---\n\n---\n# 文件、目录类\n## cd\n**cd** ：进入用户主目录；\n**cd ~** ：进入用户主目录；\n**cd -** ：返回进入此目录之前所在的目录；\n**cd !$** ： 把上个命令的参数作为cd参数使用\n\n---\n## 权限设置\n### 数字设定法\n**0表示没有权限，1表示可执行权限， 2表示可写权限，4表示可读权限**，然后将其相加。所以数字属性的格式应为3个从0到7的八进制数，其顺序是（**u**）（**g**）（**o**）。\n\n例如，如果想让某个文件的属主有“读/写”二种权限，需要把4（可读）+2（可写）＝6（读/写）。\n数字设定法的一般形式为：\n语法：`chmod [mode] 文件名`\n例如：chmod 755 mm.txt\n\n### 文字设定法\n语法：`chmod [who] [+ | - | =] [mode] 文件名`\n命令中各选项的含义为：\n操作对象who可是下述字母中的任一个或者它们的组合：\n* u 表示“用户（user）”，即文件或目录的所有者。\n* g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。\n* o 表示“其他（others）用户”。\n* a 表示“所有（all）用户”。它是系统默认值。\n操作符号可以是：\n* \\+ 添加某个权限。\n* \\- 取消某个权限。\n* = 赋予给定权限并取消其他所有权限（如果有的话）。\n\n设置 mode 所表示的权限可用下述字母的任意组合：\n* r 可读。\n* w 可写。\n* x 可执行。\n* X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。\n* s 在文件执行时把进程的属主或组ID置为该文件的文件属主。\n\n方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。\n* t 保存程序的文本到交换设备上。\n* u 与文件属主拥有一样的权限。\n* g 与和文件属主同组的用户拥有一样的权限。\n* o 与其他用户拥有一样的权限。\n\n**文件名**：以空格分开的要改变权限的文件列表，支持通配符。\n\n---\n## CUT命令\n* -b：仅显示行中指定直接范围的内容； \n* -c：仅显示行中指定范围的字符；\n* -d：指定字段的分隔符，默认的字段分隔符为“TAB”； \n* -f：显示指定字段的内容； \n* -n：与“-b”选项连用，不分割多字节字符； \n* \\--complement：补足被选择的字节、字符或字段； \n* \\--out-delimiter=<字段分隔符>：指定输出内容是的字段分割符； \n* \\--help：显示指令的帮助信息； \n* \\--version：显示指令的版本信息。\n\n打印/etc/passwd文件中以**:**为分隔符的第1个字段和第6个字段分别表示用户名和其家目录：`cut /etc/passwd -d ':' -f 1,6`\n前五个（包含第五个）：`cut /etc/passwd -c -5`\n前五个之后的（包含第五个）：`cut /etc/passwd -c 5-`\n第五个：`cut /etc/passwd -c 5`\n2到5之间的（包含第五个）： `cut /etc/passwd -c 2-5`\n\n---\n## 查找近期修改的文件\n比如按名字查找一个文件，可以用`find / -name filename`  \n按时间查找也有参数\n* **-atime** 访问时间\n* **-ctime** 改变状态的时间\n* **-mtime**修改的时间。\n这里的时间是以24小时为单位的。\n\n`find . -name '*.html' -type f -mmin -30`：当前目录最近30分钟内修改过的html文件\n`find . -name '*.html' -type f -mmin -30 -ls`：最近30分钟内修改过的文件，的详细情况\n`find ./ -mtime 0`：返回最近24小时内修改过的文件。\n`find ./ -mtime 1` ： 返回的是前48~24小时修改过的文件。而不是48小时以内修改过的文件。\n`find . -type f -mtime +1`：最近1天前（2天内）修改过的常规文件\n`find . -mtime -2 -type f`：48小时以内修改过的文件\n\n那怎么返回10天内修改过的文件？find支持表达式关系运算，所以可以把最近几天的数据一天天的加起来：\n`find ./ -mtime 0 -o -mtime 1 -o -mtime 2` 虽然比较土，但也算是个方法了。\n\n\n参考：http://man.linuxde.net/find\n\n\n---\n## echo\n**echo \"ok\" > test.txt** ：用ok字符覆盖掉test.txt内容，**>表示追加并覆盖**的意思。\n**echo \"ok\" >> test.txt**：向test.txt文件追加OK字符，不覆盖原文件里的内容。**>>表示尾行追加**。\n\n---\n## 计算MD5\n计算MD5：`md5sum filename`\n\n---\n## 文件上下传\n### SCP \n```\nscp /home/git/.ssh/id_rsa.pub gitServer:/home/git```\n\n### lrzsz(Windows-Linux)\nrz  上传文件\nsz  下载文件\n\n### ncftp\n另外有两个常用的ftp工具**ncftpget**和**ncftpput**，可以实现**后台的ftp上传和下载**，这样我就可以利用这些命令在后台上传和下载文件了。\n\n---\n### man手册转为PDF\n把man的帮助转换成PDF文档：`man -t [command] | ps2pdf - filename.pdf`\n\n---\n## 管道符、awk等高级控制\n“**|**”管道符是左边命令的标准输出(stdout)给右边命令作为标准输入（stdin）; \n“**<**”是右边文件名指定的文件内容读入为左边命令的标准输入（stdin）；\n“**>**”是左边命令的输出覆盖写到右边指定的文件中。\n\n`ps aux |grep XXX |awk '{print $11}' | grep -v 'grep' | wc -l`\n* **grep -v 'grep'**  过滤带grep的部分 取反\n* **wc -l **          统计行数\n* **sort -nr **       排序\n\n---\n`grep -rnI \"myleolan\" ~`\n\n* -r 参数表示递归搜索子目录中的文件,\n* -n表示打印匹配项行号，\n* -I表示忽略二进制文件。\n查看环境变量中以\"leolan\"结尾的字符串：`export | grep \".*leolan$\"`\n其中`$`就表示一行的末尾。\n\n---\n**wc** 命令用于统计并输出一个文件中行、单词和字节的数目\n分别只输出行数、单词数、字节数、字符数和输入文本中最长一行的字节数：\n行数：`wc -l /etc/passwd`\n单词数：`wc -w /etc/passwd`\n字节数：`wc -c /etc/passwd`\n字符数：`wc -m /etc/passwd`\n最长行字节数：`wc -L /etc/passwd`\n\n注意：对于西文字符来说，一个字符就是一个字节，但对于中文字符一个汉字是大于2个字节的，具体数目是由字符编码决定的\n\n---\n**sort **排序命令\n将输入按照一定方式排序，然后再输出,它支持的排序有按字典排序,数字排序，按月份排序，随机排序，反转排序，指定特定字段进行排序等等。\n默认为字典排序：`cat /etc/passswd | sort`\n反转排序：`cat /etc/passwd | sort -r`\n按特定字段排序：`cat /etc/passwd | sort -t':' -k 3 -n`\n\n上面的**-t**参数用于指定字段的分隔符，这里是以**\":\"**作为分隔符；\n**-k** 字段号用于指定对哪一个字段进行排序。这里/etc/passwd文件的第三个字段为数字，默认情况下是一字典序排序的，如果要按照数字排序就要加上**-n**参数\n\n---\n**uniq** 去重命令\nuniq命令可以用于过滤或者输出重复行。\n  ● 过滤重复行\n我们可以使用**history**命令查看最近执行过的命令（实际为读取**${SHELL}_history**文件），那么你可能就会要想去掉命令后面的参数然后去掉重复的命令：`history | cut -c 8- | cut -d ' ' -f 1 | uniq`\n\n然后经过层层过滤，你会发现确是只输出了执行的命令那一列，不过去重效果好像不明显，仔细看你会发现它趋势去重了，只是不那么明显，之所以不明显是因为uniq命令只能去连续重复的行，不是全文去重，所以要达到预期效果，我们先排序：\n`history | cut -c 8- | cut -d ' ' -f 1 | sort | uniq`\n或者`history | cut -c 8- | cut -d ' ' -f 1 | sort -u`\n\n  ● 输出重复行\n输出重复过的行（重复的只输出一个）及重复次数：\n`history | cut -c 8- | cut -d ' ' -f 1 | sort | uniq -dc`\n输出所有重复的行：\n`history | cut -c 8- | cut -d ' ' -f 1 | sort | uniq -D`\n\n---\n**tr** 命令\ntr 命令可以用来删除一段文本信息中的某些文字。或者将其进行转换。\n常用的选项有：\n\n|选项|说明|\n|---|---|\n|-d|删除和set1匹配的字符，注意不是全词匹配也不是按字符顺序匹配|\n|-s|去除set1指定的在输入文本中连续并重复的字符|\n\n删除 \"hello shiyanlou\" 中所有的'o','l','h'：`echo 'hello shiyanlou' | tr -d 'olh'`\n将\"hello\" 中的ll,去重为一个l：`echo 'hello' | tr -s 'l'`\n将输入文本，全部转换为大写或小写输出：`cat /etc/passwd | tr '[:lower:]' '[:upper:]'`\n上面的`'[:lower:]'` `'[:upper:]'`你也可以简单的写作`'[a-z]'` `'[A-Z]'`,当然反过来将大写变小写也是可以的\n\n---\n**col **命令\ncol 命令可以将Tab换成对等数量的空格建，或反转这个操作。\n常用的选项有：\n\n|选项|说明|\n|---|---|\n|-x|将Tab转换为空格|\n|-h|将空格转换为Tab（默认选项）|\n\n操作举例：\n查看 /etc/protocols 中的不可见字符，可以看到很多 ^I ，这其实就是 Tab 转义成可见字符的符号:\n`cat -A /etc/protocols`\n使用 col -x 将 /etc/protocols 中的 Tab 转换为空格,然后再使用 cat 查看，你发现 ^I 不见了:\n`cat /etc/protocols | col -x | cat -A`\n\n---\n**join**命令\n学过数据库的用户对这个应该不会陌生，这个命令就是用于将两个文件中包含相同内容的那一行合并在一起。\n\n常用的选项有：\n\n|选项|说明|\n|--|--|\n|-t|指定分隔符，默认为空格|\n|-i|忽略大小写的差异|\n|-1|指明第一个文件要用哪个字段来对比，默认对比第一个字段|\n|-2|指明第二个文件要用哪个字段来对比，默认对比第一个字段|\n\n操作举例：\n创建两个文件\n```\necho '1 hello' > file1\necho '1 shiyanlou' > file2\njoin file1 file2```\n将/etc/passwd与/etc/shadow两个文件合并，指定以**':'**作为分隔符\n`sudo join -t':' /etc/passwd /etc/shadow`\n将/etc/passwd与/etc/group两个文件合并，指定以**':'**作为分隔符, 分别比对第4和第3个字段\n`sudo join -t':' -1 4 /etc/passwd -2 3 /etc/group`\n\n---\n**paste**命令\npaste这个命令与join 命令类似，它是在不对比数据的情况下，简单地将多个文件合并一起，以Tab隔开。\n\n常用的选项有：\n\n|选项|说明|\n|--|--|\n|-d|指定合并的分隔符，默认为Tab|\n|-s|不合并到一行，每个文件为一行|\n\n操作举例：\n```\necho hello > file1\necho shiyanlou > file2\necho www.shiyanlou.com > file3\npaste -d ':' file1 file2 file3\npaste -s file1 file2 file3```\n\n---\n**xargs **分割参数列表\nxargs 是一条 UNIX 和类 UNIX 操作系统的常用命令。它的作用是将参数列表转换成小块分段传递给其他命令，以避免参数列表过长的问题。\n这个命令在有些时候十分有用，特别是当用来处理产生大量输出结果的命令如 find，locate 和 grep 的结果，详细用法请参看 man 文档。\n`cut -d: -f1 < /etc/passwd | sort | xargs echo`\n上面这个命令用于将/etc/passwd文件按**:**分割取第一个字段排序后，使用echo命令生成一个列表。\n\n---\n\n命令行将**图片转换为 ascii 字符**查看的工具 aview/asciiview(黑白的)\n彩色的：\n```\nsudo apt-get install caca-utils\ncacaview <pic_file>\ncacademo\ncacafire```\n\n---\n## 重定向\n**标准错误重定向**\n\n重定向标准输出到文件，这是一个很实用的操作，另一个很实用的操作是将标准错误重定向，标准输出和标准错误都被指向伪终端的屏幕显示，所以我们经常看到的一个命令的输出通常是同时包含了标准输出和标准错误的结果的。比如下面的操作：\n\n使用cat 命令同时读取两个文件，其中一个存在，另一个不存在\n`cat Documents/test.c hello.c`\n你可以看到除了正确输出了前一个文件的内容，还在末尾出现了一条错误信息\n下面我们将输出重定向到一个文件，根据我们前面的经验，这里将在看不到任何输出了\n`cat Documents/test.c hello.c > somefile`\n\n这里依然出现了那条错误信息，这正是因为如我上面说的那样，标准输出和标准错误虽然都指向终端屏幕，实际它们并不一样。那有的时候我们就是要可以隐藏某些错误或者警告，那又该怎么做呢。这就需要用到我们前面讲的文件描述符了：\n\n将标准错误重定向到标准输出，再将标准输出重定向到文件，注意要将重定向到文件写到前面\n`cat Documents/test.c hello.c >somefile  2>&1`\n或者只用bash提供的特殊的重定向符号\"&\"将标准错误和标准输出同时重定向到文件\n`cat Documents/test.c hello.c &>somefilehell`\n\n注意你应该在输出重定向文件**描述符**前加上**&**,否则shell会当做重定向到一个文件名为1的文件中\n\n---\n**tee命令**同时重定向到多个文件\n经常你可能还有这样的需求，除了将需要将输出重定向到文件之外也需要将信息打印在终端**(打印终端的同时输出到文件)**，那么你可以使用tee命令来实现：\n`echo 'hello shiyanlou' | tee hello`\n\n---\n**永久重定向**\n\n前面的重定向操作都只是临时性的，即只对当前命令有效，那如何做到“永久”有效呢，比如在一个脚本中，你需要某一部分的命令的输出全部进行重定向，难道要让你在每个命令上面加上临时重定向的操作嘛，当然不需要，我们可以使用**exec**命令实现“永久”重定向。**exec**命令的作用是使用指定的命令替换当前的 Shell，及使用一个进程替换当前进程，或者指定新的重定向：\n\n先开启一个子 Shell:`zsh`\n使用exec替换当前进程的重定向，将标准输出重定向到一个文件:`exec 1>somefile`\n后面你执行的命令的输出都将被重定向到文件中,直到你退出当前子shell，或取消exec的重定向（后面将告诉你怎么做）\n```\nls\nexit\ncat somefile```\n\n---\n**创建输出文件描述符**\n默认在 Shell 中可以有9个打开的文件描述符，上面我们使用了也是它默认提供的0,1,2号文件描述符，另外我们还可以使用3-8的文件描述符，只是它们默认没有打开而已，你可以使用下面命令查看当前 Shell 进程中打开的文件描述符：\n`cd /dev/fd/;ls -Al`\n\n同样使用exec命令可以创建新的文件描述符：\n```\nzsh\nexec 3>somefile\n# 先进入目录，再查看，否则你可能不能得到正确的结果，然后再回到上一次的目录\ncd /dev/fd/;ls -Al;cd -\n# 注意下面的命令>与&之间不应该有空格，如果有空格则会出错\necho \"this is test\" >&3\ncat somefile\nexit```\n\n---\n**关闭文件描述符**\n如上面我们打开的3号文件描述符，可以使用如下操作将它关闭：\n```\nexec 3>&-\ncd /dev/fd;ls -Al;cd ```\n\n---\n**完全屏蔽命令的输出**\n在 Linux 中有一个被成为“黑洞”的设备文件,所以导入它的数据都将被“吞噬”。\n在类 UNIX 系统中，**/dev/null**，或称空设备，是一个特殊的设备文件，它通常被用于丢弃不需要的输出流，或作为用于输入流的空文件，这些操作通常由重定向完成。读取它则会立即得到一个**EOF**。\n我们可以利用设个/dev/null屏蔽命令的输出：\n`cat Documents/test.c nefile 1>/dev/null 2>&1`\n上面这样的操作将使你得不到任何输出结果。\n\n\n---\n\n---\n# 网络类\n\n## wget递归下载整个网站  \n\nwget加上参数之后，即可成为相当强大的下载工具。\n```\nwget -r -p -np -k http://xxx.com/xxx\n\n-r,  --recursive（递归）指定使用递归下载\n-k,  --convert-links（转换链接）将下载的HTML页面中的链接转换为相对链接即本地链接\n-p,  --page-requisites（页面必需元素）下载所有的图片等页面显示所需的内容\n-np, --no-parent（不追溯至父级）\n-nc,   （断点续传）\n-o,    （日志）```\n\n---\n## axel高速下载\naxel是Linux下一个不错的HTTP/ftp高速下载工具。支持多线程下载、断点续传，且可以从多个地址或者从一个地址的多个连接来下载同一个文件。适合网速不给力时多线程下载提高下载速度。比如在国内VPS或服务器上下载lnmp一键安装包用Axel就比wget快。\n\n如下载lnmp安装包指定10个线程，保存到/tmp/中：\n```\naxel -n 10 -o /tmp/ http://www.linuxde.net/lnmp.tar.gz```\n\n---\n## 监听流量              \n### iftop\n官方网站：http://www.ex-parrot.com/~pdw/iftop/\n安装：\n**源码安装**：\n```\nyum install flex byacc  libpcap ncurses ncurses-devel libpcap-devel  #安装依赖\n或\napt-get install flex byacc  libpcap0.8 libncurses5   #安装依赖\n\n#编译之前确保已安装好了make、gcc、autoconf等。\nwget http://www.ex-parrot.com/pdw/iftop/download/iftop-0.17.tar.gz\ntar zxvf iftop-0.17.tar.gz\ncd iftop-0.17\n./configure\nmake && make install```\n\n**仓库源安装**：\nDebian/Ubuntu系统：`apt-get install iftop`\nCentos/Redhat系统：[安装EPEL源](https://www.vpser.net/manage/centos-rhel-linux-third-party-source-epel.html)，然后`yum install iftop`安装\n\n**使用**：`iftop`或`iftop -i eth0 -n -p`\n\n---\n### nethogs\n`nethogs eth0`\n\n---\n## 网页命令行阅读器\n`w3m 【网址】`    网页命令行方式阅读，对于没有桌面环境但在需要判断网页服务是否正常时非常有用。\n\nlinks阅读html文件,只显示链接\n`links [选项] [URL]`\n例：links www.baidu.com\n\n---\n## 禁ping （禁用ICMP协议）\n```\n“echo \"1\" >/proc/sys/net/ipv4/icmp_echo_ignore_all” ```\n不能vi编辑，1为禁止ping命令，0为允许ping命令\n\n---\n**文字接口数据包捕获器**:\n`tapdump [-AennqX] [-i 接口] [-w 存储文件名] [-c 次数] \\ [-r 文件] [所要摘取的数据包数据格式]`\n\n**图形接口数据包捕获器**：Wireshark\n`yum install wireshark wireshark-gnome`\n\n---\n## 屏幕共享（局域网，公网貌似不行）\n连接的两台电脑（也可多台）命令行显示是实时同步的，两边都可以操作。\n可能要先安装:**screen**\n```\nscreen -S foo 创建会话\nscreen -x foo 加入会话\nexit退出```\n\n---\n**即时通讯软件**： pidgin（gaim的延伸）\n`yum install pidgin`\n\n---\n\n\n\n\n\n\n\n\n","source":"_posts/系统管理/2016-11-25-Linux常用命令.md","raw":"---\ntitle: Linux常用命令\ncategories:\n  - 系统管理\ntags:\n  - Linux常用命令\nabbrlink: 48230\ndate: 2016-11-25 11:23:02\n---\n\n# 系统管理类\n\n## 分析空间大小\n分析空间大小（根目录下个文件夹大小）:`du -sh /*`\n\n---\n## 定时任务\n```\ncrontab status                #crontab 状态 \ncrontab -e                    #编辑配置文件\n/sbin/service crond start     #启动服务 \n/sbin/service crond stop      #关闭服务 \n/sbin/service crond restart   #重启服务 \n/sbin/service crond reload    #重新载入配置```\n\n格式：\n```\n*/25 * * * * /opt/xxx/xxx/restart.sh```\n\n**crontab文件的含义**：用户所建立的crontab文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，\n格式如下： **minute hour day month week command** 顺序：**分 时 日 月 周 **\n\n* **minute**： 表示分钟，可以是从0到59之间的任何整数。\n* **hour**：表示小时，可以是从0到23之间的任何整数。 \n* **day**：表示日期，可以是从1到31之间的任何整数。 \n* **month**：表示月份，可以是从1到12之间的任何整数。 \n* **week**：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。 \n* **command**：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。 \n\n可以使用以下特殊字符： \n**星号（*）**：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。 \n**逗号（,）**：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9” \n**中杠（-）**：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6” \n**正斜线（/）**：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。\n\n---\n## 命令执行\n顺序执行多条命令可以用`;`来隔开**（即使前面一条命令没有正确执行，后面的命令也会执行）**\n\n`&&`实现选择性执行的，它**表示如果前面的命令执行结果返回0(前一条命令正确执行)，才执行后面的，否则不执行**（不是表示终端输出的内容，而是表示命令执行状态的结果），用`echo $?`环境变量可以查看上一次命令的执行结果。\n\nshell中的`||`除了用于表示逻辑与和或之外，还可以实现命令执行顺序的简单控制。`||`是与`&&`相反的控制效果，当上一条命令执行结果为**≠0($?≠0)**时(上一条命令执行失败)，则执行它后面的命令。\n\n---\n## 后台运行命令\n\n* 1.`screen [command]`\n* 2.`[command] &`\n* 3.`nohup [command] &`\n* \n**nohup命令**：如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不会结束，那么可以使用nohup命令。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂起的意思( no hang up)。 　　\n该命令的一般形式为：`nohup command &` 　　使用nohup命令提交作业\n如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件： 　　\n`nohup command > myout.file 2>&1 &`\n在上面的例子中，输出被重定向到myout.file文件中。 　　\n使用 `jobs` 查看任务。 　　\n使用 `fg %n`　关闭。 　　\n\n---\n## 开机启动项\n交互界面的开机启动项：`ntsysv`(centos)\n**\\--back**：在互动式界面里，显示Back钮，而非cancel钮。\n使用空格键选择或者取消选项！\n\n---\n## 包管理\n### 二进制包\n\n二进制包的安装比较简单，我们需要做的只是将从网络上下载的二进制包解压后放到合适的目录，然后将包含可执行的主程序文件的目录添加进**PATH环境变量**即可。\n\n### Debian/Ubuntu(apt)\n搜索软件包：`apt-cache search softname`\n\n|选项|说明|\n|-|:-----|\n|install|其后加上软件包名，用于安装一个软件包|\n|update|从软件源镜像服务器上下载/更新用于更新本地软件源的软件包列表|\n|upgrade|升级本地可更新的全部软件包，但存在依赖问题时将不会升级，通常会在更新之前执行一次update|\n|dist-upgrade|解决依赖关系并升级(存在一定危险性)|\n|remove|移除已安装的软件包，包括与被移除软件包有依赖关系的软件包，但不包含软件包的配置文件|\n|autoremove|移除之前被其他软件包依赖，但现在不再被使用的软件包|\n|purge|与remove相同，但会完全移除软件包，包含其配置文件|\n|clean|移除下载到本地的已经安装的软件包，默认保存在/var/cache/apt/archives/|\n|autoclean|移除已安装的软件的旧版本软件包|\n\n|参数|说明|\n|--|--|\n|-y|自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用|\n|-s|模拟安装|\n|-q|静默安装方式，指定多个q或者-q=#,#表示数字，用于设定静默级别，这在你不想要在安装软件包时屏幕输出过多时很有用|\n|-f|修复损坏的(已安装的所有软件包)依赖关系|\n|-d|只下载不安装|\n|--reinstall|重新安装已经安装但可能存在问题的软件包|\n|--install-suggests|同时安装APT给出的建议安装的软件包|\n\n---\n\n**dpkg常用参数介绍**：\n\n|参数|说明|\n|--|--|\n|-i|安装指定deb包|\n|-R|后面加上目录名，用于安装该目录下的所有deb安装包|\n|-r|remove，移除某个已安装的软件包|\n|-I|显示deb包文件的信息|\n|-s|显示已安装软件的信息|\n|-S|搜索已安装的软件包|\n|-L|显示已安装软件包的目录信息|\n\n---\n### Centos\\Redhat(yum)\n\n|选项|说明|\n|--|--|\n|install|安装rpm软件包； |\n|update|更新rpm软件包； |\n|check-update|检查是否有可用的更新rpm软件包； |\n|remove|删除指定的rpm软件包； |\n|list|显示软件包的信息； |\n|search|检查软件包的信息； |\n|info|显示指定的rpm软件包的描述信息和概要信息； |\n|clean|清理yum过期的缓存； |\n|shell|进入yum的shell提示符； |\n|resolvedep|显示rpm软件包的依赖关系； |\n|localinstall|安装本地的rpm软件包； |\n|localupdate|显示本地rpm软件包进行更新； |\n|deplist|显示rpm软件包的所有依赖关系。|\n\n|参数|说明|\n|--|--|\n|-h|显示帮助信息； |\n|-y|对所有的提问都回答“yes”； |\n|-c|指定配置文件； |\n|-q|安静模式； |\n|-v|详细模式； |\n|-d|设置调试等级（0-10）； |\n|-e|设置错误等级（0-10）； |\n|-R|设置yum处理一个命令的最大等待时间； |\n|-C|完全从缓存中运行，而不去下载或者更新任何头文件。|\n\n自动搜索最快镜像插件：`yum install yum-fastestmirror `\n安装yum图形窗口插件：`yum install yumex `\n查看可能批量安装的列表：`yum grouplist`\n\n**安装 **\n```\nyum install #全部安装 \nyum install package1 #安装指定的安装包package1 \nyum groupinsall group1 #安装程序组group1 ```\n\n**更新和升级 **\n```\nyum update #全部更新 \nyum update package1 #更新指定程序包package1 \nyum check-update #检查可更新的程序 \nyum upgrade package1 #升级指定程序包package1 \nyum groupupdate group1 #升级程序组group1 ```\n\n**查找和显示 **\n```\nyum info package1 #显示安装包信息package1 \nyum list #显示所有已经安装和可以安装的程序包 \nyum list package1 #显示指定程序包安装情况package1 \nyum groupinfo group1 #显示程序组group1信息\nyum search string 根据关键字string查找安装包 删除程序 \nyum remove | erase package1 #删除程序包package1 \nyum groupremove group1 #删除程序组group1 \nyum deplist package1 #查看程序package1依赖情况 ```\n\n**清除缓存 **\n```\nyum clean packages #清除缓存目录下的软件包 \nyum clean headers #清除缓存目录下的 headers \nyum clean oldheaders #清除缓存目录下旧的 headers```\n\n---\n**yum 软件组**\n列出软件组`yum grouplist` 已安装的软件组 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165538270.png)\n未安装的软件组 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165623242.png)\n**软件组信息yum groupinfo \"软件组名（英文双引号）\"**\n\n主要被安装的软件 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165714876.png)\n额外可选的软件 \n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165747860.png)\n**安装某个软件组yum groupinstall \"软件组名（英文双引号）\"**\n\n---\n\n**RPM常用参数介绍**：\n|参数|说明|\n|--|--|\n|-a|查询所有套件； |\n|-b<完成阶段><套件档>+或-t <完成阶段><套件档>+|设置包装套件的完成阶段，并指定套件档的文件名称； |\n|-c|只列出组态配置文件，本参数需配合\"-l\"参数使用； |\n|-d|只列出文本文件，本参数需配合\"-l\"参数使用； |\n|-e<套件档>或--erase<套件档>|删除指定的套件； |\n|-f<文件>+|查询拥有指定文件的套件； |\n|-h或--hash|套件安装时列出标记； |\n|-i|显示套件的相关信息； |\n|-i<套件档>或--install<套件档>|安装指定的套件档； |\n|-l|显示套件的文件列表； |\n|-p<套件档>+|查询指定的RPM套件档； |\n|-q|使用询问模式，当遇到任何问题时，rpm指令会先询问用户； |\n|-R|显示套件的关联性信息； |\n|-s|显示文件状态，本参数需配合\"-l\"参数使用； |\n|-U<套件档>或--upgrade<套件档>|升级指定的套件档； |\n|-v|显示指令执行过程； |\n|-vv|详细显示指令执行过程，便于排错。|\n\n\n---\n## dd命令\n`dd --help`或是`info dd `\n\n输入或输出 \n`dd if=[STDIN] of=[STDOUT] `\n例：\n`dd if=ubuntu-13.10-desktop-amd64.iso of=/dev/sdb2`**把光盘写进磁盘**\n当然你可以拿这个来方便的拷贝光碟(注意，你的光碟是标准的 iso9660格式才可以这么做！)\n \n`dd if=/dev/cdrom of=cdrom.iso `**把光驱内容保存为iso镜像文件**\n\n同理，要把一张磁盘的内容拷贝到另一张磁盘上，利用/tmp作为临时存储区。把源盘插入驱动器中，输入下述命令： \n`dd if =/dev/xxx of = /tmp/tmpfile `\n拷贝完成后，将源盘从驱动器中取出，把目标盘插入，输入命令： \n`dd if = /tmp/tmpfile of =/dev/xxx` \n软盘拷贝完成后，应该将临时文件删除： \n`rm /tmp/tmpfile `\n\n如果两个设备能同时工作：`dd if =/dev/xxx of = /dev/xxx `\n\n* **/dev/null** 它是空设备，也称为位桶（bit bucket）。任何写入它的输出都会被抛弃。如果不想让消息以标准输出显示或写入文件，那么可以将消息重定向到位桶。\n* **/dev/zero**该设备无穷尽地提供0，可以使用任何你需要的数目——设备提供的要多的多。他可以用于向设备或文件写入字符串0。\n`dd if=/dev/zero of=./test.txt bs=1k count=1`\n**/dev/zero**还可用于擦除磁盘数据\n\n---\n## 时区时间\n**时区修改**\n`cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime` 提示覆盖的就覆盖掉\n`date`  看到有CST字样为中国标准时间; `date -R`  看到+0800  是东八区\n\n**修改硬件时钟**（每次开机都是从硬件读取时间的，首先硬件时间要正确）\n`hwclock --show`   显示当前硬件时间\n`hwclock --set --date=\"10/28/16 10:04:00\"`   （月/日/年 时:分:秒）\n\n* 1.**硬件时钟**与**系统时钟**同步\n**hc**代表硬件时间，**sys**代表系统时间，即用硬件时钟同步到系统时钟\n`hwclock --hctosys` 或者`clock --hctosys`\n`date`    #查看当前系统时间\n\n* 2.**系统时钟**和**硬件时钟**同步（一般是系统自动同步Internet时间后才把最新时间同步到硬件中）\n`hwclock --systohc`或者`clock --systohc`  即用系统时钟同步到硬件时钟\n\n注：**tzselect** 命令也可以交互界面选择修改，但最后还要执行一个提示设置时区的命令，并写入环境变量中，重启才能生效。\n\n---\n\n---\n# 文件、目录类\n## cd\n**cd** ：进入用户主目录；\n**cd ~** ：进入用户主目录；\n**cd -** ：返回进入此目录之前所在的目录；\n**cd !$** ： 把上个命令的参数作为cd参数使用\n\n---\n## 权限设置\n### 数字设定法\n**0表示没有权限，1表示可执行权限， 2表示可写权限，4表示可读权限**，然后将其相加。所以数字属性的格式应为3个从0到7的八进制数，其顺序是（**u**）（**g**）（**o**）。\n\n例如，如果想让某个文件的属主有“读/写”二种权限，需要把4（可读）+2（可写）＝6（读/写）。\n数字设定法的一般形式为：\n语法：`chmod [mode] 文件名`\n例如：chmod 755 mm.txt\n\n### 文字设定法\n语法：`chmod [who] [+ | - | =] [mode] 文件名`\n命令中各选项的含义为：\n操作对象who可是下述字母中的任一个或者它们的组合：\n* u 表示“用户（user）”，即文件或目录的所有者。\n* g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。\n* o 表示“其他（others）用户”。\n* a 表示“所有（all）用户”。它是系统默认值。\n操作符号可以是：\n* \\+ 添加某个权限。\n* \\- 取消某个权限。\n* = 赋予给定权限并取消其他所有权限（如果有的话）。\n\n设置 mode 所表示的权限可用下述字母的任意组合：\n* r 可读。\n* w 可写。\n* x 可执行。\n* X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。\n* s 在文件执行时把进程的属主或组ID置为该文件的文件属主。\n\n方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。\n* t 保存程序的文本到交换设备上。\n* u 与文件属主拥有一样的权限。\n* g 与和文件属主同组的用户拥有一样的权限。\n* o 与其他用户拥有一样的权限。\n\n**文件名**：以空格分开的要改变权限的文件列表，支持通配符。\n\n---\n## CUT命令\n* -b：仅显示行中指定直接范围的内容； \n* -c：仅显示行中指定范围的字符；\n* -d：指定字段的分隔符，默认的字段分隔符为“TAB”； \n* -f：显示指定字段的内容； \n* -n：与“-b”选项连用，不分割多字节字符； \n* \\--complement：补足被选择的字节、字符或字段； \n* \\--out-delimiter=<字段分隔符>：指定输出内容是的字段分割符； \n* \\--help：显示指令的帮助信息； \n* \\--version：显示指令的版本信息。\n\n打印/etc/passwd文件中以**:**为分隔符的第1个字段和第6个字段分别表示用户名和其家目录：`cut /etc/passwd -d ':' -f 1,6`\n前五个（包含第五个）：`cut /etc/passwd -c -5`\n前五个之后的（包含第五个）：`cut /etc/passwd -c 5-`\n第五个：`cut /etc/passwd -c 5`\n2到5之间的（包含第五个）： `cut /etc/passwd -c 2-5`\n\n---\n## 查找近期修改的文件\n比如按名字查找一个文件，可以用`find / -name filename`  \n按时间查找也有参数\n* **-atime** 访问时间\n* **-ctime** 改变状态的时间\n* **-mtime**修改的时间。\n这里的时间是以24小时为单位的。\n\n`find . -name '*.html' -type f -mmin -30`：当前目录最近30分钟内修改过的html文件\n`find . -name '*.html' -type f -mmin -30 -ls`：最近30分钟内修改过的文件，的详细情况\n`find ./ -mtime 0`：返回最近24小时内修改过的文件。\n`find ./ -mtime 1` ： 返回的是前48~24小时修改过的文件。而不是48小时以内修改过的文件。\n`find . -type f -mtime +1`：最近1天前（2天内）修改过的常规文件\n`find . -mtime -2 -type f`：48小时以内修改过的文件\n\n那怎么返回10天内修改过的文件？find支持表达式关系运算，所以可以把最近几天的数据一天天的加起来：\n`find ./ -mtime 0 -o -mtime 1 -o -mtime 2` 虽然比较土，但也算是个方法了。\n\n\n参考：http://man.linuxde.net/find\n\n\n---\n## echo\n**echo \"ok\" > test.txt** ：用ok字符覆盖掉test.txt内容，**>表示追加并覆盖**的意思。\n**echo \"ok\" >> test.txt**：向test.txt文件追加OK字符，不覆盖原文件里的内容。**>>表示尾行追加**。\n\n---\n## 计算MD5\n计算MD5：`md5sum filename`\n\n---\n## 文件上下传\n### SCP \n```\nscp /home/git/.ssh/id_rsa.pub gitServer:/home/git```\n\n### lrzsz(Windows-Linux)\nrz  上传文件\nsz  下载文件\n\n### ncftp\n另外有两个常用的ftp工具**ncftpget**和**ncftpput**，可以实现**后台的ftp上传和下载**，这样我就可以利用这些命令在后台上传和下载文件了。\n\n---\n### man手册转为PDF\n把man的帮助转换成PDF文档：`man -t [command] | ps2pdf - filename.pdf`\n\n---\n## 管道符、awk等高级控制\n“**|**”管道符是左边命令的标准输出(stdout)给右边命令作为标准输入（stdin）; \n“**<**”是右边文件名指定的文件内容读入为左边命令的标准输入（stdin）；\n“**>**”是左边命令的输出覆盖写到右边指定的文件中。\n\n`ps aux |grep XXX |awk '{print $11}' | grep -v 'grep' | wc -l`\n* **grep -v 'grep'**  过滤带grep的部分 取反\n* **wc -l **          统计行数\n* **sort -nr **       排序\n\n---\n`grep -rnI \"myleolan\" ~`\n\n* -r 参数表示递归搜索子目录中的文件,\n* -n表示打印匹配项行号，\n* -I表示忽略二进制文件。\n查看环境变量中以\"leolan\"结尾的字符串：`export | grep \".*leolan$\"`\n其中`$`就表示一行的末尾。\n\n---\n**wc** 命令用于统计并输出一个文件中行、单词和字节的数目\n分别只输出行数、单词数、字节数、字符数和输入文本中最长一行的字节数：\n行数：`wc -l /etc/passwd`\n单词数：`wc -w /etc/passwd`\n字节数：`wc -c /etc/passwd`\n字符数：`wc -m /etc/passwd`\n最长行字节数：`wc -L /etc/passwd`\n\n注意：对于西文字符来说，一个字符就是一个字节，但对于中文字符一个汉字是大于2个字节的，具体数目是由字符编码决定的\n\n---\n**sort **排序命令\n将输入按照一定方式排序，然后再输出,它支持的排序有按字典排序,数字排序，按月份排序，随机排序，反转排序，指定特定字段进行排序等等。\n默认为字典排序：`cat /etc/passswd | sort`\n反转排序：`cat /etc/passwd | sort -r`\n按特定字段排序：`cat /etc/passwd | sort -t':' -k 3 -n`\n\n上面的**-t**参数用于指定字段的分隔符，这里是以**\":\"**作为分隔符；\n**-k** 字段号用于指定对哪一个字段进行排序。这里/etc/passwd文件的第三个字段为数字，默认情况下是一字典序排序的，如果要按照数字排序就要加上**-n**参数\n\n---\n**uniq** 去重命令\nuniq命令可以用于过滤或者输出重复行。\n  ● 过滤重复行\n我们可以使用**history**命令查看最近执行过的命令（实际为读取**${SHELL}_history**文件），那么你可能就会要想去掉命令后面的参数然后去掉重复的命令：`history | cut -c 8- | cut -d ' ' -f 1 | uniq`\n\n然后经过层层过滤，你会发现确是只输出了执行的命令那一列，不过去重效果好像不明显，仔细看你会发现它趋势去重了，只是不那么明显，之所以不明显是因为uniq命令只能去连续重复的行，不是全文去重，所以要达到预期效果，我们先排序：\n`history | cut -c 8- | cut -d ' ' -f 1 | sort | uniq`\n或者`history | cut -c 8- | cut -d ' ' -f 1 | sort -u`\n\n  ● 输出重复行\n输出重复过的行（重复的只输出一个）及重复次数：\n`history | cut -c 8- | cut -d ' ' -f 1 | sort | uniq -dc`\n输出所有重复的行：\n`history | cut -c 8- | cut -d ' ' -f 1 | sort | uniq -D`\n\n---\n**tr** 命令\ntr 命令可以用来删除一段文本信息中的某些文字。或者将其进行转换。\n常用的选项有：\n\n|选项|说明|\n|---|---|\n|-d|删除和set1匹配的字符，注意不是全词匹配也不是按字符顺序匹配|\n|-s|去除set1指定的在输入文本中连续并重复的字符|\n\n删除 \"hello shiyanlou\" 中所有的'o','l','h'：`echo 'hello shiyanlou' | tr -d 'olh'`\n将\"hello\" 中的ll,去重为一个l：`echo 'hello' | tr -s 'l'`\n将输入文本，全部转换为大写或小写输出：`cat /etc/passwd | tr '[:lower:]' '[:upper:]'`\n上面的`'[:lower:]'` `'[:upper:]'`你也可以简单的写作`'[a-z]'` `'[A-Z]'`,当然反过来将大写变小写也是可以的\n\n---\n**col **命令\ncol 命令可以将Tab换成对等数量的空格建，或反转这个操作。\n常用的选项有：\n\n|选项|说明|\n|---|---|\n|-x|将Tab转换为空格|\n|-h|将空格转换为Tab（默认选项）|\n\n操作举例：\n查看 /etc/protocols 中的不可见字符，可以看到很多 ^I ，这其实就是 Tab 转义成可见字符的符号:\n`cat -A /etc/protocols`\n使用 col -x 将 /etc/protocols 中的 Tab 转换为空格,然后再使用 cat 查看，你发现 ^I 不见了:\n`cat /etc/protocols | col -x | cat -A`\n\n---\n**join**命令\n学过数据库的用户对这个应该不会陌生，这个命令就是用于将两个文件中包含相同内容的那一行合并在一起。\n\n常用的选项有：\n\n|选项|说明|\n|--|--|\n|-t|指定分隔符，默认为空格|\n|-i|忽略大小写的差异|\n|-1|指明第一个文件要用哪个字段来对比，默认对比第一个字段|\n|-2|指明第二个文件要用哪个字段来对比，默认对比第一个字段|\n\n操作举例：\n创建两个文件\n```\necho '1 hello' > file1\necho '1 shiyanlou' > file2\njoin file1 file2```\n将/etc/passwd与/etc/shadow两个文件合并，指定以**':'**作为分隔符\n`sudo join -t':' /etc/passwd /etc/shadow`\n将/etc/passwd与/etc/group两个文件合并，指定以**':'**作为分隔符, 分别比对第4和第3个字段\n`sudo join -t':' -1 4 /etc/passwd -2 3 /etc/group`\n\n---\n**paste**命令\npaste这个命令与join 命令类似，它是在不对比数据的情况下，简单地将多个文件合并一起，以Tab隔开。\n\n常用的选项有：\n\n|选项|说明|\n|--|--|\n|-d|指定合并的分隔符，默认为Tab|\n|-s|不合并到一行，每个文件为一行|\n\n操作举例：\n```\necho hello > file1\necho shiyanlou > file2\necho www.shiyanlou.com > file3\npaste -d ':' file1 file2 file3\npaste -s file1 file2 file3```\n\n---\n**xargs **分割参数列表\nxargs 是一条 UNIX 和类 UNIX 操作系统的常用命令。它的作用是将参数列表转换成小块分段传递给其他命令，以避免参数列表过长的问题。\n这个命令在有些时候十分有用，特别是当用来处理产生大量输出结果的命令如 find，locate 和 grep 的结果，详细用法请参看 man 文档。\n`cut -d: -f1 < /etc/passwd | sort | xargs echo`\n上面这个命令用于将/etc/passwd文件按**:**分割取第一个字段排序后，使用echo命令生成一个列表。\n\n---\n\n命令行将**图片转换为 ascii 字符**查看的工具 aview/asciiview(黑白的)\n彩色的：\n```\nsudo apt-get install caca-utils\ncacaview <pic_file>\ncacademo\ncacafire```\n\n---\n## 重定向\n**标准错误重定向**\n\n重定向标准输出到文件，这是一个很实用的操作，另一个很实用的操作是将标准错误重定向，标准输出和标准错误都被指向伪终端的屏幕显示，所以我们经常看到的一个命令的输出通常是同时包含了标准输出和标准错误的结果的。比如下面的操作：\n\n使用cat 命令同时读取两个文件，其中一个存在，另一个不存在\n`cat Documents/test.c hello.c`\n你可以看到除了正确输出了前一个文件的内容，还在末尾出现了一条错误信息\n下面我们将输出重定向到一个文件，根据我们前面的经验，这里将在看不到任何输出了\n`cat Documents/test.c hello.c > somefile`\n\n这里依然出现了那条错误信息，这正是因为如我上面说的那样，标准输出和标准错误虽然都指向终端屏幕，实际它们并不一样。那有的时候我们就是要可以隐藏某些错误或者警告，那又该怎么做呢。这就需要用到我们前面讲的文件描述符了：\n\n将标准错误重定向到标准输出，再将标准输出重定向到文件，注意要将重定向到文件写到前面\n`cat Documents/test.c hello.c >somefile  2>&1`\n或者只用bash提供的特殊的重定向符号\"&\"将标准错误和标准输出同时重定向到文件\n`cat Documents/test.c hello.c &>somefilehell`\n\n注意你应该在输出重定向文件**描述符**前加上**&**,否则shell会当做重定向到一个文件名为1的文件中\n\n---\n**tee命令**同时重定向到多个文件\n经常你可能还有这样的需求，除了将需要将输出重定向到文件之外也需要将信息打印在终端**(打印终端的同时输出到文件)**，那么你可以使用tee命令来实现：\n`echo 'hello shiyanlou' | tee hello`\n\n---\n**永久重定向**\n\n前面的重定向操作都只是临时性的，即只对当前命令有效，那如何做到“永久”有效呢，比如在一个脚本中，你需要某一部分的命令的输出全部进行重定向，难道要让你在每个命令上面加上临时重定向的操作嘛，当然不需要，我们可以使用**exec**命令实现“永久”重定向。**exec**命令的作用是使用指定的命令替换当前的 Shell，及使用一个进程替换当前进程，或者指定新的重定向：\n\n先开启一个子 Shell:`zsh`\n使用exec替换当前进程的重定向，将标准输出重定向到一个文件:`exec 1>somefile`\n后面你执行的命令的输出都将被重定向到文件中,直到你退出当前子shell，或取消exec的重定向（后面将告诉你怎么做）\n```\nls\nexit\ncat somefile```\n\n---\n**创建输出文件描述符**\n默认在 Shell 中可以有9个打开的文件描述符，上面我们使用了也是它默认提供的0,1,2号文件描述符，另外我们还可以使用3-8的文件描述符，只是它们默认没有打开而已，你可以使用下面命令查看当前 Shell 进程中打开的文件描述符：\n`cd /dev/fd/;ls -Al`\n\n同样使用exec命令可以创建新的文件描述符：\n```\nzsh\nexec 3>somefile\n# 先进入目录，再查看，否则你可能不能得到正确的结果，然后再回到上一次的目录\ncd /dev/fd/;ls -Al;cd -\n# 注意下面的命令>与&之间不应该有空格，如果有空格则会出错\necho \"this is test\" >&3\ncat somefile\nexit```\n\n---\n**关闭文件描述符**\n如上面我们打开的3号文件描述符，可以使用如下操作将它关闭：\n```\nexec 3>&-\ncd /dev/fd;ls -Al;cd ```\n\n---\n**完全屏蔽命令的输出**\n在 Linux 中有一个被成为“黑洞”的设备文件,所以导入它的数据都将被“吞噬”。\n在类 UNIX 系统中，**/dev/null**，或称空设备，是一个特殊的设备文件，它通常被用于丢弃不需要的输出流，或作为用于输入流的空文件，这些操作通常由重定向完成。读取它则会立即得到一个**EOF**。\n我们可以利用设个/dev/null屏蔽命令的输出：\n`cat Documents/test.c nefile 1>/dev/null 2>&1`\n上面这样的操作将使你得不到任何输出结果。\n\n\n---\n\n---\n# 网络类\n\n## wget递归下载整个网站  \n\nwget加上参数之后，即可成为相当强大的下载工具。\n```\nwget -r -p -np -k http://xxx.com/xxx\n\n-r,  --recursive（递归）指定使用递归下载\n-k,  --convert-links（转换链接）将下载的HTML页面中的链接转换为相对链接即本地链接\n-p,  --page-requisites（页面必需元素）下载所有的图片等页面显示所需的内容\n-np, --no-parent（不追溯至父级）\n-nc,   （断点续传）\n-o,    （日志）```\n\n---\n## axel高速下载\naxel是Linux下一个不错的HTTP/ftp高速下载工具。支持多线程下载、断点续传，且可以从多个地址或者从一个地址的多个连接来下载同一个文件。适合网速不给力时多线程下载提高下载速度。比如在国内VPS或服务器上下载lnmp一键安装包用Axel就比wget快。\n\n如下载lnmp安装包指定10个线程，保存到/tmp/中：\n```\naxel -n 10 -o /tmp/ http://www.linuxde.net/lnmp.tar.gz```\n\n---\n## 监听流量              \n### iftop\n官方网站：http://www.ex-parrot.com/~pdw/iftop/\n安装：\n**源码安装**：\n```\nyum install flex byacc  libpcap ncurses ncurses-devel libpcap-devel  #安装依赖\n或\napt-get install flex byacc  libpcap0.8 libncurses5   #安装依赖\n\n#编译之前确保已安装好了make、gcc、autoconf等。\nwget http://www.ex-parrot.com/pdw/iftop/download/iftop-0.17.tar.gz\ntar zxvf iftop-0.17.tar.gz\ncd iftop-0.17\n./configure\nmake && make install```\n\n**仓库源安装**：\nDebian/Ubuntu系统：`apt-get install iftop`\nCentos/Redhat系统：[安装EPEL源](https://www.vpser.net/manage/centos-rhel-linux-third-party-source-epel.html)，然后`yum install iftop`安装\n\n**使用**：`iftop`或`iftop -i eth0 -n -p`\n\n---\n### nethogs\n`nethogs eth0`\n\n---\n## 网页命令行阅读器\n`w3m 【网址】`    网页命令行方式阅读，对于没有桌面环境但在需要判断网页服务是否正常时非常有用。\n\nlinks阅读html文件,只显示链接\n`links [选项] [URL]`\n例：links www.baidu.com\n\n---\n## 禁ping （禁用ICMP协议）\n```\n“echo \"1\" >/proc/sys/net/ipv4/icmp_echo_ignore_all” ```\n不能vi编辑，1为禁止ping命令，0为允许ping命令\n\n---\n**文字接口数据包捕获器**:\n`tapdump [-AennqX] [-i 接口] [-w 存储文件名] [-c 次数] \\ [-r 文件] [所要摘取的数据包数据格式]`\n\n**图形接口数据包捕获器**：Wireshark\n`yum install wireshark wireshark-gnome`\n\n---\n## 屏幕共享（局域网，公网貌似不行）\n连接的两台电脑（也可多台）命令行显示是实时同步的，两边都可以操作。\n可能要先安装:**screen**\n```\nscreen -S foo 创建会话\nscreen -x foo 加入会话\nexit退出```\n\n---\n**即时通讯软件**： pidgin（gaim的延伸）\n`yum install pidgin`\n\n---\n\n\n\n\n\n\n\n\n","slug":"系统管理-2016-11-25-Linux常用命令","published":1,"updated":"2016-12-12T09:07:30.991Z","_id":"ciwlrsjom003td8pkcmplphcu","comments":1,"layout":"post","photos":[],"link":"","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"系统管理类\"><a href=\"#系统管理类\" class=\"headerlink\" title=\"系统管理类\"></a>系统管理类</h1><h2 id=\"分析空间大小\"><a href=\"#分析空间大小\" class=\"headerlink\" title=\"分析空间大小\"></a>分析空间大小</h2><p>分析空间大小（根目录下个文件夹大小）:<code>du -sh /*</code></p>\n<hr>\n<h2 id=\"定时任务\"><a href=\"#定时任务\" class=\"headerlink\" title=\"定时任务\"></a>定时任务</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">crontab status                <span class=\"comment\">#crontab 状态 </span></div><div class=\"line\">crontab -e                    <span class=\"comment\">#编辑配置文件</span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond start     <span class=\"comment\">#启动服务 </span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond stop      <span class=\"comment\">#关闭服务 </span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond restart   <span class=\"comment\">#重启服务 </span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond reload    <span class=\"comment\">#重新载入配置</span></div></pre></td></tr></table></figure>\n<p>格式：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">*<span class=\"regexp\">/25 * * * * /</span>opt<span class=\"regexp\">/xxx/</span>xxx<span class=\"regexp\">/restart.sh</span></div></pre></td></tr></table></figure></p>\n<p><strong>crontab文件的含义</strong>：用户所建立的crontab文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，<br>格式如下： <strong>minute hour day month week command</strong> 顺序：<strong>分 时 日 月 周 </strong></p>\n<ul>\n<li><strong>minute</strong>： 表示分钟，可以是从0到59之间的任何整数。</li>\n<li><strong>hour</strong>：表示小时，可以是从0到23之间的任何整数。 </li>\n<li><strong>day</strong>：表示日期，可以是从1到31之间的任何整数。 </li>\n<li><strong>month</strong>：表示月份，可以是从1到12之间的任何整数。 </li>\n<li><strong>week</strong>：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。 </li>\n<li><strong>command</strong>：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。 </li>\n</ul>\n<p>可以使用以下特殊字符：<br><strong>星号（*）</strong>：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。<br><strong>逗号（,）</strong>：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”<br><strong>中杠（-）</strong>：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”<br><strong>正斜线（/）</strong>：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。</p>\n<hr>\n<h2 id=\"命令执行\"><a href=\"#命令执行\" class=\"headerlink\" title=\"命令执行\"></a>命令执行</h2><p>顺序执行多条命令可以用<code>;</code>来隔开<strong>（即使前面一条命令没有正确执行，后面的命令也会执行）</strong></p>\n<p><code>&amp;&amp;</code>实现选择性执行的，它<strong>表示如果前面的命令执行结果返回0(前一条命令正确执行)，才执行后面的，否则不执行</strong>（不是表示终端输出的内容，而是表示命令执行状态的结果），用<code>echo $?</code>环境变量可以查看上一次命令的执行结果。</p>\n<p>shell中的<code>||</code>除了用于表示逻辑与和或之外，还可以实现命令执行顺序的简单控制。<code>||</code>是与<code>&amp;&amp;</code>相反的控制效果，当上一条命令执行结果为<strong>≠0($?≠0)</strong>时(上一条命令执行失败)，则执行它后面的命令。</p>\n<hr>\n<h2 id=\"后台运行命令\"><a href=\"#后台运行命令\" class=\"headerlink\" title=\"后台运行命令\"></a>后台运行命令</h2><ul>\n<li>1.<code>screen [command]</code></li>\n<li>2.<code>[command] &amp;</code></li>\n<li>3.<code>nohup [command] &amp;</code></li>\n<li><strong>nohup命令</strong>：如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不会结束，那么可以使用nohup命令。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂起的意思( no hang up)。 　　<br>该命令的一般形式为：<code>nohup command &amp;</code> 　　使用nohup命令提交作业<br>如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件： 　　<br><code>nohup command &gt; myout.file 2&gt;&amp;1 &amp;</code><br>在上面的例子中，输出被重定向到myout.file文件中。 　　<br>使用 <code>jobs</code> 查看任务。 　　<br>使用 <code>fg %n</code>　关闭。 　　</li>\n</ul>\n<hr>\n<h2 id=\"开机启动项\"><a href=\"#开机启动项\" class=\"headerlink\" title=\"开机启动项\"></a>开机启动项</h2><p>交互界面的开机启动项：<code>ntsysv</code>(centos)<br><strong>--back</strong>：在互动式界面里，显示Back钮，而非cancel钮。<br>使用空格键选择或者取消选项！</p>\n<hr>\n<h2 id=\"包管理\"><a href=\"#包管理\" class=\"headerlink\" title=\"包管理\"></a>包管理</h2><h3 id=\"二进制包\"><a href=\"#二进制包\" class=\"headerlink\" title=\"二进制包\"></a>二进制包</h3><p>二进制包的安装比较简单，我们需要做的只是将从网络上下载的二进制包解压后放到合适的目录，然后将包含可执行的主程序文件的目录添加进<strong>PATH环境变量</strong>即可。</p>\n<h3 id=\"Debian-Ubuntu-apt\"><a href=\"#Debian-Ubuntu-apt\" class=\"headerlink\" title=\"Debian/Ubuntu(apt)\"></a>Debian/Ubuntu(apt)</h3><p>搜索软件包：<code>apt-cache search softname</code></p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>install</td>\n<td style=\"text-align:left\">其后加上软件包名，用于安装一个软件包</td>\n</tr>\n<tr>\n<td>update</td>\n<td style=\"text-align:left\">从软件源镜像服务器上下载/更新用于更新本地软件源的软件包列表</td>\n</tr>\n<tr>\n<td>upgrade</td>\n<td style=\"text-align:left\">升级本地可更新的全部软件包，但存在依赖问题时将不会升级，通常会在更新之前执行一次update</td>\n</tr>\n<tr>\n<td>dist-upgrade</td>\n<td style=\"text-align:left\">解决依赖关系并升级(存在一定危险性)</td>\n</tr>\n<tr>\n<td>remove</td>\n<td style=\"text-align:left\">移除已安装的软件包，包括与被移除软件包有依赖关系的软件包，但不包含软件包的配置文件</td>\n</tr>\n<tr>\n<td>autoremove</td>\n<td style=\"text-align:left\">移除之前被其他软件包依赖，但现在不再被使用的软件包</td>\n</tr>\n<tr>\n<td>purge</td>\n<td style=\"text-align:left\">与remove相同，但会完全移除软件包，包含其配置文件</td>\n</tr>\n<tr>\n<td>clean</td>\n<td style=\"text-align:left\">移除下载到本地的已经安装的软件包，默认保存在/var/cache/apt/archives/</td>\n</tr>\n<tr>\n<td>autoclean</td>\n<td style=\"text-align:left\">移除已安装的软件的旧版本软件包</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-y</td>\n<td>自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>模拟安装</td>\n</tr>\n<tr>\n<td>-q</td>\n<td>静默安装方式，指定多个q或者-q=#,#表示数字，用于设定静默级别，这在你不想要在安装软件包时屏幕输出过多时很有用</td>\n</tr>\n<tr>\n<td>-f</td>\n<td>修复损坏的(已安装的所有软件包)依赖关系</td>\n</tr>\n<tr>\n<td>-d</td>\n<td>只下载不安装</td>\n</tr>\n<tr>\n<td>–reinstall</td>\n<td>重新安装已经安装但可能存在问题的软件包</td>\n</tr>\n<tr>\n<td>–install-suggests</td>\n<td>同时安装APT给出的建议安装的软件包</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p><strong>dpkg常用参数介绍</strong>：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-i</td>\n<td>安装指定deb包</td>\n</tr>\n<tr>\n<td>-R</td>\n<td>后面加上目录名，用于安装该目录下的所有deb安装包</td>\n</tr>\n<tr>\n<td>-r</td>\n<td>remove，移除某个已安装的软件包</td>\n</tr>\n<tr>\n<td>-I</td>\n<td>显示deb包文件的信息</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>显示已安装软件的信息</td>\n</tr>\n<tr>\n<td>-S</td>\n<td>搜索已安装的软件包</td>\n</tr>\n<tr>\n<td>-L</td>\n<td>显示已安装软件包的目录信息</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"Centos-Redhat-yum\"><a href=\"#Centos-Redhat-yum\" class=\"headerlink\" title=\"Centos\\Redhat(yum)\"></a>Centos\\Redhat(yum)</h3><table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>install</td>\n<td>安装rpm软件包；</td>\n</tr>\n<tr>\n<td>update</td>\n<td>更新rpm软件包；</td>\n</tr>\n<tr>\n<td>check-update</td>\n<td>检查是否有可用的更新rpm软件包；</td>\n</tr>\n<tr>\n<td>remove</td>\n<td>删除指定的rpm软件包；</td>\n</tr>\n<tr>\n<td>list</td>\n<td>显示软件包的信息；</td>\n</tr>\n<tr>\n<td>search</td>\n<td>检查软件包的信息；</td>\n</tr>\n<tr>\n<td>info</td>\n<td>显示指定的rpm软件包的描述信息和概要信息；</td>\n</tr>\n<tr>\n<td>clean</td>\n<td>清理yum过期的缓存；</td>\n</tr>\n<tr>\n<td>shell</td>\n<td>进入yum的shell提示符；</td>\n</tr>\n<tr>\n<td>resolvedep</td>\n<td>显示rpm软件包的依赖关系；</td>\n</tr>\n<tr>\n<td>localinstall</td>\n<td>安装本地的rpm软件包；</td>\n</tr>\n<tr>\n<td>localupdate</td>\n<td>显示本地rpm软件包进行更新；</td>\n</tr>\n<tr>\n<td>deplist</td>\n<td>显示rpm软件包的所有依赖关系。</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-h</td>\n<td>显示帮助信息；</td>\n</tr>\n<tr>\n<td>-y</td>\n<td>对所有的提问都回答“yes”；</td>\n</tr>\n<tr>\n<td>-c</td>\n<td>指定配置文件；</td>\n</tr>\n<tr>\n<td>-q</td>\n<td>安静模式；</td>\n</tr>\n<tr>\n<td>-v</td>\n<td>详细模式；</td>\n</tr>\n<tr>\n<td>-d</td>\n<td>设置调试等级（0-10）；</td>\n</tr>\n<tr>\n<td>-e</td>\n<td>设置错误等级（0-10）；</td>\n</tr>\n<tr>\n<td>-R</td>\n<td>设置yum处理一个命令的最大等待时间；</td>\n</tr>\n<tr>\n<td>-C</td>\n<td>完全从缓存中运行，而不去下载或者更新任何头文件。</td>\n</tr>\n</tbody>\n</table>\n<p>自动搜索最快镜像插件：<code>yum install yum-fastestmirror</code><br>安装yum图形窗口插件：<code>yum install yumex</code><br>查看可能批量安装的列表：<code>yum grouplist</code></p>\n<p><strong>安装 </strong><br><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> <span class=\"comment\">#全部安装 </span></div><div class=\"line\">yum <span class=\"keyword\">install</span> package1 <span class=\"comment\">#安装指定的安装包package1 </span></div><div class=\"line\">yum groupinsall group1 <span class=\"comment\">#安装程序组group1</span></div></pre></td></tr></table></figure></p>\n<p><strong>更新和升级 </strong><br><figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum update <span class=\"comment\">#全部更新 </span></div><div class=\"line\">yum update package1 <span class=\"comment\">#更新指定程序包package1 </span></div><div class=\"line\">yum<span class=\"built_in\"> check-update </span><span class=\"comment\">#检查可更新的程序 </span></div><div class=\"line\">yum upgrade package1 <span class=\"comment\">#升级指定程序包package1 </span></div><div class=\"line\">yum groupupdate group1 <span class=\"comment\">#升级程序组group1</span></div></pre></td></tr></table></figure></p>\n<p><strong>查找和显示 </strong><br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum info package1 <span class=\"comment\">#显示安装包信息package1 </span></div><div class=\"line\">yum <span class=\"built_in\">list</span> <span class=\"comment\">#显示所有已经安装和可以安装的程序包 </span></div><div class=\"line\">yum <span class=\"built_in\">list</span> package1 <span class=\"comment\">#显示指定程序包安装情况package1 </span></div><div class=\"line\">yum groupinfo group1 <span class=\"comment\">#显示程序组group1信息</span></div><div class=\"line\">yum search <span class=\"built_in\">string</span> 根据关键字<span class=\"built_in\">string</span>查找安装包 删除程序 </div><div class=\"line\">yum remove | erase package1 <span class=\"comment\">#删除程序包package1 </span></div><div class=\"line\">yum groupremove group1 <span class=\"comment\">#删除程序组group1 </span></div><div class=\"line\">yum deplist package1 <span class=\"comment\">#查看程序package1依赖情况</span></div></pre></td></tr></table></figure></p>\n<p><strong>清除缓存 </strong><br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">yum</span> clean packages <span class=\"comment\">#清除缓存目录下的软件包 </span></div><div class=\"line\">yum clean headers <span class=\"comment\">#清除缓存目录下的 headers </span></div><div class=\"line\">yum clean oldheaders <span class=\"comment\">#清除缓存目录下旧的 headers</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>yum 软件组</strong><br>列出软件组<code>yum grouplist</code> 已安装的软件组<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165538270.png\" alt=\"\"><br>未安装的软件组<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165623242.png\" alt=\"\"><br><strong>软件组信息yum groupinfo “软件组名（英文双引号）”</strong></p>\n<p>主要被安装的软件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165714876.png\" alt=\"\"><br>额外可选的软件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165747860.png\" alt=\"\"><br><strong>安装某个软件组yum groupinstall “软件组名（英文双引号）”</strong></p>\n<hr>\n<p><strong>RPM常用参数介绍</strong>：<br>|参数|说明|<br>|–|–|<br>|-a|查询所有套件； |<br>|-b&lt;完成阶段&gt;&lt;套件档&gt;+或-t &lt;完成阶段&gt;&lt;套件档&gt;+|设置包装套件的完成阶段，并指定套件档的文件名称； |<br>|-c|只列出组态配置文件，本参数需配合”-l”参数使用； |<br>|-d|只列出文本文件，本参数需配合”-l”参数使用； |<br>|-e&lt;套件档&gt;或–erase&lt;套件档&gt;|删除指定的套件； |<br>|-f&lt;文件&gt;+|查询拥有指定文件的套件； |<br>|-h或–hash|套件安装时列出标记； |<br>|-i|显示套件的相关信息； |<br>|-i&lt;套件档&gt;或–install&lt;套件档&gt;|安装指定的套件档； |<br>|-l|显示套件的文件列表； |<br>|-p&lt;套件档&gt;+|查询指定的RPM套件档； |<br>|-q|使用询问模式，当遇到任何问题时，rpm指令会先询问用户； |<br>|-R|显示套件的关联性信息； |<br>|-s|显示文件状态，本参数需配合”-l”参数使用； |<br>|-U&lt;套件档&gt;或–upgrade&lt;套件档&gt;|升级指定的套件档； |<br>|-v|显示指令执行过程； |<br>|-vv|详细显示指令执行过程，便于排错。|</p>\n<hr>\n<h2 id=\"dd命令\"><a href=\"#dd命令\" class=\"headerlink\" title=\"dd命令\"></a>dd命令</h2><p><code>dd --help</code>或是<code>info dd</code></p>\n<p>输入或输出<br><code>dd if=[STDIN] of=[STDOUT]</code><br>例：<br><code>dd if=ubuntu-13.10-desktop-amd64.iso of=/dev/sdb2</code><strong>把光盘写进磁盘</strong><br>当然你可以拿这个来方便的拷贝光碟(注意，你的光碟是标准的 iso9660格式才可以这么做！)</p>\n<p><code>dd if=/dev/cdrom of=cdrom.iso</code><strong>把光驱内容保存为iso镜像文件</strong></p>\n<p>同理，要把一张磁盘的内容拷贝到另一张磁盘上，利用/tmp作为临时存储区。把源盘插入驱动器中，输入下述命令：<br><code>dd if =/dev/xxx of = /tmp/tmpfile</code><br>拷贝完成后，将源盘从驱动器中取出，把目标盘插入，输入命令：<br><code>dd if = /tmp/tmpfile of =/dev/xxx</code><br>软盘拷贝完成后，应该将临时文件删除：<br><code>rm /tmp/tmpfile</code></p>\n<p>如果两个设备能同时工作：<code>dd if =/dev/xxx of = /dev/xxx</code></p>\n<ul>\n<li><strong>/dev/null</strong> 它是空设备，也称为位桶（bit bucket）。任何写入它的输出都会被抛弃。如果不想让消息以标准输出显示或写入文件，那么可以将消息重定向到位桶。</li>\n<li><strong>/dev/zero</strong>该设备无穷尽地提供0，可以使用任何你需要的数目——设备提供的要多的多。他可以用于向设备或文件写入字符串0。<br><code>dd if=/dev/zero of=./test.txt bs=1k count=1</code><br><strong>/dev/zero</strong>还可用于擦除磁盘数据</li>\n</ul>\n<hr>\n<h2 id=\"时区时间\"><a href=\"#时区时间\" class=\"headerlink\" title=\"时区时间\"></a>时区时间</h2><p><strong>时区修改</strong><br><code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code> 提示覆盖的就覆盖掉<br><code>date</code>  看到有CST字样为中国标准时间; <code>date -R</code>  看到+0800  是东八区</p>\n<p><strong>修改硬件时钟</strong>（每次开机都是从硬件读取时间的，首先硬件时间要正确）<br><code>hwclock --show</code>   显示当前硬件时间<br><code>hwclock --set --date=&quot;10/28/16 10:04:00&quot;</code>   （月/日/年 时:分:秒）</p>\n<ul>\n<li><p>1.<strong>硬件时钟</strong>与<strong>系统时钟</strong>同步<br><strong>hc</strong>代表硬件时间，<strong>sys</strong>代表系统时间，即用硬件时钟同步到系统时钟<br><code>hwclock --hctosys</code> 或者<code>clock --hctosys</code><br><code>date</code>    #查看当前系统时间</p>\n</li>\n<li><p>2.<strong>系统时钟</strong>和<strong>硬件时钟</strong>同步（一般是系统自动同步Internet时间后才把最新时间同步到硬件中）<br><code>hwclock --systohc</code>或者<code>clock --systohc</code>  即用系统时钟同步到硬件时钟</p>\n</li>\n</ul>\n<p>注：<strong>tzselect</strong> 命令也可以交互界面选择修改，但最后还要执行一个提示设置时区的命令，并写入环境变量中，重启才能生效。</p>\n<hr>\n<hr>\n<h1 id=\"文件、目录类\"><a href=\"#文件、目录类\" class=\"headerlink\" title=\"文件、目录类\"></a>文件、目录类</h1><h2 id=\"cd\"><a href=\"#cd\" class=\"headerlink\" title=\"cd\"></a>cd</h2><p><strong>cd</strong> ：进入用户主目录；<br><strong>cd ~</strong> ：进入用户主目录；<br><strong>cd -</strong> ：返回进入此目录之前所在的目录；<br><strong>cd !$</strong> ： 把上个命令的参数作为cd参数使用</p>\n<hr>\n<h2 id=\"权限设置\"><a href=\"#权限设置\" class=\"headerlink\" title=\"权限设置\"></a>权限设置</h2><h3 id=\"数字设定法\"><a href=\"#数字设定法\" class=\"headerlink\" title=\"数字设定法\"></a>数字设定法</h3><p><strong>0表示没有权限，1表示可执行权限， 2表示可写权限，4表示可读权限</strong>，然后将其相加。所以数字属性的格式应为3个从0到7的八进制数，其顺序是（<strong>u</strong>）（<strong>g</strong>）（<strong>o</strong>）。</p>\n<p>例如，如果想让某个文件的属主有“读/写”二种权限，需要把4（可读）+2（可写）＝6（读/写）。<br>数字设定法的一般形式为：<br>语法：<code>chmod [mode] 文件名</code><br>例如：chmod 755 mm.txt</p>\n<h3 id=\"文字设定法\"><a href=\"#文字设定法\" class=\"headerlink\" title=\"文字设定法\"></a>文字设定法</h3><p>语法：<code>chmod [who] [+ | - | =] [mode] 文件名</code><br>命令中各选项的含义为：<br>操作对象who可是下述字母中的任一个或者它们的组合：</p>\n<ul>\n<li>u 表示“用户（user）”，即文件或目录的所有者。</li>\n<li>g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。</li>\n<li>o 表示“其他（others）用户”。</li>\n<li>a 表示“所有（all）用户”。它是系统默认值。<br>操作符号可以是：</li>\n<li>+ 添加某个权限。</li>\n<li>- 取消某个权限。</li>\n<li>= 赋予给定权限并取消其他所有权限（如果有的话）。</li>\n</ul>\n<p>设置 mode 所表示的权限可用下述字母的任意组合：</p>\n<ul>\n<li>r 可读。</li>\n<li>w 可写。</li>\n<li>x 可执行。</li>\n<li>X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。</li>\n<li>s 在文件执行时把进程的属主或组ID置为该文件的文件属主。</li>\n</ul>\n<p>方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。</p>\n<ul>\n<li>t 保存程序的文本到交换设备上。</li>\n<li>u 与文件属主拥有一样的权限。</li>\n<li>g 与和文件属主同组的用户拥有一样的权限。</li>\n<li>o 与其他用户拥有一样的权限。</li>\n</ul>\n<p><strong>文件名</strong>：以空格分开的要改变权限的文件列表，支持通配符。</p>\n<hr>\n<h2 id=\"CUT命令\"><a href=\"#CUT命令\" class=\"headerlink\" title=\"CUT命令\"></a>CUT命令</h2><ul>\n<li>-b：仅显示行中指定直接范围的内容； </li>\n<li>-c：仅显示行中指定范围的字符；</li>\n<li>-d：指定字段的分隔符，默认的字段分隔符为“TAB”； </li>\n<li>-f：显示指定字段的内容； </li>\n<li>-n：与“-b”选项连用，不分割多字节字符； </li>\n<li>--complement：补足被选择的字节、字符或字段； </li>\n<li>--out-delimiter=&lt;字段分隔符&gt;：指定输出内容是的字段分割符； </li>\n<li>--help：显示指令的帮助信息； </li>\n<li>--version：显示指令的版本信息。</li>\n</ul>\n<p>打印/etc/passwd文件中以<strong>:</strong>为分隔符的第1个字段和第6个字段分别表示用户名和其家目录：<code>cut /etc/passwd -d &#39;:&#39; -f 1,6</code><br>前五个（包含第五个）：<code>cut /etc/passwd -c -5</code><br>前五个之后的（包含第五个）：<code>cut /etc/passwd -c 5-</code><br>第五个：<code>cut /etc/passwd -c 5</code><br>2到5之间的（包含第五个）： <code>cut /etc/passwd -c 2-5</code></p>\n<hr>\n<h2 id=\"查找近期修改的文件\"><a href=\"#查找近期修改的文件\" class=\"headerlink\" title=\"查找近期修改的文件\"></a>查找近期修改的文件</h2><p>比如按名字查找一个文件，可以用<code>find / -name filename</code><br>按时间查找也有参数</p>\n<ul>\n<li><strong>-atime</strong> 访问时间</li>\n<li><strong>-ctime</strong> 改变状态的时间</li>\n<li><strong>-mtime</strong>修改的时间。<br>这里的时间是以24小时为单位的。</li>\n</ul>\n<p><code>find . -name &#39;*.html&#39; -type f -mmin -30</code>：当前目录最近30分钟内修改过的html文件<br><code>find . -name &#39;*.html&#39; -type f -mmin -30 -ls</code>：最近30分钟内修改过的文件，的详细情况<br><code>find ./ -mtime 0</code>：返回最近24小时内修改过的文件。<br><code>find ./ -mtime 1</code> ： 返回的是前48~24小时修改过的文件。而不是48小时以内修改过的文件。<br><code>find . -type f -mtime +1</code>：最近1天前（2天内）修改过的常规文件<br><code>find . -mtime -2 -type f</code>：48小时以内修改过的文件</p>\n<p>那怎么返回10天内修改过的文件？find支持表达式关系运算，所以可以把最近几天的数据一天天的加起来：<br><code>find ./ -mtime 0 -o -mtime 1 -o -mtime 2</code> 虽然比较土，但也算是个方法了。</p>\n<p>参考：<a href=\"http://man.linuxde.net/find\" target=\"_blank\" rel=\"external\">http://man.linuxde.net/find</a></p>\n<hr>\n<h2 id=\"echo\"><a href=\"#echo\" class=\"headerlink\" title=\"echo\"></a>echo</h2><p><strong>echo “ok” &gt; test.txt</strong> ：用ok字符覆盖掉test.txt内容，<strong>&gt;表示追加并覆盖</strong>的意思。<br><strong>echo “ok” &gt;&gt; test.txt</strong>：向test.txt文件追加OK字符，不覆盖原文件里的内容。<strong>&gt;&gt;表示尾行追加</strong>。</p>\n<hr>\n<h2 id=\"计算MD5\"><a href=\"#计算MD5\" class=\"headerlink\" title=\"计算MD5\"></a>计算MD5</h2><p>计算MD5：<code>md5sum filename</code></p>\n<hr>\n<h2 id=\"文件上下传\"><a href=\"#文件上下传\" class=\"headerlink\" title=\"文件上下传\"></a>文件上下传</h2><h3 id=\"SCP\"><a href=\"#SCP\" class=\"headerlink\" title=\"SCP\"></a>SCP</h3><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scp <span class=\"regexp\">/home/</span>git<span class=\"regexp\">/.ssh/</span>id_rsa.pub <span class=\"string\">gitServer:</span><span class=\"regexp\">/home/</span>git</div></pre></td></tr></table></figure>\n<h3 id=\"lrzsz-Windows-Linux\"><a href=\"#lrzsz-Windows-Linux\" class=\"headerlink\" title=\"lrzsz(Windows-Linux)\"></a>lrzsz(Windows-Linux)</h3><p>rz  上传文件<br>sz  下载文件</p>\n<h3 id=\"ncftp\"><a href=\"#ncftp\" class=\"headerlink\" title=\"ncftp\"></a>ncftp</h3><p>另外有两个常用的ftp工具<strong>ncftpget</strong>和<strong>ncftpput</strong>，可以实现<strong>后台的ftp上传和下载</strong>，这样我就可以利用这些命令在后台上传和下载文件了。</p>\n<hr>\n<h3 id=\"man手册转为PDF\"><a href=\"#man手册转为PDF\" class=\"headerlink\" title=\"man手册转为PDF\"></a>man手册转为PDF</h3><p>把man的帮助转换成PDF文档：<code>man -t [command] | ps2pdf - filename.pdf</code></p>\n<hr>\n<h2 id=\"管道符、awk等高级控制\"><a href=\"#管道符、awk等高级控制\" class=\"headerlink\" title=\"管道符、awk等高级控制\"></a>管道符、awk等高级控制</h2><p>“<strong>|</strong>”管道符是左边命令的标准输出(stdout)给右边命令作为标准输入（stdin）;<br>“<strong>&lt;</strong>”是右边文件名指定的文件内容读入为左边命令的标准输入（stdin）；<br>“<strong>&gt;</strong>”是左边命令的输出覆盖写到右边指定的文件中。</p>\n<p><code>ps aux |grep XXX |awk &#39;{print $11}&#39; | grep -v &#39;grep&#39; | wc -l</code></p>\n<ul>\n<li><strong>grep -v ‘grep’</strong>  过滤带grep的部分 取反</li>\n<li><strong>wc -l </strong>          统计行数</li>\n<li><strong>sort -nr </strong>       排序</li>\n</ul>\n<hr>\n<p><code>grep -rnI &quot;myleolan&quot; ~</code></p>\n<ul>\n<li>-r 参数表示递归搜索子目录中的文件,</li>\n<li>-n表示打印匹配项行号，</li>\n<li>-I表示忽略二进制文件。<br>查看环境变量中以”leolan”结尾的字符串：<code>export | grep &quot;.*leolan$&quot;</code><br>其中<code>$</code>就表示一行的末尾。</li>\n</ul>\n<hr>\n<p><strong>wc</strong> 命令用于统计并输出一个文件中行、单词和字节的数目<br>分别只输出行数、单词数、字节数、字符数和输入文本中最长一行的字节数：<br>行数：<code>wc -l /etc/passwd</code><br>单词数：<code>wc -w /etc/passwd</code><br>字节数：<code>wc -c /etc/passwd</code><br>字符数：<code>wc -m /etc/passwd</code><br>最长行字节数：<code>wc -L /etc/passwd</code></p>\n<p>注意：对于西文字符来说，一个字符就是一个字节，但对于中文字符一个汉字是大于2个字节的，具体数目是由字符编码决定的</p>\n<hr>\n<p><strong>sort </strong>排序命令<br>将输入按照一定方式排序，然后再输出,它支持的排序有按字典排序,数字排序，按月份排序，随机排序，反转排序，指定特定字段进行排序等等。<br>默认为字典排序：<code>cat /etc/passswd | sort</code><br>反转排序：<code>cat /etc/passwd | sort -r</code><br>按特定字段排序：<code>cat /etc/passwd | sort -t&#39;:&#39; -k 3 -n</code></p>\n<p>上面的<strong>-t</strong>参数用于指定字段的分隔符，这里是以<strong>“:”</strong>作为分隔符；<br><strong>-k</strong> 字段号用于指定对哪一个字段进行排序。这里/etc/passwd文件的第三个字段为数字，默认情况下是一字典序排序的，如果要按照数字排序就要加上<strong>-n</strong>参数</p>\n<hr>\n<p><strong>uniq</strong> 去重命令<br>uniq命令可以用于过滤或者输出重复行。<br>  ● 过滤重复行<br>我们可以使用<strong>history</strong>命令查看最近执行过的命令（实际为读取<strong>${SHELL}_history</strong>文件），那么你可能就会要想去掉命令后面的参数然后去掉重复的命令：<code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | uniq</code></p>\n<p>然后经过层层过滤，你会发现确是只输出了执行的命令那一列，不过去重效果好像不明显，仔细看你会发现它趋势去重了，只是不那么明显，之所以不明显是因为uniq命令只能去连续重复的行，不是全文去重，所以要达到预期效果，我们先排序：<br><code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort | uniq</code><br>或者<code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort -u</code></p>\n<p>  ● 输出重复行<br>输出重复过的行（重复的只输出一个）及重复次数：<br><code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort | uniq -dc</code><br>输出所有重复的行：<br><code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort | uniq -D</code></p>\n<hr>\n<p><strong>tr</strong> 命令<br>tr 命令可以用来删除一段文本信息中的某些文字。或者将其进行转换。<br>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-d</td>\n<td>删除和set1匹配的字符，注意不是全词匹配也不是按字符顺序匹配</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>去除set1指定的在输入文本中连续并重复的字符</td>\n</tr>\n</tbody>\n</table>\n<p>删除 “hello shiyanlou” 中所有的’o’,’l’,’h’：<code>echo &#39;hello shiyanlou&#39; | tr -d &#39;olh&#39;</code><br>将”hello” 中的ll,去重为一个l：<code>echo &#39;hello&#39; | tr -s &#39;l&#39;</code><br>将输入文本，全部转换为大写或小写输出：<code>cat /etc/passwd | tr &#39;[:lower:]&#39; &#39;[:upper:]&#39;</code><br>上面的<code>&#39;[:lower:]&#39;</code> <code>&#39;[:upper:]&#39;</code>你也可以简单的写作<code>&#39;[a-z]&#39;</code> <code>&#39;[A-Z]&#39;</code>,当然反过来将大写变小写也是可以的</p>\n<hr>\n<p><strong>col </strong>命令<br>col 命令可以将Tab换成对等数量的空格建，或反转这个操作。<br>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-x</td>\n<td>将Tab转换为空格</td>\n</tr>\n<tr>\n<td>-h</td>\n<td>将空格转换为Tab（默认选项）</td>\n</tr>\n</tbody>\n</table>\n<p>操作举例：<br>查看 /etc/protocols 中的不可见字符，可以看到很多 ^I ，这其实就是 Tab 转义成可见字符的符号:<br><code>cat -A /etc/protocols</code><br>使用 col -x 将 /etc/protocols 中的 Tab 转换为空格,然后再使用 cat 查看，你发现 ^I 不见了:<br><code>cat /etc/protocols | col -x | cat -A</code></p>\n<hr>\n<p><strong>join</strong>命令<br>学过数据库的用户对这个应该不会陌生，这个命令就是用于将两个文件中包含相同内容的那一行合并在一起。</p>\n<p>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-t</td>\n<td>指定分隔符，默认为空格</td>\n</tr>\n<tr>\n<td>-i</td>\n<td>忽略大小写的差异</td>\n</tr>\n<tr>\n<td>-1</td>\n<td>指明第一个文件要用哪个字段来对比，默认对比第一个字段</td>\n</tr>\n<tr>\n<td>-2</td>\n<td>指明第二个文件要用哪个字段来对比，默认对比第一个字段</td>\n</tr>\n</tbody>\n</table>\n<p>操作举例：<br>创建两个文件<br><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'1 hello'</span> &gt; file1</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'1 shiyanlou'</span> &gt; file2</div><div class=\"line\"><span class=\"built_in\">join</span> file1 file2</div></pre></td></tr></table></figure></p>\n<p>将/etc/passwd与/etc/shadow两个文件合并，指定以<strong>‘:’</strong>作为分隔符<br><code>sudo join -t&#39;:&#39; /etc/passwd /etc/shadow</code><br>将/etc/passwd与/etc/group两个文件合并，指定以<strong>‘:’</strong>作为分隔符, 分别比对第4和第3个字段<br><code>sudo join -t&#39;:&#39; -1 4 /etc/passwd -2 3 /etc/group</code></p>\n<hr>\n<p><strong>paste</strong>命令<br>paste这个命令与join 命令类似，它是在不对比数据的情况下，简单地将多个文件合并一起，以Tab隔开。</p>\n<p>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-d</td>\n<td>指定合并的分隔符，默认为Tab</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>不合并到一行，每个文件为一行</td>\n</tr>\n</tbody>\n</table>\n<p>操作举例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">echo</span> hello &gt; file1</div><div class=\"line\"><span class=\"built_in\">echo</span> shiyanlou &gt; file2</div><div class=\"line\"><span class=\"built_in\">echo</span> www.shiyanlou.com &gt; file3</div><div class=\"line\">paste <span class=\"_\">-d</span> <span class=\"string\">':'</span> file1 file2 file3</div><div class=\"line\">paste <span class=\"_\">-s</span> file1 file2 file3</div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>xargs </strong>分割参数列表<br>xargs 是一条 UNIX 和类 UNIX 操作系统的常用命令。它的作用是将参数列表转换成小块分段传递给其他命令，以避免参数列表过长的问题。<br>这个命令在有些时候十分有用，特别是当用来处理产生大量输出结果的命令如 find，locate 和 grep 的结果，详细用法请参看 man 文档。<br><code>cut -d: -f1 &lt; /etc/passwd | sort | xargs echo</code><br>上面这个命令用于将/etc/passwd文件按<strong>:</strong>分割取第一个字段排序后，使用echo命令生成一个列表。</p>\n<hr>\n<p>命令行将<strong>图片转换为 ascii 字符</strong>查看的工具 aview/asciiview(黑白的)<br>彩色的：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install caca-utils</div><div class=\"line\">cacaview <span class=\"symbol\">&lt;pic_file&gt;</span></div><div class=\"line\">cacademo</div><div class=\"line\">cacafire</div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"重定向\"><a href=\"#重定向\" class=\"headerlink\" title=\"重定向\"></a>重定向</h2><p><strong>标准错误重定向</strong></p>\n<p>重定向标准输出到文件，这是一个很实用的操作，另一个很实用的操作是将标准错误重定向，标准输出和标准错误都被指向伪终端的屏幕显示，所以我们经常看到的一个命令的输出通常是同时包含了标准输出和标准错误的结果的。比如下面的操作：</p>\n<p>使用cat 命令同时读取两个文件，其中一个存在，另一个不存在<br><code>cat Documents/test.c hello.c</code><br>你可以看到除了正确输出了前一个文件的内容，还在末尾出现了一条错误信息<br>下面我们将输出重定向到一个文件，根据我们前面的经验，这里将在看不到任何输出了<br><code>cat Documents/test.c hello.c &gt; somefile</code></p>\n<p>这里依然出现了那条错误信息，这正是因为如我上面说的那样，标准输出和标准错误虽然都指向终端屏幕，实际它们并不一样。那有的时候我们就是要可以隐藏某些错误或者警告，那又该怎么做呢。这就需要用到我们前面讲的文件描述符了：</p>\n<p>将标准错误重定向到标准输出，再将标准输出重定向到文件，注意要将重定向到文件写到前面<br><code>cat Documents/test.c hello.c &gt;somefile  2&gt;&amp;1</code><br>或者只用bash提供的特殊的重定向符号”&amp;”将标准错误和标准输出同时重定向到文件<br><code>cat Documents/test.c hello.c &amp;&gt;somefilehell</code></p>\n<p>注意你应该在输出重定向文件<strong>描述符</strong>前加上<strong>&amp;</strong>,否则shell会当做重定向到一个文件名为1的文件中</p>\n<hr>\n<p><strong>tee命令</strong>同时重定向到多个文件<br>经常你可能还有这样的需求，除了将需要将输出重定向到文件之外也需要将信息打印在终端<strong>(打印终端的同时输出到文件)</strong>，那么你可以使用tee命令来实现：<br><code>echo &#39;hello shiyanlou&#39; | tee hello</code></p>\n<hr>\n<p><strong>永久重定向</strong></p>\n<p>前面的重定向操作都只是临时性的，即只对当前命令有效，那如何做到“永久”有效呢，比如在一个脚本中，你需要某一部分的命令的输出全部进行重定向，难道要让你在每个命令上面加上临时重定向的操作嘛，当然不需要，我们可以使用<strong>exec</strong>命令实现“永久”重定向。<strong>exec</strong>命令的作用是使用指定的命令替换当前的 Shell，及使用一个进程替换当前进程，或者指定新的重定向：</p>\n<p>先开启一个子 Shell:<code>zsh</code><br>使用exec替换当前进程的重定向，将标准输出重定向到一个文件:<code>exec 1&gt;somefile</code><br>后面你执行的命令的输出都将被重定向到文件中,直到你退出当前子shell，或取消exec的重定向（后面将告诉你怎么做）<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ls</div><div class=\"line\"><span class=\"keyword\">exit</span></div><div class=\"line\">cat somefile</div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>创建输出文件描述符</strong><br>默认在 Shell 中可以有9个打开的文件描述符，上面我们使用了也是它默认提供的0,1,2号文件描述符，另外我们还可以使用3-8的文件描述符，只是它们默认没有打开而已，你可以使用下面命令查看当前 Shell 进程中打开的文件描述符：<br><code>cd /dev/fd/;ls -Al</code></p>\n<p>同样使用exec命令可以创建新的文件描述符：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">zsh</div><div class=\"line\"><span class=\"built_in\">exec</span> 3&gt;somefile</div><div class=\"line\"><span class=\"comment\"># 先进入目录，再查看，否则你可能不能得到正确的结果，然后再回到上一次的目录</span></div><div class=\"line\"><span class=\"built_in\">cd</span> /dev/fd/;ls -Al;<span class=\"built_in\">cd</span> -</div><div class=\"line\"><span class=\"comment\"># 注意下面的命令&gt;与&amp;之间不应该有空格，如果有空格则会出错</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"this is test\"</span> &gt;&amp;3</div><div class=\"line\">cat somefile</div><div class=\"line\"><span class=\"built_in\">exit</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>关闭文件描述符</strong><br>如上面我们打开的3号文件描述符，可以使用如下操作将它关闭：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">exec</span> 3&gt;&amp;-</div><div class=\"line\"><span class=\"built_in\">cd</span> /dev/fd;ls -Al;<span class=\"built_in\">cd</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>完全屏蔽命令的输出</strong><br>在 Linux 中有一个被成为“黑洞”的设备文件,所以导入它的数据都将被“吞噬”。<br>在类 UNIX 系统中，<strong>/dev/null</strong>，或称空设备，是一个特殊的设备文件，它通常被用于丢弃不需要的输出流，或作为用于输入流的空文件，这些操作通常由重定向完成。读取它则会立即得到一个<strong>EOF</strong>。<br>我们可以利用设个/dev/null屏蔽命令的输出：<br><code>cat Documents/test.c nefile 1&gt;/dev/null 2&gt;&amp;1</code><br>上面这样的操作将使你得不到任何输出结果。</p>\n<hr>\n<hr>\n<h1 id=\"网络类\"><a href=\"#网络类\" class=\"headerlink\" title=\"网络类\"></a>网络类</h1><h2 id=\"wget递归下载整个网站\"><a href=\"#wget递归下载整个网站\" class=\"headerlink\" title=\"wget递归下载整个网站\"></a>wget递归下载整个网站</h2><p>wget加上参数之后，即可成为相当强大的下载工具。<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -r -p -np -k http://xxx.com/xxx</div><div class=\"line\"></div><div class=\"line\">-<span class=\"ruby\">r,  --recursive（递归）指定使用递归下载</span></div><div class=\"line\">-<span class=\"ruby\">k,  --convert-links（转换链接）将下载的HTML页面中的链接转换为相对链接即本地链接</span></div><div class=\"line\">-<span class=\"ruby\">p,  --page-requisites（页面必需元素）下载所有的图片等页面显示所需的内容</span></div><div class=\"line\">-<span class=\"ruby\">np, --no-parent（不追溯至父级）</span></div><div class=\"line\">-<span class=\"ruby\">nc,   （断点续传）</span></div><div class=\"line\">-<span class=\"ruby\">o,    （日志）</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"axel高速下载\"><a href=\"#axel高速下载\" class=\"headerlink\" title=\"axel高速下载\"></a>axel高速下载</h2><p>axel是Linux下一个不错的HTTP/ftp高速下载工具。支持多线程下载、断点续传，且可以从多个地址或者从一个地址的多个连接来下载同一个文件。适合网速不给力时多线程下载提高下载速度。比如在国内VPS或服务器上下载lnmp一键安装包用Axel就比wget快。</p>\n<p>如下载lnmp安装包指定10个线程，保存到/tmp/中：<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">axel -n <span class=\"number\">10</span> -o <span class=\"regexp\">/tmp/</span> <span class=\"string\">http:</span><span class=\"comment\">//www.linuxde.net/lnmp.tar.gz</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"监听流量\"><a href=\"#监听流量\" class=\"headerlink\" title=\"监听流量\"></a>监听流量</h2><h3 id=\"iftop\"><a href=\"#iftop\" class=\"headerlink\" title=\"iftop\"></a>iftop</h3><p>官方网站：<a href=\"http://www.ex-parrot.com/~pdw/iftop/\" target=\"_blank\" rel=\"external\">http://www.ex-parrot.com/~pdw/iftop/</a><br>安装：<br><strong>源码安装</strong>：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install flex byacc  libpcap ncurses ncurses-devel libpcap-devel  #安装依赖</div><div class=\"line\">或</div><div class=\"line\">apt-<span class=\"built_in\">get</span> install flex byacc  libpcap0.<span class=\"number\">8</span> libncurses5   #安装依赖</div><div class=\"line\"></div><div class=\"line\">#编译之前确保已安装好了<span class=\"keyword\">make</span>、gcc、autoconf等。</div><div class=\"line\">wget http://www.<span class=\"keyword\">ex</span>-parrot.<span class=\"keyword\">com</span>/pdw/iftop/download/iftop-<span class=\"number\">0.17</span>.tar.gz</div><div class=\"line\">tar zxvf iftop-<span class=\"number\">0.17</span>.tar.gz</div><div class=\"line\"><span class=\"keyword\">cd</span> iftop-<span class=\"number\">0.17</span></div><div class=\"line\">./configure</div><div class=\"line\"><span class=\"keyword\">make</span> &amp;&amp; <span class=\"keyword\">make</span> install</div></pre></td></tr></table></figure></p>\n<p><strong>仓库源安装</strong>：<br>Debian/Ubuntu系统：<code>apt-get install iftop</code><br>Centos/Redhat系统：<a href=\"https://www.vpser.net/manage/centos-rhel-linux-third-party-source-epel.html\" target=\"_blank\" rel=\"external\">安装EPEL源</a>，然后<code>yum install iftop</code>安装</p>\n<p><strong>使用</strong>：<code>iftop</code>或<code>iftop -i eth0 -n -p</code></p>\n<hr>\n<h3 id=\"nethogs\"><a href=\"#nethogs\" class=\"headerlink\" title=\"nethogs\"></a>nethogs</h3><p><code>nethogs eth0</code></p>\n<hr>\n<h2 id=\"网页命令行阅读器\"><a href=\"#网页命令行阅读器\" class=\"headerlink\" title=\"网页命令行阅读器\"></a>网页命令行阅读器</h2><p><code>w3m 【网址】</code>    网页命令行方式阅读，对于没有桌面环境但在需要判断网页服务是否正常时非常有用。</p>\n<p>links阅读html文件,只显示链接<br><code>links [选项] [URL]</code><br>例：links www.baidu.com</p>\n<hr>\n<h2 id=\"禁ping-（禁用ICMP协议）\"><a href=\"#禁ping-（禁用ICMP协议）\" class=\"headerlink\" title=\"禁ping （禁用ICMP协议）\"></a>禁ping （禁用ICMP协议）</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">“echo <span class=\"string\">\"1\"</span> &gt;<span class=\"regexp\">/proc/</span>sys<span class=\"regexp\">/net/i</span>pv4<span class=\"regexp\">/icmp_echo_ignore_all”</span></div></pre></td></tr></table></figure>\n<p>不能vi编辑，1为禁止ping命令，0为允许ping命令</p>\n<hr>\n<p><strong>文字接口数据包捕获器</strong>:<br><code>tapdump [-AennqX] [-i 接口] [-w 存储文件名] [-c 次数] \\ [-r 文件] [所要摘取的数据包数据格式]</code></p>\n<p><strong>图形接口数据包捕获器</strong>：Wireshark<br><code>yum install wireshark wireshark-gnome</code></p>\n<hr>\n<h2 id=\"屏幕共享（局域网，公网貌似不行）\"><a href=\"#屏幕共享（局域网，公网貌似不行）\" class=\"headerlink\" title=\"屏幕共享（局域网，公网貌似不行）\"></a>屏幕共享（局域网，公网貌似不行）</h2><p>连接的两台电脑（也可多台）命令行显示是实时同步的，两边都可以操作。<br>可能要先安装:<strong>screen</strong><br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">screen -S foo 创建会话</div><div class=\"line\">screen -x foo 加入会话</div><div class=\"line\"><span class=\"keyword\">exit</span>退出</div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>即时通讯软件</strong>： pidgin（gaim的延伸）<br><code>yum install pidgin</code></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"系统管理类\"><a href=\"#系统管理类\" class=\"headerlink\" title=\"系统管理类\"></a>系统管理类</h1><h2 id=\"分析空间大小\"><a href=\"#分析空间大小\" class=\"headerlink\" title=\"分析空间大小\"></a>分析空间大小</h2><p>分析空间大小（根目录下个文件夹大小）:<code>du -sh /*</code></p>\n<hr>\n<h2 id=\"定时任务\"><a href=\"#定时任务\" class=\"headerlink\" title=\"定时任务\"></a>定时任务</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">crontab status                <span class=\"comment\">#crontab 状态 </span></div><div class=\"line\">crontab -e                    <span class=\"comment\">#编辑配置文件</span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond start     <span class=\"comment\">#启动服务 </span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond stop      <span class=\"comment\">#关闭服务 </span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond restart   <span class=\"comment\">#重启服务 </span></div><div class=\"line\"><span class=\"regexp\">/sbin/</span>service crond reload    <span class=\"comment\">#重新载入配置</span></div></pre></td></tr></table></figure>\n<p>格式：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">*<span class=\"regexp\">/25 * * * * /</span>opt<span class=\"regexp\">/xxx/</span>xxx<span class=\"regexp\">/restart.sh</span></div></pre></td></tr></table></figure></p>\n<p><strong>crontab文件的含义</strong>：用户所建立的crontab文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，<br>格式如下： <strong>minute hour day month week command</strong> 顺序：<strong>分 时 日 月 周 </strong></p>\n<ul>\n<li><strong>minute</strong>： 表示分钟，可以是从0到59之间的任何整数。</li>\n<li><strong>hour</strong>：表示小时，可以是从0到23之间的任何整数。 </li>\n<li><strong>day</strong>：表示日期，可以是从1到31之间的任何整数。 </li>\n<li><strong>month</strong>：表示月份，可以是从1到12之间的任何整数。 </li>\n<li><strong>week</strong>：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。 </li>\n<li><strong>command</strong>：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。 </li>\n</ul>\n<p>可以使用以下特殊字符：<br><strong>星号（*）</strong>：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。<br><strong>逗号（,）</strong>：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”<br><strong>中杠（-）</strong>：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”<br><strong>正斜线（/）</strong>：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。</p>\n<hr>\n<h2 id=\"命令执行\"><a href=\"#命令执行\" class=\"headerlink\" title=\"命令执行\"></a>命令执行</h2><p>顺序执行多条命令可以用<code>;</code>来隔开<strong>（即使前面一条命令没有正确执行，后面的命令也会执行）</strong></p>\n<p><code>&amp;&amp;</code>实现选择性执行的，它<strong>表示如果前面的命令执行结果返回0(前一条命令正确执行)，才执行后面的，否则不执行</strong>（不是表示终端输出的内容，而是表示命令执行状态的结果），用<code>echo $?</code>环境变量可以查看上一次命令的执行结果。</p>\n<p>shell中的<code>||</code>除了用于表示逻辑与和或之外，还可以实现命令执行顺序的简单控制。<code>||</code>是与<code>&amp;&amp;</code>相反的控制效果，当上一条命令执行结果为<strong>≠0($?≠0)</strong>时(上一条命令执行失败)，则执行它后面的命令。</p>\n<hr>\n<h2 id=\"后台运行命令\"><a href=\"#后台运行命令\" class=\"headerlink\" title=\"后台运行命令\"></a>后台运行命令</h2><ul>\n<li>1.<code>screen [command]</code></li>\n<li>2.<code>[command] &amp;</code></li>\n<li>3.<code>nohup [command] &amp;</code></li>\n<li><strong>nohup命令</strong>：如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不会结束，那么可以使用nohup命令。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂起的意思( no hang up)。 　　<br>该命令的一般形式为：<code>nohup command &amp;</code> 　　使用nohup命令提交作业<br>如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件： 　　<br><code>nohup command &gt; myout.file 2&gt;&amp;1 &amp;</code><br>在上面的例子中，输出被重定向到myout.file文件中。 　　<br>使用 <code>jobs</code> 查看任务。 　　<br>使用 <code>fg %n</code>　关闭。 　　</li>\n</ul>\n<hr>\n<h2 id=\"开机启动项\"><a href=\"#开机启动项\" class=\"headerlink\" title=\"开机启动项\"></a>开机启动项</h2><p>交互界面的开机启动项：<code>ntsysv</code>(centos)<br><strong>--back</strong>：在互动式界面里，显示Back钮，而非cancel钮。<br>使用空格键选择或者取消选项！</p>\n<hr>\n<h2 id=\"包管理\"><a href=\"#包管理\" class=\"headerlink\" title=\"包管理\"></a>包管理</h2><h3 id=\"二进制包\"><a href=\"#二进制包\" class=\"headerlink\" title=\"二进制包\"></a>二进制包</h3><p>二进制包的安装比较简单，我们需要做的只是将从网络上下载的二进制包解压后放到合适的目录，然后将包含可执行的主程序文件的目录添加进<strong>PATH环境变量</strong>即可。</p>\n<h3 id=\"Debian-Ubuntu-apt\"><a href=\"#Debian-Ubuntu-apt\" class=\"headerlink\" title=\"Debian/Ubuntu(apt)\"></a>Debian/Ubuntu(apt)</h3><p>搜索软件包：<code>apt-cache search softname</code></p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>install</td>\n<td style=\"text-align:left\">其后加上软件包名，用于安装一个软件包</td>\n</tr>\n<tr>\n<td>update</td>\n<td style=\"text-align:left\">从软件源镜像服务器上下载/更新用于更新本地软件源的软件包列表</td>\n</tr>\n<tr>\n<td>upgrade</td>\n<td style=\"text-align:left\">升级本地可更新的全部软件包，但存在依赖问题时将不会升级，通常会在更新之前执行一次update</td>\n</tr>\n<tr>\n<td>dist-upgrade</td>\n<td style=\"text-align:left\">解决依赖关系并升级(存在一定危险性)</td>\n</tr>\n<tr>\n<td>remove</td>\n<td style=\"text-align:left\">移除已安装的软件包，包括与被移除软件包有依赖关系的软件包，但不包含软件包的配置文件</td>\n</tr>\n<tr>\n<td>autoremove</td>\n<td style=\"text-align:left\">移除之前被其他软件包依赖，但现在不再被使用的软件包</td>\n</tr>\n<tr>\n<td>purge</td>\n<td style=\"text-align:left\">与remove相同，但会完全移除软件包，包含其配置文件</td>\n</tr>\n<tr>\n<td>clean</td>\n<td style=\"text-align:left\">移除下载到本地的已经安装的软件包，默认保存在/var/cache/apt/archives/</td>\n</tr>\n<tr>\n<td>autoclean</td>\n<td style=\"text-align:left\">移除已安装的软件的旧版本软件包</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-y</td>\n<td>自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>模拟安装</td>\n</tr>\n<tr>\n<td>-q</td>\n<td>静默安装方式，指定多个q或者-q=#,#表示数字，用于设定静默级别，这在你不想要在安装软件包时屏幕输出过多时很有用</td>\n</tr>\n<tr>\n<td>-f</td>\n<td>修复损坏的(已安装的所有软件包)依赖关系</td>\n</tr>\n<tr>\n<td>-d</td>\n<td>只下载不安装</td>\n</tr>\n<tr>\n<td>–reinstall</td>\n<td>重新安装已经安装但可能存在问题的软件包</td>\n</tr>\n<tr>\n<td>–install-suggests</td>\n<td>同时安装APT给出的建议安装的软件包</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p><strong>dpkg常用参数介绍</strong>：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-i</td>\n<td>安装指定deb包</td>\n</tr>\n<tr>\n<td>-R</td>\n<td>后面加上目录名，用于安装该目录下的所有deb安装包</td>\n</tr>\n<tr>\n<td>-r</td>\n<td>remove，移除某个已安装的软件包</td>\n</tr>\n<tr>\n<td>-I</td>\n<td>显示deb包文件的信息</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>显示已安装软件的信息</td>\n</tr>\n<tr>\n<td>-S</td>\n<td>搜索已安装的软件包</td>\n</tr>\n<tr>\n<td>-L</td>\n<td>显示已安装软件包的目录信息</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h3 id=\"Centos-Redhat-yum\"><a href=\"#Centos-Redhat-yum\" class=\"headerlink\" title=\"Centos\\Redhat(yum)\"></a>Centos\\Redhat(yum)</h3><table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>install</td>\n<td>安装rpm软件包；</td>\n</tr>\n<tr>\n<td>update</td>\n<td>更新rpm软件包；</td>\n</tr>\n<tr>\n<td>check-update</td>\n<td>检查是否有可用的更新rpm软件包；</td>\n</tr>\n<tr>\n<td>remove</td>\n<td>删除指定的rpm软件包；</td>\n</tr>\n<tr>\n<td>list</td>\n<td>显示软件包的信息；</td>\n</tr>\n<tr>\n<td>search</td>\n<td>检查软件包的信息；</td>\n</tr>\n<tr>\n<td>info</td>\n<td>显示指定的rpm软件包的描述信息和概要信息；</td>\n</tr>\n<tr>\n<td>clean</td>\n<td>清理yum过期的缓存；</td>\n</tr>\n<tr>\n<td>shell</td>\n<td>进入yum的shell提示符；</td>\n</tr>\n<tr>\n<td>resolvedep</td>\n<td>显示rpm软件包的依赖关系；</td>\n</tr>\n<tr>\n<td>localinstall</td>\n<td>安装本地的rpm软件包；</td>\n</tr>\n<tr>\n<td>localupdate</td>\n<td>显示本地rpm软件包进行更新；</td>\n</tr>\n<tr>\n<td>deplist</td>\n<td>显示rpm软件包的所有依赖关系。</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-h</td>\n<td>显示帮助信息；</td>\n</tr>\n<tr>\n<td>-y</td>\n<td>对所有的提问都回答“yes”；</td>\n</tr>\n<tr>\n<td>-c</td>\n<td>指定配置文件；</td>\n</tr>\n<tr>\n<td>-q</td>\n<td>安静模式；</td>\n</tr>\n<tr>\n<td>-v</td>\n<td>详细模式；</td>\n</tr>\n<tr>\n<td>-d</td>\n<td>设置调试等级（0-10）；</td>\n</tr>\n<tr>\n<td>-e</td>\n<td>设置错误等级（0-10）；</td>\n</tr>\n<tr>\n<td>-R</td>\n<td>设置yum处理一个命令的最大等待时间；</td>\n</tr>\n<tr>\n<td>-C</td>\n<td>完全从缓存中运行，而不去下载或者更新任何头文件。</td>\n</tr>\n</tbody>\n</table>\n<p>自动搜索最快镜像插件：<code>yum install yum-fastestmirror</code><br>安装yum图形窗口插件：<code>yum install yumex</code><br>查看可能批量安装的列表：<code>yum grouplist</code></p>\n<p><strong>安装 </strong><br><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> <span class=\"comment\">#全部安装 </span></div><div class=\"line\">yum <span class=\"keyword\">install</span> package1 <span class=\"comment\">#安装指定的安装包package1 </span></div><div class=\"line\">yum groupinsall group1 <span class=\"comment\">#安装程序组group1</span></div></pre></td></tr></table></figure></p>\n<p><strong>更新和升级 </strong><br><figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum update <span class=\"comment\">#全部更新 </span></div><div class=\"line\">yum update package1 <span class=\"comment\">#更新指定程序包package1 </span></div><div class=\"line\">yum<span class=\"built_in\"> check-update </span><span class=\"comment\">#检查可更新的程序 </span></div><div class=\"line\">yum upgrade package1 <span class=\"comment\">#升级指定程序包package1 </span></div><div class=\"line\">yum groupupdate group1 <span class=\"comment\">#升级程序组group1</span></div></pre></td></tr></table></figure></p>\n<p><strong>查找和显示 </strong><br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum info package1 <span class=\"comment\">#显示安装包信息package1 </span></div><div class=\"line\">yum <span class=\"built_in\">list</span> <span class=\"comment\">#显示所有已经安装和可以安装的程序包 </span></div><div class=\"line\">yum <span class=\"built_in\">list</span> package1 <span class=\"comment\">#显示指定程序包安装情况package1 </span></div><div class=\"line\">yum groupinfo group1 <span class=\"comment\">#显示程序组group1信息</span></div><div class=\"line\">yum search <span class=\"built_in\">string</span> 根据关键字<span class=\"built_in\">string</span>查找安装包 删除程序 </div><div class=\"line\">yum remove | erase package1 <span class=\"comment\">#删除程序包package1 </span></div><div class=\"line\">yum groupremove group1 <span class=\"comment\">#删除程序组group1 </span></div><div class=\"line\">yum deplist package1 <span class=\"comment\">#查看程序package1依赖情况</span></div></pre></td></tr></table></figure></p>\n<p><strong>清除缓存 </strong><br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">yum</span> clean packages <span class=\"comment\">#清除缓存目录下的软件包 </span></div><div class=\"line\">yum clean headers <span class=\"comment\">#清除缓存目录下的 headers </span></div><div class=\"line\">yum clean oldheaders <span class=\"comment\">#清除缓存目录下旧的 headers</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>yum 软件组</strong><br>列出软件组<code>yum grouplist</code> 已安装的软件组<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165538270.png\" alt=\"\"><br>未安装的软件组<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165623242.png\" alt=\"\"><br><strong>软件组信息yum groupinfo “软件组名（英文双引号）”</strong></p>\n<p>主要被安装的软件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165714876.png\" alt=\"\"><br>额外可选的软件<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/165747860.png\" alt=\"\"><br><strong>安装某个软件组yum groupinstall “软件组名（英文双引号）”</strong></p>\n<hr>\n<p><strong>RPM常用参数介绍</strong>：<br>|参数|说明|<br>|–|–|<br>|-a|查询所有套件； |<br>|-b&lt;完成阶段&gt;&lt;套件档&gt;+或-t &lt;完成阶段&gt;&lt;套件档&gt;+|设置包装套件的完成阶段，并指定套件档的文件名称； |<br>|-c|只列出组态配置文件，本参数需配合”-l”参数使用； |<br>|-d|只列出文本文件，本参数需配合”-l”参数使用； |<br>|-e&lt;套件档&gt;或–erase&lt;套件档&gt;|删除指定的套件； |<br>|-f&lt;文件&gt;+|查询拥有指定文件的套件； |<br>|-h或–hash|套件安装时列出标记； |<br>|-i|显示套件的相关信息； |<br>|-i&lt;套件档&gt;或–install&lt;套件档&gt;|安装指定的套件档； |<br>|-l|显示套件的文件列表； |<br>|-p&lt;套件档&gt;+|查询指定的RPM套件档； |<br>|-q|使用询问模式，当遇到任何问题时，rpm指令会先询问用户； |<br>|-R|显示套件的关联性信息； |<br>|-s|显示文件状态，本参数需配合”-l”参数使用； |<br>|-U&lt;套件档&gt;或–upgrade&lt;套件档&gt;|升级指定的套件档； |<br>|-v|显示指令执行过程； |<br>|-vv|详细显示指令执行过程，便于排错。|</p>\n<hr>\n<h2 id=\"dd命令\"><a href=\"#dd命令\" class=\"headerlink\" title=\"dd命令\"></a>dd命令</h2><p><code>dd --help</code>或是<code>info dd</code></p>\n<p>输入或输出<br><code>dd if=[STDIN] of=[STDOUT]</code><br>例：<br><code>dd if=ubuntu-13.10-desktop-amd64.iso of=/dev/sdb2</code><strong>把光盘写进磁盘</strong><br>当然你可以拿这个来方便的拷贝光碟(注意，你的光碟是标准的 iso9660格式才可以这么做！)</p>\n<p><code>dd if=/dev/cdrom of=cdrom.iso</code><strong>把光驱内容保存为iso镜像文件</strong></p>\n<p>同理，要把一张磁盘的内容拷贝到另一张磁盘上，利用/tmp作为临时存储区。把源盘插入驱动器中，输入下述命令：<br><code>dd if =/dev/xxx of = /tmp/tmpfile</code><br>拷贝完成后，将源盘从驱动器中取出，把目标盘插入，输入命令：<br><code>dd if = /tmp/tmpfile of =/dev/xxx</code><br>软盘拷贝完成后，应该将临时文件删除：<br><code>rm /tmp/tmpfile</code></p>\n<p>如果两个设备能同时工作：<code>dd if =/dev/xxx of = /dev/xxx</code></p>\n<ul>\n<li><strong>/dev/null</strong> 它是空设备，也称为位桶（bit bucket）。任何写入它的输出都会被抛弃。如果不想让消息以标准输出显示或写入文件，那么可以将消息重定向到位桶。</li>\n<li><strong>/dev/zero</strong>该设备无穷尽地提供0，可以使用任何你需要的数目——设备提供的要多的多。他可以用于向设备或文件写入字符串0。<br><code>dd if=/dev/zero of=./test.txt bs=1k count=1</code><br><strong>/dev/zero</strong>还可用于擦除磁盘数据</li>\n</ul>\n<hr>\n<h2 id=\"时区时间\"><a href=\"#时区时间\" class=\"headerlink\" title=\"时区时间\"></a>时区时间</h2><p><strong>时区修改</strong><br><code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code> 提示覆盖的就覆盖掉<br><code>date</code>  看到有CST字样为中国标准时间; <code>date -R</code>  看到+0800  是东八区</p>\n<p><strong>修改硬件时钟</strong>（每次开机都是从硬件读取时间的，首先硬件时间要正确）<br><code>hwclock --show</code>   显示当前硬件时间<br><code>hwclock --set --date=&quot;10/28/16 10:04:00&quot;</code>   （月/日/年 时:分:秒）</p>\n<ul>\n<li><p>1.<strong>硬件时钟</strong>与<strong>系统时钟</strong>同步<br><strong>hc</strong>代表硬件时间，<strong>sys</strong>代表系统时间，即用硬件时钟同步到系统时钟<br><code>hwclock --hctosys</code> 或者<code>clock --hctosys</code><br><code>date</code>    #查看当前系统时间</p>\n</li>\n<li><p>2.<strong>系统时钟</strong>和<strong>硬件时钟</strong>同步（一般是系统自动同步Internet时间后才把最新时间同步到硬件中）<br><code>hwclock --systohc</code>或者<code>clock --systohc</code>  即用系统时钟同步到硬件时钟</p>\n</li>\n</ul>\n<p>注：<strong>tzselect</strong> 命令也可以交互界面选择修改，但最后还要执行一个提示设置时区的命令，并写入环境变量中，重启才能生效。</p>\n<hr>\n<hr>\n<h1 id=\"文件、目录类\"><a href=\"#文件、目录类\" class=\"headerlink\" title=\"文件、目录类\"></a>文件、目录类</h1><h2 id=\"cd\"><a href=\"#cd\" class=\"headerlink\" title=\"cd\"></a>cd</h2><p><strong>cd</strong> ：进入用户主目录；<br><strong>cd ~</strong> ：进入用户主目录；<br><strong>cd -</strong> ：返回进入此目录之前所在的目录；<br><strong>cd !$</strong> ： 把上个命令的参数作为cd参数使用</p>\n<hr>\n<h2 id=\"权限设置\"><a href=\"#权限设置\" class=\"headerlink\" title=\"权限设置\"></a>权限设置</h2><h3 id=\"数字设定法\"><a href=\"#数字设定法\" class=\"headerlink\" title=\"数字设定法\"></a>数字设定法</h3><p><strong>0表示没有权限，1表示可执行权限， 2表示可写权限，4表示可读权限</strong>，然后将其相加。所以数字属性的格式应为3个从0到7的八进制数，其顺序是（<strong>u</strong>）（<strong>g</strong>）（<strong>o</strong>）。</p>\n<p>例如，如果想让某个文件的属主有“读/写”二种权限，需要把4（可读）+2（可写）＝6（读/写）。<br>数字设定法的一般形式为：<br>语法：<code>chmod [mode] 文件名</code><br>例如：chmod 755 mm.txt</p>\n<h3 id=\"文字设定法\"><a href=\"#文字设定法\" class=\"headerlink\" title=\"文字设定法\"></a>文字设定法</h3><p>语法：<code>chmod [who] [+ | - | =] [mode] 文件名</code><br>命令中各选项的含义为：<br>操作对象who可是下述字母中的任一个或者它们的组合：</p>\n<ul>\n<li>u 表示“用户（user）”，即文件或目录的所有者。</li>\n<li>g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。</li>\n<li>o 表示“其他（others）用户”。</li>\n<li>a 表示“所有（all）用户”。它是系统默认值。<br>操作符号可以是：</li>\n<li>+ 添加某个权限。</li>\n<li>- 取消某个权限。</li>\n<li>= 赋予给定权限并取消其他所有权限（如果有的话）。</li>\n</ul>\n<p>设置 mode 所表示的权限可用下述字母的任意组合：</p>\n<ul>\n<li>r 可读。</li>\n<li>w 可写。</li>\n<li>x 可执行。</li>\n<li>X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。</li>\n<li>s 在文件执行时把进程的属主或组ID置为该文件的文件属主。</li>\n</ul>\n<p>方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。</p>\n<ul>\n<li>t 保存程序的文本到交换设备上。</li>\n<li>u 与文件属主拥有一样的权限。</li>\n<li>g 与和文件属主同组的用户拥有一样的权限。</li>\n<li>o 与其他用户拥有一样的权限。</li>\n</ul>\n<p><strong>文件名</strong>：以空格分开的要改变权限的文件列表，支持通配符。</p>\n<hr>\n<h2 id=\"CUT命令\"><a href=\"#CUT命令\" class=\"headerlink\" title=\"CUT命令\"></a>CUT命令</h2><ul>\n<li>-b：仅显示行中指定直接范围的内容； </li>\n<li>-c：仅显示行中指定范围的字符；</li>\n<li>-d：指定字段的分隔符，默认的字段分隔符为“TAB”； </li>\n<li>-f：显示指定字段的内容； </li>\n<li>-n：与“-b”选项连用，不分割多字节字符； </li>\n<li>--complement：补足被选择的字节、字符或字段； </li>\n<li>--out-delimiter=&lt;字段分隔符&gt;：指定输出内容是的字段分割符； </li>\n<li>--help：显示指令的帮助信息； </li>\n<li>--version：显示指令的版本信息。</li>\n</ul>\n<p>打印/etc/passwd文件中以<strong>:</strong>为分隔符的第1个字段和第6个字段分别表示用户名和其家目录：<code>cut /etc/passwd -d &#39;:&#39; -f 1,6</code><br>前五个（包含第五个）：<code>cut /etc/passwd -c -5</code><br>前五个之后的（包含第五个）：<code>cut /etc/passwd -c 5-</code><br>第五个：<code>cut /etc/passwd -c 5</code><br>2到5之间的（包含第五个）： <code>cut /etc/passwd -c 2-5</code></p>\n<hr>\n<h2 id=\"查找近期修改的文件\"><a href=\"#查找近期修改的文件\" class=\"headerlink\" title=\"查找近期修改的文件\"></a>查找近期修改的文件</h2><p>比如按名字查找一个文件，可以用<code>find / -name filename</code><br>按时间查找也有参数</p>\n<ul>\n<li><strong>-atime</strong> 访问时间</li>\n<li><strong>-ctime</strong> 改变状态的时间</li>\n<li><strong>-mtime</strong>修改的时间。<br>这里的时间是以24小时为单位的。</li>\n</ul>\n<p><code>find . -name &#39;*.html&#39; -type f -mmin -30</code>：当前目录最近30分钟内修改过的html文件<br><code>find . -name &#39;*.html&#39; -type f -mmin -30 -ls</code>：最近30分钟内修改过的文件，的详细情况<br><code>find ./ -mtime 0</code>：返回最近24小时内修改过的文件。<br><code>find ./ -mtime 1</code> ： 返回的是前48~24小时修改过的文件。而不是48小时以内修改过的文件。<br><code>find . -type f -mtime +1</code>：最近1天前（2天内）修改过的常规文件<br><code>find . -mtime -2 -type f</code>：48小时以内修改过的文件</p>\n<p>那怎么返回10天内修改过的文件？find支持表达式关系运算，所以可以把最近几天的数据一天天的加起来：<br><code>find ./ -mtime 0 -o -mtime 1 -o -mtime 2</code> 虽然比较土，但也算是个方法了。</p>\n<p>参考：<a href=\"http://man.linuxde.net/find\">http://man.linuxde.net/find</a></p>\n<hr>\n<h2 id=\"echo\"><a href=\"#echo\" class=\"headerlink\" title=\"echo\"></a>echo</h2><p><strong>echo “ok” &gt; test.txt</strong> ：用ok字符覆盖掉test.txt内容，<strong>&gt;表示追加并覆盖</strong>的意思。<br><strong>echo “ok” &gt;&gt; test.txt</strong>：向test.txt文件追加OK字符，不覆盖原文件里的内容。<strong>&gt;&gt;表示尾行追加</strong>。</p>\n<hr>\n<h2 id=\"计算MD5\"><a href=\"#计算MD5\" class=\"headerlink\" title=\"计算MD5\"></a>计算MD5</h2><p>计算MD5：<code>md5sum filename</code></p>\n<hr>\n<h2 id=\"文件上下传\"><a href=\"#文件上下传\" class=\"headerlink\" title=\"文件上下传\"></a>文件上下传</h2><h3 id=\"SCP\"><a href=\"#SCP\" class=\"headerlink\" title=\"SCP\"></a>SCP</h3><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">scp <span class=\"regexp\">/home/</span>git<span class=\"regexp\">/.ssh/</span>id_rsa.pub <span class=\"string\">gitServer:</span><span class=\"regexp\">/home/</span>git</div></pre></td></tr></table></figure>\n<h3 id=\"lrzsz-Windows-Linux\"><a href=\"#lrzsz-Windows-Linux\" class=\"headerlink\" title=\"lrzsz(Windows-Linux)\"></a>lrzsz(Windows-Linux)</h3><p>rz  上传文件<br>sz  下载文件</p>\n<h3 id=\"ncftp\"><a href=\"#ncftp\" class=\"headerlink\" title=\"ncftp\"></a>ncftp</h3><p>另外有两个常用的ftp工具<strong>ncftpget</strong>和<strong>ncftpput</strong>，可以实现<strong>后台的ftp上传和下载</strong>，这样我就可以利用这些命令在后台上传和下载文件了。</p>\n<hr>\n<h3 id=\"man手册转为PDF\"><a href=\"#man手册转为PDF\" class=\"headerlink\" title=\"man手册转为PDF\"></a>man手册转为PDF</h3><p>把man的帮助转换成PDF文档：<code>man -t [command] | ps2pdf - filename.pdf</code></p>\n<hr>\n<h2 id=\"管道符、awk等高级控制\"><a href=\"#管道符、awk等高级控制\" class=\"headerlink\" title=\"管道符、awk等高级控制\"></a>管道符、awk等高级控制</h2><p>“<strong>|</strong>”管道符是左边命令的标准输出(stdout)给右边命令作为标准输入（stdin）;<br>“<strong>&lt;</strong>”是右边文件名指定的文件内容读入为左边命令的标准输入（stdin）；<br>“<strong>&gt;</strong>”是左边命令的输出覆盖写到右边指定的文件中。</p>\n<p><code>ps aux |grep XXX |awk &#39;{print $11}&#39; | grep -v &#39;grep&#39; | wc -l</code></p>\n<ul>\n<li><strong>grep -v ‘grep’</strong>  过滤带grep的部分 取反</li>\n<li><strong>wc -l </strong>          统计行数</li>\n<li><strong>sort -nr </strong>       排序</li>\n</ul>\n<hr>\n<p><code>grep -rnI &quot;myleolan&quot; ~</code></p>\n<ul>\n<li>-r 参数表示递归搜索子目录中的文件,</li>\n<li>-n表示打印匹配项行号，</li>\n<li>-I表示忽略二进制文件。<br>查看环境变量中以”leolan”结尾的字符串：<code>export | grep &quot;.*leolan$&quot;</code><br>其中<code>$</code>就表示一行的末尾。</li>\n</ul>\n<hr>\n<p><strong>wc</strong> 命令用于统计并输出一个文件中行、单词和字节的数目<br>分别只输出行数、单词数、字节数、字符数和输入文本中最长一行的字节数：<br>行数：<code>wc -l /etc/passwd</code><br>单词数：<code>wc -w /etc/passwd</code><br>字节数：<code>wc -c /etc/passwd</code><br>字符数：<code>wc -m /etc/passwd</code><br>最长行字节数：<code>wc -L /etc/passwd</code></p>\n<p>注意：对于西文字符来说，一个字符就是一个字节，但对于中文字符一个汉字是大于2个字节的，具体数目是由字符编码决定的</p>\n<hr>\n<p><strong>sort </strong>排序命令<br>将输入按照一定方式排序，然后再输出,它支持的排序有按字典排序,数字排序，按月份排序，随机排序，反转排序，指定特定字段进行排序等等。<br>默认为字典排序：<code>cat /etc/passswd | sort</code><br>反转排序：<code>cat /etc/passwd | sort -r</code><br>按特定字段排序：<code>cat /etc/passwd | sort -t&#39;:&#39; -k 3 -n</code></p>\n<p>上面的<strong>-t</strong>参数用于指定字段的分隔符，这里是以<strong>“:”</strong>作为分隔符；<br><strong>-k</strong> 字段号用于指定对哪一个字段进行排序。这里/etc/passwd文件的第三个字段为数字，默认情况下是一字典序排序的，如果要按照数字排序就要加上<strong>-n</strong>参数</p>\n<hr>\n<p><strong>uniq</strong> 去重命令<br>uniq命令可以用于过滤或者输出重复行。<br>  ● 过滤重复行<br>我们可以使用<strong>history</strong>命令查看最近执行过的命令（实际为读取<strong>${SHELL}_history</strong>文件），那么你可能就会要想去掉命令后面的参数然后去掉重复的命令：<code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | uniq</code></p>\n<p>然后经过层层过滤，你会发现确是只输出了执行的命令那一列，不过去重效果好像不明显，仔细看你会发现它趋势去重了，只是不那么明显，之所以不明显是因为uniq命令只能去连续重复的行，不是全文去重，所以要达到预期效果，我们先排序：<br><code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort | uniq</code><br>或者<code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort -u</code></p>\n<p>  ● 输出重复行<br>输出重复过的行（重复的只输出一个）及重复次数：<br><code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort | uniq -dc</code><br>输出所有重复的行：<br><code>history | cut -c 8- | cut -d &#39; &#39; -f 1 | sort | uniq -D</code></p>\n<hr>\n<p><strong>tr</strong> 命令<br>tr 命令可以用来删除一段文本信息中的某些文字。或者将其进行转换。<br>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-d</td>\n<td>删除和set1匹配的字符，注意不是全词匹配也不是按字符顺序匹配</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>去除set1指定的在输入文本中连续并重复的字符</td>\n</tr>\n</tbody>\n</table>\n<p>删除 “hello shiyanlou” 中所有的’o’,’l’,’h’：<code>echo &#39;hello shiyanlou&#39; | tr -d &#39;olh&#39;</code><br>将”hello” 中的ll,去重为一个l：<code>echo &#39;hello&#39; | tr -s &#39;l&#39;</code><br>将输入文本，全部转换为大写或小写输出：<code>cat /etc/passwd | tr &#39;[:lower:]&#39; &#39;[:upper:]&#39;</code><br>上面的<code>&#39;[:lower:]&#39;</code> <code>&#39;[:upper:]&#39;</code>你也可以简单的写作<code>&#39;[a-z]&#39;</code> <code>&#39;[A-Z]&#39;</code>,当然反过来将大写变小写也是可以的</p>\n<hr>\n<p><strong>col </strong>命令<br>col 命令可以将Tab换成对等数量的空格建，或反转这个操作。<br>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-x</td>\n<td>将Tab转换为空格</td>\n</tr>\n<tr>\n<td>-h</td>\n<td>将空格转换为Tab（默认选项）</td>\n</tr>\n</tbody>\n</table>\n<p>操作举例：<br>查看 /etc/protocols 中的不可见字符，可以看到很多 ^I ，这其实就是 Tab 转义成可见字符的符号:<br><code>cat -A /etc/protocols</code><br>使用 col -x 将 /etc/protocols 中的 Tab 转换为空格,然后再使用 cat 查看，你发现 ^I 不见了:<br><code>cat /etc/protocols | col -x | cat -A</code></p>\n<hr>\n<p><strong>join</strong>命令<br>学过数据库的用户对这个应该不会陌生，这个命令就是用于将两个文件中包含相同内容的那一行合并在一起。</p>\n<p>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-t</td>\n<td>指定分隔符，默认为空格</td>\n</tr>\n<tr>\n<td>-i</td>\n<td>忽略大小写的差异</td>\n</tr>\n<tr>\n<td>-1</td>\n<td>指明第一个文件要用哪个字段来对比，默认对比第一个字段</td>\n</tr>\n<tr>\n<td>-2</td>\n<td>指明第二个文件要用哪个字段来对比，默认对比第一个字段</td>\n</tr>\n</tbody>\n</table>\n<p>操作举例：<br>创建两个文件<br><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'1 hello'</span> &gt; file1</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'1 shiyanlou'</span> &gt; file2</div><div class=\"line\"><span class=\"built_in\">join</span> file1 file2</div></pre></td></tr></table></figure></p>\n<p>将/etc/passwd与/etc/shadow两个文件合并，指定以<strong>‘:’</strong>作为分隔符<br><code>sudo join -t&#39;:&#39; /etc/passwd /etc/shadow</code><br>将/etc/passwd与/etc/group两个文件合并，指定以<strong>‘:’</strong>作为分隔符, 分别比对第4和第3个字段<br><code>sudo join -t&#39;:&#39; -1 4 /etc/passwd -2 3 /etc/group</code></p>\n<hr>\n<p><strong>paste</strong>命令<br>paste这个命令与join 命令类似，它是在不对比数据的情况下，简单地将多个文件合并一起，以Tab隔开。</p>\n<p>常用的选项有：</p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-d</td>\n<td>指定合并的分隔符，默认为Tab</td>\n</tr>\n<tr>\n<td>-s</td>\n<td>不合并到一行，每个文件为一行</td>\n</tr>\n</tbody>\n</table>\n<p>操作举例：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">echo</span> hello &gt; file1</div><div class=\"line\"><span class=\"built_in\">echo</span> shiyanlou &gt; file2</div><div class=\"line\"><span class=\"built_in\">echo</span> www.shiyanlou.com &gt; file3</div><div class=\"line\">paste <span class=\"_\">-d</span> <span class=\"string\">':'</span> file1 file2 file3</div><div class=\"line\">paste <span class=\"_\">-s</span> file1 file2 file3</div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>xargs </strong>分割参数列表<br>xargs 是一条 UNIX 和类 UNIX 操作系统的常用命令。它的作用是将参数列表转换成小块分段传递给其他命令，以避免参数列表过长的问题。<br>这个命令在有些时候十分有用，特别是当用来处理产生大量输出结果的命令如 find，locate 和 grep 的结果，详细用法请参看 man 文档。<br><code>cut -d: -f1 &lt; /etc/passwd | sort | xargs echo</code><br>上面这个命令用于将/etc/passwd文件按<strong>:</strong>分割取第一个字段排序后，使用echo命令生成一个列表。</p>\n<hr>\n<p>命令行将<strong>图片转换为 ascii 字符</strong>查看的工具 aview/asciiview(黑白的)<br>彩色的：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install caca-utils</div><div class=\"line\">cacaview <span class=\"symbol\">&lt;pic_file&gt;</span></div><div class=\"line\">cacademo</div><div class=\"line\">cacafire</div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"重定向\"><a href=\"#重定向\" class=\"headerlink\" title=\"重定向\"></a>重定向</h2><p><strong>标准错误重定向</strong></p>\n<p>重定向标准输出到文件，这是一个很实用的操作，另一个很实用的操作是将标准错误重定向，标准输出和标准错误都被指向伪终端的屏幕显示，所以我们经常看到的一个命令的输出通常是同时包含了标准输出和标准错误的结果的。比如下面的操作：</p>\n<p>使用cat 命令同时读取两个文件，其中一个存在，另一个不存在<br><code>cat Documents/test.c hello.c</code><br>你可以看到除了正确输出了前一个文件的内容，还在末尾出现了一条错误信息<br>下面我们将输出重定向到一个文件，根据我们前面的经验，这里将在看不到任何输出了<br><code>cat Documents/test.c hello.c &gt; somefile</code></p>\n<p>这里依然出现了那条错误信息，这正是因为如我上面说的那样，标准输出和标准错误虽然都指向终端屏幕，实际它们并不一样。那有的时候我们就是要可以隐藏某些错误或者警告，那又该怎么做呢。这就需要用到我们前面讲的文件描述符了：</p>\n<p>将标准错误重定向到标准输出，再将标准输出重定向到文件，注意要将重定向到文件写到前面<br><code>cat Documents/test.c hello.c &gt;somefile  2&gt;&amp;1</code><br>或者只用bash提供的特殊的重定向符号”&amp;”将标准错误和标准输出同时重定向到文件<br><code>cat Documents/test.c hello.c &amp;&gt;somefilehell</code></p>\n<p>注意你应该在输出重定向文件<strong>描述符</strong>前加上<strong>&amp;</strong>,否则shell会当做重定向到一个文件名为1的文件中</p>\n<hr>\n<p><strong>tee命令</strong>同时重定向到多个文件<br>经常你可能还有这样的需求，除了将需要将输出重定向到文件之外也需要将信息打印在终端<strong>(打印终端的同时输出到文件)</strong>，那么你可以使用tee命令来实现：<br><code>echo &#39;hello shiyanlou&#39; | tee hello</code></p>\n<hr>\n<p><strong>永久重定向</strong></p>\n<p>前面的重定向操作都只是临时性的，即只对当前命令有效，那如何做到“永久”有效呢，比如在一个脚本中，你需要某一部分的命令的输出全部进行重定向，难道要让你在每个命令上面加上临时重定向的操作嘛，当然不需要，我们可以使用<strong>exec</strong>命令实现“永久”重定向。<strong>exec</strong>命令的作用是使用指定的命令替换当前的 Shell，及使用一个进程替换当前进程，或者指定新的重定向：</p>\n<p>先开启一个子 Shell:<code>zsh</code><br>使用exec替换当前进程的重定向，将标准输出重定向到一个文件:<code>exec 1&gt;somefile</code><br>后面你执行的命令的输出都将被重定向到文件中,直到你退出当前子shell，或取消exec的重定向（后面将告诉你怎么做）<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ls</div><div class=\"line\"><span class=\"keyword\">exit</span></div><div class=\"line\">cat somefile</div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>创建输出文件描述符</strong><br>默认在 Shell 中可以有9个打开的文件描述符，上面我们使用了也是它默认提供的0,1,2号文件描述符，另外我们还可以使用3-8的文件描述符，只是它们默认没有打开而已，你可以使用下面命令查看当前 Shell 进程中打开的文件描述符：<br><code>cd /dev/fd/;ls -Al</code></p>\n<p>同样使用exec命令可以创建新的文件描述符：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">zsh</div><div class=\"line\"><span class=\"built_in\">exec</span> 3&gt;somefile</div><div class=\"line\"><span class=\"comment\"># 先进入目录，再查看，否则你可能不能得到正确的结果，然后再回到上一次的目录</span></div><div class=\"line\"><span class=\"built_in\">cd</span> /dev/fd/;ls -Al;<span class=\"built_in\">cd</span> -</div><div class=\"line\"><span class=\"comment\"># 注意下面的命令&gt;与&amp;之间不应该有空格，如果有空格则会出错</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"this is test\"</span> &gt;&amp;3</div><div class=\"line\">cat somefile</div><div class=\"line\"><span class=\"built_in\">exit</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>关闭文件描述符</strong><br>如上面我们打开的3号文件描述符，可以使用如下操作将它关闭：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">exec</span> 3&gt;&amp;-</div><div class=\"line\"><span class=\"built_in\">cd</span> /dev/fd;ls -Al;<span class=\"built_in\">cd</span></div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>完全屏蔽命令的输出</strong><br>在 Linux 中有一个被成为“黑洞”的设备文件,所以导入它的数据都将被“吞噬”。<br>在类 UNIX 系统中，<strong>/dev/null</strong>，或称空设备，是一个特殊的设备文件，它通常被用于丢弃不需要的输出流，或作为用于输入流的空文件，这些操作通常由重定向完成。读取它则会立即得到一个<strong>EOF</strong>。<br>我们可以利用设个/dev/null屏蔽命令的输出：<br><code>cat Documents/test.c nefile 1&gt;/dev/null 2&gt;&amp;1</code><br>上面这样的操作将使你得不到任何输出结果。</p>\n<hr>\n<hr>\n<h1 id=\"网络类\"><a href=\"#网络类\" class=\"headerlink\" title=\"网络类\"></a>网络类</h1><h2 id=\"wget递归下载整个网站\"><a href=\"#wget递归下载整个网站\" class=\"headerlink\" title=\"wget递归下载整个网站\"></a>wget递归下载整个网站</h2><p>wget加上参数之后，即可成为相当强大的下载工具。<br><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -r -p -np -k http://xxx.com/xxx</div><div class=\"line\"></div><div class=\"line\">-<span class=\"ruby\">r,  --recursive（递归）指定使用递归下载</div><div class=\"line\"></span>-<span class=\"ruby\">k,  --convert-links（转换链接）将下载的HTML页面中的链接转换为相对链接即本地链接</div><div class=\"line\"></span>-<span class=\"ruby\">p,  --page-requisites（页面必需元素）下载所有的图片等页面显示所需的内容</div><div class=\"line\"></span>-<span class=\"ruby\">np, --no-parent（不追溯至父级）</div><div class=\"line\"></span>-<span class=\"ruby\">nc,   （断点续传）</div><div class=\"line\"></span>-<span class=\"ruby\">o,    （日志）</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"axel高速下载\"><a href=\"#axel高速下载\" class=\"headerlink\" title=\"axel高速下载\"></a>axel高速下载</h2><p>axel是Linux下一个不错的HTTP/ftp高速下载工具。支持多线程下载、断点续传，且可以从多个地址或者从一个地址的多个连接来下载同一个文件。适合网速不给力时多线程下载提高下载速度。比如在国内VPS或服务器上下载lnmp一键安装包用Axel就比wget快。</p>\n<p>如下载lnmp安装包指定10个线程，保存到/tmp/中：<br><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">axel -n <span class=\"number\">10</span> -o <span class=\"regexp\">/tmp/</span> <span class=\"string\">http:</span><span class=\"comment\">//www.linuxde.net/lnmp.tar.gz</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"监听流量\"><a href=\"#监听流量\" class=\"headerlink\" title=\"监听流量\"></a>监听流量</h2><h3 id=\"iftop\"><a href=\"#iftop\" class=\"headerlink\" title=\"iftop\"></a>iftop</h3><p>官方网站：<a href=\"http://www.ex-parrot.com/~pdw/iftop/\">http://www.ex-parrot.com/~pdw/iftop/</a><br>安装：<br><strong>源码安装</strong>：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install flex byacc  libpcap ncurses ncurses-devel libpcap-devel  #安装依赖</div><div class=\"line\">或</div><div class=\"line\">apt-<span class=\"built_in\">get</span> install flex byacc  libpcap0.<span class=\"number\">8</span> libncurses5   #安装依赖</div><div class=\"line\"></div><div class=\"line\">#编译之前确保已安装好了<span class=\"keyword\">make</span>、gcc、autoconf等。</div><div class=\"line\">wget http://www.<span class=\"keyword\">ex</span>-parrot.<span class=\"keyword\">com</span>/pdw/iftop/download/iftop-<span class=\"number\">0.17</span>.tar.gz</div><div class=\"line\">tar zxvf iftop-<span class=\"number\">0.17</span>.tar.gz</div><div class=\"line\"><span class=\"keyword\">cd</span> iftop-<span class=\"number\">0.17</span></div><div class=\"line\">./configure</div><div class=\"line\"><span class=\"keyword\">make</span> &amp;&amp; <span class=\"keyword\">make</span> install</div></pre></td></tr></table></figure></p>\n<p><strong>仓库源安装</strong>：<br>Debian/Ubuntu系统：<code>apt-get install iftop</code><br>Centos/Redhat系统：<a href=\"https://www.vpser.net/manage/centos-rhel-linux-third-party-source-epel.html\">安装EPEL源</a>，然后<code>yum install iftop</code>安装</p>\n<p><strong>使用</strong>：<code>iftop</code>或<code>iftop -i eth0 -n -p</code></p>\n<hr>\n<h3 id=\"nethogs\"><a href=\"#nethogs\" class=\"headerlink\" title=\"nethogs\"></a>nethogs</h3><p><code>nethogs eth0</code></p>\n<hr>\n<h2 id=\"网页命令行阅读器\"><a href=\"#网页命令行阅读器\" class=\"headerlink\" title=\"网页命令行阅读器\"></a>网页命令行阅读器</h2><p><code>w3m 【网址】</code>    网页命令行方式阅读，对于没有桌面环境但在需要判断网页服务是否正常时非常有用。</p>\n<p>links阅读html文件,只显示链接<br><code>links [选项] [URL]</code><br>例：links www.baidu.com</p>\n<hr>\n<h2 id=\"禁ping-（禁用ICMP协议）\"><a href=\"#禁ping-（禁用ICMP协议）\" class=\"headerlink\" title=\"禁ping （禁用ICMP协议）\"></a>禁ping （禁用ICMP协议）</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">“echo <span class=\"string\">\"1\"</span> &gt;<span class=\"regexp\">/proc/</span>sys<span class=\"regexp\">/net/i</span>pv4<span class=\"regexp\">/icmp_echo_ignore_all”</span></div></pre></td></tr></table></figure>\n<p>不能vi编辑，1为禁止ping命令，0为允许ping命令</p>\n<hr>\n<p><strong>文字接口数据包捕获器</strong>:<br><code>tapdump [-AennqX] [-i 接口] [-w 存储文件名] [-c 次数] \\ [-r 文件] [所要摘取的数据包数据格式]</code></p>\n<p><strong>图形接口数据包捕获器</strong>：Wireshark<br><code>yum install wireshark wireshark-gnome</code></p>\n<hr>\n<h2 id=\"屏幕共享（局域网，公网貌似不行）\"><a href=\"#屏幕共享（局域网，公网貌似不行）\" class=\"headerlink\" title=\"屏幕共享（局域网，公网貌似不行）\"></a>屏幕共享（局域网，公网貌似不行）</h2><p>连接的两台电脑（也可多台）命令行显示是实时同步的，两边都可以操作。<br>可能要先安装:<strong>screen</strong><br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">screen -S foo 创建会话</div><div class=\"line\">screen -x foo 加入会话</div><div class=\"line\"><span class=\"keyword\">exit</span>退出</div></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>即时通讯软件</strong>： pidgin（gaim的延伸）<br><code>yum install pidgin</code></p>\n<hr>\n"},{"title":"服务器入侵肉鸡发包","abbrlink":22486,"date":"2016-11-03T01:34:15.000Z","_content":"\n安装工具：`yum install ifstat nload iptraf sysstat`\n\n大多数是因为PHP-ddos木马原因导致发包\n\n`watch ifconfig`　**查看数据包新增情况**\n\n`ifstat`　**查看网卡流量**\n\n|       eth0        ||        eth1         ||       \n|----------|---------|-----------|----------|\n|KB/s in   | KB/s out|  KB/s in  | KB/s out |\n|  407.34  |  154.99 |   134.96  |  324.29  |\n|  274.08  |  191.48 |   210.72  |  248.32  |\n|  240.20  |  192.91 |   257.22  |  179.06  |\n|  136.48  |  236.72 |   203.89  |  179.84  |\n\n`nload`　**以流量图显示**\n\n`iptraf`　**很直观的工具**\n\n[root@ct-nat ~]# `sar -n DEV 1 4` 　**查看4次数据**\n\n`netstat -tu -c`   查看发包的端口\n\n用 **lsof -i :39733** 查看端口的进程，Kill就可以了\n\n一篇博客的解决办法：\n从服务器上使用命令`sar -n DEV 1 4 `，确实出现大量发包的问题，（下边是正常的，异常的情况eth0txpck/s 10000左右了）\n\n先进行限速或者拔掉网线：\n开始之前，先要清除 eth0所有队列规则\n`tc qdisc del dev eth0 root 2> /dev/null > /dev/null`\n\n1) 定义最顶层(根)队列规则，并指定 default 类别编号\n```\ntc qdisc add dev eth0 root handle 1: htb default 20\ntc class add dev eth0 parent 1: classid 1:20 htb rate 2000kbit```\n\n（1KB/s = 8KBit/s）\n\nTC命令格式：\n```\ntc qdisc [ add | change | replace | link ] dev DEV [ parent qdisc-id | root ] [ handle qdisc-id ] qdisc [ qdisc specific parameters ]\n\ntc class [ add | change | replace ] dev DEV parent qdisc-id [ classid class-id ] qdisc [ qdisc specific parameters ]\n\ntc filter [ add | change | replace ] dev DEV [ parent qdisc-id | root ] protocol protocol prio priority filtertype [ filtertype specific parameters ] flowid flow-id```\n\n显示\n```\ntc [-s | -d ] qdisc show [ dev DEV ]\ntc [-s | -d ] class show dev DEV tc filter show dev DEV```\n\n查看TC的状态\n```\ntc -s -d qdisc show dev eth0\ntc -s -d class show dev eth0```\n\n删除tc规则\n\n`tc qdisc del dev eth0 root`\n\n查看状态：\n`top` CPU和MEM都正常，看不出异常的进程。\n\n```\nyum install -y tcpdump\ntcpdump -nn```\n找到大量的IP地址\n\n本机（192.168.35.145）和主机114.114.110.110之间的数据\n`tcpdump -n -i eth0 host 192.168.35.145 and 114.114.110.110`\n\n还有截取全部进入服务器的数据可以使用以下的格式\n`tcpdump -n -i eth0 dst 192.168.35.145`\n\n或者服务器有多个IP 可以使用参数\n`tcpdump -n -i eth0 dst 192.168.35.145  or  192.168.35.155`\n\n我们抓取全部进入服务器的TCP数据包使用以下的格式，大家可以参考下\n`tcpdump -n -i eth0 dst 192.168.35.145 or 192.168.35.155 and tcp`\n\n从本机出去的数据包\n```\ntcpdump -n -i eth0 src 192.168.35.145 or 192.168.35.155\ntcpdump -n -i eth0 src 192.168.35.145 or 192.168.35.155 and port ! 22 and tcp```\n或者可以条件可以是or  和 and  配合使用即可筛选出更好的结果。\n\n可以将异常IP加入到**/etc/hosts.deny**中，或者防火墙设置下\n\n**NetHogs**查看网络使用情况\n```\nwget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\nrpm -Uvh epel-release-6-8.noarch.rpm\nyum clean all\nyum makecache\nyum install nethogs -y\nnethogs```\n\n下图显示各进程当前网络使用情况：\n![](http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%851.jpg)\n\n按“m”键可以切换到统计视图，显示各进程总的网络使用情况\n![](http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%852.jpg)\n\n使用帮助：\n`nethogs --help`\n  \n\tusage: nethogs [-V] [-b] [-d seconds] [-t] [-p] [device [device [device ...]]]  \n\t\t-V : 显示版本信息，注意是大写字母V.  \n\t\t-d : 延迟更新刷新速率，以秒为单位。默认值为 1.  \n\t\t-t : 跟踪模式.  \n\t\t-b : bug 狩猎模式 — — 意味着跟踪模式.  \n\t\t-p : 混合模式（不推荐）.  \n\t\t设备 : 要监视的设备名称. 默认为 eth0  \n\t当 nethogs 运行时, 按:  \n\t\tq: 退出  \n\t\tm: 总数和当前使用情况模式之间切换  \n找到大量发包的进程，之后kill掉，再排查下这个进程是什么程序，文件路径在哪里，删除掉异常的文件。\n\n\n---\n","source":"_posts/系统管理/2016-11-03-服务器入侵肉鸡发包.md","raw":"---\ntitle: 服务器入侵肉鸡发包\ncategories:\n  - 系统管理\ntags:\n  - 服务器入侵肉鸡发包\nabbrlink: 22486\ndate: 2016-11-03 09:34:15\n---\n\n安装工具：`yum install ifstat nload iptraf sysstat`\n\n大多数是因为PHP-ddos木马原因导致发包\n\n`watch ifconfig`　**查看数据包新增情况**\n\n`ifstat`　**查看网卡流量**\n\n|       eth0        ||        eth1         ||       \n|----------|---------|-----------|----------|\n|KB/s in   | KB/s out|  KB/s in  | KB/s out |\n|  407.34  |  154.99 |   134.96  |  324.29  |\n|  274.08  |  191.48 |   210.72  |  248.32  |\n|  240.20  |  192.91 |   257.22  |  179.06  |\n|  136.48  |  236.72 |   203.89  |  179.84  |\n\n`nload`　**以流量图显示**\n\n`iptraf`　**很直观的工具**\n\n[root@ct-nat ~]# `sar -n DEV 1 4` 　**查看4次数据**\n\n`netstat -tu -c`   查看发包的端口\n\n用 **lsof -i :39733** 查看端口的进程，Kill就可以了\n\n一篇博客的解决办法：\n从服务器上使用命令`sar -n DEV 1 4 `，确实出现大量发包的问题，（下边是正常的，异常的情况eth0txpck/s 10000左右了）\n\n先进行限速或者拔掉网线：\n开始之前，先要清除 eth0所有队列规则\n`tc qdisc del dev eth0 root 2> /dev/null > /dev/null`\n\n1) 定义最顶层(根)队列规则，并指定 default 类别编号\n```\ntc qdisc add dev eth0 root handle 1: htb default 20\ntc class add dev eth0 parent 1: classid 1:20 htb rate 2000kbit```\n\n（1KB/s = 8KBit/s）\n\nTC命令格式：\n```\ntc qdisc [ add | change | replace | link ] dev DEV [ parent qdisc-id | root ] [ handle qdisc-id ] qdisc [ qdisc specific parameters ]\n\ntc class [ add | change | replace ] dev DEV parent qdisc-id [ classid class-id ] qdisc [ qdisc specific parameters ]\n\ntc filter [ add | change | replace ] dev DEV [ parent qdisc-id | root ] protocol protocol prio priority filtertype [ filtertype specific parameters ] flowid flow-id```\n\n显示\n```\ntc [-s | -d ] qdisc show [ dev DEV ]\ntc [-s | -d ] class show dev DEV tc filter show dev DEV```\n\n查看TC的状态\n```\ntc -s -d qdisc show dev eth0\ntc -s -d class show dev eth0```\n\n删除tc规则\n\n`tc qdisc del dev eth0 root`\n\n查看状态：\n`top` CPU和MEM都正常，看不出异常的进程。\n\n```\nyum install -y tcpdump\ntcpdump -nn```\n找到大量的IP地址\n\n本机（192.168.35.145）和主机114.114.110.110之间的数据\n`tcpdump -n -i eth0 host 192.168.35.145 and 114.114.110.110`\n\n还有截取全部进入服务器的数据可以使用以下的格式\n`tcpdump -n -i eth0 dst 192.168.35.145`\n\n或者服务器有多个IP 可以使用参数\n`tcpdump -n -i eth0 dst 192.168.35.145  or  192.168.35.155`\n\n我们抓取全部进入服务器的TCP数据包使用以下的格式，大家可以参考下\n`tcpdump -n -i eth0 dst 192.168.35.145 or 192.168.35.155 and tcp`\n\n从本机出去的数据包\n```\ntcpdump -n -i eth0 src 192.168.35.145 or 192.168.35.155\ntcpdump -n -i eth0 src 192.168.35.145 or 192.168.35.155 and port ! 22 and tcp```\n或者可以条件可以是or  和 and  配合使用即可筛选出更好的结果。\n\n可以将异常IP加入到**/etc/hosts.deny**中，或者防火墙设置下\n\n**NetHogs**查看网络使用情况\n```\nwget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\nrpm -Uvh epel-release-6-8.noarch.rpm\nyum clean all\nyum makecache\nyum install nethogs -y\nnethogs```\n\n下图显示各进程当前网络使用情况：\n![](http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%851.jpg)\n\n按“m”键可以切换到统计视图，显示各进程总的网络使用情况\n![](http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%852.jpg)\n\n使用帮助：\n`nethogs --help`\n  \n\tusage: nethogs [-V] [-b] [-d seconds] [-t] [-p] [device [device [device ...]]]  \n\t\t-V : 显示版本信息，注意是大写字母V.  \n\t\t-d : 延迟更新刷新速率，以秒为单位。默认值为 1.  \n\t\t-t : 跟踪模式.  \n\t\t-b : bug 狩猎模式 — — 意味着跟踪模式.  \n\t\t-p : 混合模式（不推荐）.  \n\t\t设备 : 要监视的设备名称. 默认为 eth0  \n\t当 nethogs 运行时, 按:  \n\t\tq: 退出  \n\t\tm: 总数和当前使用情况模式之间切换  \n找到大量发包的进程，之后kill掉，再排查下这个进程是什么程序，文件路径在哪里，删除掉异常的文件。\n\n\n---\n","slug":"系统管理-2016-11-03-服务器入侵肉鸡发包","published":1,"updated":"2016-11-21T02:17:09.132Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjoo003wd8pkn578u1cp","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>安装工具：<code>yum install ifstat nload iptraf sysstat</code></p>\n<p>大多数是因为PHP-ddos木马原因导致发包</p>\n<p><code>watch ifconfig</code>　<strong>查看数据包新增情况</strong></p>\n<p><code>ifstat</code>　<strong>查看网卡流量</strong></p>\n<table>\n<thead>\n<tr>\n<th>eth0</th>\n<th></th>\n<th>eth1</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>KB/s in</td>\n<td>KB/s out</td>\n<td>KB/s in</td>\n<td>KB/s out</td>\n</tr>\n<tr>\n<td>407.34</td>\n<td>154.99</td>\n<td>134.96</td>\n<td>324.29</td>\n</tr>\n<tr>\n<td>274.08</td>\n<td>191.48</td>\n<td>210.72</td>\n<td>248.32</td>\n</tr>\n<tr>\n<td>240.20</td>\n<td>192.91</td>\n<td>257.22</td>\n<td>179.06</td>\n</tr>\n<tr>\n<td>136.48</td>\n<td>236.72</td>\n<td>203.89</td>\n<td>179.84</td>\n</tr>\n</tbody>\n</table>\n<p><code>nload</code>　<strong>以流量图显示</strong></p>\n<p><code>iptraf</code>　<strong>很直观的工具</strong></p>\n<p>[root@ct-nat ~]# <code>sar -n DEV 1 4</code> 　<strong>查看4次数据</strong></p>\n<p><code>netstat -tu -c</code>   查看发包的端口</p>\n<p>用 <strong>lsof -i :39733</strong> 查看端口的进程，Kill就可以了</p>\n<p>一篇博客的解决办法：<br>从服务器上使用命令<code>sar -n DEV 1 4</code>，确实出现大量发包的问题，（下边是正常的，异常的情况eth0txpck/s 10000左右了）</p>\n<p>先进行限速或者拔掉网线：<br>开始之前，先要清除 eth0所有队列规则<br><code>tc qdisc del dev eth0 root 2&gt; /dev/null &gt; /dev/null</code></p>\n<p>1) 定义最顶层(根)队列规则，并指定 default 类别编号<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc qdisc <span class=\"keyword\">add</span><span class=\"bash\"> dev eth0 root handle 1: htb default 20</span></div><div class=\"line\">tc class <span class=\"keyword\">add</span><span class=\"bash\"> dev eth0 parent 1: classid 1:20 htb rate 2000kbit</span></div></pre></td></tr></table></figure></p>\n<p>（1KB/s = 8KBit/s）</p>\n<p>TC命令格式：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc qdisc [ add | <span class=\"keyword\">change</span> | <span class=\"keyword\">replace</span> | <span class=\"keyword\">link</span> ] dev DEV [ <span class=\"keyword\">parent</span> qdisc-<span class=\"keyword\">id</span> | root ] [ handle qdisc-<span class=\"keyword\">id</span> ] qdisc [ qdisc specific <span class=\"keyword\">parameters</span> ]</div><div class=\"line\"></div><div class=\"line\">tc <span class=\"keyword\">class</span> [ <span class=\"keyword\">add</span> | <span class=\"keyword\">change</span> | <span class=\"keyword\">replace</span> ] dev DEV <span class=\"keyword\">parent</span> qdisc-<span class=\"keyword\">id</span> [ classid <span class=\"keyword\">class</span>-<span class=\"keyword\">id</span> ] qdisc [ qdisc specific <span class=\"keyword\">parameters</span> ]</div><div class=\"line\"></div><div class=\"line\">tc filter [ <span class=\"keyword\">add</span> | <span class=\"keyword\">change</span> | <span class=\"keyword\">replace</span> ] dev DEV [ <span class=\"keyword\">parent</span> qdisc-<span class=\"keyword\">id</span> | root ] protocol protocol prio <span class=\"keyword\">priority</span> filtertype [ filtertype specific <span class=\"keyword\">parameters</span> ] flowid flow-<span class=\"keyword\">id</span></div></pre></td></tr></table></figure></p>\n<p>显示<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc [-s | -d ] qdisc <span class=\"built_in\">show</span> [ <span class=\"built_in\">dev</span> DEV ]</div><div class=\"line\">tc [-s | -d ] class <span class=\"built_in\">show</span> <span class=\"built_in\">dev</span> DEV tc filter <span class=\"built_in\">show</span> <span class=\"built_in\">dev</span> DEV</div></pre></td></tr></table></figure></p>\n<p>查看TC的状态<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc <span class=\"_\">-s</span> <span class=\"_\">-d</span> qdisc show dev eth0</div><div class=\"line\">tc <span class=\"_\">-s</span> <span class=\"_\">-d</span> class show dev eth0</div></pre></td></tr></table></figure></p>\n<p>删除tc规则</p>\n<p><code>tc qdisc del dev eth0 root</code></p>\n<p>查看状态：<br><code>top</code> CPU和MEM都正常，看不出异常的进程。</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> -y tcpdump</div><div class=\"line\">tcpdump -nn</div></pre></td></tr></table></figure>\n<p>找到大量的IP地址</p>\n<p>本机（192.168.35.145）和主机114.114.110.110之间的数据<br><code>tcpdump -n -i eth0 host 192.168.35.145 and 114.114.110.110</code></p>\n<p>还有截取全部进入服务器的数据可以使用以下的格式<br><code>tcpdump -n -i eth0 dst 192.168.35.145</code></p>\n<p>或者服务器有多个IP 可以使用参数<br><code>tcpdump -n -i eth0 dst 192.168.35.145  or  192.168.35.155</code></p>\n<p>我们抓取全部进入服务器的TCP数据包使用以下的格式，大家可以参考下<br><code>tcpdump -n -i eth0 dst 192.168.35.145 or 192.168.35.155 and tcp</code></p>\n<p>从本机出去的数据包<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tcpdump -n -i eth0 src <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.145</span> or <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.155</span></div><div class=\"line\">tcpdump -n -i eth0 src <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.145</span> or <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.155</span> and port ! <span class=\"number\">22</span> and tcp</div></pre></td></tr></table></figure></p>\n<p>或者可以条件可以是or  和 and  配合使用即可筛选出更好的结果。</p>\n<p>可以将异常IP加入到<strong>/etc/hosts.deny</strong>中，或者防火墙设置下</p>\n<p><strong>NetHogs</strong>查看网络使用情况<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http:<span class=\"comment\">//dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</span></div><div class=\"line\">rpm -Uvh epel-release-<span class=\"number\">6</span>-<span class=\"number\">8</span><span class=\"selector-class\">.noarch</span><span class=\"selector-class\">.rpm</span></div><div class=\"line\">yum clean all</div><div class=\"line\">yum makecache</div><div class=\"line\">yum install nethogs -y</div><div class=\"line\">nethogs</div></pre></td></tr></table></figure></p>\n<p>下图显示各进程当前网络使用情况：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%851.jpg\" alt=\"\"></p>\n<p>按“m”键可以切换到统计视图，显示各进程总的网络使用情况<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%852.jpg\" alt=\"\"></p>\n<p>使用帮助：<br><code>nethogs --help</code></p>\n<pre><code>usage: nethogs [-V] [-b] [-d seconds] [-t] [-p] [device [device [device ...]]]  \n    -V : 显示版本信息，注意是大写字母V.  \n    -d : 延迟更新刷新速率，以秒为单位。默认值为 1.  \n    -t : 跟踪模式.  \n    -b : bug 狩猎模式 — — 意味着跟踪模式.  \n    -p : 混合模式（不推荐）.  \n    设备 : 要监视的设备名称. 默认为 eth0  \n当 nethogs 运行时, 按:  \n    q: 退出  \n    m: 总数和当前使用情况模式之间切换  \n</code></pre><p>找到大量发包的进程，之后kill掉，再排查下这个进程是什么程序，文件路径在哪里，删除掉异常的文件。</p>\n<hr>\n","excerpt":"","more":"<p>安装工具：<code>yum install ifstat nload iptraf sysstat</code></p>\n<p>大多数是因为PHP-ddos木马原因导致发包</p>\n<p><code>watch ifconfig</code>　<strong>查看数据包新增情况</strong></p>\n<p><code>ifstat</code>　<strong>查看网卡流量</strong></p>\n<table>\n<thead>\n<tr>\n<th>eth0</th>\n<th></th>\n<th>eth1</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>KB/s in</td>\n<td>KB/s out</td>\n<td>KB/s in</td>\n<td>KB/s out</td>\n</tr>\n<tr>\n<td>407.34</td>\n<td>154.99</td>\n<td>134.96</td>\n<td>324.29</td>\n</tr>\n<tr>\n<td>274.08</td>\n<td>191.48</td>\n<td>210.72</td>\n<td>248.32</td>\n</tr>\n<tr>\n<td>240.20</td>\n<td>192.91</td>\n<td>257.22</td>\n<td>179.06</td>\n</tr>\n<tr>\n<td>136.48</td>\n<td>236.72</td>\n<td>203.89</td>\n<td>179.84</td>\n</tr>\n</tbody>\n</table>\n<p><code>nload</code>　<strong>以流量图显示</strong></p>\n<p><code>iptraf</code>　<strong>很直观的工具</strong></p>\n<p>[root@ct-nat ~]# <code>sar -n DEV 1 4</code> 　<strong>查看4次数据</strong></p>\n<p><code>netstat -tu -c</code>   查看发包的端口</p>\n<p>用 <strong>lsof -i :39733</strong> 查看端口的进程，Kill就可以了</p>\n<p>一篇博客的解决办法：<br>从服务器上使用命令<code>sar -n DEV 1 4</code>，确实出现大量发包的问题，（下边是正常的，异常的情况eth0txpck/s 10000左右了）</p>\n<p>先进行限速或者拔掉网线：<br>开始之前，先要清除 eth0所有队列规则<br><code>tc qdisc del dev eth0 root 2&gt; /dev/null &gt; /dev/null</code></p>\n<p>1) 定义最顶层(根)队列规则，并指定 default 类别编号<br><figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc qdisc <span class=\"keyword\">add</span><span class=\"bash\"> dev eth0 root handle 1: htb default 20</div><div class=\"line\"></span>tc class <span class=\"keyword\">add</span><span class=\"bash\"> dev eth0 parent 1: classid 1:20 htb rate 2000kbit</span></div></pre></td></tr></table></figure></p>\n<p>（1KB/s = 8KBit/s）</p>\n<p>TC命令格式：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc qdisc [ add | <span class=\"keyword\">change</span> | <span class=\"keyword\">replace</span> | <span class=\"keyword\">link</span> ] dev DEV [ <span class=\"keyword\">parent</span> qdisc-<span class=\"keyword\">id</span> | root ] [ handle qdisc-<span class=\"keyword\">id</span> ] qdisc [ qdisc specific <span class=\"keyword\">parameters</span> ]</div><div class=\"line\"></div><div class=\"line\">tc <span class=\"keyword\">class</span> [ <span class=\"keyword\">add</span> | <span class=\"keyword\">change</span> | <span class=\"keyword\">replace</span> ] dev DEV <span class=\"keyword\">parent</span> qdisc-<span class=\"keyword\">id</span> [ classid <span class=\"keyword\">class</span>-<span class=\"keyword\">id</span> ] qdisc [ qdisc specific <span class=\"keyword\">parameters</span> ]</div><div class=\"line\"></div><div class=\"line\">tc filter [ <span class=\"keyword\">add</span> | <span class=\"keyword\">change</span> | <span class=\"keyword\">replace</span> ] dev DEV [ <span class=\"keyword\">parent</span> qdisc-<span class=\"keyword\">id</span> | root ] protocol protocol prio <span class=\"keyword\">priority</span> filtertype [ filtertype specific <span class=\"keyword\">parameters</span> ] flowid flow-<span class=\"keyword\">id</span></div></pre></td></tr></table></figure></p>\n<p>显示<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc [-s | -d ] qdisc <span class=\"built_in\">show</span> [ <span class=\"built_in\">dev</span> DEV ]</div><div class=\"line\">tc [-s | -d ] class <span class=\"built_in\">show</span> <span class=\"built_in\">dev</span> DEV tc filter <span class=\"built_in\">show</span> <span class=\"built_in\">dev</span> DEV</div></pre></td></tr></table></figure></p>\n<p>查看TC的状态<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tc <span class=\"_\">-s</span> <span class=\"_\">-d</span> qdisc show dev eth0</div><div class=\"line\">tc <span class=\"_\">-s</span> <span class=\"_\">-d</span> class show dev eth0</div></pre></td></tr></table></figure></p>\n<p>删除tc规则</p>\n<p><code>tc qdisc del dev eth0 root</code></p>\n<p>查看状态：<br><code>top</code> CPU和MEM都正常，看不出异常的进程。</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> -y tcpdump</div><div class=\"line\">tcpdump -nn</div></pre></td></tr></table></figure>\n<p>找到大量的IP地址</p>\n<p>本机（192.168.35.145）和主机114.114.110.110之间的数据<br><code>tcpdump -n -i eth0 host 192.168.35.145 and 114.114.110.110</code></p>\n<p>还有截取全部进入服务器的数据可以使用以下的格式<br><code>tcpdump -n -i eth0 dst 192.168.35.145</code></p>\n<p>或者服务器有多个IP 可以使用参数<br><code>tcpdump -n -i eth0 dst 192.168.35.145  or  192.168.35.155</code></p>\n<p>我们抓取全部进入服务器的TCP数据包使用以下的格式，大家可以参考下<br><code>tcpdump -n -i eth0 dst 192.168.35.145 or 192.168.35.155 and tcp</code></p>\n<p>从本机出去的数据包<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">tcpdump -n -i eth0 src <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.145</span> or <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.155</span></div><div class=\"line\">tcpdump -n -i eth0 src <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.145</span> or <span class=\"number\">192.168</span><span class=\"number\">.35</span><span class=\"number\">.155</span> and port ! <span class=\"number\">22</span> and tcp</div></pre></td></tr></table></figure></p>\n<p>或者可以条件可以是or  和 and  配合使用即可筛选出更好的结果。</p>\n<p>可以将异常IP加入到<strong>/etc/hosts.deny</strong>中，或者防火墙设置下</p>\n<p><strong>NetHogs</strong>查看网络使用情况<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget http:<span class=\"comment\">//dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</span></div><div class=\"line\">rpm -Uvh epel-release-<span class=\"number\">6</span>-<span class=\"number\">8</span><span class=\"selector-class\">.noarch</span><span class=\"selector-class\">.rpm</span></div><div class=\"line\">yum clean all</div><div class=\"line\">yum makecache</div><div class=\"line\">yum install nethogs -y</div><div class=\"line\">nethogs</div></pre></td></tr></table></figure></p>\n<p>下图显示各进程当前网络使用情况：<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%851.jpg\" alt=\"\"></p>\n<p>按“m”键可以切换到统计视图，显示各进程总的网络使用情况<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%A5%E4%BE%B5%E8%82%89%E9%B8%A1%E5%8F%91%E5%8C%852.jpg\" alt=\"\"></p>\n<p>使用帮助：<br><code>nethogs --help</code></p>\n<pre><code>usage: nethogs [-V] [-b] [-d seconds] [-t] [-p] [device [device [device ...]]]  \n    -V : 显示版本信息，注意是大写字母V.  \n    -d : 延迟更新刷新速率，以秒为单位。默认值为 1.  \n    -t : 跟踪模式.  \n    -b : bug 狩猎模式 — — 意味着跟踪模式.  \n    -p : 混合模式（不推荐）.  \n    设备 : 要监视的设备名称. 默认为 eth0  \n当 nethogs 运行时, 按:  \n    q: 退出  \n    m: 总数和当前使用情况模式之间切换  \n</code></pre><p>找到大量发包的进程，之后kill掉，再排查下这个进程是什么程序，文件路径在哪里，删除掉异常的文件。</p>\n<hr>\n"},{"title":"Linux各版本root本地密码破解","abbrlink":65067,"date":"2016-11-18T17:09:09.000Z","_content":"\n忘记了root密码可以用此方法修复。\n\n---\n# RedHat/CentOS/Fedora\n　　1.在grub选项菜单**按E**进入编辑模式\n　　2.编辑kernel **那行最后加上S **(或者Single)\n　　3.按B，启动到**single-user mode**模式\n　　4.进入后执行下列命令\n```\nmount -t proc proc /proc\nmount -o remount,rw /\npasswd\nsync\nreboot```\n\n---\n# Debian linux\n　　1.在grub选项菜单**Debian GNU/Linux,…(recovery mode)**，按e进入编辑模式\n　　2.编辑kernel那行最后面的 **ro single** 改成 **rw single init=/bin/bash**，按**b**执行重启\n　　3.进入后执行下列命令\n```\nmount -a\npasswd root\nreboot```\n\n---\n# Freebsd 系统\n　　1.开机进入引导菜单\n　　2.选择每项**(按4)**进入单用户模式\n　　3.进入之后输入一列命令\n```\nmount -a\nfsck -y\npasswd   #(修改密码命令)\nroot     #(要破解密码的用户名)\n#Enter new unix password:\ninit 6   #(重启)```\n\n---\n# Solaris 系统\n　　1.在grub选项菜中选择**solaris failasfe** 项\n　　2.系统提示Do you wish to have it mounted read-write on /a ?[y,n,?] 选择y\n　　3.就进入单用户模式\n　　4.输入下列命令:`passwd`\n　　5.`init 6` (重启)\n\n---\n# NetBsd 系统\n　　1.开机：当出现提示符号并开始倒数五秒时， 键入以下指令：\n　　> **boot -s **(进入单用户模式命令)\n　　2.在以下的提示符号中\n　　Enter pathname of shell or RETURN for sh:\n　　按下 Enter。\n　　3.键入以下指令：\n```\nmount -a\nfsck -y```\n　　4.使用 `passwd` 更改 root 的密码。\n　　5.使用 `exit` 指令进入多人模式。\n\n---\n# SUSE 系统\n　　1.重新启动机器，在出现grub引导界面后，在启动linux的选项里加上**init=/bin/bash**，通过给内核传递init=/bin/bash参数使得OS在运行login程序之前运行bash，出现命令行。\n　　2.稍等片刻出现(none)#:**命令行**。\n　　3.这时输入`mount -n / -o remount,rw` 表示将根文件系统重新mount为可读写，有了读写权限后就可以通过passwd命令修改密码了。\n　　4.这时输入`passwd`命令就可以重置密码了\n　　5.修改完成后记得用`mount -n / -o remount,ro`将根文件系统置为原来的状态。\n\n\n---\n\n\n\n\n","source":"_posts/系统管理/2016-11-19-Linux各版本root本地密码破解.md","raw":"---\ntitle: Linux各版本root本地密码破解\ncategories:\n  - 系统管理\ntags:\n  - Linux各版本root本地密码破解\n  - root密码破解\nabbrlink: 65067\ndate: 2016-11-19 01:09:09\n---\n\n忘记了root密码可以用此方法修复。\n\n---\n# RedHat/CentOS/Fedora\n　　1.在grub选项菜单**按E**进入编辑模式\n　　2.编辑kernel **那行最后加上S **(或者Single)\n　　3.按B，启动到**single-user mode**模式\n　　4.进入后执行下列命令\n```\nmount -t proc proc /proc\nmount -o remount,rw /\npasswd\nsync\nreboot```\n\n---\n# Debian linux\n　　1.在grub选项菜单**Debian GNU/Linux,…(recovery mode)**，按e进入编辑模式\n　　2.编辑kernel那行最后面的 **ro single** 改成 **rw single init=/bin/bash**，按**b**执行重启\n　　3.进入后执行下列命令\n```\nmount -a\npasswd root\nreboot```\n\n---\n# Freebsd 系统\n　　1.开机进入引导菜单\n　　2.选择每项**(按4)**进入单用户模式\n　　3.进入之后输入一列命令\n```\nmount -a\nfsck -y\npasswd   #(修改密码命令)\nroot     #(要破解密码的用户名)\n#Enter new unix password:\ninit 6   #(重启)```\n\n---\n# Solaris 系统\n　　1.在grub选项菜中选择**solaris failasfe** 项\n　　2.系统提示Do you wish to have it mounted read-write on /a ?[y,n,?] 选择y\n　　3.就进入单用户模式\n　　4.输入下列命令:`passwd`\n　　5.`init 6` (重启)\n\n---\n# NetBsd 系统\n　　1.开机：当出现提示符号并开始倒数五秒时， 键入以下指令：\n　　> **boot -s **(进入单用户模式命令)\n　　2.在以下的提示符号中\n　　Enter pathname of shell or RETURN for sh:\n　　按下 Enter。\n　　3.键入以下指令：\n```\nmount -a\nfsck -y```\n　　4.使用 `passwd` 更改 root 的密码。\n　　5.使用 `exit` 指令进入多人模式。\n\n---\n# SUSE 系统\n　　1.重新启动机器，在出现grub引导界面后，在启动linux的选项里加上**init=/bin/bash**，通过给内核传递init=/bin/bash参数使得OS在运行login程序之前运行bash，出现命令行。\n　　2.稍等片刻出现(none)#:**命令行**。\n　　3.这时输入`mount -n / -o remount,rw` 表示将根文件系统重新mount为可读写，有了读写权限后就可以通过passwd命令修改密码了。\n　　4.这时输入`passwd`命令就可以重置密码了\n　　5.修改完成后记得用`mount -n / -o remount,ro`将根文件系统置为原来的状态。\n\n\n---\n\n\n\n\n","slug":"系统管理-2016-11-19-Linux各版本root本地密码破解","published":1,"updated":"2016-11-21T02:17:09.150Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjoq003zd8pk15nga6wt","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>忘记了root密码可以用此方法修复。</p>\n<hr>\n<h1 id=\"RedHat-CentOS-Fedora\"><a href=\"#RedHat-CentOS-Fedora\" class=\"headerlink\" title=\"RedHat/CentOS/Fedora\"></a>RedHat/CentOS/Fedora</h1><p>　　1.在grub选项菜单<strong>按E</strong>进入编辑模式<br>　　2.编辑kernel <strong>那行最后加上S </strong>(或者Single)<br>　　3.按B，启动到<strong>single-user mode</strong>模式<br>　　4.进入后执行下列命令<br><figure class=\"highlight tcl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -t <span class=\"keyword\">proc</span><span class=\"title\"> proc</span> /<span class=\"keyword\">proc</span><span class=\"title\"></span></div><div class=\"line\">mount -o<span class=\"title\"> remount,rw</span> /<span class=\"title\"></span></div><div class=\"line\">passwd</div><div class=\"line\">sync<span class=\"title\"></span></div><div class=\"line\">reboot</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Debian-linux\"><a href=\"#Debian-linux\" class=\"headerlink\" title=\"Debian linux\"></a>Debian linux</h1><p>　　1.在grub选项菜单<strong>Debian GNU/Linux,…(recovery mode)</strong>，按e进入编辑模式<br>　　2.编辑kernel那行最后面的 <strong>ro single</strong> 改成 <strong>rw single init=/bin/bash</strong>，按<strong>b</strong>执行重启<br>　　3.进入后执行下列命令<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -<span class=\"selector-tag\">a</span></div><div class=\"line\">passwd root</div><div class=\"line\">reboot</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Freebsd-系统\"><a href=\"#Freebsd-系统\" class=\"headerlink\" title=\"Freebsd 系统\"></a>Freebsd 系统</h1><p>　　1.开机进入引导菜单<br>　　2.选择每项<strong>(按4)</strong>进入单用户模式<br>　　3.进入之后输入一列命令<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount <span class=\"_\">-a</span></div><div class=\"line\">fsck -y</div><div class=\"line\">passwd   <span class=\"comment\">#(修改密码命令)</span></div><div class=\"line\">root     <span class=\"comment\">#(要破解密码的用户名)</span></div><div class=\"line\"><span class=\"comment\">#Enter new unix password:</span></div><div class=\"line\">init 6   <span class=\"comment\">#(重启)</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Solaris-系统\"><a href=\"#Solaris-系统\" class=\"headerlink\" title=\"Solaris 系统\"></a>Solaris 系统</h1><p>　　1.在grub选项菜中选择<strong>solaris failasfe</strong> 项<br>　　2.系统提示Do you wish to have it mounted read-write on /a ?[y,n,?] 选择y<br>　　3.就进入单用户模式<br>　　4.输入下列命令:<code>passwd</code><br>　　5.<code>init 6</code> (重启)</p>\n<hr>\n<h1 id=\"NetBsd-系统\"><a href=\"#NetBsd-系统\" class=\"headerlink\" title=\"NetBsd 系统\"></a>NetBsd 系统</h1><p>　　1.开机：当出现提示符号并开始倒数五秒时， 键入以下指令：<br>　　&gt; <strong>boot -s </strong>(进入单用户模式命令)<br>　　2.在以下的提示符号中<br>　　Enter pathname of shell or RETURN for sh:<br>　　按下 Enter。<br>　　3.键入以下指令：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -<span class=\"selector-tag\">a</span></div><div class=\"line\">fsck -y</div></pre></td></tr></table></figure></p>\n<p>　　4.使用 <code>passwd</code> 更改 root 的密码。<br>　　5.使用 <code>exit</code> 指令进入多人模式。</p>\n<hr>\n<h1 id=\"SUSE-系统\"><a href=\"#SUSE-系统\" class=\"headerlink\" title=\"SUSE 系统\"></a>SUSE 系统</h1><p>　　1.重新启动机器，在出现grub引导界面后，在启动linux的选项里加上<strong>init=/bin/bash</strong>，通过给内核传递init=/bin/bash参数使得OS在运行login程序之前运行bash，出现命令行。<br>　　2.稍等片刻出现(none)#:<strong>命令行</strong>。<br>　　3.这时输入<code>mount -n / -o remount,rw</code> 表示将根文件系统重新mount为可读写，有了读写权限后就可以通过passwd命令修改密码了。<br>　　4.这时输入<code>passwd</code>命令就可以重置密码了<br>　　5.修改完成后记得用<code>mount -n / -o remount,ro</code>将根文件系统置为原来的状态。</p>\n<hr>\n","excerpt":"","more":"<p>忘记了root密码可以用此方法修复。</p>\n<hr>\n<h1 id=\"RedHat-CentOS-Fedora\"><a href=\"#RedHat-CentOS-Fedora\" class=\"headerlink\" title=\"RedHat/CentOS/Fedora\"></a>RedHat/CentOS/Fedora</h1><p>　　1.在grub选项菜单<strong>按E</strong>进入编辑模式<br>　　2.编辑kernel <strong>那行最后加上S </strong>(或者Single)<br>　　3.按B，启动到<strong>single-user mode</strong>模式<br>　　4.进入后执行下列命令<br><figure class=\"highlight tcl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -t <span class=\"keyword\">proc</span><span class=\"title\"> proc</span> /<span class=\"keyword\">proc</span><span class=\"title\"></div><div class=\"line\">mount</span> -o<span class=\"title\"> remount,rw</span> /<span class=\"title\"></div><div class=\"line\">passwd</span></div><div class=\"line\">sync<span class=\"title\"></div><div class=\"line\">reboot</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Debian-linux\"><a href=\"#Debian-linux\" class=\"headerlink\" title=\"Debian linux\"></a>Debian linux</h1><p>　　1.在grub选项菜单<strong>Debian GNU/Linux,…(recovery mode)</strong>，按e进入编辑模式<br>　　2.编辑kernel那行最后面的 <strong>ro single</strong> 改成 <strong>rw single init=/bin/bash</strong>，按<strong>b</strong>执行重启<br>　　3.进入后执行下列命令<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -<span class=\"selector-tag\">a</span></div><div class=\"line\">passwd root</div><div class=\"line\">reboot</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Freebsd-系统\"><a href=\"#Freebsd-系统\" class=\"headerlink\" title=\"Freebsd 系统\"></a>Freebsd 系统</h1><p>　　1.开机进入引导菜单<br>　　2.选择每项<strong>(按4)</strong>进入单用户模式<br>　　3.进入之后输入一列命令<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount <span class=\"_\">-a</span></div><div class=\"line\">fsck -y</div><div class=\"line\">passwd   <span class=\"comment\">#(修改密码命令)</span></div><div class=\"line\">root     <span class=\"comment\">#(要破解密码的用户名)</span></div><div class=\"line\"><span class=\"comment\">#Enter new unix password:</span></div><div class=\"line\">init 6   <span class=\"comment\">#(重启)</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Solaris-系统\"><a href=\"#Solaris-系统\" class=\"headerlink\" title=\"Solaris 系统\"></a>Solaris 系统</h1><p>　　1.在grub选项菜中选择<strong>solaris failasfe</strong> 项<br>　　2.系统提示Do you wish to have it mounted read-write on /a ?[y,n,?] 选择y<br>　　3.就进入单用户模式<br>　　4.输入下列命令:<code>passwd</code><br>　　5.<code>init 6</code> (重启)</p>\n<hr>\n<h1 id=\"NetBsd-系统\"><a href=\"#NetBsd-系统\" class=\"headerlink\" title=\"NetBsd 系统\"></a>NetBsd 系统</h1><p>　　1.开机：当出现提示符号并开始倒数五秒时， 键入以下指令：<br>　　&gt; <strong>boot -s </strong>(进入单用户模式命令)<br>　　2.在以下的提示符号中<br>　　Enter pathname of shell or RETURN for sh:<br>　　按下 Enter。<br>　　3.键入以下指令：<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -<span class=\"selector-tag\">a</span></div><div class=\"line\">fsck -y</div></pre></td></tr></table></figure></p>\n<p>　　4.使用 <code>passwd</code> 更改 root 的密码。<br>　　5.使用 <code>exit</code> 指令进入多人模式。</p>\n<hr>\n<h1 id=\"SUSE-系统\"><a href=\"#SUSE-系统\" class=\"headerlink\" title=\"SUSE 系统\"></a>SUSE 系统</h1><p>　　1.重新启动机器，在出现grub引导界面后，在启动linux的选项里加上<strong>init=/bin/bash</strong>，通过给内核传递init=/bin/bash参数使得OS在运行login程序之前运行bash，出现命令行。<br>　　2.稍等片刻出现(none)#:<strong>命令行</strong>。<br>　　3.这时输入<code>mount -n / -o remount,rw</code> 表示将根文件系统重新mount为可读写，有了读写权限后就可以通过passwd命令修改密码了。<br>　　4.这时输入<code>passwd</code>命令就可以重置密码了<br>　　5.修改完成后记得用<code>mount -n / -o remount,ro</code>将根文件系统置为原来的状态。</p>\n<hr>\n"},{"title":"Docker常用命令","abbrlink":7569,"date":"2016-11-03T07:53:27.000Z","_content":"\n\nDocker是基于容器的，直接用带有相应功能的镜像就行，而不必运行Docker容器来自己搭建环境那么麻烦。\nDocker 中文网 http://www.docker.org.cn\n\n# 查看docker信息\n\n## 查看docker版本  \n`docker version`\n## 显示docker系统的信息  \n`docker info ` \n\n# 对image的操作\n## 检索、搜索image  \n`docker search image_name  `\n## 下载image  \n`docker pull image_name   `\n## 列出镜像列表  \n`docker images `\n参数：\n* -a, --all=false Show all images; \n* --no-trunc=false Don't truncate output; \n* -q, --quiet=false Only show numeric IDs \n\n## 删除一个或者多个镜像  \n`docker rmi image_name`\n（第六节是删除容器，注意两者区别）\n参数:\n-f, --force=false Force; \n--no-prune=false Do not delete untagged parents  \n\n## 显示一个镜像的历史 \n`docker history image_name`\n参数：\n--no-trunc=false Don't truncate output; \n-q, --quiet=false Only show numeric IDs  \n\n# 启动容器\n\ndocker容器可以理解为在沙盒中运行的进程。这个沙盒包含了该进程运行所必须的资源，包括文件系统、系统类库、shell 环境等等。但这个沙盒默认是不会运行任何程序的。你需要在沙盒中运行一个进程来启动某一个容器。这个进程是该容器的唯一进程，所以当该进程结束的时候，容器也会完全的停止。\n\n\n## 在容器中运行\"echo\"命令，输出\"hello word\"  \n`docker run image_name echo \"hello word\" ` \n\n## 交互式进入容器中  \n`docker run -i -t image_name /bin/bash  `\n  \n## 在容器中安装新的程序  \n`docker run image_name apt-get install -y app_name ` \n\nNote：  **Ubuntu在执行apt-get 命令的时候，要带上-y参数。如果不指定-y参数的话，apt-get命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。**apt-get 命令执行完毕之后，容器就会停止，但对容器的改动不会丢失。\n\n# 查看容器（ps）\n## 列出当前所有正在运行的container  \n`docker ps ` \n## 列出所有的container  \n`docker ps -a  `\n## 列出最近一次启动的container  \n`docker ps -l ` \n\n# 保存对容器的修改（commit）\n当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。\n## 保存对容器的修改\n`docker commit ID new_image_name `\n参数：\n* -a, --author=\"\" Author; \n* -m, --message=\"\" Commit message  \n\nNote：  image相当于类，container相当于实例，不过可以动态给实例安装新软件，然后把这个container用commit命令固化成一个image。\n\n# 对容器的操作\n## 删除所有容器 \n\tdocker rm `docker ps -a -q`\n（删除的是容器，而不是镜像；注意容器和镜像的区别，一个镜像可以创建多个容器。删除镜像用rmi命令）    \n## 删除单个容器参数：\n`docker rm Name/ID  `\n参数：\n* **-f, --force=false** \n* **-l, --link=false** Remove the specified link and not the underlying container; \n* **-v, --volumes=false** Remove the volumes associated to the container  \n\n## 停止、启动、杀死一个容器  \n```\ndocker stop Name/ID  \ndocker start Name/ID  \ndocker kill Name/ID  ```\n  \n## 从一个容器中取日志\n`docker logs Name/ID ` \n参数：\n* **-f, --follow=false** Follow log output; \n* **-t, --timestamps=false** Show timestamps  \n \n## 列出一个容器里面被改变的文件或者目录\n`docker diff Name/ID  `\n（list列表会显示出三种事件，A 增加的，D 删除的，C 被改变的）\n\n## 显示一个运行的容器里面的进程信息  \n`docker top Name/ID  `\n  \n## 从容器里面拷贝文件/目录到本地一个路径  \n`docker cp Name:/container_path to_path ` \n或者：\n`docker cp ID:/container_path to_path  `\n\n## 重启一个正在运行的容器\n`docker restart Name/ID ` \n参数：\n* **-t, --time=10** Number of seconds to try to stop for before killing the container, Default=10  \n\n## 附加到一个运行的容器上面 \n`docker attach ID ` \n参数：\n* **--no-stdin=false** Do not attach stdin; \n* **--sig-proxy=true** Proxify all received signal to the process  \n\nNote： attach命令允许你查看或者影响一个运行的容器。你可以在同一时间attach同一个容器。你也可以从一个容器中脱离出来，是从CTRL-C。\n\n\n# 保存和加载镜像（save、load）\n当需要把一台机器上的镜像迁移到另一台机器的时候，需要保存镜像与加载镜像。\n## 保存镜像到一个tar包\n`docker save image_name -o file_path`\n参数：\n* **-o, --output=\"\"** Write to an file  \n  \n## 加载一个tar包格式的镜像\n`docker load -i file_path ` \n参数：\n* **-i, --input=\"\"** Read from a tar archive file  \n \n## A、B机器间拷贝数据\n机器a  \n`docker save image_name > /home/save.tar ` \n使用scp将save.tar拷到机器b上，然后：  \n`docker load < /home/save.tar  `\n\n# 登录registry server（login）\n## 登陆registry server\n`docker login`  \n参数：\n* **-e, --email=\"\"** Email; \n* **-p, --password=\"\"** Password; \n* **-u, --username=\"\"** Username  \n\n# 发布image（push）\n## 发布docker镜像  \n`docker push new_image_name  `\n\n# 根据Dockerfile 构建出一个容器\n## build  \n`docker build -t image_name Dockerfile_path`  \n参数：\n* **--no-cache=false** Do not use cache when building the image\n* **-q, --quiet=false** Suppress the verbose output generated by the containers\n* **--rm=true** Remove intermediate containers after a successful build\n* **-t, --tag=\"\"** Repository name (and optionally a tag) to be applied to the resulting image in case of success  \n\n---\n\n# 参考资料：\n搭建Docker环境:\n搭建Java Web环境：http://www.open-open.com/lib/view/open1422413794439.html\nDocker搭建私有仓库：http://blog.csdn.net/wangtaoking1/article/details/44180901\n搭建WordPress站点：https://linux.cn/article-5560-1.html\n\ndocker常用命令:\nhttp://www.cnblogs.com/ivictor/archive/2015/09/08/4791274.html\n\n\n\n---\n\n","source":"_posts/虚拟化/2016-11-03-Docker常用命令.md","raw":"---\ntitle: Docker常用命令\ncategories:\n  - 虚拟化\ntags:\n  - Docker常用命令\nabbrlink: 7569\ndate: 2016-11-03 15:53:27\n---\n\n\nDocker是基于容器的，直接用带有相应功能的镜像就行，而不必运行Docker容器来自己搭建环境那么麻烦。\nDocker 中文网 http://www.docker.org.cn\n\n# 查看docker信息\n\n## 查看docker版本  \n`docker version`\n## 显示docker系统的信息  \n`docker info ` \n\n# 对image的操作\n## 检索、搜索image  \n`docker search image_name  `\n## 下载image  \n`docker pull image_name   `\n## 列出镜像列表  \n`docker images `\n参数：\n* -a, --all=false Show all images; \n* --no-trunc=false Don't truncate output; \n* -q, --quiet=false Only show numeric IDs \n\n## 删除一个或者多个镜像  \n`docker rmi image_name`\n（第六节是删除容器，注意两者区别）\n参数:\n-f, --force=false Force; \n--no-prune=false Do not delete untagged parents  \n\n## 显示一个镜像的历史 \n`docker history image_name`\n参数：\n--no-trunc=false Don't truncate output; \n-q, --quiet=false Only show numeric IDs  \n\n# 启动容器\n\ndocker容器可以理解为在沙盒中运行的进程。这个沙盒包含了该进程运行所必须的资源，包括文件系统、系统类库、shell 环境等等。但这个沙盒默认是不会运行任何程序的。你需要在沙盒中运行一个进程来启动某一个容器。这个进程是该容器的唯一进程，所以当该进程结束的时候，容器也会完全的停止。\n\n\n## 在容器中运行\"echo\"命令，输出\"hello word\"  \n`docker run image_name echo \"hello word\" ` \n\n## 交互式进入容器中  \n`docker run -i -t image_name /bin/bash  `\n  \n## 在容器中安装新的程序  \n`docker run image_name apt-get install -y app_name ` \n\nNote：  **Ubuntu在执行apt-get 命令的时候，要带上-y参数。如果不指定-y参数的话，apt-get命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。**apt-get 命令执行完毕之后，容器就会停止，但对容器的改动不会丢失。\n\n# 查看容器（ps）\n## 列出当前所有正在运行的container  \n`docker ps ` \n## 列出所有的container  \n`docker ps -a  `\n## 列出最近一次启动的container  \n`docker ps -l ` \n\n# 保存对容器的修改（commit）\n当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。\n## 保存对容器的修改\n`docker commit ID new_image_name `\n参数：\n* -a, --author=\"\" Author; \n* -m, --message=\"\" Commit message  \n\nNote：  image相当于类，container相当于实例，不过可以动态给实例安装新软件，然后把这个container用commit命令固化成一个image。\n\n# 对容器的操作\n## 删除所有容器 \n\tdocker rm `docker ps -a -q`\n（删除的是容器，而不是镜像；注意容器和镜像的区别，一个镜像可以创建多个容器。删除镜像用rmi命令）    \n## 删除单个容器参数：\n`docker rm Name/ID  `\n参数：\n* **-f, --force=false** \n* **-l, --link=false** Remove the specified link and not the underlying container; \n* **-v, --volumes=false** Remove the volumes associated to the container  \n\n## 停止、启动、杀死一个容器  \n```\ndocker stop Name/ID  \ndocker start Name/ID  \ndocker kill Name/ID  ```\n  \n## 从一个容器中取日志\n`docker logs Name/ID ` \n参数：\n* **-f, --follow=false** Follow log output; \n* **-t, --timestamps=false** Show timestamps  \n \n## 列出一个容器里面被改变的文件或者目录\n`docker diff Name/ID  `\n（list列表会显示出三种事件，A 增加的，D 删除的，C 被改变的）\n\n## 显示一个运行的容器里面的进程信息  \n`docker top Name/ID  `\n  \n## 从容器里面拷贝文件/目录到本地一个路径  \n`docker cp Name:/container_path to_path ` \n或者：\n`docker cp ID:/container_path to_path  `\n\n## 重启一个正在运行的容器\n`docker restart Name/ID ` \n参数：\n* **-t, --time=10** Number of seconds to try to stop for before killing the container, Default=10  \n\n## 附加到一个运行的容器上面 \n`docker attach ID ` \n参数：\n* **--no-stdin=false** Do not attach stdin; \n* **--sig-proxy=true** Proxify all received signal to the process  \n\nNote： attach命令允许你查看或者影响一个运行的容器。你可以在同一时间attach同一个容器。你也可以从一个容器中脱离出来，是从CTRL-C。\n\n\n# 保存和加载镜像（save、load）\n当需要把一台机器上的镜像迁移到另一台机器的时候，需要保存镜像与加载镜像。\n## 保存镜像到一个tar包\n`docker save image_name -o file_path`\n参数：\n* **-o, --output=\"\"** Write to an file  \n  \n## 加载一个tar包格式的镜像\n`docker load -i file_path ` \n参数：\n* **-i, --input=\"\"** Read from a tar archive file  \n \n## A、B机器间拷贝数据\n机器a  \n`docker save image_name > /home/save.tar ` \n使用scp将save.tar拷到机器b上，然后：  \n`docker load < /home/save.tar  `\n\n# 登录registry server（login）\n## 登陆registry server\n`docker login`  \n参数：\n* **-e, --email=\"\"** Email; \n* **-p, --password=\"\"** Password; \n* **-u, --username=\"\"** Username  \n\n# 发布image（push）\n## 发布docker镜像  \n`docker push new_image_name  `\n\n# 根据Dockerfile 构建出一个容器\n## build  \n`docker build -t image_name Dockerfile_path`  \n参数：\n* **--no-cache=false** Do not use cache when building the image\n* **-q, --quiet=false** Suppress the verbose output generated by the containers\n* **--rm=true** Remove intermediate containers after a successful build\n* **-t, --tag=\"\"** Repository name (and optionally a tag) to be applied to the resulting image in case of success  \n\n---\n\n# 参考资料：\n搭建Docker环境:\n搭建Java Web环境：http://www.open-open.com/lib/view/open1422413794439.html\nDocker搭建私有仓库：http://blog.csdn.net/wangtaoking1/article/details/44180901\n搭建WordPress站点：https://linux.cn/article-5560-1.html\n\ndocker常用命令:\nhttp://www.cnblogs.com/ivictor/archive/2015/09/08/4791274.html\n\n\n\n---\n\n","slug":"虚拟化-2016-11-03-Docker常用命令","published":1,"updated":"2016-11-21T02:17:09.160Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjos0043d8pknqxagfyb","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>Docker是基于容器的，直接用带有相应功能的镜像就行，而不必运行Docker容器来自己搭建环境那么麻烦。<br>Docker 中文网 <a href=\"http://www.docker.org.cn\" target=\"_blank\" rel=\"external\">http://www.docker.org.cn</a></p>\n<h1 id=\"查看docker信息\"><a href=\"#查看docker信息\" class=\"headerlink\" title=\"查看docker信息\"></a>查看docker信息</h1><h2 id=\"查看docker版本\"><a href=\"#查看docker版本\" class=\"headerlink\" title=\"查看docker版本\"></a>查看docker版本</h2><p><code>docker version</code></p>\n<h2 id=\"显示docker系统的信息\"><a href=\"#显示docker系统的信息\" class=\"headerlink\" title=\"显示docker系统的信息\"></a>显示docker系统的信息</h2><p><code>docker info</code> </p>\n<h1 id=\"对image的操作\"><a href=\"#对image的操作\" class=\"headerlink\" title=\"对image的操作\"></a>对image的操作</h1><h2 id=\"检索、搜索image\"><a href=\"#检索、搜索image\" class=\"headerlink\" title=\"检索、搜索image\"></a>检索、搜索image</h2><p><code>docker search image_name</code></p>\n<h2 id=\"下载image\"><a href=\"#下载image\" class=\"headerlink\" title=\"下载image\"></a>下载image</h2><p><code>docker pull image_name</code></p>\n<h2 id=\"列出镜像列表\"><a href=\"#列出镜像列表\" class=\"headerlink\" title=\"列出镜像列表\"></a>列出镜像列表</h2><p><code>docker images</code><br>参数：</p>\n<ul>\n<li>-a, –all=false Show all images; </li>\n<li>–no-trunc=false Don’t truncate output; </li>\n<li>-q, –quiet=false Only show numeric IDs </li>\n</ul>\n<h2 id=\"删除一个或者多个镜像\"><a href=\"#删除一个或者多个镜像\" class=\"headerlink\" title=\"删除一个或者多个镜像\"></a>删除一个或者多个镜像</h2><p><code>docker rmi image_name</code><br>（第六节是删除容器，注意两者区别）<br>参数:<br>-f, –force=false Force;<br>–no-prune=false Do not delete untagged parents  </p>\n<h2 id=\"显示一个镜像的历史\"><a href=\"#显示一个镜像的历史\" class=\"headerlink\" title=\"显示一个镜像的历史\"></a>显示一个镜像的历史</h2><p><code>docker history image_name</code><br>参数：<br>–no-trunc=false Don’t truncate output;<br>-q, –quiet=false Only show numeric IDs  </p>\n<h1 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h1><p>docker容器可以理解为在沙盒中运行的进程。这个沙盒包含了该进程运行所必须的资源，包括文件系统、系统类库、shell 环境等等。但这个沙盒默认是不会运行任何程序的。你需要在沙盒中运行一个进程来启动某一个容器。这个进程是该容器的唯一进程，所以当该进程结束的时候，容器也会完全的停止。</p>\n<h2 id=\"在容器中运行”echo”命令，输出”hello-word”\"><a href=\"#在容器中运行”echo”命令，输出”hello-word”\" class=\"headerlink\" title=\"在容器中运行”echo”命令，输出”hello word”\"></a>在容器中运行”echo”命令，输出”hello word”</h2><p><code>docker run image_name echo &quot;hello word&quot;</code> </p>\n<h2 id=\"交互式进入容器中\"><a href=\"#交互式进入容器中\" class=\"headerlink\" title=\"交互式进入容器中\"></a>交互式进入容器中</h2><p><code>docker run -i -t image_name /bin/bash</code></p>\n<h2 id=\"在容器中安装新的程序\"><a href=\"#在容器中安装新的程序\" class=\"headerlink\" title=\"在容器中安装新的程序\"></a>在容器中安装新的程序</h2><p><code>docker run image_name apt-get install -y app_name</code> </p>\n<p>Note：  <strong>Ubuntu在执行apt-get 命令的时候，要带上-y参数。如果不指定-y参数的话，apt-get命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。</strong>apt-get 命令执行完毕之后，容器就会停止，但对容器的改动不会丢失。</p>\n<h1 id=\"查看容器（ps）\"><a href=\"#查看容器（ps）\" class=\"headerlink\" title=\"查看容器（ps）\"></a>查看容器（ps）</h1><h2 id=\"列出当前所有正在运行的container\"><a href=\"#列出当前所有正在运行的container\" class=\"headerlink\" title=\"列出当前所有正在运行的container\"></a>列出当前所有正在运行的container</h2><p><code>docker ps</code> </p>\n<h2 id=\"列出所有的container\"><a href=\"#列出所有的container\" class=\"headerlink\" title=\"列出所有的container\"></a>列出所有的container</h2><p><code>docker ps -a</code></p>\n<h2 id=\"列出最近一次启动的container\"><a href=\"#列出最近一次启动的container\" class=\"headerlink\" title=\"列出最近一次启动的container\"></a>列出最近一次启动的container</h2><p><code>docker ps -l</code> </p>\n<h1 id=\"保存对容器的修改（commit）\"><a href=\"#保存对容器的修改（commit）\" class=\"headerlink\" title=\"保存对容器的修改（commit）\"></a>保存对容器的修改（commit）</h1><p>当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。</p>\n<h2 id=\"保存对容器的修改\"><a href=\"#保存对容器的修改\" class=\"headerlink\" title=\"保存对容器的修改\"></a>保存对容器的修改</h2><p><code>docker commit ID new_image_name</code><br>参数：</p>\n<ul>\n<li>-a, –author=”” Author; </li>\n<li>-m, –message=”” Commit message  </li>\n</ul>\n<p>Note：  image相当于类，container相当于实例，不过可以动态给实例安装新软件，然后把这个container用commit命令固化成一个image。</p>\n<h1 id=\"对容器的操作\"><a href=\"#对容器的操作\" class=\"headerlink\" title=\"对容器的操作\"></a>对容器的操作</h1><h2 id=\"删除所有容器\"><a href=\"#删除所有容器\" class=\"headerlink\" title=\"删除所有容器\"></a>删除所有容器</h2><pre><code>docker rm `docker ps -a -q`\n</code></pre><p>（删除的是容器，而不是镜像；注意容器和镜像的区别，一个镜像可以创建多个容器。删除镜像用rmi命令）    </p>\n<h2 id=\"删除单个容器参数：\"><a href=\"#删除单个容器参数：\" class=\"headerlink\" title=\"删除单个容器参数：\"></a>删除单个容器参数：</h2><p><code>docker rm Name/ID</code><br>参数：</p>\n<ul>\n<li><strong>-f, –force=false</strong> </li>\n<li><strong>-l, –link=false</strong> Remove the specified link and not the underlying container; </li>\n<li><strong>-v, –volumes=false</strong> Remove the volumes associated to the container  </li>\n</ul>\n<h2 id=\"停止、启动、杀死一个容器\"><a href=\"#停止、启动、杀死一个容器\" class=\"headerlink\" title=\"停止、启动、杀死一个容器\"></a>停止、启动、杀死一个容器</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker <span class=\"keyword\">stop</span> <span class=\"keyword\">Name</span>/<span class=\"keyword\">ID</span>  </div><div class=\"line\">docker <span class=\"keyword\">start</span> <span class=\"keyword\">Name</span>/<span class=\"keyword\">ID</span>  </div><div class=\"line\">docker <span class=\"keyword\">kill</span> <span class=\"keyword\">Name</span>/<span class=\"keyword\">ID</span></div></pre></td></tr></table></figure>\n<h2 id=\"从一个容器中取日志\"><a href=\"#从一个容器中取日志\" class=\"headerlink\" title=\"从一个容器中取日志\"></a>从一个容器中取日志</h2><p><code>docker logs Name/ID</code><br>参数：</p>\n<ul>\n<li><strong>-f, –follow=false</strong> Follow log output; </li>\n<li><strong>-t, –timestamps=false</strong> Show timestamps  </li>\n</ul>\n<h2 id=\"列出一个容器里面被改变的文件或者目录\"><a href=\"#列出一个容器里面被改变的文件或者目录\" class=\"headerlink\" title=\"列出一个容器里面被改变的文件或者目录\"></a>列出一个容器里面被改变的文件或者目录</h2><p><code>docker diff Name/ID</code><br>（list列表会显示出三种事件，A 增加的，D 删除的，C 被改变的）</p>\n<h2 id=\"显示一个运行的容器里面的进程信息\"><a href=\"#显示一个运行的容器里面的进程信息\" class=\"headerlink\" title=\"显示一个运行的容器里面的进程信息\"></a>显示一个运行的容器里面的进程信息</h2><p><code>docker top Name/ID</code></p>\n<h2 id=\"从容器里面拷贝文件-目录到本地一个路径\"><a href=\"#从容器里面拷贝文件-目录到本地一个路径\" class=\"headerlink\" title=\"从容器里面拷贝文件/目录到本地一个路径\"></a>从容器里面拷贝文件/目录到本地一个路径</h2><p><code>docker cp Name:/container_path to_path</code><br>或者：<br><code>docker cp ID:/container_path to_path</code></p>\n<h2 id=\"重启一个正在运行的容器\"><a href=\"#重启一个正在运行的容器\" class=\"headerlink\" title=\"重启一个正在运行的容器\"></a>重启一个正在运行的容器</h2><p><code>docker restart Name/ID</code><br>参数：</p>\n<ul>\n<li><strong>-t, –time=10</strong> Number of seconds to try to stop for before killing the container, Default=10  </li>\n</ul>\n<h2 id=\"附加到一个运行的容器上面\"><a href=\"#附加到一个运行的容器上面\" class=\"headerlink\" title=\"附加到一个运行的容器上面\"></a>附加到一个运行的容器上面</h2><p><code>docker attach ID</code><br>参数：</p>\n<ul>\n<li><strong>–no-stdin=false</strong> Do not attach stdin; </li>\n<li><strong>–sig-proxy=true</strong> Proxify all received signal to the process  </li>\n</ul>\n<p>Note： attach命令允许你查看或者影响一个运行的容器。你可以在同一时间attach同一个容器。你也可以从一个容器中脱离出来，是从CTRL-C。</p>\n<h1 id=\"保存和加载镜像（save、load）\"><a href=\"#保存和加载镜像（save、load）\" class=\"headerlink\" title=\"保存和加载镜像（save、load）\"></a>保存和加载镜像（save、load）</h1><p>当需要把一台机器上的镜像迁移到另一台机器的时候，需要保存镜像与加载镜像。</p>\n<h2 id=\"保存镜像到一个tar包\"><a href=\"#保存镜像到一个tar包\" class=\"headerlink\" title=\"保存镜像到一个tar包\"></a>保存镜像到一个tar包</h2><p><code>docker save image_name -o file_path</code><br>参数：</p>\n<ul>\n<li><strong>-o, –output=””</strong> Write to an file  </li>\n</ul>\n<h2 id=\"加载一个tar包格式的镜像\"><a href=\"#加载一个tar包格式的镜像\" class=\"headerlink\" title=\"加载一个tar包格式的镜像\"></a>加载一个tar包格式的镜像</h2><p><code>docker load -i file_path</code><br>参数：</p>\n<ul>\n<li><strong>-i, –input=””</strong> Read from a tar archive file  </li>\n</ul>\n<h2 id=\"A、B机器间拷贝数据\"><a href=\"#A、B机器间拷贝数据\" class=\"headerlink\" title=\"A、B机器间拷贝数据\"></a>A、B机器间拷贝数据</h2><p>机器a<br><code>docker save image_name &gt; /home/save.tar</code><br>使用scp将save.tar拷到机器b上，然后：<br><code>docker load &lt; /home/save.tar</code></p>\n<h1 id=\"登录registry-server（login）\"><a href=\"#登录registry-server（login）\" class=\"headerlink\" title=\"登录registry server（login）\"></a>登录registry server（login）</h1><h2 id=\"登陆registry-server\"><a href=\"#登陆registry-server\" class=\"headerlink\" title=\"登陆registry server\"></a>登陆registry server</h2><p><code>docker login</code><br>参数：</p>\n<ul>\n<li><strong>-e, –email=””</strong> Email; </li>\n<li><strong>-p, –password=””</strong> Password; </li>\n<li><strong>-u, –username=””</strong> Username  </li>\n</ul>\n<h1 id=\"发布image（push）\"><a href=\"#发布image（push）\" class=\"headerlink\" title=\"发布image（push）\"></a>发布image（push）</h1><h2 id=\"发布docker镜像\"><a href=\"#发布docker镜像\" class=\"headerlink\" title=\"发布docker镜像\"></a>发布docker镜像</h2><p><code>docker push new_image_name</code></p>\n<h1 id=\"根据Dockerfile-构建出一个容器\"><a href=\"#根据Dockerfile-构建出一个容器\" class=\"headerlink\" title=\"根据Dockerfile 构建出一个容器\"></a>根据Dockerfile 构建出一个容器</h1><h2 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h2><p><code>docker build -t image_name Dockerfile_path</code><br>参数：</p>\n<ul>\n<li><strong>–no-cache=false</strong> Do not use cache when building the image</li>\n<li><strong>-q, –quiet=false</strong> Suppress the verbose output generated by the containers</li>\n<li><strong>–rm=true</strong> Remove intermediate containers after a successful build</li>\n<li><strong>-t, –tag=””</strong> Repository name (and optionally a tag) to be applied to the resulting image in case of success  </li>\n</ul>\n<hr>\n<h1 id=\"参考资料：\"><a href=\"#参考资料：\" class=\"headerlink\" title=\"参考资料：\"></a>参考资料：</h1><p>搭建Docker环境:<br>搭建Java Web环境：<a href=\"http://www.open-open.com/lib/view/open1422413794439.html\" target=\"_blank\" rel=\"external\">http://www.open-open.com/lib/view/open1422413794439.html</a><br>Docker搭建私有仓库：<a href=\"http://blog.csdn.net/wangtaoking1/article/details/44180901\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/wangtaoking1/article/details/44180901</a><br>搭建WordPress站点：<a href=\"https://linux.cn/article-5560-1.html\" target=\"_blank\" rel=\"external\">https://linux.cn/article-5560-1.html</a></p>\n<p>docker常用命令:<br><a href=\"http://www.cnblogs.com/ivictor/archive/2015/09/08/4791274.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/ivictor/archive/2015/09/08/4791274.html</a></p>\n<hr>\n","excerpt":"","more":"<p>Docker是基于容器的，直接用带有相应功能的镜像就行，而不必运行Docker容器来自己搭建环境那么麻烦。<br>Docker 中文网 <a href=\"http://www.docker.org.cn\">http://www.docker.org.cn</a></p>\n<h1 id=\"查看docker信息\"><a href=\"#查看docker信息\" class=\"headerlink\" title=\"查看docker信息\"></a>查看docker信息</h1><h2 id=\"查看docker版本\"><a href=\"#查看docker版本\" class=\"headerlink\" title=\"查看docker版本\"></a>查看docker版本</h2><p><code>docker version</code></p>\n<h2 id=\"显示docker系统的信息\"><a href=\"#显示docker系统的信息\" class=\"headerlink\" title=\"显示docker系统的信息\"></a>显示docker系统的信息</h2><p><code>docker info</code> </p>\n<h1 id=\"对image的操作\"><a href=\"#对image的操作\" class=\"headerlink\" title=\"对image的操作\"></a>对image的操作</h1><h2 id=\"检索、搜索image\"><a href=\"#检索、搜索image\" class=\"headerlink\" title=\"检索、搜索image\"></a>检索、搜索image</h2><p><code>docker search image_name</code></p>\n<h2 id=\"下载image\"><a href=\"#下载image\" class=\"headerlink\" title=\"下载image\"></a>下载image</h2><p><code>docker pull image_name</code></p>\n<h2 id=\"列出镜像列表\"><a href=\"#列出镜像列表\" class=\"headerlink\" title=\"列出镜像列表\"></a>列出镜像列表</h2><p><code>docker images</code><br>参数：</p>\n<ul>\n<li>-a, –all=false Show all images; </li>\n<li>–no-trunc=false Don’t truncate output; </li>\n<li>-q, –quiet=false Only show numeric IDs </li>\n</ul>\n<h2 id=\"删除一个或者多个镜像\"><a href=\"#删除一个或者多个镜像\" class=\"headerlink\" title=\"删除一个或者多个镜像\"></a>删除一个或者多个镜像</h2><p><code>docker rmi image_name</code><br>（第六节是删除容器，注意两者区别）<br>参数:<br>-f, –force=false Force;<br>–no-prune=false Do not delete untagged parents  </p>\n<h2 id=\"显示一个镜像的历史\"><a href=\"#显示一个镜像的历史\" class=\"headerlink\" title=\"显示一个镜像的历史\"></a>显示一个镜像的历史</h2><p><code>docker history image_name</code><br>参数：<br>–no-trunc=false Don’t truncate output;<br>-q, –quiet=false Only show numeric IDs  </p>\n<h1 id=\"启动容器\"><a href=\"#启动容器\" class=\"headerlink\" title=\"启动容器\"></a>启动容器</h1><p>docker容器可以理解为在沙盒中运行的进程。这个沙盒包含了该进程运行所必须的资源，包括文件系统、系统类库、shell 环境等等。但这个沙盒默认是不会运行任何程序的。你需要在沙盒中运行一个进程来启动某一个容器。这个进程是该容器的唯一进程，所以当该进程结束的时候，容器也会完全的停止。</p>\n<h2 id=\"在容器中运行”echo”命令，输出”hello-word”\"><a href=\"#在容器中运行”echo”命令，输出”hello-word”\" class=\"headerlink\" title=\"在容器中运行”echo”命令，输出”hello word”\"></a>在容器中运行”echo”命令，输出”hello word”</h2><p><code>docker run image_name echo &quot;hello word&quot;</code> </p>\n<h2 id=\"交互式进入容器中\"><a href=\"#交互式进入容器中\" class=\"headerlink\" title=\"交互式进入容器中\"></a>交互式进入容器中</h2><p><code>docker run -i -t image_name /bin/bash</code></p>\n<h2 id=\"在容器中安装新的程序\"><a href=\"#在容器中安装新的程序\" class=\"headerlink\" title=\"在容器中安装新的程序\"></a>在容器中安装新的程序</h2><p><code>docker run image_name apt-get install -y app_name</code> </p>\n<p>Note：  <strong>Ubuntu在执行apt-get 命令的时候，要带上-y参数。如果不指定-y参数的话，apt-get命令会进入交互模式，需要用户输入命令来进行确认，但在docker环境中是无法响应这种交互的。</strong>apt-get 命令执行完毕之后，容器就会停止，但对容器的改动不会丢失。</p>\n<h1 id=\"查看容器（ps）\"><a href=\"#查看容器（ps）\" class=\"headerlink\" title=\"查看容器（ps）\"></a>查看容器（ps）</h1><h2 id=\"列出当前所有正在运行的container\"><a href=\"#列出当前所有正在运行的container\" class=\"headerlink\" title=\"列出当前所有正在运行的container\"></a>列出当前所有正在运行的container</h2><p><code>docker ps</code> </p>\n<h2 id=\"列出所有的container\"><a href=\"#列出所有的container\" class=\"headerlink\" title=\"列出所有的container\"></a>列出所有的container</h2><p><code>docker ps -a</code></p>\n<h2 id=\"列出最近一次启动的container\"><a href=\"#列出最近一次启动的container\" class=\"headerlink\" title=\"列出最近一次启动的container\"></a>列出最近一次启动的container</h2><p><code>docker ps -l</code> </p>\n<h1 id=\"保存对容器的修改（commit）\"><a href=\"#保存对容器的修改（commit）\" class=\"headerlink\" title=\"保存对容器的修改（commit）\"></a>保存对容器的修改（commit）</h1><p>当你对某一个容器做了修改之后（通过在容器中运行某一个命令），可以把对容器的修改保存下来，这样下次可以从保存后的最新状态运行该容器。</p>\n<h2 id=\"保存对容器的修改\"><a href=\"#保存对容器的修改\" class=\"headerlink\" title=\"保存对容器的修改\"></a>保存对容器的修改</h2><p><code>docker commit ID new_image_name</code><br>参数：</p>\n<ul>\n<li>-a, –author=”” Author; </li>\n<li>-m, –message=”” Commit message  </li>\n</ul>\n<p>Note：  image相当于类，container相当于实例，不过可以动态给实例安装新软件，然后把这个container用commit命令固化成一个image。</p>\n<h1 id=\"对容器的操作\"><a href=\"#对容器的操作\" class=\"headerlink\" title=\"对容器的操作\"></a>对容器的操作</h1><h2 id=\"删除所有容器\"><a href=\"#删除所有容器\" class=\"headerlink\" title=\"删除所有容器\"></a>删除所有容器</h2><pre><code>docker rm `docker ps -a -q`\n</code></pre><p>（删除的是容器，而不是镜像；注意容器和镜像的区别，一个镜像可以创建多个容器。删除镜像用rmi命令）    </p>\n<h2 id=\"删除单个容器参数：\"><a href=\"#删除单个容器参数：\" class=\"headerlink\" title=\"删除单个容器参数：\"></a>删除单个容器参数：</h2><p><code>docker rm Name/ID</code><br>参数：</p>\n<ul>\n<li><strong>-f, –force=false</strong> </li>\n<li><strong>-l, –link=false</strong> Remove the specified link and not the underlying container; </li>\n<li><strong>-v, –volumes=false</strong> Remove the volumes associated to the container  </li>\n</ul>\n<h2 id=\"停止、启动、杀死一个容器\"><a href=\"#停止、启动、杀死一个容器\" class=\"headerlink\" title=\"停止、启动、杀死一个容器\"></a>停止、启动、杀死一个容器</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker <span class=\"keyword\">stop</span> <span class=\"keyword\">Name</span>/<span class=\"keyword\">ID</span>  </div><div class=\"line\">docker <span class=\"keyword\">start</span> <span class=\"keyword\">Name</span>/<span class=\"keyword\">ID</span>  </div><div class=\"line\">docker <span class=\"keyword\">kill</span> <span class=\"keyword\">Name</span>/<span class=\"keyword\">ID</span></div></pre></td></tr></table></figure>\n<h2 id=\"从一个容器中取日志\"><a href=\"#从一个容器中取日志\" class=\"headerlink\" title=\"从一个容器中取日志\"></a>从一个容器中取日志</h2><p><code>docker logs Name/ID</code><br>参数：</p>\n<ul>\n<li><strong>-f, –follow=false</strong> Follow log output; </li>\n<li><strong>-t, –timestamps=false</strong> Show timestamps  </li>\n</ul>\n<h2 id=\"列出一个容器里面被改变的文件或者目录\"><a href=\"#列出一个容器里面被改变的文件或者目录\" class=\"headerlink\" title=\"列出一个容器里面被改变的文件或者目录\"></a>列出一个容器里面被改变的文件或者目录</h2><p><code>docker diff Name/ID</code><br>（list列表会显示出三种事件，A 增加的，D 删除的，C 被改变的）</p>\n<h2 id=\"显示一个运行的容器里面的进程信息\"><a href=\"#显示一个运行的容器里面的进程信息\" class=\"headerlink\" title=\"显示一个运行的容器里面的进程信息\"></a>显示一个运行的容器里面的进程信息</h2><p><code>docker top Name/ID</code></p>\n<h2 id=\"从容器里面拷贝文件-目录到本地一个路径\"><a href=\"#从容器里面拷贝文件-目录到本地一个路径\" class=\"headerlink\" title=\"从容器里面拷贝文件/目录到本地一个路径\"></a>从容器里面拷贝文件/目录到本地一个路径</h2><p><code>docker cp Name:/container_path to_path</code><br>或者：<br><code>docker cp ID:/container_path to_path</code></p>\n<h2 id=\"重启一个正在运行的容器\"><a href=\"#重启一个正在运行的容器\" class=\"headerlink\" title=\"重启一个正在运行的容器\"></a>重启一个正在运行的容器</h2><p><code>docker restart Name/ID</code><br>参数：</p>\n<ul>\n<li><strong>-t, –time=10</strong> Number of seconds to try to stop for before killing the container, Default=10  </li>\n</ul>\n<h2 id=\"附加到一个运行的容器上面\"><a href=\"#附加到一个运行的容器上面\" class=\"headerlink\" title=\"附加到一个运行的容器上面\"></a>附加到一个运行的容器上面</h2><p><code>docker attach ID</code><br>参数：</p>\n<ul>\n<li><strong>–no-stdin=false</strong> Do not attach stdin; </li>\n<li><strong>–sig-proxy=true</strong> Proxify all received signal to the process  </li>\n</ul>\n<p>Note： attach命令允许你查看或者影响一个运行的容器。你可以在同一时间attach同一个容器。你也可以从一个容器中脱离出来，是从CTRL-C。</p>\n<h1 id=\"保存和加载镜像（save、load）\"><a href=\"#保存和加载镜像（save、load）\" class=\"headerlink\" title=\"保存和加载镜像（save、load）\"></a>保存和加载镜像（save、load）</h1><p>当需要把一台机器上的镜像迁移到另一台机器的时候，需要保存镜像与加载镜像。</p>\n<h2 id=\"保存镜像到一个tar包\"><a href=\"#保存镜像到一个tar包\" class=\"headerlink\" title=\"保存镜像到一个tar包\"></a>保存镜像到一个tar包</h2><p><code>docker save image_name -o file_path</code><br>参数：</p>\n<ul>\n<li><strong>-o, –output=””</strong> Write to an file  </li>\n</ul>\n<h2 id=\"加载一个tar包格式的镜像\"><a href=\"#加载一个tar包格式的镜像\" class=\"headerlink\" title=\"加载一个tar包格式的镜像\"></a>加载一个tar包格式的镜像</h2><p><code>docker load -i file_path</code><br>参数：</p>\n<ul>\n<li><strong>-i, –input=””</strong> Read from a tar archive file  </li>\n</ul>\n<h2 id=\"A、B机器间拷贝数据\"><a href=\"#A、B机器间拷贝数据\" class=\"headerlink\" title=\"A、B机器间拷贝数据\"></a>A、B机器间拷贝数据</h2><p>机器a<br><code>docker save image_name &gt; /home/save.tar</code><br>使用scp将save.tar拷到机器b上，然后：<br><code>docker load &lt; /home/save.tar</code></p>\n<h1 id=\"登录registry-server（login）\"><a href=\"#登录registry-server（login）\" class=\"headerlink\" title=\"登录registry server（login）\"></a>登录registry server（login）</h1><h2 id=\"登陆registry-server\"><a href=\"#登陆registry-server\" class=\"headerlink\" title=\"登陆registry server\"></a>登陆registry server</h2><p><code>docker login</code><br>参数：</p>\n<ul>\n<li><strong>-e, –email=””</strong> Email; </li>\n<li><strong>-p, –password=””</strong> Password; </li>\n<li><strong>-u, –username=””</strong> Username  </li>\n</ul>\n<h1 id=\"发布image（push）\"><a href=\"#发布image（push）\" class=\"headerlink\" title=\"发布image（push）\"></a>发布image（push）</h1><h2 id=\"发布docker镜像\"><a href=\"#发布docker镜像\" class=\"headerlink\" title=\"发布docker镜像\"></a>发布docker镜像</h2><p><code>docker push new_image_name</code></p>\n<h1 id=\"根据Dockerfile-构建出一个容器\"><a href=\"#根据Dockerfile-构建出一个容器\" class=\"headerlink\" title=\"根据Dockerfile 构建出一个容器\"></a>根据Dockerfile 构建出一个容器</h1><h2 id=\"build\"><a href=\"#build\" class=\"headerlink\" title=\"build\"></a>build</h2><p><code>docker build -t image_name Dockerfile_path</code><br>参数：</p>\n<ul>\n<li><strong>–no-cache=false</strong> Do not use cache when building the image</li>\n<li><strong>-q, –quiet=false</strong> Suppress the verbose output generated by the containers</li>\n<li><strong>–rm=true</strong> Remove intermediate containers after a successful build</li>\n<li><strong>-t, –tag=””</strong> Repository name (and optionally a tag) to be applied to the resulting image in case of success  </li>\n</ul>\n<hr>\n<h1 id=\"参考资料：\"><a href=\"#参考资料：\" class=\"headerlink\" title=\"参考资料：\"></a>参考资料：</h1><p>搭建Docker环境:<br>搭建Java Web环境：<a href=\"http://www.open-open.com/lib/view/open1422413794439.html\">http://www.open-open.com/lib/view/open1422413794439.html</a><br>Docker搭建私有仓库：<a href=\"http://blog.csdn.net/wangtaoking1/article/details/44180901\">http://blog.csdn.net/wangtaoking1/article/details/44180901</a><br>搭建WordPress站点：<a href=\"https://linux.cn/article-5560-1.html\">https://linux.cn/article-5560-1.html</a></p>\n<p>docker常用命令:<br><a href=\"http://www.cnblogs.com/ivictor/archive/2015/09/08/4791274.html\">http://www.cnblogs.com/ivictor/archive/2015/09/08/4791274.html</a></p>\n<hr>\n"},{"title":"SSH远程重装Centos系统","abbrlink":11076,"date":"2016-11-02T08:29:28.000Z","_content":"\n#### 注意：\n旧Linux系统必须能够正常ssh登录。旧Linux系统可以是任意Linux版本，现在的Linux用的一般都是grub引导管理器,新Linux系统必须是CentOS,RHEL或者Fedora，可以是32位或者64位。这几个Linux都支持VNC安装。\n\n\n## 步骤如下： \n可以建一个内网镜像源，也可以不建立，用公网的源（建议用公网源，简单快捷）。\n### 一.建一个内网的镜像源（如果使用在线源则跳过此步骤）\n登录服务器 192.168.1.83 （用此服务器搭建内网源）\n#### 1、安装apache \n```\nyum install httpd \nmkdir /var/www/html/centos/6 -p ```\n挂载iso镜像 \n```\nmount -o loop /opt/CentOS-6.6-x86_64-bin-DVD1.iso /var/www/html/centos/6 ```\n启动apache，通过浏览器访问**http://192.168.1.83/centos/6** 看是否有内容\n只有带**bin**字样的完整版光盘才有对应的启动内核，别的版本都不行\n\n### 二.远程重装服务器 \n#### 2、ssh登录要重装的服务器 \n如果用在线源请按网易源的修改方法修改\n\n```\nmkdir /centos_install \ncd /centos_install \nwget http://192.168.1.83/centos/6/images/pxeboot/initrd.img \nwget http://192.168.1.83/centos/6/images/pxeboot/vmlinuz \ncp vmlinuz /boot/vmlinuz.cent.pxe \ncp initrd.img /boot/initrd.img.cent.pxe```\n\n网址可用**网易源：http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/**代替       \ncentos 7目前还不支持pxe安装\n```\ncd /boot\nwget http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/initrd.img\nwget http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/vmlinuz\nchmod 755 vmlinuz\nchmod 600 initrd.img\n```\n启动文件是放在**/boot**下的，启动时以**/boot**为一级目录，所以注意**grub.conf**里的文件位置。\n#### 3.修改grub \n`vim /boot/grub/grub.conf`   或者 `menu.lst`  也行，这两个文件是链接在一起的。\n`default=0` 看情况修改，**default=0**表示默认启动**第一个标有title的项目**，**=1**为**第二个标有title**的项目，以此类推，直接把新增的放在最前面就不用修改**default=0**了。\n增加：\n```\ntitle Centos Install (PXE) \nroot (hd0,0) \nkernel /vmlinuz vnc vncpassword=123456 headless ip=192.168.1.106 netmask=255.225.255.0 gateway=192.168.1.1 dns=8.8.8.8 ksdevice=eth0 method=http://192.168.1.83/centos/6/或[http://mirrors.163.com/centos/6.8/os/x86_64/] lang=en_US或zh_CH.UTF-8 keymap=us \ninitrd /initrd.img```\n例：\n```\ntitle Centos Install (PXE) \n        root (hd0,0)\n        kernel /vmlinuz vnc vncpassword=123456 headless ip=192.168.30.145 netmask=255.225.255.0 gateway=192.168.30.1 dns=8.8.8.8 ksdevice=eth0 method=http://mirrors.163.com/centos/6.8/os/x86_64/ lang=zh_CH.UTF-8 keymap=us\n        initrd /initrd.img```\n                  \n保存退出   重启系统\n\n* root用户参数，要和grub.conf中的其他root参数一致；\nkernel参数和initrd参数后面的路径（是否/boot/开头）也要和grub.conf中的其他项一致；\n* ip地址，子网掩码和网关地址一定要和服务器一致；\nksdevice是主网卡\n* method后面的地址是新Linux系统的安装文件地址。如果这些配置有一项出错，就会导致远程安装失败。\n\n#### 4、开始安装 \nping服务器ip，ping通时，打开vnc重新连接**IP:1**或**IP:5901**，开始安装centos\n此时主机端显示\n\n安装好后重启系统，**登陆用户，root 密码，静态IP**等不变。\n\n\n---","source":"_posts/系统管理/2016-11-02-SSH远程重装Centos系统.md","raw":"---\ntitle: SSH远程重装Centos系统\ncategories:\n  - 系统管理\ntags:\n  - ssh远程重装centos系统\nabbrlink: 11076\ndate: 2016-11-02 16:29:28\n---\n\n#### 注意：\n旧Linux系统必须能够正常ssh登录。旧Linux系统可以是任意Linux版本，现在的Linux用的一般都是grub引导管理器,新Linux系统必须是CentOS,RHEL或者Fedora，可以是32位或者64位。这几个Linux都支持VNC安装。\n\n\n## 步骤如下： \n可以建一个内网镜像源，也可以不建立，用公网的源（建议用公网源，简单快捷）。\n### 一.建一个内网的镜像源（如果使用在线源则跳过此步骤）\n登录服务器 192.168.1.83 （用此服务器搭建内网源）\n#### 1、安装apache \n```\nyum install httpd \nmkdir /var/www/html/centos/6 -p ```\n挂载iso镜像 \n```\nmount -o loop /opt/CentOS-6.6-x86_64-bin-DVD1.iso /var/www/html/centos/6 ```\n启动apache，通过浏览器访问**http://192.168.1.83/centos/6** 看是否有内容\n只有带**bin**字样的完整版光盘才有对应的启动内核，别的版本都不行\n\n### 二.远程重装服务器 \n#### 2、ssh登录要重装的服务器 \n如果用在线源请按网易源的修改方法修改\n\n```\nmkdir /centos_install \ncd /centos_install \nwget http://192.168.1.83/centos/6/images/pxeboot/initrd.img \nwget http://192.168.1.83/centos/6/images/pxeboot/vmlinuz \ncp vmlinuz /boot/vmlinuz.cent.pxe \ncp initrd.img /boot/initrd.img.cent.pxe```\n\n网址可用**网易源：http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/**代替       \ncentos 7目前还不支持pxe安装\n```\ncd /boot\nwget http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/initrd.img\nwget http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/vmlinuz\nchmod 755 vmlinuz\nchmod 600 initrd.img\n```\n启动文件是放在**/boot**下的，启动时以**/boot**为一级目录，所以注意**grub.conf**里的文件位置。\n#### 3.修改grub \n`vim /boot/grub/grub.conf`   或者 `menu.lst`  也行，这两个文件是链接在一起的。\n`default=0` 看情况修改，**default=0**表示默认启动**第一个标有title的项目**，**=1**为**第二个标有title**的项目，以此类推，直接把新增的放在最前面就不用修改**default=0**了。\n增加：\n```\ntitle Centos Install (PXE) \nroot (hd0,0) \nkernel /vmlinuz vnc vncpassword=123456 headless ip=192.168.1.106 netmask=255.225.255.0 gateway=192.168.1.1 dns=8.8.8.8 ksdevice=eth0 method=http://192.168.1.83/centos/6/或[http://mirrors.163.com/centos/6.8/os/x86_64/] lang=en_US或zh_CH.UTF-8 keymap=us \ninitrd /initrd.img```\n例：\n```\ntitle Centos Install (PXE) \n        root (hd0,0)\n        kernel /vmlinuz vnc vncpassword=123456 headless ip=192.168.30.145 netmask=255.225.255.0 gateway=192.168.30.1 dns=8.8.8.8 ksdevice=eth0 method=http://mirrors.163.com/centos/6.8/os/x86_64/ lang=zh_CH.UTF-8 keymap=us\n        initrd /initrd.img```\n                  \n保存退出   重启系统\n\n* root用户参数，要和grub.conf中的其他root参数一致；\nkernel参数和initrd参数后面的路径（是否/boot/开头）也要和grub.conf中的其他项一致；\n* ip地址，子网掩码和网关地址一定要和服务器一致；\nksdevice是主网卡\n* method后面的地址是新Linux系统的安装文件地址。如果这些配置有一项出错，就会导致远程安装失败。\n\n#### 4、开始安装 \nping服务器ip，ping通时，打开vnc重新连接**IP:1**或**IP:5901**，开始安装centos\n此时主机端显示\n\n安装好后重启系统，**登陆用户，root 密码，静态IP**等不变。\n\n\n---","slug":"系统管理-2016-11-02-SSH远程重装Centos系统","published":1,"updated":"2016-11-21T02:17:09.109Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjov0045d8pk02ofc1lc","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h4 id=\"注意：\"><a href=\"#注意：\" class=\"headerlink\" title=\"注意：\"></a>注意：</h4><p>旧Linux系统必须能够正常ssh登录。旧Linux系统可以是任意Linux版本，现在的Linux用的一般都是grub引导管理器,新Linux系统必须是CentOS,RHEL或者Fedora，可以是32位或者64位。这几个Linux都支持VNC安装。</p>\n<h2 id=\"步骤如下：\"><a href=\"#步骤如下：\" class=\"headerlink\" title=\"步骤如下：\"></a>步骤如下：</h2><p>可以建一个内网镜像源，也可以不建立，用公网的源（建议用公网源，简单快捷）。</p>\n<h3 id=\"一-建一个内网的镜像源（如果使用在线源则跳过此步骤）\"><a href=\"#一-建一个内网的镜像源（如果使用在线源则跳过此步骤）\" class=\"headerlink\" title=\"一.建一个内网的镜像源（如果使用在线源则跳过此步骤）\"></a>一.建一个内网的镜像源（如果使用在线源则跳过此步骤）</h3><p>登录服务器 192.168.1.83 （用此服务器搭建内网源）</p>\n<h4 id=\"1、安装apache\"><a href=\"#1、安装apache\" class=\"headerlink\" title=\"1、安装apache\"></a>1、安装apache</h4><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install httpd </div><div class=\"line\">mkdir <span class=\"regexp\">/var/</span>www<span class=\"regexp\">/html/</span>centos<span class=\"regexp\">/6 -p</span></div></pre></td></tr></table></figure>\n<p>挂载iso镜像<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -o loop <span class=\"regexp\">/opt/</span>CentOS-<span class=\"number\">6.6</span>-x86_64-bin-DVD1.iso <span class=\"regexp\">/var/</span>www<span class=\"regexp\">/html/</span>centos<span class=\"regexp\">/6</span></div></pre></td></tr></table></figure></p>\n<p>启动apache，通过浏览器访问<strong><a href=\"http://192.168.1.83/centos/6\" target=\"_blank\" rel=\"external\">http://192.168.1.83/centos/6</a></strong> 看是否有内容<br>只有带<strong>bin</strong>字样的完整版光盘才有对应的启动内核，别的版本都不行</p>\n<h3 id=\"二-远程重装服务器\"><a href=\"#二-远程重装服务器\" class=\"headerlink\" title=\"二.远程重装服务器\"></a>二.远程重装服务器</h3><h4 id=\"2、ssh登录要重装的服务器\"><a href=\"#2、ssh登录要重装的服务器\" class=\"headerlink\" title=\"2、ssh登录要重装的服务器\"></a>2、ssh登录要重装的服务器</h4><p>如果用在线源请按网易源的修改方法修改</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir /centos_install </div><div class=\"line\">cd /centos_install </div><div class=\"line\">wget http:<span class=\"comment\">//192.168.1.83/centos/6/images/pxeboot/initrd.img </span></div><div class=\"line\">wget http:<span class=\"comment\">//192.168.1.83/centos/6/images/pxeboot/vmlinuz </span></div><div class=\"line\">cp vmlinuz /boot/vmlinuz<span class=\"selector-class\">.cent</span><span class=\"selector-class\">.pxe</span> </div><div class=\"line\">cp initrd<span class=\"selector-class\">.img</span> /boot/initrd<span class=\"selector-class\">.img</span><span class=\"selector-class\">.cent</span><span class=\"selector-class\">.pxe</span></div></pre></td></tr></table></figure>\n<p>网址可用<strong>网易源：<a href=\"http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/\" target=\"_blank\" rel=\"external\">http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/</a></strong>代替<br>centos 7目前还不支持pxe安装<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /boot</div><div class=\"line\">wget <span class=\"symbol\">http:</span>/<span class=\"regexp\">/mirrors.163.com/centos</span><span class=\"regexp\">/6.8/os</span><span class=\"regexp\">/x86_64/images</span><span class=\"regexp\">/pxeboot/initrd</span>.img</div><div class=\"line\">wget <span class=\"symbol\">http:</span>/<span class=\"regexp\">/mirrors.163.com/centos</span><span class=\"regexp\">/6.8/os</span><span class=\"regexp\">/x86_64/images</span><span class=\"regexp\">/pxeboot/vmlinuz</span></div><div class=\"line\">chmod <span class=\"number\">755</span> vmlinuz</div><div class=\"line\">chmod <span class=\"number\">600</span> initrd.img</div></pre></td></tr></table></figure></p>\n<p>启动文件是放在<strong>/boot</strong>下的，启动时以<strong>/boot</strong>为一级目录，所以注意<strong>grub.conf</strong>里的文件位置。</p>\n<h4 id=\"3-修改grub\"><a href=\"#3-修改grub\" class=\"headerlink\" title=\"3.修改grub\"></a>3.修改grub</h4><p><code>vim /boot/grub/grub.conf</code>   或者 <code>menu.lst</code>  也行，这两个文件是链接在一起的。<br><code>default=0</code> 看情况修改，<strong>default=0</strong>表示默认启动<strong>第一个标有title的项目</strong>，<strong>=1</strong>为<strong>第二个标有title</strong>的项目，以此类推，直接把新增的放在最前面就不用修改<strong>default=0</strong>了。<br>增加：<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">title Centos Install (PXE) </div><div class=\"line\">root (hd0,<span class=\"number\">0</span>) </div><div class=\"line\">kernel /vmlinuz vnc vncpassword=<span class=\"number\">123456</span> headless ip=<span class=\"number\">192.168</span>.<span class=\"number\">1.106</span> netmask=<span class=\"number\">255.225</span>.<span class=\"number\">255.0</span> gateway=<span class=\"number\">192.168</span>.<span class=\"number\">1.1</span> dns=<span class=\"number\">8.8</span>.<span class=\"number\">8.8</span> ksdevice=eth0 <span class=\"function\"><span class=\"keyword\">method</span>=<span class=\"title\">http</span>:</span><span class=\"comment\">//192.168.1.83/centos/6/或[http://mirrors.163.com/centos/6.8/os/x86_64/] lang=en_US或zh_CH.UTF-8 keymap=us </span></div><div class=\"line\">initrd /initrd.img</div></pre></td></tr></table></figure></p>\n<p>例：<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">title Centos Install (PXE) </div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz vnc vncpassword=<span class=\"number\">123456</span> headless ip=<span class=\"number\">192.168</span>.<span class=\"number\">30.145</span> netmask=<span class=\"number\">255.225</span>.<span class=\"number\">255.0</span> gateway=<span class=\"number\">192.168</span>.<span class=\"number\">30.1</span> dns=<span class=\"number\">8.8</span>.<span class=\"number\">8.8</span> ksdevice=eth0 <span class=\"function\"><span class=\"keyword\">method</span>=<span class=\"title\">http</span>:</span><span class=\"comment\">//mirrors.163.com/centos/6.8/os/x86_64/ lang=zh_CH.UTF-8 keymap=us</span></div><div class=\"line\">        initrd /initrd.img</div></pre></td></tr></table></figure></p>\n<p>保存退出   重启系统</p>\n<ul>\n<li>root用户参数，要和grub.conf中的其他root参数一致；<br>kernel参数和initrd参数后面的路径（是否/boot/开头）也要和grub.conf中的其他项一致；</li>\n<li>ip地址，子网掩码和网关地址一定要和服务器一致；<br>ksdevice是主网卡</li>\n<li>method后面的地址是新Linux系统的安装文件地址。如果这些配置有一项出错，就会导致远程安装失败。</li>\n</ul>\n<h4 id=\"4、开始安装\"><a href=\"#4、开始安装\" class=\"headerlink\" title=\"4、开始安装\"></a>4、开始安装</h4><p>ping服务器ip，ping通时，打开vnc重新连接<strong>IP:1</strong>或<strong>IP:5901</strong>，开始安装centos<br>此时主机端显示</p>\n<p>安装好后重启系统，<strong>登陆用户，root 密码，静态IP</strong>等不变。</p>\n<hr>\n","excerpt":"","more":"<h4 id=\"注意：\"><a href=\"#注意：\" class=\"headerlink\" title=\"注意：\"></a>注意：</h4><p>旧Linux系统必须能够正常ssh登录。旧Linux系统可以是任意Linux版本，现在的Linux用的一般都是grub引导管理器,新Linux系统必须是CentOS,RHEL或者Fedora，可以是32位或者64位。这几个Linux都支持VNC安装。</p>\n<h2 id=\"步骤如下：\"><a href=\"#步骤如下：\" class=\"headerlink\" title=\"步骤如下：\"></a>步骤如下：</h2><p>可以建一个内网镜像源，也可以不建立，用公网的源（建议用公网源，简单快捷）。</p>\n<h3 id=\"一-建一个内网的镜像源（如果使用在线源则跳过此步骤）\"><a href=\"#一-建一个内网的镜像源（如果使用在线源则跳过此步骤）\" class=\"headerlink\" title=\"一.建一个内网的镜像源（如果使用在线源则跳过此步骤）\"></a>一.建一个内网的镜像源（如果使用在线源则跳过此步骤）</h3><p>登录服务器 192.168.1.83 （用此服务器搭建内网源）</p>\n<h4 id=\"1、安装apache\"><a href=\"#1、安装apache\" class=\"headerlink\" title=\"1、安装apache\"></a>1、安装apache</h4><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum install httpd </div><div class=\"line\">mkdir <span class=\"regexp\">/var/</span>www<span class=\"regexp\">/html/</span>centos<span class=\"regexp\">/6 -p</span></div></pre></td></tr></table></figure>\n<p>挂载iso镜像<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mount -o loop <span class=\"regexp\">/opt/</span>CentOS-<span class=\"number\">6.6</span>-x86_64-bin-DVD1.iso <span class=\"regexp\">/var/</span>www<span class=\"regexp\">/html/</span>centos<span class=\"regexp\">/6</span></div></pre></td></tr></table></figure></p>\n<p>启动apache，通过浏览器访问<strong><a href=\"http://192.168.1.83/centos/6\">http://192.168.1.83/centos/6</a></strong> 看是否有内容<br>只有带<strong>bin</strong>字样的完整版光盘才有对应的启动内核，别的版本都不行</p>\n<h3 id=\"二-远程重装服务器\"><a href=\"#二-远程重装服务器\" class=\"headerlink\" title=\"二.远程重装服务器\"></a>二.远程重装服务器</h3><h4 id=\"2、ssh登录要重装的服务器\"><a href=\"#2、ssh登录要重装的服务器\" class=\"headerlink\" title=\"2、ssh登录要重装的服务器\"></a>2、ssh登录要重装的服务器</h4><p>如果用在线源请按网易源的修改方法修改</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mkdir /centos_install </div><div class=\"line\">cd /centos_install </div><div class=\"line\">wget http:<span class=\"comment\">//192.168.1.83/centos/6/images/pxeboot/initrd.img </span></div><div class=\"line\">wget http:<span class=\"comment\">//192.168.1.83/centos/6/images/pxeboot/vmlinuz </span></div><div class=\"line\">cp vmlinuz /boot/vmlinuz<span class=\"selector-class\">.cent</span><span class=\"selector-class\">.pxe</span> </div><div class=\"line\">cp initrd<span class=\"selector-class\">.img</span> /boot/initrd<span class=\"selector-class\">.img</span><span class=\"selector-class\">.cent</span><span class=\"selector-class\">.pxe</span></div></pre></td></tr></table></figure>\n<p>网址可用<strong>网易源：<a href=\"http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/\">http://mirrors.163.com/centos/6.8/os/x86_64/images/pxeboot/</a></strong>代替<br>centos 7目前还不支持pxe安装<br><figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /boot</div><div class=\"line\">wget <span class=\"symbol\">http:</span>/<span class=\"regexp\">/mirrors.163.com/centos</span><span class=\"regexp\">/6.8/os</span><span class=\"regexp\">/x86_64/images</span><span class=\"regexp\">/pxeboot/initrd</span>.img</div><div class=\"line\">wget <span class=\"symbol\">http:</span>/<span class=\"regexp\">/mirrors.163.com/centos</span><span class=\"regexp\">/6.8/os</span><span class=\"regexp\">/x86_64/images</span><span class=\"regexp\">/pxeboot/vmlinuz</span></div><div class=\"line\">chmod <span class=\"number\">755</span> vmlinuz</div><div class=\"line\">chmod <span class=\"number\">600</span> initrd.img</div></pre></td></tr></table></figure></p>\n<p>启动文件是放在<strong>/boot</strong>下的，启动时以<strong>/boot</strong>为一级目录，所以注意<strong>grub.conf</strong>里的文件位置。</p>\n<h4 id=\"3-修改grub\"><a href=\"#3-修改grub\" class=\"headerlink\" title=\"3.修改grub\"></a>3.修改grub</h4><p><code>vim /boot/grub/grub.conf</code>   或者 <code>menu.lst</code>  也行，这两个文件是链接在一起的。<br><code>default=0</code> 看情况修改，<strong>default=0</strong>表示默认启动<strong>第一个标有title的项目</strong>，<strong>=1</strong>为<strong>第二个标有title</strong>的项目，以此类推，直接把新增的放在最前面就不用修改<strong>default=0</strong>了。<br>增加：<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">title Centos Install (PXE) </div><div class=\"line\">root (hd0,<span class=\"number\">0</span>) </div><div class=\"line\">kernel /vmlinuz vnc vncpassword=<span class=\"number\">123456</span> headless ip=<span class=\"number\">192.168</span>.<span class=\"number\">1.106</span> netmask=<span class=\"number\">255.225</span>.<span class=\"number\">255.0</span> gateway=<span class=\"number\">192.168</span>.<span class=\"number\">1.1</span> dns=<span class=\"number\">8.8</span>.<span class=\"number\">8.8</span> ksdevice=eth0 <span class=\"function\"><span class=\"keyword\">method</span>=<span class=\"title\">http</span>:</span><span class=\"comment\">//192.168.1.83/centos/6/或[http://mirrors.163.com/centos/6.8/os/x86_64/] lang=en_US或zh_CH.UTF-8 keymap=us </span></div><div class=\"line\">initrd /initrd.img</div></pre></td></tr></table></figure></p>\n<p>例：<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">title Centos Install (PXE) </div><div class=\"line\">        root (hd0,<span class=\"number\">0</span>)</div><div class=\"line\">        kernel /vmlinuz vnc vncpassword=<span class=\"number\">123456</span> headless ip=<span class=\"number\">192.168</span>.<span class=\"number\">30.145</span> netmask=<span class=\"number\">255.225</span>.<span class=\"number\">255.0</span> gateway=<span class=\"number\">192.168</span>.<span class=\"number\">30.1</span> dns=<span class=\"number\">8.8</span>.<span class=\"number\">8.8</span> ksdevice=eth0 <span class=\"function\"><span class=\"keyword\">method</span>=<span class=\"title\">http</span>:</span><span class=\"comment\">//mirrors.163.com/centos/6.8/os/x86_64/ lang=zh_CH.UTF-8 keymap=us</span></div><div class=\"line\">        initrd /initrd.img</div></pre></td></tr></table></figure></p>\n<p>保存退出   重启系统</p>\n<ul>\n<li>root用户参数，要和grub.conf中的其他root参数一致；<br>kernel参数和initrd参数后面的路径（是否/boot/开头）也要和grub.conf中的其他项一致；</li>\n<li>ip地址，子网掩码和网关地址一定要和服务器一致；<br>ksdevice是主网卡</li>\n<li>method后面的地址是新Linux系统的安装文件地址。如果这些配置有一项出错，就会导致远程安装失败。</li>\n</ul>\n<h4 id=\"4、开始安装\"><a href=\"#4、开始安装\" class=\"headerlink\" title=\"4、开始安装\"></a>4、开始安装</h4><p>ping服务器ip，ping通时，打开vnc重新连接<strong>IP:1</strong>或<strong>IP:5901</strong>，开始安装centos<br>此时主机端显示</p>\n<p>安装好后重启系统，<strong>登陆用户，root 密码，静态IP</strong>等不变。</p>\n<hr>\n"},{"title":"Docker安装、管理","abbrlink":41070,"date":"2016-11-03T04:23:58.000Z","_content":"\nDocker官网下载：https://www.docker.com/products/overview\n\n官方文档：https://docs.docker.com/\n\n官方安装文档：https://docs.docker.com/engine/installation/\n\n---\n# Centos 7\nCentos 6的内核版本太低，需要升级内核及整个系统的依赖库，比较复杂，不建议使用。\n\nroot用户登录，`uname -r`确保内核版本大于等于3.10\n`yum update`更新系统\n\n\n加入Docker源\n```\ntee /etc/yum.repos.d/docker.repo <<-'EOF'\n[dockerrepo]\nname=Docker Repository\nbaseurl=https://yum.dockerproject.org/repo/main/centos/7/\nenabled=1\ngpgcheck=1\ngpgkey=https://yum.dockerproject.org/gpg\nEOF```\n\n安装\n```\nyum install docker-engine\nsystemctl enable docker.service\nsystemctl start docker```\n\n\n---\n# Windows\n下载最新exe安装包进行安装。安装后看能否正常运行Docker，出现闪退，报错等等，先打开virtual虚拟机看虚拟机是否正常，虚拟机报错很可能是3个Windows字体的**.dll**文件被破解了，下载原版替换，**C:\\Program Files\\Oracle\\VirtualBox\\drivers\\vboxdrv\\VBoxDrv.inf**文件右键安装，然后重启。\n## Windows 10以下\nBoot2docker：\nhttps://github.com/boot2docker/windows-installer/releases\n\nToolbox：https://github.com/docker/toolbox/releases\n\n## Windows 10以上\n官网下载：https://docs.docker.com/docker-for-windows/\n\n---\n# Ubuntu 14 && Ubuntu 16\nroot用户登录，`uname -r`确保内核版本大于等于3.10\n\n**法一**：`apt-get install docker docker.io -y`\n\n**法二**：安装最新版\n1.增加GPG密钥\n\n```\napt-get update\napt-get install apt-transport-https ca-certificates\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D```\n\n2.新增或编辑**source**列表里的**docker.list**文件\n`vim /etc/apt/sources.list.d/docker.list` 如果不存在就新增,填入下面一个地址。保存退出\nTrusty 14.04 (LTS)\t`deb https://apt.dockerproject.org/repo ubuntu-trusty main`\nXenial 16.04 (LTS)\t`deb https://apt.dockerproject.org/repo ubuntu-xenial main`\n\n```\napt-get purge lxc-docker  #清理以前安装过的docker源，没有安装的话，跳过\napt-cache policy docker-engine #查看是否有正确的可用版本\n```\n\n3.安装Docker\n\n```\napt-get update\napt-get install linux-image-extra-$(uname -r) linux-image-extra-virtual\n#从14.04版本以上开始docker推荐安装linux-image-extra\napt-get install docker-engine\nservice docker start\ndocker run hello-world\n```\n---\n\n# Mac\n## 安装包安装\n下载最新pkg格式安装包：Boot2Docker-1.3.2.pkg进行安装。\n**https://github.com/boot2docker/osx-installer/releases/latest**\n\n\n或者手动初始化Boot2Docker，打开终端并运行:\n```\nboot2docker init\nboot2docker start\nexport DOCKER_HOST=tcp://$(boot2docker ip 2>/dev/null):2375```\n\n一旦你初始化化好了一个虚拟机，你就能用boot2docker stop和boot2docker start来进行控制。\n安装好后带有virtualBox虚拟机。\n\n更新\n* 1.下载最新版的Docker for OS X Installer\n* 2.运行安装程序, 更新VirtualBox和Boot2Docker管理工具。\n* 3.更新现有虚拟机，打开终端并运行:\n\n```\nboot2docker stop\nboot2docker download\nboot2docker start```\n\n\n## Brew方式安装\n```\nbrew update\nbrew install docker\nbrew link docker\nbrew link boot2docker```\n\n当用brew安装某个应用后，但没有成功创建brew link（比如，link的目录已经存在相同的老版本文件导致link创建失败），此时可以将老版本删除，然后再次执行`brew link xxx`就可以创建link了，之后就可以使用brew安装的新版本了。\n\n注：`ls -lh /usr/local/bin/*docker*` 　就可以看到Docker安装的位置。\n\n**Boot2Docker的缺省用户名为docker，密码为tcuser。**\n\n# 运行Docker\n在终端上跑一个“hello world” 的示例来测试Docker。启动虚拟机然后运行：\n`docker run ubuntu echo hello world`\n这样应该会下载ubuntu镜像并打印hello world。\n\n# 容器端口跳转\n最新版的boot2docker建立了一个仅有网络适配器的主机提供可以接入容器的端口。\n如果你运行一个有公开端口的容器，\n\n`docker run --rm -i -t -p 80:80 nginx`\n然后你应该能用IP地址接入Nginx服务器:\n\n`boot2docker ip` 显示当前IP\n这个IP地址可能被VirtualBox启用的DHCP修改。\n\n# Boot2Docker管理工具提供了很多命令:\n`./boot2docker [<options>] [<args>]`\n\n参数：**{help|init|up|ssh|save|down|poweroff|reset|restart|config|status|info|ip|delete**\n**|download|version} **\n\n---\n# 用cSphere希云管理Docker\n## cSphere希云\n安装：\nhttp://csphere.cn/product/csphere\nhttp://csphere.cn/hub/csphere\n\n微镜像：http://csphere.cn/hub\n\n教程：http://csphere.cn/training\n\n---\n","source":"_posts/虚拟化/2016-11-03-Docker安装.md","raw":"---\ntitle: Docker安装、管理\ncategories:\n  - 虚拟化\ntags:\n  - Docker安装\nabbrlink: 41070\ndate: 2016-11-03 12:23:58\n---\n\nDocker官网下载：https://www.docker.com/products/overview\n\n官方文档：https://docs.docker.com/\n\n官方安装文档：https://docs.docker.com/engine/installation/\n\n---\n# Centos 7\nCentos 6的内核版本太低，需要升级内核及整个系统的依赖库，比较复杂，不建议使用。\n\nroot用户登录，`uname -r`确保内核版本大于等于3.10\n`yum update`更新系统\n\n\n加入Docker源\n```\ntee /etc/yum.repos.d/docker.repo <<-'EOF'\n[dockerrepo]\nname=Docker Repository\nbaseurl=https://yum.dockerproject.org/repo/main/centos/7/\nenabled=1\ngpgcheck=1\ngpgkey=https://yum.dockerproject.org/gpg\nEOF```\n\n安装\n```\nyum install docker-engine\nsystemctl enable docker.service\nsystemctl start docker```\n\n\n---\n# Windows\n下载最新exe安装包进行安装。安装后看能否正常运行Docker，出现闪退，报错等等，先打开virtual虚拟机看虚拟机是否正常，虚拟机报错很可能是3个Windows字体的**.dll**文件被破解了，下载原版替换，**C:\\Program Files\\Oracle\\VirtualBox\\drivers\\vboxdrv\\VBoxDrv.inf**文件右键安装，然后重启。\n## Windows 10以下\nBoot2docker：\nhttps://github.com/boot2docker/windows-installer/releases\n\nToolbox：https://github.com/docker/toolbox/releases\n\n## Windows 10以上\n官网下载：https://docs.docker.com/docker-for-windows/\n\n---\n# Ubuntu 14 && Ubuntu 16\nroot用户登录，`uname -r`确保内核版本大于等于3.10\n\n**法一**：`apt-get install docker docker.io -y`\n\n**法二**：安装最新版\n1.增加GPG密钥\n\n```\napt-get update\napt-get install apt-transport-https ca-certificates\napt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D```\n\n2.新增或编辑**source**列表里的**docker.list**文件\n`vim /etc/apt/sources.list.d/docker.list` 如果不存在就新增,填入下面一个地址。保存退出\nTrusty 14.04 (LTS)\t`deb https://apt.dockerproject.org/repo ubuntu-trusty main`\nXenial 16.04 (LTS)\t`deb https://apt.dockerproject.org/repo ubuntu-xenial main`\n\n```\napt-get purge lxc-docker  #清理以前安装过的docker源，没有安装的话，跳过\napt-cache policy docker-engine #查看是否有正确的可用版本\n```\n\n3.安装Docker\n\n```\napt-get update\napt-get install linux-image-extra-$(uname -r) linux-image-extra-virtual\n#从14.04版本以上开始docker推荐安装linux-image-extra\napt-get install docker-engine\nservice docker start\ndocker run hello-world\n```\n---\n\n# Mac\n## 安装包安装\n下载最新pkg格式安装包：Boot2Docker-1.3.2.pkg进行安装。\n**https://github.com/boot2docker/osx-installer/releases/latest**\n\n\n或者手动初始化Boot2Docker，打开终端并运行:\n```\nboot2docker init\nboot2docker start\nexport DOCKER_HOST=tcp://$(boot2docker ip 2>/dev/null):2375```\n\n一旦你初始化化好了一个虚拟机，你就能用boot2docker stop和boot2docker start来进行控制。\n安装好后带有virtualBox虚拟机。\n\n更新\n* 1.下载最新版的Docker for OS X Installer\n* 2.运行安装程序, 更新VirtualBox和Boot2Docker管理工具。\n* 3.更新现有虚拟机，打开终端并运行:\n\n```\nboot2docker stop\nboot2docker download\nboot2docker start```\n\n\n## Brew方式安装\n```\nbrew update\nbrew install docker\nbrew link docker\nbrew link boot2docker```\n\n当用brew安装某个应用后，但没有成功创建brew link（比如，link的目录已经存在相同的老版本文件导致link创建失败），此时可以将老版本删除，然后再次执行`brew link xxx`就可以创建link了，之后就可以使用brew安装的新版本了。\n\n注：`ls -lh /usr/local/bin/*docker*` 　就可以看到Docker安装的位置。\n\n**Boot2Docker的缺省用户名为docker，密码为tcuser。**\n\n# 运行Docker\n在终端上跑一个“hello world” 的示例来测试Docker。启动虚拟机然后运行：\n`docker run ubuntu echo hello world`\n这样应该会下载ubuntu镜像并打印hello world。\n\n# 容器端口跳转\n最新版的boot2docker建立了一个仅有网络适配器的主机提供可以接入容器的端口。\n如果你运行一个有公开端口的容器，\n\n`docker run --rm -i -t -p 80:80 nginx`\n然后你应该能用IP地址接入Nginx服务器:\n\n`boot2docker ip` 显示当前IP\n这个IP地址可能被VirtualBox启用的DHCP修改。\n\n# Boot2Docker管理工具提供了很多命令:\n`./boot2docker [<options>] [<args>]`\n\n参数：**{help|init|up|ssh|save|down|poweroff|reset|restart|config|status|info|ip|delete**\n**|download|version} **\n\n---\n# 用cSphere希云管理Docker\n## cSphere希云\n安装：\nhttp://csphere.cn/product/csphere\nhttp://csphere.cn/hub/csphere\n\n微镜像：http://csphere.cn/hub\n\n教程：http://csphere.cn/training\n\n---\n","slug":"虚拟化-2016-11-03-Docker安装","published":1,"updated":"2016-11-21T02:17:09.155Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjox0049d8pkwkfxh52n","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>Docker官网下载：<a href=\"https://www.docker.com/products/overview\" target=\"_blank\" rel=\"external\">https://www.docker.com/products/overview</a></p>\n<p>官方文档：<a href=\"https://docs.docker.com/\" target=\"_blank\" rel=\"external\">https://docs.docker.com/</a></p>\n<p>官方安装文档：<a href=\"https://docs.docker.com/engine/installation/\" target=\"_blank\" rel=\"external\">https://docs.docker.com/engine/installation/</a></p>\n<hr>\n<h1 id=\"Centos-7\"><a href=\"#Centos-7\" class=\"headerlink\" title=\"Centos 7\"></a>Centos 7</h1><p>Centos 6的内核版本太低，需要升级内核及整个系统的依赖库，比较复杂，不建议使用。</p>\n<p>root用户登录，<code>uname -r</code>确保内核版本大于等于3.10<br><code>yum update</code>更新系统</p>\n<p>加入Docker源<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">tee /etc/yum<span class=\"selector-class\">.repos</span><span class=\"selector-class\">.d</span>/docker<span class=\"selector-class\">.repo</span> &lt;&lt;-<span class=\"string\">'EOF'</span></div><div class=\"line\">[dockerrepo]</div><div class=\"line\">name=Docker Repository</div><div class=\"line\">baseurl=https:<span class=\"comment\">//yum.dockerproject.org/repo/main/centos/7/</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\">gpgcheck=<span class=\"number\">1</span></div><div class=\"line\">gpgkey=https:<span class=\"comment\">//yum.dockerproject.org/gpg</span></div><div class=\"line\">EOF</div></pre></td></tr></table></figure></p>\n<p>安装<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> docker-<span class=\"keyword\">engine</span></div><div class=\"line\">systemctl <span class=\"keyword\">enable</span> docker.service</div><div class=\"line\">systemctl <span class=\"keyword\">start</span> docker</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h1><p>下载最新exe安装包进行安装。安装后看能否正常运行Docker，出现闪退，报错等等，先打开virtual虚拟机看虚拟机是否正常，虚拟机报错很可能是3个Windows字体的<strong>.dll</strong>文件被破解了，下载原版替换，<strong>C:\\Program Files\\Oracle\\VirtualBox\\drivers\\vboxdrv\\VBoxDrv.inf</strong>文件右键安装，然后重启。</p>\n<h2 id=\"Windows-10以下\"><a href=\"#Windows-10以下\" class=\"headerlink\" title=\"Windows 10以下\"></a>Windows 10以下</h2><p>Boot2docker：<br><a href=\"https://github.com/boot2docker/windows-installer/releases\" target=\"_blank\" rel=\"external\">https://github.com/boot2docker/windows-installer/releases</a></p>\n<p>Toolbox：<a href=\"https://github.com/docker/toolbox/releases\" target=\"_blank\" rel=\"external\">https://github.com/docker/toolbox/releases</a></p>\n<h2 id=\"Windows-10以上\"><a href=\"#Windows-10以上\" class=\"headerlink\" title=\"Windows 10以上\"></a>Windows 10以上</h2><p>官网下载：<a href=\"https://docs.docker.com/docker-for-windows/\" target=\"_blank\" rel=\"external\">https://docs.docker.com/docker-for-windows/</a></p>\n<hr>\n<h1 id=\"Ubuntu-14-amp-amp-Ubuntu-16\"><a href=\"#Ubuntu-14-amp-amp-Ubuntu-16\" class=\"headerlink\" title=\"Ubuntu 14 &amp;&amp; Ubuntu 16\"></a>Ubuntu 14 &amp;&amp; Ubuntu 16</h1><p>root用户登录，<code>uname -r</code>确保内核版本大于等于3.10</p>\n<p><strong>法一</strong>：<code>apt-get install docker docker.io -y</code></p>\n<p><strong>法二</strong>：安装最新版<br>1.增加GPG密钥</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">apt-<span class=\"built_in\">get</span> install apt-transport-https <span class=\"keyword\">ca</span>-certificates</div><div class=\"line\">apt-key adv --keyserver hkp://p80.pool.sks-keyservers.ne<span class=\"variable\">t:80</span> --recv-<span class=\"built_in\">keys</span> <span class=\"number\">58118</span>E89F3A912897C070ADBF76221572C52609D</div></pre></td></tr></table></figure>\n<p>2.新增或编辑<strong>source</strong>列表里的<strong>docker.list</strong>文件<br><code>vim /etc/apt/sources.list.d/docker.list</code> 如果不存在就新增,填入下面一个地址。保存退出<br>Trusty 14.04 (LTS)    <code>deb https://apt.dockerproject.org/repo ubuntu-trusty main</code><br>Xenial 16.04 (LTS)    <code>deb https://apt.dockerproject.org/repo ubuntu-xenial main</code></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-get <span class=\"keyword\">purge</span> lxc-docker  #清理以前安装过的docker源，没有安装的话，跳过</div><div class=\"line\">apt-<span class=\"keyword\">cache</span> <span class=\"keyword\">policy</span> docker-<span class=\"keyword\">engine</span> #查看是否有正确的可用版本</div></pre></td></tr></table></figure>\n<p>3.安装Docker</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> update</div><div class=\"line\">apt-<span class=\"built_in\">get</span> install linux-<span class=\"built_in\">image</span>-extra-$(uname -r) linux-<span class=\"built_in\">image</span>-extra-<span class=\"keyword\">virtual</span></div><div class=\"line\">#从<span class=\"number\">14.04</span>版本以上开始docker推荐安装linux-<span class=\"built_in\">image</span>-extra</div><div class=\"line\">apt-<span class=\"built_in\">get</span> install docker-engine</div><div class=\"line\">service docker start</div><div class=\"line\">docker <span class=\"built_in\">run</span> hello-world</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h1><h2 id=\"安装包安装\"><a href=\"#安装包安装\" class=\"headerlink\" title=\"安装包安装\"></a>安装包安装</h2><p>下载最新pkg格式安装包：Boot2Docker-1.3.2.pkg进行安装。<br><strong><a href=\"https://github.com/boot2docker/osx-installer/releases/latest\" target=\"_blank\" rel=\"external\">https://github.com/boot2docker/osx-installer/releases/latest</a></strong></p>\n<p>或者手动初始化Boot2Docker，打开终端并运行:<br><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">boot2docker </span>init</div><div class=\"line\"><span class=\"keyword\">boot2docker </span>start</div><div class=\"line\"><span class=\"symbol\">export</span> DOCKER_HOST<span class=\"symbol\">=tcp</span>://$(<span class=\"keyword\">boot2docker </span><span class=\"built_in\">ip</span> <span class=\"number\">2</span>&gt;/dev/null):<span class=\"number\">2375</span></div></pre></td></tr></table></figure></p>\n<p>一旦你初始化化好了一个虚拟机，你就能用boot2docker stop和boot2docker start来进行控制。<br>安装好后带有virtualBox虚拟机。</p>\n<p>更新</p>\n<ul>\n<li>1.下载最新版的Docker for OS X Installer</li>\n<li>2.运行安装程序, 更新VirtualBox和Boot2Docker管理工具。</li>\n<li>3.更新现有虚拟机，打开终端并运行:</li>\n</ul>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">boot2docker </span>stop</div><div class=\"line\"><span class=\"keyword\">boot2docker </span>download</div><div class=\"line\"><span class=\"keyword\">boot2docker </span>start</div></pre></td></tr></table></figure>\n<h2 id=\"Brew方式安装\"><a href=\"#Brew方式安装\" class=\"headerlink\" title=\"Brew方式安装\"></a>Brew方式安装</h2><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">brew </span>update</div><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>docker</div><div class=\"line\"><span class=\"keyword\">brew </span>link docker</div><div class=\"line\"><span class=\"keyword\">brew </span>link <span class=\"keyword\">boot2docker</span></div></pre></td></tr></table></figure>\n<p>当用brew安装某个应用后，但没有成功创建brew link（比如，link的目录已经存在相同的老版本文件导致link创建失败），此时可以将老版本删除，然后再次执行<code>brew link xxx</code>就可以创建link了，之后就可以使用brew安装的新版本了。</p>\n<p>注：<code>ls -lh /usr/local/bin/*docker*</code> 　就可以看到Docker安装的位置。</p>\n<p><strong>Boot2Docker的缺省用户名为docker，密码为tcuser。</strong></p>\n<h1 id=\"运行Docker\"><a href=\"#运行Docker\" class=\"headerlink\" title=\"运行Docker\"></a>运行Docker</h1><p>在终端上跑一个“hello world” 的示例来测试Docker。启动虚拟机然后运行：<br><code>docker run ubuntu echo hello world</code><br>这样应该会下载ubuntu镜像并打印hello world。</p>\n<h1 id=\"容器端口跳转\"><a href=\"#容器端口跳转\" class=\"headerlink\" title=\"容器端口跳转\"></a>容器端口跳转</h1><p>最新版的boot2docker建立了一个仅有网络适配器的主机提供可以接入容器的端口。<br>如果你运行一个有公开端口的容器，</p>\n<p><code>docker run --rm -i -t -p 80:80 nginx</code><br>然后你应该能用IP地址接入Nginx服务器:</p>\n<p><code>boot2docker ip</code> 显示当前IP<br>这个IP地址可能被VirtualBox启用的DHCP修改。</p>\n<h1 id=\"Boot2Docker管理工具提供了很多命令\"><a href=\"#Boot2Docker管理工具提供了很多命令\" class=\"headerlink\" title=\"Boot2Docker管理工具提供了很多命令:\"></a>Boot2Docker管理工具提供了很多命令:</h1><p><code>./boot2docker [&lt;options&gt;] [&lt;args&gt;]</code></p>\n<p>参数：<strong>{help|init|up|ssh|save|down|poweroff|reset|restart|config|status|info|ip|delete</strong><br><strong>|download|version} </strong></p>\n<hr>\n<h1 id=\"用cSphere希云管理Docker\"><a href=\"#用cSphere希云管理Docker\" class=\"headerlink\" title=\"用cSphere希云管理Docker\"></a>用cSphere希云管理Docker</h1><h2 id=\"cSphere希云\"><a href=\"#cSphere希云\" class=\"headerlink\" title=\"cSphere希云\"></a>cSphere希云</h2><p>安装：<br><a href=\"http://csphere.cn/product/csphere\" target=\"_blank\" rel=\"external\">http://csphere.cn/product/csphere</a><br><a href=\"http://csphere.cn/hub/csphere\" target=\"_blank\" rel=\"external\">http://csphere.cn/hub/csphere</a></p>\n<p>微镜像：<a href=\"http://csphere.cn/hub\" target=\"_blank\" rel=\"external\">http://csphere.cn/hub</a></p>\n<p>教程：<a href=\"http://csphere.cn/training\" target=\"_blank\" rel=\"external\">http://csphere.cn/training</a></p>\n<hr>\n","excerpt":"","more":"<p>Docker官网下载：<a href=\"https://www.docker.com/products/overview\">https://www.docker.com/products/overview</a></p>\n<p>官方文档：<a href=\"https://docs.docker.com/\">https://docs.docker.com/</a></p>\n<p>官方安装文档：<a href=\"https://docs.docker.com/engine/installation/\">https://docs.docker.com/engine/installation/</a></p>\n<hr>\n<h1 id=\"Centos-7\"><a href=\"#Centos-7\" class=\"headerlink\" title=\"Centos 7\"></a>Centos 7</h1><p>Centos 6的内核版本太低，需要升级内核及整个系统的依赖库，比较复杂，不建议使用。</p>\n<p>root用户登录，<code>uname -r</code>确保内核版本大于等于3.10<br><code>yum update</code>更新系统</p>\n<p>加入Docker源<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">tee /etc/yum<span class=\"selector-class\">.repos</span><span class=\"selector-class\">.d</span>/docker<span class=\"selector-class\">.repo</span> &lt;&lt;-<span class=\"string\">'EOF'</span></div><div class=\"line\">[dockerrepo]</div><div class=\"line\">name=Docker Repository</div><div class=\"line\">baseurl=https:<span class=\"comment\">//yum.dockerproject.org/repo/main/centos/7/</span></div><div class=\"line\">enabled=<span class=\"number\">1</span></div><div class=\"line\">gpgcheck=<span class=\"number\">1</span></div><div class=\"line\">gpgkey=https:<span class=\"comment\">//yum.dockerproject.org/gpg</span></div><div class=\"line\">EOF</div></pre></td></tr></table></figure></p>\n<p>安装<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install</span> docker-<span class=\"keyword\">engine</span></div><div class=\"line\">systemctl <span class=\"keyword\">enable</span> docker.service</div><div class=\"line\">systemctl <span class=\"keyword\">start</span> docker</div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h1><p>下载最新exe安装包进行安装。安装后看能否正常运行Docker，出现闪退，报错等等，先打开virtual虚拟机看虚拟机是否正常，虚拟机报错很可能是3个Windows字体的<strong>.dll</strong>文件被破解了，下载原版替换，<strong>C:\\Program Files\\Oracle\\VirtualBox\\drivers\\vboxdrv\\VBoxDrv.inf</strong>文件右键安装，然后重启。</p>\n<h2 id=\"Windows-10以下\"><a href=\"#Windows-10以下\" class=\"headerlink\" title=\"Windows 10以下\"></a>Windows 10以下</h2><p>Boot2docker：<br><a href=\"https://github.com/boot2docker/windows-installer/releases\">https://github.com/boot2docker/windows-installer/releases</a></p>\n<p>Toolbox：<a href=\"https://github.com/docker/toolbox/releases\">https://github.com/docker/toolbox/releases</a></p>\n<h2 id=\"Windows-10以上\"><a href=\"#Windows-10以上\" class=\"headerlink\" title=\"Windows 10以上\"></a>Windows 10以上</h2><p>官网下载：<a href=\"https://docs.docker.com/docker-for-windows/\">https://docs.docker.com/docker-for-windows/</a></p>\n<hr>\n<h1 id=\"Ubuntu-14-amp-amp-Ubuntu-16\"><a href=\"#Ubuntu-14-amp-amp-Ubuntu-16\" class=\"headerlink\" title=\"Ubuntu 14 &amp;&amp; Ubuntu 16\"></a>Ubuntu 14 &amp;&amp; Ubuntu 16</h1><p>root用户登录，<code>uname -r</code>确保内核版本大于等于3.10</p>\n<p><strong>法一</strong>：<code>apt-get install docker docker.io -y</code></p>\n<p><strong>法二</strong>：安装最新版<br>1.增加GPG密钥</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div><div class=\"line\">apt-<span class=\"built_in\">get</span> install apt-transport-https <span class=\"keyword\">ca</span>-certificates</div><div class=\"line\">apt-key adv --keyserver hkp://p80.pool.sks-keyservers.ne<span class=\"variable\">t:80</span> --recv-<span class=\"built_in\">keys</span> <span class=\"number\">58118</span>E89F3A912897C070ADBF76221572C52609D</div></pre></td></tr></table></figure>\n<p>2.新增或编辑<strong>source</strong>列表里的<strong>docker.list</strong>文件<br><code>vim /etc/apt/sources.list.d/docker.list</code> 如果不存在就新增,填入下面一个地址。保存退出<br>Trusty 14.04 (LTS)    <code>deb https://apt.dockerproject.org/repo ubuntu-trusty main</code><br>Xenial 16.04 (LTS)    <code>deb https://apt.dockerproject.org/repo ubuntu-xenial main</code></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-get <span class=\"keyword\">purge</span> lxc-docker  #清理以前安装过的docker源，没有安装的话，跳过</div><div class=\"line\">apt-<span class=\"keyword\">cache</span> <span class=\"keyword\">policy</span> docker-<span class=\"keyword\">engine</span> #查看是否有正确的可用版本</div></pre></td></tr></table></figure>\n<p>3.安装Docker</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">apt-<span class=\"built_in\">get</span> update</div><div class=\"line\">apt-<span class=\"built_in\">get</span> install linux-<span class=\"built_in\">image</span>-extra-$(uname -r) linux-<span class=\"built_in\">image</span>-extra-<span class=\"keyword\">virtual</span></div><div class=\"line\">#从<span class=\"number\">14.04</span>版本以上开始docker推荐安装linux-<span class=\"built_in\">image</span>-extra</div><div class=\"line\">apt-<span class=\"built_in\">get</span> install docker-engine</div><div class=\"line\">service docker start</div><div class=\"line\">docker <span class=\"built_in\">run</span> hello-world</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Mac\"><a href=\"#Mac\" class=\"headerlink\" title=\"Mac\"></a>Mac</h1><h2 id=\"安装包安装\"><a href=\"#安装包安装\" class=\"headerlink\" title=\"安装包安装\"></a>安装包安装</h2><p>下载最新pkg格式安装包：Boot2Docker-1.3.2.pkg进行安装。<br><strong><a href=\"https://github.com/boot2docker/osx-installer/releases/latest\">https://github.com/boot2docker/osx-installer/releases/latest</a></strong></p>\n<p>或者手动初始化Boot2Docker，打开终端并运行:<br><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">boot2docker </span>init</div><div class=\"line\"><span class=\"keyword\">boot2docker </span>start</div><div class=\"line\"><span class=\"symbol\">export</span> DOCKER_HOST<span class=\"symbol\">=tcp</span>://$(<span class=\"keyword\">boot2docker </span><span class=\"built_in\">ip</span> <span class=\"number\">2</span>&gt;/dev/null):<span class=\"number\">2375</span></div></pre></td></tr></table></figure></p>\n<p>一旦你初始化化好了一个虚拟机，你就能用boot2docker stop和boot2docker start来进行控制。<br>安装好后带有virtualBox虚拟机。</p>\n<p>更新</p>\n<ul>\n<li>1.下载最新版的Docker for OS X Installer</li>\n<li>2.运行安装程序, 更新VirtualBox和Boot2Docker管理工具。</li>\n<li>3.更新现有虚拟机，打开终端并运行:</li>\n</ul>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">boot2docker </span>stop</div><div class=\"line\"><span class=\"keyword\">boot2docker </span>download</div><div class=\"line\"><span class=\"keyword\">boot2docker </span>start</div></pre></td></tr></table></figure>\n<h2 id=\"Brew方式安装\"><a href=\"#Brew方式安装\" class=\"headerlink\" title=\"Brew方式安装\"></a>Brew方式安装</h2><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">brew </span>update</div><div class=\"line\"><span class=\"keyword\">brew </span><span class=\"keyword\">install </span>docker</div><div class=\"line\"><span class=\"keyword\">brew </span>link docker</div><div class=\"line\"><span class=\"keyword\">brew </span>link <span class=\"keyword\">boot2docker</span></div></pre></td></tr></table></figure>\n<p>当用brew安装某个应用后，但没有成功创建brew link（比如，link的目录已经存在相同的老版本文件导致link创建失败），此时可以将老版本删除，然后再次执行<code>brew link xxx</code>就可以创建link了，之后就可以使用brew安装的新版本了。</p>\n<p>注：<code>ls -lh /usr/local/bin/*docker*</code> 　就可以看到Docker安装的位置。</p>\n<p><strong>Boot2Docker的缺省用户名为docker，密码为tcuser。</strong></p>\n<h1 id=\"运行Docker\"><a href=\"#运行Docker\" class=\"headerlink\" title=\"运行Docker\"></a>运行Docker</h1><p>在终端上跑一个“hello world” 的示例来测试Docker。启动虚拟机然后运行：<br><code>docker run ubuntu echo hello world</code><br>这样应该会下载ubuntu镜像并打印hello world。</p>\n<h1 id=\"容器端口跳转\"><a href=\"#容器端口跳转\" class=\"headerlink\" title=\"容器端口跳转\"></a>容器端口跳转</h1><p>最新版的boot2docker建立了一个仅有网络适配器的主机提供可以接入容器的端口。<br>如果你运行一个有公开端口的容器，</p>\n<p><code>docker run --rm -i -t -p 80:80 nginx</code><br>然后你应该能用IP地址接入Nginx服务器:</p>\n<p><code>boot2docker ip</code> 显示当前IP<br>这个IP地址可能被VirtualBox启用的DHCP修改。</p>\n<h1 id=\"Boot2Docker管理工具提供了很多命令\"><a href=\"#Boot2Docker管理工具提供了很多命令\" class=\"headerlink\" title=\"Boot2Docker管理工具提供了很多命令:\"></a>Boot2Docker管理工具提供了很多命令:</h1><p><code>./boot2docker [&lt;options&gt;] [&lt;args&gt;]</code></p>\n<p>参数：<strong>{help|init|up|ssh|save|down|poweroff|reset|restart|config|status|info|ip|delete</strong><br><strong>|download|version} </strong></p>\n<hr>\n<h1 id=\"用cSphere希云管理Docker\"><a href=\"#用cSphere希云管理Docker\" class=\"headerlink\" title=\"用cSphere希云管理Docker\"></a>用cSphere希云管理Docker</h1><h2 id=\"cSphere希云\"><a href=\"#cSphere希云\" class=\"headerlink\" title=\"cSphere希云\"></a>cSphere希云</h2><p>安装：<br><a href=\"http://csphere.cn/product/csphere\">http://csphere.cn/product/csphere</a><br><a href=\"http://csphere.cn/hub/csphere\">http://csphere.cn/hub/csphere</a></p>\n<p>微镜像：<a href=\"http://csphere.cn/hub\">http://csphere.cn/hub</a></p>\n<p>教程：<a href=\"http://csphere.cn/training\">http://csphere.cn/training</a></p>\n<hr>\n"},{"title":"KVM虚拟化","abbrlink":7260,"date":"2016-11-03T02:27:18.000Z","_content":"\n* 检测\n`egrep 'vmx|svm' /proc/cpuinfo`\n\n* 安装 KVM\n```\nyum install -y kvm python-virtinst libvirt bridge-utils virt-manager gemu-kvm-tools virt-viewer virt-v2v libguestfs-tools```\n\n* 后台制作iso文件\n`nohup cp /dev/cdrom /data/iso/mini.iso &`\n\n* 安装iso文件\n```\nvirt-install --name=centos67 --ram 1024 --vcpus=1 --disk path=/data/kvm/centos67mini.img,size=20,bus=virtio --accelerate --cdrom /data/iso/mini.iso --vnc --vncport=5910 --vnclisten=0.0.0.0 --network bridge=be0,model=virtio --no-acpi --noautoconsole```\n\n----未完----\n\n\n---","source":"_posts/虚拟化/2016-11-03-KVM虚拟化.md","raw":"---\ntitle: KVM虚拟化\ncategories:\n  - 虚拟化\ntags:\n  - KVM\nabbrlink: 7260\ndate: 2016-11-03 10:27:18\n---\n\n* 检测\n`egrep 'vmx|svm' /proc/cpuinfo`\n\n* 安装 KVM\n```\nyum install -y kvm python-virtinst libvirt bridge-utils virt-manager gemu-kvm-tools virt-viewer virt-v2v libguestfs-tools```\n\n* 后台制作iso文件\n`nohup cp /dev/cdrom /data/iso/mini.iso &`\n\n* 安装iso文件\n```\nvirt-install --name=centos67 --ram 1024 --vcpus=1 --disk path=/data/kvm/centos67mini.img,size=20,bus=virtio --accelerate --cdrom /data/iso/mini.iso --vnc --vncport=5910 --vnclisten=0.0.0.0 --network bridge=be0,model=virtio --no-acpi --noautoconsole```\n\n----未完----\n\n\n---","slug":"虚拟化-2016-11-03-KVM虚拟化","published":1,"updated":"2016-11-21T02:17:09.164Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjoz004bd8pk4oww5occ","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><ul>\n<li><p>检测<br><code>egrep &#39;vmx|svm&#39; /proc/cpuinfo</code></p>\n</li>\n<li><p>安装 KVM</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install </span>-y kvm python-virtinst libvirt <span class=\"keyword\">bridge-utils </span>virt-manager gemu-kvm-tools virt-viewer virt-v2v libguestfs-tools</div></pre></td></tr></table></figure>\n</li>\n<li><p>后台制作iso文件<br><code>nohup cp /dev/cdrom /data/iso/mini.iso &amp;</code></p>\n</li>\n<li><p>安装iso文件</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">virt</span><span class=\"literal\">-</span><span class=\"comment\">install</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">name=centos67</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">ram</span> <span class=\"comment\">1024</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vcpus=1</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">disk</span> <span class=\"comment\">path=/data/kvm/centos67mini</span><span class=\"string\">.</span><span class=\"comment\">img</span><span class=\"string\">,</span><span class=\"comment\">size=20</span><span class=\"string\">,</span><span class=\"comment\">bus=virtio</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">accelerate</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">cdrom</span> <span class=\"comment\">/data/iso/mini</span><span class=\"string\">.</span><span class=\"comment\">iso</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vnc</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vncport=5910</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vnclisten=0</span><span class=\"string\">.</span><span class=\"comment\">0</span><span class=\"string\">.</span><span class=\"comment\">0</span><span class=\"string\">.</span><span class=\"comment\">0</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">network</span> <span class=\"comment\">bridge=be0</span><span class=\"string\">,</span><span class=\"comment\">model=virtio</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">no</span><span class=\"literal\">-</span><span class=\"comment\">acpi</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">noautoconsole</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>—-未完—-</p>\n<hr>\n","excerpt":"","more":"<ul>\n<li><p>检测<br><code>egrep &#39;vmx|svm&#39; /proc/cpuinfo</code></p>\n</li>\n<li><p>安装 KVM</p>\n<figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">yum <span class=\"keyword\">install </span>-y kvm python-virtinst libvirt <span class=\"keyword\">bridge-utils </span>virt-manager gemu-kvm-tools virt-viewer virt-v2v libguestfs-tools</div></pre></td></tr></table></figure>\n</li>\n<li><p>后台制作iso文件<br><code>nohup cp /dev/cdrom /data/iso/mini.iso &amp;</code></p>\n</li>\n<li><p>安装iso文件</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">virt</span><span class=\"literal\">-</span><span class=\"comment\">install</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">name=centos67</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">ram</span> <span class=\"comment\">1024</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vcpus=1</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">disk</span> <span class=\"comment\">path=/data/kvm/centos67mini</span><span class=\"string\">.</span><span class=\"comment\">img</span><span class=\"string\">,</span><span class=\"comment\">size=20</span><span class=\"string\">,</span><span class=\"comment\">bus=virtio</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">accelerate</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">cdrom</span> <span class=\"comment\">/data/iso/mini</span><span class=\"string\">.</span><span class=\"comment\">iso</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vnc</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vncport=5910</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">vnclisten=0</span><span class=\"string\">.</span><span class=\"comment\">0</span><span class=\"string\">.</span><span class=\"comment\">0</span><span class=\"string\">.</span><span class=\"comment\">0</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">network</span> <span class=\"comment\">bridge=be0</span><span class=\"string\">,</span><span class=\"comment\">model=virtio</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">no</span><span class=\"literal\">-</span><span class=\"comment\">acpi</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">noautoconsole</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>—-未完—-</p>\n<hr>\n"},{"title":"tomcat单机多实例","abbrlink":20879,"date":"2016-11-03T09:25:35.000Z","_content":"\n运用了一个镜像启动多个容器，一个容器可以启动多个示例的原理，具体请搜索本博客：Docker常用命令\n\n此篇博客是学习“烂泥\"大神分享的笔记写的！\n\n主机IP：192.168.8.33\n容器IP：192.168.8.188\n从docker仓库下载最新的tomcat容器，然后使用这个tomcat容器，就可以启动多个tomcat实例，而我们只需要在192.168.0.100上通过端口进行区分就行了。\n\n启动第一个实例：\n```\ndocker run -dit --name tomcat8282 -v /root/:/root/ -p 8282:8080 192.168.8.188:5000/ilanni:160922-03-12 /bin/bash```\n\n`docker exec -it tomcat8282 /bin/bash`\n\n`cat webapps/ilanni/index.html`\n\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B001.png)\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B002.png)\n\n\n启动第二个实例：\n```\ndocker run -dit --name tomcat8383 -v /root/:/root/ -p 8383:8080 192.168.8.188:5000/ilanni:160922-03-12 /bin/bash```\n\n`docker exec -it tomcat8383 /bin/bash`\n\n`cat webapps/ilanni/index.html`\n\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B003.png)\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B004.png)\n\n\n---","source":"_posts/虚拟化/2016-11-03-tomcat单机多实例.md","raw":"---\ntitle: tomcat单机多实例\ncategories:\n  - 虚拟化\ntags:\n  - null\nabbrlink: 20879\ndate: 2016-11-03 17:25:35\n---\n\n运用了一个镜像启动多个容器，一个容器可以启动多个示例的原理，具体请搜索本博客：Docker常用命令\n\n此篇博客是学习“烂泥\"大神分享的笔记写的！\n\n主机IP：192.168.8.33\n容器IP：192.168.8.188\n从docker仓库下载最新的tomcat容器，然后使用这个tomcat容器，就可以启动多个tomcat实例，而我们只需要在192.168.0.100上通过端口进行区分就行了。\n\n启动第一个实例：\n```\ndocker run -dit --name tomcat8282 -v /root/:/root/ -p 8282:8080 192.168.8.188:5000/ilanni:160922-03-12 /bin/bash```\n\n`docker exec -it tomcat8282 /bin/bash`\n\n`cat webapps/ilanni/index.html`\n\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B001.png)\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B002.png)\n\n\n启动第二个实例：\n```\ndocker run -dit --name tomcat8383 -v /root/:/root/ -p 8383:8080 192.168.8.188:5000/ilanni:160922-03-12 /bin/bash```\n\n`docker exec -it tomcat8383 /bin/bash`\n\n`cat webapps/ilanni/index.html`\n\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B003.png)\n![](http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B004.png)\n\n\n---","slug":"虚拟化-2016-11-03-tomcat单机多实例","published":1,"updated":"2016-11-21T02:17:09.171Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjp2004fd8pk1qii9jue","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><p>运用了一个镜像启动多个容器，一个容器可以启动多个示例的原理，具体请搜索本博客：Docker常用命令</p>\n<p>此篇博客是学习“烂泥”大神分享的笔记写的！</p>\n<p>主机IP：192.168.8.33<br>容器IP：192.168.8.188<br>从docker仓库下载最新的tomcat容器，然后使用这个tomcat容器，就可以启动多个tomcat实例，而我们只需要在192.168.0.100上通过端口进行区分就行了。</p>\n<p>启动第一个实例：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -dit --name tomcat8282 -v <span class=\"regexp\">/root/</span>:<span class=\"regexp\">/root/</span> -p <span class=\"number\">8282</span>:<span class=\"number\">8080</span> <span class=\"number\">192.168</span>.<span class=\"number\">8.188</span>:<span class=\"number\">5000</span><span class=\"regexp\">/ilanni:160922-03-12 /</span>bin<span class=\"regexp\">/bash</span></div></pre></td></tr></table></figure></p>\n<p><code>docker exec -it tomcat8282 /bin/bash</code></p>\n<p><code>cat webapps/ilanni/index.html</code></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B001.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B002.png\" alt=\"\"></p>\n<p>启动第二个实例：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -dit --name tomcat8383 -v <span class=\"regexp\">/root/</span>:<span class=\"regexp\">/root/</span> -p <span class=\"number\">8383</span>:<span class=\"number\">8080</span> <span class=\"number\">192.168</span>.<span class=\"number\">8.188</span>:<span class=\"number\">5000</span><span class=\"regexp\">/ilanni:160922-03-12 /</span>bin<span class=\"regexp\">/bash</span></div></pre></td></tr></table></figure></p>\n<p><code>docker exec -it tomcat8383 /bin/bash</code></p>\n<p><code>cat webapps/ilanni/index.html</code></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B003.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B004.png\" alt=\"\"></p>\n<hr>\n","excerpt":"","more":"<p>运用了一个镜像启动多个容器，一个容器可以启动多个示例的原理，具体请搜索本博客：Docker常用命令</p>\n<p>此篇博客是学习“烂泥”大神分享的笔记写的！</p>\n<p>主机IP：192.168.8.33<br>容器IP：192.168.8.188<br>从docker仓库下载最新的tomcat容器，然后使用这个tomcat容器，就可以启动多个tomcat实例，而我们只需要在192.168.0.100上通过端口进行区分就行了。</p>\n<p>启动第一个实例：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -dit --name tomcat8282 -v <span class=\"regexp\">/root/</span>:<span class=\"regexp\">/root/</span> -p <span class=\"number\">8282</span>:<span class=\"number\">8080</span> <span class=\"number\">192.168</span>.<span class=\"number\">8.188</span>:<span class=\"number\">5000</span><span class=\"regexp\">/ilanni:160922-03-12 /</span>bin<span class=\"regexp\">/bash</span></div></pre></td></tr></table></figure></p>\n<p><code>docker exec -it tomcat8282 /bin/bash</code></p>\n<p><code>cat webapps/ilanni/index.html</code></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B001.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B002.png\" alt=\"\"></p>\n<p>启动第二个实例：<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -dit --name tomcat8383 -v <span class=\"regexp\">/root/</span>:<span class=\"regexp\">/root/</span> -p <span class=\"number\">8383</span>:<span class=\"number\">8080</span> <span class=\"number\">192.168</span>.<span class=\"number\">8.188</span>:<span class=\"number\">5000</span><span class=\"regexp\">/ilanni:160922-03-12 /</span>bin<span class=\"regexp\">/bash</span></div></pre></td></tr></table></figure></p>\n<p><code>docker exec -it tomcat8383 /bin/bash</code></p>\n<p><code>cat webapps/ilanni/index.html</code></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B003.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/docker%20tomcat%E5%8D%95%E6%9C%BA%E5%A4%9A%E5%AE%9E%E4%BE%8B004.png\" alt=\"\"></p>\n<hr>\n"},{"title":"集群、自动化链接更新页","abbrlink":36339,"date":"2016-11-03T09:51:42.000Z","_content":"\n## jumpserver\n官网：http://www.jumpserver.org/\nhttps://github.com/jumpserver/jumpserver\n\n## 堡垒机集群搭建\nhttp://www.tuicool.com/articles/vI7VzyB\n\n\n---","source":"_posts/集群自动化/2016-11-03-集群、自动化链接更新页.md","raw":"---\ntitle: 集群、自动化链接更新页\ncategories:\n  - 集群自动化\ntags:\n  - 集群\n  - 自动化\n  - 堡垒机\nabbrlink: 36339\ndate: 2016-11-03 17:51:42\n---\n\n## jumpserver\n官网：http://www.jumpserver.org/\nhttps://github.com/jumpserver/jumpserver\n\n## 堡垒机集群搭建\nhttp://www.tuicool.com/articles/vI7VzyB\n\n\n---","slug":"集群自动化-2016-11-03-集群、自动化链接更新页","published":1,"updated":"2016-11-21T02:17:09.194Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjp3004hd8pkmy5xvqxp","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h2 id=\"jumpserver\"><a href=\"#jumpserver\" class=\"headerlink\" title=\"jumpserver\"></a>jumpserver</h2><p>官网：<a href=\"http://www.jumpserver.org/\" target=\"_blank\" rel=\"external\">http://www.jumpserver.org/</a><br><a href=\"https://github.com/jumpserver/jumpserver\" target=\"_blank\" rel=\"external\">https://github.com/jumpserver/jumpserver</a></p>\n<h2 id=\"堡垒机集群搭建\"><a href=\"#堡垒机集群搭建\" class=\"headerlink\" title=\"堡垒机集群搭建\"></a>堡垒机集群搭建</h2><p><a href=\"http://www.tuicool.com/articles/vI7VzyB\" target=\"_blank\" rel=\"external\">http://www.tuicool.com/articles/vI7VzyB</a></p>\n<hr>\n","excerpt":"","more":"<h2 id=\"jumpserver\"><a href=\"#jumpserver\" class=\"headerlink\" title=\"jumpserver\"></a>jumpserver</h2><p>官网：<a href=\"http://www.jumpserver.org/\">http://www.jumpserver.org/</a><br><a href=\"https://github.com/jumpserver/jumpserver\">https://github.com/jumpserver/jumpserver</a></p>\n<h2 id=\"堡垒机集群搭建\"><a href=\"#堡垒机集群搭建\" class=\"headerlink\" title=\"堡垒机集群搭建\"></a>堡垒机集群搭建</h2><p><a href=\"http://www.tuicool.com/articles/vI7VzyB\">http://www.tuicool.com/articles/vI7VzyB</a></p>\n<hr>\n"},{"title":"用Hexo搭建博客","abbrlink":23632,"date":"2016-11-08T07:20:01.000Z","_content":"\n# 安装Hexo\nHexo是用node-js写的，hexo生成静态页面的速度要比较快，hexo是本地生成html再上传。\n官网：https://hexo.io/zh-cn/docs/\n## 安装Node.js\n官网下载对应平台安装包安装：https://nodejs.org  \n详见：[Node.js开发环境搭建](http://leolan.top/2016/11/02/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-11-02-Node-js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)\n\n## 安装Hexo\n\n```\nnpm install -g hexo-cli  #Mac下西安**sudo -i**切换到root权限。\nhexo init blog           #blog文件夹要先建好，这一步自动生成网站。\ncd blog\nnpm install              #安装依赖的插件。\nhexo server              #运行服务\n```\n\n这时可以在浏览器打开网页。`hexo server`的简化命令为`hexo s`；指定端口：`-p xxxx`\n和jekyll一样是通过修改**_config.yml**文件来配置站点信息的。（在Hexo中，根目录下的**_config.yml**文件是用来配置网站信息的；主题目录下的**_config.yml**文件是用来配置文章主题，页面等等的）\n\n默认的目录结构如下：\n\n```\n├── .deploy       #执行hexo deploy命令部署到GitHub上的内容目录\n├── public        #执行hexo generate命令，输出的静态网页内容目录\n├── scaffolds     #layout模板文件目录，其中的md文件可以添加编辑\n├── scripts       #扩展脚本目录，这里可以自定义一些javascript脚本\n├── source        #文章源码目录，该目录下的markdown和html文件均会被hexo处理。404文件，CNAME文件等都应该放这里。\n| ├── _drafts     #草稿文章\n| └── _posts      #发布的文章\n├── themes        #主题文件目录\n├── _config.yml   #全局配置文件，大多数的设置都在这里\n└── package.json  #应用程序数据，指明hexo的版本等信息。在push到github时提示*.json错误，删掉这个文件或删掉db.json就行。\n```\n---\n\n# 配置优化、定制站点\nNext官方设置说明：http://theme-next.iissnan.com/getting-started.html\n\n## 站点配置\n以下是我的配置文件：\n\n```\n# Hexo Configuration\n## Docs: https://hexo.io/docs/configuration.html\n## Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: Leo Lan的博客\nsubtitle:  有时候正是不报期望的人做出了人们不敢期望之事！\ndescription: Better late than never\nauthor: LeoLan\nlanguage: zh-Hans\ntimezone: Asia/Shanghai\n\n# URL\n## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: https://www.leolan.top\ncoding_url: https://www.leolan.top\nroot: /\npermalink: posts/:abbrlink/\npermalink_defaults:\n\n# Directory\nsource_dir: source\npublic_dir: public\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: downloads/code\ni18n_dir: :lang\n#禁止编译README.md文件，也可以在文件中增加yml文件头layout: false，---结尾\nskip_render:\n    - baidu_verify_dc4dBM4StW.html\n    - googled7e43f3624e0f703.html\n    - CNAME\n    - README.md\n    - .nojekyll\n    - Staticfile\n\n# 假设你的Source文件夹里面有个Demo目录，要忽略Demo目录下的所有html页面，具体如下：\n\n# skip_render: Demo/*.html\n# 文件匹配是基于正则匹配的，更复杂的情况如下\n# 1.单个文件夹下全部文件：skip_render: demo/*\n# 2.单个文件夹下指定类型文件：skip_render: demo/*.html\n# 3.单个文件夹下全部文件以及子目录:skip_render: demo/**\n# 4.多个文件夹以及各种复杂情况：\n# skip_render:\n#     - 'demo/*.html'\n#     - 'demo/**'\n\n\n#强制包含.nojekyll文件（放在source下），这样hexo g时，.开头的文件具不会被忽略，适用于5.0以下版本的next主题（github屏蔽了一些文件夹）\ninclude:\n  - .nojekyll\n\n# abbrlink config 生成文章永久链接（利于SEO）需要安装插件\nabbrlink:\n  alg: crc16  # 算法：crc16(default) and crc32 \n  rep: dec    # 进制：dec(default) and hex\n\nbaidu_url_submit:  #百度链接推送，推送刚刚生成的永久链接\n  count: 5 ## 比如3，代表提交最新的三个链接\n  host: www.leolan.top ## 在百度站长平台中注册的域名\n  token: kZ5xboXBFPxQ0g7N ## 请注意这是您的秘钥， 请不要发布在公众仓库里!\n  path: /baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里\n\n\n# Writing  官网：https://hexo.io/zh-cn/docs/writing.html\nnew_post_name: :year-:month-:day-:title.md # File name of new posts\ndefault_layout: post\ntitlecase: false # Transform title into titlecase\nexternal_link: true # Open external links in new tab\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false   #新建文章时自动生成本地存放图片等资源的文件夹\nrelative_link: false\nfuture: true\nhighlight:\n  enable: true\n  line_number: true\n  auto_detect: true\n  tab_replace:\n\n# Category & Tag\ndefault_category: uncategorized\ncategory_map:\ntag_map:\n\n# Date / Time format\n## Hexo uses Moment.js to parse and display date\n## You can customize the date format as defined in\n## http://momentjs.com/docs/#/displaying/format/\ndate_format: YYYY-MM-DD\ntime_format: HH:mm:ss\n\n# Pagination  单独页面文章数目，需要安装以下3个插件\n#npm install --save hexo-generator-index\n#npm install --save hexo-generator-archive\n#npm install --save hexo-generator-tag\n## Set per_page to 0 to disable pagination\nindex_generator:\n  per_page: 5\n\narchive_generator:\n  per_page: 20\n  yearly: true\n  monthly: true\n\ntag_generator:\n  per_page: 10\n\npagination_dir: page\n\n# Extensions 主题选择\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: next5.1\n#theme: next0.4\n\n\n# Deployment 自动部署到仓库\n## 官方文档Docs: https://hexo.io/docs/deployment.html   有部署到各种服务器的方法\n## 参考：http://www.lxway.com/240950852.htm\n#不管是github还是coding，type都填写git\ndeploy:\n- type: git\n  repo: git@git.coding.net:leolan/blog.git,master\n  message: 'LeoLan updated：{{now(\"YYYY-MM-DD HH:mm:ss\")}}'  #这个是commit的说明，因为是发布站点，方便看到发布时间。\n- type: git\n  repo: git@github.com:MyLeoLan/blog.git,master\n  message: 'LeoLan updated：{{now(\"YYYY-MM-DD HH:mm:ss\")}}'\n#deploy:\n#- type: git\n#  repo:\n#- type: heroku（另一种云平台）\n#  repo:\n\n\n\n\n# Disqus #Disqus评论系统\ndisqus_shortname: leolan\n\n\n#plugins: #插件，例如生成 RSS 和站点地图的\n#hexo-generator-sitemap\n#- hexo-generator-baidu-sitemap\nplugins:\n  hexo-generator-feed\n  hexo-generator-baidu-sitemap\n\nsitemap:\n  path: sitemap.xml    \nbaidusitemap:\n  path: baidusitemap.xml\n\n\n# Social links 社交链接\nsocial:\n  GitHub: https://github.com/myleolan\n  Coding: https://coding.net/u/leolan\n  CSDN: http://blog.csdn.net/lan842632\n  OSchina: https://my.oschina.net/leolan/blog\n  #Twitter: https://twitter.com/lmintlcx\n  #Zhihu: http://www.zhihu.com/people/lmintlcx\n  #Douban: http://www.douban.com/people/lmintlcx\n  #Weibo: http://weibo.com/u/3233729080\n\nduoshuo_shortname: leolan\n# 多说热评文章 true 或者 false\nduoshuo_hotartical: true\n# 多说分享服务\nduoshuo_share: true\n# 百度分享服务\nbaidushare: true\n\n#打赏功能\nreward_comment: 您的支持将鼓励我继续创作,非常感谢！\nalipay: http://ofyfogrgx.bkt.clouddn.com//pay/alipay.jpg\nwechatpay: http://ofyfogrgx.bkt.clouddn.com//pay/weixinpay.png\n\n#站点建立时间\nsince: 2016\n\n#百度分析\nbaidu_analytics: dc0e85252eeff3a87aa87f35d92a8d33\n\n#本地搜索\nsearch:\n  path: search.xml\n  field: post\n  format: html\n  limit: 10000\n\n```\n\n## 主题配置\n推荐Next主题，简单简洁，官网：http://theme-next.iissnan.com/\n安装最新版：\n```\ncd your-hexo-site\ngit clone https://github.com/iissnan/hexo-theme-next themes/next```\n在主题目录下可以看到next文件夹，修改**站点配置文件_config.yml**中的`theme: next`\n`hexo clean && hexo s`就可以看到新主题生效啦！\n接下来修改**主题配置文件_config.yml**，以下是我的配置。\n```\n# ---------------------------------------------------------------\n# Site Information Settings\n# ---------------------------------------------------------------\n\n# Put your favicon.ico into `hexo-site/source/` directory.\nfavicon: /200.png\n\n# Set default keywords (Use a comma to separate) 站点关键词，利于SEO\nkeywords: \"Hexo, NexT, Leo Lan, leolan, Blog, myleolan, lan, coding\"\n\n# Set rss to false to disable feed link.\n# Leave rss as empty to use site's feed link.\n# Set rss to specific value if you have burned your feed already.\nrss:\n\n# Specify the date when the site was setup\n#since: 2015\n\n# Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.\n# See: https://support.google.com/webmasters/answer/139066\n# Tips: Before you open this tag, remeber set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )\ncanonical: true\n\n\n# ---------------------------------------------------------------\n# Menu Settings\n# ---------------------------------------------------------------\n\n# When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -> archives)\nmenu:\n  home: /\n  categories: /categories\n  tags: /tags\n  archives: /archives\n  about: /about\n  guestbook: /guestbook\n # schedule: /schedule\n  #commonweal: /404.html\n\n\n# Enable/Disable menu icons.  菜单图标\n# Icon Mapping:\n#   Map a menu item to a specific FontAwesome icon name.\n#   Key is the name of menu item and value is the name of FontAwsome icon. Key is case-senstive.\n#   When an question mask icon presenting up means that the item has no mapping icon.\nmenu_icons:   #http://fontawesome.io/icons/\n  enable: true\n  #KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome\n  home: home\n  about: user\n  categories: th\n  schedule: calendar\n  tags: tags\n  archives: archive\n  commonweal: heartbeat\n  guestbook: commenting\n\n\n# ---------------------------------------------------------------\n# Scheme Settings\n# ---------------------------------------------------------------\n\n# Schemes\n#scheme: Muse\n#scheme: Mist\nscheme: Pisces\n\n\n# ---------------------------------------------------------------\n# Font Settings\n# - Find fonts on Google Fonts (https://www.google.com/fonts)\n# - All fonts set here will have the following styles:\n#     light, light italic, normal, normal intalic, bold, bold italic\n# - Be aware that setting too much fonts will cause site running slowly\n# - Introduce in 5.0.1\n# ---------------------------------------------------------------\nfont:\n  enable: true\n\n  # Uri of fonts host. E.g. //fonts.googleapis.com (Default) 慢的话搜索fonts.googleapis.com即可找到替换地址\n  host: fonts.css.network\n\n  # Global font settings used on <body> element.\n  global:\n    # external: true will load this font family from host.\n    external: true\n    family: Lato\n\n  # Font settings for Headlines (h1, h2, h3, h4, h5, h6)\n  # Fallback to `global` font settings.\n  headings:\n    external: true\n    family:\n\n  # Font settings for posts\n  # Fallback to `global` font settings.\n  posts:\n    external: true\n    family:\n\n  # Font settings for Logo\n  # Fallback to `global` font settings.\n  # The `size` option use `px` as unit\n  logo:\n    external: true\n    family:\n    size:\n\n  # Font settings for <code> and code blocks.\n  codes:\n    external: true\n    family:\n    size:\n\n\n\n# ---------------------------------------------------------------\n# Sidebar Settings\n# ---------------------------------------------------------------\n\n# Social Links 社交链接\n# Key is the link label showing to end users.\n# Value is the target link (E.g. GitHub: https://github.com/iissnan)\n#social:\n#LinkLabel: Link\n\n# Social Links Icons\n# Icon Mapping:\n#   Map a menu item to a specific FontAwesome icon name.\n#   Key is the name of the item and value is the name of FontAwsome icon. Key is case-senstive.\n#   When an globe mask icon presenting up means that the item has no mapping icon.\nsocial_icons:    #这是社交链接图标，打开网站找到图标，直接引用名字就行，next已引用了该库http://fontawesome.io/icons/\n  enable: true\n  # Icon Mappings.\n  # KeyMapsToSocalItemKey: NameOfTheIconFromFontAwesome\n  GitHub: github\n  Coding: github-alt\n  Cloud: cloud\n  OSchina: git-square\n  #Twitter: twitter\n  #Weibo: weibo\n\n\n# Sidebar Avatar\n# in theme directory(source/images): /images/avatar.jpg\n# in site  directory(source/uploads): /uploads/avatar.jpg\navatar: /images/avatar.jpg    #博客侧边栏显示的头像\n\n\n# Table Of Contents in the Sidebar\ntoc:\n  enable: true\n\n  # Automatically add list number to toc.\n  number: true\n\n# Creative Commons 4.0 International License.\n# http://creativecommons.org/\n# Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero\n#creative_commons: by-nc-sa\n#creative_commons:\n\nsidebar:\n  # Sidebar Position, available value: left | right\n  position: left\n  #position: right\n\n  # Sidebar Display, available value: 侧边栏显示\n  #  - post    expand on posts automatically. Default.\n  #  - always  expand for all pages automatically\n  #  - hide    expand only when click on the sidebar toggle icon.\n  #  - remove  Totally remove sidebar including sidebar toggler.\n  display: post\n  #display: always\n  #display: hide\n  #display: remove\n\n\n# Blogrolls 友情链接\nlinks_title: 友链\n#links_layout: block\nlinks_icon: heartbeat\n#links_layout: inline\nlinks:\n  Jerry Locke: https://jerry.hk/\n\n# ---------------------------------------------------------------\n# Misc Theme Settings\n# ---------------------------------------------------------------\n\n# Custom Logo.\n# !!Only available for Default Scheme currently.\n# Options:\n#   enabled: [true/false] - Replace with specific image\n#   image: url-of-image   - Images's url\ncustom_logo:\n  enabled: false\n  image:\n\n\n# Code Highlight theme  代码高亮主题\n# Available value:\n#    normal | night | night eighties | night blue | night bright\n# https://github.com/chriskempson/tomorrow-theme\nhighlight_theme: night eighties\n\n\n# Automatically scroll page to section which is under <!-- more --> mark.\nscroll_to_more: true\n\n\n# Automatically Excerpt. Not recommand.\n# Please use <!-- more --> in the post to control excerpt accurately.\nauto_excerpt:\n  enable: true\n  length: 150\n\n\n# Wechat Subscriber 微信打赏\n#wechat_subscriber:\n  #enabled: true\n  #qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg\n  #description: ex. subscribe to my blog by scanning my public wechat account\n\n\n\n\n# ---------------------------------------------------------------\n# Third Party Services Settings\n# ---------------------------------------------------------------\n\n# MathJax Support 数学公式\nmathjax:\n  enable: false\n  cdn: //cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\n\n#各种第三方服务\n# Swiftype Search API Key\n#swiftype_key:\n\n# Baidu Analytics ID\n#baidu_analytics:\n\n# Duoshuo ShortName\n#duoshuo_shortname:\n\n# Disqus\n#disqus_shortname:\n\n# Baidu Share\n# Available value:\n#    button | slide\n# Warning: Baidu Share does not support https.\n#baidushare:\n##  type: button\n\n# Share\njiathis: true\n# Warning: JiaThis does not support https.\n#add_this_id:\n\n# Share\nduoshuo_share: true\n\n# Google Webmaster tools verification setting\n# See: https://www.google.com/webmasters/\n#google_site_verification:\n\n\n# Google Analytics\n#google_analytics:\n\n# CNZZ count\n#cnzz_siteid:\n\n\n# Make duoshuo show UA\n# user_id must NOT be null when admin_enable is true!\n# you can visit http://dev.duoshuo.com get duoshuo user id.\nduoshuo_info:\n  ua_enable: true\n  admin_enable: ture\n  user_id: 6343395544286626562\n  admin_nickname: 博主\n\n\n# Facebook SDK Support.\n# https://github.com/iissnan/hexo-theme-next/pull/410\nfacebook_sdk:\n  enable: false\n  app_id:       #<app_id>\n  fb_admin:     #<user_id>\n  like_button:  #true\n  webmaster:    #true\n\n# Facebook comments plugin\n# This plugin depends on Facebook SDK.\n# If facebook_sdk.enable is false, Facebook comments plugin is unavailable.\nfacebook_comments_plugin:\n  enable: false\n  num_of_posts: 10  # min posts num is 1\n  width: 100%       # default width is 550px\n  scheme: light     # default scheme is light (light or dark)\n\n\n# Show number of visitors to each article.\n# You can visit https://leancloud.cn get AppID and AppKey.\nleancloud_visitors:\n  enable: true\n  app_id: zieuxKa4IjAP6VgxxvBe4vkj-gzGzoHsz\n  app_key: MHGN54IEuofFNV1AROiRkEoG\n\n# Show PV/UV of the website/page with busuanzi. 不蒜子网站访问量统计\n# Get more information on http://ibruce.info/2015/04/04/busuanzi/\n#busuanzi_count:\n  # count values only if the other configs are false\n#  enable: true\n  # custom uv span for the whole site\n#  site_uv: true\n#  site_uv_header: 你是第\n#  site_uv_footer: 个小伙伴\n  # custom pv span for the whole site\n#  site_pv: true\n#  site_pv_header: 本站总浏览\n#  site_pv_footer: 次\n  # custom pv span for one page only\n#  page_pv: true\n#  page_pv_header: 热度\n#  page_pv_footer: ℃\n\n# Tencent analytics ID\n# tencent_analytics:\n\n# Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO\nbaidu_push: true\n\n# Google Calendar\n# Share your recent schedule to others via calendar page\n#\n# API Documentation:\n# https://developers.google.com/google-apps/calendar/v3/reference/events/list\ncalendar:\n  enable: false\n  calendar_id: <required>\n  api_key: <required>\n  orderBy: startTime\n  offsetMax: 24\n  offsetMin: 4\n  timeZone:\n  showDeleted: false\n  singleEvents: true\n  maxResults: 250\n\n\n#! ---------------------------------------------------------------\n#! DO NOT EDIT THE FOLLOWING SETTINGS\n#! UNLESS YOU KNOW WHAT YOU ARE DOING\n#! ---------------------------------------------------------------\n\n# Motion\nuse_motion: true\n\n# Fancybox\nfancybox: true\n\n\n# Script Vendors.\n# Set a CDN address for the vendor you want to customize.\n# For example\n#    jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js\n# Be aware that you should use the same version as internal ones to avoid potential problems.\n# Please use the https protocol of CDN files when you enable https on your site.\nvendors:\n  # Internal path prefix. Please do not edit it. 5.0以下版本如果打开网页空白，就把vendors文件夹改名为lib,这里对应改。\n  _internal: lib\n\n  # Internal version: 2.1.3\n  jquery:\n\n  # Internal version: 2.1.5\n  # See: http://fancyapps.com/fancybox/\n  fancybox:\n  fancybox_css:\n\n  # Internal version: 1.0.6\n  # See: https://github.com/ftlabs/fastclick\n  fastclick:\n\n  # Internal version: 1.9.7\n  # See: https://github.com/tuupola/jquery_lazyload\n  lazyload:\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity:\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity_ui:\n\n  # Internal version: 0.7.9\n  # See: https://faisalman.github.io/ua-parser-js/\n  ua_parser:\n\n  # Internal version: 4.4.0\n  # See: http://fontawesome.io/\n  fontawesome:\n\n# 多说热评文章 true 或者 false\nduoshuo_hotartical: true\n\n# Assets\ncss: css\njs: js\nimages: images\n\n# Theme version\nversion: 5.1.0\n\n```\n\n\n---\n## 安装插件\nhexo支持插件，可以直接通过命令行安装即可：`npm install **plugin-name** --save`\n更新插件\n`npm update`\n卸载插件\n`npm uninstall **plugin-name**`\n下面推荐几个常用的插件：\nfeed插件:`npm install hexo-generator-feed --save`\n站点地图:`npm install hexo-generator-sitemap --save`\n百度站点地图:`npm install hexo-generator-baidu-sitemap --save`\n\n---\n## 自由定制\n### 文章字数、阅读时长统计\n修改**post.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\post.swig\n\n安装hexo-wordcount插件\n```\nnpm install hexo-wordcount --save```\n通过以上安装后，你可以在你的模板文件后者.md文件加入以下相关的标签实现本插件的功能\n**字数统计**:WordCount\n```\n<span class=\"post-count\">{{ wordcount(post.content) }}</span>```\n\n**阅读时长预计**:Min2Read\n```\n<span class=\"post-count\">{{ min2read(post.content) }}</span>```\n**总字数统计**: TotalCount\n```\n<span class=\"post-count\">{{ totalcount(site, '0,0.0a') }}</span>```\n\n\n插入的代码以下：\n```\n          {% if not is_index and theme.facebook_sdk.enable and theme.facebook_sdk.like_button %}\n            &nbsp; | &nbsp;\n            <div class=\"fb-like\" data-layout=\"button_count\" data-share=\"true\"></div>\n          {% endif %}\n<!--从这里插入代码，上边是Facebook的代码-->\n<!--leancloud文章阅读量统计（主题默认已经添加）参考：http://www.joryhe.com/2016-05-29-how_to_create_leancloud_read_Counter.html-->\n          {# LeanCould PageView #}\n          {% if theme.leancloud_visitors.enable %}\n             <span id=\"{{ url_for(post.path) }}\" class=\"leancloud_visitors\" data-flag-title=\"{{ post.title }}\">\n               &nbsp; | &nbsp;\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               <span class=\"post-meta-item-text\">{{__('post.visitors')}} </span>\n               <span class=\"leancloud-visitors-count\"></span>\n              </span>\n          {% endif %}\n<!--字数、阅读时长统计-->\n         <span class=\"post-time\">\n     &nbsp; | &nbsp;\n           <span class=\"post-meta-item-icon\">\n             <i class=\"fa fa-calendar-o\"></i>\n           </span>\n           <span class=\"post-meta-item-text\">字数统计:</span>\n           <span class=\"post-count\">{{ wordcount(post.content) }}(字)</span>          \n         </span>\n\n\t\t<span class=\"post-time\">\n\t   &nbsp; | &nbsp;\n           <span class=\"post-meta-item-icon\">\n             <i class=\"fa fa-calendar-o\"></i>\n           </span>\n           <span class=\"post-meta-item-text\">阅读时长:</span>\n           <span class=\"post-count\">{{ min2read(post.content) }}(分)</span>         \n         </span>\n<!--不蒜子网站访问量统计（主题默认已经添加），如果出现排班错位请忽略，下面用官网的方法实现-->\n          {% if not is_index and theme.busuanzi_count.enable and theme.busuanzi_count.page_pv %}\n              &nbsp; | &nbsp;\n              <span class=\"page-pv\">{{ theme.busuanzi_count.page_pv_header }}\n              <span class=\"busuanzi-value\" id=\"busuanzi_value_page_pv\" ></span>{{ theme.busuanzi_count.page_pv_footer }}\n              </span>\n          {% endif %}```\n\n---\n### 文章结语\n修改**post.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\post.swig\n\n```\n          {% if post.type === 'picture' %}\n            <a href=\"{{ url_for(post.path) }}\">{{ post.content }}</a>\n          {% else %}\n            {{ post.content }}\n          {% endif %}\n        {% endif %}\n      {% else %}\n        {{ post.content }}\n<!--这里是每篇文章的尾巴，从这里开始插入代码-->\n<html>\n  <body>\n    <h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2>\n    <blockquote><p>如果您觉得本博客还不错，欢迎继续关注本博客，欢迎多提宝贵意见，非常感谢！</p></blockquote></div>\n    <div style=\"text-align:center;color:#ccc;font-size:14px;\">------本文结束<i class=\"fa fa-paw\"></i>感谢阅读------</div>\n  </body>\n</html>\n\n<!--下面这部分左边有框，但位置不够就会排班错乱\n<html>\n  <body>\n    <h1>结语</h1>\n      <p><h5><a href=\"#\" onclick=\"go_my_site()\" rel=\"external\">Leo Lan Blog Share For you!</a></h5></p>\n      <p>如果您觉得本博客还不错，欢迎继续关注Leo Lan的博客，欢迎多提宝贵意见，非常感谢！</p>\n  </body>\n</html>\n\n<html>\n  <body>\n    <h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2>\n    <blockquote><p>如果您觉得本博客还不错，欢迎收藏书签，欢迎多提宝贵意见，非常感谢！</p>\n    <footer><strong>Welcome to LeoLan'S BLOG</strong>\n    <cite><a href=\"#\" onclick=\"go_my_site()\" rel=\"external\">Leo Lan Blog Share For you!</a></cite></footer></blockquote></div>\n  </body>\n</html>\n-->```\n\n---\n### 文章底部的标签云锚点\n修改**post.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\post.swig\n\n```\n<!--这是文章底部标签云锚点，不喜欢就注释掉\n    <footer class=\"post-footer\">\n      {% if post.tags and post.tags.length and not is_index %}\n        <div class=\"post-tags\">\n          {% for tag in post.tags %}\n            <a href=\"{{ url_for(tag.path) }}\" rel=\"tag\"># {{ tag.name }}</a>\n          {% endfor %}\n        </div>\n      {% endif %}\n-->```\n\n---\n\n### 不蒜子网站访问量统计、删除NEXT主题自带尾巴\n修改**footer.swig**模板\n**模板位置**：themes\\next\\layout\\\\_partials\\footer.swig\n官网：http://service.ibruce.info   \nhttp://ibruce.info/2015/04/04/busuanzi/\n把代码改成这个样子，`busuanzi_value_site_uv`中，uv和pv功能是不一样的。\n```\n<div class=\"powered-by\">\n  {{ __('footer.powered', '') }}\n</div>\n\n<div class=\"theme-info\">\n  {{ __('footer.theme') }}<span id=\"busuanzi_value_site_uv\"></span>位小伙伴\n</div>\n\n<script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\">\n</script>\n```\n同时更改语言文件中对应的名称\n编辑：**themes\\languages\\zh_Hans.yml**\n```\nfooter:\n  powered: 本站总访问量<span id=\"busuanzi_value_site_pv\"></span>\n  theme: 您是第\n#<a target=\"_blank\" href=\"http://www.miitbeian.gov.cn/\">粤ICP备16026009号-2</a>```\n\n---\n### 居中模块\n把要居中的模块、代码、文字、插件、外链等，放在下面代码的中间即可居中显示。\n```\n<!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 -->\n<!-- 其中 class=\"blockquote-center\" 是必须的 -->\n  <blockquote class=\"blockquote-center\">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>\n或者\n  <!-- 标签 方式，要求版本在0.4.5或以上 -->\n{% centerquote %}优秀的人，不是不合群，而是他们合群的人里面没有你{% endcenterquote %}\n或者\n  <!-- 标签别名 -->\n{% cq %} 优秀的人，不是不合群，而是他们合群的人里面没有你 {% endcq %}\n\n```\n\n---\n### 留言板\n编辑：**themes\\languages\\zh_Hans.yml**\n```\ntitle:   #这里增加\n  guestbook: 留言板\n\nmenu:    #这里增加\n  guestbook: 给我留言```\n在站点source目录下新建guestbook文件夹，里面新建index.md文件，内容如下(其中调用HTML代码，插入了一个播放器)：\n```\n---\ntitle: 留言板\ndate: 2016-11-14 17:21:10\n---\n<blockquote class=\"blockquote-center\">\n<!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽-->\n    <h2>Stay Hungry,Stay Foolish</h2>\n   <!--<embed src=\"https://music.163.com/style/swf/widget.swf?sid=34971711&type=1&auto=1&width=310&height=90\" width=\"330\" height=\"110\"  allowNetworking=\"all\"></embed>\n   <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=110 src=\"https://music.163.com/outchain/player?type=1&id=34971711&auto=1&height=90\"></iframe>-->\n   <embed src=\"https://music.163.com/style/swf/widget.swf?sid=32507038&type=2&auto=1&width=320&height=66\" width=\"340\" height=\"86\"  allowNetworking=\"all\"></embed>\n   <!--这里是插入视频的方法\n\t<iframe src=\"//www.youtube.com/embed/JMl8cQjBfqk\" width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen></iframe>-->\n</blockquote>\n<br/>\n<span id=\"yu-2\">最近访客</span>\n<div class=\"ds-recent-visitors\" data-num-items=\"39\" data-avatar-size=\"40\" id=\"ds-recent-visitors\"></div>\n<br/>```\n**编辑主题配置文件**：_config.yml\n```\nmenu:   #在这里加上\n  guestbook: /guestbook```\n\n---\n### 字体\n关于字体的修改开始时遇到很多问题，到后来才找到了原因，是因为引用的字体在**www.google.com/fonts**（默认是Google字体库）里找不到，或者是付费的字体。修改为免费的字体就正常使用了。打开[Google Fonts](www.google.com/fonts)，右上角查找你要的字体，能搜索到的话把全名复制下来，填写在配置文件中。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161206/152548232.png)\n\n修改**\\themes\\next\\_config.yml**找到**Font Settings**\n```\n# Font Settings\n# - Find fonts on Google Fonts (https://www.google.com/fonts)\n# - All fonts set here will have the following styles:\n#     light, light italic, normal, normal intalic, bold, bold italic\n# - Be aware that setting too much fonts will cause site running slowly\n# - Introduce in 5.0.1\n# ---------------------------------------------------------------\nfont:\n  enable: true\n\n  # Uri of fonts host. E.g. //fonts.googleapis.com (Default) \n  # 外链字体库地址，例如 //fonts.googleapis.com (默认值)\n加载慢的话搜索fonts.googleapis.com即可找到替换地址,这里注意使用的地址中包含了下面设置的字体，没有的话是默认字体。\n  host: \n  #fonts.css.network\n\n  # Global font settings used on <body> element.\n  # 全局字体，应用在 <body> 元素上\n  global:\n    # external: true will load this font family from host.\n    external: true\n    family: Lato\n    #Monda\n\n  # Font settings for Headlines (h1, h2, h3, h4, h5, h6)\n  # Fallback to `global` font settings.\n  # 标题字体 (h1, h2, h3, h4, h5, h6)\n  headings:\n    external: true\n    family: \n\n  # Font settings for posts\n  # Fallback to `global` font settings.\n  # 文章字体\n  posts:\n    external: true\n    family: Roboto\n\n  # Font settings for Logo\n  # Fallback to `global` font settings.\n  # The `size` option use `px` as unit\n  # Logo 字体\n  logo:\n    external: true\n    family: Georgia\n    size: 24\n\n  # Font settings for <code> and code blocks.\n # 代码字体，应用于 <code> 以及代码块\n  codes:\n    external: true\n    family: \n    size: 14\n#字体大小直接加个size: 写就行，单位是px，不填写则为默认大小。\n#\"Source Code Pro\", \"PT Mono\", \"DejaVu Sans Mono\", ```\n\n参考：\n[Next主题设置字体](http://theme-next.iissnan.com/theme-settings.html#fonts-customization)  |  [如何引用google字体](http://jingyan.baidu.com/article/09ea3ede0cb0e1c0aede39d8.html)\n\n如果要在文章中临时引用特殊的字体格式，可以直接在 Markdown 文档中使用 html 语法\n```\n<font size=4 > 这里输入文字，自定义大小 </font>\n<font color=\"#FF0000\"> 这里输入文字，自定义颜色的字体 </font> ```\n\n---\n### 404页面\n404页面可以自己写，也可以引用腾讯公益404页面。\n这是嵌入到主题中的404页面而不是新开一个页面；在站点目录source目录下新建**404.html**文件，粘贴以下代码：\n```\n<!DOCTYPE HTML>\n<html>\n<head>\n\t<title>404 - arao'blog</title>\n\t<meta name=\"description\" content=\"404错误，页面不存在！\">\n\t<meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n\t<meta name=\"robots\" content=\"all\" />\n\t<meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\t<script type=\"text/javascript\" src=\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\" charset=\"utf-8\"></script>\n</body>\n</html>```\n\n---\n### 打赏\n修改**reward.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\reward.swig\n\n直接全部替换代码，这段代码是圆形的打赏按钮，二维码左右排列。\n```\n{% if theme.alipay or theme.wechatpay %}\n<div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center\">\n  <div style=\"margin-bottom: 10px;font-size: 16px;font-weight: 600;\">您的支持将鼓励我继续创作,非常感谢！</div>\n  <button id=\"rewardButton\", disable=\"enable\", onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\", style=\"cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none\">\n    <span onmouseover=\"this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'\" onMouseOut=\"this.style.color='#fff';this.style.background='rgb(236,96,0)'\" style=\"display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)\">赏</span>\n  </button>\n    <div id=\"QR\" style=\"display: none;\">\n      {% if theme.alipay %}\n        <div id=\"alipay\" style=\"display: inline-block\">\n          <img id=\"alipay_qr\" src=\"{{ theme.alipay }}\" alt=\"{{ theme.author }} Alipay\" style=\"width: 200px; max-width: 100%; display: inline-block\"/>\n          <p>支付宝打赏</p>\n        </div>\n      {% endif %}\n      {% if theme.wechatpay %}\n        <div id=\"wechat\" style=\"display: inline-block\">\n          <img id=\"wechat_qr\" src=\"{{ theme.wechatpay }}\" alt=\"{{ theme.author }} WeChat Pay\" style=\"width: 200px; max-width: 100%; display: inline-block\"/>\n          <p>微信打赏</p>\n        </div>\n      {% endif %}\n    </div>\n  </div>\n{% endif %}```\n\n---\n### 最近访客\n```\n<h3 id=\"最近访客\"><a href=\"#最近访客\" class=\"headerlink\" title=\"最近访客\"></a>最近访客</h3><div class=\"ds-recent-visitors\" data-num-items=\"28\" data-avatar-size=\"42\" id=\"ds-recent-visitors\"></div>```\n```\nclass=“ds-recent-visitors”    //指定显示最近访客容器\ndata-num-items=“28”    //显示最近访客的数量\ndata-avatar-size=“42”    //显示最近访客头像尺寸大小\nid=“ds-recent-visitors”    //为了调节最近访客样式加的```\n这样，每个页面都有最近访客了（只能看到注册了多说账户的用户）\n\n---\n### SEO\n#### 网站地图\n安装hexo的sitemap网站地图生成插件\n```\nnpm install hexo-generator-sitemap --save\nnpm install hexo-generator-baidu-sitemap --save```\n在你的hexo站点的_config.yml添加下面的代码\n```\n# hexo sitemap网站地图\nsitemap:\npath: sitemap.xml\nbaidusitemap:\npath: baidusitemap.xml  #如果报path错误就把前面增加baidu```\n配置成功后，hexo编译时会在hexo站点根目录生成**sitemap.xml**和**baidusitemap.xml**\n其中sitemap.xml适合提交给谷歌搜素引擎，baidusitemap.xml适合提交百度搜索引擎。\n\n---\n#### 蜘蛛协议\n在robots.txt中添加站点地图文件，如下（没有robots.txt就在站点目录source下新建）：\n```\n# hexo robots.txt\nUser-agent: *\nAllow: /\nAllow: /archives/\n\nDisallow: /lib/   \nDisallow: /js/\nDisallow: /css/\nDisallow: /fonts/\nDisallow: /fancybox/\n\nSitemap: http://www.leolan.top/sitemap.xml\nSitemap: http://www.leolan.top/baidusitemap.xml\n```\n\n---\n#### NexT主题，首页title的优化\n感谢[arao](http://www.arao.me/)的教程\n修改\\themes\\next\\layout\\index.swig文件，将下面代码\n```\n{% block title %} {{ config.title }} {% endblock %}```\n改为\n```\n{% block title %} {{ config.title }} - {{ theme.description }} {% endblock %}```\n这时候你的首页标题会更符合**网站名称 - 网站描述**这习惯。\n把关键词(在主题配置文件**_config.yml**中设置**keywords:**)也显示在Title标题里，可改成:\n```\n{% block title %} {{ theme.keywords }} - {{ config.title }} - {{ theme.description }} {% endblock %}\n或（排列顺序看自己喜欢）\n{% block title %} {{ config.title }} - {{ theme.keywords }} {% endblock %}```\n注意：别堆砌关键字，整个标题一般不超过80个字符，可以通过chinaz的seo综合查询检查。\n\n---\n#### 限制出站链接\n网络爬虫会在当前页面搜索所有的链接，故有可能跳到别的网站。**nofollow** 标签是由谷歌领头创新的一个 “反垃圾链接” 的标签，并被各大搜索引擎广泛支持，引用 **nofollow** 标签的目的是：用于指示搜索引擎不要追踪（即抓取）网页上的带有 **nofollow** 属性的任何出站链接，以减少垃圾链接的分散网站权重。\n```\nnpm install hexo-autonofollow --save```\n在 **站点配置文件 **中添加如下代码。\n```\nnofollow:\n    enable: true\n    exclude: # 例外的链接，可将友情链接放置此处\n    - exclude1.com\n    - exclude2.com```\n\n---\n#### 文章链接唯一化\n也许你会数次更改文章题目或者变更文章发布时间，在默认设置下，文章链接都会改变，不利于搜索引擎收录，也不利于分享。唯一永久链接才是更好的选择。安装此插件后，不要在 `hexo s` 模式下更改文章文件名，否则文章将成空白,需要重新`hexo s`才行。\n```\nnpm install hexo-abbrlink --save```\n在 站点配置文件 中查找代码 **permalink:**，将其更改为:\n```\npermalink: posts/:abbrlink/  # “posts/” 可自行更换```\n在 站点配置文件 中添加如下代码：\n```\n# abbrlink config\nabbrlink:\n  alg: crc32  # 算法：crc16(default) and crc32 \n  rep: hex    # 进制：dec(default) and hex```\n永久链接有下面4种组合\n```\ncrc16 & hex\nhttps://post.zz173.com/posts/66c8.html\n\ncrc16 & dec\nhttps://post.zz173.com/posts/65535.html\n\ncrc32 & hex\nhttps://post.zz173.com/posts/8ddf18fb.html\n\ncrc32 & dec\nhttps://post.zz173.com/posts/1690090958.html```\n\n---\n#### 百度网址推送\n修改**baidu-push.swig**模板\n**模板位置**：themes\\next\\layout\\\\_scripts\\baidu-push.swig\n没有此文件就新建\n```\n{% if theme.baidu_push %}\n<script>\n(function(){\n    var bp = document.createElement('script');\n    var curProtocol = window.location.protocol.split(':')[0];\n    if (curProtocol === 'https') {\n        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        \n    }\n    else {\n        bp.src = 'http://push.zhanzhang.baidu.com/push.js';\n    }\n    var s = document.getElementsByTagName(\"script\")[0];\n    s.parentNode.insertBefore(bp, s);\n})();\n</script>\n{% endif %}```\n**编辑站点配置文件**：_config.yml\n加上以下代码：\n```\nbaidu_url_submit:  #百度链接推送，推送刚刚生成的永久链接\n  count: 5 ## 比如3，代表提交最新的三个链接\n  host: www.leolan.top ## 在百度站长平台中注册的域名\n  token: kZ5xboXBFPxQ0g7N ## 请注意这是您的秘钥， 请不要发布在公众仓库里!\n  path: /baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里```\n\n---\n#### 主动推送新链接\n解决百度爬虫被禁止访问的问题，提升网站收录质量和速度。\n```\nnpm install hexo-baidu-url-submit --save```\n在 站点配置文件 中添加如下代码。\n```\nbaidu_url_submit:\n  count: 5 ## 比如3，代表提交最新的三个链接\n  host: blog.tangxiaozhu.com ## 在百度站长平台中注册的域名\n  token:  ## 请注意这是您的秘钥， 请不要发布在公众仓库里!\n  path: baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里```\n\n\n---\n#### 向百度提交所有链接\n这是LoveNight的脚本，先本地安装Python。\n```\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n# @Author: LoveNight\n# @Date:   2015-11-16 20:45:59\n# @Last Modified by:   lulee007\n# @Last Modified time: 2016-01-16 21:06:50\nimport os\nimport sys\nimport json\nfrom bs4 import BeautifulSoup as BS\nimport requests\nimport codecs\n\n\"\"\"\nhexo 博客专用，向百度站长平台提交所有网址\n\n本脚本必须放在 hexo 博客的根目录下执行！需要已安装生成百度站点地图的插件。\n百度站长平台提交链接：http://zhanzhang.baidu.com/linksubmit/index\n主动推送：最为快速的提交方式，推荐您将站点当天新产出链接立即通过此方式推送给百度，以保证新链接可以及时被百度收录。\n从中找到自己的接口调用地址\n\"\"\"\n\nurl = 'http://data.zz.baidu.com/urls?site=leolan.top&token=kZ5xboXBFPxQ0g7N'    #这里是你的百度推送地址。\nbaidu_sitemap = os.path.join(sys.path[0], 'public', 'baidusitemap.xml')\ngoogle_sitemap = os.path.join(sys.path[0], 'public', 'baidusitemap_zhanwei.xml')\n# sitemap = [baidu_sitemap, google_sitemap]\nsitemap = [baidu_sitemap]\n\n# assert (os.path.exists(baidu_sitemap) or os.path.exists(\n#     google_sitemap)), \"没找到任何网站地图，请检查！\"\nassert os.path.exists(baidu_sitemap) , \"没找到任何网站地图，请检查！\"\n\n# 从站点地图中读取网址列表\ndef getUrls():\n    urls = []\n    for _ in sitemap:\n        if os.path.exists(_):\n            with codecs.open(_, \"r\", \"utf-8\") as f:\n                xml = f.read()\n            soup = BS(xml, \"xml\")\n            tags = soup.find_all(\"loc\")\n            urls += [x.string for x in tags]\n            if _ == baidu_sitemap:\n                tags = soup.find_all(\"breadCrumb\", url=True)\n                print(\"\")\n                urls += [x[\"url\"] for x in tags]\n    return urls\n\n# POST提交网址列表\ndef postUrls(urls):\n    urls = set(urls)  # 先去重\n    print(\"一共提取出 %s 个网址\" % len(urls))\n    data = \"\\n\".join(urls)\n    return requests.post(url, data=data).text\n\nif __name__ == '__main__':\n\n    urls = getUrls()\n    result = postUrls(urls)\n    print(\"提交结果：\")\n    print(result)```\n\n---\n### 语法优化\n\n默认的语法无法添加角标（footnotes）以注明引用，这种可来回跳转的引用还是挺有用处的。\n```\nnpm install hexo-footnotes --save```\n安装完毕请确认是否生效，如不生效，在 站点配置文件 中添加如下代码以手动启用：\n```\nplugins:\n  - hexo-footnotes```\n![](http://ofyfogrgx.bkt.clouddn.com/222054761.png)\n\n\n---\n### 页面留白(扩大显示范围)\n浏览器留白太多，代码块看起来比较麻烦，想让更多空间显示文章。\nNexT 对于内容的宽度的设定如下：\n700px，当屏幕宽度 < 1600px\n900px，当屏幕宽度 >= 1600px\n移动设备下，宽度自适应\n\n如果你需要修改内容的宽度，同样需要编辑样式文件。 编辑主题的 **source/css/_variables/custom.styl** 文件，新增变量：\n```\n// 修改成你期望的宽度，默认700px\n$content-desktop = 700px\n// 当视窗超过 1600px 后的宽度，默认900px\n$content-desktop-large = 900px```\n\n如果主题风格选择的是**Pisces**；那么同时还要修改**header** 的宽度、**.main-inner **的宽度以及 **.content-wrap **的宽度(如果没什么问题可以不修改custom.styl文件)。\n编辑文件：**source/css/_schemes/Picses/_layout.styl**\n```\n//可以使用百分比，也可以是像素，80%是比较合适的。\n//开头header中修改为80%\nheader{ width: 80%; }\n//.container中系应该为80%\n.main-inner { width: 80%; }\n//最后修改.content-wrap\n.content-wrap { width: calc(100% - 260px); }```\n\n\n---\n### 多说评论框自定义css\n感谢[arao](http://www.arao.me/)的代码\n进入多说管理后台\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161115/170352768.png)\n把下面代码粘贴进去保存\n```\n#ds-reset .ds-avatar img,\n#ds-recent-visitors .ds-avatar img {\nwidth: 54px;\nheight: 54px;     /*设置图像的长和宽，这里要根据自己的评论框情况更改*/\nborder-radius: 27px;     /*设置图像圆角效果,在这里我直接设置了超过width/2的像素，即为圆形了*/\n-webkit-border-radius: 27px;     /*圆角效果：兼容webkit浏览器*/\n-moz-border-radius: 27px;\nbox-shadow: inset 0 -1px 0 #3333sf;     /*设置图像阴影效果*/\n-webkit-box-shadow: inset 0 -1px 0 #3333sf;\n-webkit-transition: 0.4s;\n-webkit-transition: -webkit-transform 0.4s ease-out;\ntransition: transform 0.4s ease-out;     /*变化时间设置为0.4秒(变化动作即为下面的图像旋转360读）*/\n-moz-transition: -moz-transform 0.4s ease-out;\n}\n\n#ds-reset .ds-avatar img:hover,\n#ds-recent-visitors .ds-avatar img:hover {\n\n/*设置鼠标悬浮在头像时的CSS样式*/    box-shadow: 0 0 10px #fff;\nrgba(255, 255, 255, .6), inset 0 0 20px rgba(255, 255, 255, 1);\n-webkit-box-shadow: 0 0 10px #fff;\nrgba(255, 255, 255, .6), inset 0 0 20px rgba(255, 255, 255, 1);\ntransform: rotateZ(360deg);     /*图像旋转360度*/\n-webkit-transform: rotateZ(360deg);\n-moz-transform: rotateZ(360deg);\n}\n\n#ds-thread #ds-reset .ds-textarea-wrapper textarea {\nbackground: url(http://ww4.sinaimg.cn/small/649a4735gw1et7gnhy5fej20zk0m8q3q.jpg) right no-repeat;\n}\n\n#ds-recent-visitors .ds-avatar {\nfloat: left\n}\n/*隐藏多说底部版权*/\n#ds-thread #ds-reset .ds-powered-by {\ndisplay: none;\n}```\n\n---\n### 解决多说评论不稳定、加载慢\n把多说评论依赖的**embed.js**放置底部，修改\nthemes/next/layout/_scripts/third-party/comments/duoshuo.swig文件\n将\n```\n(document.getElementsByTagName('head')[0]```\n修改为\n```\n(document.getElementById('footer')```\n\n---\n### 多说userid\n主题配置中需要用到user_id\n![](http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid1.png)\n![](http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid2.png)\n```\nduoshuo_info:\n  ua_enable: true\n  admin_enable: ture\n  user_id: 6343395544286626562\n  admin_nickname: 博主```\n  \n---\n### 动态背景\n修改**_layout.swig**模板\n**模板位置**：themes\\next\\layout\\\\_layout.swig\n在末尾</body>前加上下面一句\n```\n<!-- 背景动画 -->\n#默认灰色线条\n<script type=\"text/javascript\" src=\"/js/src/particle.js\"></script>\n#浅蓝色线条\n<script type=\"text/javascript\" src=\"/js/src/particle.js\" count=\"50\" zindex=\"-2\" opacity=\"1\" color=\"0,104,183\"></script>```\n在themes\\source\\js\\src\\下新建文件particle.js写上以下代码（也可以自己下载其他js,修改方式差不多）\n```js\n!function(){function n(n,e,t){return n.getAttribute(e)||t}function e(n){return document.getElementsByTagName(n)}function t(){var t=e(\"script\"),o=t.length,i=t[o-1];return{l:o,z:n(i,\"zIndex\",-1),o:n(i,\"opacity\",.5),c:n(i,\"color\",\"0,0,0\"),n:n(i,\"count\",99)}}function o(){c=u.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=u.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function i(){l.clearRect(0,0,c,a);var n,e,t,o,u,d,x=[w].concat(y);y.forEach(function(i){for(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x>c||i.x<0?-1:1,i.ya*=i.y>a||i.y<0?-1:1,l.fillRect(i.x-.5,i.y-.5,1,1),e=0;e<x.length;e++)n=x[e],i!==n&&null!==n.x&&null!==n.y&&(o=i.x-n.x,u=i.y-n.y,d=o*o+u*u,d<n.max&&(n===w&&d>=n.max/2&&(i.x-=.03*o,i.y-=.03*u),t=(n.max-d)/n.max,l.beginPath(),l.lineWidth=t/2,l.strokeStyle=\"rgba(\"+m.c+\",\"+(t+.2)+\")\",l.moveTo(i.x,i.y),l.lineTo(n.x,n.y),l.stroke()));x.splice(x.indexOf(i),1)}),r(i)}var c,a,u=document.createElement(\"canvas\"),m=t(),d=\"c_n\"+m.l,l=u.getContext(\"2d\"),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/45)},x=Math.random,w={x:null,y:null,max:2e4};u.id=d,u.style.cssText=\"position:fixed;top:0;left:0;z-index:\"+m.z+\";opacity:\"+m.o,e(\"body\")[0].appendChild(u),o(),window.onresize=o,window.onmousemove=function(n){n=n||window.event,w.x=n.clientX,w.y=n.clientY},window.onmouseout=function(){w.x=null,w.y=null};for(var y=[],s=0;m.n>s;s++){var f=x()*c,h=x()*a,g=2*x()-1,p=2*x()-1;y.push({x:f,y:h,xa:g,ya:p,max:6e3})}setTimeout(function(){i()},100)}();\n```\n\n---\n### 背景透明\n在 **\\themes\\next\\source\\css\\\\_custom\\custom.styl** 中写上 `.content-wrap {background: transparent;}`\n**custom.styl**文件为用户自定义风格，卸载里面的内容会优先覆盖主题的设定，也可以定义其他的方法等。\n\n---\n### 背景放图片\n首先找到一个背景图片放到 \\themes\\next\\source\\images下；\n修改themes\\next\\source\\css\\_schemes\\Pisces（Mist和Muse也行）\\index.styl文件，\n在文件的最上方加上一代码 \n```\nbody { background:url(/images/backGround.jpg);} ```\n\n---\n### 修改文章超链接样式\n将链接文本设置为蓝色，鼠标划过时文字颜色加深，并显示下划线。\n修改 **themes\\next\\source\\css\\\\_custom\\custom.styl **，添加如下 `css` 样式（颜色可以自己更改，百度html颜色代码即可找到）：\n\n```css\n.post-body p a {\n  color: #0593d3;\n  border-bottom: none;\n  &:hover {\n    color: #0477ab;\n    text-decoration: underline;\n  }\n}```\n\n---\n### High一下\n#### **第一种**\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161205/100022200.png)\n修改**header.swig**模板\n**模板位置**：themes\\next\\layout\\\\_partials\\header.swig\n在以下代码的结尾换行\n```css\n      {% if hasSearch %}\n        <li class=\"menu-item menu-item-search\">\n          {% if theme.swiftype_key %}\n            <a href=\"javascript:;\" class=\"st-search-show-outputs\">\n          {% elseif config.search %}\n            <a href=\"javascript:;\" class=\"popup-trigger\">\n          {% endif %}\n            {% if theme.menu_icons.enable %}\n              <i class=\"menu-item-icon fa fa-search fa-fw\"></i> <br />\n            {% endif %}\n            {{ __('menu.search') }}\n          </a>\n        </li>\n      {% endif %}```\n插入以下内容,感谢Neveryu修复了一些bug，以下是Neveryu的代码。\n```css\n <!-- 自定义High一下的功能 -->\n      <li class=\"menu-item\"> <a title=\"把这个链接拖到你的工具栏中,任何网页都可以High\" href='javascript:(\n    /*\n     * Copyright (C) 2016 Never_yu (Neveryu.github.io) <React.dong.yu@gmail.com>\n     * Sina Weibo (http://weibo.com/Neveryu)\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *      http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     */\n    function go() {\n\n\n    var songs = [\n                \"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\"\n    ];\n\n    \n    function c() {\n        var e = document.createElement(\"link\");\n        e.setAttribute(\"type\", \"text/css\");\n        e.setAttribute(\"rel\", \"stylesheet\");\n        e.setAttribute(\"href\", f);\n        e.setAttribute(\"class\", l);\n        document.body.appendChild(e)\n    }\n \n    function h() {\n        var e = document.getElementsByClassName(l);\n        for (var t = 0; t < e.length; t++) {\n            document.body.removeChild(e[t])\n        }\n    }\n \n    function p() {\n        var e = document.createElement(\"div\");\n        e.setAttribute(\"class\", a);\n        document.body.appendChild(e);\n        setTimeout(function() {\n            document.body.removeChild(e)\n        }, 100)\n    }\n \n    function d(e) {\n        return {\n            height : e.offsetHeight,\n            width : e.offsetWidth\n        }\n    }\n \n    function v(i) {\n        var s = d(i);\n        return s.height > e && s.height < n && s.width > t && s.width < r\n    }\n \n    function m(e) {\n        var t = e;\n        var n = 0;\n        while (!!t) {\n            n += t.offsetTop;\n            t = t.offsetParent\n        }\n        return n\n    }\n \n    function g() {\n        var e = document.documentElement;\n        if (!!window.innerWidth) {\n            return window.innerHeight\n        } else if (e && !isNaN(e.clientHeight)) {\n            return e.clientHeight\n        }\n        return 0\n    }\n \n    function y() {\n        if (window.pageYOffset) {\n            return window.pageYOffset\n        }\n        return Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n    }\n \n    function E(e) {\n        var t = m(e);\n        return t >= w && t <= b + w\n    }\n\n    function S() {\n        var e = document.getElementById(\"audio_element_id\");\n        if(e != null){\n            var index = parseInt(e.getAttribute(\"curSongIndex\"));\n            if(index > songs.length - 2) {\n                index = 0;\n            } else {\n                index++;\n            }\n            e.setAttribute(\"curSongIndex\", index);\n            N();\n        }\n\n        e.src = i;\n        e.play()\n    }\n \n    function x(e) {\n        e.className += \" \" + s + \" \" + o\n    }\n \n    function T(e) {\n        e.className += \" \" + s + \" \" + u[Math.floor(Math.random() * u.length)]\n    }\n \n    function N() {\n        var e = document.getElementsByClassName(s);\n        var t = new RegExp(\"\\\\b\" + s + \"\\\\b\");\n        for (var n = 0; n < e.length; ) {\n            e[n].className = e[n].className.replace(t, \"\")\n        }\n    }\n\n    function initAudioEle() {\n        var e = document.getElementById(\"audio_element_id\");\n        if(e === null){\n            e = document.createElement(\"audio\");\n            e.setAttribute(\"class\", l);\n            e.setAttribute(\"curSongIndex\", 0);\n            e.id = \"audio_element_id\";\n            e.loop = false;\n            e.bgcolor = 0;\n            e.addEventListener(\"canplay\", function() {\n            setTimeout(function() {\n                x(k)\n            }, 500);\n            setTimeout(function() {\n                N();\n                p();\n                for (var e = 0; e < O.length; e++) {\n                    T(O[e])\n                }\n            }, 15500)\n        }, true);\n        e.addEventListener(\"ended\", function() {\n            N();\n            h();\n            go();\n        }, true);\n        e.innerHTML = \" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>\";\n        document.body.appendChild(e);\n        }\n    }\n    \n    initAudioEle();\n    var e = 30;\n    var t = 30;\n    var n = 350;\n    var r = 350;\n\n    var curSongIndex = parseInt(document.getElementById(\"audio_element_id\").getAttribute(\"curSongIndex\"));\n    var i = songs[curSongIndex];\n    \n    var s = \"mw-harlem_shake_me\";\n    var o = \"im_first\";\n    var u = [\"im_drunk\", \"im_baked\", \"im_trippin\", \"im_blown\"];\n    var a = \"mw-strobe_light\";\n\n    /* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */\n    var f = \"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\";\n    \n    var l = \"mw_added_css\";\n    var b = g();\n    var w = y();\n    var C = document.getElementsByTagName(\"*\");\n    var k = null;\n    for (var L = 0; L < C.length; L++) {\n        var A = C[L];\n        if (v(A)) {\n            if (E(A)) {\n                k = A;\n                break\n            }\n        }\n    }\n    if (A === null) {\n        console.warn(\"Could not find a node of the right size. Please try a different page.\");\n        return\n    }\n    c();\n    S();\n    var O = [];\n    for (var L = 0; L < C.length; L++) {\n        var A = C[L];\n        if (v(A)) {\n            O.push(A)\n        }\n    }\n    })()'><i class=\"menu-item-icon fa fa-music fa-fw\"></i>High一下</a> </li>\n          <!-- end High一下 -->```\n\n---\n#### **第二种**\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161205/111721588.png)\n\n不修改**themes\\next\\layout\\\\_partials\\header.swig**文件\n而是修改**themes\\next\\layout\\\\_macro\\sidebar.swig**\n```\n        {% if theme.rss %}\n          <div class=\"feed-link motion-element\">\n            <a href=\"{{ url_for(theme.rss) }}\" rel=\"alternate\">\n              <i class=\"fa fa-rss\"></i>\n              RSS\n            </a>\n<!-- 在RSS的div内加入，引用相同的样式 -->\n<!-- 自定义High一下的功能 -->\n<a href='javascript:(\n   function go() {\n   var songs = [\n               \"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\"\n   ];\n   \n   function c() {\n       var e = document.createElement(\"link\");\n       e.setAttribute(\"type\", \"text/css\");\n       e.setAttribute(\"rel\", \"stylesheet\");\n       e.setAttribute(\"href\", f);\n       e.setAttribute(\"class\", l);\n       document.body.appendChild(e)\n   }\n   function h() {\n       var e = document.getElementsByClassName(l);\n       for (var t = 0; t < e.length; t++) {\n           document.body.removeChild(e[t])\n       }\n   }\n   function p() {\n       var e = document.createElement(\"div\");\n       e.setAttribute(\"class\", a);\n       document.body.appendChild(e);\n       setTimeout(function() {\n           document.body.removeChild(e)\n       }, 100)\n   }\n   function d(e) {\n       return {\n           height : e.offsetHeight,\n           width : e.offsetWidth\n       }\n   }\n   function v(i) {\n       var s = d(i);\n       return s.height > e && s.height < n && s.width > t && s.width < r\n   }\n   function m(e) {\n       var t = e;\n       var n = 0;\n       while (!!t) {\n           n += t.offsetTop;\n           t = t.offsetParent\n       }\n       return n\n   }\n   function g() {\n       var e = document.documentElement;\n       if (!!window.innerWidth) {\n           return window.innerHeight\n       } else if (e && !isNaN(e.clientHeight)) {\n           return e.clientHeight\n       }\n       return 0\n   }\n   function y() {\n       if (window.pageYOffset) {\n           return window.pageYOffset\n       }\n       return Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n   }\n   function E(e) {\n       var t = m(e);\n       return t >= w && t <= b + w\n   }\n   function S() {\n       var e = document.getElementById(\"audio_element_id\");\n       if(e != null){\n           var index = parseInt(e.getAttribute(\"curSongIndex\"));\n           if(index > songs.length - 2) {\n               index = 0;\n           } else {\n               index++;\n           }\n           e.setAttribute(\"curSongIndex\", index);\n           N();\n       }\n       e.src = i;\n       e.play()\n   }\n   function x(e) {\n       e.className += \" \" + s + \" \" + o\n   }\n   function T(e) {\n       e.className += \" \" + s + \" \" + u[Math.floor(Math.random() * u.length)]\n   }\n   function N() {\n       var e = document.getElementsByClassName(s);\n       var t = new RegExp(\"\\\\b\" + s + \"\\\\b\");\n       for (var n = 0; n < e.length; ) {\n           e[n].className = e[n].className.replace(t, \"\")\n       }\n   }\n   function initAudioEle() {\n       var e = document.getElementById(\"audio_element_id\");\n       if(e === null){\n           e = document.createElement(\"audio\");\n           e.setAttribute(\"class\", l);\n           e.setAttribute(\"curSongIndex\", 0);\n           e.id = \"audio_element_id\";\n           e.loop = false;\n           e.bgcolor = 0;\n           e.addEventListener(\"canplay\", function() {\n           setTimeout(function() {\n               x(k)\n           }, 500);\n           setTimeout(function() {\n               N();\n               p();\n               for (var e = 0; e < O.length; e++) {\n                   T(O[e])\n               }\n           }, 15500)\n       }, true);\n       e.addEventListener(\"ended\", function() {\n           N();\n           h();\n           go();\n       }, true);\n       e.innerHTML = \" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>\";\n       document.body.appendChild(e);\n       }\n   }\n   \n   initAudioEle();\n   var e = 30;\n   var t = 30;\n   var n = 350;\n   var r = 350;\n   var curSongIndex = parseInt(document.getElementById(\"audio_element_id\").getAttribute(\"curSongIndex\"));\n   var i = songs[curSongIndex];\n   \n   var s = \"mw-harlem_shake_me\";\n   var o = \"im_first\";\n   var u = [\"im_drunk\", \"im_baked\", \"im_trippin\", \"im_blown\"];\n   var a = \"mw-strobe_light\";\n   /* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */\n   var f = \"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\";\n   \n   var l = \"mw_added_css\";\n   var b = g();\n   var w = y();\n   var C = document.getElementsByTagName(\"*\");\n   var k = null;\n   for (var L = 0; L < C.length; L++) {\n       var A = C[L];\n       if (v(A)) {\n           if (E(A)) {\n               k = A;\n               break\n           }\n       }\n   }\n   if (A === null) {\n       console.warn(\"Could not find a node of the right size. Please try a different page.\");\n       return\n   }\n   c();\n   S();\n   var O = [];\n   for (var L = 0; L < C.length; L++) {\n       var A = C[L];\n       if (v(A)) {\n           O.push(A)\n       }\n   }\n   })()'><i class=\"menu-item-icon fa fa-music fa-fw\"></i>High</a>\n</div>\n         <!-- end High一下 -->\n        {% endif %}```\n\n如果需要并排显示，像这样子：![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161205/154359849.png)\n修改文件：**\\themes\\source\\css\\_schemes\\Pisces（主题风格对应的文件夹）\\_sidebar.styl**\n找到这样一段，把**display: block;**改为**display: inline-block;**\n```\n.feed-link a {\n  display: inline-block;   //并行显示，block则为分行显示\n  color: $orange;\n  border: none;```\n\n---\n### 给 Github 添加 README\n默认情况下，Github中每一个项目，我们希望有一份**README.md**的文件来作为项目的说明，但是我们在项目根目录下的`blog\\source`目录下创建一份**README.md**文件，写好说明介绍，部署的时候，这个**README.md**会被hexo解析掉，而不会被解析到Github中去的。\n正确的解决方法其实很简单：\n** 把`README.md`文件的后缀名改成\"MDOWN\"然后扔到`blog\\source`文件夹下即可，这样hexo不会解析，Github也会将其作为MD文件解析。 **\n\n或者你还可以在站点配置文件中修改，以禁止编译文件。\n```\nskip_render:\n    - README.md\n```\n\n---\n### 加入左上角「fork me on github」\n[github官方教程](https://github.com/blog/273-github-ribbons)\n\n---\n### 给 Blog 添加 LICENSE\n修改主题配置文件中的 160 行左右：\n\n```\n# Creative Commons 4.0 International License.\n# http://creativecommons.org/\n# Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero\ncreative_commons: by-nc-sa\n#creative_commons:```\n\n取消第 4 行的注释，然后选择你想使用的 LICENSE 即可，可选项参照第 3 行。\n\n---\n### 错误信息\n\n**LF will be replaced**\nWindows 提交命令的时候出现 **warning: LF will be replaced by CRLF in XXXXXXXXXXXXXX** 的警告。输入命令：\n```\ngit config --global core.autocrlf false```\n\n---\n\n# 部署\n\n```\ncd your_site/\ntouch Staticfile  #创建静态文件标识，用于Github识别，名字必须是Staticfile\nhexo clean   #清除以前生成的旧文件\nhexo g       #生成新的站点文件\nhexo d       #部署到Github上```\n可参考：http://shomy.top/2016/03/03/hexo-in-coding-github/\n部署完成打开网址就能看到效果了。\n\nHexo的部署只会把生成的文件上传到仓库中，本地的**设置，主题，*.md文件**等等都不会上传，换一台电脑就没法干活了，一旦删除，那基本上所有的努力都白费了，这里介绍2种备份方法：\n* 1.新建一个仓库专门用来存放这些文件（最安全最方便的办法）\n* 2.和发布的网站使用同一个仓库，master用来存放这些文件，新建分支来发布网站（注意pages服务绑定该分支，不要合并分支，一旦合并就全部混乱了）\n两种方法都要在网站根目录设定好远程端仓库：`git add remote XXXX`\n每次发布完网页，就顺手执行以下代码，把文档也同步到仓库中。\n```\ngit add .\ngit commit -m \"xxx\"\ngit push\n```\n\n---\n\n# 绑定域名\n原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。\n\n* 1· 在你的项目下新建一个**CNAME**文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是** www.leolan.top**和** leolan.top**（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送**CNAME文件**到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在**CNAME文件**里绑定两个，在Pages页面也绑定两个。\n* 2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 `username.github.io. `，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png)\n过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的**CNAME**文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。\n\n---\n","source":"_posts/环境搭建/2016-11-08-用Hexo搭建博客.md","raw":"---\ntitle: 用Hexo搭建博客\ncategories:\n  - 环境搭建\ntags:\n  - 用Hexo搭建博客\n  - Hexo github\n  - Hexo Coding\n  - Next 定制\nabbrlink: 23632\ndate: 2016-11-08 15:20:01\n---\n\n# 安装Hexo\nHexo是用node-js写的，hexo生成静态页面的速度要比较快，hexo是本地生成html再上传。\n官网：https://hexo.io/zh-cn/docs/\n## 安装Node.js\n官网下载对应平台安装包安装：https://nodejs.org  \n详见：[Node.js开发环境搭建](http://leolan.top/2016/11/02/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-11-02-Node-js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)\n\n## 安装Hexo\n\n```\nnpm install -g hexo-cli  #Mac下西安**sudo -i**切换到root权限。\nhexo init blog           #blog文件夹要先建好，这一步自动生成网站。\ncd blog\nnpm install              #安装依赖的插件。\nhexo server              #运行服务\n```\n\n这时可以在浏览器打开网页。`hexo server`的简化命令为`hexo s`；指定端口：`-p xxxx`\n和jekyll一样是通过修改**_config.yml**文件来配置站点信息的。（在Hexo中，根目录下的**_config.yml**文件是用来配置网站信息的；主题目录下的**_config.yml**文件是用来配置文章主题，页面等等的）\n\n默认的目录结构如下：\n\n```\n├── .deploy       #执行hexo deploy命令部署到GitHub上的内容目录\n├── public        #执行hexo generate命令，输出的静态网页内容目录\n├── scaffolds     #layout模板文件目录，其中的md文件可以添加编辑\n├── scripts       #扩展脚本目录，这里可以自定义一些javascript脚本\n├── source        #文章源码目录，该目录下的markdown和html文件均会被hexo处理。404文件，CNAME文件等都应该放这里。\n| ├── _drafts     #草稿文章\n| └── _posts      #发布的文章\n├── themes        #主题文件目录\n├── _config.yml   #全局配置文件，大多数的设置都在这里\n└── package.json  #应用程序数据，指明hexo的版本等信息。在push到github时提示*.json错误，删掉这个文件或删掉db.json就行。\n```\n---\n\n# 配置优化、定制站点\nNext官方设置说明：http://theme-next.iissnan.com/getting-started.html\n\n## 站点配置\n以下是我的配置文件：\n\n```\n# Hexo Configuration\n## Docs: https://hexo.io/docs/configuration.html\n## Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: Leo Lan的博客\nsubtitle:  有时候正是不报期望的人做出了人们不敢期望之事！\ndescription: Better late than never\nauthor: LeoLan\nlanguage: zh-Hans\ntimezone: Asia/Shanghai\n\n# URL\n## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: https://www.leolan.top\ncoding_url: https://www.leolan.top\nroot: /\npermalink: posts/:abbrlink/\npermalink_defaults:\n\n# Directory\nsource_dir: source\npublic_dir: public\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: downloads/code\ni18n_dir: :lang\n#禁止编译README.md文件，也可以在文件中增加yml文件头layout: false，---结尾\nskip_render:\n    - baidu_verify_dc4dBM4StW.html\n    - googled7e43f3624e0f703.html\n    - CNAME\n    - README.md\n    - .nojekyll\n    - Staticfile\n\n# 假设你的Source文件夹里面有个Demo目录，要忽略Demo目录下的所有html页面，具体如下：\n\n# skip_render: Demo/*.html\n# 文件匹配是基于正则匹配的，更复杂的情况如下\n# 1.单个文件夹下全部文件：skip_render: demo/*\n# 2.单个文件夹下指定类型文件：skip_render: demo/*.html\n# 3.单个文件夹下全部文件以及子目录:skip_render: demo/**\n# 4.多个文件夹以及各种复杂情况：\n# skip_render:\n#     - 'demo/*.html'\n#     - 'demo/**'\n\n\n#强制包含.nojekyll文件（放在source下），这样hexo g时，.开头的文件具不会被忽略，适用于5.0以下版本的next主题（github屏蔽了一些文件夹）\ninclude:\n  - .nojekyll\n\n# abbrlink config 生成文章永久链接（利于SEO）需要安装插件\nabbrlink:\n  alg: crc16  # 算法：crc16(default) and crc32 \n  rep: dec    # 进制：dec(default) and hex\n\nbaidu_url_submit:  #百度链接推送，推送刚刚生成的永久链接\n  count: 5 ## 比如3，代表提交最新的三个链接\n  host: www.leolan.top ## 在百度站长平台中注册的域名\n  token: kZ5xboXBFPxQ0g7N ## 请注意这是您的秘钥， 请不要发布在公众仓库里!\n  path: /baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里\n\n\n# Writing  官网：https://hexo.io/zh-cn/docs/writing.html\nnew_post_name: :year-:month-:day-:title.md # File name of new posts\ndefault_layout: post\ntitlecase: false # Transform title into titlecase\nexternal_link: true # Open external links in new tab\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false   #新建文章时自动生成本地存放图片等资源的文件夹\nrelative_link: false\nfuture: true\nhighlight:\n  enable: true\n  line_number: true\n  auto_detect: true\n  tab_replace:\n\n# Category & Tag\ndefault_category: uncategorized\ncategory_map:\ntag_map:\n\n# Date / Time format\n## Hexo uses Moment.js to parse and display date\n## You can customize the date format as defined in\n## http://momentjs.com/docs/#/displaying/format/\ndate_format: YYYY-MM-DD\ntime_format: HH:mm:ss\n\n# Pagination  单独页面文章数目，需要安装以下3个插件\n#npm install --save hexo-generator-index\n#npm install --save hexo-generator-archive\n#npm install --save hexo-generator-tag\n## Set per_page to 0 to disable pagination\nindex_generator:\n  per_page: 5\n\narchive_generator:\n  per_page: 20\n  yearly: true\n  monthly: true\n\ntag_generator:\n  per_page: 10\n\npagination_dir: page\n\n# Extensions 主题选择\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: next5.1\n#theme: next0.4\n\n\n# Deployment 自动部署到仓库\n## 官方文档Docs: https://hexo.io/docs/deployment.html   有部署到各种服务器的方法\n## 参考：http://www.lxway.com/240950852.htm\n#不管是github还是coding，type都填写git\ndeploy:\n- type: git\n  repo: git@git.coding.net:leolan/blog.git,master\n  message: 'LeoLan updated：{{now(\"YYYY-MM-DD HH:mm:ss\")}}'  #这个是commit的说明，因为是发布站点，方便看到发布时间。\n- type: git\n  repo: git@github.com:MyLeoLan/blog.git,master\n  message: 'LeoLan updated：{{now(\"YYYY-MM-DD HH:mm:ss\")}}'\n#deploy:\n#- type: git\n#  repo:\n#- type: heroku（另一种云平台）\n#  repo:\n\n\n\n\n# Disqus #Disqus评论系统\ndisqus_shortname: leolan\n\n\n#plugins: #插件，例如生成 RSS 和站点地图的\n#hexo-generator-sitemap\n#- hexo-generator-baidu-sitemap\nplugins:\n  hexo-generator-feed\n  hexo-generator-baidu-sitemap\n\nsitemap:\n  path: sitemap.xml    \nbaidusitemap:\n  path: baidusitemap.xml\n\n\n# Social links 社交链接\nsocial:\n  GitHub: https://github.com/myleolan\n  Coding: https://coding.net/u/leolan\n  CSDN: http://blog.csdn.net/lan842632\n  OSchina: https://my.oschina.net/leolan/blog\n  #Twitter: https://twitter.com/lmintlcx\n  #Zhihu: http://www.zhihu.com/people/lmintlcx\n  #Douban: http://www.douban.com/people/lmintlcx\n  #Weibo: http://weibo.com/u/3233729080\n\nduoshuo_shortname: leolan\n# 多说热评文章 true 或者 false\nduoshuo_hotartical: true\n# 多说分享服务\nduoshuo_share: true\n# 百度分享服务\nbaidushare: true\n\n#打赏功能\nreward_comment: 您的支持将鼓励我继续创作,非常感谢！\nalipay: http://ofyfogrgx.bkt.clouddn.com//pay/alipay.jpg\nwechatpay: http://ofyfogrgx.bkt.clouddn.com//pay/weixinpay.png\n\n#站点建立时间\nsince: 2016\n\n#百度分析\nbaidu_analytics: dc0e85252eeff3a87aa87f35d92a8d33\n\n#本地搜索\nsearch:\n  path: search.xml\n  field: post\n  format: html\n  limit: 10000\n\n```\n\n## 主题配置\n推荐Next主题，简单简洁，官网：http://theme-next.iissnan.com/\n安装最新版：\n```\ncd your-hexo-site\ngit clone https://github.com/iissnan/hexo-theme-next themes/next```\n在主题目录下可以看到next文件夹，修改**站点配置文件_config.yml**中的`theme: next`\n`hexo clean && hexo s`就可以看到新主题生效啦！\n接下来修改**主题配置文件_config.yml**，以下是我的配置。\n```\n# ---------------------------------------------------------------\n# Site Information Settings\n# ---------------------------------------------------------------\n\n# Put your favicon.ico into `hexo-site/source/` directory.\nfavicon: /200.png\n\n# Set default keywords (Use a comma to separate) 站点关键词，利于SEO\nkeywords: \"Hexo, NexT, Leo Lan, leolan, Blog, myleolan, lan, coding\"\n\n# Set rss to false to disable feed link.\n# Leave rss as empty to use site's feed link.\n# Set rss to specific value if you have burned your feed already.\nrss:\n\n# Specify the date when the site was setup\n#since: 2015\n\n# Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.\n# See: https://support.google.com/webmasters/answer/139066\n# Tips: Before you open this tag, remeber set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )\ncanonical: true\n\n\n# ---------------------------------------------------------------\n# Menu Settings\n# ---------------------------------------------------------------\n\n# When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -> archives)\nmenu:\n  home: /\n  categories: /categories\n  tags: /tags\n  archives: /archives\n  about: /about\n  guestbook: /guestbook\n # schedule: /schedule\n  #commonweal: /404.html\n\n\n# Enable/Disable menu icons.  菜单图标\n# Icon Mapping:\n#   Map a menu item to a specific FontAwesome icon name.\n#   Key is the name of menu item and value is the name of FontAwsome icon. Key is case-senstive.\n#   When an question mask icon presenting up means that the item has no mapping icon.\nmenu_icons:   #http://fontawesome.io/icons/\n  enable: true\n  #KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome\n  home: home\n  about: user\n  categories: th\n  schedule: calendar\n  tags: tags\n  archives: archive\n  commonweal: heartbeat\n  guestbook: commenting\n\n\n# ---------------------------------------------------------------\n# Scheme Settings\n# ---------------------------------------------------------------\n\n# Schemes\n#scheme: Muse\n#scheme: Mist\nscheme: Pisces\n\n\n# ---------------------------------------------------------------\n# Font Settings\n# - Find fonts on Google Fonts (https://www.google.com/fonts)\n# - All fonts set here will have the following styles:\n#     light, light italic, normal, normal intalic, bold, bold italic\n# - Be aware that setting too much fonts will cause site running slowly\n# - Introduce in 5.0.1\n# ---------------------------------------------------------------\nfont:\n  enable: true\n\n  # Uri of fonts host. E.g. //fonts.googleapis.com (Default) 慢的话搜索fonts.googleapis.com即可找到替换地址\n  host: fonts.css.network\n\n  # Global font settings used on <body> element.\n  global:\n    # external: true will load this font family from host.\n    external: true\n    family: Lato\n\n  # Font settings for Headlines (h1, h2, h3, h4, h5, h6)\n  # Fallback to `global` font settings.\n  headings:\n    external: true\n    family:\n\n  # Font settings for posts\n  # Fallback to `global` font settings.\n  posts:\n    external: true\n    family:\n\n  # Font settings for Logo\n  # Fallback to `global` font settings.\n  # The `size` option use `px` as unit\n  logo:\n    external: true\n    family:\n    size:\n\n  # Font settings for <code> and code blocks.\n  codes:\n    external: true\n    family:\n    size:\n\n\n\n# ---------------------------------------------------------------\n# Sidebar Settings\n# ---------------------------------------------------------------\n\n# Social Links 社交链接\n# Key is the link label showing to end users.\n# Value is the target link (E.g. GitHub: https://github.com/iissnan)\n#social:\n#LinkLabel: Link\n\n# Social Links Icons\n# Icon Mapping:\n#   Map a menu item to a specific FontAwesome icon name.\n#   Key is the name of the item and value is the name of FontAwsome icon. Key is case-senstive.\n#   When an globe mask icon presenting up means that the item has no mapping icon.\nsocial_icons:    #这是社交链接图标，打开网站找到图标，直接引用名字就行，next已引用了该库http://fontawesome.io/icons/\n  enable: true\n  # Icon Mappings.\n  # KeyMapsToSocalItemKey: NameOfTheIconFromFontAwesome\n  GitHub: github\n  Coding: github-alt\n  Cloud: cloud\n  OSchina: git-square\n  #Twitter: twitter\n  #Weibo: weibo\n\n\n# Sidebar Avatar\n# in theme directory(source/images): /images/avatar.jpg\n# in site  directory(source/uploads): /uploads/avatar.jpg\navatar: /images/avatar.jpg    #博客侧边栏显示的头像\n\n\n# Table Of Contents in the Sidebar\ntoc:\n  enable: true\n\n  # Automatically add list number to toc.\n  number: true\n\n# Creative Commons 4.0 International License.\n# http://creativecommons.org/\n# Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero\n#creative_commons: by-nc-sa\n#creative_commons:\n\nsidebar:\n  # Sidebar Position, available value: left | right\n  position: left\n  #position: right\n\n  # Sidebar Display, available value: 侧边栏显示\n  #  - post    expand on posts automatically. Default.\n  #  - always  expand for all pages automatically\n  #  - hide    expand only when click on the sidebar toggle icon.\n  #  - remove  Totally remove sidebar including sidebar toggler.\n  display: post\n  #display: always\n  #display: hide\n  #display: remove\n\n\n# Blogrolls 友情链接\nlinks_title: 友链\n#links_layout: block\nlinks_icon: heartbeat\n#links_layout: inline\nlinks:\n  Jerry Locke: https://jerry.hk/\n\n# ---------------------------------------------------------------\n# Misc Theme Settings\n# ---------------------------------------------------------------\n\n# Custom Logo.\n# !!Only available for Default Scheme currently.\n# Options:\n#   enabled: [true/false] - Replace with specific image\n#   image: url-of-image   - Images's url\ncustom_logo:\n  enabled: false\n  image:\n\n\n# Code Highlight theme  代码高亮主题\n# Available value:\n#    normal | night | night eighties | night blue | night bright\n# https://github.com/chriskempson/tomorrow-theme\nhighlight_theme: night eighties\n\n\n# Automatically scroll page to section which is under <!-- more --> mark.\nscroll_to_more: true\n\n\n# Automatically Excerpt. Not recommand.\n# Please use <!-- more --> in the post to control excerpt accurately.\nauto_excerpt:\n  enable: true\n  length: 150\n\n\n# Wechat Subscriber 微信打赏\n#wechat_subscriber:\n  #enabled: true\n  #qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg\n  #description: ex. subscribe to my blog by scanning my public wechat account\n\n\n\n\n# ---------------------------------------------------------------\n# Third Party Services Settings\n# ---------------------------------------------------------------\n\n# MathJax Support 数学公式\nmathjax:\n  enable: false\n  cdn: //cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\n\n#各种第三方服务\n# Swiftype Search API Key\n#swiftype_key:\n\n# Baidu Analytics ID\n#baidu_analytics:\n\n# Duoshuo ShortName\n#duoshuo_shortname:\n\n# Disqus\n#disqus_shortname:\n\n# Baidu Share\n# Available value:\n#    button | slide\n# Warning: Baidu Share does not support https.\n#baidushare:\n##  type: button\n\n# Share\njiathis: true\n# Warning: JiaThis does not support https.\n#add_this_id:\n\n# Share\nduoshuo_share: true\n\n# Google Webmaster tools verification setting\n# See: https://www.google.com/webmasters/\n#google_site_verification:\n\n\n# Google Analytics\n#google_analytics:\n\n# CNZZ count\n#cnzz_siteid:\n\n\n# Make duoshuo show UA\n# user_id must NOT be null when admin_enable is true!\n# you can visit http://dev.duoshuo.com get duoshuo user id.\nduoshuo_info:\n  ua_enable: true\n  admin_enable: ture\n  user_id: 6343395544286626562\n  admin_nickname: 博主\n\n\n# Facebook SDK Support.\n# https://github.com/iissnan/hexo-theme-next/pull/410\nfacebook_sdk:\n  enable: false\n  app_id:       #<app_id>\n  fb_admin:     #<user_id>\n  like_button:  #true\n  webmaster:    #true\n\n# Facebook comments plugin\n# This plugin depends on Facebook SDK.\n# If facebook_sdk.enable is false, Facebook comments plugin is unavailable.\nfacebook_comments_plugin:\n  enable: false\n  num_of_posts: 10  # min posts num is 1\n  width: 100%       # default width is 550px\n  scheme: light     # default scheme is light (light or dark)\n\n\n# Show number of visitors to each article.\n# You can visit https://leancloud.cn get AppID and AppKey.\nleancloud_visitors:\n  enable: true\n  app_id: zieuxKa4IjAP6VgxxvBe4vkj-gzGzoHsz\n  app_key: MHGN54IEuofFNV1AROiRkEoG\n\n# Show PV/UV of the website/page with busuanzi. 不蒜子网站访问量统计\n# Get more information on http://ibruce.info/2015/04/04/busuanzi/\n#busuanzi_count:\n  # count values only if the other configs are false\n#  enable: true\n  # custom uv span for the whole site\n#  site_uv: true\n#  site_uv_header: 你是第\n#  site_uv_footer: 个小伙伴\n  # custom pv span for the whole site\n#  site_pv: true\n#  site_pv_header: 本站总浏览\n#  site_pv_footer: 次\n  # custom pv span for one page only\n#  page_pv: true\n#  page_pv_header: 热度\n#  page_pv_footer: ℃\n\n# Tencent analytics ID\n# tencent_analytics:\n\n# Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO\nbaidu_push: true\n\n# Google Calendar\n# Share your recent schedule to others via calendar page\n#\n# API Documentation:\n# https://developers.google.com/google-apps/calendar/v3/reference/events/list\ncalendar:\n  enable: false\n  calendar_id: <required>\n  api_key: <required>\n  orderBy: startTime\n  offsetMax: 24\n  offsetMin: 4\n  timeZone:\n  showDeleted: false\n  singleEvents: true\n  maxResults: 250\n\n\n#! ---------------------------------------------------------------\n#! DO NOT EDIT THE FOLLOWING SETTINGS\n#! UNLESS YOU KNOW WHAT YOU ARE DOING\n#! ---------------------------------------------------------------\n\n# Motion\nuse_motion: true\n\n# Fancybox\nfancybox: true\n\n\n# Script Vendors.\n# Set a CDN address for the vendor you want to customize.\n# For example\n#    jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js\n# Be aware that you should use the same version as internal ones to avoid potential problems.\n# Please use the https protocol of CDN files when you enable https on your site.\nvendors:\n  # Internal path prefix. Please do not edit it. 5.0以下版本如果打开网页空白，就把vendors文件夹改名为lib,这里对应改。\n  _internal: lib\n\n  # Internal version: 2.1.3\n  jquery:\n\n  # Internal version: 2.1.5\n  # See: http://fancyapps.com/fancybox/\n  fancybox:\n  fancybox_css:\n\n  # Internal version: 1.0.6\n  # See: https://github.com/ftlabs/fastclick\n  fastclick:\n\n  # Internal version: 1.9.7\n  # See: https://github.com/tuupola/jquery_lazyload\n  lazyload:\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity:\n\n  # Internal version: 1.2.1\n  # See: http://VelocityJS.org\n  velocity_ui:\n\n  # Internal version: 0.7.9\n  # See: https://faisalman.github.io/ua-parser-js/\n  ua_parser:\n\n  # Internal version: 4.4.0\n  # See: http://fontawesome.io/\n  fontawesome:\n\n# 多说热评文章 true 或者 false\nduoshuo_hotartical: true\n\n# Assets\ncss: css\njs: js\nimages: images\n\n# Theme version\nversion: 5.1.0\n\n```\n\n\n---\n## 安装插件\nhexo支持插件，可以直接通过命令行安装即可：`npm install **plugin-name** --save`\n更新插件\n`npm update`\n卸载插件\n`npm uninstall **plugin-name**`\n下面推荐几个常用的插件：\nfeed插件:`npm install hexo-generator-feed --save`\n站点地图:`npm install hexo-generator-sitemap --save`\n百度站点地图:`npm install hexo-generator-baidu-sitemap --save`\n\n---\n## 自由定制\n### 文章字数、阅读时长统计\n修改**post.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\post.swig\n\n安装hexo-wordcount插件\n```\nnpm install hexo-wordcount --save```\n通过以上安装后，你可以在你的模板文件后者.md文件加入以下相关的标签实现本插件的功能\n**字数统计**:WordCount\n```\n<span class=\"post-count\">{{ wordcount(post.content) }}</span>```\n\n**阅读时长预计**:Min2Read\n```\n<span class=\"post-count\">{{ min2read(post.content) }}</span>```\n**总字数统计**: TotalCount\n```\n<span class=\"post-count\">{{ totalcount(site, '0,0.0a') }}</span>```\n\n\n插入的代码以下：\n```\n          {% if not is_index and theme.facebook_sdk.enable and theme.facebook_sdk.like_button %}\n            &nbsp; | &nbsp;\n            <div class=\"fb-like\" data-layout=\"button_count\" data-share=\"true\"></div>\n          {% endif %}\n<!--从这里插入代码，上边是Facebook的代码-->\n<!--leancloud文章阅读量统计（主题默认已经添加）参考：http://www.joryhe.com/2016-05-29-how_to_create_leancloud_read_Counter.html-->\n          {# LeanCould PageView #}\n          {% if theme.leancloud_visitors.enable %}\n             <span id=\"{{ url_for(post.path) }}\" class=\"leancloud_visitors\" data-flag-title=\"{{ post.title }}\">\n               &nbsp; | &nbsp;\n               <span class=\"post-meta-item-icon\">\n                 <i class=\"fa fa-eye\"></i>\n               </span>\n               <span class=\"post-meta-item-text\">{{__('post.visitors')}} </span>\n               <span class=\"leancloud-visitors-count\"></span>\n              </span>\n          {% endif %}\n<!--字数、阅读时长统计-->\n         <span class=\"post-time\">\n     &nbsp; | &nbsp;\n           <span class=\"post-meta-item-icon\">\n             <i class=\"fa fa-calendar-o\"></i>\n           </span>\n           <span class=\"post-meta-item-text\">字数统计:</span>\n           <span class=\"post-count\">{{ wordcount(post.content) }}(字)</span>          \n         </span>\n\n\t\t<span class=\"post-time\">\n\t   &nbsp; | &nbsp;\n           <span class=\"post-meta-item-icon\">\n             <i class=\"fa fa-calendar-o\"></i>\n           </span>\n           <span class=\"post-meta-item-text\">阅读时长:</span>\n           <span class=\"post-count\">{{ min2read(post.content) }}(分)</span>         \n         </span>\n<!--不蒜子网站访问量统计（主题默认已经添加），如果出现排班错位请忽略，下面用官网的方法实现-->\n          {% if not is_index and theme.busuanzi_count.enable and theme.busuanzi_count.page_pv %}\n              &nbsp; | &nbsp;\n              <span class=\"page-pv\">{{ theme.busuanzi_count.page_pv_header }}\n              <span class=\"busuanzi-value\" id=\"busuanzi_value_page_pv\" ></span>{{ theme.busuanzi_count.page_pv_footer }}\n              </span>\n          {% endif %}```\n\n---\n### 文章结语\n修改**post.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\post.swig\n\n```\n          {% if post.type === 'picture' %}\n            <a href=\"{{ url_for(post.path) }}\">{{ post.content }}</a>\n          {% else %}\n            {{ post.content }}\n          {% endif %}\n        {% endif %}\n      {% else %}\n        {{ post.content }}\n<!--这里是每篇文章的尾巴，从这里开始插入代码-->\n<html>\n  <body>\n    <h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2>\n    <blockquote><p>如果您觉得本博客还不错，欢迎继续关注本博客，欢迎多提宝贵意见，非常感谢！</p></blockquote></div>\n    <div style=\"text-align:center;color:#ccc;font-size:14px;\">------本文结束<i class=\"fa fa-paw\"></i>感谢阅读------</div>\n  </body>\n</html>\n\n<!--下面这部分左边有框，但位置不够就会排班错乱\n<html>\n  <body>\n    <h1>结语</h1>\n      <p><h5><a href=\"#\" onclick=\"go_my_site()\" rel=\"external\">Leo Lan Blog Share For you!</a></h5></p>\n      <p>如果您觉得本博客还不错，欢迎继续关注Leo Lan的博客，欢迎多提宝贵意见，非常感谢！</p>\n  </body>\n</html>\n\n<html>\n  <body>\n    <h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2>\n    <blockquote><p>如果您觉得本博客还不错，欢迎收藏书签，欢迎多提宝贵意见，非常感谢！</p>\n    <footer><strong>Welcome to LeoLan'S BLOG</strong>\n    <cite><a href=\"#\" onclick=\"go_my_site()\" rel=\"external\">Leo Lan Blog Share For you!</a></cite></footer></blockquote></div>\n  </body>\n</html>\n-->```\n\n---\n### 文章底部的标签云锚点\n修改**post.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\post.swig\n\n```\n<!--这是文章底部标签云锚点，不喜欢就注释掉\n    <footer class=\"post-footer\">\n      {% if post.tags and post.tags.length and not is_index %}\n        <div class=\"post-tags\">\n          {% for tag in post.tags %}\n            <a href=\"{{ url_for(tag.path) }}\" rel=\"tag\"># {{ tag.name }}</a>\n          {% endfor %}\n        </div>\n      {% endif %}\n-->```\n\n---\n\n### 不蒜子网站访问量统计、删除NEXT主题自带尾巴\n修改**footer.swig**模板\n**模板位置**：themes\\next\\layout\\\\_partials\\footer.swig\n官网：http://service.ibruce.info   \nhttp://ibruce.info/2015/04/04/busuanzi/\n把代码改成这个样子，`busuanzi_value_site_uv`中，uv和pv功能是不一样的。\n```\n<div class=\"powered-by\">\n  {{ __('footer.powered', '') }}\n</div>\n\n<div class=\"theme-info\">\n  {{ __('footer.theme') }}<span id=\"busuanzi_value_site_uv\"></span>位小伙伴\n</div>\n\n<script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\">\n</script>\n```\n同时更改语言文件中对应的名称\n编辑：**themes\\languages\\zh_Hans.yml**\n```\nfooter:\n  powered: 本站总访问量<span id=\"busuanzi_value_site_pv\"></span>\n  theme: 您是第\n#<a target=\"_blank\" href=\"http://www.miitbeian.gov.cn/\">粤ICP备16026009号-2</a>```\n\n---\n### 居中模块\n把要居中的模块、代码、文字、插件、外链等，放在下面代码的中间即可居中显示。\n```\n<!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 -->\n<!-- 其中 class=\"blockquote-center\" 是必须的 -->\n  <blockquote class=\"blockquote-center\">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>\n或者\n  <!-- 标签 方式，要求版本在0.4.5或以上 -->\n{% centerquote %}优秀的人，不是不合群，而是他们合群的人里面没有你{% endcenterquote %}\n或者\n  <!-- 标签别名 -->\n{% cq %} 优秀的人，不是不合群，而是他们合群的人里面没有你 {% endcq %}\n\n```\n\n---\n### 留言板\n编辑：**themes\\languages\\zh_Hans.yml**\n```\ntitle:   #这里增加\n  guestbook: 留言板\n\nmenu:    #这里增加\n  guestbook: 给我留言```\n在站点source目录下新建guestbook文件夹，里面新建index.md文件，内容如下(其中调用HTML代码，插入了一个播放器)：\n```\n---\ntitle: 留言板\ndate: 2016-11-14 17:21:10\n---\n<blockquote class=\"blockquote-center\">\n<!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽-->\n    <h2>Stay Hungry,Stay Foolish</h2>\n   <!--<embed src=\"https://music.163.com/style/swf/widget.swf?sid=34971711&type=1&auto=1&width=310&height=90\" width=\"330\" height=\"110\"  allowNetworking=\"all\"></embed>\n   <iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=110 src=\"https://music.163.com/outchain/player?type=1&id=34971711&auto=1&height=90\"></iframe>-->\n   <embed src=\"https://music.163.com/style/swf/widget.swf?sid=32507038&type=2&auto=1&width=320&height=66\" width=\"340\" height=\"86\"  allowNetworking=\"all\"></embed>\n   <!--这里是插入视频的方法\n\t<iframe src=\"//www.youtube.com/embed/JMl8cQjBfqk\" width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen></iframe>-->\n</blockquote>\n<br/>\n<span id=\"yu-2\">最近访客</span>\n<div class=\"ds-recent-visitors\" data-num-items=\"39\" data-avatar-size=\"40\" id=\"ds-recent-visitors\"></div>\n<br/>```\n**编辑主题配置文件**：_config.yml\n```\nmenu:   #在这里加上\n  guestbook: /guestbook```\n\n---\n### 字体\n关于字体的修改开始时遇到很多问题，到后来才找到了原因，是因为引用的字体在**www.google.com/fonts**（默认是Google字体库）里找不到，或者是付费的字体。修改为免费的字体就正常使用了。打开[Google Fonts](www.google.com/fonts)，右上角查找你要的字体，能搜索到的话把全名复制下来，填写在配置文件中。\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161206/152548232.png)\n\n修改**\\themes\\next\\_config.yml**找到**Font Settings**\n```\n# Font Settings\n# - Find fonts on Google Fonts (https://www.google.com/fonts)\n# - All fonts set here will have the following styles:\n#     light, light italic, normal, normal intalic, bold, bold italic\n# - Be aware that setting too much fonts will cause site running slowly\n# - Introduce in 5.0.1\n# ---------------------------------------------------------------\nfont:\n  enable: true\n\n  # Uri of fonts host. E.g. //fonts.googleapis.com (Default) \n  # 外链字体库地址，例如 //fonts.googleapis.com (默认值)\n加载慢的话搜索fonts.googleapis.com即可找到替换地址,这里注意使用的地址中包含了下面设置的字体，没有的话是默认字体。\n  host: \n  #fonts.css.network\n\n  # Global font settings used on <body> element.\n  # 全局字体，应用在 <body> 元素上\n  global:\n    # external: true will load this font family from host.\n    external: true\n    family: Lato\n    #Monda\n\n  # Font settings for Headlines (h1, h2, h3, h4, h5, h6)\n  # Fallback to `global` font settings.\n  # 标题字体 (h1, h2, h3, h4, h5, h6)\n  headings:\n    external: true\n    family: \n\n  # Font settings for posts\n  # Fallback to `global` font settings.\n  # 文章字体\n  posts:\n    external: true\n    family: Roboto\n\n  # Font settings for Logo\n  # Fallback to `global` font settings.\n  # The `size` option use `px` as unit\n  # Logo 字体\n  logo:\n    external: true\n    family: Georgia\n    size: 24\n\n  # Font settings for <code> and code blocks.\n # 代码字体，应用于 <code> 以及代码块\n  codes:\n    external: true\n    family: \n    size: 14\n#字体大小直接加个size: 写就行，单位是px，不填写则为默认大小。\n#\"Source Code Pro\", \"PT Mono\", \"DejaVu Sans Mono\", ```\n\n参考：\n[Next主题设置字体](http://theme-next.iissnan.com/theme-settings.html#fonts-customization)  |  [如何引用google字体](http://jingyan.baidu.com/article/09ea3ede0cb0e1c0aede39d8.html)\n\n如果要在文章中临时引用特殊的字体格式，可以直接在 Markdown 文档中使用 html 语法\n```\n<font size=4 > 这里输入文字，自定义大小 </font>\n<font color=\"#FF0000\"> 这里输入文字，自定义颜色的字体 </font> ```\n\n---\n### 404页面\n404页面可以自己写，也可以引用腾讯公益404页面。\n这是嵌入到主题中的404页面而不是新开一个页面；在站点目录source目录下新建**404.html**文件，粘贴以下代码：\n```\n<!DOCTYPE HTML>\n<html>\n<head>\n\t<title>404 - arao'blog</title>\n\t<meta name=\"description\" content=\"404错误，页面不存在！\">\n\t<meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n\t<meta name=\"robots\" content=\"all\" />\n\t<meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\t<script type=\"text/javascript\" src=\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\" charset=\"utf-8\"></script>\n</body>\n</html>```\n\n---\n### 打赏\n修改**reward.swig**模板\n**模板位置**：themes\\next\\layout\\\\_macro\\reward.swig\n\n直接全部替换代码，这段代码是圆形的打赏按钮，二维码左右排列。\n```\n{% if theme.alipay or theme.wechatpay %}\n<div style=\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center\">\n  <div style=\"margin-bottom: 10px;font-size: 16px;font-weight: 600;\">您的支持将鼓励我继续创作,非常感谢！</div>\n  <button id=\"rewardButton\", disable=\"enable\", onclick=\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}\", style=\"cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none\">\n    <span onmouseover=\"this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'\" onMouseOut=\"this.style.color='#fff';this.style.background='rgb(236,96,0)'\" style=\"display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)\">赏</span>\n  </button>\n    <div id=\"QR\" style=\"display: none;\">\n      {% if theme.alipay %}\n        <div id=\"alipay\" style=\"display: inline-block\">\n          <img id=\"alipay_qr\" src=\"{{ theme.alipay }}\" alt=\"{{ theme.author }} Alipay\" style=\"width: 200px; max-width: 100%; display: inline-block\"/>\n          <p>支付宝打赏</p>\n        </div>\n      {% endif %}\n      {% if theme.wechatpay %}\n        <div id=\"wechat\" style=\"display: inline-block\">\n          <img id=\"wechat_qr\" src=\"{{ theme.wechatpay }}\" alt=\"{{ theme.author }} WeChat Pay\" style=\"width: 200px; max-width: 100%; display: inline-block\"/>\n          <p>微信打赏</p>\n        </div>\n      {% endif %}\n    </div>\n  </div>\n{% endif %}```\n\n---\n### 最近访客\n```\n<h3 id=\"最近访客\"><a href=\"#最近访客\" class=\"headerlink\" title=\"最近访客\"></a>最近访客</h3><div class=\"ds-recent-visitors\" data-num-items=\"28\" data-avatar-size=\"42\" id=\"ds-recent-visitors\"></div>```\n```\nclass=“ds-recent-visitors”    //指定显示最近访客容器\ndata-num-items=“28”    //显示最近访客的数量\ndata-avatar-size=“42”    //显示最近访客头像尺寸大小\nid=“ds-recent-visitors”    //为了调节最近访客样式加的```\n这样，每个页面都有最近访客了（只能看到注册了多说账户的用户）\n\n---\n### SEO\n#### 网站地图\n安装hexo的sitemap网站地图生成插件\n```\nnpm install hexo-generator-sitemap --save\nnpm install hexo-generator-baidu-sitemap --save```\n在你的hexo站点的_config.yml添加下面的代码\n```\n# hexo sitemap网站地图\nsitemap:\npath: sitemap.xml\nbaidusitemap:\npath: baidusitemap.xml  #如果报path错误就把前面增加baidu```\n配置成功后，hexo编译时会在hexo站点根目录生成**sitemap.xml**和**baidusitemap.xml**\n其中sitemap.xml适合提交给谷歌搜素引擎，baidusitemap.xml适合提交百度搜索引擎。\n\n---\n#### 蜘蛛协议\n在robots.txt中添加站点地图文件，如下（没有robots.txt就在站点目录source下新建）：\n```\n# hexo robots.txt\nUser-agent: *\nAllow: /\nAllow: /archives/\n\nDisallow: /lib/   \nDisallow: /js/\nDisallow: /css/\nDisallow: /fonts/\nDisallow: /fancybox/\n\nSitemap: http://www.leolan.top/sitemap.xml\nSitemap: http://www.leolan.top/baidusitemap.xml\n```\n\n---\n#### NexT主题，首页title的优化\n感谢[arao](http://www.arao.me/)的教程\n修改\\themes\\next\\layout\\index.swig文件，将下面代码\n```\n{% block title %} {{ config.title }} {% endblock %}```\n改为\n```\n{% block title %} {{ config.title }} - {{ theme.description }} {% endblock %}```\n这时候你的首页标题会更符合**网站名称 - 网站描述**这习惯。\n把关键词(在主题配置文件**_config.yml**中设置**keywords:**)也显示在Title标题里，可改成:\n```\n{% block title %} {{ theme.keywords }} - {{ config.title }} - {{ theme.description }} {% endblock %}\n或（排列顺序看自己喜欢）\n{% block title %} {{ config.title }} - {{ theme.keywords }} {% endblock %}```\n注意：别堆砌关键字，整个标题一般不超过80个字符，可以通过chinaz的seo综合查询检查。\n\n---\n#### 限制出站链接\n网络爬虫会在当前页面搜索所有的链接，故有可能跳到别的网站。**nofollow** 标签是由谷歌领头创新的一个 “反垃圾链接” 的标签，并被各大搜索引擎广泛支持，引用 **nofollow** 标签的目的是：用于指示搜索引擎不要追踪（即抓取）网页上的带有 **nofollow** 属性的任何出站链接，以减少垃圾链接的分散网站权重。\n```\nnpm install hexo-autonofollow --save```\n在 **站点配置文件 **中添加如下代码。\n```\nnofollow:\n    enable: true\n    exclude: # 例外的链接，可将友情链接放置此处\n    - exclude1.com\n    - exclude2.com```\n\n---\n#### 文章链接唯一化\n也许你会数次更改文章题目或者变更文章发布时间，在默认设置下，文章链接都会改变，不利于搜索引擎收录，也不利于分享。唯一永久链接才是更好的选择。安装此插件后，不要在 `hexo s` 模式下更改文章文件名，否则文章将成空白,需要重新`hexo s`才行。\n```\nnpm install hexo-abbrlink --save```\n在 站点配置文件 中查找代码 **permalink:**，将其更改为:\n```\npermalink: posts/:abbrlink/  # “posts/” 可自行更换```\n在 站点配置文件 中添加如下代码：\n```\n# abbrlink config\nabbrlink:\n  alg: crc32  # 算法：crc16(default) and crc32 \n  rep: hex    # 进制：dec(default) and hex```\n永久链接有下面4种组合\n```\ncrc16 & hex\nhttps://post.zz173.com/posts/66c8.html\n\ncrc16 & dec\nhttps://post.zz173.com/posts/65535.html\n\ncrc32 & hex\nhttps://post.zz173.com/posts/8ddf18fb.html\n\ncrc32 & dec\nhttps://post.zz173.com/posts/1690090958.html```\n\n---\n#### 百度网址推送\n修改**baidu-push.swig**模板\n**模板位置**：themes\\next\\layout\\\\_scripts\\baidu-push.swig\n没有此文件就新建\n```\n{% if theme.baidu_push %}\n<script>\n(function(){\n    var bp = document.createElement('script');\n    var curProtocol = window.location.protocol.split(':')[0];\n    if (curProtocol === 'https') {\n        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        \n    }\n    else {\n        bp.src = 'http://push.zhanzhang.baidu.com/push.js';\n    }\n    var s = document.getElementsByTagName(\"script\")[0];\n    s.parentNode.insertBefore(bp, s);\n})();\n</script>\n{% endif %}```\n**编辑站点配置文件**：_config.yml\n加上以下代码：\n```\nbaidu_url_submit:  #百度链接推送，推送刚刚生成的永久链接\n  count: 5 ## 比如3，代表提交最新的三个链接\n  host: www.leolan.top ## 在百度站长平台中注册的域名\n  token: kZ5xboXBFPxQ0g7N ## 请注意这是您的秘钥， 请不要发布在公众仓库里!\n  path: /baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里```\n\n---\n#### 主动推送新链接\n解决百度爬虫被禁止访问的问题，提升网站收录质量和速度。\n```\nnpm install hexo-baidu-url-submit --save```\n在 站点配置文件 中添加如下代码。\n```\nbaidu_url_submit:\n  count: 5 ## 比如3，代表提交最新的三个链接\n  host: blog.tangxiaozhu.com ## 在百度站长平台中注册的域名\n  token:  ## 请注意这是您的秘钥， 请不要发布在公众仓库里!\n  path: baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里```\n\n\n---\n#### 向百度提交所有链接\n这是LoveNight的脚本，先本地安装Python。\n```\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n# @Author: LoveNight\n# @Date:   2015-11-16 20:45:59\n# @Last Modified by:   lulee007\n# @Last Modified time: 2016-01-16 21:06:50\nimport os\nimport sys\nimport json\nfrom bs4 import BeautifulSoup as BS\nimport requests\nimport codecs\n\n\"\"\"\nhexo 博客专用，向百度站长平台提交所有网址\n\n本脚本必须放在 hexo 博客的根目录下执行！需要已安装生成百度站点地图的插件。\n百度站长平台提交链接：http://zhanzhang.baidu.com/linksubmit/index\n主动推送：最为快速的提交方式，推荐您将站点当天新产出链接立即通过此方式推送给百度，以保证新链接可以及时被百度收录。\n从中找到自己的接口调用地址\n\"\"\"\n\nurl = 'http://data.zz.baidu.com/urls?site=leolan.top&token=kZ5xboXBFPxQ0g7N'    #这里是你的百度推送地址。\nbaidu_sitemap = os.path.join(sys.path[0], 'public', 'baidusitemap.xml')\ngoogle_sitemap = os.path.join(sys.path[0], 'public', 'baidusitemap_zhanwei.xml')\n# sitemap = [baidu_sitemap, google_sitemap]\nsitemap = [baidu_sitemap]\n\n# assert (os.path.exists(baidu_sitemap) or os.path.exists(\n#     google_sitemap)), \"没找到任何网站地图，请检查！\"\nassert os.path.exists(baidu_sitemap) , \"没找到任何网站地图，请检查！\"\n\n# 从站点地图中读取网址列表\ndef getUrls():\n    urls = []\n    for _ in sitemap:\n        if os.path.exists(_):\n            with codecs.open(_, \"r\", \"utf-8\") as f:\n                xml = f.read()\n            soup = BS(xml, \"xml\")\n            tags = soup.find_all(\"loc\")\n            urls += [x.string for x in tags]\n            if _ == baidu_sitemap:\n                tags = soup.find_all(\"breadCrumb\", url=True)\n                print(\"\")\n                urls += [x[\"url\"] for x in tags]\n    return urls\n\n# POST提交网址列表\ndef postUrls(urls):\n    urls = set(urls)  # 先去重\n    print(\"一共提取出 %s 个网址\" % len(urls))\n    data = \"\\n\".join(urls)\n    return requests.post(url, data=data).text\n\nif __name__ == '__main__':\n\n    urls = getUrls()\n    result = postUrls(urls)\n    print(\"提交结果：\")\n    print(result)```\n\n---\n### 语法优化\n\n默认的语法无法添加角标（footnotes）以注明引用，这种可来回跳转的引用还是挺有用处的。\n```\nnpm install hexo-footnotes --save```\n安装完毕请确认是否生效，如不生效，在 站点配置文件 中添加如下代码以手动启用：\n```\nplugins:\n  - hexo-footnotes```\n![](http://ofyfogrgx.bkt.clouddn.com/222054761.png)\n\n\n---\n### 页面留白(扩大显示范围)\n浏览器留白太多，代码块看起来比较麻烦，想让更多空间显示文章。\nNexT 对于内容的宽度的设定如下：\n700px，当屏幕宽度 < 1600px\n900px，当屏幕宽度 >= 1600px\n移动设备下，宽度自适应\n\n如果你需要修改内容的宽度，同样需要编辑样式文件。 编辑主题的 **source/css/_variables/custom.styl** 文件，新增变量：\n```\n// 修改成你期望的宽度，默认700px\n$content-desktop = 700px\n// 当视窗超过 1600px 后的宽度，默认900px\n$content-desktop-large = 900px```\n\n如果主题风格选择的是**Pisces**；那么同时还要修改**header** 的宽度、**.main-inner **的宽度以及 **.content-wrap **的宽度(如果没什么问题可以不修改custom.styl文件)。\n编辑文件：**source/css/_schemes/Picses/_layout.styl**\n```\n//可以使用百分比，也可以是像素，80%是比较合适的。\n//开头header中修改为80%\nheader{ width: 80%; }\n//.container中系应该为80%\n.main-inner { width: 80%; }\n//最后修改.content-wrap\n.content-wrap { width: calc(100% - 260px); }```\n\n\n---\n### 多说评论框自定义css\n感谢[arao](http://www.arao.me/)的代码\n进入多说管理后台\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161115/170352768.png)\n把下面代码粘贴进去保存\n```\n#ds-reset .ds-avatar img,\n#ds-recent-visitors .ds-avatar img {\nwidth: 54px;\nheight: 54px;     /*设置图像的长和宽，这里要根据自己的评论框情况更改*/\nborder-radius: 27px;     /*设置图像圆角效果,在这里我直接设置了超过width/2的像素，即为圆形了*/\n-webkit-border-radius: 27px;     /*圆角效果：兼容webkit浏览器*/\n-moz-border-radius: 27px;\nbox-shadow: inset 0 -1px 0 #3333sf;     /*设置图像阴影效果*/\n-webkit-box-shadow: inset 0 -1px 0 #3333sf;\n-webkit-transition: 0.4s;\n-webkit-transition: -webkit-transform 0.4s ease-out;\ntransition: transform 0.4s ease-out;     /*变化时间设置为0.4秒(变化动作即为下面的图像旋转360读）*/\n-moz-transition: -moz-transform 0.4s ease-out;\n}\n\n#ds-reset .ds-avatar img:hover,\n#ds-recent-visitors .ds-avatar img:hover {\n\n/*设置鼠标悬浮在头像时的CSS样式*/    box-shadow: 0 0 10px #fff;\nrgba(255, 255, 255, .6), inset 0 0 20px rgba(255, 255, 255, 1);\n-webkit-box-shadow: 0 0 10px #fff;\nrgba(255, 255, 255, .6), inset 0 0 20px rgba(255, 255, 255, 1);\ntransform: rotateZ(360deg);     /*图像旋转360度*/\n-webkit-transform: rotateZ(360deg);\n-moz-transform: rotateZ(360deg);\n}\n\n#ds-thread #ds-reset .ds-textarea-wrapper textarea {\nbackground: url(http://ww4.sinaimg.cn/small/649a4735gw1et7gnhy5fej20zk0m8q3q.jpg) right no-repeat;\n}\n\n#ds-recent-visitors .ds-avatar {\nfloat: left\n}\n/*隐藏多说底部版权*/\n#ds-thread #ds-reset .ds-powered-by {\ndisplay: none;\n}```\n\n---\n### 解决多说评论不稳定、加载慢\n把多说评论依赖的**embed.js**放置底部，修改\nthemes/next/layout/_scripts/third-party/comments/duoshuo.swig文件\n将\n```\n(document.getElementsByTagName('head')[0]```\n修改为\n```\n(document.getElementById('footer')```\n\n---\n### 多说userid\n主题配置中需要用到user_id\n![](http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid1.png)\n![](http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid2.png)\n```\nduoshuo_info:\n  ua_enable: true\n  admin_enable: ture\n  user_id: 6343395544286626562\n  admin_nickname: 博主```\n  \n---\n### 动态背景\n修改**_layout.swig**模板\n**模板位置**：themes\\next\\layout\\\\_layout.swig\n在末尾</body>前加上下面一句\n```\n<!-- 背景动画 -->\n#默认灰色线条\n<script type=\"text/javascript\" src=\"/js/src/particle.js\"></script>\n#浅蓝色线条\n<script type=\"text/javascript\" src=\"/js/src/particle.js\" count=\"50\" zindex=\"-2\" opacity=\"1\" color=\"0,104,183\"></script>```\n在themes\\source\\js\\src\\下新建文件particle.js写上以下代码（也可以自己下载其他js,修改方式差不多）\n```js\n!function(){function n(n,e,t){return n.getAttribute(e)||t}function e(n){return document.getElementsByTagName(n)}function t(){var t=e(\"script\"),o=t.length,i=t[o-1];return{l:o,z:n(i,\"zIndex\",-1),o:n(i,\"opacity\",.5),c:n(i,\"color\",\"0,0,0\"),n:n(i,\"count\",99)}}function o(){c=u.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=u.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function i(){l.clearRect(0,0,c,a);var n,e,t,o,u,d,x=[w].concat(y);y.forEach(function(i){for(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x>c||i.x<0?-1:1,i.ya*=i.y>a||i.y<0?-1:1,l.fillRect(i.x-.5,i.y-.5,1,1),e=0;e<x.length;e++)n=x[e],i!==n&&null!==n.x&&null!==n.y&&(o=i.x-n.x,u=i.y-n.y,d=o*o+u*u,d<n.max&&(n===w&&d>=n.max/2&&(i.x-=.03*o,i.y-=.03*u),t=(n.max-d)/n.max,l.beginPath(),l.lineWidth=t/2,l.strokeStyle=\"rgba(\"+m.c+\",\"+(t+.2)+\")\",l.moveTo(i.x,i.y),l.lineTo(n.x,n.y),l.stroke()));x.splice(x.indexOf(i),1)}),r(i)}var c,a,u=document.createElement(\"canvas\"),m=t(),d=\"c_n\"+m.l,l=u.getContext(\"2d\"),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/45)},x=Math.random,w={x:null,y:null,max:2e4};u.id=d,u.style.cssText=\"position:fixed;top:0;left:0;z-index:\"+m.z+\";opacity:\"+m.o,e(\"body\")[0].appendChild(u),o(),window.onresize=o,window.onmousemove=function(n){n=n||window.event,w.x=n.clientX,w.y=n.clientY},window.onmouseout=function(){w.x=null,w.y=null};for(var y=[],s=0;m.n>s;s++){var f=x()*c,h=x()*a,g=2*x()-1,p=2*x()-1;y.push({x:f,y:h,xa:g,ya:p,max:6e3})}setTimeout(function(){i()},100)}();\n```\n\n---\n### 背景透明\n在 **\\themes\\next\\source\\css\\\\_custom\\custom.styl** 中写上 `.content-wrap {background: transparent;}`\n**custom.styl**文件为用户自定义风格，卸载里面的内容会优先覆盖主题的设定，也可以定义其他的方法等。\n\n---\n### 背景放图片\n首先找到一个背景图片放到 \\themes\\next\\source\\images下；\n修改themes\\next\\source\\css\\_schemes\\Pisces（Mist和Muse也行）\\index.styl文件，\n在文件的最上方加上一代码 \n```\nbody { background:url(/images/backGround.jpg);} ```\n\n---\n### 修改文章超链接样式\n将链接文本设置为蓝色，鼠标划过时文字颜色加深，并显示下划线。\n修改 **themes\\next\\source\\css\\\\_custom\\custom.styl **，添加如下 `css` 样式（颜色可以自己更改，百度html颜色代码即可找到）：\n\n```css\n.post-body p a {\n  color: #0593d3;\n  border-bottom: none;\n  &:hover {\n    color: #0477ab;\n    text-decoration: underline;\n  }\n}```\n\n---\n### High一下\n#### **第一种**\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161205/100022200.png)\n修改**header.swig**模板\n**模板位置**：themes\\next\\layout\\\\_partials\\header.swig\n在以下代码的结尾换行\n```css\n      {% if hasSearch %}\n        <li class=\"menu-item menu-item-search\">\n          {% if theme.swiftype_key %}\n            <a href=\"javascript:;\" class=\"st-search-show-outputs\">\n          {% elseif config.search %}\n            <a href=\"javascript:;\" class=\"popup-trigger\">\n          {% endif %}\n            {% if theme.menu_icons.enable %}\n              <i class=\"menu-item-icon fa fa-search fa-fw\"></i> <br />\n            {% endif %}\n            {{ __('menu.search') }}\n          </a>\n        </li>\n      {% endif %}```\n插入以下内容,感谢Neveryu修复了一些bug，以下是Neveryu的代码。\n```css\n <!-- 自定义High一下的功能 -->\n      <li class=\"menu-item\"> <a title=\"把这个链接拖到你的工具栏中,任何网页都可以High\" href='javascript:(\n    /*\n     * Copyright (C) 2016 Never_yu (Neveryu.github.io) <React.dong.yu@gmail.com>\n     * Sina Weibo (http://weibo.com/Neveryu)\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *      http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     */\n    function go() {\n\n\n    var songs = [\n                \"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\",\n                \"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\"\n    ];\n\n    \n    function c() {\n        var e = document.createElement(\"link\");\n        e.setAttribute(\"type\", \"text/css\");\n        e.setAttribute(\"rel\", \"stylesheet\");\n        e.setAttribute(\"href\", f);\n        e.setAttribute(\"class\", l);\n        document.body.appendChild(e)\n    }\n \n    function h() {\n        var e = document.getElementsByClassName(l);\n        for (var t = 0; t < e.length; t++) {\n            document.body.removeChild(e[t])\n        }\n    }\n \n    function p() {\n        var e = document.createElement(\"div\");\n        e.setAttribute(\"class\", a);\n        document.body.appendChild(e);\n        setTimeout(function() {\n            document.body.removeChild(e)\n        }, 100)\n    }\n \n    function d(e) {\n        return {\n            height : e.offsetHeight,\n            width : e.offsetWidth\n        }\n    }\n \n    function v(i) {\n        var s = d(i);\n        return s.height > e && s.height < n && s.width > t && s.width < r\n    }\n \n    function m(e) {\n        var t = e;\n        var n = 0;\n        while (!!t) {\n            n += t.offsetTop;\n            t = t.offsetParent\n        }\n        return n\n    }\n \n    function g() {\n        var e = document.documentElement;\n        if (!!window.innerWidth) {\n            return window.innerHeight\n        } else if (e && !isNaN(e.clientHeight)) {\n            return e.clientHeight\n        }\n        return 0\n    }\n \n    function y() {\n        if (window.pageYOffset) {\n            return window.pageYOffset\n        }\n        return Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n    }\n \n    function E(e) {\n        var t = m(e);\n        return t >= w && t <= b + w\n    }\n\n    function S() {\n        var e = document.getElementById(\"audio_element_id\");\n        if(e != null){\n            var index = parseInt(e.getAttribute(\"curSongIndex\"));\n            if(index > songs.length - 2) {\n                index = 0;\n            } else {\n                index++;\n            }\n            e.setAttribute(\"curSongIndex\", index);\n            N();\n        }\n\n        e.src = i;\n        e.play()\n    }\n \n    function x(e) {\n        e.className += \" \" + s + \" \" + o\n    }\n \n    function T(e) {\n        e.className += \" \" + s + \" \" + u[Math.floor(Math.random() * u.length)]\n    }\n \n    function N() {\n        var e = document.getElementsByClassName(s);\n        var t = new RegExp(\"\\\\b\" + s + \"\\\\b\");\n        for (var n = 0; n < e.length; ) {\n            e[n].className = e[n].className.replace(t, \"\")\n        }\n    }\n\n    function initAudioEle() {\n        var e = document.getElementById(\"audio_element_id\");\n        if(e === null){\n            e = document.createElement(\"audio\");\n            e.setAttribute(\"class\", l);\n            e.setAttribute(\"curSongIndex\", 0);\n            e.id = \"audio_element_id\";\n            e.loop = false;\n            e.bgcolor = 0;\n            e.addEventListener(\"canplay\", function() {\n            setTimeout(function() {\n                x(k)\n            }, 500);\n            setTimeout(function() {\n                N();\n                p();\n                for (var e = 0; e < O.length; e++) {\n                    T(O[e])\n                }\n            }, 15500)\n        }, true);\n        e.addEventListener(\"ended\", function() {\n            N();\n            h();\n            go();\n        }, true);\n        e.innerHTML = \" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>\";\n        document.body.appendChild(e);\n        }\n    }\n    \n    initAudioEle();\n    var e = 30;\n    var t = 30;\n    var n = 350;\n    var r = 350;\n\n    var curSongIndex = parseInt(document.getElementById(\"audio_element_id\").getAttribute(\"curSongIndex\"));\n    var i = songs[curSongIndex];\n    \n    var s = \"mw-harlem_shake_me\";\n    var o = \"im_first\";\n    var u = [\"im_drunk\", \"im_baked\", \"im_trippin\", \"im_blown\"];\n    var a = \"mw-strobe_light\";\n\n    /* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */\n    var f = \"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\";\n    \n    var l = \"mw_added_css\";\n    var b = g();\n    var w = y();\n    var C = document.getElementsByTagName(\"*\");\n    var k = null;\n    for (var L = 0; L < C.length; L++) {\n        var A = C[L];\n        if (v(A)) {\n            if (E(A)) {\n                k = A;\n                break\n            }\n        }\n    }\n    if (A === null) {\n        console.warn(\"Could not find a node of the right size. Please try a different page.\");\n        return\n    }\n    c();\n    S();\n    var O = [];\n    for (var L = 0; L < C.length; L++) {\n        var A = C[L];\n        if (v(A)) {\n            O.push(A)\n        }\n    }\n    })()'><i class=\"menu-item-icon fa fa-music fa-fw\"></i>High一下</a> </li>\n          <!-- end High一下 -->```\n\n---\n#### **第二种**\n![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161205/111721588.png)\n\n不修改**themes\\next\\layout\\\\_partials\\header.swig**文件\n而是修改**themes\\next\\layout\\\\_macro\\sidebar.swig**\n```\n        {% if theme.rss %}\n          <div class=\"feed-link motion-element\">\n            <a href=\"{{ url_for(theme.rss) }}\" rel=\"alternate\">\n              <i class=\"fa fa-rss\"></i>\n              RSS\n            </a>\n<!-- 在RSS的div内加入，引用相同的样式 -->\n<!-- 自定义High一下的功能 -->\n<a href='javascript:(\n   function go() {\n   var songs = [\n               \"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\",\n               \"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&%20Stone%20-%20Lost.mp3\"\n   ];\n   \n   function c() {\n       var e = document.createElement(\"link\");\n       e.setAttribute(\"type\", \"text/css\");\n       e.setAttribute(\"rel\", \"stylesheet\");\n       e.setAttribute(\"href\", f);\n       e.setAttribute(\"class\", l);\n       document.body.appendChild(e)\n   }\n   function h() {\n       var e = document.getElementsByClassName(l);\n       for (var t = 0; t < e.length; t++) {\n           document.body.removeChild(e[t])\n       }\n   }\n   function p() {\n       var e = document.createElement(\"div\");\n       e.setAttribute(\"class\", a);\n       document.body.appendChild(e);\n       setTimeout(function() {\n           document.body.removeChild(e)\n       }, 100)\n   }\n   function d(e) {\n       return {\n           height : e.offsetHeight,\n           width : e.offsetWidth\n       }\n   }\n   function v(i) {\n       var s = d(i);\n       return s.height > e && s.height < n && s.width > t && s.width < r\n   }\n   function m(e) {\n       var t = e;\n       var n = 0;\n       while (!!t) {\n           n += t.offsetTop;\n           t = t.offsetParent\n       }\n       return n\n   }\n   function g() {\n       var e = document.documentElement;\n       if (!!window.innerWidth) {\n           return window.innerHeight\n       } else if (e && !isNaN(e.clientHeight)) {\n           return e.clientHeight\n       }\n       return 0\n   }\n   function y() {\n       if (window.pageYOffset) {\n           return window.pageYOffset\n       }\n       return Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n   }\n   function E(e) {\n       var t = m(e);\n       return t >= w && t <= b + w\n   }\n   function S() {\n       var e = document.getElementById(\"audio_element_id\");\n       if(e != null){\n           var index = parseInt(e.getAttribute(\"curSongIndex\"));\n           if(index > songs.length - 2) {\n               index = 0;\n           } else {\n               index++;\n           }\n           e.setAttribute(\"curSongIndex\", index);\n           N();\n       }\n       e.src = i;\n       e.play()\n   }\n   function x(e) {\n       e.className += \" \" + s + \" \" + o\n   }\n   function T(e) {\n       e.className += \" \" + s + \" \" + u[Math.floor(Math.random() * u.length)]\n   }\n   function N() {\n       var e = document.getElementsByClassName(s);\n       var t = new RegExp(\"\\\\b\" + s + \"\\\\b\");\n       for (var n = 0; n < e.length; ) {\n           e[n].className = e[n].className.replace(t, \"\")\n       }\n   }\n   function initAudioEle() {\n       var e = document.getElementById(\"audio_element_id\");\n       if(e === null){\n           e = document.createElement(\"audio\");\n           e.setAttribute(\"class\", l);\n           e.setAttribute(\"curSongIndex\", 0);\n           e.id = \"audio_element_id\";\n           e.loop = false;\n           e.bgcolor = 0;\n           e.addEventListener(\"canplay\", function() {\n           setTimeout(function() {\n               x(k)\n           }, 500);\n           setTimeout(function() {\n               N();\n               p();\n               for (var e = 0; e < O.length; e++) {\n                   T(O[e])\n               }\n           }, 15500)\n       }, true);\n       e.addEventListener(\"ended\", function() {\n           N();\n           h();\n           go();\n       }, true);\n       e.innerHTML = \" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>\";\n       document.body.appendChild(e);\n       }\n   }\n   \n   initAudioEle();\n   var e = 30;\n   var t = 30;\n   var n = 350;\n   var r = 350;\n   var curSongIndex = parseInt(document.getElementById(\"audio_element_id\").getAttribute(\"curSongIndex\"));\n   var i = songs[curSongIndex];\n   \n   var s = \"mw-harlem_shake_me\";\n   var o = \"im_first\";\n   var u = [\"im_drunk\", \"im_baked\", \"im_trippin\", \"im_blown\"];\n   var a = \"mw-strobe_light\";\n   /* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */\n   var f = \"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\";\n   \n   var l = \"mw_added_css\";\n   var b = g();\n   var w = y();\n   var C = document.getElementsByTagName(\"*\");\n   var k = null;\n   for (var L = 0; L < C.length; L++) {\n       var A = C[L];\n       if (v(A)) {\n           if (E(A)) {\n               k = A;\n               break\n           }\n       }\n   }\n   if (A === null) {\n       console.warn(\"Could not find a node of the right size. Please try a different page.\");\n       return\n   }\n   c();\n   S();\n   var O = [];\n   for (var L = 0; L < C.length; L++) {\n       var A = C[L];\n       if (v(A)) {\n           O.push(A)\n       }\n   }\n   })()'><i class=\"menu-item-icon fa fa-music fa-fw\"></i>High</a>\n</div>\n         <!-- end High一下 -->\n        {% endif %}```\n\n如果需要并排显示，像这样子：![mark](http://ofyfogrgx.bkt.clouddn.com/blog/20161205/154359849.png)\n修改文件：**\\themes\\source\\css\\_schemes\\Pisces（主题风格对应的文件夹）\\_sidebar.styl**\n找到这样一段，把**display: block;**改为**display: inline-block;**\n```\n.feed-link a {\n  display: inline-block;   //并行显示，block则为分行显示\n  color: $orange;\n  border: none;```\n\n---\n### 给 Github 添加 README\n默认情况下，Github中每一个项目，我们希望有一份**README.md**的文件来作为项目的说明，但是我们在项目根目录下的`blog\\source`目录下创建一份**README.md**文件，写好说明介绍，部署的时候，这个**README.md**会被hexo解析掉，而不会被解析到Github中去的。\n正确的解决方法其实很简单：\n** 把`README.md`文件的后缀名改成\"MDOWN\"然后扔到`blog\\source`文件夹下即可，这样hexo不会解析，Github也会将其作为MD文件解析。 **\n\n或者你还可以在站点配置文件中修改，以禁止编译文件。\n```\nskip_render:\n    - README.md\n```\n\n---\n### 加入左上角「fork me on github」\n[github官方教程](https://github.com/blog/273-github-ribbons)\n\n---\n### 给 Blog 添加 LICENSE\n修改主题配置文件中的 160 行左右：\n\n```\n# Creative Commons 4.0 International License.\n# http://creativecommons.org/\n# Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero\ncreative_commons: by-nc-sa\n#creative_commons:```\n\n取消第 4 行的注释，然后选择你想使用的 LICENSE 即可，可选项参照第 3 行。\n\n---\n### 错误信息\n\n**LF will be replaced**\nWindows 提交命令的时候出现 **warning: LF will be replaced by CRLF in XXXXXXXXXXXXXX** 的警告。输入命令：\n```\ngit config --global core.autocrlf false```\n\n---\n\n# 部署\n\n```\ncd your_site/\ntouch Staticfile  #创建静态文件标识，用于Github识别，名字必须是Staticfile\nhexo clean   #清除以前生成的旧文件\nhexo g       #生成新的站点文件\nhexo d       #部署到Github上```\n可参考：http://shomy.top/2016/03/03/hexo-in-coding-github/\n部署完成打开网址就能看到效果了。\n\nHexo的部署只会把生成的文件上传到仓库中，本地的**设置，主题，*.md文件**等等都不会上传，换一台电脑就没法干活了，一旦删除，那基本上所有的努力都白费了，这里介绍2种备份方法：\n* 1.新建一个仓库专门用来存放这些文件（最安全最方便的办法）\n* 2.和发布的网站使用同一个仓库，master用来存放这些文件，新建分支来发布网站（注意pages服务绑定该分支，不要合并分支，一旦合并就全部混乱了）\n两种方法都要在网站根目录设定好远程端仓库：`git add remote XXXX`\n每次发布完网页，就顺手执行以下代码，把文档也同步到仓库中。\n```\ngit add .\ngit commit -m \"xxx\"\ngit push\n```\n\n---\n\n# 绑定域名\n原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。\n\n* 1· 在你的项目下新建一个**CNAME**文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是** www.leolan.top**和** leolan.top**（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送**CNAME文件**到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在**CNAME文件**里绑定两个，在Pages页面也绑定两个。\n* 2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 `username.github.io. `，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。\n![](http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png)\n过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的**CNAME**文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。\n\n---\n","slug":"环境搭建-2016-11-08-用Hexo搭建博客","published":1,"updated":"2016-12-12T03:52:22.394Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlrsjs10096d8pkgznwd049","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"安装Hexo\"><a href=\"#安装Hexo\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h1><p>Hexo是用node-js写的，hexo生成静态页面的速度要比较快，hexo是本地生成html再上传。<br>官网：<a href=\"https://hexo.io/zh-cn/docs/\" target=\"_blank\" rel=\"external\">https://hexo.io/zh-cn/docs/</a></p>\n<h2 id=\"安装Node-js\"><a href=\"#安装Node-js\" class=\"headerlink\" title=\"安装Node.js\"></a>安装Node.js</h2><p>官网下载对应平台安装包安装：<a href=\"https://nodejs.org\" target=\"_blank\" rel=\"external\">https://nodejs.org</a><br>详见：<a href=\"http://leolan.top/2016/11/02/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-11-02-Node-js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/\" target=\"_blank\" rel=\"external\">Node.js开发环境搭建</a></p>\n<h2 id=\"安装Hexo-1\"><a href=\"#安装Hexo-1\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h2><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install </span>-g hexo-cli  <span class=\"comment\">#Mac下西安**sudo -i**切换到root权限。</span></div><div class=\"line\">hexo init <span class=\"keyword\">blog </span>          <span class=\"comment\">#blog文件夹要先建好，这一步自动生成网站。</span></div><div class=\"line\">cd <span class=\"keyword\">blog</span></div><div class=\"line\">npm <span class=\"keyword\">install </span>             <span class=\"comment\">#安装依赖的插件。</span></div><div class=\"line\">hexo server              <span class=\"comment\">#运行服务</span></div></pre></td></tr></table></figure>\n<p>这时可以在浏览器打开网页。<code>hexo server</code>的简化命令为<code>hexo s</code>；指定端口：<code>-p xxxx</code><br>和jekyll一样是通过修改<strong>_config.yml</strong>文件来配置站点信息的。（在Hexo中，根目录下的<strong>_config.yml</strong>文件是用来配置网站信息的；主题目录下的<strong>_config.yml</strong>文件是用来配置文章主题，页面等等的）</p>\n<p>默认的目录结构如下：</p>\n<figure class=\"highlight haxe\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">├── .deploy       <span class=\"meta\">#执行hexo deploy命令部署到GitHub上的内容目录</span></div><div class=\"line\">├── <span class=\"keyword\">public</span>        <span class=\"meta\">#执行hexo generate命令，输出的静态网页内容目录</span></div><div class=\"line\">├── scaffolds     <span class=\"meta\">#layout模板文件目录，其中的md文件可以添加编辑</span></div><div class=\"line\">├── scripts       <span class=\"meta\">#扩展脚本目录，这里可以自定义一些javascript脚本</span></div><div class=\"line\">├── source        <span class=\"meta\">#文章源码目录，该目录下的markdown和html文件均会被hexo处理。404文件，CNAME文件等都应该放这里。</span></div><div class=\"line\">| ├── _drafts     <span class=\"meta\">#草稿文章</span></div><div class=\"line\">| └── _posts      <span class=\"meta\">#发布的文章</span></div><div class=\"line\">├── themes        <span class=\"meta\">#主题文件目录</span></div><div class=\"line\">├── _config.yml   <span class=\"meta\">#全局配置文件，大多数的设置都在这里</span></div><div class=\"line\">└── <span class=\"keyword\">package</span>.json  <span class=\"meta\">#应用程序数据，指明hexo的版本等信息。在push到github时提示*.json错误，删掉这个文件或删掉db.json就行。</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"配置优化、定制站点\"><a href=\"#配置优化、定制站点\" class=\"headerlink\" title=\"配置优化、定制站点\"></a>配置优化、定制站点</h1><p>Next官方设置说明：<a href=\"http://theme-next.iissnan.com/getting-started.html\" target=\"_blank\" rel=\"external\">http://theme-next.iissnan.com/getting-started.html</a></p>\n<h2 id=\"站点配置\"><a href=\"#站点配置\" class=\"headerlink\" title=\"站点配置\"></a>站点配置</h2><p>以下是我的配置文件：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Hexo Configuration</span></div><div class=\"line\"><span class=\"comment\">## Docs: https://hexo.io/docs/configuration.html</span></div><div class=\"line\"><span class=\"comment\">## Source: https://github.com/hexojs/hexo/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Site</span></div><div class=\"line\"><span class=\"attr\">title:</span> Leo Lan的博客</div><div class=\"line\"><span class=\"attr\">subtitle:</span>  有时候正是不报期望的人做出了人们不敢期望之事！</div><div class=\"line\"><span class=\"attr\">description:</span> Better late than never</div><div class=\"line\"><span class=\"attr\">author:</span> LeoLan</div><div class=\"line\"><span class=\"attr\">language:</span> zh-Hans</div><div class=\"line\"><span class=\"attr\">timezone:</span> Asia/Shanghai</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># URL</span></div><div class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></div><div class=\"line\"><span class=\"attr\">url:</span> https://www.leolan.top</div><div class=\"line\"><span class=\"attr\">coding_url:</span> https://www.leolan.top</div><div class=\"line\"><span class=\"attr\">root:</span> /</div><div class=\"line\"><span class=\"attr\">permalink:</span> posts/:abbrlink/</div><div class=\"line\"><span class=\"attr\">permalink_defaults:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Directory</span></div><div class=\"line\"><span class=\"attr\">source_dir:</span> source</div><div class=\"line\"><span class=\"attr\">public_dir:</span> public</div><div class=\"line\"><span class=\"attr\">tag_dir:</span> tags</div><div class=\"line\"><span class=\"attr\">archive_dir:</span> archives</div><div class=\"line\"><span class=\"attr\">category_dir:</span> categories</div><div class=\"line\"><span class=\"attr\">code_dir:</span> downloads/code</div><div class=\"line\"><span class=\"attr\">i18n_dir:</span> :lang</div><div class=\"line\"><span class=\"comment\">#禁止编译README.md文件，也可以在文件中增加yml文件头layout: false，---结尾</span></div><div class=\"line\"><span class=\"attr\">skip_render:</span></div><div class=\"line\"><span class=\"bullet\">    -</span> baidu_verify_dc4dBM4StW.html</div><div class=\"line\"><span class=\"bullet\">    -</span> googled7e43f3624e0f703.html</div><div class=\"line\"><span class=\"bullet\">    -</span> CNAME</div><div class=\"line\"><span class=\"bullet\">    -</span> README.md</div><div class=\"line\"><span class=\"bullet\">    -</span> .nojekyll</div><div class=\"line\"><span class=\"bullet\">    -</span> Staticfile</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 假设你的Source文件夹里面有个Demo目录，要忽略Demo目录下的所有html页面，具体如下：</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># skip_render: Demo/*.html</span></div><div class=\"line\"><span class=\"comment\"># 文件匹配是基于正则匹配的，更复杂的情况如下</span></div><div class=\"line\"><span class=\"comment\"># 1.单个文件夹下全部文件：skip_render: demo/*</span></div><div class=\"line\"><span class=\"comment\"># 2.单个文件夹下指定类型文件：skip_render: demo/*.html</span></div><div class=\"line\"><span class=\"comment\"># 3.单个文件夹下全部文件以及子目录:skip_render: demo/**</span></div><div class=\"line\"><span class=\"comment\"># 4.多个文件夹以及各种复杂情况：</span></div><div class=\"line\"><span class=\"comment\"># skip_render:</span></div><div class=\"line\"><span class=\"comment\">#     - 'demo/*.html'</span></div><div class=\"line\"><span class=\"comment\">#     - 'demo/**'</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#强制包含.nojekyll文件（放在source下），这样hexo g时，.开头的文件具不会被忽略，适用于5.0以下版本的next主题（github屏蔽了一些文件夹）</span></div><div class=\"line\"><span class=\"attr\">include:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> .nojekyll</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># abbrlink config 生成文章永久链接（利于SEO）需要安装插件</span></div><div class=\"line\"><span class=\"attr\">abbrlink:</span></div><div class=\"line\"><span class=\"attr\">  alg:</span> crc16  <span class=\"comment\"># 算法：crc16(default) and crc32 </span></div><div class=\"line\"><span class=\"attr\">  rep:</span> dec    <span class=\"comment\"># 进制：dec(default) and hex</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">baidu_url_submit:</span>  <span class=\"comment\">#百度链接推送，推送刚刚生成的永久链接</span></div><div class=\"line\"><span class=\"attr\">  count:</span> <span class=\"number\">5</span> <span class=\"comment\">## 比如3，代表提交最新的三个链接</span></div><div class=\"line\"><span class=\"attr\">  host:</span> www.leolan.top <span class=\"comment\">## 在百度站长平台中注册的域名</span></div><div class=\"line\"><span class=\"attr\">  token:</span> kZ5xboXBFPxQ0g7N <span class=\"comment\">## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span></div><div class=\"line\"><span class=\"attr\">  path:</span> /baidu_urls.txt <span class=\"comment\">## 文本文档的地址， 新链接会保存在此文本文档里</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Writing  官网：https://hexo.io/zh-cn/docs/writing.html</span></div><div class=\"line\"><span class=\"attr\">new_post_name:</span> :year-:month-:day-:title.md <span class=\"comment\"># File name of new posts</span></div><div class=\"line\"><span class=\"attr\">default_layout:</span> post</div><div class=\"line\"><span class=\"attr\">titlecase:</span> <span class=\"literal\">false</span> <span class=\"comment\"># Transform title into titlecase</span></div><div class=\"line\"><span class=\"attr\">external_link:</span> <span class=\"literal\">true</span> <span class=\"comment\"># Open external links in new tab</span></div><div class=\"line\"><span class=\"attr\">filename_case:</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"attr\">render_drafts:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">false</span>   <span class=\"comment\">#新建文章时自动生成本地存放图片等资源的文件夹</span></div><div class=\"line\"><span class=\"attr\">relative_link:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">future:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">highlight:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  line_number:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  auto_detect:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  tab_replace:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Category &amp; Tag</span></div><div class=\"line\"><span class=\"attr\">default_category:</span> uncategorized</div><div class=\"line\"><span class=\"attr\">category_map:</span></div><div class=\"line\"><span class=\"attr\">tag_map:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Date / Time format</span></div><div class=\"line\"><span class=\"comment\">## Hexo uses Moment.js to parse and display date</span></div><div class=\"line\"><span class=\"comment\">## You can customize the date format as defined in</span></div><div class=\"line\"><span class=\"comment\">## http://momentjs.com/docs/#/displaying/format/</span></div><div class=\"line\"><span class=\"attr\">date_format:</span> YYYY-MM-DD</div><div class=\"line\"><span class=\"attr\">time_format:</span> HH:mm:ss</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Pagination  单独页面文章数目，需要安装以下3个插件</span></div><div class=\"line\"><span class=\"comment\">#npm install --save hexo-generator-index</span></div><div class=\"line\"><span class=\"comment\">#npm install --save hexo-generator-archive</span></div><div class=\"line\"><span class=\"comment\">#npm install --save hexo-generator-tag</span></div><div class=\"line\"><span class=\"comment\">## Set per_page to 0 to disable pagination</span></div><div class=\"line\"><span class=\"attr\">index_generator:</span></div><div class=\"line\"><span class=\"attr\">  per_page:</span> <span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">archive_generator:</span></div><div class=\"line\"><span class=\"attr\">  per_page:</span> <span class=\"number\">20</span></div><div class=\"line\"><span class=\"attr\">  yearly:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  monthly:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">tag_generator:</span></div><div class=\"line\"><span class=\"attr\">  per_page:</span> <span class=\"number\">10</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">pagination_dir:</span> page</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Extensions 主题选择</span></div><div class=\"line\"><span class=\"comment\">## Plugins: https://hexo.io/plugins/</span></div><div class=\"line\"><span class=\"comment\">## Themes: https://hexo.io/themes/</span></div><div class=\"line\"><span class=\"attr\">theme:</span> next5<span class=\"number\">.1</span></div><div class=\"line\"><span class=\"comment\">#theme: next0.4</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Deployment 自动部署到仓库</span></div><div class=\"line\"><span class=\"comment\">## 官方文档Docs: https://hexo.io/docs/deployment.html   有部署到各种服务器的方法</span></div><div class=\"line\"><span class=\"comment\">## 参考：http://www.lxway.com/240950852.htm</span></div><div class=\"line\"><span class=\"comment\">#不管是github还是coding，type都填写git</span></div><div class=\"line\"><span class=\"attr\">deploy:</span></div><div class=\"line\"><span class=\"attr\">- type:</span> git</div><div class=\"line\"><span class=\"attr\">  repo:</span> git@git.coding.net:leolan/blog.git,master</div><div class=\"line\"><span class=\"attr\">  message:</span> <span class=\"string\">'LeoLan updated：<span class=\"template-variable\">&#123;&#123;now(\"YYYY-MM-DD HH:mm:ss\")&#125;&#125;</span>'</span>  <span class=\"comment\">#这个是commit的说明，因为是发布站点，方便看到发布时间。</span></div><div class=\"line\"><span class=\"attr\">- type:</span> git</div><div class=\"line\"><span class=\"attr\">  repo:</span> git@github.com:MyLeoLan/blog.git,master</div><div class=\"line\"><span class=\"attr\">  message:</span> <span class=\"string\">'LeoLan updated：<span class=\"template-variable\">&#123;&#123;now(\"YYYY-MM-DD HH:mm:ss\")&#125;&#125;</span>'</span></div><div class=\"line\"><span class=\"comment\">#deploy:</span></div><div class=\"line\"><span class=\"comment\">#- type: git</span></div><div class=\"line\"><span class=\"comment\">#  repo:</span></div><div class=\"line\"><span class=\"comment\">#- type: heroku（另一种云平台）</span></div><div class=\"line\"><span class=\"comment\">#  repo:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Disqus #Disqus评论系统</span></div><div class=\"line\"><span class=\"attr\">disqus_shortname:</span> leolan</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#plugins: #插件，例如生成 RSS 和站点地图的</span></div><div class=\"line\"><span class=\"comment\">#hexo-generator-sitemap</span></div><div class=\"line\"><span class=\"comment\">#- hexo-generator-baidu-sitemap</span></div><div class=\"line\"><span class=\"attr\">plugins:</span></div><div class=\"line\">  hexo-generator-feed</div><div class=\"line\">  hexo-generator-baidu-sitemap</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">sitemap:</span></div><div class=\"line\"><span class=\"attr\">  path:</span> sitemap.xml    </div><div class=\"line\"><span class=\"attr\">baidusitemap:</span></div><div class=\"line\"><span class=\"attr\">  path:</span> baidusitemap.xml</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Social links 社交链接</span></div><div class=\"line\"><span class=\"attr\">social:</span></div><div class=\"line\"><span class=\"attr\">  GitHub:</span> https://github.com/myleolan</div><div class=\"line\"><span class=\"attr\">  Coding:</span> https://coding.net/u/leolan</div><div class=\"line\"><span class=\"attr\">  CSDN:</span> http://blog.csdn.net/lan842632</div><div class=\"line\"><span class=\"attr\">  OSchina:</span> https://my.oschina.net/leolan/blog</div><div class=\"line\">  <span class=\"comment\">#Twitter: https://twitter.com/lmintlcx</span></div><div class=\"line\">  <span class=\"comment\">#Zhihu: http://www.zhihu.com/people/lmintlcx</span></div><div class=\"line\">  <span class=\"comment\">#Douban: http://www.douban.com/people/lmintlcx</span></div><div class=\"line\">  <span class=\"comment\">#Weibo: http://weibo.com/u/3233729080</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">duoshuo_shortname:</span> leolan</div><div class=\"line\"><span class=\"comment\"># 多说热评文章 true 或者 false</span></div><div class=\"line\"><span class=\"attr\">duoshuo_hotartical:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"comment\"># 多说分享服务</span></div><div class=\"line\"><span class=\"attr\">duoshuo_share:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"comment\"># 百度分享服务</span></div><div class=\"line\"><span class=\"attr\">baidushare:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#打赏功能</span></div><div class=\"line\"><span class=\"attr\">reward_comment:</span> 您的支持将鼓励我继续创作,非常感谢！</div><div class=\"line\"><span class=\"attr\">alipay:</span> http://ofyfogrgx.bkt.clouddn.com//pay/alipay.jpg</div><div class=\"line\"><span class=\"attr\">wechatpay:</span> http://ofyfogrgx.bkt.clouddn.com//pay/weixinpay.png</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#站点建立时间</span></div><div class=\"line\"><span class=\"attr\">since:</span> <span class=\"number\">2016</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#百度分析</span></div><div class=\"line\"><span class=\"attr\">baidu_analytics:</span> dc0e85252eeff3a87aa87f35d92a8d33</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#本地搜索</span></div><div class=\"line\"><span class=\"attr\">search:</span></div><div class=\"line\"><span class=\"attr\">  path:</span> search.xml</div><div class=\"line\"><span class=\"attr\">  field:</span> post</div><div class=\"line\"><span class=\"attr\">  format:</span> html</div><div class=\"line\"><span class=\"attr\">  limit:</span> <span class=\"number\">10000</span></div></pre></td></tr></table></figure>\n<h2 id=\"主题配置\"><a href=\"#主题配置\" class=\"headerlink\" title=\"主题配置\"></a>主题配置</h2><p>推荐Next主题，简单简洁，官网：<a href=\"http://theme-next.iissnan.com/\" target=\"_blank\" rel=\"external\">http://theme-next.iissnan.com/</a><br>安装最新版：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> your-hexo-site</div><div class=\"line\">git clone http<span class=\"variable\">s:</span>//github.<span class=\"keyword\">com</span>/iissnan/hexo-theme-<span class=\"keyword\">next</span> themes/<span class=\"keyword\">next</span></div></pre></td></tr></table></figure></p>\n<p>在主题目录下可以看到next文件夹，修改<strong>站点配置文件_config.yml</strong>中的<code>theme: next</code><br><code>hexo clean &amp;&amp; hexo s</code>就可以看到新主题生效啦！<br>接下来修改<strong>主题配置文件_config.yml</strong>，以下是我的配置。<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div><div class=\"line\">282</div><div class=\"line\">283</div><div class=\"line\">284</div><div class=\"line\">285</div><div class=\"line\">286</div><div class=\"line\">287</div><div class=\"line\">288</div><div class=\"line\">289</div><div class=\"line\">290</div><div class=\"line\">291</div><div class=\"line\">292</div><div class=\"line\">293</div><div class=\"line\">294</div><div class=\"line\">295</div><div class=\"line\">296</div><div class=\"line\">297</div><div class=\"line\">298</div><div class=\"line\">299</div><div class=\"line\">300</div><div class=\"line\">301</div><div class=\"line\">302</div><div class=\"line\">303</div><div class=\"line\">304</div><div class=\"line\">305</div><div class=\"line\">306</div><div class=\"line\">307</div><div class=\"line\">308</div><div class=\"line\">309</div><div class=\"line\">310</div><div class=\"line\">311</div><div class=\"line\">312</div><div class=\"line\">313</div><div class=\"line\">314</div><div class=\"line\">315</div><div class=\"line\">316</div><div class=\"line\">317</div><div class=\"line\">318</div><div class=\"line\">319</div><div class=\"line\">320</div><div class=\"line\">321</div><div class=\"line\">322</div><div class=\"line\">323</div><div class=\"line\">324</div><div class=\"line\">325</div><div class=\"line\">326</div><div class=\"line\">327</div><div class=\"line\">328</div><div class=\"line\">329</div><div class=\"line\">330</div><div class=\"line\">331</div><div class=\"line\">332</div><div class=\"line\">333</div><div class=\"line\">334</div><div class=\"line\">335</div><div class=\"line\">336</div><div class=\"line\">337</div><div class=\"line\">338</div><div class=\"line\">339</div><div class=\"line\">340</div><div class=\"line\">341</div><div class=\"line\">342</div><div class=\"line\">343</div><div class=\"line\">344</div><div class=\"line\">345</div><div class=\"line\">346</div><div class=\"line\">347</div><div class=\"line\">348</div><div class=\"line\">349</div><div class=\"line\">350</div><div class=\"line\">351</div><div class=\"line\">352</div><div class=\"line\">353</div><div class=\"line\">354</div><div class=\"line\">355</div><div class=\"line\">356</div><div class=\"line\">357</div><div class=\"line\">358</div><div class=\"line\">359</div><div class=\"line\">360</div><div class=\"line\">361</div><div class=\"line\">362</div><div class=\"line\">363</div><div class=\"line\">364</div><div class=\"line\">365</div><div class=\"line\">366</div><div class=\"line\">367</div><div class=\"line\">368</div><div class=\"line\">369</div><div class=\"line\">370</div><div class=\"line\">371</div><div class=\"line\">372</div><div class=\"line\">373</div><div class=\"line\">374</div><div class=\"line\">375</div><div class=\"line\">376</div><div class=\"line\">377</div><div class=\"line\">378</div><div class=\"line\">379</div><div class=\"line\">380</div><div class=\"line\">381</div><div class=\"line\">382</div><div class=\"line\">383</div><div class=\"line\">384</div><div class=\"line\">385</div><div class=\"line\">386</div><div class=\"line\">387</div><div class=\"line\">388</div><div class=\"line\">389</div><div class=\"line\">390</div><div class=\"line\">391</div><div class=\"line\">392</div><div class=\"line\">393</div><div class=\"line\">394</div><div class=\"line\">395</div><div class=\"line\">396</div><div class=\"line\">397</div><div class=\"line\">398</div><div class=\"line\">399</div><div class=\"line\">400</div><div class=\"line\">401</div><div class=\"line\">402</div><div class=\"line\">403</div><div class=\"line\">404</div><div class=\"line\">405</div><div class=\"line\">406</div><div class=\"line\">407</div><div class=\"line\">408</div><div class=\"line\">409</div><div class=\"line\">410</div><div class=\"line\">411</div><div class=\"line\">412</div><div class=\"line\">413</div><div class=\"line\">414</div><div class=\"line\">415</div><div class=\"line\">416</div><div class=\"line\">417</div><div class=\"line\">418</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Site Information Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Put your favicon.ico into `hexo-site/source/` directory.</span></div><div class=\"line\"><span class=\"attr\">favicon:</span> /<span class=\"number\">200.</span>png</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Set default keywords (Use a comma to separate) 站点关键词，利于SEO</span></div><div class=\"line\"><span class=\"attr\">keywords:</span> <span class=\"string\">\"Hexo, NexT, Leo Lan, leolan, Blog, myleolan, lan, coding\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Set rss to false to disable feed link.</span></div><div class=\"line\"><span class=\"comment\"># Leave rss as empty to use site's feed link.</span></div><div class=\"line\"><span class=\"comment\"># Set rss to specific value if you have burned your feed already.</span></div><div class=\"line\"><span class=\"attr\">rss:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Specify the date when the site was setup</span></div><div class=\"line\"><span class=\"comment\">#since: 2015</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.</span></div><div class=\"line\"><span class=\"comment\"># See: https://support.google.com/webmasters/answer/139066</span></div><div class=\"line\"><span class=\"comment\"># Tips: Before you open this tag, remeber set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )</span></div><div class=\"line\"><span class=\"attr\">canonical:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Menu Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -&gt; archives)</span></div><div class=\"line\"><span class=\"attr\">menu:</span></div><div class=\"line\"><span class=\"attr\">  home:</span> /</div><div class=\"line\"><span class=\"attr\">  categories:</span> /categories</div><div class=\"line\"><span class=\"attr\">  tags:</span> /tags</div><div class=\"line\"><span class=\"attr\">  archives:</span> /archives</div><div class=\"line\"><span class=\"attr\">  about:</span> /about</div><div class=\"line\"><span class=\"attr\">  guestbook:</span> /guestbook</div><div class=\"line\"> <span class=\"comment\"># schedule: /schedule</span></div><div class=\"line\">  <span class=\"comment\">#commonweal: /404.html</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Enable/Disable menu icons.  菜单图标</span></div><div class=\"line\"><span class=\"comment\"># Icon Mapping:</span></div><div class=\"line\"><span class=\"comment\">#   Map a menu item to a specific FontAwesome icon name.</span></div><div class=\"line\"><span class=\"comment\">#   Key is the name of menu item and value is the name of FontAwsome icon. Key is case-senstive.</span></div><div class=\"line\"><span class=\"comment\">#   When an question mask icon presenting up means that the item has no mapping icon.</span></div><div class=\"line\"><span class=\"attr\">menu_icons:</span>   <span class=\"comment\">#http://fontawesome.io/icons/</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"comment\">#KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome</span></div><div class=\"line\"><span class=\"attr\">  home:</span> home</div><div class=\"line\"><span class=\"attr\">  about:</span> user</div><div class=\"line\"><span class=\"attr\">  categories:</span> th</div><div class=\"line\"><span class=\"attr\">  schedule:</span> calendar</div><div class=\"line\"><span class=\"attr\">  tags:</span> tags</div><div class=\"line\"><span class=\"attr\">  archives:</span> archive</div><div class=\"line\"><span class=\"attr\">  commonweal:</span> heartbeat</div><div class=\"line\"><span class=\"attr\">  guestbook:</span> commenting</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Scheme Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Schemes</span></div><div class=\"line\"><span class=\"comment\">#scheme: Muse</span></div><div class=\"line\"><span class=\"comment\">#scheme: Mist</span></div><div class=\"line\"><span class=\"attr\">scheme:</span> Pisces</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Font Settings</span></div><div class=\"line\"><span class=\"comment\"># - Find fonts on Google Fonts (https://www.google.com/fonts)</span></div><div class=\"line\"><span class=\"comment\"># - All fonts set here will have the following styles:</span></div><div class=\"line\"><span class=\"comment\">#     light, light italic, normal, normal intalic, bold, bold italic</span></div><div class=\"line\"><span class=\"comment\"># - Be aware that setting too much fonts will cause site running slowly</span></div><div class=\"line\"><span class=\"comment\"># - Introduce in 5.0.1</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"attr\">font:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Uri of fonts host. E.g. //fonts.googleapis.com (Default) 慢的话搜索fonts.googleapis.com即可找到替换地址</span></div><div class=\"line\"><span class=\"attr\">  host:</span> fonts.css.network</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Global font settings used on &lt;body&gt; element.</span></div><div class=\"line\"><span class=\"attr\">  global:</span></div><div class=\"line\">    <span class=\"comment\"># external: true will load this font family from host.</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Lato</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Headlines (h1, h2, h3, h4, h5, h6)</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\"><span class=\"attr\">  headings:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for posts</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\"><span class=\"attr\">  posts:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Logo</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># The `size` option use `px` as unit</span></div><div class=\"line\"><span class=\"attr\">  logo:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"><span class=\"attr\">    size:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for &lt;code&gt; and code blocks.</span></div><div class=\"line\"><span class=\"attr\">  codes:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"><span class=\"attr\">    size:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Sidebar Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Social Links 社交链接</span></div><div class=\"line\"><span class=\"comment\"># Key is the link label showing to end users.</span></div><div class=\"line\"><span class=\"comment\"># Value is the target link (E.g. GitHub: https://github.com/iissnan)</span></div><div class=\"line\"><span class=\"comment\">#social:</span></div><div class=\"line\"><span class=\"comment\">#LinkLabel: Link</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Social Links Icons</span></div><div class=\"line\"><span class=\"comment\"># Icon Mapping:</span></div><div class=\"line\"><span class=\"comment\">#   Map a menu item to a specific FontAwesome icon name.</span></div><div class=\"line\"><span class=\"comment\">#   Key is the name of the item and value is the name of FontAwsome icon. Key is case-senstive.</span></div><div class=\"line\"><span class=\"comment\">#   When an globe mask icon presenting up means that the item has no mapping icon.</span></div><div class=\"line\"><span class=\"attr\">social_icons:</span>    <span class=\"comment\">#这是社交链接图标，打开网站找到图标，直接引用名字就行，next已引用了该库http://fontawesome.io/icons/</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"comment\"># Icon Mappings.</span></div><div class=\"line\">  <span class=\"comment\"># KeyMapsToSocalItemKey: NameOfTheIconFromFontAwesome</span></div><div class=\"line\"><span class=\"attr\">  GitHub:</span> github</div><div class=\"line\"><span class=\"attr\">  Coding:</span> github-alt</div><div class=\"line\"><span class=\"attr\">  Cloud:</span> cloud</div><div class=\"line\"><span class=\"attr\">  OSchina:</span> git-square</div><div class=\"line\">  <span class=\"comment\">#Twitter: twitter</span></div><div class=\"line\">  <span class=\"comment\">#Weibo: weibo</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Sidebar Avatar</span></div><div class=\"line\"><span class=\"comment\"># in theme directory(source/images): /images/avatar.jpg</span></div><div class=\"line\"><span class=\"comment\"># in site  directory(source/uploads): /uploads/avatar.jpg</span></div><div class=\"line\"><span class=\"attr\">avatar:</span> /images/avatar.jpg    <span class=\"comment\">#博客侧边栏显示的头像</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Table Of Contents in the Sidebar</span></div><div class=\"line\"><span class=\"attr\">toc:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Automatically add list number to toc.</span></div><div class=\"line\"><span class=\"attr\">  number:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Creative Commons 4.0 International License.</span></div><div class=\"line\"><span class=\"comment\"># http://creativecommons.org/</span></div><div class=\"line\"><span class=\"comment\"># Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></div><div class=\"line\"><span class=\"comment\">#creative_commons: by-nc-sa</span></div><div class=\"line\"><span class=\"comment\">#creative_commons:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">sidebar:</span></div><div class=\"line\">  <span class=\"comment\"># Sidebar Position, available value: left | right</span></div><div class=\"line\"><span class=\"attr\">  position:</span> left</div><div class=\"line\">  <span class=\"comment\">#position: right</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Sidebar Display, available value: 侧边栏显示</span></div><div class=\"line\">  <span class=\"comment\">#  - post    expand on posts automatically. Default.</span></div><div class=\"line\">  <span class=\"comment\">#  - always  expand for all pages automatically</span></div><div class=\"line\">  <span class=\"comment\">#  - hide    expand only when click on the sidebar toggle icon.</span></div><div class=\"line\">  <span class=\"comment\">#  - remove  Totally remove sidebar including sidebar toggler.</span></div><div class=\"line\"><span class=\"attr\">  display:</span> post</div><div class=\"line\">  <span class=\"comment\">#display: always</span></div><div class=\"line\">  <span class=\"comment\">#display: hide</span></div><div class=\"line\">  <span class=\"comment\">#display: remove</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Blogrolls 友情链接</span></div><div class=\"line\"><span class=\"attr\">links_title:</span> 友链</div><div class=\"line\"><span class=\"comment\">#links_layout: block</span></div><div class=\"line\"><span class=\"attr\">links_icon:</span> heartbeat</div><div class=\"line\"><span class=\"comment\">#links_layout: inline</span></div><div class=\"line\"><span class=\"attr\">links:</span></div><div class=\"line\">  Jerry Locke: https://jerry.hk/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Misc Theme Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Custom Logo.</span></div><div class=\"line\"><span class=\"comment\"># !!Only available for Default Scheme currently.</span></div><div class=\"line\"><span class=\"comment\"># Options:</span></div><div class=\"line\"><span class=\"comment\">#   enabled: [true/false] - Replace with specific image</span></div><div class=\"line\"><span class=\"comment\">#   image: url-of-image   - Images's url</span></div><div class=\"line\"><span class=\"attr\">custom_logo:</span></div><div class=\"line\"><span class=\"attr\">  enabled:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  image:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Code Highlight theme  代码高亮主题</span></div><div class=\"line\"><span class=\"comment\"># Available value:</span></div><div class=\"line\"><span class=\"comment\">#    normal | night | night eighties | night blue | night bright</span></div><div class=\"line\"><span class=\"comment\"># https://github.com/chriskempson/tomorrow-theme</span></div><div class=\"line\"><span class=\"attr\">highlight_theme:</span> night eighties</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Automatically scroll page to section which is under &lt;!-- more --&gt; mark.</span></div><div class=\"line\"><span class=\"attr\">scroll_to_more:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Automatically Excerpt. Not recommand.</span></div><div class=\"line\"><span class=\"comment\"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></div><div class=\"line\"><span class=\"attr\">auto_excerpt:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  length:</span> <span class=\"number\">150</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Wechat Subscriber 微信打赏</span></div><div class=\"line\"><span class=\"comment\">#wechat_subscriber:</span></div><div class=\"line\">  <span class=\"comment\">#enabled: true</span></div><div class=\"line\">  <span class=\"comment\">#qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg</span></div><div class=\"line\">  <span class=\"comment\">#description: ex. subscribe to my blog by scanning my public wechat account</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Third Party Services Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># MathJax Support 数学公式</span></div><div class=\"line\"><span class=\"attr\">mathjax:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  cdn:</span> //cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#各种第三方服务</span></div><div class=\"line\"><span class=\"comment\"># Swiftype Search API Key</span></div><div class=\"line\"><span class=\"comment\">#swiftype_key:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Baidu Analytics ID</span></div><div class=\"line\"><span class=\"comment\">#baidu_analytics:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Duoshuo ShortName</span></div><div class=\"line\"><span class=\"comment\">#duoshuo_shortname:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Disqus</span></div><div class=\"line\"><span class=\"comment\">#disqus_shortname:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Baidu Share</span></div><div class=\"line\"><span class=\"comment\"># Available value:</span></div><div class=\"line\"><span class=\"comment\">#    button | slide</span></div><div class=\"line\"><span class=\"comment\"># Warning: Baidu Share does not support https.</span></div><div class=\"line\"><span class=\"comment\">#baidushare:</span></div><div class=\"line\"><span class=\"comment\">##  type: button</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Share</span></div><div class=\"line\"><span class=\"attr\">jiathis:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"comment\"># Warning: JiaThis does not support https.</span></div><div class=\"line\"><span class=\"comment\">#add_this_id:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Share</span></div><div class=\"line\"><span class=\"attr\">duoshuo_share:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Google Webmaster tools verification setting</span></div><div class=\"line\"><span class=\"comment\"># See: https://www.google.com/webmasters/</span></div><div class=\"line\"><span class=\"comment\">#google_site_verification:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Google Analytics</span></div><div class=\"line\"><span class=\"comment\">#google_analytics:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># CNZZ count</span></div><div class=\"line\"><span class=\"comment\">#cnzz_siteid:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Make duoshuo show UA</span></div><div class=\"line\"><span class=\"comment\"># user_id must NOT be null when admin_enable is true!</span></div><div class=\"line\"><span class=\"comment\"># you can visit http://dev.duoshuo.com get duoshuo user id.</span></div><div class=\"line\"><span class=\"attr\">duoshuo_info:</span></div><div class=\"line\"><span class=\"attr\">  ua_enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  admin_enable:</span> ture</div><div class=\"line\"><span class=\"attr\">  user_id:</span> <span class=\"number\">6343395544286626562</span></div><div class=\"line\"><span class=\"attr\">  admin_nickname:</span> 博主</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Facebook SDK Support.</span></div><div class=\"line\"><span class=\"comment\"># https://github.com/iissnan/hexo-theme-next/pull/410</span></div><div class=\"line\"><span class=\"attr\">facebook_sdk:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  app_id:</span>       <span class=\"comment\">#&lt;app_id&gt;</span></div><div class=\"line\"><span class=\"attr\">  fb_admin:</span>     <span class=\"comment\">#&lt;user_id&gt;</span></div><div class=\"line\"><span class=\"attr\">  like_button:</span>  <span class=\"comment\">#true</span></div><div class=\"line\"><span class=\"attr\">  webmaster:</span>    <span class=\"comment\">#true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Facebook comments plugin</span></div><div class=\"line\"><span class=\"comment\"># This plugin depends on Facebook SDK.</span></div><div class=\"line\"><span class=\"comment\"># If facebook_sdk.enable is false, Facebook comments plugin is unavailable.</span></div><div class=\"line\"><span class=\"attr\">facebook_comments_plugin:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  num_of_posts:</span> <span class=\"number\">10</span>  <span class=\"comment\"># min posts num is 1</span></div><div class=\"line\"><span class=\"attr\">  width:</span> <span class=\"number\">100</span>%       <span class=\"comment\"># default width is 550px</span></div><div class=\"line\"><span class=\"attr\">  scheme:</span> light     <span class=\"comment\"># default scheme is light (light or dark)</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Show number of visitors to each article.</span></div><div class=\"line\"><span class=\"comment\"># You can visit https://leancloud.cn get AppID and AppKey.</span></div><div class=\"line\"><span class=\"attr\">leancloud_visitors:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  app_id:</span> zieuxKa4IjAP6VgxxvBe4vkj-gzGzoHsz</div><div class=\"line\"><span class=\"attr\">  app_key:</span> MHGN54IEuofFNV1AROiRkEoG</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Show PV/UV of the website/page with busuanzi. 不蒜子网站访问量统计</span></div><div class=\"line\"><span class=\"comment\"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></div><div class=\"line\"><span class=\"comment\">#busuanzi_count:</span></div><div class=\"line\">  <span class=\"comment\"># count values only if the other configs are false</span></div><div class=\"line\"><span class=\"comment\">#  enable: true</span></div><div class=\"line\">  <span class=\"comment\"># custom uv span for the whole site</span></div><div class=\"line\"><span class=\"comment\">#  site_uv: true</span></div><div class=\"line\"><span class=\"comment\">#  site_uv_header: 你是第</span></div><div class=\"line\"><span class=\"comment\">#  site_uv_footer: 个小伙伴</span></div><div class=\"line\">  <span class=\"comment\"># custom pv span for the whole site</span></div><div class=\"line\"><span class=\"comment\">#  site_pv: true</span></div><div class=\"line\"><span class=\"comment\">#  site_pv_header: 本站总浏览</span></div><div class=\"line\"><span class=\"comment\">#  site_pv_footer: 次</span></div><div class=\"line\">  <span class=\"comment\"># custom pv span for one page only</span></div><div class=\"line\"><span class=\"comment\">#  page_pv: true</span></div><div class=\"line\"><span class=\"comment\">#  page_pv_header: 热度</span></div><div class=\"line\"><span class=\"comment\">#  page_pv_footer: ℃</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Tencent analytics ID</span></div><div class=\"line\"><span class=\"comment\"># tencent_analytics:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO</span></div><div class=\"line\"><span class=\"attr\">baidu_push:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Google Calendar</span></div><div class=\"line\"><span class=\"comment\"># Share your recent schedule to others via calendar page</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"comment\"># API Documentation:</span></div><div class=\"line\"><span class=\"comment\"># https://developers.google.com/google-apps/calendar/v3/reference/events/list</span></div><div class=\"line\"><span class=\"attr\">calendar:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  calendar_id:</span> &lt;required<span class=\"string\">&gt;</span></div><div class=\"line\"><span class=\"attr\">  api_key:</span> &lt;required<span class=\"string\">&gt;</span></div><div class=\"line\"><span class=\"attr\">  orderBy:</span> startTime</div><div class=\"line\"><span class=\"attr\">  offsetMax:</span> <span class=\"number\">24</span></div><div class=\"line\"><span class=\"attr\">  offsetMin:</span> <span class=\"number\">4</span></div><div class=\"line\"><span class=\"attr\">  timeZone:</span></div><div class=\"line\"><span class=\"attr\">  showDeleted:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  singleEvents:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  maxResults:</span> <span class=\"number\">250</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#! ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\">#! DO NOT EDIT THE FOLLOWING SETTINGS</span></div><div class=\"line\"><span class=\"comment\">#! UNLESS YOU KNOW WHAT YOU ARE DOING</span></div><div class=\"line\"><span class=\"comment\">#! ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Motion</span></div><div class=\"line\"><span class=\"attr\">use_motion:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Fancybox</span></div><div class=\"line\"><span class=\"attr\">fancybox:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Script Vendors.</span></div><div class=\"line\"><span class=\"comment\"># Set a CDN address for the vendor you want to customize.</span></div><div class=\"line\"><span class=\"comment\"># For example</span></div><div class=\"line\"><span class=\"comment\">#    jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js</span></div><div class=\"line\"><span class=\"comment\"># Be aware that you should use the same version as internal ones to avoid potential problems.</span></div><div class=\"line\"><span class=\"comment\"># Please use the https protocol of CDN files when you enable https on your site.</span></div><div class=\"line\"><span class=\"attr\">vendors:</span></div><div class=\"line\">  <span class=\"comment\"># Internal path prefix. Please do not edit it. 5.0以下版本如果打开网页空白，就把vendors文件夹改名为lib,这里对应改。</span></div><div class=\"line\"><span class=\"attr\">  _internal:</span> lib</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 2.1.3</span></div><div class=\"line\"><span class=\"attr\">  jquery:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 2.1.5</span></div><div class=\"line\">  <span class=\"comment\"># See: http://fancyapps.com/fancybox/</span></div><div class=\"line\"><span class=\"attr\">  fancybox:</span></div><div class=\"line\"><span class=\"attr\">  fancybox_css:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.0.6</span></div><div class=\"line\">  <span class=\"comment\"># See: https://github.com/ftlabs/fastclick</span></div><div class=\"line\"><span class=\"attr\">  fastclick:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.9.7</span></div><div class=\"line\">  <span class=\"comment\"># See: https://github.com/tuupola/jquery_lazyload</span></div><div class=\"line\"><span class=\"attr\">  lazyload:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.2.1</span></div><div class=\"line\">  <span class=\"comment\"># See: http://VelocityJS.org</span></div><div class=\"line\"><span class=\"attr\">  velocity:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.2.1</span></div><div class=\"line\">  <span class=\"comment\"># See: http://VelocityJS.org</span></div><div class=\"line\"><span class=\"attr\">  velocity_ui:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 0.7.9</span></div><div class=\"line\">  <span class=\"comment\"># See: https://faisalman.github.io/ua-parser-js/</span></div><div class=\"line\"><span class=\"attr\">  ua_parser:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 4.4.0</span></div><div class=\"line\">  <span class=\"comment\"># See: http://fontawesome.io/</span></div><div class=\"line\"><span class=\"attr\">  fontawesome:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 多说热评文章 true 或者 false</span></div><div class=\"line\"><span class=\"attr\">duoshuo_hotartical:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Assets</span></div><div class=\"line\"><span class=\"attr\">css:</span> css</div><div class=\"line\"><span class=\"attr\">js:</span> js</div><div class=\"line\"><span class=\"attr\">images:</span> images</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Theme version</span></div><div class=\"line\"><span class=\"attr\">version:</span> <span class=\"number\">5.1</span><span class=\"number\">.0</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h2><p>hexo支持插件，可以直接通过命令行安装即可：<code>npm install **plugin-name** --save</code><br>更新插件<br><code>npm update</code><br>卸载插件<br><code>npm uninstall **plugin-name**</code><br>下面推荐几个常用的插件：<br>feed插件:<code>npm install hexo-generator-feed --save</code><br>站点地图:<code>npm install hexo-generator-sitemap --save</code><br>百度站点地图:<code>npm install hexo-generator-baidu-sitemap --save</code></p>\n<hr>\n<h2 id=\"自由定制\"><a href=\"#自由定制\" class=\"headerlink\" title=\"自由定制\"></a>自由定制</h2><h3 id=\"文章字数、阅读时长统计\"><a href=\"#文章字数、阅读时长统计\" class=\"headerlink\" title=\"文章字数、阅读时长统计\"></a>文章字数、阅读时长统计</h3><p>修改<strong>post.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\post.swig</p>\n<p>安装hexo-wordcount插件<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-wordcount <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>通过以上安装后，你可以在你的模板文件后者.md文件加入以下相关的标签实现本插件的功能<br><strong>字数统计</strong>:WordCount<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; wordcount(post.content) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div></pre></td></tr></table></figure></p>\n<p><strong>阅读时长预计</strong>:Min2Read<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; min2read(post.content) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div></pre></td></tr></table></figure></p>\n<p><strong>总字数统计</strong>: TotalCount<br><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;span <span class=\"keyword\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;&#123;&#123; totalcount(site, <span class=\"string\">'0,0.0a'</span>) &#125;&#125;&lt;/span&gt;</div></pre></td></tr></table></figure></p>\n<p>插入的代码以下：<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> not is_index and theme.facebook_sdk.enable and theme.facebook_sdk.like_button %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">            &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fb-like\"</span> <span class=\"attr\">data-layout</span>=<span class=\"string\">\"button_count\"</span> <span class=\"attr\">data-share</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"comment\">&lt;!--从这里插入代码，上边是Facebook的代码--&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--leancloud文章阅读量统计（主题默认已经添加）参考：http://www.joryhe.com/2016-05-29-how_to_create_leancloud_read_Counter.html--&gt;</span></div><div class=\"line\">          <span class=\"comment\">&#123;# LeanCould PageView #&#125;</span><span class=\"xml\"></span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.leancloud_visitors.enable %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"</span></span><span class=\"template-variable\">&#123;&#123; url_for(post.path) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"leancloud_visitors\"</span> <span class=\"attr\">data-flag-title</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; post.title &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span>&gt;</span></span></div><div class=\"line\">               &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-icon\"</span>&gt;</span></div><div class=\"line\">                 <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-eye\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></div><div class=\"line\">               <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-text\"</span>&gt;</span><span class=\"template-variable\">&#123;&#123;__('post.visitors')&#125;&#125;</span><span class=\"xml\"> <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div><div class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"leancloud-visitors-count\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"comment\">&lt;!--字数、阅读时长统计--&gt;</span></div><div class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-time\"</span>&gt;</span></div><div class=\"line\">     &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-icon\"</span>&gt;</span></div><div class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-calendar-o\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-text\"</span>&gt;</span>字数统计:<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span><span class=\"template-variable\">&#123;&#123; wordcount(post.content) &#125;&#125;</span><span class=\"xml\">(字)<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>          </span></div><div class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-time\"</span>&gt;</span></div><div class=\"line\">\t   &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-icon\"</span>&gt;</span></div><div class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-calendar-o\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-text\"</span>&gt;</span>阅读时长:<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span><span class=\"template-variable\">&#123;&#123; min2read(post.content) &#125;&#125;</span><span class=\"xml\">(分)<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>         </span></div><div class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--不蒜子网站访问量统计（主题默认已经添加），如果出现排班错位请忽略，下面用官网的方法实现--&gt;</span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> not is_index and theme.busuanzi_count.enable and theme.busuanzi_count.page_pv %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">              &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page-pv\"</span>&gt;</span><span class=\"template-variable\">&#123;&#123; theme.busuanzi_count.page_pv_header &#125;&#125;</span><span class=\"xml\"></span></div><div class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"busuanzi-value\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_page_pv\"</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"template-variable\">&#123;&#123; theme.busuanzi_count.page_pv_footer &#125;&#125;</span><span class=\"xml\"></span></div><div class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"文章结语\"><a href=\"#文章结语\" class=\"headerlink\" title=\"文章结语\"></a>文章结语</h3><p>修改<strong>post.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\post.swig</p>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> post.type === 'picture' %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"</span></span><span class=\"template-variable\">&#123;&#123; url_for(post.path) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; post.content &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">else</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">            <span class=\"template-variable\">&#123;&#123; post.content &#125;&#125;</span><span class=\"xml\"></span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">        <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">else</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">        <span class=\"template-variable\">&#123;&#123; post.content &#125;&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"comment\">&lt;!--这里是每篇文章的尾巴，从这里开始插入代码--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">id</span>=<span class=\"string\">\"结语\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#结语\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"headerlink\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"结语\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>结语<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">blockquote</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>如果您觉得本博客还不错，欢迎继续关注本博客，欢迎多提宝贵意见，非常感谢！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"text-align:center;color:#ccc;font-size:14px;\"</span>&gt;</span>------本文结束<span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-paw\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span>感谢阅读------<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!--下面这部分左边有框，但位置不够就会排班错乱</span></div><div class=\"line\">&lt;html&gt;</div><div class=\"line\">  &lt;body&gt;</div><div class=\"line\">    &lt;h1&gt;结语&lt;/h1&gt;</div><div class=\"line\">      &lt;p&gt;&lt;h5&gt;&lt;a href=\"#\" onclick=\"go_my_site()\" rel=\"external\"&gt;Leo Lan Blog Share For you!&lt;/a&gt;&lt;/h5&gt;&lt;/p&gt;</div><div class=\"line\">      &lt;p&gt;如果您觉得本博客还不错，欢迎继续关注Leo Lan的博客，欢迎多提宝贵意见，非常感谢！&lt;/p&gt;</div><div class=\"line\">  &lt;/body&gt;</div><div class=\"line\">&lt;/html&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;html&gt;</div><div class=\"line\">  &lt;body&gt;</div><div class=\"line\">    &lt;h2 id=\"结语\"&gt;&lt;a href=\"#结语\" class=\"headerlink\" title=\"结语\"&gt;&lt;/a&gt;结语&lt;/h2&gt;</div><div class=\"line\">    &lt;blockquote&gt;&lt;p&gt;如果您觉得本博客还不错，欢迎收藏书签，欢迎多提宝贵意见，非常感谢！&lt;/p&gt;</div><div class=\"line\">    &lt;footer&gt;&lt;strong&gt;Welcome to LeoLan'S BLOG&lt;/strong&gt;</div><div class=\"line\">    &lt;cite&gt;&lt;a href=\"#\" onclick=\"go_my_site()\" rel=\"external\"&gt;Leo Lan Blog Share For you!&lt;/a&gt;&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt;&lt;/div&gt;</div><div class=\"line\">  &lt;/body&gt;</div><div class=\"line\">&lt;/html&gt;</div><div class=\"line\">--&gt;</div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"文章底部的标签云锚点\"><a href=\"#文章底部的标签云锚点\" class=\"headerlink\" title=\"文章底部的标签云锚点\"></a>文章底部的标签云锚点</h3><p>修改<strong>post.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\post.swig</p>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"comment\">&lt;!--这是文章底部标签云锚点，不喜欢就注释掉</span></span></div><div class=\"line\">    &lt;footer class=\"post-footer\"&gt;</div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> post.tags and post.tags.length and not is_index %&#125;</span><span class=\"xml\"><span class=\"comment\"></span></span></div><div class=\"line\">        &lt;div class=\"post-tags\"&gt;</div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">for</span></span> tag <span class=\"keyword\">in</span> post.tags %&#125;</span><span class=\"xml\"><span class=\"comment\"></span></span></div><div class=\"line\">            &lt;a href=\"<span class=\"template-variable\">&#123;&#123; url_for(tag.path) &#125;&#125;</span><span class=\"xml\"><span class=\"comment\">\" rel=\"tag\"&gt;# </span></span><span class=\"template-variable\">&#123;&#123; tag.name &#125;&#125;</span><span class=\"xml\"><span class=\"comment\">&lt;/a&gt;</span></span></div><div class=\"line\">          <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endfor</span></span> %&#125;</span><span class=\"xml\"><span class=\"comment\"></span></span></div><div class=\"line\">        &lt;/div&gt;</div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"><span class=\"comment\"></span></span></div><div class=\"line\">--&gt;</div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"不蒜子网站访问量统计、删除NEXT主题自带尾巴\"><a href=\"#不蒜子网站访问量统计、删除NEXT主题自带尾巴\" class=\"headerlink\" title=\"不蒜子网站访问量统计、删除NEXT主题自带尾巴\"></a>不蒜子网站访问量统计、删除NEXT主题自带尾巴</h3><p>修改<strong>footer.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_partials\\footer.swig<br>官网：<a href=\"http://service.ibruce.info\" target=\"_blank\" rel=\"external\">http://service.ibruce.info</a><br><a href=\"http://ibruce.info/2015/04/04/busuanzi/\" target=\"_blank\" rel=\"external\">http://ibruce.info/2015/04/04/busuanzi/</a><br>把代码改成这个样子，<code>busuanzi_value_site_uv</code>中，uv和pv功能是不一样的。<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"powered-by\"</span>&gt;</span></span></div><div class=\"line\">  <span class=\"template-variable\">&#123;&#123; __('footer.powered', '') &#125;&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"theme-info\"</span>&gt;</span></div><div class=\"line\">  <span class=\"template-variable\">&#123;&#123; __('footer.theme') &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_uv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>位小伙伴</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>同时更改语言文件中对应的名称<br>编辑：<strong>themes\\languages\\zh_Hans.yml</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">footer</span>:</div><div class=\"line\">  powered: 本站总访问量&lt;<span class=\"selector-tag\">span</span> id=<span class=\"string\">\"busuanzi_value_site_pv\"</span>&gt;&lt;/span&gt;</div><div class=\"line\">  theme: 您是第</div><div class=\"line\">#&lt;<span class=\"selector-tag\">a</span> target=<span class=\"string\">\"_blank\"</span> href=<span class=\"string\">\"http://www.miitbeian.gov.cn/\"</span>&gt;粤ICP备<span class=\"number\">16026009</span>号-<span class=\"number\">2</span>&lt;/a&gt;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"居中模块\"><a href=\"#居中模块\" class=\"headerlink\" title=\"居中模块\"></a>居中模块</h3><p>把要居中的模块、代码、文字、插件、外链等，放在下面代码的中间即可居中显示。<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"comment\">&lt;!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --&gt;</span></span></div><div class=\"line\"><span class=\"comment\">&lt;!-- 其中 class=\"blockquote-center\" 是必须的 --&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">class</span>=<span class=\"string\">\"blockquote-center\"</span>&gt;</span>优秀的人，不是不合群，而是他们合群的人里面没有你<span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></div><div class=\"line\">或者</div><div class=\"line\">  <span class=\"comment\">&lt;!-- 标签 方式，要求版本在0.4.5或以上 --&gt;</span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\">centerquote</span> %&#125;</span><span class=\"xml\">优秀的人，不是不合群，而是他们合群的人里面没有你</span><span class=\"template-tag\">&#123;% <span class=\"name\">endcenterquote</span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">或者</div><div class=\"line\">  <span class=\"comment\">&lt;!-- 标签别名 --&gt;</span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\">cq</span> %&#125;</span><span class=\"xml\"> 优秀的人，不是不合群，而是他们合群的人里面没有你 </span><span class=\"template-tag\">&#123;% <span class=\"name\">endcq</span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"留言板\"><a href=\"#留言板\" class=\"headerlink\" title=\"留言板\"></a>留言板</h3><p>编辑：<strong>themes\\languages\\zh_Hans.yml</strong><br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">title:</span>   <span class=\"meta\">#这里增加</span></div><div class=\"line\"><span class=\"symbol\">  guestbook:</span> 留言板</div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">menu:    <span class=\"meta\">#这里增加</span></div><div class=\"line\"><span class=\"symbol\">  guestbook:</span> 给我留言</div></pre></td></tr></table></figure></p>\n<p>在站点source目录下新建guestbook文件夹，里面新建index.md文件，内容如下(其中调用HTML代码，插入了一个播放器)：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: 留言板</div><div class=\"line\">date: <span class=\"number\">2016</span><span class=\"number\">-11</span><span class=\"number\">-14</span> <span class=\"number\">17</span>:<span class=\"number\">21</span>:<span class=\"number\">10</span></div><div class=\"line\">---</div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">class</span>=<span class=\"string\">\"blockquote-center\"</span>&gt;</span></span></div><div class=\"line\"><span class=\"comment\">&lt;!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽--&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Stay Hungry,Stay Foolish<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></div><div class=\"line\">   <span class=\"comment\">&lt;!--&lt;embed src=\"https://music.163.com/style/swf/widget.swf?sid=34971711&amp;type=1&amp;auto=1&amp;width=310&amp;height=90\" width=\"330\" height=\"110\"  allowNetworking=\"all\"&gt;&lt;/embed&gt;</span></div><div class=\"line\">   &lt;iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=110 src=\"https://music.163.com/outchain/player?type=1&amp;id=34971711&amp;auto=1&amp;height=90\"&gt;&lt;/iframe&gt;--&gt;</div><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">embed</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://music.163.com/style/swf/widget.swf?sid=32507038&amp;type=2&amp;auto=1&amp;width=320&amp;height=66\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"340\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"86\"</span>  <span class=\"attr\">allowNetworking</span>=<span class=\"string\">\"all\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">embed</span>&gt;</span></div><div class=\"line\">   <span class=\"comment\">&lt;!--这里是插入视频的方法</span></div><div class=\"line\">\t&lt;iframe src=\"//www.youtube.com/embed/JMl8cQjBfqk\" width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt;--&gt;</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></div><div class=\"line\">&lt;br/&gt;</div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"yu-2\"</span>&gt;</span>最近访客<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div><div class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"ds-recent-visitors\"</span> data-num-items=<span class=\"string\">\"39\"</span> data-avatar-size=<span class=\"string\">\"40\"</span> id=<span class=\"string\">\"ds-recent-visitors\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></div><div class=\"line\">&lt;br/&gt;</div></pre></td></tr></table></figure></p>\n<p><strong>编辑主题配置文件</strong>：_config.yml<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">menu:</span>   <span class=\"meta\">#在这里加上</span></div><div class=\"line\"><span class=\"symbol\">  guestbook:</span> /guestbook</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"字体\"><a href=\"#字体\" class=\"headerlink\" title=\"字体\"></a>字体</h3><p>关于字体的修改开始时遇到很多问题，到后来才找到了原因，是因为引用的字体在<strong>www.google.com/fonts</strong>（默认是Google字体库）里找不到，或者是付费的字体。修改为免费的字体就正常使用了。打开<a href=\"www.google.com/fonts\">Google Fonts</a>，右上角查找你要的字体，能搜索到的话把全名复制下来，填写在配置文件中。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161206/152548232.png\" alt=\"mark\"></p>\n<p>修改<strong>\\themes\\next_config.yml</strong>找到<strong>Font Settings</strong><br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Font Settings</span></div><div class=\"line\"><span class=\"comment\"># - Find fonts on Google Fonts (https://www.google.com/fonts)</span></div><div class=\"line\"><span class=\"comment\"># - All fonts set here will have the following styles:</span></div><div class=\"line\"><span class=\"comment\">#     light, light italic, normal, normal intalic, bold, bold italic</span></div><div class=\"line\"><span class=\"comment\"># - Be aware that setting too much fonts will cause site running slowly</span></div><div class=\"line\"><span class=\"comment\"># - Introduce in 5.0.1</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"attr\">font:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Uri of fonts host. E.g. //fonts.googleapis.com (Default) </span></div><div class=\"line\">  <span class=\"comment\"># 外链字体库地址，例如 //fonts.googleapis.com (默认值)</span></div><div class=\"line\">加载慢的话搜索fonts.googleapis.com即可找到替换地址,这里注意使用的地址中包含了下面设置的字体，没有的话是默认字体。</div><div class=\"line\"><span class=\"attr\">  host:</span> </div><div class=\"line\">  <span class=\"comment\">#fonts.css.network</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Global font settings used on &lt;body&gt; element.</span></div><div class=\"line\">  <span class=\"comment\"># 全局字体，应用在 &lt;body&gt; 元素上</span></div><div class=\"line\"><span class=\"attr\">  global:</span></div><div class=\"line\">    <span class=\"comment\"># external: true will load this font family from host.</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Lato</div><div class=\"line\">    <span class=\"comment\">#Monda</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Headlines (h1, h2, h3, h4, h5, h6)</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># 标题字体 (h1, h2, h3, h4, h5, h6)</span></div><div class=\"line\"><span class=\"attr\">  headings:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> </div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for posts</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># 文章字体</span></div><div class=\"line\"><span class=\"attr\">  posts:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Roboto</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Logo</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># The `size` option use `px` as unit</span></div><div class=\"line\">  <span class=\"comment\"># Logo 字体</span></div><div class=\"line\"><span class=\"attr\">  logo:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Georgia</div><div class=\"line\"><span class=\"attr\">    size:</span> <span class=\"number\">24</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for &lt;code&gt; and code blocks.</span></div><div class=\"line\"> <span class=\"comment\"># 代码字体，应用于 &lt;code&gt; 以及代码块</span></div><div class=\"line\"><span class=\"attr\">  codes:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> </div><div class=\"line\"><span class=\"attr\">    size:</span> <span class=\"number\">14</span></div><div class=\"line\"><span class=\"comment\">#字体大小直接加个size: 写就行，单位是px，不填写则为默认大小。</span></div><div class=\"line\"><span class=\"comment\">#\"Source Code Pro\", \"PT Mono\", \"DejaVu Sans Mono\",</span></div></pre></td></tr></table></figure></p>\n<p>参考：<br><a href=\"http://theme-next.iissnan.com/theme-settings.html#fonts-customization\" target=\"_blank\" rel=\"external\">Next主题设置字体</a>  |  <a href=\"http://jingyan.baidu.com/article/09ea3ede0cb0e1c0aede39d8.html\" target=\"_blank\" rel=\"external\">如何引用google字体</a></p>\n<p>如果要在文章中临时引用特殊的字体格式，可以直接在 Markdown 文档中使用 html 语法<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">size</span>=<span class=\"string\">4</span> &gt;</span> 这里输入文字，自定义大小 <span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">\"#FF0000\"</span>&gt;</span> 这里输入文字，自定义颜色的字体 <span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"404页面\"><a href=\"#404页面\" class=\"headerlink\" title=\"404页面\"></a>404页面</h3><p>404页面可以自己写，也可以引用腾讯公益404页面。<br>这是嵌入到主题中的404页面而不是新开一个页面；在站点目录source目录下新建<strong>404.html</strong>文件，粘贴以下代码：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>404 - arao'blog<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"description\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"404错误，页面不存在！\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html;charset=utf-8;\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=edge,chrome=1\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"robots\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"all\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"robots\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"index,follow\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"打赏\"><a href=\"#打赏\" class=\"headerlink\" title=\"打赏\"></a>打赏</h3><p>修改<strong>reward.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\reward.swig</p>\n<p>直接全部替换代码，这段代码是圆形的打赏按钮，二维码左右排列。<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.alipay or theme.wechatpay %&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-bottom: 10px;font-size: 16px;font-weight: 600;\"</span>&gt;</span>您的支持将鼓励我继续创作,非常感谢！<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"rewardButton\"</span>, <span class=\"attr\">disable</span>=<span class=\"string\">\"enable\"</span>, <span class=\"attr\">onclick</span>=<span class=\"string\">\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') &#123;qr.style.display='block';&#125; else &#123;qr.style.display='none'&#125;\"</span>, <span class=\"attr\">style</span>=<span class=\"string\">\"cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">onmouseover</span>=<span class=\"string\">\"this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'\"</span> <span class=\"attr\">onMouseOut</span>=<span class=\"string\">\"this.style.color='#fff';this.style.background='rgb(236,96,0)'\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)\"</span>&gt;</span>赏<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"QR\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: none;\"</span>&gt;</span></div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.alipay %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"alipay\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: inline-block\"</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"alipay_qr\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"</span></span><span class=\"template-variable\">&#123;&#123; theme.alipay &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; theme.author &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\"> Alipay\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 200px; max-width: 100%; display: inline-block\"</span>/&gt;</span></span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>支付宝打赏<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.wechatpay %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"wechat\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: inline-block\"</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"wechat_qr\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"</span></span><span class=\"template-variable\">&#123;&#123; theme.wechatpay &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; theme.author &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\"> WeChat Pay\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 200px; max-width: 100%; display: inline-block\"</span>/&gt;</span></span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>微信打赏<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      <span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"最近访客\"><a href=\"#最近访客\" class=\"headerlink\" title=\"最近访客\"></a>最近访客</h3><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;h3 <span class=\"built_in\">id</span>=<span class=\"string\">\"最近访客\"</span>&gt;&lt;a href=<span class=\"string\">\"#最近访客\"</span> <span class=\"built_in\">class</span>=<span class=\"string\">\"headerlink\"</span> title=<span class=\"string\">\"最近访客\"</span>&gt;&lt;/a&gt;最近访客&lt;/h3&gt;&lt;<span class=\"keyword\">div</span> <span class=\"built_in\">class</span>=<span class=\"string\">\"ds-recent-visitors\"</span> data-num-items=<span class=\"string\">\"28\"</span> data-avatar-size=<span class=\"string\">\"42\"</span> <span class=\"built_in\">id</span>=<span class=\"string\">\"ds-recent-visitors\"</span>&gt;&lt;/<span class=\"keyword\">div</span>&gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">class</span>=“ds-recent-visitors”    //指定显示最近访客容器</div><div class=\"line\"><span class=\"attr\">data-num-items</span>=“<span class=\"number\">28</span>”    //显示最近访客的数量</div><div class=\"line\"><span class=\"attr\">data-avatar-size</span>=“<span class=\"number\">42</span>”    //显示最近访客头像尺寸大小</div><div class=\"line\"><span class=\"attr\">id</span>=“ds-recent-visitors”    //为了调节最近访客样式加的</div></pre></td></tr></table></figure>\n<p>这样，每个页面都有最近访客了（只能看到注册了多说账户的用户）</p>\n<hr>\n<h3 id=\"SEO\"><a href=\"#SEO\" class=\"headerlink\" title=\"SEO\"></a>SEO</h3><h4 id=\"网站地图\"><a href=\"#网站地图\" class=\"headerlink\" title=\"网站地图\"></a>网站地图</h4><p>安装hexo的sitemap网站地图生成插件<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-generator-sitemap <span class=\"comment\">--save</span></div><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-generator-baidu-sitemap <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在你的hexo站点的_config.yml添加下面的代码<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># hexo sitemap网站地图</span></div><div class=\"line\">sitemap:</div><div class=\"line\">path: sitemap.<span class=\"keyword\">xml</span></div><div class=\"line\"><span class=\"title\">baidusitemap</span>:</div><div class=\"line\">path: baidusitemap.<span class=\"keyword\">xml</span>  <span class=\"title\">#如果报path</span>错误就把前面增加baidu</div></pre></td></tr></table></figure></p>\n<p>配置成功后，hexo编译时会在hexo站点根目录生成<strong>sitemap.xml</strong>和<strong>baidusitemap.xml</strong><br>其中sitemap.xml适合提交给谷歌搜素引擎，baidusitemap.xml适合提交百度搜索引擎。</p>\n<hr>\n<h4 id=\"蜘蛛协议\"><a href=\"#蜘蛛协议\" class=\"headerlink\" title=\"蜘蛛协议\"></a>蜘蛛协议</h4><p>在robots.txt中添加站点地图文件，如下（没有robots.txt就在站点目录source下新建）：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># hexo robots.txt</span></div><div class=\"line\">User-agent: *</div><div class=\"line\"><span class=\"symbol\">Allow:</span> /</div><div class=\"line\"><span class=\"symbol\">Allow:</span> <span class=\"meta-keyword\">/archives/</span></div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">Disallow: <span class=\"meta-keyword\">/lib/</span>   </div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/js/</span></div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/css/</span></div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/fonts/</span></div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/fancybox/</span></div><div class=\"line\"><span class=\"symbol\"></span></div><div class=\"line\">Sitemap: http:<span class=\"comment\">//www.leolan.top/sitemap.xml</span></div><div class=\"line\"><span class=\"symbol\">Sitemap:</span> http:<span class=\"comment\">//www.leolan.top/baidusitemap.xml</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"NexT主题，首页title的优化\"><a href=\"#NexT主题，首页title的优化\" class=\"headerlink\" title=\"NexT主题，首页title的优化\"></a>NexT主题，首页title的优化</h4><p>感谢<a href=\"http://www.arao.me/\" target=\"_blank\" rel=\"external\">arao</a>的教程<br>修改\\themes\\next\\layout\\index.swig文件，将下面代码<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p>改为<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; theme.description &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p>这时候你的首页标题会更符合<strong>网站名称 - 网站描述</strong>这习惯。<br>把关键词(在主题配置文件<strong>_config.yml</strong>中设置<strong>keywords:</strong>)也显示在Title标题里，可改成:<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; theme.keywords &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; theme.description &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">或（排列顺序看自己喜欢）</div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; theme.keywords &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p>注意：别堆砌关键字，整个标题一般不超过80个字符，可以通过chinaz的seo综合查询检查。</p>\n<hr>\n<h4 id=\"限制出站链接\"><a href=\"#限制出站链接\" class=\"headerlink\" title=\"限制出站链接\"></a>限制出站链接</h4><p>网络爬虫会在当前页面搜索所有的链接，故有可能跳到别的网站。<strong>nofollow</strong> 标签是由谷歌领头创新的一个 “反垃圾链接” 的标签，并被各大搜索引擎广泛支持，引用 <strong>nofollow</strong> 标签的目的是：用于指示搜索引擎不要追踪（即抓取）网页上的带有 <strong>nofollow</strong> 属性的任何出站链接，以减少垃圾链接的分散网站权重。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-autonofollow <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在 <strong>站点配置文件 </strong>中添加如下代码。<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">nofollow:</span></div><div class=\"line\"><span class=\"attr\">    enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    exclude:</span> <span class=\"comment\"># 例外的链接，可将友情链接放置此处</span></div><div class=\"line\"><span class=\"bullet\">    -</span> exclude1.com</div><div class=\"line\"><span class=\"bullet\">    -</span> exclude2.com</div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"文章链接唯一化\"><a href=\"#文章链接唯一化\" class=\"headerlink\" title=\"文章链接唯一化\"></a>文章链接唯一化</h4><p>也许你会数次更改文章题目或者变更文章发布时间，在默认设置下，文章链接都会改变，不利于搜索引擎收录，也不利于分享。唯一永久链接才是更好的选择。安装此插件后，不要在 <code>hexo s</code> 模式下更改文章文件名，否则文章将成空白,需要重新<code>hexo s</code>才行。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-abbrlink <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在 站点配置文件 中查找代码 <strong>permalink:</strong>，将其更改为:<br><figure class=\"highlight elixir\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">permalink:</span> posts/<span class=\"symbol\">:abbrlink/</span>  <span class=\"comment\"># “posts/” 可自行更换</span></div></pre></td></tr></table></figure></p>\n<p>在 站点配置文件 中添加如下代码：<br><figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"># abbrlink config</div><div class=\"line\"><span class=\"symbol\">abbrlink:</span></div><div class=\"line\"><span class=\"symbol\">  alg:</span> <span class=\"keyword\">crc32</span>  # 算法：crc16(<span class=\"meta\">default</span>) <span class=\"keyword\">and</span> <span class=\"keyword\">crc32</span> </div><div class=\"line\"><span class=\"symbol\">  rep:</span> hex    # 进制：<span class=\"keyword\">dec</span>(<span class=\"meta\">default</span>) <span class=\"keyword\">and</span> hex</div></pre></td></tr></table></figure></p>\n<p>永久链接有下面4种组合<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">crc16 &amp; hex</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">66</span>c8.html</div><div class=\"line\"></div><div class=\"line\">crc16 &amp; dec</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">65535</span>.html</div><div class=\"line\"></div><div class=\"line\">crc32 &amp; hex</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">8</span>ddf18fb.html</div><div class=\"line\"></div><div class=\"line\">crc32 &amp; dec</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">1690090958</span>.html</div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"百度网址推送\"><a href=\"#百度网址推送\" class=\"headerlink\" title=\"百度网址推送\"></a>百度网址推送</h4><p>修改<strong>baidu-push.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_scripts\\baidu-push.swig<br>没有此文件就新建<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.baidu_push %&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> bp = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> curProtocol = <span class=\"built_in\">window</span>.location.protocol.split(<span class=\"string\">':'</span>)[<span class=\"number\">0</span>];</div><div class=\"line\">    <span class=\"keyword\">if</span> (curProtocol === <span class=\"string\">'https'</span>) &#123;</div><div class=\"line\">        bp.src = <span class=\"string\">'https://zz.bdstatic.com/linksubmit/push.js'</span>;        </div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        bp.src = <span class=\"string\">'http://push.zhanzhang.baidu.com/push.js'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">var</span> s = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">\"script\"</span>)[<span class=\"number\">0</span>];</div><div class=\"line\">    s.parentNode.insertBefore(bp, s);</div><div class=\"line\">&#125;)();</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p><strong>编辑站点配置文件</strong>：_config.yml<br>加上以下代码：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">baidu_url_submit:</span>  <span class=\"meta\">#百度链接推送，推送刚刚生成的永久链接</span></div><div class=\"line\"><span class=\"symbol\">  count:</span> <span class=\"number\">5</span> <span class=\"meta\">## 比如3，代表提交最新的三个链接</span></div><div class=\"line\"><span class=\"symbol\">  host:</span> www.leolan.top <span class=\"meta\">## 在百度站长平台中注册的域名</span></div><div class=\"line\"><span class=\"symbol\">  token:</span> kZ5xboXBFPxQ0g7N <span class=\"meta\">## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span></div><div class=\"line\"><span class=\"symbol\">  path:</span> /baidu_urls.txt <span class=\"meta\">## 文本文档的地址， 新链接会保存在此文本文档里</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"主动推送新链接\"><a href=\"#主动推送新链接\" class=\"headerlink\" title=\"主动推送新链接\"></a>主动推送新链接</h4><p>解决百度爬虫被禁止访问的问题，提升网站收录质量和速度。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-baidu-<span class=\"keyword\">url</span>-submit <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在 站点配置文件 中添加如下代码。<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">baidu_url_submit:</span></div><div class=\"line\"><span class=\"symbol\">  count:</span> <span class=\"number\">5</span> <span class=\"meta\">## 比如3，代表提交最新的三个链接</span></div><div class=\"line\"><span class=\"symbol\">  host:</span> blog.tangxiaozhu.com <span class=\"meta\">## 在百度站长平台中注册的域名</span></div><div class=\"line\"><span class=\"symbol\">  token:</span>  <span class=\"meta\">## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span></div><div class=\"line\"><span class=\"symbol\">  path:</span> baidu_urls.txt <span class=\"meta\">## 文本文档的地址， 新链接会保存在此文本文档里</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"向百度提交所有链接\"><a href=\"#向百度提交所有链接\" class=\"headerlink\" title=\"向百度提交所有链接\"></a>向百度提交所有链接</h4><p>这是LoveNight的脚本，先本地安装Python。<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></div><div class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></div><div class=\"line\"><span class=\"comment\"># @Author: LoveNight</span></div><div class=\"line\"><span class=\"comment\"># @Date:   2015-11-16 20:45:59</span></div><div class=\"line\"><span class=\"comment\"># @Last Modified by:   lulee007</span></div><div class=\"line\"><span class=\"comment\"># @Last Modified time: 2016-01-16 21:06:50</span></div><div class=\"line\"><span class=\"keyword\">import</span> os</div><div class=\"line\"><span class=\"keyword\">import</span> sys</div><div class=\"line\"><span class=\"keyword\">import</span> json</div><div class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup <span class=\"keyword\">as</span> BS</div><div class=\"line\"><span class=\"keyword\">import</span> requests</div><div class=\"line\"><span class=\"keyword\">import</span> codecs</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">\"\"\"</span></div><div class=\"line\">hexo 博客专用，向百度站长平台提交所有网址</div><div class=\"line\"></div><div class=\"line\">本脚本必须放在 hexo 博客的根目录下执行！需要已安装生成百度站点地图的插件。</div><div class=\"line\">百度站长平台提交链接：http://zhanzhang.baidu.com/linksubmit/index</div><div class=\"line\">主动推送：最为快速的提交方式，推荐您将站点当天新产出链接立即通过此方式推送给百度，以保证新链接可以及时被百度收录。</div><div class=\"line\">从中找到自己的接口调用地址</div><div class=\"line\">\"\"\"</div><div class=\"line\"></div><div class=\"line\">url = <span class=\"string\">'http://data.zz.baidu.com/urls?site=leolan.top&amp;token=kZ5xboXBFPxQ0g7N'</span>    <span class=\"comment\">#这里是你的百度推送地址。</span></div><div class=\"line\">baidu_sitemap = os.path.join(sys.path[<span class=\"number\">0</span>], <span class=\"string\">'public'</span>, <span class=\"string\">'baidusitemap.xml'</span>)</div><div class=\"line\">google_sitemap = os.path.join(sys.path[<span class=\"number\">0</span>], <span class=\"string\">'public'</span>, <span class=\"string\">'baidusitemap_zhanwei.xml'</span>)</div><div class=\"line\"><span class=\"comment\"># sitemap = [baidu_sitemap, google_sitemap]</span></div><div class=\"line\">sitemap = [baidu_sitemap]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># assert (os.path.exists(baidu_sitemap) or os.path.exists(</span></div><div class=\"line\"><span class=\"comment\">#     google_sitemap)), \"没找到任何网站地图，请检查！\"</span></div><div class=\"line\"><span class=\"keyword\">assert</span> os.path.exists(baidu_sitemap) , <span class=\"string\">\"没找到任何网站地图，请检查！\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 从站点地图中读取网址列表</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getUrls</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    urls = []</div><div class=\"line\">    <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> sitemap:</div><div class=\"line\">        <span class=\"keyword\">if</span> os.path.exists(_):</div><div class=\"line\">            <span class=\"keyword\">with</span> codecs.open(_, <span class=\"string\">\"r\"</span>, <span class=\"string\">\"utf-8\"</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">                xml = f.read()</div><div class=\"line\">            soup = BS(xml, <span class=\"string\">\"xml\"</span>)</div><div class=\"line\">            tags = soup.find_all(<span class=\"string\">\"loc\"</span>)</div><div class=\"line\">            urls += [x.string <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> tags]</div><div class=\"line\">            <span class=\"keyword\">if</span> _ == baidu_sitemap:</div><div class=\"line\">                tags = soup.find_all(<span class=\"string\">\"breadCrumb\"</span>, url=<span class=\"keyword\">True</span>)</div><div class=\"line\">                print(<span class=\"string\">\"\"</span>)</div><div class=\"line\">                urls += [x[<span class=\"string\">\"url\"</span>] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> tags]</div><div class=\"line\">    <span class=\"keyword\">return</span> urls</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># POST提交网址列表</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">postUrls</span><span class=\"params\">(urls)</span>:</span></div><div class=\"line\">    urls = set(urls)  <span class=\"comment\"># 先去重</span></div><div class=\"line\">    print(<span class=\"string\">\"一共提取出 %s 个网址\"</span> % len(urls))</div><div class=\"line\">    data = <span class=\"string\">\"\\n\"</span>.join(urls)</div><div class=\"line\">    <span class=\"keyword\">return</span> requests.post(url, data=data).text</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</div><div class=\"line\"></div><div class=\"line\">    urls = getUrls()</div><div class=\"line\">    result = postUrls(urls)</div><div class=\"line\">    print(<span class=\"string\">\"提交结果：\"</span>)</div><div class=\"line\">    print(result)</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"语法优化\"><a href=\"#语法优化\" class=\"headerlink\" title=\"语法优化\"></a>语法优化</h3><p>默认的语法无法添加角标（footnotes）以注明引用，这种可来回跳转的引用还是挺有用处的。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-footnotes <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>安装完毕请确认是否生效，如不生效，在 站点配置文件 中添加如下代码以手动启用：<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">plugins:</span></div><div class=\"line\">  - hexo-footnotes</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/222054761.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"页面留白-扩大显示范围\"><a href=\"#页面留白-扩大显示范围\" class=\"headerlink\" title=\"页面留白(扩大显示范围)\"></a>页面留白(扩大显示范围)</h3><p>浏览器留白太多，代码块看起来比较麻烦，想让更多空间显示文章。<br>NexT 对于内容的宽度的设定如下：<br>700px，当屏幕宽度 &lt; 1600px<br>900px，当屏幕宽度 &gt;= 1600px<br>移动设备下，宽度自适应</p>\n<p>如果你需要修改内容的宽度，同样需要编辑样式文件。 编辑主题的 <strong>source/css/_variables/custom.styl</strong> 文件，新增变量：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 修改成你期望的宽度，默认700px</span></div><div class=\"line\"><span class=\"meta\"><span class=\"meta-keyword\">$content</span>-desktop = 700px</span></div><div class=\"line\"><span class=\"comment\">// 当视窗超过 1600px 后的宽度，默认900px</span></div><div class=\"line\"><span class=\"meta\"><span class=\"meta-keyword\">$content</span>-desktop-large = 900px</span></div></pre></td></tr></table></figure></p>\n<p>如果主题风格选择的是<strong>Pisces</strong>；那么同时还要修改<strong>header</strong> 的宽度、<strong>.main-inner </strong>的宽度以及 <strong>.content-wrap </strong>的宽度(如果没什么问题可以不修改custom.styl文件)。<br>编辑文件：<strong>source/css/_schemes/Picses/_layout.styl</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//可以使用百分比，也可以是像素，80%是比较合适的。</span></div><div class=\"line\"><span class=\"comment\">//开头header中修改为80%</span></div><div class=\"line\">header&#123; <span class=\"attribute\">width</span>: <span class=\"number\">80%</span>; &#125;</div><div class=\"line\"><span class=\"comment\">//.container中系应该为80%</span></div><div class=\"line\"><span class=\"selector-class\">.main-inner</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">80%</span>; &#125;</div><div class=\"line\"><span class=\"comment\">//最后修改.content-wrap</span></div><div class=\"line\"><span class=\"selector-class\">.content-wrap</span> &#123; <span class=\"attribute\">width</span>: calc(<span class=\"number\">100%</span> - <span class=\"number\">260px</span>); &#125;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"多说评论框自定义css\"><a href=\"#多说评论框自定义css\" class=\"headerlink\" title=\"多说评论框自定义css\"></a>多说评论框自定义css</h3><p>感谢<a href=\"http://www.arao.me/\" target=\"_blank\" rel=\"external\">arao</a>的代码<br>进入多说管理后台<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/170352768.png\" alt=\"mark\"><br>把下面代码粘贴进去保存<br><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#ds-reset</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span>,</div><div class=\"line\"><span class=\"selector-id\">#ds-recent-visitors</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span> &#123;</div><div class=\"line\"><span class=\"attribute\">width</span>: <span class=\"number\">54px</span>;</div><div class=\"line\"><span class=\"attribute\">height</span>: <span class=\"number\">54px</span>;     <span class=\"comment\">/*设置图像的长和宽，这里要根据自己的评论框情况更改*/</span></div><div class=\"line\"><span class=\"attribute\">border-radius</span>: <span class=\"number\">27px</span>;     <span class=\"comment\">/*设置图像圆角效果,在这里我直接设置了超过width/2的像素，即为圆形了*/</span></div><div class=\"line\">-webkit-<span class=\"attribute\">border-radius</span>: <span class=\"number\">27px</span>;     <span class=\"comment\">/*圆角效果：兼容webkit浏览器*/</span></div><div class=\"line\">-moz-<span class=\"attribute\">border-radius</span>: <span class=\"number\">27px</span>;</div><div class=\"line\"><span class=\"attribute\">box-shadow</span>: inset <span class=\"number\">0</span> -<span class=\"number\">1px</span> <span class=\"number\">0</span> <span class=\"number\">#3333</span>sf;     <span class=\"comment\">/*设置图像阴影效果*/</span></div><div class=\"line\">-webkit-<span class=\"attribute\">box-shadow</span>: inset <span class=\"number\">0</span> -<span class=\"number\">1px</span> <span class=\"number\">0</span> <span class=\"number\">#3333</span>sf;</div><div class=\"line\">-webkit-<span class=\"attribute\">transition</span>: <span class=\"number\">0.4s</span>;</div><div class=\"line\">-webkit-<span class=\"attribute\">transition</span>: -webkit-transform <span class=\"number\">0.4s</span> ease-out;</div><div class=\"line\"><span class=\"attribute\">transition</span>: transform <span class=\"number\">0.4s</span> ease-out;     <span class=\"comment\">/*变化时间设置为0.4秒(变化动作即为下面的图像旋转360读）*/</span></div><div class=\"line\">-moz-<span class=\"attribute\">transition</span>: -moz-transform <span class=\"number\">0.4s</span> ease-out;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#ds-reset</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span>:hover,</div><div class=\"line\"><span class=\"selector-id\">#ds-recent-visitors</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span>:hover &#123;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/*设置鼠标悬浮在头像时的CSS样式*/</span>    <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">#fff</span>;</div><div class=\"line\">rgba(255, 255, 255, <span class=\"selector-class\">.6</span>), inset 0 0 20px rgba(255, 255, 255, 1);</div><div class=\"line\">-webkit-<span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">#fff</span>;</div><div class=\"line\">rgba(255, 255, 255, <span class=\"selector-class\">.6</span>), inset 0 0 20px rgba(255, 255, 255, 1);</div><div class=\"line\"><span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);     <span class=\"comment\">/*图像旋转360度*/</span></div><div class=\"line\">-webkit-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</div><div class=\"line\">-moz-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#ds-thread</span> <span class=\"selector-id\">#ds-reset</span> <span class=\"selector-class\">.ds-textarea-wrapper</span> <span class=\"selector-tag\">textarea</span> &#123;</div><div class=\"line\"><span class=\"attribute\">background</span>: url(http://ww4.sinaimg.cn/small/<span class=\"number\">649</span>a4735gw1et7gnhy5fej20zk0m8q3q.jpg) right no-repeat;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#ds-recent-visitors</span> <span class=\"selector-class\">.ds-avatar</span> &#123;</div><div class=\"line\"><span class=\"attribute\">float</span>: left</div><div class=\"line\">&#125;</div><div class=\"line\">/*隐藏多说底部版权*/</div><div class=\"line\"><span class=\"number\">#d</span>s-thread <span class=\"number\">#d</span>s-reset .ds-powered-by &#123;</div><div class=\"line\">display: none;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"解决多说评论不稳定、加载慢\"><a href=\"#解决多说评论不稳定、加载慢\" class=\"headerlink\" title=\"解决多说评论不稳定、加载慢\"></a>解决多说评论不稳定、加载慢</h3><p>把多说评论依赖的<strong>embed.js</strong>放置底部，修改<br>themes/next/layout/_scripts/third-party/comments/duoshuo.swig文件<br>将<br><figure class=\"highlight scheme\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"name\">document.getElementsByTagName</span>(<span class=\"symbol\">'head</span>')[<span class=\"name\">0</span>]</div></pre></td></tr></table></figure></p>\n<p>修改为<br><figure class=\"highlight scheme\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"name\">document.getElementById</span>(<span class=\"symbol\">'footer</span>')</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"多说userid\"><a href=\"#多说userid\" class=\"headerlink\" title=\"多说userid\"></a>多说userid</h3><p>主题配置中需要用到user_id<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid1.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid2.png\" alt=\"\"><br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">duoshuo_info:</span></div><div class=\"line\"><span class=\"attr\">  ua_enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  admin_enable:</span> ture</div><div class=\"line\"><span class=\"attr\">  user_id:</span> <span class=\"number\">6343395544286626562</span></div><div class=\"line\"><span class=\"attr\">  admin_nickname:</span> 博主</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"动态背景\"><a href=\"#动态背景\" class=\"headerlink\" title=\"动态背景\"></a>动态背景</h3><p>修改<strong>_layout.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_layout.swig<br>在末尾前加上下面一句<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- 背景动画 --&gt;</span></div><div class=\"line\">#默认灰色线条</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/js/src/particle.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">#浅蓝色线条</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/js/src/particle.js\"</span> <span class=\"attr\">count</span>=<span class=\"string\">\"50\"</span> <span class=\"attr\">zindex</span>=<span class=\"string\">\"-2\"</span> <span class=\"attr\">opacity</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">color</span>=<span class=\"string\">\"0,104,183\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>在themes\\source\\js\\src\\下新建文件particle.js写上以下代码（也可以自己下载其他js,修改方式差不多）<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">n</span>(<span class=\"params\">n,e,t</span>)</span>&#123;<span class=\"keyword\">return</span> n.getAttribute(e)||t&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">e</span>(<span class=\"params\">n</span>)</span>&#123;<span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.getElementsByTagName(n)&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">t</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"keyword\">var</span> t=e(<span class=\"string\">\"script\"</span>),o=t.length,i=t[o<span class=\"number\">-1</span>];<span class=\"keyword\">return</span>&#123;<span class=\"attr\">l</span>:o,<span class=\"attr\">z</span>:n(i,<span class=\"string\">\"zIndex\"</span>,<span class=\"number\">-1</span>),<span class=\"attr\">o</span>:n(i,<span class=\"string\">\"opacity\"</span>,<span class=\"number\">.5</span>),<span class=\"attr\">c</span>:n(i,<span class=\"string\">\"color\"</span>,<span class=\"string\">\"0,0,0\"</span>),<span class=\"attr\">n</span>:n(i,<span class=\"string\">\"count\"</span>,<span class=\"number\">99</span>)&#125;&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">o</span>(<span class=\"params\"></span>)</span>&#123;c=u.width=<span class=\"built_in\">window</span>.innerWidth||<span class=\"built_in\">document</span>.documentElement.clientWidth||<span class=\"built_in\">document</span>.body.clientWidth,a=u.height=<span class=\"built_in\">window</span>.innerHeight||<span class=\"built_in\">document</span>.documentElement.clientHeight||<span class=\"built_in\">document</span>.body.clientHeight&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">i</span>(<span class=\"params\"></span>)</span>&#123;l.clearRect(<span class=\"number\">0</span>,<span class=\"number\">0</span>,c,a);<span class=\"keyword\">var</span> n,e,t,o,u,d,x=[w].concat(y);y.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>)</span>&#123;<span class=\"keyword\">for</span>(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x&gt;c||i.x&lt;<span class=\"number\">0</span>?<span class=\"number\">-1</span>:<span class=\"number\">1</span>,i.ya*=i.y&gt;a||i.y&lt;<span class=\"number\">0</span>?<span class=\"number\">-1</span>:<span class=\"number\">1</span>,l.fillRect(i.x<span class=\"number\">-.5</span>,i.y<span class=\"number\">-.5</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>),e=<span class=\"number\">0</span>;e&lt;x.length;e++)n=x[e],i!==n&amp;&amp;<span class=\"literal\">null</span>!==n.x&amp;&amp;<span class=\"literal\">null</span>!==n.y&amp;&amp;(o=i.x-n.x,u=i.y-n.y,d=o*o+u*u,d&lt;n.max&amp;&amp;(n===w&amp;&amp;d&gt;=n.max/<span class=\"number\">2</span>&amp;&amp;(i.x-=<span class=\"number\">.03</span>*o,i.y-=<span class=\"number\">.03</span>*u),t=(n.max-d)/n.max,l.beginPath(),l.lineWidth=t/<span class=\"number\">2</span>,l.strokeStyle=<span class=\"string\">\"rgba(\"</span>+m.c+<span class=\"string\">\",\"</span>+(t+<span class=\"number\">.2</span>)+<span class=\"string\">\")\"</span>,l.moveTo(i.x,i.y),l.lineTo(n.x,n.y),l.stroke()));x.splice(x.indexOf(i),<span class=\"number\">1</span>)&#125;),r(i)&#125;<span class=\"keyword\">var</span> c,a,u=<span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"canvas\"</span>),m=t(),d=<span class=\"string\">\"c_n\"</span>+m.l,l=u.getContext(<span class=\"string\">\"2d\"</span>),r=<span class=\"built_in\">window</span>.requestAnimationFrame||<span class=\"built_in\">window</span>.webkitRequestAnimationFrame||<span class=\"built_in\">window</span>.mozRequestAnimationFrame||<span class=\"built_in\">window</span>.oRequestAnimationFrame||<span class=\"built_in\">window</span>.msRequestAnimationFrame||<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;<span class=\"built_in\">window</span>.setTimeout(n,<span class=\"number\">1e3</span>/<span class=\"number\">45</span>)&#125;,x=<span class=\"built_in\">Math</span>.random,w=&#123;<span class=\"attr\">x</span>:<span class=\"literal\">null</span>,<span class=\"attr\">y</span>:<span class=\"literal\">null</span>,<span class=\"attr\">max</span>:<span class=\"number\">2e4</span>&#125;;u.id=d,u.style.cssText=<span class=\"string\">\"position:fixed;top:0;left:0;z-index:\"</span>+m.z+<span class=\"string\">\";opacity:\"</span>+m.o,e(<span class=\"string\">\"body\"</span>)[<span class=\"number\">0</span>].appendChild(u),o(),<span class=\"built_in\">window</span>.onresize=o,<span class=\"built_in\">window</span>.onmousemove=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;n=n||<span class=\"built_in\">window</span>.event,w.x=n.clientX,w.y=n.clientY&#125;,<span class=\"built_in\">window</span>.onmouseout=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;w.x=<span class=\"literal\">null</span>,w.y=<span class=\"literal\">null</span>&#125;;<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> y=[],s=<span class=\"number\">0</span>;m.n&gt;s;s++)&#123;<span class=\"keyword\">var</span> f=x()*c,h=x()*a,g=<span class=\"number\">2</span>*x()<span class=\"number\">-1</span>,p=<span class=\"number\">2</span>*x()<span class=\"number\">-1</span>;y.push(&#123;<span class=\"attr\">x</span>:f,<span class=\"attr\">y</span>:h,<span class=\"attr\">xa</span>:g,<span class=\"attr\">ya</span>:p,<span class=\"attr\">max</span>:<span class=\"number\">6e3</span>&#125;)&#125;setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;i()&#125;,<span class=\"number\">100</span>)&#125;();</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"背景透明\"><a href=\"#背景透明\" class=\"headerlink\" title=\"背景透明\"></a>背景透明</h3><p>在 <strong>\\themes\\next\\source\\css\\_custom\\custom.styl</strong> 中写上 <code>.content-wrap {background: transparent;}</code><br><strong>custom.styl</strong>文件为用户自定义风格，卸载里面的内容会优先覆盖主题的设定，也可以定义其他的方法等。</p>\n<hr>\n<h3 id=\"背景放图片\"><a href=\"#背景放图片\" class=\"headerlink\" title=\"背景放图片\"></a>背景放图片</h3><p>首先找到一个背景图片放到 \\themes\\next\\source\\images下；<br>修改themes\\next\\source\\css_schemes\\Pisces（Mist和Muse也行）\\index.styl文件，<br>在文件的最上方加上一代码<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">body</span> &#123; <span class=\"attribute\">background</span>:<span class=\"built_in\">url</span>(/images/backGround.jpg);&#125;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"修改文章超链接样式\"><a href=\"#修改文章超链接样式\" class=\"headerlink\" title=\"修改文章超链接样式\"></a>修改文章超链接样式</h3><p>将链接文本设置为蓝色，鼠标划过时文字颜色加深，并显示下划线。<br>修改 <strong>themes\\next\\source\\css\\_custom\\custom.styl </strong>，添加如下 <code>css</code> 样式（颜色可以自己更改，百度html颜色代码即可找到）：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">.post-body p a &#123;</div><div class=\"line\">  color: #0593d3;</div><div class=\"line\">  border-bottom: none;</div><div class=\"line\">  &amp;:hover &#123;</div><div class=\"line\">    color: #0477ab;</div><div class=\"line\">    text-decoration: underline;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"High一下\"><a href=\"#High一下\" class=\"headerlink\" title=\"High一下\"></a>High一下</h3><h4 id=\"第一种\"><a href=\"#第一种\" class=\"headerlink\" title=\"第一种\"></a><strong>第一种</strong></h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161205/100022200.png\" alt=\"mark\"><br>修改<strong>header.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_partials\\header.swig<br>在以下代码的结尾换行<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;% if hasSearch %&#125;</div><div class=\"line\">  &lt;li class=\"menu-item menu-item-search\"&gt;</div><div class=\"line\">    &#123;% if theme.swiftype_key %&#125;</div><div class=\"line\">      &lt;a href=\"javascript:;\" class=\"st-search-show-outputs\"&gt;</div><div class=\"line\">    &#123;% elseif config.search %&#125;</div><div class=\"line\">      &lt;a href=\"javascript:;\" class=\"popup-trigger\"&gt;</div><div class=\"line\">    &#123;% endif %&#125;</div><div class=\"line\">      &#123;% if theme.menu_icons.enable %&#125;</div><div class=\"line\">        &lt;i class=\"menu-item-icon fa fa-search fa-fw\"&gt;&lt;/i&gt; &lt;br /&gt;</div><div class=\"line\">      &#123;% endif %&#125;</div><div class=\"line\">      &#123;&#123; __('menu.search') &#125;&#125;</div><div class=\"line\">    &lt;/a&gt;</div><div class=\"line\">  &lt;/li&gt;</div><div class=\"line\">&#123;% endif %&#125;</div></pre></td></tr></table></figure></p>\n<p>插入以下内容,感谢Neveryu修复了一些bug，以下是Neveryu的代码。<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;!-- 自定义High一下的功能 --&gt;</div><div class=\"line\">     &lt;li class=\"menu-item\"&gt; &lt;a title=\"把这个链接拖到你的工具栏中,任何网页都可以High\" href='javascript:(</div><div class=\"line\">   /*</div><div class=\"line\">    * Copyright (C) 2016 Never_yu (Neveryu.github.io) &lt;React.dong.yu@gmail.com&gt;</div><div class=\"line\">    * Sina Weibo (http://weibo.com/Neveryu)</div><div class=\"line\">    *</div><div class=\"line\">    * Licensed under the Apache License, Version 2.0 (the \"License\");</div><div class=\"line\">    * you may not use this file except in compliance with the License.</div><div class=\"line\">    * You may obtain a copy of the License at</div><div class=\"line\">    *</div><div class=\"line\">    *      http://www.apache.org/licenses/LICENSE-2.0</div><div class=\"line\">    *</div><div class=\"line\">    * Unless required by applicable law or agreed to in writing, software</div><div class=\"line\">    * distributed under the License is distributed on an \"AS IS\" BASIS,</div><div class=\"line\">    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class=\"line\">    * See the License for the specific language governing permissions and</div><div class=\"line\">    * limitations under the License.</div><div class=\"line\">    */</div><div class=\"line\">   function go() &#123;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">   var songs = [</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&amp;%20Stone%20-%20Lost.mp3\"</div><div class=\"line\">   ];</div><div class=\"line\"></div><div class=\"line\">   </div><div class=\"line\">   function c() &#123;</div><div class=\"line\">       var e = document.createElement(\"link\");</div><div class=\"line\">       e.setAttribute(\"type\", \"text/css\");</div><div class=\"line\">       e.setAttribute(\"rel\", \"stylesheet\");</div><div class=\"line\">       e.setAttribute(\"href\", f);</div><div class=\"line\">       e.setAttribute(\"class\", l);</div><div class=\"line\">       document.body.appendChild(e)</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function h() &#123;</div><div class=\"line\">       var e = document.getElementsByClassName(l);</div><div class=\"line\">       for (var t = 0; t &lt; e.length; t++) &#123;</div><div class=\"line\">           document.body.removeChild(e[t])</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function p() &#123;</div><div class=\"line\">       var e = document.createElement(\"div\");</div><div class=\"line\">       e.setAttribute(\"class\", a);</div><div class=\"line\">       document.body.appendChild(e);</div><div class=\"line\">       setTimeout(function() &#123;</div><div class=\"line\">           document.body.removeChild(e)</div><div class=\"line\">       &#125;, 100)</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function d(e) &#123;</div><div class=\"line\">       return &#123;</div><div class=\"line\">           height : e.offsetHeight,</div><div class=\"line\">           width : e.offsetWidth</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function v(i) &#123;</div><div class=\"line\">       var s = d(i);</div><div class=\"line\">       return s.height &gt; e &amp;&amp; s.height &lt; n &amp;&amp; s.width &gt; t &amp;&amp; s.width &lt; r</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function m(e) &#123;</div><div class=\"line\">       var t = e;</div><div class=\"line\">       var n = 0;</div><div class=\"line\">       while (!!t) &#123;</div><div class=\"line\">           n += t.offsetTop;</div><div class=\"line\">           t = t.offsetParent</div><div class=\"line\">       &#125;</div><div class=\"line\">       return n</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function g() &#123;</div><div class=\"line\">       var e = document.documentElement;</div><div class=\"line\">       if (!!window.innerWidth) &#123;</div><div class=\"line\">           return window.innerHeight</div><div class=\"line\">       &#125; else if (e &amp;&amp; !isNaN(e.clientHeight)) &#123;</div><div class=\"line\">           return e.clientHeight</div><div class=\"line\">       &#125;</div><div class=\"line\">       return 0</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function y() &#123;</div><div class=\"line\">       if (window.pageYOffset) &#123;</div><div class=\"line\">           return window.pageYOffset</div><div class=\"line\">       &#125;</div><div class=\"line\">       return Math.max(document.documentElement.scrollTop, document.body.scrollTop)</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function E(e) &#123;</div><div class=\"line\">       var t = m(e);</div><div class=\"line\">       return t &gt;= w &amp;&amp; t &lt;= b + w</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function S() &#123;</div><div class=\"line\">       var e = document.getElementById(\"audio_element_id\");</div><div class=\"line\">       if(e != null)&#123;</div><div class=\"line\">           var index = parseInt(e.getAttribute(\"curSongIndex\"));</div><div class=\"line\">           if(index &gt; songs.length - 2) &#123;</div><div class=\"line\">               index = 0;</div><div class=\"line\">           &#125; else &#123;</div><div class=\"line\">               index++;</div><div class=\"line\">           &#125;</div><div class=\"line\">           e.setAttribute(\"curSongIndex\", index);</div><div class=\"line\">           N();</div><div class=\"line\">       &#125;</div><div class=\"line\"></div><div class=\"line\">       e.src = i;</div><div class=\"line\">       e.play()</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function x(e) &#123;</div><div class=\"line\">       e.className += \" \" + s + \" \" + o</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function T(e) &#123;</div><div class=\"line\">       e.className += \" \" + s + \" \" + u[Math.floor(Math.random() * u.length)]</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function N() &#123;</div><div class=\"line\">       var e = document.getElementsByClassName(s);</div><div class=\"line\">       var t = new RegExp(\"\\\\b\" + s + \"\\\\b\");</div><div class=\"line\">       for (var n = 0; n &lt; e.length; ) &#123;</div><div class=\"line\">           e[n].className = e[n].className.replace(t, \"\")</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function initAudioEle() &#123;</div><div class=\"line\">       var e = document.getElementById(\"audio_element_id\");</div><div class=\"line\">       if(e === null)&#123;</div><div class=\"line\">           e = document.createElement(\"audio\");</div><div class=\"line\">           e.setAttribute(\"class\", l);</div><div class=\"line\">           e.setAttribute(\"curSongIndex\", 0);</div><div class=\"line\">           e.id = \"audio_element_id\";</div><div class=\"line\">           e.loop = false;</div><div class=\"line\">           e.bgcolor = 0;</div><div class=\"line\">           e.addEventListener(\"canplay\", function() &#123;</div><div class=\"line\">           setTimeout(function() &#123;</div><div class=\"line\">               x(k)</div><div class=\"line\">           &#125;, 500);</div><div class=\"line\">           setTimeout(function() &#123;</div><div class=\"line\">               N();</div><div class=\"line\">               p();</div><div class=\"line\">               for (var e = 0; e &lt; O.length; e++) &#123;</div><div class=\"line\">                   T(O[e])</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;, 15500)</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e.addEventListener(\"ended\", function() &#123;</div><div class=\"line\">           N();</div><div class=\"line\">           h();</div><div class=\"line\">           go();</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e.innerHTML = \" &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;\";</div><div class=\"line\">       document.body.appendChild(e);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   </div><div class=\"line\">   initAudioEle();</div><div class=\"line\">   var e = 30;</div><div class=\"line\">   var t = 30;</div><div class=\"line\">   var n = 350;</div><div class=\"line\">   var r = 350;</div><div class=\"line\"></div><div class=\"line\">   var curSongIndex = parseInt(document.getElementById(\"audio_element_id\").getAttribute(\"curSongIndex\"));</div><div class=\"line\">   var i = songs[curSongIndex];</div><div class=\"line\">   </div><div class=\"line\">   var s = \"mw-harlem_shake_me\";</div><div class=\"line\">   var o = \"im_first\";</div><div class=\"line\">   var u = [\"im_drunk\", \"im_baked\", \"im_trippin\", \"im_blown\"];</div><div class=\"line\">   var a = \"mw-strobe_light\";</div><div class=\"line\"></div><div class=\"line\">   /* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */</div><div class=\"line\">   var f = \"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\";</div><div class=\"line\">   </div><div class=\"line\">   var l = \"mw_added_css\";</div><div class=\"line\">   var b = g();</div><div class=\"line\">   var w = y();</div><div class=\"line\">   var C = document.getElementsByTagName(\"*\");</div><div class=\"line\">   var k = null;</div><div class=\"line\">   for (var L = 0; L &lt; C.length; L++) &#123;</div><div class=\"line\">       var A = C[L];</div><div class=\"line\">       if (v(A)) &#123;</div><div class=\"line\">           if (E(A)) &#123;</div><div class=\"line\">               k = A;</div><div class=\"line\">               break</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   if (A === null) &#123;</div><div class=\"line\">       console.warn(\"Could not find a node of the right size. Please try a different page.\");</div><div class=\"line\">       return</div><div class=\"line\">   &#125;</div><div class=\"line\">   c();</div><div class=\"line\">   S();</div><div class=\"line\">   var O = [];</div><div class=\"line\">   for (var L = 0; L &lt; C.length; L++) &#123;</div><div class=\"line\">       var A = C[L];</div><div class=\"line\">       if (v(A)) &#123;</div><div class=\"line\">           O.push(A)</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   &#125;)()'&gt;&lt;i class=\"menu-item-icon fa fa-music fa-fw\"&gt;&lt;/i&gt;High一下&lt;/a&gt; &lt;/li&gt;</div><div class=\"line\">         &lt;!-- end High一下 --&gt;</div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"第二种\"><a href=\"#第二种\" class=\"headerlink\" title=\"第二种\"></a><strong>第二种</strong></h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161205/111721588.png\" alt=\"mark\"></p>\n<p>不修改<strong>themes\\next\\layout\\_partials\\header.swig</strong>文件<br>而是修改<strong>themes\\next\\layout\\_macro\\sidebar.swig</strong><br><figure class=\"highlight verilog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div></pre></td><td class=\"code\"><pre><div class=\"line\">        &#123;% <span class=\"keyword\">if</span> theme<span class=\"variable\">.rss</span> %&#125;</div><div class=\"line\">          &lt;div <span class=\"keyword\">class</span>=<span class=\"string\">\"feed-link motion-element\"</span>&gt;</div><div class=\"line\">            &lt;a href=<span class=\"string\">\"&#123;&#123; url_for(theme.rss) &#125;&#125;\"</span> rel=<span class=\"string\">\"alternate\"</span>&gt;</div><div class=\"line\">              &lt;i <span class=\"keyword\">class</span>=<span class=\"string\">\"fa fa-rss\"</span>&gt;&lt;/i&gt;</div><div class=\"line\">              RSS</div><div class=\"line\">            &lt;/a&gt;</div><div class=\"line\">&lt;!-- 在RSS的div内加入，引用相同的样式 --&gt;</div><div class=\"line\">&lt;!-- 自定义High一下的功能 --&gt;</div><div class=\"line\">&lt;a href='javascript:(</div><div class=\"line\">   <span class=\"keyword\">function</span> go() &#123;</div><div class=\"line\">   <span class=\"keyword\">var</span> songs = [</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&amp;%20Stone%20-%20Lost.mp3\"</span></div><div class=\"line\">   ];</div><div class=\"line\">   </div><div class=\"line\">   <span class=\"keyword\">function</span> c() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.createElement</span>(<span class=\"string\">\"link\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"type\"</span>, <span class=\"string\">\"text/css\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"rel\"</span>, <span class=\"string\">\"stylesheet\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"href\"</span>, f);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"class\"</span>, l);</div><div class=\"line\">       document<span class=\"variable\">.body</span><span class=\"variable\">.appendChild</span>(e)</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> h() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementsByClassName</span>(l);</div><div class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> t = <span class=\"number\">0</span>; t &lt; e<span class=\"variable\">.length</span>; t++) &#123;</div><div class=\"line\">           document<span class=\"variable\">.body</span><span class=\"variable\">.removeChild</span>(e[t])</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> p() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.createElement</span>(<span class=\"string\">\"div\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"class\"</span>, a);</div><div class=\"line\">       document<span class=\"variable\">.body</span><span class=\"variable\">.appendChild</span>(e);</div><div class=\"line\">       setTimeout(<span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">           document<span class=\"variable\">.body</span><span class=\"variable\">.removeChild</span>(e)</div><div class=\"line\">       &#125;, <span class=\"number\">100</span>)</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> d(e) &#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">           height : e<span class=\"variable\">.offsetHeight</span>,</div><div class=\"line\">           width : e<span class=\"variable\">.offsetWidth</span></div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> v(i) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> s = d(i);</div><div class=\"line\">       <span class=\"keyword\">return</span> s<span class=\"variable\">.height</span> &gt; e &amp;&amp; s<span class=\"variable\">.height</span> &lt; n &amp;&amp; s<span class=\"variable\">.width</span> &gt; t &amp;&amp; s<span class=\"variable\">.width</span> &lt; r</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> m(e) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> t = e;</div><div class=\"line\">       <span class=\"keyword\">var</span> n = <span class=\"number\">0</span>;</div><div class=\"line\">       <span class=\"keyword\">while</span> (!!t) &#123;</div><div class=\"line\">           n += t<span class=\"variable\">.offsetTop</span>;</div><div class=\"line\">           t = t<span class=\"variable\">.offsetParent</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> n</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> g() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.documentElement</span>;</div><div class=\"line\">       <span class=\"keyword\">if</span> (!!window<span class=\"variable\">.innerWidth</span>) &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> window<span class=\"variable\">.innerHeight</span></div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e &amp;&amp; !isNaN(e<span class=\"variable\">.clientHeight</span>)) &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> e<span class=\"variable\">.clientHeight</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> <span class=\"number\">0</span></div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> y() &#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (window<span class=\"variable\">.pageYOffset</span>) &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> window<span class=\"variable\">.pageYOffset</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> Math<span class=\"variable\">.max</span>(document<span class=\"variable\">.documentElement</span><span class=\"variable\">.scrollTop</span>, document<span class=\"variable\">.body</span><span class=\"variable\">.scrollTop</span>)</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> E(e) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> t = m(e);</div><div class=\"line\">       <span class=\"keyword\">return</span> t &gt;= w &amp;&amp; t &lt;= b + w</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> S() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementById</span>(<span class=\"string\">\"audio_element_id\"</span>);</div><div class=\"line\">       <span class=\"keyword\">if</span>(e != <span class=\"literal\">null</span>)&#123;</div><div class=\"line\">           <span class=\"keyword\">var</span> index = parseInt(e<span class=\"variable\">.getAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>));</div><div class=\"line\">           <span class=\"keyword\">if</span>(index &gt; songs<span class=\"variable\">.length</span> - <span class=\"number\">2</span>) &#123;</div><div class=\"line\">               index = <span class=\"number\">0</span>;</div><div class=\"line\">           &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">               index++;</div><div class=\"line\">           &#125;</div><div class=\"line\">           e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>, index);</div><div class=\"line\">           N();</div><div class=\"line\">       &#125;</div><div class=\"line\">       e<span class=\"variable\">.src</span> = i;</div><div class=\"line\">       e<span class=\"variable\">.play</span>()</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> x(e) &#123;</div><div class=\"line\">       e<span class=\"variable\">.className</span> += <span class=\"string\">\" \"</span> + s + <span class=\"string\">\" \"</span> + o</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> T(e) &#123;</div><div class=\"line\">       e<span class=\"variable\">.className</span> += <span class=\"string\">\" \"</span> + s + <span class=\"string\">\" \"</span> + u[Math<span class=\"variable\">.floor</span>(Math<span class=\"variable\">.random</span>() * u<span class=\"variable\">.length</span>)]</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> N() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementsByClassName</span>(s);</div><div class=\"line\">       <span class=\"keyword\">var</span> t = <span class=\"keyword\">new</span> RegExp(<span class=\"string\">\"\\\\b\"</span> + s + <span class=\"string\">\"\\\\b\"</span>);</div><div class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> n = <span class=\"number\">0</span>; n &lt; e<span class=\"variable\">.length</span>; ) &#123;</div><div class=\"line\">           e[n]<span class=\"variable\">.className</span> = e[n]<span class=\"variable\">.className</span><span class=\"variable\">.replace</span>(t, <span class=\"string\">\"\"</span>)</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> initAudioEle() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementById</span>(<span class=\"string\">\"audio_element_id\"</span>);</div><div class=\"line\">       <span class=\"keyword\">if</span>(e === <span class=\"literal\">null</span>)&#123;</div><div class=\"line\">           e = document<span class=\"variable\">.createElement</span>(<span class=\"string\">\"audio\"</span>);</div><div class=\"line\">           e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"class\"</span>, l);</div><div class=\"line\">           e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>, <span class=\"number\">0</span>);</div><div class=\"line\">           e<span class=\"variable\">.id</span> = <span class=\"string\">\"audio_element_id\"</span>;</div><div class=\"line\">           e<span class=\"variable\">.loop</span> = false;</div><div class=\"line\">           e<span class=\"variable\">.bgcolor</span> = <span class=\"number\">0</span>;</div><div class=\"line\">           e<span class=\"variable\">.addEventListener</span>(<span class=\"string\">\"canplay\"</span>, <span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">           setTimeout(<span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">               x(k)</div><div class=\"line\">           &#125;, <span class=\"number\">500</span>);</div><div class=\"line\">           setTimeout(<span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">               N();</div><div class=\"line\">               p();</div><div class=\"line\">               <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> e = <span class=\"number\">0</span>; e &lt; O<span class=\"variable\">.length</span>; e++) &#123;</div><div class=\"line\">                   T(O[e])</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;, <span class=\"number\">15500</span>)</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e<span class=\"variable\">.addEventListener</span>(<span class=\"string\">\"ended\"</span>, <span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">           N();</div><div class=\"line\">           h();</div><div class=\"line\">           go();</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e<span class=\"variable\">.innerHTML</span> = <span class=\"string\">\" &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;\"</span>;</div><div class=\"line\">       document<span class=\"variable\">.body</span><span class=\"variable\">.appendChild</span>(e);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   </div><div class=\"line\">   initAudioEle();</div><div class=\"line\">   <span class=\"keyword\">var</span> e = <span class=\"number\">30</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> t = <span class=\"number\">30</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> n = <span class=\"number\">350</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> r = <span class=\"number\">350</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> curSongIndex = parseInt(document<span class=\"variable\">.getElementById</span>(<span class=\"string\">\"audio_element_id\"</span>)<span class=\"variable\">.getAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>));</div><div class=\"line\">   <span class=\"keyword\">var</span> i = songs[curSongIndex];</div><div class=\"line\">   </div><div class=\"line\">   <span class=\"keyword\">var</span> s = <span class=\"string\">\"mw-harlem_shake_me\"</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> o = <span class=\"string\">\"im_first\"</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> u = [<span class=\"string\">\"im_drunk\"</span>, <span class=\"string\">\"im_baked\"</span>, <span class=\"string\">\"im_trippin\"</span>, <span class=\"string\">\"im_blown\"</span>];</div><div class=\"line\">   <span class=\"keyword\">var</span> a = <span class=\"string\">\"mw-strobe_light\"</span>;</div><div class=\"line\">   <span class=\"comment\">/* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */</span></div><div class=\"line\">   <span class=\"keyword\">var</span> f = <span class=\"string\">\"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\"</span>;</div><div class=\"line\">   </div><div class=\"line\">   <span class=\"keyword\">var</span> l = <span class=\"string\">\"mw_added_css\"</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> b = g();</div><div class=\"line\">   <span class=\"keyword\">var</span> w = y();</div><div class=\"line\">   <span class=\"keyword\">var</span> C = document<span class=\"variable\">.getElementsByTagName</span>(<span class=\"string\">\"*\"</span>);</div><div class=\"line\">   <span class=\"keyword\">var</span> k = <span class=\"literal\">null</span>;</div><div class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> L = <span class=\"number\">0</span>; L &lt; C<span class=\"variable\">.length</span>; L++) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> A = C[L];</div><div class=\"line\">       <span class=\"keyword\">if</span> (v(A)) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (E(A)) &#123;</div><div class=\"line\">               k = A;</div><div class=\"line\">               <span class=\"keyword\">break</span></div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">if</span> (A === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">       console<span class=\"variable\">.warn</span>(<span class=\"string\">\"Could not find a node of the right size. Please try a different page.\"</span>);</div><div class=\"line\">       <span class=\"keyword\">return</span></div><div class=\"line\">   &#125;</div><div class=\"line\">   c();</div><div class=\"line\">   S();</div><div class=\"line\">   <span class=\"keyword\">var</span> O = [];</div><div class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> L = <span class=\"number\">0</span>; L &lt; C<span class=\"variable\">.length</span>; L++) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> A = C[L];</div><div class=\"line\">       <span class=\"keyword\">if</span> (v(A)) &#123;</div><div class=\"line\">           O<span class=\"variable\">.push</span>(A)</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   &#125;)()'&gt;&lt;i <span class=\"keyword\">class</span>=<span class=\"string\">\"menu-item-icon fa fa-music fa-fw\"</span>&gt;&lt;/i&gt;High&lt;/a&gt;</div><div class=\"line\">&lt;/div&gt;</div><div class=\"line\">         &lt;!-- <span class=\"keyword\">end</span> High一下 --&gt;</div><div class=\"line\">        &#123;% endif %&#125;</div></pre></td></tr></table></figure></p>\n<p>如果需要并排显示，像这样子：<img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161205/154359849.png\" alt=\"mark\"><br>修改文件：<strong>\\themes\\source\\css_schemes\\Pisces（主题风格对应的文件夹）_sidebar.styl</strong><br>找到这样一段，把<strong>display: block;</strong>改为<strong>display: inline-block;</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.feed-link</span> <span class=\"selector-tag\">a</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">display</span>: inline-block;   <span class=\"comment\">//并行显示，block则为分行显示</span></div><div class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">$orange</span>;</div><div class=\"line\">  <span class=\"attribute\">border</span>: none;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"给-Github-添加-README\"><a href=\"#给-Github-添加-README\" class=\"headerlink\" title=\"给 Github 添加 README\"></a>给 Github 添加 README</h3><p>默认情况下，Github中每一个项目，我们希望有一份<strong>README.md</strong>的文件来作为项目的说明，但是我们在项目根目录下的<code>blog\\source</code>目录下创建一份<strong>README.md</strong>文件，写好说明介绍，部署的时候，这个<strong>README.md</strong>会被hexo解析掉，而不会被解析到Github中去的。<br>正确的解决方法其实很简单：<br><strong> 把<code>README.md</code>文件的后缀名改成”MDOWN”然后扔到<code>blog\\source</code>文件夹下即可，这样hexo不会解析，Github也会将其作为MD文件解析。 </strong></p>\n<p>或者你还可以在站点配置文件中修改，以禁止编译文件。<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">skip_render:</span></div><div class=\"line\">    - README.md</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"加入左上角「fork-me-on-github」\"><a href=\"#加入左上角「fork-me-on-github」\" class=\"headerlink\" title=\"加入左上角「fork me on github」\"></a>加入左上角「fork me on github」</h3><p><a href=\"https://github.com/blog/273-github-ribbons\" target=\"_blank\" rel=\"external\">github官方教程</a></p>\n<hr>\n<h3 id=\"给-Blog-添加-LICENSE\"><a href=\"#给-Blog-添加-LICENSE\" class=\"headerlink\" title=\"给 Blog 添加 LICENSE\"></a>给 Blog 添加 LICENSE</h3><p>修改主题配置文件中的 160 行左右：</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Creative Commons 4.0 International License.</div><div class=\"line\"># http:<span class=\"comment\">//creativecommons.org/</span></div><div class=\"line\"># Available: <span class=\"keyword\">by</span> | <span class=\"keyword\">by</span>-nc | <span class=\"keyword\">by</span>-nc-nd | <span class=\"keyword\">by</span>-nc-<span class=\"keyword\">sa</span> | <span class=\"keyword\">by</span>-nd | <span class=\"keyword\">by</span>-<span class=\"keyword\">sa</span> | zero</div><div class=\"line\">creative_commons: <span class=\"keyword\">by</span>-nc-<span class=\"keyword\">sa</span></div><div class=\"line\">#creative_commons:</div></pre></td></tr></table></figure>\n<p>取消第 4 行的注释，然后选择你想使用的 LICENSE 即可，可选项参照第 3 行。</p>\n<hr>\n<h3 id=\"错误信息\"><a href=\"#错误信息\" class=\"headerlink\" title=\"错误信息\"></a>错误信息</h3><p><strong>LF will be replaced</strong><br>Windows 提交命令的时候出现 <strong>warning: LF will be replaced by CRLF in XXXXXXXXXXXXXX</strong> 的警告。输入命令：<br><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> core.autocrlf <span class=\"literal\">false</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> your_site/</div><div class=\"line\">touch Staticfile  <span class=\"comment\">#创建静态文件标识，用于Github识别，名字必须是Staticfile</span></div><div class=\"line\">hexo clean   <span class=\"comment\">#清除以前生成的旧文件</span></div><div class=\"line\">hexo g       <span class=\"comment\">#生成新的站点文件</span></div><div class=\"line\">hexo d       <span class=\"comment\">#部署到Github上</span></div></pre></td></tr></table></figure>\n<p>可参考：<a href=\"http://shomy.top/2016/03/03/hexo-in-coding-github/\" target=\"_blank\" rel=\"external\">http://shomy.top/2016/03/03/hexo-in-coding-github/</a><br>部署完成打开网址就能看到效果了。</p>\n<p>Hexo的部署只会把生成的文件上传到仓库中，本地的<strong>设置，主题，*.md文件</strong>等等都不会上传，换一台电脑就没法干活了，一旦删除，那基本上所有的努力都白费了，这里介绍2种备份方法：</p>\n<ul>\n<li>1.新建一个仓库专门用来存放这些文件（最安全最方便的办法）</li>\n<li>2.和发布的网站使用同一个仓库，master用来存放这些文件，新建分支来发布网站（注意pages服务绑定该分支，不要合并分支，一旦合并就全部混乱了）<br>两种方法都要在网站根目录设定好远程端仓库：<code>git add remote XXXX</code><br>每次发布完网页，就顺手执行以下代码，把文档也同步到仓库中。<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> .</span></div><div class=\"line\">git commit -m <span class=\"string\">\"xxx\"</span></div><div class=\"line\">git push</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h1 id=\"绑定域名\"><a href=\"#绑定域名\" class=\"headerlink\" title=\"绑定域名\"></a>绑定域名</h1><p>原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。</p>\n<ul>\n<li>1· 在你的项目下新建一个<strong>CNAME</strong>文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是<strong> www.leolan.top</strong>和<strong> leolan.top</strong>（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送<strong>CNAME文件</strong>到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在<strong>CNAME文件</strong>里绑定两个，在Pages页面也绑定两个。</li>\n<li>2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 <code>username.github.io.</code>，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png\" alt=\"\"><br>过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的<strong>CNAME</strong>文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。</li>\n</ul>\n<hr>\n","excerpt":"","more":"<h1 id=\"安装Hexo\"><a href=\"#安装Hexo\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h1><p>Hexo是用node-js写的，hexo生成静态页面的速度要比较快，hexo是本地生成html再上传。<br>官网：<a href=\"https://hexo.io/zh-cn/docs/\">https://hexo.io/zh-cn/docs/</a></p>\n<h2 id=\"安装Node-js\"><a href=\"#安装Node-js\" class=\"headerlink\" title=\"安装Node.js\"></a>安装Node.js</h2><p>官网下载对应平台安装包安装：<a href=\"https://nodejs.org\">https://nodejs.org</a><br>详见：<a href=\"http://leolan.top/2016/11/02/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-2016-11-02-Node-js%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/\">Node.js开发环境搭建</a></p>\n<h2 id=\"安装Hexo-1\"><a href=\"#安装Hexo-1\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h2><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install </span>-g hexo-cli  <span class=\"comment\">#Mac下西安**sudo -i**切换到root权限。</span></div><div class=\"line\">hexo init <span class=\"keyword\">blog </span>          <span class=\"comment\">#blog文件夹要先建好，这一步自动生成网站。</span></div><div class=\"line\">cd <span class=\"keyword\">blog</div><div class=\"line\"></span>npm <span class=\"keyword\">install </span>             <span class=\"comment\">#安装依赖的插件。</span></div><div class=\"line\">hexo server              <span class=\"comment\">#运行服务</span></div></pre></td></tr></table></figure>\n<p>这时可以在浏览器打开网页。<code>hexo server</code>的简化命令为<code>hexo s</code>；指定端口：<code>-p xxxx</code><br>和jekyll一样是通过修改<strong>_config.yml</strong>文件来配置站点信息的。（在Hexo中，根目录下的<strong>_config.yml</strong>文件是用来配置网站信息的；主题目录下的<strong>_config.yml</strong>文件是用来配置文章主题，页面等等的）</p>\n<p>默认的目录结构如下：</p>\n<figure class=\"highlight haxe\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">├── .deploy       <span class=\"meta\">#执行hexo deploy命令部署到GitHub上的内容目录</span></div><div class=\"line\">├── <span class=\"keyword\">public</span>        <span class=\"meta\">#执行hexo generate命令，输出的静态网页内容目录</span></div><div class=\"line\">├── scaffolds     <span class=\"meta\">#layout模板文件目录，其中的md文件可以添加编辑</span></div><div class=\"line\">├── scripts       <span class=\"meta\">#扩展脚本目录，这里可以自定义一些javascript脚本</span></div><div class=\"line\">├── source        <span class=\"meta\">#文章源码目录，该目录下的markdown和html文件均会被hexo处理。404文件，CNAME文件等都应该放这里。</span></div><div class=\"line\">| ├── _drafts     <span class=\"meta\">#草稿文章</span></div><div class=\"line\">| └── _posts      <span class=\"meta\">#发布的文章</span></div><div class=\"line\">├── themes        <span class=\"meta\">#主题文件目录</span></div><div class=\"line\">├── _config.yml   <span class=\"meta\">#全局配置文件，大多数的设置都在这里</span></div><div class=\"line\">└── <span class=\"keyword\">package</span>.json  <span class=\"meta\">#应用程序数据，指明hexo的版本等信息。在push到github时提示*.json错误，删掉这个文件或删掉db.json就行。</span></div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"配置优化、定制站点\"><a href=\"#配置优化、定制站点\" class=\"headerlink\" title=\"配置优化、定制站点\"></a>配置优化、定制站点</h1><p>Next官方设置说明：<a href=\"http://theme-next.iissnan.com/getting-started.html\">http://theme-next.iissnan.com/getting-started.html</a></p>\n<h2 id=\"站点配置\"><a href=\"#站点配置\" class=\"headerlink\" title=\"站点配置\"></a>站点配置</h2><p>以下是我的配置文件：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Hexo Configuration</span></div><div class=\"line\"><span class=\"comment\">## Docs: https://hexo.io/docs/configuration.html</span></div><div class=\"line\"><span class=\"comment\">## Source: https://github.com/hexojs/hexo/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Site</span></div><div class=\"line\"><span class=\"attr\">title:</span> Leo Lan的博客</div><div class=\"line\"><span class=\"attr\">subtitle:</span>  有时候正是不报期望的人做出了人们不敢期望之事！</div><div class=\"line\"><span class=\"attr\">description:</span> Better late than never</div><div class=\"line\"><span class=\"attr\">author:</span> LeoLan</div><div class=\"line\"><span class=\"attr\">language:</span> zh-Hans</div><div class=\"line\"><span class=\"attr\">timezone:</span> Asia/Shanghai</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># URL</span></div><div class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></div><div class=\"line\"><span class=\"attr\">url:</span> https://www.leolan.top</div><div class=\"line\"><span class=\"attr\">coding_url:</span> https://www.leolan.top</div><div class=\"line\"><span class=\"attr\">root:</span> /</div><div class=\"line\"><span class=\"attr\">permalink:</span> posts/:abbrlink/</div><div class=\"line\"><span class=\"attr\">permalink_defaults:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Directory</span></div><div class=\"line\"><span class=\"attr\">source_dir:</span> source</div><div class=\"line\"><span class=\"attr\">public_dir:</span> public</div><div class=\"line\"><span class=\"attr\">tag_dir:</span> tags</div><div class=\"line\"><span class=\"attr\">archive_dir:</span> archives</div><div class=\"line\"><span class=\"attr\">category_dir:</span> categories</div><div class=\"line\"><span class=\"attr\">code_dir:</span> downloads/code</div><div class=\"line\"><span class=\"attr\">i18n_dir:</span> :lang</div><div class=\"line\"><span class=\"comment\">#禁止编译README.md文件，也可以在文件中增加yml文件头layout: false，---结尾</span></div><div class=\"line\"><span class=\"attr\">skip_render:</span></div><div class=\"line\"><span class=\"bullet\">    -</span> baidu_verify_dc4dBM4StW.html</div><div class=\"line\"><span class=\"bullet\">    -</span> googled7e43f3624e0f703.html</div><div class=\"line\"><span class=\"bullet\">    -</span> CNAME</div><div class=\"line\"><span class=\"bullet\">    -</span> README.md</div><div class=\"line\"><span class=\"bullet\">    -</span> .nojekyll</div><div class=\"line\"><span class=\"bullet\">    -</span> Staticfile</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 假设你的Source文件夹里面有个Demo目录，要忽略Demo目录下的所有html页面，具体如下：</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># skip_render: Demo/*.html</span></div><div class=\"line\"><span class=\"comment\"># 文件匹配是基于正则匹配的，更复杂的情况如下</span></div><div class=\"line\"><span class=\"comment\"># 1.单个文件夹下全部文件：skip_render: demo/*</span></div><div class=\"line\"><span class=\"comment\"># 2.单个文件夹下指定类型文件：skip_render: demo/*.html</span></div><div class=\"line\"><span class=\"comment\"># 3.单个文件夹下全部文件以及子目录:skip_render: demo/**</span></div><div class=\"line\"><span class=\"comment\"># 4.多个文件夹以及各种复杂情况：</span></div><div class=\"line\"><span class=\"comment\"># skip_render:</span></div><div class=\"line\"><span class=\"comment\">#     - 'demo/*.html'</span></div><div class=\"line\"><span class=\"comment\">#     - 'demo/**'</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#强制包含.nojekyll文件（放在source下），这样hexo g时，.开头的文件具不会被忽略，适用于5.0以下版本的next主题（github屏蔽了一些文件夹）</span></div><div class=\"line\"><span class=\"attr\">include:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> .nojekyll</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># abbrlink config 生成文章永久链接（利于SEO）需要安装插件</span></div><div class=\"line\"><span class=\"attr\">abbrlink:</span></div><div class=\"line\"><span class=\"attr\">  alg:</span> crc16  <span class=\"comment\"># 算法：crc16(default) and crc32 </span></div><div class=\"line\"><span class=\"attr\">  rep:</span> dec    <span class=\"comment\"># 进制：dec(default) and hex</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">baidu_url_submit:</span>  <span class=\"comment\">#百度链接推送，推送刚刚生成的永久链接</span></div><div class=\"line\"><span class=\"attr\">  count:</span> <span class=\"number\">5</span> <span class=\"comment\">## 比如3，代表提交最新的三个链接</span></div><div class=\"line\"><span class=\"attr\">  host:</span> www.leolan.top <span class=\"comment\">## 在百度站长平台中注册的域名</span></div><div class=\"line\"><span class=\"attr\">  token:</span> kZ5xboXBFPxQ0g7N <span class=\"comment\">## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span></div><div class=\"line\"><span class=\"attr\">  path:</span> /baidu_urls.txt <span class=\"comment\">## 文本文档的地址， 新链接会保存在此文本文档里</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Writing  官网：https://hexo.io/zh-cn/docs/writing.html</span></div><div class=\"line\"><span class=\"attr\">new_post_name:</span> :year-:month-:day-:title.md <span class=\"comment\"># File name of new posts</span></div><div class=\"line\"><span class=\"attr\">default_layout:</span> post</div><div class=\"line\"><span class=\"attr\">titlecase:</span> <span class=\"literal\">false</span> <span class=\"comment\"># Transform title into titlecase</span></div><div class=\"line\"><span class=\"attr\">external_link:</span> <span class=\"literal\">true</span> <span class=\"comment\"># Open external links in new tab</span></div><div class=\"line\"><span class=\"attr\">filename_case:</span> <span class=\"number\">0</span></div><div class=\"line\"><span class=\"attr\">render_drafts:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">post_asset_folder:</span> <span class=\"literal\">false</span>   <span class=\"comment\">#新建文章时自动生成本地存放图片等资源的文件夹</span></div><div class=\"line\"><span class=\"attr\">relative_link:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">future:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">highlight:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  line_number:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  auto_detect:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  tab_replace:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Category &amp; Tag</span></div><div class=\"line\"><span class=\"attr\">default_category:</span> uncategorized</div><div class=\"line\"><span class=\"attr\">category_map:</span></div><div class=\"line\"><span class=\"attr\">tag_map:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Date / Time format</span></div><div class=\"line\"><span class=\"comment\">## Hexo uses Moment.js to parse and display date</span></div><div class=\"line\"><span class=\"comment\">## You can customize the date format as defined in</span></div><div class=\"line\"><span class=\"comment\">## http://momentjs.com/docs/#/displaying/format/</span></div><div class=\"line\"><span class=\"attr\">date_format:</span> YYYY-MM-DD</div><div class=\"line\"><span class=\"attr\">time_format:</span> HH:mm:ss</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Pagination  单独页面文章数目，需要安装以下3个插件</span></div><div class=\"line\"><span class=\"comment\">#npm install --save hexo-generator-index</span></div><div class=\"line\"><span class=\"comment\">#npm install --save hexo-generator-archive</span></div><div class=\"line\"><span class=\"comment\">#npm install --save hexo-generator-tag</span></div><div class=\"line\"><span class=\"comment\">## Set per_page to 0 to disable pagination</span></div><div class=\"line\"><span class=\"attr\">index_generator:</span></div><div class=\"line\"><span class=\"attr\">  per_page:</span> <span class=\"number\">5</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">archive_generator:</span></div><div class=\"line\"><span class=\"attr\">  per_page:</span> <span class=\"number\">20</span></div><div class=\"line\"><span class=\"attr\">  yearly:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  monthly:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">tag_generator:</span></div><div class=\"line\"><span class=\"attr\">  per_page:</span> <span class=\"number\">10</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">pagination_dir:</span> page</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Extensions 主题选择</span></div><div class=\"line\"><span class=\"comment\">## Plugins: https://hexo.io/plugins/</span></div><div class=\"line\"><span class=\"comment\">## Themes: https://hexo.io/themes/</span></div><div class=\"line\"><span class=\"attr\">theme:</span> next5<span class=\"number\">.1</span></div><div class=\"line\"><span class=\"comment\">#theme: next0.4</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Deployment 自动部署到仓库</span></div><div class=\"line\"><span class=\"comment\">## 官方文档Docs: https://hexo.io/docs/deployment.html   有部署到各种服务器的方法</span></div><div class=\"line\"><span class=\"comment\">## 参考：http://www.lxway.com/240950852.htm</span></div><div class=\"line\"><span class=\"comment\">#不管是github还是coding，type都填写git</span></div><div class=\"line\"><span class=\"attr\">deploy:</span></div><div class=\"line\"><span class=\"attr\">- type:</span> git</div><div class=\"line\"><span class=\"attr\">  repo:</span> git@git.coding.net:leolan/blog.git,master</div><div class=\"line\"><span class=\"attr\">  message:</span> <span class=\"string\">'LeoLan updated：<span class=\"template-variable\">&#123;&#123;now(\"YYYY-MM-DD HH:mm:ss\")&#125;&#125;</span>'</span>  <span class=\"comment\">#这个是commit的说明，因为是发布站点，方便看到发布时间。</span></div><div class=\"line\"><span class=\"attr\">- type:</span> git</div><div class=\"line\"><span class=\"attr\">  repo:</span> git@github.com:MyLeoLan/blog.git,master</div><div class=\"line\"><span class=\"attr\">  message:</span> <span class=\"string\">'LeoLan updated：<span class=\"template-variable\">&#123;&#123;now(\"YYYY-MM-DD HH:mm:ss\")&#125;&#125;</span>'</span></div><div class=\"line\"><span class=\"comment\">#deploy:</span></div><div class=\"line\"><span class=\"comment\">#- type: git</span></div><div class=\"line\"><span class=\"comment\">#  repo:</span></div><div class=\"line\"><span class=\"comment\">#- type: heroku（另一种云平台）</span></div><div class=\"line\"><span class=\"comment\">#  repo:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Disqus #Disqus评论系统</span></div><div class=\"line\"><span class=\"attr\">disqus_shortname:</span> leolan</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#plugins: #插件，例如生成 RSS 和站点地图的</span></div><div class=\"line\"><span class=\"comment\">#hexo-generator-sitemap</span></div><div class=\"line\"><span class=\"comment\">#- hexo-generator-baidu-sitemap</span></div><div class=\"line\"><span class=\"attr\">plugins:</span></div><div class=\"line\">  hexo-generator-feed</div><div class=\"line\">  hexo-generator-baidu-sitemap</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">sitemap:</span></div><div class=\"line\"><span class=\"attr\">  path:</span> sitemap.xml    </div><div class=\"line\"><span class=\"attr\">baidusitemap:</span></div><div class=\"line\"><span class=\"attr\">  path:</span> baidusitemap.xml</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Social links 社交链接</span></div><div class=\"line\"><span class=\"attr\">social:</span></div><div class=\"line\"><span class=\"attr\">  GitHub:</span> https://github.com/myleolan</div><div class=\"line\"><span class=\"attr\">  Coding:</span> https://coding.net/u/leolan</div><div class=\"line\"><span class=\"attr\">  CSDN:</span> http://blog.csdn.net/lan842632</div><div class=\"line\"><span class=\"attr\">  OSchina:</span> https://my.oschina.net/leolan/blog</div><div class=\"line\">  <span class=\"comment\">#Twitter: https://twitter.com/lmintlcx</span></div><div class=\"line\">  <span class=\"comment\">#Zhihu: http://www.zhihu.com/people/lmintlcx</span></div><div class=\"line\">  <span class=\"comment\">#Douban: http://www.douban.com/people/lmintlcx</span></div><div class=\"line\">  <span class=\"comment\">#Weibo: http://weibo.com/u/3233729080</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">duoshuo_shortname:</span> leolan</div><div class=\"line\"><span class=\"comment\"># 多说热评文章 true 或者 false</span></div><div class=\"line\"><span class=\"attr\">duoshuo_hotartical:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"comment\"># 多说分享服务</span></div><div class=\"line\"><span class=\"attr\">duoshuo_share:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"comment\"># 百度分享服务</span></div><div class=\"line\"><span class=\"attr\">baidushare:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#打赏功能</span></div><div class=\"line\"><span class=\"attr\">reward_comment:</span> 您的支持将鼓励我继续创作,非常感谢！</div><div class=\"line\"><span class=\"attr\">alipay:</span> http://ofyfogrgx.bkt.clouddn.com//pay/alipay.jpg</div><div class=\"line\"><span class=\"attr\">wechatpay:</span> http://ofyfogrgx.bkt.clouddn.com//pay/weixinpay.png</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#站点建立时间</span></div><div class=\"line\"><span class=\"attr\">since:</span> <span class=\"number\">2016</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#百度分析</span></div><div class=\"line\"><span class=\"attr\">baidu_analytics:</span> dc0e85252eeff3a87aa87f35d92a8d33</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#本地搜索</span></div><div class=\"line\"><span class=\"attr\">search:</span></div><div class=\"line\"><span class=\"attr\">  path:</span> search.xml</div><div class=\"line\"><span class=\"attr\">  field:</span> post</div><div class=\"line\"><span class=\"attr\">  format:</span> html</div><div class=\"line\"><span class=\"attr\">  limit:</span> <span class=\"number\">10000</span></div></pre></td></tr></table></figure>\n<h2 id=\"主题配置\"><a href=\"#主题配置\" class=\"headerlink\" title=\"主题配置\"></a>主题配置</h2><p>推荐Next主题，简单简洁，官网：<a href=\"http://theme-next.iissnan.com/\">http://theme-next.iissnan.com/</a><br>安装最新版：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cd</span> your-hexo-site</div><div class=\"line\">git clone http<span class=\"variable\">s:</span>//github.<span class=\"keyword\">com</span>/iissnan/hexo-theme-<span class=\"keyword\">next</span> themes/<span class=\"keyword\">next</span></div></pre></td></tr></table></figure></p>\n<p>在主题目录下可以看到next文件夹，修改<strong>站点配置文件_config.yml</strong>中的<code>theme: next</code><br><code>hexo clean &amp;&amp; hexo s</code>就可以看到新主题生效啦！<br>接下来修改<strong>主题配置文件_config.yml</strong>，以下是我的配置。<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div><div class=\"line\">282</div><div class=\"line\">283</div><div class=\"line\">284</div><div class=\"line\">285</div><div class=\"line\">286</div><div class=\"line\">287</div><div class=\"line\">288</div><div class=\"line\">289</div><div class=\"line\">290</div><div class=\"line\">291</div><div class=\"line\">292</div><div class=\"line\">293</div><div class=\"line\">294</div><div class=\"line\">295</div><div class=\"line\">296</div><div class=\"line\">297</div><div class=\"line\">298</div><div class=\"line\">299</div><div class=\"line\">300</div><div class=\"line\">301</div><div class=\"line\">302</div><div class=\"line\">303</div><div class=\"line\">304</div><div class=\"line\">305</div><div class=\"line\">306</div><div class=\"line\">307</div><div class=\"line\">308</div><div class=\"line\">309</div><div class=\"line\">310</div><div class=\"line\">311</div><div class=\"line\">312</div><div class=\"line\">313</div><div class=\"line\">314</div><div class=\"line\">315</div><div class=\"line\">316</div><div class=\"line\">317</div><div class=\"line\">318</div><div class=\"line\">319</div><div class=\"line\">320</div><div class=\"line\">321</div><div class=\"line\">322</div><div class=\"line\">323</div><div class=\"line\">324</div><div class=\"line\">325</div><div class=\"line\">326</div><div class=\"line\">327</div><div class=\"line\">328</div><div class=\"line\">329</div><div class=\"line\">330</div><div class=\"line\">331</div><div class=\"line\">332</div><div class=\"line\">333</div><div class=\"line\">334</div><div class=\"line\">335</div><div class=\"line\">336</div><div class=\"line\">337</div><div class=\"line\">338</div><div class=\"line\">339</div><div class=\"line\">340</div><div class=\"line\">341</div><div class=\"line\">342</div><div class=\"line\">343</div><div class=\"line\">344</div><div class=\"line\">345</div><div class=\"line\">346</div><div class=\"line\">347</div><div class=\"line\">348</div><div class=\"line\">349</div><div class=\"line\">350</div><div class=\"line\">351</div><div class=\"line\">352</div><div class=\"line\">353</div><div class=\"line\">354</div><div class=\"line\">355</div><div class=\"line\">356</div><div class=\"line\">357</div><div class=\"line\">358</div><div class=\"line\">359</div><div class=\"line\">360</div><div class=\"line\">361</div><div class=\"line\">362</div><div class=\"line\">363</div><div class=\"line\">364</div><div class=\"line\">365</div><div class=\"line\">366</div><div class=\"line\">367</div><div class=\"line\">368</div><div class=\"line\">369</div><div class=\"line\">370</div><div class=\"line\">371</div><div class=\"line\">372</div><div class=\"line\">373</div><div class=\"line\">374</div><div class=\"line\">375</div><div class=\"line\">376</div><div class=\"line\">377</div><div class=\"line\">378</div><div class=\"line\">379</div><div class=\"line\">380</div><div class=\"line\">381</div><div class=\"line\">382</div><div class=\"line\">383</div><div class=\"line\">384</div><div class=\"line\">385</div><div class=\"line\">386</div><div class=\"line\">387</div><div class=\"line\">388</div><div class=\"line\">389</div><div class=\"line\">390</div><div class=\"line\">391</div><div class=\"line\">392</div><div class=\"line\">393</div><div class=\"line\">394</div><div class=\"line\">395</div><div class=\"line\">396</div><div class=\"line\">397</div><div class=\"line\">398</div><div class=\"line\">399</div><div class=\"line\">400</div><div class=\"line\">401</div><div class=\"line\">402</div><div class=\"line\">403</div><div class=\"line\">404</div><div class=\"line\">405</div><div class=\"line\">406</div><div class=\"line\">407</div><div class=\"line\">408</div><div class=\"line\">409</div><div class=\"line\">410</div><div class=\"line\">411</div><div class=\"line\">412</div><div class=\"line\">413</div><div class=\"line\">414</div><div class=\"line\">415</div><div class=\"line\">416</div><div class=\"line\">417</div><div class=\"line\">418</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Site Information Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Put your favicon.ico into `hexo-site/source/` directory.</span></div><div class=\"line\"><span class=\"attr\">favicon:</span> /<span class=\"number\">200.</span>png</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Set default keywords (Use a comma to separate) 站点关键词，利于SEO</span></div><div class=\"line\"><span class=\"attr\">keywords:</span> <span class=\"string\">\"Hexo, NexT, Leo Lan, leolan, Blog, myleolan, lan, coding\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Set rss to false to disable feed link.</span></div><div class=\"line\"><span class=\"comment\"># Leave rss as empty to use site's feed link.</span></div><div class=\"line\"><span class=\"comment\"># Set rss to specific value if you have burned your feed already.</span></div><div class=\"line\"><span class=\"attr\">rss:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Specify the date when the site was setup</span></div><div class=\"line\"><span class=\"comment\">#since: 2015</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Canonical, set a canonical link tag in your hexo, you could use it for your SEO of blog.</span></div><div class=\"line\"><span class=\"comment\"># See: https://support.google.com/webmasters/answer/139066</span></div><div class=\"line\"><span class=\"comment\"># Tips: Before you open this tag, remeber set up your URL in hexo _config.yml ( ex. url: http://yourdomain.com )</span></div><div class=\"line\"><span class=\"attr\">canonical:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Menu Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -&gt; archives)</span></div><div class=\"line\"><span class=\"attr\">menu:</span></div><div class=\"line\"><span class=\"attr\">  home:</span> /</div><div class=\"line\"><span class=\"attr\">  categories:</span> /categories</div><div class=\"line\"><span class=\"attr\">  tags:</span> /tags</div><div class=\"line\"><span class=\"attr\">  archives:</span> /archives</div><div class=\"line\"><span class=\"attr\">  about:</span> /about</div><div class=\"line\"><span class=\"attr\">  guestbook:</span> /guestbook</div><div class=\"line\"> <span class=\"comment\"># schedule: /schedule</span></div><div class=\"line\">  <span class=\"comment\">#commonweal: /404.html</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Enable/Disable menu icons.  菜单图标</span></div><div class=\"line\"><span class=\"comment\"># Icon Mapping:</span></div><div class=\"line\"><span class=\"comment\">#   Map a menu item to a specific FontAwesome icon name.</span></div><div class=\"line\"><span class=\"comment\">#   Key is the name of menu item and value is the name of FontAwsome icon. Key is case-senstive.</span></div><div class=\"line\"><span class=\"comment\">#   When an question mask icon presenting up means that the item has no mapping icon.</span></div><div class=\"line\"><span class=\"attr\">menu_icons:</span>   <span class=\"comment\">#http://fontawesome.io/icons/</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"comment\">#KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome</span></div><div class=\"line\"><span class=\"attr\">  home:</span> home</div><div class=\"line\"><span class=\"attr\">  about:</span> user</div><div class=\"line\"><span class=\"attr\">  categories:</span> th</div><div class=\"line\"><span class=\"attr\">  schedule:</span> calendar</div><div class=\"line\"><span class=\"attr\">  tags:</span> tags</div><div class=\"line\"><span class=\"attr\">  archives:</span> archive</div><div class=\"line\"><span class=\"attr\">  commonweal:</span> heartbeat</div><div class=\"line\"><span class=\"attr\">  guestbook:</span> commenting</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Scheme Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Schemes</span></div><div class=\"line\"><span class=\"comment\">#scheme: Muse</span></div><div class=\"line\"><span class=\"comment\">#scheme: Mist</span></div><div class=\"line\"><span class=\"attr\">scheme:</span> Pisces</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Font Settings</span></div><div class=\"line\"><span class=\"comment\"># - Find fonts on Google Fonts (https://www.google.com/fonts)</span></div><div class=\"line\"><span class=\"comment\"># - All fonts set here will have the following styles:</span></div><div class=\"line\"><span class=\"comment\">#     light, light italic, normal, normal intalic, bold, bold italic</span></div><div class=\"line\"><span class=\"comment\"># - Be aware that setting too much fonts will cause site running slowly</span></div><div class=\"line\"><span class=\"comment\"># - Introduce in 5.0.1</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"attr\">font:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Uri of fonts host. E.g. //fonts.googleapis.com (Default) 慢的话搜索fonts.googleapis.com即可找到替换地址</span></div><div class=\"line\"><span class=\"attr\">  host:</span> fonts.css.network</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Global font settings used on &lt;body&gt; element.</span></div><div class=\"line\"><span class=\"attr\">  global:</span></div><div class=\"line\">    <span class=\"comment\"># external: true will load this font family from host.</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Lato</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Headlines (h1, h2, h3, h4, h5, h6)</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\"><span class=\"attr\">  headings:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for posts</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\"><span class=\"attr\">  posts:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Logo</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># The `size` option use `px` as unit</span></div><div class=\"line\"><span class=\"attr\">  logo:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"><span class=\"attr\">    size:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for &lt;code&gt; and code blocks.</span></div><div class=\"line\"><span class=\"attr\">  codes:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span></div><div class=\"line\"><span class=\"attr\">    size:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Sidebar Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Social Links 社交链接</span></div><div class=\"line\"><span class=\"comment\"># Key is the link label showing to end users.</span></div><div class=\"line\"><span class=\"comment\"># Value is the target link (E.g. GitHub: https://github.com/iissnan)</span></div><div class=\"line\"><span class=\"comment\">#social:</span></div><div class=\"line\"><span class=\"comment\">#LinkLabel: Link</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Social Links Icons</span></div><div class=\"line\"><span class=\"comment\"># Icon Mapping:</span></div><div class=\"line\"><span class=\"comment\">#   Map a menu item to a specific FontAwesome icon name.</span></div><div class=\"line\"><span class=\"comment\">#   Key is the name of the item and value is the name of FontAwsome icon. Key is case-senstive.</span></div><div class=\"line\"><span class=\"comment\">#   When an globe mask icon presenting up means that the item has no mapping icon.</span></div><div class=\"line\"><span class=\"attr\">social_icons:</span>    <span class=\"comment\">#这是社交链接图标，打开网站找到图标，直接引用名字就行，next已引用了该库http://fontawesome.io/icons/</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"comment\"># Icon Mappings.</span></div><div class=\"line\">  <span class=\"comment\"># KeyMapsToSocalItemKey: NameOfTheIconFromFontAwesome</span></div><div class=\"line\"><span class=\"attr\">  GitHub:</span> github</div><div class=\"line\"><span class=\"attr\">  Coding:</span> github-alt</div><div class=\"line\"><span class=\"attr\">  Cloud:</span> cloud</div><div class=\"line\"><span class=\"attr\">  OSchina:</span> git-square</div><div class=\"line\">  <span class=\"comment\">#Twitter: twitter</span></div><div class=\"line\">  <span class=\"comment\">#Weibo: weibo</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Sidebar Avatar</span></div><div class=\"line\"><span class=\"comment\"># in theme directory(source/images): /images/avatar.jpg</span></div><div class=\"line\"><span class=\"comment\"># in site  directory(source/uploads): /uploads/avatar.jpg</span></div><div class=\"line\"><span class=\"attr\">avatar:</span> /images/avatar.jpg    <span class=\"comment\">#博客侧边栏显示的头像</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Table Of Contents in the Sidebar</span></div><div class=\"line\"><span class=\"attr\">toc:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Automatically add list number to toc.</span></div><div class=\"line\"><span class=\"attr\">  number:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Creative Commons 4.0 International License.</span></div><div class=\"line\"><span class=\"comment\"># http://creativecommons.org/</span></div><div class=\"line\"><span class=\"comment\"># Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></div><div class=\"line\"><span class=\"comment\">#creative_commons: by-nc-sa</span></div><div class=\"line\"><span class=\"comment\">#creative_commons:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">sidebar:</span></div><div class=\"line\">  <span class=\"comment\"># Sidebar Position, available value: left | right</span></div><div class=\"line\"><span class=\"attr\">  position:</span> left</div><div class=\"line\">  <span class=\"comment\">#position: right</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Sidebar Display, available value: 侧边栏显示</span></div><div class=\"line\">  <span class=\"comment\">#  - post    expand on posts automatically. Default.</span></div><div class=\"line\">  <span class=\"comment\">#  - always  expand for all pages automatically</span></div><div class=\"line\">  <span class=\"comment\">#  - hide    expand only when click on the sidebar toggle icon.</span></div><div class=\"line\">  <span class=\"comment\">#  - remove  Totally remove sidebar including sidebar toggler.</span></div><div class=\"line\"><span class=\"attr\">  display:</span> post</div><div class=\"line\">  <span class=\"comment\">#display: always</span></div><div class=\"line\">  <span class=\"comment\">#display: hide</span></div><div class=\"line\">  <span class=\"comment\">#display: remove</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Blogrolls 友情链接</span></div><div class=\"line\"><span class=\"attr\">links_title:</span> 友链</div><div class=\"line\"><span class=\"comment\">#links_layout: block</span></div><div class=\"line\"><span class=\"attr\">links_icon:</span> heartbeat</div><div class=\"line\"><span class=\"comment\">#links_layout: inline</span></div><div class=\"line\"><span class=\"attr\">links:</span></div><div class=\"line\">  Jerry Locke: https://jerry.hk/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Misc Theme Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Custom Logo.</span></div><div class=\"line\"><span class=\"comment\"># !!Only available for Default Scheme currently.</span></div><div class=\"line\"><span class=\"comment\"># Options:</span></div><div class=\"line\"><span class=\"comment\">#   enabled: [true/false] - Replace with specific image</span></div><div class=\"line\"><span class=\"comment\">#   image: url-of-image   - Images's url</span></div><div class=\"line\"><span class=\"attr\">custom_logo:</span></div><div class=\"line\"><span class=\"attr\">  enabled:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  image:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Code Highlight theme  代码高亮主题</span></div><div class=\"line\"><span class=\"comment\"># Available value:</span></div><div class=\"line\"><span class=\"comment\">#    normal | night | night eighties | night blue | night bright</span></div><div class=\"line\"><span class=\"comment\"># https://github.com/chriskempson/tomorrow-theme</span></div><div class=\"line\"><span class=\"attr\">highlight_theme:</span> night eighties</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Automatically scroll page to section which is under &lt;!-- more --&gt; mark.</span></div><div class=\"line\"><span class=\"attr\">scroll_to_more:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Automatically Excerpt. Not recommand.</span></div><div class=\"line\"><span class=\"comment\"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></div><div class=\"line\"><span class=\"attr\">auto_excerpt:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  length:</span> <span class=\"number\">150</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Wechat Subscriber 微信打赏</span></div><div class=\"line\"><span class=\"comment\">#wechat_subscriber:</span></div><div class=\"line\">  <span class=\"comment\">#enabled: true</span></div><div class=\"line\">  <span class=\"comment\">#qcode: /path/to/your/wechatqcode ex. /uploads/wechat-qcode.jpg</span></div><div class=\"line\">  <span class=\"comment\">#description: ex. subscribe to my blog by scanning my public wechat account</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\"># Third Party Services Settings</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># MathJax Support 数学公式</span></div><div class=\"line\"><span class=\"attr\">mathjax:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  cdn:</span> //cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#各种第三方服务</span></div><div class=\"line\"><span class=\"comment\"># Swiftype Search API Key</span></div><div class=\"line\"><span class=\"comment\">#swiftype_key:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Baidu Analytics ID</span></div><div class=\"line\"><span class=\"comment\">#baidu_analytics:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Duoshuo ShortName</span></div><div class=\"line\"><span class=\"comment\">#duoshuo_shortname:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Disqus</span></div><div class=\"line\"><span class=\"comment\">#disqus_shortname:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Baidu Share</span></div><div class=\"line\"><span class=\"comment\"># Available value:</span></div><div class=\"line\"><span class=\"comment\">#    button | slide</span></div><div class=\"line\"><span class=\"comment\"># Warning: Baidu Share does not support https.</span></div><div class=\"line\"><span class=\"comment\">#baidushare:</span></div><div class=\"line\"><span class=\"comment\">##  type: button</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Share</span></div><div class=\"line\"><span class=\"attr\">jiathis:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"comment\"># Warning: JiaThis does not support https.</span></div><div class=\"line\"><span class=\"comment\">#add_this_id:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Share</span></div><div class=\"line\"><span class=\"attr\">duoshuo_share:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Google Webmaster tools verification setting</span></div><div class=\"line\"><span class=\"comment\"># See: https://www.google.com/webmasters/</span></div><div class=\"line\"><span class=\"comment\">#google_site_verification:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Google Analytics</span></div><div class=\"line\"><span class=\"comment\">#google_analytics:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># CNZZ count</span></div><div class=\"line\"><span class=\"comment\">#cnzz_siteid:</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Make duoshuo show UA</span></div><div class=\"line\"><span class=\"comment\"># user_id must NOT be null when admin_enable is true!</span></div><div class=\"line\"><span class=\"comment\"># you can visit http://dev.duoshuo.com get duoshuo user id.</span></div><div class=\"line\"><span class=\"attr\">duoshuo_info:</span></div><div class=\"line\"><span class=\"attr\">  ua_enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  admin_enable:</span> ture</div><div class=\"line\"><span class=\"attr\">  user_id:</span> <span class=\"number\">6343395544286626562</span></div><div class=\"line\"><span class=\"attr\">  admin_nickname:</span> 博主</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Facebook SDK Support.</span></div><div class=\"line\"><span class=\"comment\"># https://github.com/iissnan/hexo-theme-next/pull/410</span></div><div class=\"line\"><span class=\"attr\">facebook_sdk:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  app_id:</span>       <span class=\"comment\">#&lt;app_id&gt;</span></div><div class=\"line\"><span class=\"attr\">  fb_admin:</span>     <span class=\"comment\">#&lt;user_id&gt;</span></div><div class=\"line\"><span class=\"attr\">  like_button:</span>  <span class=\"comment\">#true</span></div><div class=\"line\"><span class=\"attr\">  webmaster:</span>    <span class=\"comment\">#true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Facebook comments plugin</span></div><div class=\"line\"><span class=\"comment\"># This plugin depends on Facebook SDK.</span></div><div class=\"line\"><span class=\"comment\"># If facebook_sdk.enable is false, Facebook comments plugin is unavailable.</span></div><div class=\"line\"><span class=\"attr\">facebook_comments_plugin:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  num_of_posts:</span> <span class=\"number\">10</span>  <span class=\"comment\"># min posts num is 1</span></div><div class=\"line\"><span class=\"attr\">  width:</span> <span class=\"number\">100</span>%       <span class=\"comment\"># default width is 550px</span></div><div class=\"line\"><span class=\"attr\">  scheme:</span> light     <span class=\"comment\"># default scheme is light (light or dark)</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Show number of visitors to each article.</span></div><div class=\"line\"><span class=\"comment\"># You can visit https://leancloud.cn get AppID and AppKey.</span></div><div class=\"line\"><span class=\"attr\">leancloud_visitors:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  app_id:</span> zieuxKa4IjAP6VgxxvBe4vkj-gzGzoHsz</div><div class=\"line\"><span class=\"attr\">  app_key:</span> MHGN54IEuofFNV1AROiRkEoG</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Show PV/UV of the website/page with busuanzi. 不蒜子网站访问量统计</span></div><div class=\"line\"><span class=\"comment\"># Get more information on http://ibruce.info/2015/04/04/busuanzi/</span></div><div class=\"line\"><span class=\"comment\">#busuanzi_count:</span></div><div class=\"line\">  <span class=\"comment\"># count values only if the other configs are false</span></div><div class=\"line\"><span class=\"comment\">#  enable: true</span></div><div class=\"line\">  <span class=\"comment\"># custom uv span for the whole site</span></div><div class=\"line\"><span class=\"comment\">#  site_uv: true</span></div><div class=\"line\"><span class=\"comment\">#  site_uv_header: 你是第</span></div><div class=\"line\"><span class=\"comment\">#  site_uv_footer: 个小伙伴</span></div><div class=\"line\">  <span class=\"comment\"># custom pv span for the whole site</span></div><div class=\"line\"><span class=\"comment\">#  site_pv: true</span></div><div class=\"line\"><span class=\"comment\">#  site_pv_header: 本站总浏览</span></div><div class=\"line\"><span class=\"comment\">#  site_pv_footer: 次</span></div><div class=\"line\">  <span class=\"comment\"># custom pv span for one page only</span></div><div class=\"line\"><span class=\"comment\">#  page_pv: true</span></div><div class=\"line\"><span class=\"comment\">#  page_pv_header: 热度</span></div><div class=\"line\"><span class=\"comment\">#  page_pv_footer: ℃</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Tencent analytics ID</span></div><div class=\"line\"><span class=\"comment\"># tencent_analytics:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO</span></div><div class=\"line\"><span class=\"attr\">baidu_push:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Google Calendar</span></div><div class=\"line\"><span class=\"comment\"># Share your recent schedule to others via calendar page</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"comment\"># API Documentation:</span></div><div class=\"line\"><span class=\"comment\"># https://developers.google.com/google-apps/calendar/v3/reference/events/list</span></div><div class=\"line\"><span class=\"attr\">calendar:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  calendar_id:</span> &lt;required<span class=\"string\">&gt;</div><div class=\"line\"></span><span class=\"attr\">  api_key:</span> &lt;required<span class=\"string\">&gt;</div><div class=\"line\"></span><span class=\"attr\">  orderBy:</span> startTime</div><div class=\"line\"><span class=\"attr\">  offsetMax:</span> <span class=\"number\">24</span></div><div class=\"line\"><span class=\"attr\">  offsetMin:</span> <span class=\"number\">4</span></div><div class=\"line\"><span class=\"attr\">  timeZone:</span></div><div class=\"line\"><span class=\"attr\">  showDeleted:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  singleEvents:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  maxResults:</span> <span class=\"number\">250</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#! ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\">#! DO NOT EDIT THE FOLLOWING SETTINGS</span></div><div class=\"line\"><span class=\"comment\">#! UNLESS YOU KNOW WHAT YOU ARE DOING</span></div><div class=\"line\"><span class=\"comment\">#! ---------------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Motion</span></div><div class=\"line\"><span class=\"attr\">use_motion:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Fancybox</span></div><div class=\"line\"><span class=\"attr\">fancybox:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Script Vendors.</span></div><div class=\"line\"><span class=\"comment\"># Set a CDN address for the vendor you want to customize.</span></div><div class=\"line\"><span class=\"comment\"># For example</span></div><div class=\"line\"><span class=\"comment\">#    jquery: https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js</span></div><div class=\"line\"><span class=\"comment\"># Be aware that you should use the same version as internal ones to avoid potential problems.</span></div><div class=\"line\"><span class=\"comment\"># Please use the https protocol of CDN files when you enable https on your site.</span></div><div class=\"line\"><span class=\"attr\">vendors:</span></div><div class=\"line\">  <span class=\"comment\"># Internal path prefix. Please do not edit it. 5.0以下版本如果打开网页空白，就把vendors文件夹改名为lib,这里对应改。</span></div><div class=\"line\"><span class=\"attr\">  _internal:</span> lib</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 2.1.3</span></div><div class=\"line\"><span class=\"attr\">  jquery:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 2.1.5</span></div><div class=\"line\">  <span class=\"comment\"># See: http://fancyapps.com/fancybox/</span></div><div class=\"line\"><span class=\"attr\">  fancybox:</span></div><div class=\"line\"><span class=\"attr\">  fancybox_css:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.0.6</span></div><div class=\"line\">  <span class=\"comment\"># See: https://github.com/ftlabs/fastclick</span></div><div class=\"line\"><span class=\"attr\">  fastclick:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.9.7</span></div><div class=\"line\">  <span class=\"comment\"># See: https://github.com/tuupola/jquery_lazyload</span></div><div class=\"line\"><span class=\"attr\">  lazyload:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.2.1</span></div><div class=\"line\">  <span class=\"comment\"># See: http://VelocityJS.org</span></div><div class=\"line\"><span class=\"attr\">  velocity:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 1.2.1</span></div><div class=\"line\">  <span class=\"comment\"># See: http://VelocityJS.org</span></div><div class=\"line\"><span class=\"attr\">  velocity_ui:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 0.7.9</span></div><div class=\"line\">  <span class=\"comment\"># See: https://faisalman.github.io/ua-parser-js/</span></div><div class=\"line\"><span class=\"attr\">  ua_parser:</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Internal version: 4.4.0</span></div><div class=\"line\">  <span class=\"comment\"># See: http://fontawesome.io/</span></div><div class=\"line\"><span class=\"attr\">  fontawesome:</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 多说热评文章 true 或者 false</span></div><div class=\"line\"><span class=\"attr\">duoshuo_hotartical:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Assets</span></div><div class=\"line\"><span class=\"attr\">css:</span> css</div><div class=\"line\"><span class=\"attr\">js:</span> js</div><div class=\"line\"><span class=\"attr\">images:</span> images</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Theme version</span></div><div class=\"line\"><span class=\"attr\">version:</span> <span class=\"number\">5.1</span><span class=\"number\">.0</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h2><p>hexo支持插件，可以直接通过命令行安装即可：<code>npm install **plugin-name** --save</code><br>更新插件<br><code>npm update</code><br>卸载插件<br><code>npm uninstall **plugin-name**</code><br>下面推荐几个常用的插件：<br>feed插件:<code>npm install hexo-generator-feed --save</code><br>站点地图:<code>npm install hexo-generator-sitemap --save</code><br>百度站点地图:<code>npm install hexo-generator-baidu-sitemap --save</code></p>\n<hr>\n<h2 id=\"自由定制\"><a href=\"#自由定制\" class=\"headerlink\" title=\"自由定制\"></a>自由定制</h2><h3 id=\"文章字数、阅读时长统计\"><a href=\"#文章字数、阅读时长统计\" class=\"headerlink\" title=\"文章字数、阅读时长统计\"></a>文章字数、阅读时长统计</h3><p>修改<strong>post.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\post.swig</p>\n<p>安装hexo-wordcount插件<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-wordcount <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>通过以上安装后，你可以在你的模板文件后者.md文件加入以下相关的标签实现本插件的功能<br><strong>字数统计</strong>:WordCount<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; wordcount(post.content) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div></pre></td></tr></table></figure></p>\n<p><strong>阅读时长预计</strong>:Min2Read<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; min2read(post.content) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div></pre></td></tr></table></figure></p>\n<p><strong>总字数统计</strong>: TotalCount<br><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;span <span class=\"keyword\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;&#123;&#123; totalcount(site, <span class=\"string\">'0,0.0a'</span>) &#125;&#125;&lt;/span&gt;</div></pre></td></tr></table></figure></p>\n<p>插入的代码以下：<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> not is_index and theme.facebook_sdk.enable and theme.facebook_sdk.like_button %&#125;</span><span class=\"xml\"></div><div class=\"line\">            &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fb-like\"</span> <span class=\"attr\">data-layout</span>=<span class=\"string\">\"button_count\"</span> <span class=\"attr\">data-share</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"comment\">&lt;!--从这里插入代码，上边是Facebook的代码--&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--leancloud文章阅读量统计（主题默认已经添加）参考：http://www.joryhe.com/2016-05-29-how_to_create_leancloud_read_Counter.html--&gt;</span></div><div class=\"line\">          </span><span class=\"comment\">&#123;# LeanCould PageView #&#125;</span><span class=\"xml\"></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.leancloud_visitors.enable %&#125;</span><span class=\"xml\"></div><div class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; url_for(post.path) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"leancloud_visitors\"</span> <span class=\"attr\">data-flag-title</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; post.title &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span>&gt;</span></div><div class=\"line\">               &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-icon\"</span>&gt;</span></div><div class=\"line\">                 <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-eye\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></div><div class=\"line\">               <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-text\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;__('post.visitors')&#125;&#125;</span><span class=\"xml\"> <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"leancloud-visitors-count\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"comment\">&lt;!--字数、阅读时长统计--&gt;</span></div><div class=\"line\">         <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-time\"</span>&gt;</span></div><div class=\"line\">     &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-icon\"</span>&gt;</span></div><div class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-calendar-o\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-text\"</span>&gt;</span>字数统计:<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; wordcount(post.content) &#125;&#125;</span><span class=\"xml\">(字)<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>          </div><div class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-time\"</span>&gt;</span></div><div class=\"line\">\t   &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-icon\"</span>&gt;</span></div><div class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-calendar-o\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta-item-text\"</span>&gt;</span>阅读时长:<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-count\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; min2read(post.content) &#125;&#125;</span><span class=\"xml\">(分)<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>         </div><div class=\"line\">         <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--不蒜子网站访问量统计（主题默认已经添加），如果出现排班错位请忽略，下面用官网的方法实现--&gt;</span></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> not is_index and theme.busuanzi_count.enable and theme.busuanzi_count.page_pv %&#125;</span><span class=\"xml\"></div><div class=\"line\">              &amp;nbsp; | &amp;nbsp;</div><div class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page-pv\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; theme.busuanzi_count.page_pv_header &#125;&#125;</span><span class=\"xml\"></div><div class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"busuanzi-value\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_page_pv\"</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; theme.busuanzi_count.page_pv_footer &#125;&#125;</span><span class=\"xml\"></div><div class=\"line\">              <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"文章结语\"><a href=\"#文章结语\" class=\"headerlink\" title=\"文章结语\"></a>文章结语</h3><p>修改<strong>post.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\post.swig</p>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> post.type === 'picture' %&#125;</span><span class=\"xml\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; url_for(post.path) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; post.content &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">else</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">            </span><span class=\"template-variable\">&#123;&#123; post.content &#125;&#125;</span><span class=\"xml\"></div><div class=\"line\">          </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">        </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">      </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">else</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">        </span><span class=\"template-variable\">&#123;&#123; post.content &#125;&#125;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"comment\">&lt;!--这里是每篇文章的尾巴，从这里开始插入代码--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h2</span> <span class=\"attr\">id</span>=<span class=\"string\">\"结语\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#结语\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"headerlink\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"结语\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>结语<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">blockquote</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>如果您觉得本博客还不错，欢迎继续关注本博客，欢迎多提宝贵意见，非常感谢！<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"text-align:center;color:#ccc;font-size:14px;\"</span>&gt;</span>------本文结束<span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-paw\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span>感谢阅读------<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!--下面这部分左边有框，但位置不够就会排班错乱</div><div class=\"line\">&lt;html&gt;</div><div class=\"line\">  &lt;body&gt;</div><div class=\"line\">    &lt;h1&gt;结语&lt;/h1&gt;</div><div class=\"line\">      &lt;p&gt;&lt;h5&gt;&lt;a href=\"#\" onclick=\"go_my_site()\" rel=\"external\"&gt;Leo Lan Blog Share For you!&lt;/a&gt;&lt;/h5&gt;&lt;/p&gt;</div><div class=\"line\">      &lt;p&gt;如果您觉得本博客还不错，欢迎继续关注Leo Lan的博客，欢迎多提宝贵意见，非常感谢！&lt;/p&gt;</div><div class=\"line\">  &lt;/body&gt;</div><div class=\"line\">&lt;/html&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;html&gt;</div><div class=\"line\">  &lt;body&gt;</div><div class=\"line\">    &lt;h2 id=\"结语\"&gt;&lt;a href=\"#结语\" class=\"headerlink\" title=\"结语\"&gt;&lt;/a&gt;结语&lt;/h2&gt;</div><div class=\"line\">    &lt;blockquote&gt;&lt;p&gt;如果您觉得本博客还不错，欢迎收藏书签，欢迎多提宝贵意见，非常感谢！&lt;/p&gt;</div><div class=\"line\">    &lt;footer&gt;&lt;strong&gt;Welcome to LeoLan'S BLOG&lt;/strong&gt;</div><div class=\"line\">    &lt;cite&gt;&lt;a href=\"#\" onclick=\"go_my_site()\" rel=\"external\"&gt;Leo Lan Blog Share For you!&lt;/a&gt;&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt;&lt;/div&gt;</div><div class=\"line\">  &lt;/body&gt;</div><div class=\"line\">&lt;/html&gt;</div><div class=\"line\">--&gt;</span></span></div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"文章底部的标签云锚点\"><a href=\"#文章底部的标签云锚点\" class=\"headerlink\" title=\"文章底部的标签云锚点\"></a>文章底部的标签云锚点</h3><p>修改<strong>post.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\post.swig</p>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"comment\">&lt;!--这是文章底部标签云锚点，不喜欢就注释掉</div><div class=\"line\">    &lt;footer class=\"post-footer\"&gt;</div><div class=\"line\">      </span></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> post.tags and post.tags.length and not is_index %&#125;</span><span class=\"xml\"><span class=\"comment\"></div><div class=\"line\">        &lt;div class=\"post-tags\"&gt;</div><div class=\"line\">          </span></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">for</span></span> tag <span class=\"keyword\">in</span> post.tags %&#125;</span><span class=\"xml\"><span class=\"comment\"></div><div class=\"line\">            &lt;a href=\"</span></span><span class=\"template-variable\">&#123;&#123; url_for(tag.path) &#125;&#125;</span><span class=\"xml\"><span class=\"comment\">\" rel=\"tag\"&gt;# </span></span><span class=\"template-variable\">&#123;&#123; tag.name &#125;&#125;</span><span class=\"xml\"><span class=\"comment\">&lt;/a&gt;</div><div class=\"line\">          </span></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endfor</span></span> %&#125;</span><span class=\"xml\"><span class=\"comment\"></div><div class=\"line\">        &lt;/div&gt;</div><div class=\"line\">      </span></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"><span class=\"comment\"></div><div class=\"line\">--&gt;</span></span></div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"不蒜子网站访问量统计、删除NEXT主题自带尾巴\"><a href=\"#不蒜子网站访问量统计、删除NEXT主题自带尾巴\" class=\"headerlink\" title=\"不蒜子网站访问量统计、删除NEXT主题自带尾巴\"></a>不蒜子网站访问量统计、删除NEXT主题自带尾巴</h3><p>修改<strong>footer.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_partials\\footer.swig<br>官网：<a href=\"http://service.ibruce.info\">http://service.ibruce.info</a><br><a href=\"http://ibruce.info/2015/04/04/busuanzi/\">http://ibruce.info/2015/04/04/busuanzi/</a><br>把代码改成这个样子，<code>busuanzi_value_site_uv</code>中，uv和pv功能是不一样的。<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"powered-by\"</span>&gt;</span></div><div class=\"line\">  </span><span class=\"template-variable\">&#123;&#123; __('footer.powered', '') &#125;&#125;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"theme-info\"</span>&gt;</span></div><div class=\"line\">  </span><span class=\"template-variable\">&#123;&#123; __('footer.theme') &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_uv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>位小伙伴</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"</span>&gt;</span><span class=\"undefined\"></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p>\n<p>同时更改语言文件中对应的名称<br>编辑：<strong>themes\\languages\\zh_Hans.yml</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">footer</span>:</div><div class=\"line\">  powered: 本站总访问量&lt;<span class=\"selector-tag\">span</span> id=<span class=\"string\">\"busuanzi_value_site_pv\"</span>&gt;&lt;/span&gt;</div><div class=\"line\">  theme: 您是第</div><div class=\"line\">#&lt;<span class=\"selector-tag\">a</span> target=<span class=\"string\">\"_blank\"</span> href=<span class=\"string\">\"http://www.miitbeian.gov.cn/\"</span>&gt;粤ICP备<span class=\"number\">16026009</span>号-<span class=\"number\">2</span>&lt;/a&gt;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"居中模块\"><a href=\"#居中模块\" class=\"headerlink\" title=\"居中模块\"></a>居中模块</h3><p>把要居中的模块、代码、文字、插件、外链等，放在下面代码的中间即可居中显示。<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"><span class=\"comment\">&lt;!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- 其中 class=\"blockquote-center\" 是必须的 --&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">class</span>=<span class=\"string\">\"blockquote-center\"</span>&gt;</span>优秀的人，不是不合群，而是他们合群的人里面没有你<span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></div><div class=\"line\">或者</div><div class=\"line\">  <span class=\"comment\">&lt;!-- 标签 方式，要求版本在0.4.5或以上 --&gt;</span></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\">centerquote</span> %&#125;</span><span class=\"xml\">优秀的人，不是不合群，而是他们合群的人里面没有你</span><span class=\"template-tag\">&#123;% <span class=\"name\">endcenterquote</span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">或者</div><div class=\"line\">  <span class=\"comment\">&lt;!-- 标签别名 --&gt;</span></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\">cq</span> %&#125;</span><span class=\"xml\"> 优秀的人，不是不合群，而是他们合群的人里面没有你 </span><span class=\"template-tag\">&#123;% <span class=\"name\">endcq</span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"留言板\"><a href=\"#留言板\" class=\"headerlink\" title=\"留言板\"></a>留言板</h3><p>编辑：<strong>themes\\languages\\zh_Hans.yml</strong><br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">title:</span>   <span class=\"meta\">#这里增加</span></div><div class=\"line\"><span class=\"symbol\">  guestbook:</span> 留言板</div><div class=\"line\"><span class=\"symbol\"></div><div class=\"line\">menu:</span>    <span class=\"meta\">#这里增加</span></div><div class=\"line\"><span class=\"symbol\">  guestbook:</span> 给我留言</div></pre></td></tr></table></figure></p>\n<p>在站点source目录下新建guestbook文件夹，里面新建index.md文件，内容如下(其中调用HTML代码，插入了一个播放器)：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: 留言板</div><div class=\"line\">date: <span class=\"number\">2016</span><span class=\"number\">-11</span><span class=\"number\">-14</span> <span class=\"number\">17</span>:<span class=\"number\">21</span>:<span class=\"number\">10</span></div><div class=\"line\">---</div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">blockquote</span> <span class=\"attr\">class</span>=<span class=\"string\">\"blockquote-center\"</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!--网易云音乐的http地址，改为https，用https加载http资源会被屏蔽--&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Stay Hungry,Stay Foolish<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></div><div class=\"line\">   <span class=\"comment\">&lt;!--&lt;embed src=\"https://music.163.com/style/swf/widget.swf?sid=34971711&amp;type=1&amp;auto=1&amp;width=310&amp;height=90\" width=\"330\" height=\"110\"  allowNetworking=\"all\"&gt;&lt;/embed&gt;</div><div class=\"line\">   &lt;iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=110 src=\"https://music.163.com/outchain/player?type=1&amp;id=34971711&amp;auto=1&amp;height=90\"&gt;&lt;/iframe&gt;--&gt;</span></div><div class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">embed</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://music.163.com/style/swf/widget.swf?sid=32507038&amp;type=2&amp;auto=1&amp;width=320&amp;height=66\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"340\"</span> <span class=\"attr\">height</span>=<span class=\"string\">\"86\"</span>  <span class=\"attr\">allowNetworking</span>=<span class=\"string\">\"all\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">embed</span>&gt;</span></div><div class=\"line\">   <span class=\"comment\">&lt;!--这里是插入视频的方法</div><div class=\"line\">\t&lt;iframe src=\"//www.youtube.com/embed/JMl8cQjBfqk\" width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt;--&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">blockquote</span>&gt;</span></span></div><div class=\"line\">&lt;br/&gt;</div><div class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"yu-2\"</span>&gt;</span>最近访客<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span></div><div class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"ds-recent-visitors\"</span> data-num-items=<span class=\"string\">\"39\"</span> data-avatar-size=<span class=\"string\">\"40\"</span> id=<span class=\"string\">\"ds-recent-visitors\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></div><div class=\"line\">&lt;br/&gt;</div></pre></td></tr></table></figure></p>\n<p><strong>编辑主题配置文件</strong>：_config.yml<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">menu:</span>   <span class=\"meta\">#在这里加上</span></div><div class=\"line\"><span class=\"symbol\">  guestbook:</span> /guestbook</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"字体\"><a href=\"#字体\" class=\"headerlink\" title=\"字体\"></a>字体</h3><p>关于字体的修改开始时遇到很多问题，到后来才找到了原因，是因为引用的字体在<strong>www.google.com/fonts</strong>（默认是Google字体库）里找不到，或者是付费的字体。修改为免费的字体就正常使用了。打开<a href=\"www.google.com/fonts\">Google Fonts</a>，右上角查找你要的字体，能搜索到的话把全名复制下来，填写在配置文件中。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161206/152548232.png\" alt=\"mark\"></p>\n<p>修改<strong>\\themes\\next_config.yml</strong>找到<strong>Font Settings</strong><br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Font Settings</span></div><div class=\"line\"><span class=\"comment\"># - Find fonts on Google Fonts (https://www.google.com/fonts)</span></div><div class=\"line\"><span class=\"comment\"># - All fonts set here will have the following styles:</span></div><div class=\"line\"><span class=\"comment\">#     light, light italic, normal, normal intalic, bold, bold italic</span></div><div class=\"line\"><span class=\"comment\"># - Be aware that setting too much fonts will cause site running slowly</span></div><div class=\"line\"><span class=\"comment\"># - Introduce in 5.0.1</span></div><div class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></div><div class=\"line\"><span class=\"attr\">font:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Uri of fonts host. E.g. //fonts.googleapis.com (Default) </span></div><div class=\"line\">  <span class=\"comment\"># 外链字体库地址，例如 //fonts.googleapis.com (默认值)</span></div><div class=\"line\">加载慢的话搜索fonts.googleapis.com即可找到替换地址,这里注意使用的地址中包含了下面设置的字体，没有的话是默认字体。</div><div class=\"line\"><span class=\"attr\">  host:</span> </div><div class=\"line\">  <span class=\"comment\">#fonts.css.network</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Global font settings used on &lt;body&gt; element.</span></div><div class=\"line\">  <span class=\"comment\"># 全局字体，应用在 &lt;body&gt; 元素上</span></div><div class=\"line\"><span class=\"attr\">  global:</span></div><div class=\"line\">    <span class=\"comment\"># external: true will load this font family from host.</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Lato</div><div class=\"line\">    <span class=\"comment\">#Monda</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Headlines (h1, h2, h3, h4, h5, h6)</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># 标题字体 (h1, h2, h3, h4, h5, h6)</span></div><div class=\"line\"><span class=\"attr\">  headings:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> </div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for posts</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># 文章字体</span></div><div class=\"line\"><span class=\"attr\">  posts:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Roboto</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for Logo</span></div><div class=\"line\">  <span class=\"comment\"># Fallback to `global` font settings.</span></div><div class=\"line\">  <span class=\"comment\"># The `size` option use `px` as unit</span></div><div class=\"line\">  <span class=\"comment\"># Logo 字体</span></div><div class=\"line\"><span class=\"attr\">  logo:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> Georgia</div><div class=\"line\"><span class=\"attr\">    size:</span> <span class=\"number\">24</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Font settings for &lt;code&gt; and code blocks.</span></div><div class=\"line\"> <span class=\"comment\"># 代码字体，应用于 &lt;code&gt; 以及代码块</span></div><div class=\"line\"><span class=\"attr\">  codes:</span></div><div class=\"line\"><span class=\"attr\">    external:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    family:</span> </div><div class=\"line\"><span class=\"attr\">    size:</span> <span class=\"number\">14</span></div><div class=\"line\"><span class=\"comment\">#字体大小直接加个size: 写就行，单位是px，不填写则为默认大小。</span></div><div class=\"line\"><span class=\"comment\">#\"Source Code Pro\", \"PT Mono\", \"DejaVu Sans Mono\",</span></div></pre></td></tr></table></figure></p>\n<p>参考：<br><a href=\"http://theme-next.iissnan.com/theme-settings.html#fonts-customization\">Next主题设置字体</a>  |  <a href=\"http://jingyan.baidu.com/article/09ea3ede0cb0e1c0aede39d8.html\">如何引用google字体</a></p>\n<p>如果要在文章中临时引用特殊的字体格式，可以直接在 Markdown 文档中使用 html 语法<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">size</span>=<span class=\"string\">4</span> &gt;</span> 这里输入文字，自定义大小 <span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">font</span> <span class=\"attr\">color</span>=<span class=\"string\">\"#FF0000\"</span>&gt;</span> 这里输入文字，自定义颜色的字体 <span class=\"tag\">&lt;/<span class=\"name\">font</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"404页面\"><a href=\"#404页面\" class=\"headerlink\" title=\"404页面\"></a>404页面</h3><p>404页面可以自己写，也可以引用腾讯公益404页面。<br>这是嵌入到主题中的404页面而不是新开一个页面；在站点目录source目录下新建<strong>404.html</strong>文件，粘贴以下代码：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>404 - arao'blog<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"description\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"404错误，页面不存在！\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html;charset=utf-8;\"</span>/&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=edge,chrome=1\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"robots\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"all\"</span> /&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"robots\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"index,follow\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://qzonestyle.gtimg.cn/qzone_v6/lostchild/search_children.js\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"打赏\"><a href=\"#打赏\" class=\"headerlink\" title=\"打赏\"></a>打赏</h3><p>修改<strong>reward.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_macro\\reward.swig</p>\n<p>直接全部替换代码，这段代码是圆形的打赏按钮，二维码左右排列。<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.alipay or theme.wechatpay %&#125;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"padding: 10px 0; margin: 20px auto; width: 90%; text-align: center\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"margin-bottom: 10px;font-size: 16px;font-weight: 600;\"</span>&gt;</span>您的支持将鼓励我继续创作,非常感谢！<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">\"rewardButton\"</span>, <span class=\"attr\">disable</span>=<span class=\"string\">\"enable\"</span>, <span class=\"attr\">onclick</span>=<span class=\"string\">\"var qr = document.getElementById('QR'); if (qr.style.display === 'none') &#123;qr.style.display='block';&#125; else &#123;qr.style.display='none'&#125;\"</span>, <span class=\"attr\">style</span>=<span class=\"string\">\"cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">onmouseover</span>=<span class=\"string\">\"this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'\"</span> <span class=\"attr\">onMouseOut</span>=<span class=\"string\">\"this.style.color='#fff';this.style.background='rgb(236,96,0)'\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)\"</span>&gt;</span>赏<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"QR\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: none;\"</span>&gt;</span></div><div class=\"line\">      </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.alipay %&#125;</span><span class=\"xml\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"alipay\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: inline-block\"</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"alipay_qr\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; theme.alipay &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; theme.author &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\"> Alipay\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 200px; max-width: 100%; display: inline-block\"</span>/&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>支付宝打赏<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">      </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.wechatpay %&#125;</span><span class=\"xml\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"wechat\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"display: inline-block\"</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">\"wechat_qr\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; theme.wechatpay &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"</span></span></span><span class=\"template-variable\">&#123;&#123; theme.author &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\"> WeChat Pay\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 200px; max-width: 100%; display: inline-block\"</span>/&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>微信打赏<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"最近访客\"><a href=\"#最近访客\" class=\"headerlink\" title=\"最近访客\"></a>最近访客</h3><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;h3 <span class=\"built_in\">id</span>=<span class=\"string\">\"最近访客\"</span>&gt;&lt;a href=<span class=\"string\">\"#最近访客\"</span> <span class=\"built_in\">class</span>=<span class=\"string\">\"headerlink\"</span> title=<span class=\"string\">\"最近访客\"</span>&gt;&lt;/a&gt;最近访客&lt;/h3&gt;&lt;<span class=\"keyword\">div</span> <span class=\"built_in\">class</span>=<span class=\"string\">\"ds-recent-visitors\"</span> data-num-items=<span class=\"string\">\"28\"</span> data-avatar-size=<span class=\"string\">\"42\"</span> <span class=\"built_in\">id</span>=<span class=\"string\">\"ds-recent-visitors\"</span>&gt;&lt;/<span class=\"keyword\">div</span>&gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">class</span>=“ds-recent-visitors”    //指定显示最近访客容器</div><div class=\"line\"><span class=\"attr\">data-num-items</span>=“<span class=\"number\">28</span>”    //显示最近访客的数量</div><div class=\"line\"><span class=\"attr\">data-avatar-size</span>=“<span class=\"number\">42</span>”    //显示最近访客头像尺寸大小</div><div class=\"line\"><span class=\"attr\">id</span>=“ds-recent-visitors”    //为了调节最近访客样式加的</div></pre></td></tr></table></figure>\n<p>这样，每个页面都有最近访客了（只能看到注册了多说账户的用户）</p>\n<hr>\n<h3 id=\"SEO\"><a href=\"#SEO\" class=\"headerlink\" title=\"SEO\"></a>SEO</h3><h4 id=\"网站地图\"><a href=\"#网站地图\" class=\"headerlink\" title=\"网站地图\"></a>网站地图</h4><p>安装hexo的sitemap网站地图生成插件<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-generator-sitemap <span class=\"comment\">--save</span></div><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-generator-baidu-sitemap <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在你的hexo站点的_config.yml添加下面的代码<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># hexo sitemap网站地图</span></div><div class=\"line\">sitemap:</div><div class=\"line\">path: sitemap.<span class=\"keyword\">xml</span></div><div class=\"line\"><span class=\"title\">baidusitemap</span>:</div><div class=\"line\">path: baidusitemap.<span class=\"keyword\">xml</span>  <span class=\"title\">#如果报path</span>错误就把前面增加baidu</div></pre></td></tr></table></figure></p>\n<p>配置成功后，hexo编译时会在hexo站点根目录生成<strong>sitemap.xml</strong>和<strong>baidusitemap.xml</strong><br>其中sitemap.xml适合提交给谷歌搜素引擎，baidusitemap.xml适合提交百度搜索引擎。</p>\n<hr>\n<h4 id=\"蜘蛛协议\"><a href=\"#蜘蛛协议\" class=\"headerlink\" title=\"蜘蛛协议\"></a>蜘蛛协议</h4><p>在robots.txt中添加站点地图文件，如下（没有robots.txt就在站点目录source下新建）：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># hexo robots.txt</span></div><div class=\"line\">User-agent: *</div><div class=\"line\"><span class=\"symbol\">Allow:</span> /</div><div class=\"line\"><span class=\"symbol\">Allow:</span> <span class=\"meta-keyword\">/archives/</span></div><div class=\"line\"><span class=\"symbol\"></div><div class=\"line\">Disallow:</span> <span class=\"meta-keyword\">/lib/</span>   </div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/js/</span></div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/css/</span></div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/fonts/</span></div><div class=\"line\"><span class=\"symbol\">Disallow:</span> <span class=\"meta-keyword\">/fancybox/</span></div><div class=\"line\"><span class=\"symbol\"></div><div class=\"line\">Sitemap:</span> http:<span class=\"comment\">//www.leolan.top/sitemap.xml</span></div><div class=\"line\"><span class=\"symbol\">Sitemap:</span> http:<span class=\"comment\">//www.leolan.top/baidusitemap.xml</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"NexT主题，首页title的优化\"><a href=\"#NexT主题，首页title的优化\" class=\"headerlink\" title=\"NexT主题，首页title的优化\"></a>NexT主题，首页title的优化</h4><p>感谢<a href=\"http://www.arao.me/\">arao</a>的教程<br>修改\\themes\\next\\layout\\index.swig文件，将下面代码<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p>改为<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; theme.description &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p>这时候你的首页标题会更符合<strong>网站名称 - 网站描述</strong>这习惯。<br>把关键词(在主题配置文件<strong>_config.yml</strong>中设置<strong>keywords:</strong>)也显示在Title标题里，可改成:<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; theme.keywords &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; theme.description &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\">或（排列顺序看自己喜欢）</div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">block</span></span> title %&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123; config.title &#125;&#125;</span><span class=\"xml\"> - </span><span class=\"template-variable\">&#123;&#123; theme.keywords &#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endblock</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p>注意：别堆砌关键字，整个标题一般不超过80个字符，可以通过chinaz的seo综合查询检查。</p>\n<hr>\n<h4 id=\"限制出站链接\"><a href=\"#限制出站链接\" class=\"headerlink\" title=\"限制出站链接\"></a>限制出站链接</h4><p>网络爬虫会在当前页面搜索所有的链接，故有可能跳到别的网站。<strong>nofollow</strong> 标签是由谷歌领头创新的一个 “反垃圾链接” 的标签，并被各大搜索引擎广泛支持，引用 <strong>nofollow</strong> 标签的目的是：用于指示搜索引擎不要追踪（即抓取）网页上的带有 <strong>nofollow</strong> 属性的任何出站链接，以减少垃圾链接的分散网站权重。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-autonofollow <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在 <strong>站点配置文件 </strong>中添加如下代码。<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">nofollow:</span></div><div class=\"line\"><span class=\"attr\">    enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">    exclude:</span> <span class=\"comment\"># 例外的链接，可将友情链接放置此处</span></div><div class=\"line\"><span class=\"bullet\">    -</span> exclude1.com</div><div class=\"line\"><span class=\"bullet\">    -</span> exclude2.com</div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"文章链接唯一化\"><a href=\"#文章链接唯一化\" class=\"headerlink\" title=\"文章链接唯一化\"></a>文章链接唯一化</h4><p>也许你会数次更改文章题目或者变更文章发布时间，在默认设置下，文章链接都会改变，不利于搜索引擎收录，也不利于分享。唯一永久链接才是更好的选择。安装此插件后，不要在 <code>hexo s</code> 模式下更改文章文件名，否则文章将成空白,需要重新<code>hexo s</code>才行。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-abbrlink <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在 站点配置文件 中查找代码 <strong>permalink:</strong>，将其更改为:<br><figure class=\"highlight elixir\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">permalink:</span> posts/<span class=\"symbol\">:abbrlink/</span>  <span class=\"comment\"># “posts/” 可自行更换</span></div></pre></td></tr></table></figure></p>\n<p>在 站点配置文件 中添加如下代码：<br><figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"># abbrlink config</div><div class=\"line\"><span class=\"symbol\">abbrlink:</span></div><div class=\"line\"><span class=\"symbol\">  alg:</span> <span class=\"keyword\">crc32</span>  # 算法：crc16(<span class=\"meta\">default</span>) <span class=\"keyword\">and</span> <span class=\"keyword\">crc32</span> </div><div class=\"line\"><span class=\"symbol\">  rep:</span> hex    # 进制：<span class=\"keyword\">dec</span>(<span class=\"meta\">default</span>) <span class=\"keyword\">and</span> hex</div></pre></td></tr></table></figure></p>\n<p>永久链接有下面4种组合<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">crc16 &amp; hex</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">66</span>c8.html</div><div class=\"line\"></div><div class=\"line\">crc16 &amp; dec</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">65535</span>.html</div><div class=\"line\"></div><div class=\"line\">crc32 &amp; hex</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">8</span>ddf18fb.html</div><div class=\"line\"></div><div class=\"line\">crc32 &amp; dec</div><div class=\"line\">https:<span class=\"regexp\">//</span>post.zz173.com<span class=\"regexp\">/posts/</span><span class=\"number\">1690090958</span>.html</div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"百度网址推送\"><a href=\"#百度网址推送\" class=\"headerlink\" title=\"百度网址推送\"></a>百度网址推送</h4><p>修改<strong>baidu-push.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_scripts\\baidu-push.swig<br>没有此文件就新建<br><figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> theme.baidu_push %&#125;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> bp = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> curProtocol = <span class=\"built_in\">window</span>.location.protocol.split(<span class=\"string\">':'</span>)[<span class=\"number\">0</span>];</div><div class=\"line\">    <span class=\"keyword\">if</span> (curProtocol === <span class=\"string\">'https'</span>) &#123;</div><div class=\"line\">        bp.src = <span class=\"string\">'https://zz.bdstatic.com/linksubmit/push.js'</span>;        </div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        bp.src = <span class=\"string\">'http://push.zhanzhang.baidu.com/push.js'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">var</span> s = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">\"script\"</span>)[<span class=\"number\">0</span>];</div><div class=\"line\">    s.parentNode.insertBefore(bp, s);</div><div class=\"line\">&#125;)();</div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure></p>\n<p><strong>编辑站点配置文件</strong>：_config.yml<br>加上以下代码：<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">baidu_url_submit:</span>  <span class=\"meta\">#百度链接推送，推送刚刚生成的永久链接</span></div><div class=\"line\"><span class=\"symbol\">  count:</span> <span class=\"number\">5</span> <span class=\"meta\">## 比如3，代表提交最新的三个链接</span></div><div class=\"line\"><span class=\"symbol\">  host:</span> www.leolan.top <span class=\"meta\">## 在百度站长平台中注册的域名</span></div><div class=\"line\"><span class=\"symbol\">  token:</span> kZ5xboXBFPxQ0g7N <span class=\"meta\">## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span></div><div class=\"line\"><span class=\"symbol\">  path:</span> /baidu_urls.txt <span class=\"meta\">## 文本文档的地址， 新链接会保存在此文本文档里</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"主动推送新链接\"><a href=\"#主动推送新链接\" class=\"headerlink\" title=\"主动推送新链接\"></a>主动推送新链接</h4><p>解决百度爬虫被禁止访问的问题，提升网站收录质量和速度。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-baidu-<span class=\"keyword\">url</span>-submit <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>在 站点配置文件 中添加如下代码。<br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">baidu_url_submit:</span></div><div class=\"line\"><span class=\"symbol\">  count:</span> <span class=\"number\">5</span> <span class=\"meta\">## 比如3，代表提交最新的三个链接</span></div><div class=\"line\"><span class=\"symbol\">  host:</span> blog.tangxiaozhu.com <span class=\"meta\">## 在百度站长平台中注册的域名</span></div><div class=\"line\"><span class=\"symbol\">  token:</span>  <span class=\"meta\">## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span></div><div class=\"line\"><span class=\"symbol\">  path:</span> baidu_urls.txt <span class=\"meta\">## 文本文档的地址， 新链接会保存在此文本文档里</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"向百度提交所有链接\"><a href=\"#向百度提交所有链接\" class=\"headerlink\" title=\"向百度提交所有链接\"></a>向百度提交所有链接</h4><p>这是LoveNight的脚本，先本地安装Python。<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></div><div class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></div><div class=\"line\"><span class=\"comment\"># @Author: LoveNight</span></div><div class=\"line\"><span class=\"comment\"># @Date:   2015-11-16 20:45:59</span></div><div class=\"line\"><span class=\"comment\"># @Last Modified by:   lulee007</span></div><div class=\"line\"><span class=\"comment\"># @Last Modified time: 2016-01-16 21:06:50</span></div><div class=\"line\"><span class=\"keyword\">import</span> os</div><div class=\"line\"><span class=\"keyword\">import</span> sys</div><div class=\"line\"><span class=\"keyword\">import</span> json</div><div class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup <span class=\"keyword\">as</span> BS</div><div class=\"line\"><span class=\"keyword\">import</span> requests</div><div class=\"line\"><span class=\"keyword\">import</span> codecs</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">\"\"\"</div><div class=\"line\">hexo 博客专用，向百度站长平台提交所有网址</div><div class=\"line\"></div><div class=\"line\">本脚本必须放在 hexo 博客的根目录下执行！需要已安装生成百度站点地图的插件。</div><div class=\"line\">百度站长平台提交链接：http://zhanzhang.baidu.com/linksubmit/index</div><div class=\"line\">主动推送：最为快速的提交方式，推荐您将站点当天新产出链接立即通过此方式推送给百度，以保证新链接可以及时被百度收录。</div><div class=\"line\">从中找到自己的接口调用地址</div><div class=\"line\">\"\"\"</span></div><div class=\"line\"></div><div class=\"line\">url = <span class=\"string\">'http://data.zz.baidu.com/urls?site=leolan.top&amp;token=kZ5xboXBFPxQ0g7N'</span>    <span class=\"comment\">#这里是你的百度推送地址。</span></div><div class=\"line\">baidu_sitemap = os.path.join(sys.path[<span class=\"number\">0</span>], <span class=\"string\">'public'</span>, <span class=\"string\">'baidusitemap.xml'</span>)</div><div class=\"line\">google_sitemap = os.path.join(sys.path[<span class=\"number\">0</span>], <span class=\"string\">'public'</span>, <span class=\"string\">'baidusitemap_zhanwei.xml'</span>)</div><div class=\"line\"><span class=\"comment\"># sitemap = [baidu_sitemap, google_sitemap]</span></div><div class=\"line\">sitemap = [baidu_sitemap]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># assert (os.path.exists(baidu_sitemap) or os.path.exists(</span></div><div class=\"line\"><span class=\"comment\">#     google_sitemap)), \"没找到任何网站地图，请检查！\"</span></div><div class=\"line\"><span class=\"keyword\">assert</span> os.path.exists(baidu_sitemap) , <span class=\"string\">\"没找到任何网站地图，请检查！\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 从站点地图中读取网址列表</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">getUrls</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    urls = []</div><div class=\"line\">    <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> sitemap:</div><div class=\"line\">        <span class=\"keyword\">if</span> os.path.exists(_):</div><div class=\"line\">            <span class=\"keyword\">with</span> codecs.open(_, <span class=\"string\">\"r\"</span>, <span class=\"string\">\"utf-8\"</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">                xml = f.read()</div><div class=\"line\">            soup = BS(xml, <span class=\"string\">\"xml\"</span>)</div><div class=\"line\">            tags = soup.find_all(<span class=\"string\">\"loc\"</span>)</div><div class=\"line\">            urls += [x.string <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> tags]</div><div class=\"line\">            <span class=\"keyword\">if</span> _ == baidu_sitemap:</div><div class=\"line\">                tags = soup.find_all(<span class=\"string\">\"breadCrumb\"</span>, url=<span class=\"keyword\">True</span>)</div><div class=\"line\">                print(<span class=\"string\">\"\"</span>)</div><div class=\"line\">                urls += [x[<span class=\"string\">\"url\"</span>] <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> tags]</div><div class=\"line\">    <span class=\"keyword\">return</span> urls</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># POST提交网址列表</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">postUrls</span><span class=\"params\">(urls)</span>:</span></div><div class=\"line\">    urls = set(urls)  <span class=\"comment\"># 先去重</span></div><div class=\"line\">    print(<span class=\"string\">\"一共提取出 %s 个网址\"</span> % len(urls))</div><div class=\"line\">    data = <span class=\"string\">\"\\n\"</span>.join(urls)</div><div class=\"line\">    <span class=\"keyword\">return</span> requests.post(url, data=data).text</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</div><div class=\"line\"></div><div class=\"line\">    urls = getUrls()</div><div class=\"line\">    result = postUrls(urls)</div><div class=\"line\">    print(<span class=\"string\">\"提交结果：\"</span>)</div><div class=\"line\">    print(result)</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"语法优化\"><a href=\"#语法优化\" class=\"headerlink\" title=\"语法优化\"></a>语法优化</h3><p>默认的语法无法添加角标（footnotes）以注明引用，这种可来回跳转的引用还是挺有用处的。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm <span class=\"keyword\">install</span> hexo-footnotes <span class=\"comment\">--save</span></div></pre></td></tr></table></figure></p>\n<p>安装完毕请确认是否生效，如不生效，在 站点配置文件 中添加如下代码以手动启用：<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">plugins:</span></div><div class=\"line\">  - hexo-footnotes</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://ofyfogrgx.bkt.clouddn.com/222054761.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"页面留白-扩大显示范围\"><a href=\"#页面留白-扩大显示范围\" class=\"headerlink\" title=\"页面留白(扩大显示范围)\"></a>页面留白(扩大显示范围)</h3><p>浏览器留白太多，代码块看起来比较麻烦，想让更多空间显示文章。<br>NexT 对于内容的宽度的设定如下：<br>700px，当屏幕宽度 &lt; 1600px<br>900px，当屏幕宽度 &gt;= 1600px<br>移动设备下，宽度自适应</p>\n<p>如果你需要修改内容的宽度，同样需要编辑样式文件。 编辑主题的 <strong>source/css/_variables/custom.styl</strong> 文件，新增变量：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 修改成你期望的宽度，默认700px</span></div><div class=\"line\"><span class=\"meta\"><span class=\"meta-keyword\">$content</span>-desktop = 700px</span></div><div class=\"line\"><span class=\"comment\">// 当视窗超过 1600px 后的宽度，默认900px</span></div><div class=\"line\"><span class=\"meta\"><span class=\"meta-keyword\">$content</span>-desktop-large = 900px</span></div></pre></td></tr></table></figure></p>\n<p>如果主题风格选择的是<strong>Pisces</strong>；那么同时还要修改<strong>header</strong> 的宽度、<strong>.main-inner </strong>的宽度以及 <strong>.content-wrap </strong>的宽度(如果没什么问题可以不修改custom.styl文件)。<br>编辑文件：<strong>source/css/_schemes/Picses/_layout.styl</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//可以使用百分比，也可以是像素，80%是比较合适的。</span></div><div class=\"line\"><span class=\"comment\">//开头header中修改为80%</span></div><div class=\"line\">header&#123; <span class=\"attribute\">width</span>: <span class=\"number\">80%</span>; &#125;</div><div class=\"line\"><span class=\"comment\">//.container中系应该为80%</span></div><div class=\"line\"><span class=\"selector-class\">.main-inner</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">80%</span>; &#125;</div><div class=\"line\"><span class=\"comment\">//最后修改.content-wrap</span></div><div class=\"line\"><span class=\"selector-class\">.content-wrap</span> &#123; <span class=\"attribute\">width</span>: calc(<span class=\"number\">100%</span> - <span class=\"number\">260px</span>); &#125;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"多说评论框自定义css\"><a href=\"#多说评论框自定义css\" class=\"headerlink\" title=\"多说评论框自定义css\"></a>多说评论框自定义css</h3><p>感谢<a href=\"http://www.arao.me/\">arao</a>的代码<br>进入多说管理后台<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/170352768.png\" alt=\"mark\"><br>把下面代码粘贴进去保存<br><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#ds-reset</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span>,</div><div class=\"line\"><span class=\"selector-id\">#ds-recent-visitors</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span> &#123;</div><div class=\"line\"><span class=\"attribute\">width</span>: <span class=\"number\">54px</span>;</div><div class=\"line\"><span class=\"attribute\">height</span>: <span class=\"number\">54px</span>;     <span class=\"comment\">/*设置图像的长和宽，这里要根据自己的评论框情况更改*/</span></div><div class=\"line\"><span class=\"attribute\">border-radius</span>: <span class=\"number\">27px</span>;     <span class=\"comment\">/*设置图像圆角效果,在这里我直接设置了超过width/2的像素，即为圆形了*/</span></div><div class=\"line\">-webkit-<span class=\"attribute\">border-radius</span>: <span class=\"number\">27px</span>;     <span class=\"comment\">/*圆角效果：兼容webkit浏览器*/</span></div><div class=\"line\">-moz-<span class=\"attribute\">border-radius</span>: <span class=\"number\">27px</span>;</div><div class=\"line\"><span class=\"attribute\">box-shadow</span>: inset <span class=\"number\">0</span> -<span class=\"number\">1px</span> <span class=\"number\">0</span> <span class=\"number\">#3333</span>sf;     <span class=\"comment\">/*设置图像阴影效果*/</span></div><div class=\"line\">-webkit-<span class=\"attribute\">box-shadow</span>: inset <span class=\"number\">0</span> -<span class=\"number\">1px</span> <span class=\"number\">0</span> <span class=\"number\">#3333</span>sf;</div><div class=\"line\">-webkit-<span class=\"attribute\">transition</span>: <span class=\"number\">0.4s</span>;</div><div class=\"line\">-webkit-<span class=\"attribute\">transition</span>: -webkit-transform <span class=\"number\">0.4s</span> ease-out;</div><div class=\"line\"><span class=\"attribute\">transition</span>: transform <span class=\"number\">0.4s</span> ease-out;     <span class=\"comment\">/*变化时间设置为0.4秒(变化动作即为下面的图像旋转360读）*/</span></div><div class=\"line\">-moz-<span class=\"attribute\">transition</span>: -moz-transform <span class=\"number\">0.4s</span> ease-out;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#ds-reset</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span>:hover,</div><div class=\"line\"><span class=\"selector-id\">#ds-recent-visitors</span> <span class=\"selector-class\">.ds-avatar</span> <span class=\"selector-tag\">img</span>:hover &#123;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/*设置鼠标悬浮在头像时的CSS样式*/</span>    <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">#fff</span>;</div><div class=\"line\">rgba(255, 255, 255, <span class=\"selector-class\">.6</span>), inset 0 0 20px rgba(255, 255, 255, 1);</div><div class=\"line\">-webkit-<span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">10px</span> <span class=\"number\">#fff</span>;</div><div class=\"line\">rgba(255, 255, 255, <span class=\"selector-class\">.6</span>), inset 0 0 20px rgba(255, 255, 255, 1);</div><div class=\"line\"><span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);     <span class=\"comment\">/*图像旋转360度*/</span></div><div class=\"line\">-webkit-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</div><div class=\"line\">-moz-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#ds-thread</span> <span class=\"selector-id\">#ds-reset</span> <span class=\"selector-class\">.ds-textarea-wrapper</span> <span class=\"selector-tag\">textarea</span> &#123;</div><div class=\"line\"><span class=\"attribute\">background</span>: url(http://ww4.sinaimg.cn/small/<span class=\"number\">649</span>a4735gw1et7gnhy5fej20zk0m8q3q.jpg) right no-repeat;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#ds-recent-visitors</span> <span class=\"selector-class\">.ds-avatar</span> &#123;</div><div class=\"line\"><span class=\"attribute\">float</span>: left</div><div class=\"line\">&#125;</div><div class=\"line\">/*隐藏多说底部版权*/</div><div class=\"line\"><span class=\"number\">#d</span>s-thread <span class=\"number\">#d</span>s-reset .ds-powered-by &#123;</div><div class=\"line\">display: none;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"解决多说评论不稳定、加载慢\"><a href=\"#解决多说评论不稳定、加载慢\" class=\"headerlink\" title=\"解决多说评论不稳定、加载慢\"></a>解决多说评论不稳定、加载慢</h3><p>把多说评论依赖的<strong>embed.js</strong>放置底部，修改<br>themes/next/layout/_scripts/third-party/comments/duoshuo.swig文件<br>将<br><figure class=\"highlight scheme\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"name\">document.getElementsByTagName</span>(<span class=\"symbol\">'head</span>')[<span class=\"name\">0</span>]</div></pre></td></tr></table></figure></p>\n<p>修改为<br><figure class=\"highlight scheme\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"name\">document.getElementById</span>(<span class=\"symbol\">'footer</span>')</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"多说userid\"><a href=\"#多说userid\" class=\"headerlink\" title=\"多说userid\"></a>多说userid</h3><p>主题配置中需要用到user_id<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid1.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/duoshuo_userid2.png\" alt=\"\"><br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">duoshuo_info:</span></div><div class=\"line\"><span class=\"attr\">  ua_enable:</span> <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">  admin_enable:</span> ture</div><div class=\"line\"><span class=\"attr\">  user_id:</span> <span class=\"number\">6343395544286626562</span></div><div class=\"line\"><span class=\"attr\">  admin_nickname:</span> 博主</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"动态背景\"><a href=\"#动态背景\" class=\"headerlink\" title=\"动态背景\"></a>动态背景</h3><p>修改<strong>_layout.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_layout.swig<br>在末尾</body>前加上下面一句<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- 背景动画 --&gt;</span></div><div class=\"line\">#默认灰色线条</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/js/src/particle.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\">#浅蓝色线条</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"/js/src/particle.js\"</span> <span class=\"attr\">count</span>=<span class=\"string\">\"50\"</span> <span class=\"attr\">zindex</span>=<span class=\"string\">\"-2\"</span> <span class=\"attr\">opacity</span>=<span class=\"string\">\"1\"</span> <span class=\"attr\">color</span>=<span class=\"string\">\"0,104,183\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>在themes\\source\\js\\src\\下新建文件particle.js写上以下代码（也可以自己下载其他js,修改方式差不多）<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">n</span>(<span class=\"params\">n,e,t</span>)</span>&#123;<span class=\"keyword\">return</span> n.getAttribute(e)||t&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">e</span>(<span class=\"params\">n</span>)</span>&#123;<span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.getElementsByTagName(n)&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">t</span>(<span class=\"params\"></span>)</span>&#123;<span class=\"keyword\">var</span> t=e(<span class=\"string\">\"script\"</span>),o=t.length,i=t[o<span class=\"number\">-1</span>];<span class=\"keyword\">return</span>&#123;<span class=\"attr\">l</span>:o,<span class=\"attr\">z</span>:n(i,<span class=\"string\">\"zIndex\"</span>,<span class=\"number\">-1</span>),<span class=\"attr\">o</span>:n(i,<span class=\"string\">\"opacity\"</span>,<span class=\"number\">.5</span>),<span class=\"attr\">c</span>:n(i,<span class=\"string\">\"color\"</span>,<span class=\"string\">\"0,0,0\"</span>),<span class=\"attr\">n</span>:n(i,<span class=\"string\">\"count\"</span>,<span class=\"number\">99</span>)&#125;&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">o</span>(<span class=\"params\"></span>)</span>&#123;c=u.width=<span class=\"built_in\">window</span>.innerWidth||<span class=\"built_in\">document</span>.documentElement.clientWidth||<span class=\"built_in\">document</span>.body.clientWidth,a=u.height=<span class=\"built_in\">window</span>.innerHeight||<span class=\"built_in\">document</span>.documentElement.clientHeight||<span class=\"built_in\">document</span>.body.clientHeight&#125;<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">i</span>(<span class=\"params\"></span>)</span>&#123;l.clearRect(<span class=\"number\">0</span>,<span class=\"number\">0</span>,c,a);<span class=\"keyword\">var</span> n,e,t,o,u,d,x=[w].concat(y);y.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">i</span>)</span>&#123;<span class=\"keyword\">for</span>(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x&gt;c||i.x&lt;<span class=\"number\">0</span>?<span class=\"number\">-1</span>:<span class=\"number\">1</span>,i.ya*=i.y&gt;a||i.y&lt;<span class=\"number\">0</span>?<span class=\"number\">-1</span>:<span class=\"number\">1</span>,l.fillRect(i.x<span class=\"number\">-.5</span>,i.y<span class=\"number\">-.5</span>,<span class=\"number\">1</span>,<span class=\"number\">1</span>),e=<span class=\"number\">0</span>;e&lt;x.length;e++)n=x[e],i!==n&amp;&amp;<span class=\"literal\">null</span>!==n.x&amp;&amp;<span class=\"literal\">null</span>!==n.y&amp;&amp;(o=i.x-n.x,u=i.y-n.y,d=o*o+u*u,d&lt;n.max&amp;&amp;(n===w&amp;&amp;d&gt;=n.max/<span class=\"number\">2</span>&amp;&amp;(i.x-=<span class=\"number\">.03</span>*o,i.y-=<span class=\"number\">.03</span>*u),t=(n.max-d)/n.max,l.beginPath(),l.lineWidth=t/<span class=\"number\">2</span>,l.strokeStyle=<span class=\"string\">\"rgba(\"</span>+m.c+<span class=\"string\">\",\"</span>+(t+<span class=\"number\">.2</span>)+<span class=\"string\">\")\"</span>,l.moveTo(i.x,i.y),l.lineTo(n.x,n.y),l.stroke()));x.splice(x.indexOf(i),<span class=\"number\">1</span>)&#125;),r(i)&#125;<span class=\"keyword\">var</span> c,a,u=<span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"canvas\"</span>),m=t(),d=<span class=\"string\">\"c_n\"</span>+m.l,l=u.getContext(<span class=\"string\">\"2d\"</span>),r=<span class=\"built_in\">window</span>.requestAnimationFrame||<span class=\"built_in\">window</span>.webkitRequestAnimationFrame||<span class=\"built_in\">window</span>.mozRequestAnimationFrame||<span class=\"built_in\">window</span>.oRequestAnimationFrame||<span class=\"built_in\">window</span>.msRequestAnimationFrame||<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;<span class=\"built_in\">window</span>.setTimeout(n,<span class=\"number\">1e3</span>/<span class=\"number\">45</span>)&#125;,x=<span class=\"built_in\">Math</span>.random,w=&#123;<span class=\"attr\">x</span>:<span class=\"literal\">null</span>,<span class=\"attr\">y</span>:<span class=\"literal\">null</span>,<span class=\"attr\">max</span>:<span class=\"number\">2e4</span>&#125;;u.id=d,u.style.cssText=<span class=\"string\">\"position:fixed;top:0;left:0;z-index:\"</span>+m.z+<span class=\"string\">\";opacity:\"</span>+m.o,e(<span class=\"string\">\"body\"</span>)[<span class=\"number\">0</span>].appendChild(u),o(),<span class=\"built_in\">window</span>.onresize=o,<span class=\"built_in\">window</span>.onmousemove=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;n=n||<span class=\"built_in\">window</span>.event,w.x=n.clientX,w.y=n.clientY&#125;,<span class=\"built_in\">window</span>.onmouseout=<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;w.x=<span class=\"literal\">null</span>,w.y=<span class=\"literal\">null</span>&#125;;<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> y=[],s=<span class=\"number\">0</span>;m.n&gt;s;s++)&#123;<span class=\"keyword\">var</span> f=x()*c,h=x()*a,g=<span class=\"number\">2</span>*x()<span class=\"number\">-1</span>,p=<span class=\"number\">2</span>*x()<span class=\"number\">-1</span>;y.push(&#123;<span class=\"attr\">x</span>:f,<span class=\"attr\">y</span>:h,<span class=\"attr\">xa</span>:g,<span class=\"attr\">ya</span>:p,<span class=\"attr\">max</span>:<span class=\"number\">6e3</span>&#125;)&#125;setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;i()&#125;,<span class=\"number\">100</span>)&#125;();</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"背景透明\"><a href=\"#背景透明\" class=\"headerlink\" title=\"背景透明\"></a>背景透明</h3><p>在 <strong>\\themes\\next\\source\\css\\_custom\\custom.styl</strong> 中写上 <code>.content-wrap {background: transparent;}</code><br><strong>custom.styl</strong>文件为用户自定义风格，卸载里面的内容会优先覆盖主题的设定，也可以定义其他的方法等。</p>\n<hr>\n<h3 id=\"背景放图片\"><a href=\"#背景放图片\" class=\"headerlink\" title=\"背景放图片\"></a>背景放图片</h3><p>首先找到一个背景图片放到 \\themes\\next\\source\\images下；<br>修改themes\\next\\source\\css_schemes\\Pisces（Mist和Muse也行）\\index.styl文件，<br>在文件的最上方加上一代码<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">body</span> &#123; <span class=\"attribute\">background</span>:<span class=\"built_in\">url</span>(/images/backGround.jpg);&#125;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"修改文章超链接样式\"><a href=\"#修改文章超链接样式\" class=\"headerlink\" title=\"修改文章超链接样式\"></a>修改文章超链接样式</h3><p>将链接文本设置为蓝色，鼠标划过时文字颜色加深，并显示下划线。<br>修改 <strong>themes\\next\\source\\css\\_custom\\custom.styl </strong>，添加如下 <code>css</code> 样式（颜色可以自己更改，百度html颜色代码即可找到）：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">.post-body p a &#123;</div><div class=\"line\">  color: #0593d3;</div><div class=\"line\">  border-bottom: none;</div><div class=\"line\">  &amp;:hover &#123;</div><div class=\"line\">    color: #0477ab;</div><div class=\"line\">    text-decoration: underline;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"High一下\"><a href=\"#High一下\" class=\"headerlink\" title=\"High一下\"></a>High一下</h3><h4 id=\"第一种\"><a href=\"#第一种\" class=\"headerlink\" title=\"第一种\"></a><strong>第一种</strong></h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161205/100022200.png\" alt=\"mark\"><br>修改<strong>header.swig</strong>模板<br><strong>模板位置</strong>：themes\\next\\layout\\_partials\\header.swig<br>在以下代码的结尾换行<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;% if hasSearch %&#125;</div><div class=\"line\">  &lt;li class=\"menu-item menu-item-search\"&gt;</div><div class=\"line\">    &#123;% if theme.swiftype_key %&#125;</div><div class=\"line\">      &lt;a href=\"javascript:;\" class=\"st-search-show-outputs\"&gt;</div><div class=\"line\">    &#123;% elseif config.search %&#125;</div><div class=\"line\">      &lt;a href=\"javascript:;\" class=\"popup-trigger\"&gt;</div><div class=\"line\">    &#123;% endif %&#125;</div><div class=\"line\">      &#123;% if theme.menu_icons.enable %&#125;</div><div class=\"line\">        &lt;i class=\"menu-item-icon fa fa-search fa-fw\"&gt;&lt;/i&gt; &lt;br /&gt;</div><div class=\"line\">      &#123;% endif %&#125;</div><div class=\"line\">      &#123;&#123; __('menu.search') &#125;&#125;</div><div class=\"line\">    &lt;/a&gt;</div><div class=\"line\">  &lt;/li&gt;</div><div class=\"line\">&#123;% endif %&#125;</div></pre></td></tr></table></figure></p>\n<p>插入以下内容,感谢Neveryu修复了一些bug，以下是Neveryu的代码。<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;!-- 自定义High一下的功能 --&gt;</div><div class=\"line\">     &lt;li class=\"menu-item\"&gt; &lt;a title=\"把这个链接拖到你的工具栏中,任何网页都可以High\" href='javascript:(</div><div class=\"line\">   /*</div><div class=\"line\">    * Copyright (C) 2016 Never_yu (Neveryu.github.io) &lt;React.dong.yu@gmail.com&gt;</div><div class=\"line\">    * Sina Weibo (http://weibo.com/Neveryu)</div><div class=\"line\">    *</div><div class=\"line\">    * Licensed under the Apache License, Version 2.0 (the \"License\");</div><div class=\"line\">    * you may not use this file except in compliance with the License.</div><div class=\"line\">    * You may obtain a copy of the License at</div><div class=\"line\">    *</div><div class=\"line\">    *      http://www.apache.org/licenses/LICENSE-2.0</div><div class=\"line\">    *</div><div class=\"line\">    * Unless required by applicable law or agreed to in writing, software</div><div class=\"line\">    * distributed under the License is distributed on an \"AS IS\" BASIS,</div><div class=\"line\">    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class=\"line\">    * See the License for the specific language governing permissions and</div><div class=\"line\">    * limitations under the License.</div><div class=\"line\">    */</div><div class=\"line\">   function go() &#123;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">   var songs = [</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\",</div><div class=\"line\">               \"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&amp;%20Stone%20-%20Lost.mp3\"</div><div class=\"line\">   ];</div><div class=\"line\"></div><div class=\"line\">   </div><div class=\"line\">   function c() &#123;</div><div class=\"line\">       var e = document.createElement(\"link\");</div><div class=\"line\">       e.setAttribute(\"type\", \"text/css\");</div><div class=\"line\">       e.setAttribute(\"rel\", \"stylesheet\");</div><div class=\"line\">       e.setAttribute(\"href\", f);</div><div class=\"line\">       e.setAttribute(\"class\", l);</div><div class=\"line\">       document.body.appendChild(e)</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function h() &#123;</div><div class=\"line\">       var e = document.getElementsByClassName(l);</div><div class=\"line\">       for (var t = 0; t &lt; e.length; t++) &#123;</div><div class=\"line\">           document.body.removeChild(e[t])</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function p() &#123;</div><div class=\"line\">       var e = document.createElement(\"div\");</div><div class=\"line\">       e.setAttribute(\"class\", a);</div><div class=\"line\">       document.body.appendChild(e);</div><div class=\"line\">       setTimeout(function() &#123;</div><div class=\"line\">           document.body.removeChild(e)</div><div class=\"line\">       &#125;, 100)</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function d(e) &#123;</div><div class=\"line\">       return &#123;</div><div class=\"line\">           height : e.offsetHeight,</div><div class=\"line\">           width : e.offsetWidth</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function v(i) &#123;</div><div class=\"line\">       var s = d(i);</div><div class=\"line\">       return s.height &gt; e &amp;&amp; s.height &lt; n &amp;&amp; s.width &gt; t &amp;&amp; s.width &lt; r</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function m(e) &#123;</div><div class=\"line\">       var t = e;</div><div class=\"line\">       var n = 0;</div><div class=\"line\">       while (!!t) &#123;</div><div class=\"line\">           n += t.offsetTop;</div><div class=\"line\">           t = t.offsetParent</div><div class=\"line\">       &#125;</div><div class=\"line\">       return n</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function g() &#123;</div><div class=\"line\">       var e = document.documentElement;</div><div class=\"line\">       if (!!window.innerWidth) &#123;</div><div class=\"line\">           return window.innerHeight</div><div class=\"line\">       &#125; else if (e &amp;&amp; !isNaN(e.clientHeight)) &#123;</div><div class=\"line\">           return e.clientHeight</div><div class=\"line\">       &#125;</div><div class=\"line\">       return 0</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function y() &#123;</div><div class=\"line\">       if (window.pageYOffset) &#123;</div><div class=\"line\">           return window.pageYOffset</div><div class=\"line\">       &#125;</div><div class=\"line\">       return Math.max(document.documentElement.scrollTop, document.body.scrollTop)</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function E(e) &#123;</div><div class=\"line\">       var t = m(e);</div><div class=\"line\">       return t &gt;= w &amp;&amp; t &lt;= b + w</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function S() &#123;</div><div class=\"line\">       var e = document.getElementById(\"audio_element_id\");</div><div class=\"line\">       if(e != null)&#123;</div><div class=\"line\">           var index = parseInt(e.getAttribute(\"curSongIndex\"));</div><div class=\"line\">           if(index &gt; songs.length - 2) &#123;</div><div class=\"line\">               index = 0;</div><div class=\"line\">           &#125; else &#123;</div><div class=\"line\">               index++;</div><div class=\"line\">           &#125;</div><div class=\"line\">           e.setAttribute(\"curSongIndex\", index);</div><div class=\"line\">           N();</div><div class=\"line\">       &#125;</div><div class=\"line\"></div><div class=\"line\">       e.src = i;</div><div class=\"line\">       e.play()</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function x(e) &#123;</div><div class=\"line\">       e.className += \" \" + s + \" \" + o</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function T(e) &#123;</div><div class=\"line\">       e.className += \" \" + s + \" \" + u[Math.floor(Math.random() * u.length)]</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function N() &#123;</div><div class=\"line\">       var e = document.getElementsByClassName(s);</div><div class=\"line\">       var t = new RegExp(\"\\\\b\" + s + \"\\\\b\");</div><div class=\"line\">       for (var n = 0; n &lt; e.length; ) &#123;</div><div class=\"line\">           e[n].className = e[n].className.replace(t, \"\")</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   function initAudioEle() &#123;</div><div class=\"line\">       var e = document.getElementById(\"audio_element_id\");</div><div class=\"line\">       if(e === null)&#123;</div><div class=\"line\">           e = document.createElement(\"audio\");</div><div class=\"line\">           e.setAttribute(\"class\", l);</div><div class=\"line\">           e.setAttribute(\"curSongIndex\", 0);</div><div class=\"line\">           e.id = \"audio_element_id\";</div><div class=\"line\">           e.loop = false;</div><div class=\"line\">           e.bgcolor = 0;</div><div class=\"line\">           e.addEventListener(\"canplay\", function() &#123;</div><div class=\"line\">           setTimeout(function() &#123;</div><div class=\"line\">               x(k)</div><div class=\"line\">           &#125;, 500);</div><div class=\"line\">           setTimeout(function() &#123;</div><div class=\"line\">               N();</div><div class=\"line\">               p();</div><div class=\"line\">               for (var e = 0; e &lt; O.length; e++) &#123;</div><div class=\"line\">                   T(O[e])</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;, 15500)</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e.addEventListener(\"ended\", function() &#123;</div><div class=\"line\">           N();</div><div class=\"line\">           h();</div><div class=\"line\">           go();</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e.innerHTML = \" &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;\";</div><div class=\"line\">       document.body.appendChild(e);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   </div><div class=\"line\">   initAudioEle();</div><div class=\"line\">   var e = 30;</div><div class=\"line\">   var t = 30;</div><div class=\"line\">   var n = 350;</div><div class=\"line\">   var r = 350;</div><div class=\"line\"></div><div class=\"line\">   var curSongIndex = parseInt(document.getElementById(\"audio_element_id\").getAttribute(\"curSongIndex\"));</div><div class=\"line\">   var i = songs[curSongIndex];</div><div class=\"line\">   </div><div class=\"line\">   var s = \"mw-harlem_shake_me\";</div><div class=\"line\">   var o = \"im_first\";</div><div class=\"line\">   var u = [\"im_drunk\", \"im_baked\", \"im_trippin\", \"im_blown\"];</div><div class=\"line\">   var a = \"mw-strobe_light\";</div><div class=\"line\"></div><div class=\"line\">   /* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */</div><div class=\"line\">   var f = \"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\";</div><div class=\"line\">   </div><div class=\"line\">   var l = \"mw_added_css\";</div><div class=\"line\">   var b = g();</div><div class=\"line\">   var w = y();</div><div class=\"line\">   var C = document.getElementsByTagName(\"*\");</div><div class=\"line\">   var k = null;</div><div class=\"line\">   for (var L = 0; L &lt; C.length; L++) &#123;</div><div class=\"line\">       var A = C[L];</div><div class=\"line\">       if (v(A)) &#123;</div><div class=\"line\">           if (E(A)) &#123;</div><div class=\"line\">               k = A;</div><div class=\"line\">               break</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   if (A === null) &#123;</div><div class=\"line\">       console.warn(\"Could not find a node of the right size. Please try a different page.\");</div><div class=\"line\">       return</div><div class=\"line\">   &#125;</div><div class=\"line\">   c();</div><div class=\"line\">   S();</div><div class=\"line\">   var O = [];</div><div class=\"line\">   for (var L = 0; L &lt; C.length; L++) &#123;</div><div class=\"line\">       var A = C[L];</div><div class=\"line\">       if (v(A)) &#123;</div><div class=\"line\">           O.push(A)</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   &#125;)()'&gt;&lt;i class=\"menu-item-icon fa fa-music fa-fw\"&gt;&lt;/i&gt;High一下&lt;/a&gt; &lt;/li&gt;</div><div class=\"line\">         &lt;!-- end High一下 --&gt;</div></pre></td></tr></table></figure></p>\n<hr>\n<h4 id=\"第二种\"><a href=\"#第二种\" class=\"headerlink\" title=\"第二种\"></a><strong>第二种</strong></h4><p><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161205/111721588.png\" alt=\"mark\"></p>\n<p>不修改<strong>themes\\next\\layout\\_partials\\header.swig</strong>文件<br>而是修改<strong>themes\\next\\layout\\_macro\\sidebar.swig</strong><br><figure class=\"highlight verilog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div></pre></td><td class=\"code\"><pre><div class=\"line\">        &#123;% <span class=\"keyword\">if</span> theme<span class=\"variable\">.rss</span> %&#125;</div><div class=\"line\">          &lt;div <span class=\"keyword\">class</span>=<span class=\"string\">\"feed-link motion-element\"</span>&gt;</div><div class=\"line\">            &lt;a href=<span class=\"string\">\"&#123;&#123; url_for(theme.rss) &#125;&#125;\"</span> rel=<span class=\"string\">\"alternate\"</span>&gt;</div><div class=\"line\">              &lt;i <span class=\"keyword\">class</span>=<span class=\"string\">\"fa fa-rss\"</span>&gt;&lt;/i&gt;</div><div class=\"line\">              RSS</div><div class=\"line\">            &lt;/a&gt;</div><div class=\"line\">&lt;!-- 在RSS的div内加入，引用相同的样式 --&gt;</div><div class=\"line\">&lt;!-- 自定义High一下的功能 --&gt;</div><div class=\"line\">&lt;a href='javascript:(</div><div class=\"line\">   <span class=\"keyword\">function</span> go() &#123;</div><div class=\"line\">   <span class=\"keyword\">var</span> songs = [</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/tongxingSibel%20-%20Im%20Sorry.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/Music-sunburst.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150103346.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com/blog/20161115/150842689.mp3\"</span>,</div><div class=\"line\">               <span class=\"string\">\"http://ofyfogrgx.bkt.clouddn.com//blog/Apple%20&amp;%20Stone%20-%20Lost.mp3\"</span></div><div class=\"line\">   ];</div><div class=\"line\">   </div><div class=\"line\">   <span class=\"keyword\">function</span> c() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.createElement</span>(<span class=\"string\">\"link\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"type\"</span>, <span class=\"string\">\"text/css\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"rel\"</span>, <span class=\"string\">\"stylesheet\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"href\"</span>, f);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"class\"</span>, l);</div><div class=\"line\">       document<span class=\"variable\">.body</span><span class=\"variable\">.appendChild</span>(e)</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> h() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementsByClassName</span>(l);</div><div class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> t = <span class=\"number\">0</span>; t &lt; e<span class=\"variable\">.length</span>; t++) &#123;</div><div class=\"line\">           document<span class=\"variable\">.body</span><span class=\"variable\">.removeChild</span>(e[t])</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> p() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.createElement</span>(<span class=\"string\">\"div\"</span>);</div><div class=\"line\">       e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"class\"</span>, a);</div><div class=\"line\">       document<span class=\"variable\">.body</span><span class=\"variable\">.appendChild</span>(e);</div><div class=\"line\">       setTimeout(<span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">           document<span class=\"variable\">.body</span><span class=\"variable\">.removeChild</span>(e)</div><div class=\"line\">       &#125;, <span class=\"number\">100</span>)</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> d(e) &#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">           height : e<span class=\"variable\">.offsetHeight</span>,</div><div class=\"line\">           width : e<span class=\"variable\">.offsetWidth</span></div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> v(i) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> s = d(i);</div><div class=\"line\">       <span class=\"keyword\">return</span> s<span class=\"variable\">.height</span> &gt; e &amp;&amp; s<span class=\"variable\">.height</span> &lt; n &amp;&amp; s<span class=\"variable\">.width</span> &gt; t &amp;&amp; s<span class=\"variable\">.width</span> &lt; r</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> m(e) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> t = e;</div><div class=\"line\">       <span class=\"keyword\">var</span> n = <span class=\"number\">0</span>;</div><div class=\"line\">       <span class=\"keyword\">while</span> (!!t) &#123;</div><div class=\"line\">           n += t<span class=\"variable\">.offsetTop</span>;</div><div class=\"line\">           t = t<span class=\"variable\">.offsetParent</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> n</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> g() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.documentElement</span>;</div><div class=\"line\">       <span class=\"keyword\">if</span> (!!window<span class=\"variable\">.innerWidth</span>) &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> window<span class=\"variable\">.innerHeight</span></div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (e &amp;&amp; !isNaN(e<span class=\"variable\">.clientHeight</span>)) &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> e<span class=\"variable\">.clientHeight</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> <span class=\"number\">0</span></div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> y() &#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (window<span class=\"variable\">.pageYOffset</span>) &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> window<span class=\"variable\">.pageYOffset</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> Math<span class=\"variable\">.max</span>(document<span class=\"variable\">.documentElement</span><span class=\"variable\">.scrollTop</span>, document<span class=\"variable\">.body</span><span class=\"variable\">.scrollTop</span>)</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> E(e) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> t = m(e);</div><div class=\"line\">       <span class=\"keyword\">return</span> t &gt;= w &amp;&amp; t &lt;= b + w</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> S() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementById</span>(<span class=\"string\">\"audio_element_id\"</span>);</div><div class=\"line\">       <span class=\"keyword\">if</span>(e != <span class=\"literal\">null</span>)&#123;</div><div class=\"line\">           <span class=\"keyword\">var</span> index = parseInt(e<span class=\"variable\">.getAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>));</div><div class=\"line\">           <span class=\"keyword\">if</span>(index &gt; songs<span class=\"variable\">.length</span> - <span class=\"number\">2</span>) &#123;</div><div class=\"line\">               index = <span class=\"number\">0</span>;</div><div class=\"line\">           &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">               index++;</div><div class=\"line\">           &#125;</div><div class=\"line\">           e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>, index);</div><div class=\"line\">           N();</div><div class=\"line\">       &#125;</div><div class=\"line\">       e<span class=\"variable\">.src</span> = i;</div><div class=\"line\">       e<span class=\"variable\">.play</span>()</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> x(e) &#123;</div><div class=\"line\">       e<span class=\"variable\">.className</span> += <span class=\"string\">\" \"</span> + s + <span class=\"string\">\" \"</span> + o</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> T(e) &#123;</div><div class=\"line\">       e<span class=\"variable\">.className</span> += <span class=\"string\">\" \"</span> + s + <span class=\"string\">\" \"</span> + u[Math<span class=\"variable\">.floor</span>(Math<span class=\"variable\">.random</span>() * u<span class=\"variable\">.length</span>)]</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> N() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementsByClassName</span>(s);</div><div class=\"line\">       <span class=\"keyword\">var</span> t = <span class=\"keyword\">new</span> RegExp(<span class=\"string\">\"\\\\b\"</span> + s + <span class=\"string\">\"\\\\b\"</span>);</div><div class=\"line\">       <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> n = <span class=\"number\">0</span>; n &lt; e<span class=\"variable\">.length</span>; ) &#123;</div><div class=\"line\">           e[n]<span class=\"variable\">.className</span> = e[n]<span class=\"variable\">.className</span><span class=\"variable\">.replace</span>(t, <span class=\"string\">\"\"</span>)</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">function</span> initAudioEle() &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> e = document<span class=\"variable\">.getElementById</span>(<span class=\"string\">\"audio_element_id\"</span>);</div><div class=\"line\">       <span class=\"keyword\">if</span>(e === <span class=\"literal\">null</span>)&#123;</div><div class=\"line\">           e = document<span class=\"variable\">.createElement</span>(<span class=\"string\">\"audio\"</span>);</div><div class=\"line\">           e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"class\"</span>, l);</div><div class=\"line\">           e<span class=\"variable\">.setAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>, <span class=\"number\">0</span>);</div><div class=\"line\">           e<span class=\"variable\">.id</span> = <span class=\"string\">\"audio_element_id\"</span>;</div><div class=\"line\">           e<span class=\"variable\">.loop</span> = false;</div><div class=\"line\">           e<span class=\"variable\">.bgcolor</span> = <span class=\"number\">0</span>;</div><div class=\"line\">           e<span class=\"variable\">.addEventListener</span>(<span class=\"string\">\"canplay\"</span>, <span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">           setTimeout(<span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">               x(k)</div><div class=\"line\">           &#125;, <span class=\"number\">500</span>);</div><div class=\"line\">           setTimeout(<span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">               N();</div><div class=\"line\">               p();</div><div class=\"line\">               <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> e = <span class=\"number\">0</span>; e &lt; O<span class=\"variable\">.length</span>; e++) &#123;</div><div class=\"line\">                   T(O[e])</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;, <span class=\"number\">15500</span>)</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e<span class=\"variable\">.addEventListener</span>(<span class=\"string\">\"ended\"</span>, <span class=\"keyword\">function</span>() &#123;</div><div class=\"line\">           N();</div><div class=\"line\">           h();</div><div class=\"line\">           go();</div><div class=\"line\">       &#125;, true);</div><div class=\"line\">       e<span class=\"variable\">.innerHTML</span> = <span class=\"string\">\" &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;\"</span>;</div><div class=\"line\">       document<span class=\"variable\">.body</span><span class=\"variable\">.appendChild</span>(e);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   </div><div class=\"line\">   initAudioEle();</div><div class=\"line\">   <span class=\"keyword\">var</span> e = <span class=\"number\">30</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> t = <span class=\"number\">30</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> n = <span class=\"number\">350</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> r = <span class=\"number\">350</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> curSongIndex = parseInt(document<span class=\"variable\">.getElementById</span>(<span class=\"string\">\"audio_element_id\"</span>)<span class=\"variable\">.getAttribute</span>(<span class=\"string\">\"curSongIndex\"</span>));</div><div class=\"line\">   <span class=\"keyword\">var</span> i = songs[curSongIndex];</div><div class=\"line\">   </div><div class=\"line\">   <span class=\"keyword\">var</span> s = <span class=\"string\">\"mw-harlem_shake_me\"</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> o = <span class=\"string\">\"im_first\"</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> u = [<span class=\"string\">\"im_drunk\"</span>, <span class=\"string\">\"im_baked\"</span>, <span class=\"string\">\"im_trippin\"</span>, <span class=\"string\">\"im_blown\"</span>];</div><div class=\"line\">   <span class=\"keyword\">var</span> a = <span class=\"string\">\"mw-strobe_light\"</span>;</div><div class=\"line\">   <span class=\"comment\">/* harlem-shake-style.css，替换成你的位置，也可以直接使用：//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css */</span></div><div class=\"line\">   <span class=\"keyword\">var</span> f = <span class=\"string\">\"//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css\"</span>;</div><div class=\"line\">   </div><div class=\"line\">   <span class=\"keyword\">var</span> l = <span class=\"string\">\"mw_added_css\"</span>;</div><div class=\"line\">   <span class=\"keyword\">var</span> b = g();</div><div class=\"line\">   <span class=\"keyword\">var</span> w = y();</div><div class=\"line\">   <span class=\"keyword\">var</span> C = document<span class=\"variable\">.getElementsByTagName</span>(<span class=\"string\">\"*\"</span>);</div><div class=\"line\">   <span class=\"keyword\">var</span> k = <span class=\"literal\">null</span>;</div><div class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> L = <span class=\"number\">0</span>; L &lt; C<span class=\"variable\">.length</span>; L++) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> A = C[L];</div><div class=\"line\">       <span class=\"keyword\">if</span> (v(A)) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (E(A)) &#123;</div><div class=\"line\">               k = A;</div><div class=\"line\">               <span class=\"keyword\">break</span></div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">if</span> (A === <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">       console<span class=\"variable\">.warn</span>(<span class=\"string\">\"Could not find a node of the right size. Please try a different page.\"</span>);</div><div class=\"line\">       <span class=\"keyword\">return</span></div><div class=\"line\">   &#125;</div><div class=\"line\">   c();</div><div class=\"line\">   S();</div><div class=\"line\">   <span class=\"keyword\">var</span> O = [];</div><div class=\"line\">   <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> L = <span class=\"number\">0</span>; L &lt; C<span class=\"variable\">.length</span>; L++) &#123;</div><div class=\"line\">       <span class=\"keyword\">var</span> A = C[L];</div><div class=\"line\">       <span class=\"keyword\">if</span> (v(A)) &#123;</div><div class=\"line\">           O<span class=\"variable\">.push</span>(A)</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   &#125;)()'&gt;&lt;i <span class=\"keyword\">class</span>=<span class=\"string\">\"menu-item-icon fa fa-music fa-fw\"</span>&gt;&lt;/i&gt;High&lt;/a&gt;</div><div class=\"line\">&lt;/div&gt;</div><div class=\"line\">         &lt;!-- <span class=\"keyword\">end</span> High一下 --&gt;</div><div class=\"line\">        &#123;% endif %&#125;</div></pre></td></tr></table></figure></p>\n<p>如果需要并排显示，像这样子：<img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161205/154359849.png\" alt=\"mark\"><br>修改文件：<strong>\\themes\\source\\css_schemes\\Pisces（主题风格对应的文件夹）_sidebar.styl</strong><br>找到这样一段，把<strong>display: block;</strong>改为<strong>display: inline-block;</strong><br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.feed-link</span> <span class=\"selector-tag\">a</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">display</span>: inline-block;   <span class=\"comment\">//并行显示，block则为分行显示</span></div><div class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">$orange</span>;</div><div class=\"line\">  <span class=\"attribute\">border</span>: none;</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"给-Github-添加-README\"><a href=\"#给-Github-添加-README\" class=\"headerlink\" title=\"给 Github 添加 README\"></a>给 Github 添加 README</h3><p>默认情况下，Github中每一个项目，我们希望有一份<strong>README.md</strong>的文件来作为项目的说明，但是我们在项目根目录下的<code>blog\\source</code>目录下创建一份<strong>README.md</strong>文件，写好说明介绍，部署的时候，这个<strong>README.md</strong>会被hexo解析掉，而不会被解析到Github中去的。<br>正确的解决方法其实很简单：<br><strong> 把<code>README.md</code>文件的后缀名改成”MDOWN”然后扔到<code>blog\\source</code>文件夹下即可，这样hexo不会解析，Github也会将其作为MD文件解析。 </strong></p>\n<p>或者你还可以在站点配置文件中修改，以禁止编译文件。<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">skip_render:</span></div><div class=\"line\">    - README.md</div></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"加入左上角「fork-me-on-github」\"><a href=\"#加入左上角「fork-me-on-github」\" class=\"headerlink\" title=\"加入左上角「fork me on github」\"></a>加入左上角「fork me on github」</h3><p><a href=\"https://github.com/blog/273-github-ribbons\">github官方教程</a></p>\n<hr>\n<h3 id=\"给-Blog-添加-LICENSE\"><a href=\"#给-Blog-添加-LICENSE\" class=\"headerlink\" title=\"给 Blog 添加 LICENSE\"></a>给 Blog 添加 LICENSE</h3><p>修改主题配置文件中的 160 行左右：</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Creative Commons 4.0 International License.</div><div class=\"line\"># http:<span class=\"comment\">//creativecommons.org/</span></div><div class=\"line\"># Available: <span class=\"keyword\">by</span> | <span class=\"keyword\">by</span>-nc | <span class=\"keyword\">by</span>-nc-nd | <span class=\"keyword\">by</span>-nc-<span class=\"keyword\">sa</span> | <span class=\"keyword\">by</span>-nd | <span class=\"keyword\">by</span>-<span class=\"keyword\">sa</span> | zero</div><div class=\"line\">creative_commons: <span class=\"keyword\">by</span>-nc-<span class=\"keyword\">sa</span></div><div class=\"line\">#creative_commons:</div></pre></td></tr></table></figure>\n<p>取消第 4 行的注释，然后选择你想使用的 LICENSE 即可，可选项参照第 3 行。</p>\n<hr>\n<h3 id=\"错误信息\"><a href=\"#错误信息\" class=\"headerlink\" title=\"错误信息\"></a>错误信息</h3><p><strong>LF will be replaced</strong><br>Windows 提交命令的时候出现 <strong>warning: LF will be replaced by CRLF in XXXXXXXXXXXXXX</strong> 的警告。输入命令：<br><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> core.autocrlf <span class=\"literal\">false</span></div></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> your_site/</div><div class=\"line\">touch Staticfile  <span class=\"comment\">#创建静态文件标识，用于Github识别，名字必须是Staticfile</span></div><div class=\"line\">hexo clean   <span class=\"comment\">#清除以前生成的旧文件</span></div><div class=\"line\">hexo g       <span class=\"comment\">#生成新的站点文件</span></div><div class=\"line\">hexo d       <span class=\"comment\">#部署到Github上</span></div></pre></td></tr></table></figure>\n<p>可参考：<a href=\"http://shomy.top/2016/03/03/hexo-in-coding-github/\">http://shomy.top/2016/03/03/hexo-in-coding-github/</a><br>部署完成打开网址就能看到效果了。</p>\n<p>Hexo的部署只会把生成的文件上传到仓库中，本地的<strong>设置，主题，*.md文件</strong>等等都不会上传，换一台电脑就没法干活了，一旦删除，那基本上所有的努力都白费了，这里介绍2种备份方法：</p>\n<ul>\n<li>1.新建一个仓库专门用来存放这些文件（最安全最方便的办法）</li>\n<li>2.和发布的网站使用同一个仓库，master用来存放这些文件，新建分支来发布网站（注意pages服务绑定该分支，不要合并分支，一旦合并就全部混乱了）<br>两种方法都要在网站根目录设定好远程端仓库：<code>git add remote XXXX</code><br>每次发布完网页，就顺手执行以下代码，把文档也同步到仓库中。<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">add</span><span class=\"bash\"> .</div><div class=\"line\"></span>git commit -m <span class=\"string\">\"xxx\"</span></div><div class=\"line\">git push</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<hr>\n<h1 id=\"绑定域名\"><a href=\"#绑定域名\" class=\"headerlink\" title=\"绑定域名\"></a>绑定域名</h1><p>原理是域名提供商的域名指向github或coding的域名服务器，在项目内建立CNAME的域名指向文件后，会自动去自己的域名服务器github或coding上查找该域名，找到啦就绑定在一起，找不到就绑定不了；如果绑定不了，那么域名指向的github和coding（Pages绑定域名时）服务器会报404错误；域名指向的coding（Pages页面没有绑定域名时）域名服务器会把index当做普通超文本解析，不会加载js、cs等资源。</p>\n<ul>\n<li>1· 在你的项目下新建一个<strong>CNAME</strong>文件，注意没有后缀名。在里面添加你的域名，一行一个，如我的就是<strong> www.leolan.top</strong>和<strong> leolan.top</strong>（github会自动绑定第一个，第二个也要绑定，不绑定访问报404错误），然后推送<strong>CNAME文件</strong>到远程仓库。（Github不建议在pages页上绑定设置，页面上是只能绑定一个的）；Coding的话要在<strong>CNAME文件</strong>里绑定两个，在Pages页面也绑定两个。</li>\n<li>2· 到域名服务商那里增加你的CNAME记录。添加两条记录，@和www的主机记录，记录类型为CNAME，记录值为 <code>username.github.io.</code>，重要的是 io 后面还有一个原点（看官方帮助文档Coding的就不用加点），切记。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com//blog/%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A.png\" alt=\"\"><br>过几分钟，刷新网页，就能直接用域名访问了，因为是在项目内建的<strong>CNAME</strong>文件，所以域名直接指向此项目文件夹，其他项目可以用其他域名设定。</li>\n</ul>\n<hr>\n"},{"title":"Linux 硬件篇","top":10,"abbrlink":37486,"date":"2016-12-12T09:10:36.000Z","keywords":null,"_content":"\n# 网卡\n学习鸟哥Linux，积累的一点点知识\n\n\n## 内核捕捉到得网卡信息：\n\n确认内核捕捉到了网卡 ：`dmesg |grep -in eth`\n其他设备方法差不多。 \n\n## 查询设备芯片： `lspci `\n\n查看内核是否顺利加载：`lsmod | grep \"对应模块号，比如e1000\"` \n模块的相关信息可以用：`modinfo \"对应模块号，比如e1000\"`查看。 \n\n由于用的是阿里云服务器，虚拟的网卡，查不到具体模块号，图就不上了\n\n如果网卡没有被捕捉到，但系统是支持的，在/etc/modprobe.d/下建立ether.conf文件：\n```\nvim /etc/modprobe.d/ether.conf\n修改文件：\nalias(网卡名) eth0 e1000(模块号)\nalias(网卡名) eth1 e1000(模块号)\n\nsync; reboot```\n重启后**ifconfig**查看相关信息。\n\n---\n## 网络参数与配置文件对应关系\n\n|网络参数|主要配置文件|重要参数|\n|--|--|---|\n|IP Netmask<br>DHCP<br>Gateway等|/etc/sysconfig/network-scripts/ifcfg-eth0|DEVICE=网卡名<br>BOOTPROTO=是否dhcp<br>HWADDR=IP地址<br>NETMASK=子网掩码<br>ONBOOT=是否默认启动此接口<br>GATEWAY=网关<br>NM_CONTROLLED=额外网管软件(不建议使用)|\n|主机名|/etc/sysconfig/network|NETWORKING=是否使用网络<br>NETWORKING_IPV6=是否支持ipv6<br>HOSTNAME=主机名|\n|DNS IP|/etc/resolv.conf|Name Server DNS的IP地址|\n|私有(公网)IP对应的主机名|/etc/hosts|私有主机名 别名|\n\n---\n## /etc/services \n**/etc/services**此文件记录了构建在TCP/IP上面的各种协议，包括HTTP、FTP、Telnet等，以及服务器所定义的端口，定义新端口也要修改此文件。\n\n## 重启整个网络： \n```\n/etc/init.d/network restart (或service network restart)(centos7以下) \nsystemctl restart network(centos7以上) \n开启关闭某个网络接口： \nifup eth0 （ifdown eth0）(centos7以下)```\n\n---\n# IP及子网划分\n把这部分归为硬件篇是因为比较少去使用，也没有单独开一篇网络。\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172545770.png)\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172609407.png)\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172627309.png)\n\n---\n\n\n\n\n","source":"_posts/系统管理/2016-12-12-Linux-硬件篇.md","raw":"---\ntitle: Linux 硬件篇\ncategories:\n  - 系统管理\ntags:\n  - Linux 硬件篇\ntop: 10\nabbrlink: 37486\ndate: 2016-12-12 17:10:36\nkeywords:\n---\n\n# 网卡\n学习鸟哥Linux，积累的一点点知识\n\n\n## 内核捕捉到得网卡信息：\n\n确认内核捕捉到了网卡 ：`dmesg |grep -in eth`\n其他设备方法差不多。 \n\n## 查询设备芯片： `lspci `\n\n查看内核是否顺利加载：`lsmod | grep \"对应模块号，比如e1000\"` \n模块的相关信息可以用：`modinfo \"对应模块号，比如e1000\"`查看。 \n\n由于用的是阿里云服务器，虚拟的网卡，查不到具体模块号，图就不上了\n\n如果网卡没有被捕捉到，但系统是支持的，在/etc/modprobe.d/下建立ether.conf文件：\n```\nvim /etc/modprobe.d/ether.conf\n修改文件：\nalias(网卡名) eth0 e1000(模块号)\nalias(网卡名) eth1 e1000(模块号)\n\nsync; reboot```\n重启后**ifconfig**查看相关信息。\n\n---\n## 网络参数与配置文件对应关系\n\n|网络参数|主要配置文件|重要参数|\n|--|--|---|\n|IP Netmask<br>DHCP<br>Gateway等|/etc/sysconfig/network-scripts/ifcfg-eth0|DEVICE=网卡名<br>BOOTPROTO=是否dhcp<br>HWADDR=IP地址<br>NETMASK=子网掩码<br>ONBOOT=是否默认启动此接口<br>GATEWAY=网关<br>NM_CONTROLLED=额外网管软件(不建议使用)|\n|主机名|/etc/sysconfig/network|NETWORKING=是否使用网络<br>NETWORKING_IPV6=是否支持ipv6<br>HOSTNAME=主机名|\n|DNS IP|/etc/resolv.conf|Name Server DNS的IP地址|\n|私有(公网)IP对应的主机名|/etc/hosts|私有主机名 别名|\n\n---\n## /etc/services \n**/etc/services**此文件记录了构建在TCP/IP上面的各种协议，包括HTTP、FTP、Telnet等，以及服务器所定义的端口，定义新端口也要修改此文件。\n\n## 重启整个网络： \n```\n/etc/init.d/network restart (或service network restart)(centos7以下) \nsystemctl restart network(centos7以上) \n开启关闭某个网络接口： \nifup eth0 （ifdown eth0）(centos7以下)```\n\n---\n# IP及子网划分\n把这部分归为硬件篇是因为比较少去使用，也没有单独开一篇网络。\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172545770.png)\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172609407.png)\n![](http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172627309.png)\n\n---\n\n\n\n\n","slug":"系统管理-2016-12-12-Linux-硬件篇","published":1,"updated":"2016-12-12T09:34:46.393Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwlvwllh009kd8pkl5cxkklj","content":"<script src=\"/assets/js/DPlayer.min.js\"> </script><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"网卡\"><a href=\"#网卡\" class=\"headerlink\" title=\"网卡\"></a>网卡</h1><p>学习鸟哥Linux，积累的一点点知识</p>\n<h2 id=\"内核捕捉到得网卡信息：\"><a href=\"#内核捕捉到得网卡信息：\" class=\"headerlink\" title=\"内核捕捉到得网卡信息：\"></a>内核捕捉到得网卡信息：</h2><p>确认内核捕捉到了网卡 ：<code>dmesg |grep -in eth</code><br>其他设备方法差不多。 </p>\n<h2 id=\"查询设备芯片：-lspci\"><a href=\"#查询设备芯片：-lspci\" class=\"headerlink\" title=\"查询设备芯片： lspci\"></a>查询设备芯片： <code>lspci</code></h2><p>查看内核是否顺利加载：<code>lsmod | grep &quot;对应模块号，比如e1000&quot;</code><br>模块的相关信息可以用：<code>modinfo &quot;对应模块号，比如e1000&quot;</code>查看。 </p>\n<p>由于用的是阿里云服务器，虚拟的网卡，查不到具体模块号，图就不上了</p>\n<p>如果网卡没有被捕捉到，但系统是支持的，在/etc/modprobe.d/下建立ether.conf文件：<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">vim</span> /<span class=\"selector-tag\">etc</span>/<span class=\"selector-tag\">modprobe</span><span class=\"selector-class\">.d</span>/<span class=\"selector-tag\">ether</span><span class=\"selector-class\">.conf</span></div><div class=\"line\">修改文件：</div><div class=\"line\"><span class=\"selector-tag\">alias</span>(网卡名) <span class=\"selector-tag\">eth0</span> <span class=\"selector-tag\">e1000</span>(模块号)</div><div class=\"line\"><span class=\"selector-tag\">alias</span>(网卡名) <span class=\"selector-tag\">eth1</span> <span class=\"selector-tag\">e1000</span>(模块号)</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">sync</span>; <span class=\"selector-tag\">reboot</span></div></pre></td></tr></table></figure></p>\n<p>重启后<strong>ifconfig</strong>查看相关信息。</p>\n<hr>\n<h2 id=\"网络参数与配置文件对应关系\"><a href=\"#网络参数与配置文件对应关系\" class=\"headerlink\" title=\"网络参数与配置文件对应关系\"></a>网络参数与配置文件对应关系</h2><table>\n<thead>\n<tr>\n<th>网络参数</th>\n<th>主要配置文件</th>\n<th>重要参数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IP Netmask<br>DHCP<br>Gateway等</td>\n<td>/etc/sysconfig/network-scripts/ifcfg-eth0</td>\n<td>DEVICE=网卡名<br>BOOTPROTO=是否dhcp<br>HWADDR=IP地址<br>NETMASK=子网掩码<br>ONBOOT=是否默认启动此接口<br>GATEWAY=网关<br>NM_CONTROLLED=额外网管软件(不建议使用)</td>\n</tr>\n<tr>\n<td>主机名</td>\n<td>/etc/sysconfig/network</td>\n<td>NETWORKING=是否使用网络<br>NETWORKING_IPV6=是否支持ipv6<br>HOSTNAME=主机名</td>\n</tr>\n<tr>\n<td>DNS IP</td>\n<td>/etc/resolv.conf</td>\n<td>Name Server DNS的IP地址</td>\n</tr>\n<tr>\n<td>私有(公网)IP对应的主机名</td>\n<td>/etc/hosts</td>\n<td>私有主机名 别名</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"etc-services\"><a href=\"#etc-services\" class=\"headerlink\" title=\"/etc/services\"></a>/etc/services</h2><p><strong>/etc/services</strong>此文件记录了构建在TCP/IP上面的各种协议，包括HTTP、FTP、Telnet等，以及服务器所定义的端口，定义新端口也要修改此文件。</p>\n<h2 id=\"重启整个网络：\"><a href=\"#重启整个网络：\" class=\"headerlink\" title=\"重启整个网络：\"></a>重启整个网络：</h2><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/network <span class=\"built_in\">restart</span> (或service network <span class=\"built_in\">restart</span>)(centos7以下) </div><div class=\"line\">systemctl <span class=\"built_in\">restart</span> network(centos7以上) </div><div class=\"line\">开启关闭某个网络接口： </div><div class=\"line\">ifup eth0 （ifdown eth0）(centos7以下)</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"IP及子网划分\"><a href=\"#IP及子网划分\" class=\"headerlink\" title=\"IP及子网划分\"></a>IP及子网划分</h1><p>把这部分归为硬件篇是因为比较少去使用，也没有单独开一篇网络。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172545770.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172609407.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172627309.png\" alt=\"\"></p>\n<hr>\n","excerpt":"","more":"<h1 id=\"网卡\"><a href=\"#网卡\" class=\"headerlink\" title=\"网卡\"></a>网卡</h1><p>学习鸟哥Linux，积累的一点点知识</p>\n<h2 id=\"内核捕捉到得网卡信息：\"><a href=\"#内核捕捉到得网卡信息：\" class=\"headerlink\" title=\"内核捕捉到得网卡信息：\"></a>内核捕捉到得网卡信息：</h2><p>确认内核捕捉到了网卡 ：<code>dmesg |grep -in eth</code><br>其他设备方法差不多。 </p>\n<h2 id=\"查询设备芯片：-lspci\"><a href=\"#查询设备芯片：-lspci\" class=\"headerlink\" title=\"查询设备芯片： lspci\"></a>查询设备芯片： <code>lspci</code></h2><p>查看内核是否顺利加载：<code>lsmod | grep &quot;对应模块号，比如e1000&quot;</code><br>模块的相关信息可以用：<code>modinfo &quot;对应模块号，比如e1000&quot;</code>查看。 </p>\n<p>由于用的是阿里云服务器，虚拟的网卡，查不到具体模块号，图就不上了</p>\n<p>如果网卡没有被捕捉到，但系统是支持的，在/etc/modprobe.d/下建立ether.conf文件：<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">vim</span> /<span class=\"selector-tag\">etc</span>/<span class=\"selector-tag\">modprobe</span><span class=\"selector-class\">.d</span>/<span class=\"selector-tag\">ether</span><span class=\"selector-class\">.conf</span></div><div class=\"line\">修改文件：</div><div class=\"line\"><span class=\"selector-tag\">alias</span>(网卡名) <span class=\"selector-tag\">eth0</span> <span class=\"selector-tag\">e1000</span>(模块号)</div><div class=\"line\"><span class=\"selector-tag\">alias</span>(网卡名) <span class=\"selector-tag\">eth1</span> <span class=\"selector-tag\">e1000</span>(模块号)</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">sync</span>; <span class=\"selector-tag\">reboot</span></div></pre></td></tr></table></figure></p>\n<p>重启后<strong>ifconfig</strong>查看相关信息。</p>\n<hr>\n<h2 id=\"网络参数与配置文件对应关系\"><a href=\"#网络参数与配置文件对应关系\" class=\"headerlink\" title=\"网络参数与配置文件对应关系\"></a>网络参数与配置文件对应关系</h2><table>\n<thead>\n<tr>\n<th>网络参数</th>\n<th>主要配置文件</th>\n<th>重要参数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IP Netmask<br>DHCP<br>Gateway等</td>\n<td>/etc/sysconfig/network-scripts/ifcfg-eth0</td>\n<td>DEVICE=网卡名<br>BOOTPROTO=是否dhcp<br>HWADDR=IP地址<br>NETMASK=子网掩码<br>ONBOOT=是否默认启动此接口<br>GATEWAY=网关<br>NM_CONTROLLED=额外网管软件(不建议使用)</td>\n</tr>\n<tr>\n<td>主机名</td>\n<td>/etc/sysconfig/network</td>\n<td>NETWORKING=是否使用网络<br>NETWORKING_IPV6=是否支持ipv6<br>HOSTNAME=主机名</td>\n</tr>\n<tr>\n<td>DNS IP</td>\n<td>/etc/resolv.conf</td>\n<td>Name Server DNS的IP地址</td>\n</tr>\n<tr>\n<td>私有(公网)IP对应的主机名</td>\n<td>/etc/hosts</td>\n<td>私有主机名 别名</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"etc-services\"><a href=\"#etc-services\" class=\"headerlink\" title=\"/etc/services\"></a>/etc/services</h2><p><strong>/etc/services</strong>此文件记录了构建在TCP/IP上面的各种协议，包括HTTP、FTP、Telnet等，以及服务器所定义的端口，定义新端口也要修改此文件。</p>\n<h2 id=\"重启整个网络：\"><a href=\"#重启整个网络：\" class=\"headerlink\" title=\"重启整个网络：\"></a>重启整个网络：</h2><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">/etc/init.d/network <span class=\"built_in\">restart</span> (或service network <span class=\"built_in\">restart</span>)(centos7以下) </div><div class=\"line\">systemctl <span class=\"built_in\">restart</span> network(centos7以上) </div><div class=\"line\">开启关闭某个网络接口： </div><div class=\"line\">ifup eth0 （ifdown eth0）(centos7以下)</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"IP及子网划分\"><a href=\"#IP及子网划分\" class=\"headerlink\" title=\"IP及子网划分\"></a>IP及子网划分</h1><p>把这部分归为硬件篇是因为比较少去使用，也没有单独开一篇网络。<br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172545770.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172609407.png\" alt=\"\"><br><img src=\"http://ofyfogrgx.bkt.clouddn.com/blog/20161212/172627309.png\" alt=\"\"></p>\n<hr>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ciwlrsjjw0005d8pkbr6ed5nb","category_id":"ciwlrsjk70007d8pkk8a7j9j6","_id":"ciwlrsjkr000gd8pkvujchgsj"},{"post_id":"ciwlrsjk30006d8pkjc8fuk5v","category_id":"ciwlrsjkm000cd8pk0ps012ju","_id":"ciwlrsjl1000nd8pkorz47ojm"},{"post_id":"ciwlrsjka0009d8pk5vts9fae","category_id":"ciwlrsjkv000id8pkci6dk0n8","_id":"ciwlrsjlf000td8pkwnlc2dbw"},{"post_id":"ciwlrsjki000ad8pkg9eazwic","category_id":"ciwlrsjl1000od8pk91luf52x","_id":"ciwlrsjlo000yd8pk5mxbyc0p"},{"post_id":"ciwlrsjkk000bd8pkx1wzcowu","category_id":"ciwlrsjkv000id8pkci6dk0n8","_id":"ciwlrsjlt0014d8pk0af2gfni"},{"post_id":"ciwlrsjko000fd8pkgoa472em","category_id":"ciwlrsjkv000id8pkci6dk0n8","_id":"ciwlrsjm2001bd8pkpfu97wym"},{"post_id":"ciwlrsjks000hd8pk4xyw6pmu","category_id":"ciwlrsjkv000id8pkci6dk0n8","_id":"ciwlrsjm6001gd8pkjr33nj97"},{"post_id":"ciwlrsjky000kd8pk460sjhts","category_id":"ciwlrsjm2001cd8pkvr3epcs5","_id":"ciwlrsjmb001ld8pk38jk69aq"},{"post_id":"ciwlrsjkz000md8pka7t7govc","category_id":"ciwlrsjm7001id8pku727gn4m","_id":"ciwlrsjmh001sd8pk3ctzx4uk"},{"post_id":"ciwlrsjl2000qd8pk8kwjpjyq","category_id":"ciwlrsjmd001nd8pk5ooztc39","_id":"ciwlrsjmq001yd8pkbcjt1kie"},{"post_id":"ciwlrsjle000sd8pkl0jf8dgj","category_id":"ciwlrsjmi001td8pkgdqiq3wl","_id":"ciwlrsjn00025d8pkcm99s0no"},{"post_id":"ciwlrsjlh000wd8pk4ics0v6d","category_id":"ciwlrsjmi001td8pkgdqiq3wl","_id":"ciwlrsjn7002cd8pkma9w94gi"},{"post_id":"ciwlrsjln000xd8pkeddrs4wx","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjnf002jd8pkqplh09w0"},{"post_id":"ciwlrsjlp0010d8pkcnqkxpxm","category_id":"ciwlrsjmi001td8pkgdqiq3wl","_id":"ciwlrsjnn002pd8pk4b7jwi2u"},{"post_id":"ciwlrsjlr0013d8pkscjqit0v","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjnv002vd8pky16q7wap"},{"post_id":"ciwlrsjlu0017d8pkzvomaooo","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjnz002zd8pkrvgrxip2"},{"post_id":"ciwlrsjly001ad8pkmaj1j079","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjo30036d8pk9r3cjuqs"},{"post_id":"ciwlrsjm2001dd8pk7kee97yx","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjo6003bd8pky18utoiv"},{"post_id":"ciwlrsjm5001fd8pk4e9qm1x0","category_id":"ciwlrsjo40038d8pka6eug2ra","_id":"ciwlrsjoc003id8pkrzdndgma"},{"post_id":"ciwlrsjm6001hd8pkrcaomw63","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjok003pd8pkrewuqeok"},{"post_id":"ciwlrsjm9001kd8pk9ukmybq2","category_id":"ciwlrsjo40038d8pka6eug2ra","_id":"ciwlrsjon003ud8pkojfzbviy"},{"post_id":"ciwlrsjmb001md8pkwrktqxdp","category_id":"ciwlrsjn00026d8pkliihe9b7","_id":"ciwlrsjor0040d8pkrp6peyvh"},{"post_id":"ciwlrsjme001pd8pkmt8xyz6u","category_id":"ciwlrsjo40038d8pka6eug2ra","_id":"ciwlrsjow0046d8pkq118ebeg"},{"post_id":"ciwlrsjmg001rd8pkp85mgfsx","category_id":"ciwlrsjo40038d8pka6eug2ra","_id":"ciwlrsjp0004cd8pkr5fbhlx0"},{"post_id":"ciwlrsjmk001ud8pk3nrridhy","category_id":"ciwlrsjo40038d8pka6eug2ra","_id":"ciwlrsjp4004id8pk9p04t5o5"},{"post_id":"ciwlrsjmp001wd8pkz2gb8ll8","category_id":"ciwlrsjo40038d8pka6eug2ra","_id":"ciwlrsjp6004ld8pkksf893yq"},{"post_id":"ciwlrsjmr0020d8pkzfr7132z","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjp8004pd8pkoca5f45i"},{"post_id":"ciwlrsjmv0023d8pkac5356oy","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpa004td8pkw99ki0tw"},{"post_id":"ciwlrsjn10027d8pkmfcusxnr","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpc004xd8pkavo7bl7c"},{"post_id":"ciwlrsjn3002ad8pkgg9a97gi","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpe0051d8pkudp9grmr"},{"post_id":"ciwlrsjnb002dd8pk1sk8eun9","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpf0055d8pkeiv7xatx"},{"post_id":"ciwlrsjnd002gd8pkdq6jn8ju","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpi0059d8pktnebhg85"},{"post_id":"ciwlrsjnf002kd8pku3abhlx6","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpj005cd8pk29s8nryi"},{"post_id":"ciwlrsjni002nd8pkhfaobzxm","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpl005gd8pk1nza61cg"},{"post_id":"ciwlrsjnn002qd8pkqmwuus5z","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpm005kd8pkiyz9m0wo"},{"post_id":"ciwlrsjns002td8pkxnqwtv6h","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpn005nd8pk3p5l7y7j"},{"post_id":"ciwlrsjnv002wd8pko1fqkl7t","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpp005rd8pk2s38g9hu"},{"post_id":"ciwlrsjny002yd8pkwnkn2xco","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpq005vd8pko4p0gfjf"},{"post_id":"ciwlrsjo00031d8pkmw40h9g7","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjpt005zd8pku6i1255v"},{"post_id":"ciwlrsjo10034d8pk76jpljdk","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjpv0063d8pkan5830j1"},{"post_id":"ciwlrsjo30037d8pk7qmj2xc7","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjpw0066d8pks1320u16"},{"post_id":"ciwlrsjo5003ad8pktsr1zsss","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjpz006ad8pkl8pwe66g"},{"post_id":"ciwlrsjo6003cd8pk3lhuitns","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjq0006ed8pkwlr43c4v"},{"post_id":"ciwlrsjo8003fd8pk9odpvetq","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjq2006id8pk6w3s4dhc"},{"post_id":"ciwlrsjob003hd8pk75tyv9xn","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjq3006ld8pk5rbux35j"},{"post_id":"ciwlrsjoe003md8pk82y5viof","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjq4006nd8pkdvuqgevv"},{"post_id":"ciwlrsjoi003od8pkiwwjpx4p","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjq8006sd8pkqqyg3rvo"},{"post_id":"ciwlrsjol003sd8pkom4qfobz","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjqa006wd8pkfwypy8pk"},{"post_id":"ciwlrsjom003td8pkcmplphcu","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjqb0070d8pkc3ki1mto"},{"post_id":"ciwlrsjoo003wd8pkn578u1cp","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjqd0075d8pkneul3n9k"},{"post_id":"ciwlrsjoq003zd8pk15nga6wt","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjqe0078d8pkwb7eatua"},{"post_id":"ciwlrsjos0043d8pknqxagfyb","category_id":"ciwlrsjqd0076d8pkg5ri793q","_id":"ciwlrsjqg007bd8pkxig21qr0"},{"post_id":"ciwlrsjov0045d8pk02ofc1lc","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlrsjqj007ed8pkj88gbnmf"},{"post_id":"ciwlrsjox0049d8pkwkfxh52n","category_id":"ciwlrsjqd0076d8pkg5ri793q","_id":"ciwlrsjql007hd8pkikxh2aa0"},{"post_id":"ciwlrsjoz004bd8pk4oww5occ","category_id":"ciwlrsjqd0076d8pkg5ri793q","_id":"ciwlrsjqn007kd8pkcxv78pit"},{"post_id":"ciwlrsjp2004fd8pk1qii9jue","category_id":"ciwlrsjqd0076d8pkg5ri793q","_id":"ciwlrsjqo007od8pkewurara9"},{"post_id":"ciwlrsjp3004hd8pkmy5xvqxp","category_id":"ciwlrsjqn007ld8pkt1easnm0","_id":"ciwlrsjqp007sd8pkrrp6hmz6"},{"post_id":"ciwlrsjs10096d8pkgznwd049","category_id":"ciwlrsjp5004jd8pkigepbwgx","_id":"ciwlrsjs40098d8pk703lk1lt"},{"post_id":"ciwlvwllh009kd8pkl5cxkklj","category_id":"ciwlrsjpp005sd8pk2aosw8xo","_id":"ciwlvwllr009md8pk7j3fmwvg"}],"PostTag":[{"post_id":"ciwlrsjjw0005d8pkbr6ed5nb","tag_id":"ciwlrsjk80008d8pk0c7htdcm","_id":"ciwlrsjko000ed8pk5zseioe4"},{"post_id":"ciwlrsjk30006d8pkjc8fuk5v","tag_id":"ciwlrsjkm000dd8pkp8gfmbz2","_id":"ciwlrsjkz000ld8pkteb820zz"},{"post_id":"ciwlrsjka0009d8pk5vts9fae","tag_id":"ciwlrsjkx000jd8pkggr866t6","_id":"ciwlrsjld000rd8pkkylz88ss"},{"post_id":"ciwlrsjln000xd8pkeddrs4wx","tag_id":"ciwlrsjkx000jd8pkggr866t6","_id":"ciwlrsjlr0012d8pkrh1cnss8"},{"post_id":"ciwlrsjki000ad8pkg9eazwic","tag_id":"ciwlrsjl1000pd8pkhmzfw8j7","_id":"ciwlrsjlt0015d8pkym7uuw7d"},{"post_id":"ciwlrsjki000ad8pkg9eazwic","tag_id":"ciwlrsjlg000vd8pkh571fcvx","_id":"ciwlrsjlx0019d8pkjc99o32l"},{"post_id":"ciwlrsjm9001kd8pk9ukmybq2","tag_id":"ciwlrsjkx000jd8pkggr866t6","_id":"ciwlrsjme001od8pk3jswqziu"},{"post_id":"ciwlrsjkk000bd8pkx1wzcowu","tag_id":"ciwlrsjlq0011d8pknzzv9ppv","_id":"ciwlrsjmq001xd8pk97ml0axq"},{"post_id":"ciwlrsjkk000bd8pkx1wzcowu","tag_id":"ciwlrsjlv0018d8pko0kjnghr","_id":"ciwlrsjmt0021d8pk60bhik5v"},{"post_id":"ciwlrsjkk000bd8pkx1wzcowu","tag_id":"ciwlrsjm4001ed8pks2qczg73","_id":"ciwlrsjmz0024d8pk9fvt3tk4"},{"post_id":"ciwlrsjkk000bd8pkx1wzcowu","tag_id":"ciwlrsjm9001jd8pk5et8su3c","_id":"ciwlrsjn20028d8pkdg8i5htf"},{"post_id":"ciwlrsjkk000bd8pkx1wzcowu","tag_id":"ciwlrsjmf001qd8pkva6udy45","_id":"ciwlrsjn6002bd8pkqznp5lia"},{"post_id":"ciwlrsjko000fd8pkgoa472em","tag_id":"ciwlrsjmo001vd8pkkk2cw1pm","_id":"ciwlrsjnd002fd8pk0134eyv6"},{"post_id":"ciwlrsjko000fd8pkgoa472em","tag_id":"ciwlrsjmu0022d8pkcj5ca3dj","_id":"ciwlrsjne002id8pkh3cnnk4x"},{"post_id":"ciwlrsjks000hd8pk4xyw6pmu","tag_id":"ciwlrsjn20029d8pkyq17coxe","_id":"ciwlrsjng002md8pk77ohzg04"},{"post_id":"ciwlrsjky000kd8pk460sjhts","tag_id":"ciwlrsjne002hd8pks05jpo21","_id":"ciwlrsjnp002sd8pk6kluokw8"},{"post_id":"ciwlrsjkz000md8pka7t7govc","tag_id":"ciwlrsjnm002od8pkhyty4yhd","_id":"ciwlrsjo10033d8pkcqqwfg49"},{"post_id":"ciwlrsjkz000md8pka7t7govc","tag_id":"ciwlrsjnu002ud8pkzfhzsjyh","_id":"ciwlrsjo30035d8pk012y8w5e"},{"post_id":"ciwlrsjl2000qd8pk8kwjpjyq","tag_id":"ciwlrsjnz0030d8pkusjy5awk","_id":"ciwlrsjoa003gd8pkwrkelohf"},{"post_id":"ciwlrsjl2000qd8pk8kwjpjyq","tag_id":"ciwlrsjo40039d8pkw2ldnrib","_id":"ciwlrsjoc003jd8pkwre8dbtx"},{"post_id":"ciwlrsjle000sd8pkl0jf8dgj","tag_id":"ciwlrsjo8003ed8pktp016s29","_id":"ciwlrsjog003nd8pk7s89cr8h"},{"post_id":"ciwlrsjlh000wd8pk4ics0v6d","tag_id":"ciwlrsjod003ld8pkvakeezeo","_id":"ciwlrsjop003yd8pkywa4r2cw"},{"post_id":"ciwlrsjlh000wd8pk4ics0v6d","tag_id":"ciwlrsjok003rd8pkxypscceu","_id":"ciwlrsjos0042d8pkokvf9aux"},{"post_id":"ciwlrsjlp0010d8pkcnqkxpxm","tag_id":"ciwlrsjop003xd8pkrav7rb2j","_id":"ciwlrsjow0047d8pkir39wvft"},{"post_id":"ciwlrsjlr0013d8pkscjqit0v","tag_id":"ciwlrsjou0044d8pkaqway6yd","_id":"ciwlrsjp1004ed8pkkfayocss"},{"post_id":"ciwlrsjlu0017d8pkzvomaooo","tag_id":"ciwlrsjoy004ad8pki44a4sen","_id":"ciwlrsjp5004kd8pku38krckp"},{"post_id":"ciwlrsjly001ad8pkmaj1j079","tag_id":"ciwlrsjp3004gd8pkpo90xzlh","_id":"ciwlrsjp7004od8pkc747ux4s"},{"post_id":"ciwlrsjm2001dd8pk7kee97yx","tag_id":"ciwlrsjp6004md8pk6h17bvm2","_id":"ciwlrsjpa004sd8pkr2m1wg0c"},{"post_id":"ciwlrsjm5001fd8pk4e9qm1x0","tag_id":"ciwlrsjp8004qd8pkx847b3v6","_id":"ciwlrsjpc004wd8pkdlat9m6z"},{"post_id":"ciwlrsjm6001hd8pkrcaomw63","tag_id":"ciwlrsjpb004vd8pkxzaevn3f","_id":"ciwlrsjpd0050d8pkazu75q1x"},{"post_id":"ciwlrsjmb001md8pkwrktqxdp","tag_id":"ciwlrsjpd004zd8pkn3tl94qp","_id":"ciwlrsjpf0054d8pkue280xlm"},{"post_id":"ciwlrsjme001pd8pkmt8xyz6u","tag_id":"ciwlrsjpe0053d8pkszf055gm","_id":"ciwlrsjpi0058d8pkjf5up2ff"},{"post_id":"ciwlrsjmg001rd8pkp85mgfsx","tag_id":"ciwlrsjph0057d8pk0xab6a7x","_id":"ciwlrsjpk005dd8pkan570hpo"},{"post_id":"ciwlrsjmk001ud8pk3nrridhy","tag_id":"ciwlrsjpj005bd8pkd3io8431","_id":"ciwlrsjpl005id8pksxca6o9y"},{"post_id":"ciwlrsjmp001wd8pkz2gb8ll8","tag_id":"ciwlrsjpk005fd8pkeqlfnhj8","_id":"ciwlrsjpn005md8pkfz45bwcw"},{"post_id":"ciwlrsjmr0020d8pkzfr7132z","tag_id":"ciwlrsjpm005jd8pkdp526s35","_id":"ciwlrsjpo005qd8pkv480vvd5"},{"post_id":"ciwlrsjmv0023d8pkac5356oy","tag_id":"ciwlrsjpn005od8pk0lkofhya","_id":"ciwlrsjpq005ud8pknnnaqd3p"},{"post_id":"ciwlrsjn10027d8pkmfcusxnr","tag_id":"ciwlrsjpp005td8pkdhcujr72","_id":"ciwlrsjps005yd8pklbkf5umq"},{"post_id":"ciwlrsjn3002ad8pkgg9a97gi","tag_id":"ciwlrsjps005xd8pka236smg1","_id":"ciwlrsjpv0062d8pkpv2jz6z4"},{"post_id":"ciwlrsjnb002dd8pk1sk8eun9","tag_id":"ciwlrsjpt0061d8pkoroebyfr","_id":"ciwlrsjpz0069d8pk5nyp6aph"},{"post_id":"ciwlrsjnb002dd8pk1sk8eun9","tag_id":"ciwlrsjpw0065d8pk3qv858w8","_id":"ciwlrsjpz006cd8pkjw7no1nh"},{"post_id":"ciwlrsjnd002gd8pkdq6jn8ju","tag_id":"ciwlrsjpy0068d8pkle6rlntc","_id":"ciwlrsjq0006fd8pkiu2brmle"},{"post_id":"ciwlrsjnf002kd8pku3abhlx6","tag_id":"ciwlrsjq0006dd8pklo4z4zyl","_id":"ciwlrsjq7006qd8pksdb0rj1k"},{"post_id":"ciwlrsjnf002kd8pku3abhlx6","tag_id":"ciwlrsjq1006hd8pkbkidtzvm","_id":"ciwlrsjq8006rd8pk2dm8su84"},{"post_id":"ciwlrsjnf002kd8pku3abhlx6","tag_id":"ciwlrsjq2006kd8pkvhawhoo5","_id":"ciwlrsjq9006vd8pkt8sulhs3"},{"post_id":"ciwlrsjni002nd8pkhfaobzxm","tag_id":"ciwlrsjq4006od8pkvknkl2k2","_id":"ciwlrsjqb006zd8pkqb7lmg9j"},{"post_id":"ciwlrsjni002nd8pkhfaobzxm","tag_id":"ciwlrsjq9006ud8pkxjwdgzxa","_id":"ciwlrsjqc0072d8pkrsjhjr8v"},{"post_id":"ciwlrsjnn002qd8pkqmwuus5z","tag_id":"ciwlrsjqa006yd8pkkaf2na1o","_id":"ciwlrsjqd0074d8pkvscd2z4w"},{"post_id":"ciwlrsjns002td8pkxnqwtv6h","tag_id":"ciwlrsjqc0073d8pk5yasek92","_id":"ciwlrsjqn007md8pknw8q2y4i"},{"post_id":"ciwlrsjns002td8pkxnqwtv6h","tag_id":"ciwlrsjqe0077d8pk4kfh1c9d","_id":"ciwlrsjqo007nd8pkg85ofp7c"},{"post_id":"ciwlrsjns002td8pkxnqwtv6h","tag_id":"ciwlrsjqf007ad8pk7gs9psqb","_id":"ciwlrsjqp007qd8pkzlaa3mq6"},{"post_id":"ciwlrsjns002td8pkxnqwtv6h","tag_id":"ciwlrsjqi007dd8pka8mqwet6","_id":"ciwlrsjqp007rd8pkp28cyvza"},{"post_id":"ciwlrsjns002td8pkxnqwtv6h","tag_id":"ciwlrsjql007gd8pk1aiszez9","_id":"ciwlrsjqq007ud8pkf2ymak6o"},{"post_id":"ciwlrsjnv002wd8pko1fqkl7t","tag_id":"ciwlrsjqm007jd8pkqty4mj0f","_id":"ciwlrsjqq007vd8pko6v1ycyz"},{"post_id":"ciwlrsjny002yd8pkwnkn2xco","tag_id":"ciwlrsjqo007pd8pkj7br2n46","_id":"ciwlrsjqr007xd8pkuzoijld6"},{"post_id":"ciwlrsjny002yd8pkwnkn2xco","tag_id":"ciwlrsjqp007td8pk8nhvmjam","_id":"ciwlrsjqr007yd8pk0gc2ul23"},{"post_id":"ciwlrsjo00031d8pkmw40h9g7","tag_id":"ciwlrsjqq007wd8pky12jt6xb","_id":"ciwlrsjqs0080d8pkuow0zbbu"},{"post_id":"ciwlrsjo10034d8pk76jpljdk","tag_id":"ciwlrsjqr007zd8pkuspqt2yn","_id":"ciwlrsjqs0082d8pkd1opmyw2"},{"post_id":"ciwlrsjo30037d8pk7qmj2xc7","tag_id":"ciwlrsjqs0081d8pkntxjf8la","_id":"ciwlrsjr10084d8pk89mg1x89"},{"post_id":"ciwlrsjo5003ad8pktsr1zsss","tag_id":"ciwlrsjqt0083d8pkwbo0yh27","_id":"ciwlrsjr20086d8pkxs22tmlx"},{"post_id":"ciwlrsjo6003cd8pk3lhuitns","tag_id":"ciwlrsjr10085d8pkxdr8bd5q","_id":"ciwlrsjr40088d8pk0bmpb9h6"},{"post_id":"ciwlrsjo8003fd8pk9odpvetq","tag_id":"ciwlrsjr20087d8pk952h3qpo","_id":"ciwlrsjr6008bd8pkejavch35"},{"post_id":"ciwlrsjo8003fd8pk9odpvetq","tag_id":"ciwlrsjr50089d8pknm6a2oxf","_id":"ciwlrsjr6008cd8pktjjl4yii"},{"post_id":"ciwlrsjob003hd8pk75tyv9xn","tag_id":"ciwlrsjr5008ad8pkijgjtdvf","_id":"ciwlrsjr7008ed8pk18oz727a"},{"post_id":"ciwlrsjoe003md8pk82y5viof","tag_id":"ciwlrsjr6008dd8pk8ygko0bb","_id":"ciwlrsjr7008gd8pkni267pp3"},{"post_id":"ciwlrsjoi003od8pkiwwjpx4p","tag_id":"ciwlrsjr7008fd8pk31db5hba","_id":"ciwlrsjr8008id8pkrzyb9ntz"},{"post_id":"ciwlrsjol003sd8pkom4qfobz","tag_id":"ciwlrsjr8008hd8pkg93jdghv","_id":"ciwlrsjr9008kd8pkq9yx2zy1"},{"post_id":"ciwlrsjom003td8pkcmplphcu","tag_id":"ciwlrsjr8008jd8pkfiicfa03","_id":"ciwlrsjra008md8pkc0k9bmu1"},{"post_id":"ciwlrsjoo003wd8pkn578u1cp","tag_id":"ciwlrsjr9008ld8pkko5tv539","_id":"ciwlrsjra008od8pktvvlfw2m"},{"post_id":"ciwlrsjoq003zd8pk15nga6wt","tag_id":"ciwlrsjra008nd8pkiv1iebq5","_id":"ciwlrsjrc008rd8pkvxo1bjgu"},{"post_id":"ciwlrsjoq003zd8pk15nga6wt","tag_id":"ciwlrsjrb008pd8pkwz9x6tp3","_id":"ciwlrsjrc008sd8pkgtqaty5v"},{"post_id":"ciwlrsjos0043d8pknqxagfyb","tag_id":"ciwlrsjrb008qd8pkc46otepc","_id":"ciwlrsjrd008ud8pk1zlkddbd"},{"post_id":"ciwlrsjov0045d8pk02ofc1lc","tag_id":"ciwlrsjrc008td8pk6pf87f7q","_id":"ciwlrsjrd008wd8pkhachglfu"},{"post_id":"ciwlrsjox0049d8pkwkfxh52n","tag_id":"ciwlrsjrd008vd8pkrmkb1y52","_id":"ciwlrsjre008yd8pkzulwnp3q"},{"post_id":"ciwlrsjoz004bd8pk4oww5occ","tag_id":"ciwlrsjre008xd8pknlv9gyxo","_id":"ciwlrsjrf0090d8pkbsre6u8o"},{"post_id":"ciwlrsjp3004hd8pkmy5xvqxp","tag_id":"ciwlrsjre008zd8pkj5o0fyv8","_id":"ciwlrsjrh0093d8pk4hdfefzh"},{"post_id":"ciwlrsjp3004hd8pkmy5xvqxp","tag_id":"ciwlrsjrf0091d8pkhgexxnja","_id":"ciwlrsjrh0094d8pkwhdhxys2"},{"post_id":"ciwlrsjp3004hd8pkmy5xvqxp","tag_id":"ciwlrsjrg0092d8pkg2abgnm6","_id":"ciwlrsjrh0095d8pkr6mgbv15"},{"post_id":"ciwlrsjs10096d8pkgznwd049","tag_id":"ciwlrsjs30097d8pkva7akdvw","_id":"ciwlrsjs7009cd8pkwcyzq608"},{"post_id":"ciwlrsjs10096d8pkgznwd049","tag_id":"ciwlrsjs40099d8pku1fppkvu","_id":"ciwlrsjs7009dd8pkp7zreadl"},{"post_id":"ciwlrsjs10096d8pkgznwd049","tag_id":"ciwlrsjs5009ad8pk78b7dy5h","_id":"ciwlrsjs7009ed8pkus5xbem6"},{"post_id":"ciwlrsjs10096d8pkgznwd049","tag_id":"ciwlrsjs6009bd8pk0sx1jta8","_id":"ciwlrsjs8009fd8pkmm8tj83r"},{"post_id":"ciwlvwllh009kd8pkl5cxkklj","tag_id":"ciwluzspf009hd8pkg88yxk9p","_id":"ciwlvwllq009ld8pkcllfnp37"}],"Tag":[{"name":"Python入门","_id":"ciwlrsjk80008d8pk0c7htdcm"},{"name":"Shell编程入门","_id":"ciwlrsjkm000dd8pkp8gfmbz2"},{"name":"网页链接更新页","_id":"ciwlrsjkx000jd8pkggr866t6"},{"name":"用github写开源书籍","_id":"ciwlrsjl1000pd8pkhmzfw8j7"},{"name":"gitbook","_id":"ciwlrsjlg000vd8pkh571fcvx"},{"name":"jenkins 安装","_id":"ciwlrsjlq0011d8pknzzv9ppv"},{"name":"jenkins参数化构建git","_id":"ciwlrsjlv0018d8pko0kjnghr"},{"name":"Git Parameter Plug-In 插件","_id":"ciwlrsjm4001ed8pks2qczg73"},{"name":"ansible plugin插件","_id":"ciwlrsjm9001jd8pk5et8su3c"},{"name":"Multiple SCMs plugin插件","_id":"ciwlrsjmf001qd8pkva6udy45"},{"name":"React Native","_id":"ciwlrsjmo001vd8pkkk2cw1pm"},{"name":"构建原生APP","_id":"ciwlrsjmu0022d8pkcj5ca3dj"},{"name":"Git教程","_id":"ciwlrsjn20029d8pkyq17coxe"},{"name":"群晖DSM_Synology","_id":"ciwlrsjne002hd8pks05jpo21"},{"name":"穷人VPN","_id":"ciwlrsjnm002od8pkhyty4yhd"},{"name":"免安装VPN","_id":"ciwlrsjnu002ud8pkzfhzsjyh"},{"name":"OpenResty","_id":"ciwlrsjnz0030d8pkusjy5awk"},{"name":"高性能web服务器","_id":"ciwlrsjo40039d8pkw2ldnrib"},{"name":"数据库主主互备（高可用）","_id":"ciwlrsjo8003ed8pktp016s29"},{"name":"MongoDB3.2","_id":"ciwlrsjod003ld8pkvakeezeo"},{"name":"分布式数据库","_id":"ciwlrsjok003rd8pkxypscceu"},{"name":"MySQL常用命令","_id":"ciwlrsjop003xd8pkrav7rb2j"},{"name":"Linux学习流程发展","_id":"ciwlrsjou0044d8pkaqway6yd"},{"name":"高并发系统之降级特技","_id":"ciwlrsjoy004ad8pki44a4sen"},{"name":"工作总结","_id":"ciwlrsjp3004gd8pkpo90xzlh"},{"name":"最佳 Linux 发行版汇总","_id":"ciwlrsjp6004md8pk6h17bvm2"},{"name":"vim常用命令","_id":"ciwlrsjp8004qd8pkx847b3v6"},{"name":"创业的公司","_id":"ciwlrsjpb004vd8pkxzaevn3f"},{"name":"创业手册","_id":"ciwlrsjpd004zd8pkn3tl94qp"},{"name":"工具集","_id":"ciwlrsjpe0053d8pkszf055gm"},{"name":"Linux常见面试题","_id":"ciwlrsjph0057d8pk0xab6a7x"},{"name":"博客中插入音乐_视频","_id":"ciwlrsjpj005bd8pkd3io8431"},{"name":"操作系统常用配置设置","_id":"ciwlrsjpk005fd8pkeqlfnhj8"},{"name":"Centos PHP","_id":"ciwlrsjpm005jd8pkdp526s35"},{"name":"ruby2.3.1安装","_id":"ciwlrsjpn005od8pk0lkofhya"},{"name":"Centos7 lanm","_id":"ciwlrsjpp005td8pkdhcujr72"},{"name":"Node.js","_id":"ciwlrsjps005xd8pka236smg1"},{"name":"Zabbix监控","_id":"ciwlrsjpt0061d8pkoroebyfr"},{"name":"Zabbix Centos7","_id":"ciwlrsjpw0065d8pk3qv858w8"},{"name":"检查Linux服务器性能","_id":"ciwlrsjpy0068d8pkle6rlntc"},{"name":"用Jekyll搭建博客","_id":"ciwlrsjq0006dd8pklo4z4zyl"},{"name":"jekyll github","_id":"ciwlrsjq1006hd8pkbkidtzvm"},{"name":"jekyll Coding","_id":"ciwlrsjq2006kd8pkvhawhoo5"},{"name":"GitLab","_id":"ciwlrsjq4006od8pkvknkl2k2"},{"name":"版本控制","_id":"ciwlrsjq9006ud8pkxjwdgzxa"},{"name":"Tomcat","_id":"ciwlrsjqa006yd8pkkaf2na1o"},{"name":"Mac常用工具","_id":"ciwlrsjqc0073d8pk5yasek92"},{"name":"Homebrew","_id":"ciwlrsjqe0077d8pk4kfh1c9d"},{"name":"wget","_id":"ciwlrsjqf007ad8pk7gs9psqb"},{"name":"zsh","_id":"ciwlrsjqi007dd8pka8mqwet6"},{"name":"xcode","_id":"ciwlrsjql007gd8pk1aiszez9"},{"name":"java jdk环境搭建","_id":"ciwlrsjqm007jd8pkqty4mj0f"},{"name":"搭建shadowsocks服务器","_id":"ciwlrsjqo007pd8pkj7br2n46"},{"name":"搭梯子","_id":"ciwlrsjqp007td8pk8nhvmjam"},{"name":"Linux内核升级","_id":"ciwlrsjqq007wd8pky12jt6xb"},{"name":"grub引导修复","_id":"ciwlrsjqr007zd8pkuspqt2yn"},{"name":"Centos网络端口","_id":"ciwlrsjqs0081d8pkntxjf8la"},{"name":"重装服务器系统基本配置","_id":"ciwlrsjqt0083d8pkwbo0yh27"},{"name":"iptables防火墙","_id":"ciwlrsjr10085d8pkxdr8bd5q"},{"name":"LVM磁盘管理","_id":"ciwlrsjr20087d8pk952h3qpo"},{"name":"LVM扩容","_id":"ciwlrsjr50089d8pknm6a2oxf"},{"name":"swap分区转换","_id":"ciwlrsjr5008ad8pkijgjtdvf"},{"name":"VNC服务","_id":"ciwlrsjr6008dd8pk8ygko0bb"},{"name":"Linux检测硬件信息脚本","_id":"ciwlrsjr7008fd8pk31db5hba"},{"name":"Pytnon版本升级","_id":"ciwlrsjr8008hd8pkg93jdghv"},{"name":"Linux常用命令","_id":"ciwlrsjr8008jd8pkfiicfa03"},{"name":"服务器入侵肉鸡发包","_id":"ciwlrsjr9008ld8pkko5tv539"},{"name":"Linux各版本root本地密码破解","_id":"ciwlrsjra008nd8pkiv1iebq5"},{"name":"root密码破解","_id":"ciwlrsjrb008pd8pkwz9x6tp3"},{"name":"Docker常用命令","_id":"ciwlrsjrb008qd8pkc46otepc"},{"name":"ssh远程重装centos系统","_id":"ciwlrsjrc008td8pk6pf87f7q"},{"name":"Docker安装","_id":"ciwlrsjrd008vd8pkrmkb1y52"},{"name":"KVM","_id":"ciwlrsjre008xd8pknlv9gyxo"},{"name":"集群","_id":"ciwlrsjre008zd8pkj5o0fyv8"},{"name":"自动化","_id":"ciwlrsjrf0091d8pkhgexxnja"},{"name":"堡垒机","_id":"ciwlrsjrg0092d8pkg2abgnm6"},{"name":"用Hexo搭建博客","_id":"ciwlrsjs30097d8pkva7akdvw"},{"name":"Hexo github","_id":"ciwlrsjs40099d8pku1fppkvu"},{"name":"Hexo Coding","_id":"ciwlrsjs5009ad8pk78b7dy5h"},{"name":"Next 定制","_id":"ciwlrsjs6009bd8pk0sx1jta8"},{"name":"Linux 硬件篇","_id":"ciwluzspf009hd8pkg88yxk9p"}]}}